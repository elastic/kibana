[[release-notes]]
= Release Notes

[partintro]
--
// To add a release, copy and paste the template text
// and add a link to the new section. Note that release subheads must
// be floated and sections cannot be empty.

// Use these for links to issue and pulls. Note issues and pulls redirect one to
// each other on Github, so don't worry too much on using the right prefix.
:issue: https://github.com/elastic/kibana/issues/
:pull: https://github.com/elastic/kibana/pull/

This section summarizes the changes in each release.

* <<release-notes-6.8.6>>
* <<release-notes-6.8.5>>
* <<release-notes-6.8.4>>
* <<release-notes-6.8.3>>
* <<release-notes-6.8.2>>
* <<release-notes-6.8.1>>
* <<release-notes-6.8.0>>
* <<release-notes-6.7.2>>
* <<release-notes-6.7.1>>
* <<release-notes-6.7.0>>
* <<release-notes-6.6.2>>
* <<release-notes-6.6.1>>
* <<release-notes-6.6.0>>
* <<release-notes-6.5.4>>
* <<release-notes-6.5.3>>
* <<release-notes-6.5.2>>
* <<release-notes-6.5.1>>
* <<release-notes-6.5.0>>
* <<release-notes-6.4.3>>
* <<release-notes-6.4.2>>
* <<release-notes-6.4.1>>
* <<release-notes-6.4.0>>
* <<release-notes-6.3.2>>
* <<release-notes-6.3.1>>
* <<release-notes-6.3.0>>
* <<release-notes-6.2.4>>
* <<release-notes-6.2.3>>
* <<release-notes-6.2.2>>
* <<release-notes-6.2.1>>
* <<release-notes-6.2.0>>
* <<release-notes-6.1.4>>
* <<release-notes-6.1.3>>
* <<release-notes-6.1.2>>
* <<release-notes-6.1.1>>
* <<release-notes-6.1.0>>
* <<release-notes-6.0.1>>
* <<release-notes-6.0.0>>
* <<release-notes-6.0.0-rc2>>
* <<release-notes-6.0.0-rc1>>
* <<release-notes-6.0.0-beta2>>
* <<release-notes-6.0.0-beta1>>
* <<release-notes-6.0.0-alpha2>>
* <<release-notes-6.0.0-alpha1>>

--

////
// To add a release, copy and paste the following text,  uncomment the relevant
// sections, and add a link to the new section in the list of releases at the
// top of the page. Note that release subheads must be floated and sections
// cannot be empty.
// TEMPLATE:

// [[release-notes-n.n.n]]
// == {kib} n.n.n

//[float]
//[[breaking-n.n.n]]
//=== Breaking Changes

//[float]
//=== Deprecations

//[float]
//=== New Features

//[float]
//=== Enhancements

//[float]
//=== Bug Fixes

//[float]
//=== Regressions

//[float]
//=== Known Issues
////


[[release-notes-6.8.6]]
== {kib} 6.8.6

[float]
[[bug-6.8.6]]
=== Bug fix
Maps::
* Fixes a cross-site scripting (XSS) flaw in Coordinate and Region Map 
visualizations. An attacker could create a malicious visualization that 
executes JavaScript in a victim’s browser when the visualization, or dashboard 
containing the visualization, was viewed. Since Kibana 6.7.0, Content Security 
Policy (CSP), which prevents attackers from using this flaw, is enabled by 
default. However, an attacker can still inject arbitrary HTML into the page. 
See https://www.elastic.co/community/security/, CVE-2019-7621.
* Sanitizes attribution {pull}52309[#52309]


[[release-notes-6.8.5]]
== {kib} 6.8.5

[float]
[[bug-6.8.5]]
=== Bug fixes

Reporting::
* Fixes old backport for content-disposition in reporting {pull}49249[#49249]


[[release-notes-6.8.4]]
== {kib} 6.8.4

[float]
[[bug-6.8.4]]
=== Bug fixes

Machine Learning::
* Automatically applies refresh settings set in URL {pull}47052[#47052]

Monitoring::
* Respects xpack.monitoring.show_license_expiration {pull}45537[#45537]


[[release-notes-6.8.3]]
== {kib} 6.8.3

[float]
[[bug-6.8.3]]
=== Bug fixes
Monitoring::
* Fixes the inability to complete a single `date_histogram` aggregation for `get_nodes` calls {pull}43481[#43481]


[[release-notes-6.8.2]]
== {kib} 6.8.2

[float]
[[bug-6.8.2]]
=== Bug fixes
Canvas::
* Applies global CSS to export workpad view {pull}41298[#41298]
Machine Learning::
* Fixes the URL of the link to the detector function reference page in the docs {pull}35734[#35734]
Operations::
* Introduces two new configurable global socket timeouts {pull}31603[#31603]


[[release-notes-6.8.1]]
== {kib} 6.8.1


Before you migrate your application from one version of Kibana to another, review the <<breaking-changes, breaking changes>>.

[float]
[[bug-6.8.1]]
=== Bug fixes
Monitoring::
* Fixes the inability to use GET /api/stats API when you use query string parameters {pull}36986[#36986]
* Fixes the inability to view the `Completed recoveries` on the Elasticsearch overview page {pull}38543[#38543]
* Removes the use of the `terminate_after` flag for monitoring queries due to overuse {pull}37099[#37099]
* Updates the *Shard Activity* table to display `60 seconds` instead of `1 minute` {pull}38065[#38065]
Machine Learning::
* Fixes the constant polling to `deleting` job tasks {pull}38013[#38013]





[[release-notes-6.8.0]]
== {kib} 6.8.0


See <<breaking-changes, breaking changes>> for the changes to be aware of
when migrating your application from one version of Kibana to another.

[float]
[[enhancements-6.8.0]]
=== Enhancements
Security::
* Updates {kib} to support changes to licensing of security features {pull}35889[#35889]
Visualize::
* Sets a default timeout for all "waitFor" methods {pull}34756[#34756]


[float]
[[bug-6.8.0]]
=== Bug fixes
Index Lifecycle Management::
* Fixes surface shrink action in edit form, if it's already been set on the policy {pull}35987[#35987]
Machine Learning::
* Ensures that `viewByFieldName` is retained on Anomaly Explorer initialize {pull}35815[#35815]





[[release-notes-6.7.2]]
== {kib} 6.7.2


See <<breaking-changes, breaking changes>> for the changes to be aware of
when migrating your application from one version of {kib} to another.


[float]
[[enhancement-6.7.2]]
=== Enhancements
Platform::
* Updates `zh-CN.json` translation {pull}35020[#35020]

[float]
[[bug-6.7.2]]
=== Bug fixes
Canvas::
* Excludes assets from Canvas usage query {pull}34516[#34516]
* Recreates handlers and resets completed state on expression change {pull}33900[#33900]
* Prevents grouping while mouse is down {pull}34448[#34448]
* Waits for DOM element to exist {pull}34475[#34475]
Cross-Cluster Replication::
* Allows user to use CCR when security is not enabled. {pull}35333[#35333]
Discover::
* Adds dark theme for doc viewer to fix dashboard dark mode issue {pull}34632[#34632]
Geo::
* Fixes breadcrumbs in Maps application {pull}34270[#34270]
* Clears data load error when layer gets correct data {pull}34484[#34484]
Index Lifecycle Management::
* Removes "Beta" badge {pull}34454[#34454]
* Fixes crash when zero replicas configured in a phase for policy {pull}34480[#34480]
Infrastructure::
* Fixes metrics chart tooltip alignment {pull}34749[#34749]
Machine Learning::
* Ensures that the cardinality warning in the multi metric job wizard is only shown on validity fail {pull}34874[#34874]
Monitoring::
* Protects against fields not existing in Logstash Nodes listing {pull}34939[#34939]
* Fixes field name for "Events Ingested" in Logstash Node List page {pull}35122[#35122]
Upgrade Assistant::
* Ignores additional warnings handled by Cloud {pull}35005[#35005]
* Shows different interstitial text when cluster is upgraded {pull}34762[#34762]
* Specifies `allow_restricted_indices` for `_has_privileges` {pull}35125[#35125]
Visualizations::
* Fixes filtering on split bucket values in data table visualization {pull}33886[#33886]
* Changes sample data to use `auto_expand_replicas` of `0-1` {pull}33736[#33736]
* Fixes time zone behavior in visualizations {pull}34795[#34795]
* Fixes timepicker problem in Firefox {pull}35279[#35279]




[[release-notes-6.7.1]]
== {kib} 6.7.1


See <<breaking-changes, breaking changes>> for the changes to be aware of
when migrating your application from one version of Kibana to another.

[float]
=== Known issues

Monitoring::
* If you have a version 7.0 monitoring cluster, a version 6.7 production
cluster and {kib} version 6.7.0 or 6.7.1, you cannot see the monitoring data in
{kib}. {issue}34357[#34357]

[float]
[[enhancement--6.7.1]]
=== Enhancements

Canvas::
* Adds display name and help description for progress arg {pull}33819[#33819]


[float]
[[bug-6.7.1]]
=== Bug fixes

Canvas::
* Fixes hover on key-based page back and forth {pull}33631[#33631]
Geo::
* Coerces string doc-values to numbers if used in styling {pull}33657[#33657]
Machine Learning::
* Fixes check to determine whether telemetry is enabled {pull}33975[#33975]
Monitoring::
* Ensures the Pipelines page uses `reactNodeId` {pull}33798[#33798]
* Improves performance of the Logstash Pipeline Viewer {pull}33793[#33793]
Platform::
* Uses `credentials: same-origin` for fetching translations JSON {pull}34036[#34036]
Security::
* Fixes ID validation in Space API {pull}33716[#33716]
* Forces user to re-authenticate if token refresh fails with 400 status code {pull}33774[#33774]
Uptime::
* Removes crosshair synchronization to avoid display bug {pull}33660[#33660]
Visualizations::
* Fixes missing formatting for values in table titles {pull}33566[#33566]
* Allows editing of `editorState` in data panel {pull}33305[#33305]
* Fixes issue with dark theme and visualization legends {pull}34199[#34199]
* Fixes specificity issue with dark theme and visualization legends {pull}34199[#34199]




[[release-notes-6.7.0]]
== {kib} 6.7.0

[float]
=== Known issues

Monitoring::
* If you have a version 7.0 monitoring cluster, a version 6.7 production
cluster and {kib} version 6.7.0 or 6.7.1, you cannot see the monitoring data in
{kib}. {issue}34357[#34357]

[float]
[[breaking-6.7.0]]
=== Breaking changes

Canvas::
* Removes custom WebPack bundles to remove duplicated dependencies. Canvas plugins must now use the Kibana platform. See the https://github.com/elastic/kibana/blob/master/x-pack/plugins/canvas/README.md[README.md] for more information. {pull}30123[#30123]

[float]
[[enhancement-6.7.0]]
=== Enhancements
Canvas::
* Provides significant performance improvements by preventing needless re-rendering in high-level components {pull}31958[#31958]
* Adds time filter support to demodata {pull}31194[#31194]
* Updates demodata to use current and future times {pull}31202[#31202]
* Allows datatables that already look like point series data to be used without the `pointseries` function {pull}28872[#28872]
* Updates keyboard shortcuts {pull}29394[#29394]
* Adds support for `time_zone` in essql {pull}31291[#31291]
* Adds loading indicator and elements panel {pull}32369[#32369]
* Adds bulk upload capability to Asset Manager {pull}29007[#29007]
* Adds options to download a workpad from an active workpad {pull}28131[#28131]
* Adds link to docs and keyboard shortcut cheatsheet to help menu {pull}31335[#31335]
* Shows current workpad in workpad loader {pull}33531[#33531]
Geo::
* Adds GIS plugin (beta) {pull}24804[#24804]
* Adds zoom in/out map controls {pull}29862[#29862]
Infrastructure::
* Add a source settings UI {pull}26786[#26786]
* Adds Discuss feedback links to Infrastructure and Logs {pull}29519[#29519]
Management::
* Adds support for frozen indices to Index Management {pull}28855[#28855]
* Adds `doc_table:hideTimeColumn` advanced setting {pull}23897[#23897]
* Allows select settings to specify labels for their values {pull}29584[#29584]
* Makes badges clickable to filter in index management {pull}29635[#29635]
* Orders {es} Management apps in order of most used to least used {pull}30145[#30145]
* Add Rollup toggle to Index Management {pull}28721[#28721]
* Adds follower badge to Index Management {pull}29177[#29177]
* Adds set priority action support to ILM UI {pull}29205[#29205]
* Updates Console autocomplete to add new actions for ILM and new API for CCR {pull}29183[#29183]
Machine Learning::
* Sets zoom to start of forecast on opening in Single Metric Viewer {pull}29503[#29503]
Operations::
* Implements `built_assets` directory {pull}27468[#27468]
* Corrects intercept of ECONNRESET {pull}31742[#31742]
* Adds button for adding `index.query.default_field` setting to Metricbeat indices {pull}32829[#32829]
* Enables `default_field` fix for Filebeat indices {pull}33439[#33439]
* Adds reindex feature to Upgrade Assistant {pull}27457[#27457]
* Shows interstitial prompt when {es} is upgrading {pull}31309[#31309]
Platform::
* Allows running Kibana against the next major version of {es} {pull}30390[#30390]
* Introduces Chinese translations {pull}29616[#29616]
* Adds README.md for i18n_integrate tool {pull}21035[#21035]
* Adds include option to i18n_check for 3rd party plugins {pull}26963[#26963]
Security::
* Adds token auth provider {pull}26997[#26997]
* Introduces content security policy (CSP) {pull}29545[#29545]
* Adds content security policy strict mode {pull}29856[#29856]
Visualize::
* Enables {kib} query language support for Time Series Visual Builder {pull}26006[#26006]

[float]
[[bug-6.7.0]]
=== Bug fixes
APM::
* Removes shared `metricsFetcher` and minor renames {pull}29071[#29071]
* Removes the milliseconds format for `duration.us` {pull}27890[#27890]
Beats::
* Fixes API for tokens to support any number {pull}30335[#30335]
Canvas::
* Removes backticks in font library {pull}28283[#28283]
* Runs duplicate workpad load one time only {pull}30150[#30150]
* Updates prop types on `RangeArgInput` {pull}31654[#31654]
* Fixes timefilter bugs {pull}31641[#31641]
* Fixes filter clearing on undo/redo {pull}31859[#31859]
* Restores delete as OSX shortcut for deleting elements {pull}32704[#32704]
* Disables progress bar in fullscreen mode {pull}32942[#32942]
* Fixes mapColumn and staticColumn to work with empty tables {pull}33078[#33078]
* Makes Canvas use socket.io polling only {pull}29647[#29647]
* Removes WebSockets from Canvas expressions interpreter {pull}29792[#29792]
* Optimizes Canvas REST calls via batching {pull}29847[#29847]
* Prevents unnecessary re-renders in ElementWrapper {pull}31734[#31734]
* Fixes initializing workpad from WorkpadApp {pull}32163[#32163]
* Fixes context elements issue with Element Stats {pull}32510[#32510]
* Dedupes server functions in batched requests {pull}32712[#32712]
* Fixes `resolved_args` sync issue when deleting a page {pull}32835[#32835]
* Removes `gotoPage` action in favor of `setPage` {pull}33175[#33175]
* Imports and uses `clear` function {pull}32589[#32589]
* Fixes access types from `to` function {pull}32691[#32691]
* Makes model arguments opt-in {pull}28963[#28963]
* Saves workbook assets separately from lighter weight structures {pull}29594[#29594]
* Fixes shortcut EventEmitter leak {pull}31779[#31779]
* Adds larger minimum element size {pull}32106[#32106]
* Fixes element selection on page flip {pull}32111[#32111]
Cross-Cluster Replication::
* Improves the Add Cluster page {pull}29142[#29142]
Infrastructure::
* Reverts ECS changes for 6.7 {pull}31961[#31961]
* Fixes log Rules for AuditD Filebeat Module {pull}28289[#28289]
* Updates WaffleMap legend to use gray/blue gradient {pull}28206[#28206]
* Adds rule for MySQL error and slowlog {pull}28219[#28219]
* Fixes typo in Nginx layout for Metrics Detail page {pull}28601[#28601]
* Updates format of System and Redis log lines to match new format {pull}28415[#28415]
* Fixes log rules for Apache2 errors {pull}28407[#28407]
* Fixes log rules for Nginx errors {pull}28388[#28388]
* Changes diskio bytes and ops for Docker to use derivative {pull}28182[#28182]
* Adds support for dark mode {pull}29133[#29133]
* Adds custom field grouping for Waffle Map {pull}28949[#28949]
* Adds flyout for Log Events {pull}28885[#28885]
* Adds table view for home page {pull}29192[#29192]
* Disables "Add" button on custom "Group by" when field is empty {pull}29779[#29779]
* ECS Migration {pull}28205[#28205]
* Changes link to traces {pull}29972[#29972]
* Adds check to make sure `EuiContextMenu` popover needs to be closed {pull}30105[#30105]
* Fixes row height glitch on mouse over {pull}30744[#30744]
* Fixes group by labels by fixing the field names (post ECS migration) {pull}30416[#30416]
* Cleans up Docker and Kubernetes fields for ECS {pull}31175[#31175]
* Adds a local tsconfig.json to fix implicit typescript project inference {pull}28076[#28076]
* Sets format explicitly in date range queries and aggs {pull}28094[#28094]
* Fixes index presence detection to work in CCS-only setups {pull}28926[#28926]
* Supports read and write data sources from and to saved objects {pull}28016[#28016]
* Stops blocking a URL update from propagating through container {pull}29352[#29352]
* Uses alternative query string serialization function {pull}29361[#29361]
* Removes the Infrastructure breadcrumb from Logs page {pull}29954[#29954]
* Patches the log sample dataset to be compatible with default log sources {pull}30060[#30060]
* Fixes pre-ECS Filebeat module message reconstruction rules {pull}30398[#30398]
* Fixes some Filebeat ECS message formats {pull}31120[#31120]
* Uses the log message field configured in the `yaml` file {pull}32502[#32502]
* Picks the specific fields to be sent strictly upon source config creation {pull}32897[#32897]
* Displays information on waffle map even when squares get smaller {pull}29083[#29083]
* Uses `search:includeFrozen` setting in all requests {pull}29173[#29173]
* Passes index patterns as strings {pull}29927[#29927]
* Allows drag-selecting a timerange to disable autorefresh {pull}29947[#29947]
* Honors `maxConcurrentShardRequests` setting {pull}30049[#30049]
* Fixes z-index problems with waffle map and {kib} Query Language autocompletion {pull}30044[#30044]
* Sets color to transparent if dynamic vector value is null {pull}27821[#27821]
* Fixes table to display name instead of ID {pull}32051[#32051]
* Handles “no metrics” data gracefully {pull}29424[#29424]
Kibana App::
* Removes dollar key stripping from search requests {pull}30483[#30483]
* Adds referenced pipeline aggs to every level of query {pull}31121[#31121]
* Introduces workaround for Vega height bug {pull}31461[#31461]
* Logs courier errors to inspector {pull}29408[#29408]
* Changes saved dashboards so they don’t require saving before running a report {pull}28617[#28617]
* Adds a default sort to the dashboard listing page (asc by title) {pull}29102[#29102]
* Removes unused server functionality from the interpreter {pull}32133[#32133]
* Fixes empty response from functions {pull}31298[#31298]
* Shows actual errors on failed elements and handles null values from functions {pull}32600[#32600]
* Fixes the issue with multi-line horizontal legends that push down the chart into the x axis  {pull}31466[#31466]
* Fixes `buildEsQuery` so it ignores filters if not in index {pull}29880[#29880]
* Uses `date_time` as format for dates in `docvalue_fields` {pull}28499[#28499]
* Fixes the double rendering of data tables with scrollbar {pull}29360[#29360]
* Bumps the max payload size up to 25MB {pull}31974[#31974]
* Implements config for disabling welcome screen {pull}28888[#28888]
* Adds empty migrationVersion to auto-migration objects {pull}29226[#29226]
* Brings back styled name in disabled lab visualization text {pull}27540[#27540]
* Fixes red border around touched inputs {pull}29409[#29409]
* Removes beta label from GA Metricbeat modules {pull}29720[#29720]
Logstash::
* Correctly displays the number of pipeline workers when 0 are saved {pull}33253[#33253]
Machine Learning::
* Adds anomaly marker to charts when gap exists in data {pull}29628[#29628]
* Fixes formatting of values for time of day or week anomalies {pull}32134[#32134]
* Fixes URL to get job stats when getting stats for all jobs {pull}33237[#33237]
* Fixes for user annotations {pull}29448[#29448]
* Fixes double escaping {pull}30492[#30492]
* Fixes Job Audit Messages filter {pull}30490[#30490]
* Removes extra angle bracket in job groups select {pull}28829[#28829]
* Fixes create ingest pipeline label issue {pull}29070[#29070]
* Adds privilege checks to File Data Visualizer {pull}29109[#29109]
* Adds better error reporting when parsing JSON in file dataviz {pull}29123[#29123]
* Fixes job cloning when it has an unknown `created_by` value {pull}29175[#29175]
* Adds ability to override number of sample lines in File Data Visualizer {pull}29214[#29214]
* Fixes overflowing metric values in field cards {pull}29255[#29255]
* Improves handling of recognizer module manifest parsing errors {pull}29322[#29322]
* Switches from Joda to Java timestamp formats {pull}29425[#29425]
* Displays recognizer saved objects errors {pull}29734[#29734]
* Adds ui-select imports {pull}29823[#29823]
* Adds index migration warnings {pull}28938[#28938]
* Adds job deleting optimizations {pull}29848[#29848]
* Fixes hidden timepicker on the settings and data visualizer landing page {pull}30200[#30200]
* Fixes position of job management search bar error {pull}30251[#30251]
* Fixes detector help link in advanced wizard {pull}30641[#30641]
* Fixes issue when selecting new job to continue in real time {pull}30949[#30949]
* Replaces `EuiSuperSelect` in File Data Visualizer {pull}31128[#31128]
* Fixes error when checking privileges for user with no `ml_user` role {pull}31429[#31429]
* Ensures that 'category examples' column contents in the Anomaly Explorer table are easily viewed {pull}28049[#28049]
* Displays the category regex/terms in an expanded row for categorization anomalies {pull}28376[#28376]
* Adds support to File Data Visualizer for index patterns without a time field {pull}28511[#28511]
* Ensures Anomaly Explorer 'Overall' swimlane correctly reflects the 'View by' swimlane time range selection {pull}29469[#29469]
* Localizes new job {pull}25647[#25647]
* Localizes datavisualizer {pull}25527[#25527]
* Localizes job select {pull}27803[#27803]
* Localizes explorer {pull}27805[#27805]
* Localizes components (part 1) {pull}27957[#27957]
* Localizes components (part 5 - JSON tooltips) {pull}27966[#27966]
* Adds telemetry {pull}29121[#29121]
* Adds documentation links to Visualize and Dashboard {pull}31406[#31406]
Management::
* Fixes link to Platinum features in License Management {pull}31945[#31945]
* Fixes index table test {pull}29357[#29357]
* Restores index table test {pull}29368[#29368]
* Fixes React warning about missing prop {pull}30147[#30147]
* Disables actions for threshold alerts that have default `actionType` {pull}31129[#31129]
* Fixes width of Watcher table {pull}30311[#30311]
* Fixes show system indices toggle by turning off others {pull}32258[#32258]
* Translates missing labels in index management {pull}28816[#28816]
* Fixes Watcher `watch_edit_execute_detail` template {pull}28922[#28922]
* Places Rollup Jobs content at the top of the screen instead of vertically centering it {pull}28703[#28703]
* Removes unused ilmHrule classname from ILM {pull}28890[#28890]
* Fixes bug in `xpackInfo` in which keys were being camel-cased during refresh but not during initialization {pull}29304[#29304]
* Disables flaky follower indices API integration tests {pull}30157[#30157]
* Prevents overwriting ILM config {pull}28370[#28370]
* Adds freeze action to ILM UI {pull}28572[#28572]
* Edits for `set_priority` action in ILM UI {pull}29540[#29540]
* Improves a11y for activating phases {pull}30101[#30101]
* Fixes clearing number of replicas from existing policy {pull}31905[#31905]
* Fixes issues with maximum documents and maximum size being set {pull}31998[#31998]
* Disables CCR and Remote Clusters when index management is disabled {pull}32203[#32203]
* Removes duplicate rendered sections {pull}28566[#28566]
* Makes the date in warnings optional for Console {pull}28995[#28995]
* Adds Follower index UI {pull}27936[#27936]
* Fixes plugin order collision {pull}30596[#30596]
* Use a better Aria name in advanced settings {pull}28670[#28670]
Monitoring::
* Fixes Enh/gis telemetry {pull}29346[#29346]
* Collects `xpack.cloud` details {pull}31180[#31180]
* Removes custom code for spaces in telemetry {pull}27903[#27903]
* Fixes issue with EUI table filtering in Monitoring UI {pull}27504[#27504]
* Moves OS info into OSS collection  {pull}28605[#28605]
* Adds support for unlinked deployments {pull}28278[#28278]
* Uses EUITooltips instead of Pivotal UI {pull}29295[#29295]
* Awaits promise properly {pull}29001[#29001]
* Fixes issues with localization {pull}29372[#29372]
* Adds default search fields for each table {pull}29748[#29748]
* Adds flag to enable/disable CCR monitoring UI {pull}28840[#28840]
* Ensures we are showing the cluster name in the breadcrumbs {pull}30087[#30087]
* Restores `mappings.json` {pull}30153[#30153]
* Fixes innocuous error on some monitoring pages {pull}30322[#30322]
* Adds Upgrade Assistant telemetry {pull}28878[#28878]
* Adds telemetry for visualizations by type {pull}28793[#28793]
* Changes null to 0s {pull}29380[#29380]
Observability::
* Fixes misnamed 'Host' filter to 'ID' {pull}32421[#32421]
* Fixes broken test snapshot {pull}32715[#32715]
* Updates targeted index pattern 6.7 {pull}30984[#30984]
* Fixes column repeat issue {pull}30983[#30983]
* Fixes zero render bug {pull}31334[#31334]
* Replaces heartbeat app icon with uptimeApp {pull}32055[#32055]
* Fixes ICMP display in overview page and filter option {pull}32083[#32083]
* Fixes `PingList` component {pull}29014[#29014]
* Adds crosshair sync for monitoring page charts {pull}29023[#29023]
* Changes sparklines to use a histogram instead of line visualization {pull}29018[#29018]
* Fixes total calculation for AllPings {pull}28224[#28224]
* Adds i18n to plugin name in sidebar {pull}32586[#32586]
* Adds uptime monitoring {pull}27552[#27552]
* Renames plugin {pull}28008[#28008]
* Removes beaker icon and updates help text {pull}28018[#28018]
* Adds sort API test result to prevent uncertainty {pull}28544[#28544]
* Fixes for localization {pull}28183[#28183]
* Fixes index count issue {pull}28799[#28799]
* Adds README.md {pull}28948[#28948]
* Implements `EuiSuperDatePicker` {pull}28217[#28217]
* Disables update button for SDP {pull}29150[#29150]
* Fixes "last updated" field {pull}28720[#28720]
* Refactors {es} queries and associated components and endpoints {pull}29374[#29374]
* Deletes stacked RTT chart {pull}29446[#29446]
* Uses EUI color palette for charts and histograms {pull}29439[#29439]
* Allows filter dropdown search for ID and removes client-side size limits {pull}29557[#29557]
* Adds loading states for Snapshot and Filter Bar {pull}29858[#29858]
* Allows greater than default size for snapshot count {pull}29681[#29681]
* Updates title and remove redundant paragraph from empty index prompt {pull}30093[#30093]
* Fixes responsive snapshot histogram chart {pull}29649[#29649]
* Migrates from i18n context to provider {pull}30124[#30124]
* Formats the timeseries data to local time {pull}30160[#30160]
* Fixes snapshot query to handle large numbers of monitors {pull}30441[#30441]
* Replaces heartbeat app icon {pull}30530[#30530]
* Adds link to new Discuss forum {pull}31148[#31148]
* Fixes flaky behavior and re-enables Uptime API tests {pull}32819[#32819]
* Changes copy on empty state component {pull}33044[#33044]
Operations::
* Adds searching by index and node to UI {pull}33065[#33065]
* Fixes Security index should to reindex into `.security-7` {pull}31996[#31996]
* Adds UI for deleting old .tasks index {pull}29774[#29774]
* Prepends to index name during reindexing instead of appending {pull}30114[#30114]
* Sets React version to string, not semver object {pull}33079[#33079]
* Uses trap to generate report for non-PR builds {pull}26829[#26829]
* Adds support to `kbn-es` and `kbn-test` for data archives {pull}28723[#28723]
* Makes `ReindexWorker` resilient to ES connection issues {pull}29908[#29908]
* Fixes for Upgrade Assistant {pull}29663[#29663]
* Adds cancel button to reindexing in Upgrade Assistant {pull}29913[#29913]
* Upgrades caniuse-lite and browserlist {pull}29358[#29358]
* Converts dev/run helper to Typescript {pull}32705[#32705]
* Add script to verify that all TS is in a project {pull}32727[#32727]
* Fixes accessibility problems on Upgrade Assistant {pull}29013[#29013]
* Fixes pre-commit git hook setup when running into the windows shell {pull}27557[#27557]
* Fixes Chrome EUI icons on status page {pull}29131[#29131]
* Upgrades thread loader {pull}27518[#27518]
* Adds support for generating Docker image on {kib} build {pull}28380[#28380]
* Adds traces to Node warnings {pull}27848[#27848]
* Adds support for previously re-indexed ML/Watcher indices {pull}31046[#31046]
* Allows for compatibility with ES 7.x {pull}30636[#30636]
* Switches implicit server.log behavior with tmpl to logWithMetadata {pull}29002[#29002]
* Makes migration mapping change detection more robust {pull}28252[#28252]
* Changes scripts.inline to scripts.source {pull}30457[#30457]
* Uses testSubjects.existOrFail in pageObjects/header {pull}28632[#28632]
Platform::
* Fixes the confirm overwrite modal of saved objects to handle large titles {pull}28590[#28590]
* Updates locale data for IntlRelativeFormat and IntlMessageFormat {pull}26468[#26468]
* Converts stream util tests to jest {pull}27499[#27499]
* Fixes es_archiver rebuild_all action to support nested directories {pull}27592[#27592]
* Adds get$() method {pull}27425[#27425]
* Disables the welcome page automatically {pull}28792[#28792]
* Converts core components to Typescript {pull}28880[#28880]
* Adds push/filter methods {pull}29566[#29566]
* Uses --oss to load {kib} faster and avoid timeout {pull}32162[#32162]
* Uses {kib} locale when loading content from the Elastic Maps Service {pull}29671[#29671]
* Core task manager {pull}24356[#24356]
* Allows Task Manager's internal init to fail and retry {pull}28130[#28130]
* Ensures `putTemplate` will only create/update the index template {pull}28540[#28540]
* Allows select settings to specify labels for their values {pull}29584[#29584]
* Makes the plugin have the right config prefix {pull}30005[#30005]
* Removes `[DOC_TYPE]` from index template body {pull}30261[#30261]
Reporting::
* Defaults to true when not in distributable {pull}32803[#32803]
* Fixes data points on maps not showing up in reports {pull}31949[#31949]
* Copies Post URL to track layoutID in state {pull}30029[#30029]
Security::
* Adds accessibility improvements for the Space Selector screen {pull}28865[#28865]
* Adds `create_snapshot` privilege {pull}31086[#31086]
* Allows `run_as` to be arbitrary string to support patterns and unknown users {pull}32779[#32779]
* Adds `manage_leader_index` privilege {pull}33154[#33154]
Uptime::
* Adds dummy function to avoid warning {pull}32070[#32070]
* Removes reference to ui/chrome Breadcrumb type {pull}28526[#28526]
Time Series Visual Builder::
* Prevents filter colors from overriding label colors in Time Series Visual Builder {pull}30822[#30822]
* Stops Time Series Visual Builder from flashes a chart upon clicking create {pull}30946[#30946]
* Fixes Time Series Visual Builder percentile aggregation in Gauge, metric and Top N {pull}31680[#31680]
* Fixes issues with retaining results in Time Series Visual Builder {pull}32003[#32003]
* Prevents triggering autorefresh when autofetch false {pull}30405[#30405]
Visualize::
* Fixes Vega tooltip position on scroll {pull}30795[#30795]
* Preserves x-axis order in `vislib` {pull}31533[#31533]
* Fixes Timelion data-render-complete attribute on resize {pull}29320[#29320]
* Improves visualization type selection accessibility {pull}29498[#29498]







[[release-notes-6.6.2]]
== {kib} 6.6.2

See <<breaking-changes-6.0, breaking changes>> for the changes to be aware of
when migrating your application from one version of Kibana to another.


[float]
[[bug-6.6.2]]
=== Bug fixes
APM::
* Avoids crashing the transaction details page if trace duration is 0 {pull}31799[#31799]
Canvas::
* Provides a valid `axisconfig` position default {pull}32335[#32335]
Kibana App::
* Removes the use of 's' regex flag in {kib} query language {pull}31292[#31292]
* Fixes vislib legend filters {pull}29592[#29592]
Machine Learning::
* Sets default number of shards to 1 when creating a new index for File data visualizer {pull}31567[#31567]
* Adds missing error handling to annotations request {pull}32384[#32384]
Management::
* Fixes bug where rollup job search would display an empty prompt if no jobs matched the search {pull}31642[#31642]
Monitoring::
* Ensures that bulk uploader only starts once {pull}31307[#31307]
* Addresses some UI regressions with shard allocation {pull}29757[#29757]
Operations::
* Bumps Node to 10.15.2 {pull}32200[#32200]
Visualizations::
* Formats Time Series Visual Builder error message {pull}31569[#31569]





[[release-notes-6.6.1]]
== {kib} 6.6.1

See <<breaking-changes-6.0, breaking changes>> for the changes to be aware of
when migrating your application from one version of Kibana to another.


[float]
[[bug-6.6.1]]
=== Bug fixes
Canvas::
* Wraps URL check in `retry.try` {pull}29536[#29536]
* Avoids server crash when no value is found {pull}29069[#29069]
* Identifies Canvas for metrics collection {pull}29078[#29078]
* Removes text selection on writeable change {pull}28887[#28887]
* Prevents sort in pie function {pull}27076[#27076]
* Maintains element selection when using up/down layering operations {pull}29634[#29634]
* Uses `server.basePath` to create socket connection from interpreter {pull}29393[#29393]
Kibana App::
* Renames `defaultSpaceBasePath` to `serverBasePath` {pull}29431[#29431]
Machine Learning::
* Fixes race condition related to view by swimlane update {pull}28990[#28990]
* Adds an integrity check to creating, updating, and deleting annotations {pull}29969[#29969]
* Removes key attribute from annotation before indexing {pull}30183[#30183]
* Makes index pattern related links optional {pull}29332[#29332]
* Fixes unmounting jobs list React component on page change {pull}29980[#29980]
* Uses intl.formatMessage for File Data Visualizer file picker {pull}29251[#29251]
Management::
* Adds Webhook Action type on client {pull}29818[#29818]
Monitoring::
* Fixes Logstash date format {pull}29637[#29637]
* Fixes UI regressions with shard allocation {pull}29757[#29757]
Operations::
* Fixes plugin deprecations {pull}29737[#29737]
* Changes Node version to 10.15.1 {pull}27918[#27918]
* Fixes Chrome EUI icons on status page {pull}29131[#29131]
Querying & Filtering::
* Adds support for matching field names with newlines {pull}29539[#29539]
Reporting::
* Fixes date formatting on server for CSV export {pull}29977[#29977]
Security::
* Adds missing cluster privileges to role management screen {pull}28692[#28692]
* Fixes an issue with a cross-site scripting (XSS) vulnerability (CVE-2019-7608). See https://www.elastic.co/community/security[Security issues].
* Fixes an arbitrary  code execution flaw in the Timelion visualizer (CVE-2019-7609). See https://www.elastic.co/community/security[Security issues].
* Fixes an arbitrary  code execution flaw in the security audit logger (CVE-2019-7610). See https://www.elastic.co/community/security[Security issues].
Visualizations::
* Fixes standard deviation aggregation to prevent crash of Time Series Visual Builder {pull}30798[#30798]
* Fixes Time Series Visual Builder flot chart render after index pattern change {pull}29949[#29949]
* Enables `orderBy` and `orderAgg` in visualization editor for rollup visualizations {pull}29894[#29894]



[[release-notes-6.6.0]]
== {kib} 6.6.0


[float]
[[breaking-6.6.0]]
=== Breaking Changes
Platform::
* Upgrades Hapi in legacy platform to v17 {pull}21707[#21707]

[float]
[[known-issues-6.6.0]]
=== Known issues
Canvas::
A known issue prevents Canvas from loading outside of the default space. {pull}27262[#27262]
+
This issue will be fixed in a future bug fix release. {pull}29393[#29393]

Visualizations::
A known issue prevents filtering on legend items in area, bar, and line charts. {pull}28176[#28176]
+
This issue will be fixed in a future bug fix release. {pull}29592[#29592]

Plugin settings::
{kib} may not start when using deprecated plugin settings in kibana.yml
+
The server will log an error and the new configuration value.  Updating kibana.yml with the new configuration will allow the server to start.


[float]
[[deprecation-6.6.0]]
=== Deprecations
Operations::
* Deprecates tribe settings in 6.x {pull}25548[#25548]

[float]
[[plugin-6.6.0]]
=== Plugin API Changes
See https://www.elastic.co/blog/kibana-plugin-api-changes-in-6-6[Kibana plugin API changes in 6.6].

[float]
[[highlights-6.6.0]]
=== Highlights
6.6.0 includes the following highlights:

* Index Lifecycle Management
* Remote Clusters and Cross Cluster Replication
* Upgrade Assistant for Elasticsearch 7.0

For more information, see <<release-highlights-6.6.0, 6.6.0 Release Highlights>>.

[float]
[[enhancement-6.6.0]]
=== Enhancements
Canvas::
* Implements a clipboard with simple copy/cut/paste for elements only that stores in local storage {pull}25890[#25890]
* Adds the ability to reuse assets without editing an element's expression. {pull}25764[#25764]
* Adds a template tab to the workpad manager where users can find workpad templates, demos, and tutorials {pull}23966[#23966]
* Renames cloned templates {pull}28708[#28708]
* Adds persistent grouping and ungrouping {pull}25854[#25854]
Geo::
* Improves message for maximum zoom level {pull}26267[#26267]
Machine Learning::
* Adds checkbox to enable model plot in Advanced job wizard {pull}25468[#25468]
* Adds auditbeat process data recognizer modules {pull}25716[#25716]
* Adds support for Kuery to job wizards {pull}26094[#26094]
* Does not pass datafeed query to Discover in custom URL {pull}26957[#26957]
* Adds `created_by` meta data to the mapping of indexes from file data visualizer imports {pull}27303[#27303]
* Allows users to add/edit/delete annotations in the Single Series Viewer {pull}26034[#26034]
* Allows model plot enablement via checkbox in the MultiMetric and Population job creation wizards {pull}24914[#24914]
* Prevents a new calendar save if that ID already exists {pull}27104[#27104]
* Converts Settings page to React {pull}27144[#27144]
* Displays a ordinal y axis for low cardinality rare charts. {pull}24852[#24852]
Management::
* Adds `ignore_failure` to ingest common auto complete in Console {pull}24915[#24915]
* Adds timestamp to inspector request stats {pull}25667[#25667]
* Support date fields in Metrics step for rollup data {pull}26450[#26450]
* Implements a CRUD UI for index lifecycle management policies {pull}25553[#25553]
Observability::
* Adds Overview and Monitor pages for Uptime Monitoring {pull}27279[#27279]
Operations::
* Adds support for multiple Elasticsearch nodes and sniffing {pull}21928[#21928]
* Upgrades to NodeJS 10 {pull}25157[#25157]
* Optimizes with thread loader and terser {pull}27014[#27014]
* Creates vendor DLL for the client modules {pull}22618[#22618]
Platform::
* Migrates to new design system for breadcrumbs {pull}25914[#25914]
* Moves Canvas interpreter to OSS {pull}25711[#25711]
* Adds `en` as a valid locale to the settings {pull}25948[#25948]
Reporting::
* Add png output to reports {pull}24759[#24759]
Security::
* Updates User Management to sort the list of roles by name {pull}26491[#26491]
* Adds “Successfully logged out” message {pull}23890[#23890]
* Resolves issue with the link to the user profile in the K7 header not respecting the basePath {pull}26417[#26417]
* Adds index privileges for Index Lifecycle Management {pull}27461[#27461]
* Makes space selector a button {pull}26889[#26889]
Visualizations::
* Removes experimental status flag from Visual Builder {pull}25634[#25634]
* Adds setting to enable frozen index search {pull}27297[#27297]

[float]
[[bug-6.6.0]]
=== Bug fixes
APM::
* Fixes linking between errors and transactions, and link from errors to Discover {pull}28477[#28477]
* Updates APM index pattern {pull}27075[#27075]
* Updates index pattern to add ECS fields & aliases {pull}27434[#27434]
* Adds support for microseconds {pull}24974[#24974]
* Passes constants to  `_.get` instead of simple strings {pull}25177[#25177]
* Switches to ‘render’ prop in history tabs component to avoid unnecessary mount cycles {pull}28389[#28389]
* Removes entries for APM aliases {pull}28849[#28849]
Canvas::
* Fixes minor visual bug when opening workpad loader {pull}26647[#26647]
* Adds `clear` function {pull}26397[#26397]
* Fixes page thumbnail sizes {pull}26573[#26573]
* Fixes tag registry {pull}27423[#27423]
* Fixes PropType error in toggle arg {pull}27514[#27514]
* Fixes page manager for workpads without style property {pull}27556[#27556]
* Adds custom font size to list of sizes options {pull}27785[#27785]
* Ignores mouse movement over popovers and sidebars {pull}27818[#27818]
* Fixes time filter component {pull}27532[#27532]
* Fixes error handling of NetworkErrors {pull}28282[#28282]
* Fixes error handling in the case of failure when creating a workpad via the API {pull}28129[#28129]
* Fixes clipboard paste error {pull}28781[#28781]
* Fixes SQL issues in sample data {pull}27161[#27161]
* Minifies assets in production and generates stats on demand {pull}28391[#28391]
* Fixes socket and thread memory leaks {pull}26984[#26984]
* Fixes build to include dependencies {pull}27858[#27858]
* Makes timelion a browser function {pull}27944[#27944]
* Fixes immediate delete after an element resize {pull}27767[#27767]
* Fixes time filter calendar bounce {pull}24913[#24913]
* Decreases size of tray toggle {pull}25470[#25470]
* Adds workpad-level CSS {pull}24143[#24143]
* Allows timelion data source to use configured certificateAuthorities {pull}26809[#26809]
* Fixes interpreter socket error {pull}26870[#26870]
* Adds filtering so that only files are returned when loading `get_plugin_paths` {pull}27638[#27638]
* Moves state out of kbn-interpreter {pull}27317[#27317]
Console::
* Adds new specs for security endpoints without `_xpack` prefix {pull}27057[#27057]
* Fixes missing escape field name in history list directive {pull}27112[#27112]
Geo::
* Resolves URL dynamically when requesting EMS data {pull}25685[#25685]
* Fixes EMS hotlink {pull}26868[#26868]
* Fixes TMS without EMS access {pull}28111[#28111]
* Removes fetch ‘finally’ block to fix map loading error {pull}28306[#28306]
* Ensures reporting works with unsaturated baselayers {pull}28185[#28185]
Infrastructure::
* Fixes potential color bugs {pull}26292[#26292]
* Changes time range for waffle map from last hour to last 5m {pull}26278[#26278]
* Fixes AutoRefresh button on node detail page {pull}26426[#26426]
* Changes node detail link to set time range to 1 hour {pull}26977[#26977]
* Updates links for containers to use ID instead of name {pull}27088[#27088]
* Adds linking support for APM {pull}27319[#27319]
* Fails out of auth flow on first provider failure {pull}26648[#26648]
* Preserves time values when navigating from the waffle map to the logs and details pages {pull}24666[#24666]
* Removes duplicate text in detail page title {pull}25283[#25283]
* Moves `SavedObjectClient` types alongside JavaScript source files {pull}26448[#26448]
* Passes flag in request to force BWC hit count {pull}26517[#26517]
* Replaces redux source slice with constate container {pull}26121[#26121]
* Fixes styling after breaking EUI changes {pull}27021[#27021]
* Fixes graphql type generation after package upgrades {pull}26991[#26991]
* Removes usage of ts-optchain in the browser {pull}27148[#27148]
* Refactors "capabilites" to "metadata" in GraphQL {pull}25580[#25580]
* Hides sidenav while loading {pull}27119[#27119]
Kibana App::
* Fixes wildcard queries against the default field {pull}24778[#24778]
* Adds raw data to split column {pull}26321[#26321]
* Fixes dashboard to refresh visualizations when the refresh button is clicked {pull}27353[#27353]
* Removes `_remote/info` query to fix remote clusters error message when creating an index pattern {pull}27345[#27345]
* Adds description for visualisation types {pull}26243[#26243]
* Moves `timeout` to request body in TSVB requests {pull}26510[#26510]
* Add `rest_total_hits_as_int` into Kibana App {pull}26404[#26404]
* Fixes issue with filtering `_other_` aggregation buckets in inspector. {pull}26794[#26794]
* Fixes scrolling list on Firefox {pull}26246[#26246]
* Adds workaround for getDerivedStateFromProps change in React 16.4 {pull}25142[#25142]
Machine Learning::
* Adds useful error on invalid query in Job List search bar {pull}25153[#25153]
* Adds user privilege check to Jobs List group selector control {pull}25225[#25225]
* Ensures loading indicator is present on initial jobs load {pull}27151[#27151]
* Ensures loading message is present on jobs load {pull}27316[#27316]
* Ensures correct permissions are applied to Settings Calendars/Filter Lists {pull}27346[#27346]
* Converts to EuiSuperSelect component for the 'Create Watch' severity control in Job wizard {pull}27272[#27272]
* Ensures that content in Jobs list start datafeed time range selector does not overflow modal {pull}27438[#27438]
* Fixes sort on Calendars list events column so that it is done numerically {pull}27517[#27517]
* Fixes import modal flex items so that they don’t overflow in IE11 {pull}27529[#27529]
* Fixes missing permission callout in jobs list datafeed preview for `machine_learning_user` {pull}27545[#27545]
* Fixes FileViz new ML Job link shown without `canCreateJob` permission {pull}27612[#27612]
* Fixes the File Data Visualizer file size check, and formats the values displayed in error message as bytes {pull}25295[#25295]
* Fixes the layout of the cards in the Data Visualizer on IE {pull}25383[#25383]
* Fixes alignment of filter icons in anomalies table {pull}26253[#26253]
* Fixes word break in anomalies and jobs tables {pull}26978[#26978]
* Fixes job list page index when deleting jobs off last page {pull}27481[#27481]
* Fixes the calculation used to set the width of the margin for the y-axis labels of the chart in the Single Metric job wizard  {pull}27521[#27521]
* Adds a check if the current user can clone a job {pull}27496[#27496]
* Fixes the trigger for watch creation in the advanced job wizard. {pull}27594[#27594]
* Fixes missing job list error icon {pull}27575[#27575]
* Retains model memory limit when cloning job {pull}27670[#27670]
* Fixes job validation message typo {pull}25130[#25130]
* Removes deprecated angularjs based jobs list and related code {pull}25216[#25216]
Management::
* Fixes rollup data job wizard {pull}27413[#27413]
* Fixes Index Management not loading when ILM enricher errors out {pull}28108[#28108]
* Fixes Index Management enricher response variable {pull}28404[#28404]
* Reverts styles to fix watcher popups {pull}28266[#28266]
* Fixes index pattern wizard in case when there are remote clusters but no local indices  {pull}24339[#24339]
* Adds WatchErrors to capture invalid watches {pull}23887[#23887]
* Notifies user when multiple auto-follow patterns try to replicate the same data {pull}27783[#27783]
* Fixes issue with multiple execution in Console {pull}26933[#26933]
* Fixes validation issues with editing an index lifecycle policy {pull}27045[#27045]
* Adds reload button to index management {pull}27033[#27033]
* Returns wrapped unknown errors from rollup API. {pull}25032[#25032]
* Adjusts spacing of Management nav items so they're easier to differentiate when they contain wrapped lines {pull}25666[#25666]
* Shows loading state in Rollup Job detail panel. {pull}25752[#25752]
* Specifies Rollup Jobs breadcrumbs in header {pull}26590[#26590]
* Requires histogram interval in Rollup Job wizard to be a whole number {pull}26596[#26596]
* Adds informational callout in index lifecycle management when step_info message is present {pull}27046[#27046]
* Fixes broken breadcrumb link for index management {pull}27164[#27164]
* Fixes issues with index lifecycle summary and includes minor changes to the Index lifecycle management UI {pull}27153[#27153]
* Adds ODBC blurb to Start trial UI {pull}27223[#27223]
* Reloads full index list in index lifecycle management when reload hits missing index {pull}27197[#27197]
* Adds loading spinner for index management table {pull}27204[#27204]
* Fixes logic for when license error shows {pull}27326[#27326]
* Update 'Disenroll' text to be consistent with menu option 'Unenroll' {pull}26816[#26816]
* Puts template index before any ES write operation to prevent risk of startup errors in Beats Central Management {pull}28955[#28955]
Monitoring::
* Renames Monitoring FormattedMessage to FormattedAlert {pull}24197[#24197]
* Uses the cluster name from metadata if it exists {pull}24495[#24495]
* Converts the monitoring plugin to use EUI tables {pull}27064[#27064]
* Stops a new request when one is inflight {pull}27253[#27253]
* Updates additional Logstash pages to EUI {pull}27258[#27258]
* Resolves some Logstash UI regressions {pull}27530[#27530]
* Ensures all monitoring charts respond to onBrush {pull}28098[#28098]
* Fixes error handling for local stats collection/permissions {pull}26560[#26560]
* Removes initial delay to check and send {pull}26575[#26575]
* Pulls local Kibana usage stats {pull}26496[#26496]
Operations::
* Modifies settings to start limit and interval {pull}25474[#25474]
Platform::
* Transforms plugin deprecations before checking for unused settings {pull}21294[#21294]
* Establishes pattern for typing legacy plugins {pull}26045[#26045]
* Upgrades resize-observer-polyfill version {pull}26990[#26990]
* Fixes saved objects client _processBatchQueue function to handle errors {pull}26763[#26763]
* Adds reference to es script in Kibana {pull}25607[#25607]
* Adds ability to get included/excluded test counts {pull}25760[#25760]
* Wraps remote in browser service {pull}26394[#26394]
* Implements k7Breadcrumbs in Kibana mangement routes {pull}26503[#26503]
* Prepares @kbn/datemath for publishing {pull}26559[#26559]
* Adds dist flag to config context {pull}26545[#26545]
* Moves moment to peerDependency in elastic-datemath {pull}27264[#27264]
* Deletes all objects but the default space {pull}27412[#27412]
* Changes the way a routing module is imported from the init function {pull}26494[#26494]
* Adds jsxa11y into eslint rules {pull}23932[#23932]
Querying & Filtering::
* Moves `buildEsQuery` to a separate package {pull}23345[#23345]
* Adds comment about `docvalue` for each date fields in `getComputedFields` {pull}25725[#25725]
* Moves filtering functions out of `vis.API.events` {pull}25280[#25280]
Reporting::
* Adds in browser info to the report-info drawer {pull}26307[#26307]
* Adds sort order to share menu options. {pull}25058[#25058]
* Adds logging for waitForSelector failure {pull}25762[#25762]
* Enhances error messaging and handling {pull}26299[#26299]
* Uses data-test-subj on toast to check for failure {pull}25482[#25482]
* Adds Info button in Reporting listing {pull}25421[#25421]
Security::
* Shows change password form only when a password change is possible {pull}26779[#26779]
* Fixes issues with the url.search being null in Node 10 {pull}26992[#26992]
* Fixes prettier throw rule error  {pull}26071[#26071]
Spaces::
* Fixes duplicate space name on the space selector screen {pull}27906[#27906]
* Adds context to spaces grid action buttons {pull}27911[#27911]
Visualizations::
* Implements new visualization type selection modal {pull}23833[#23833]
* Ensures extra columns are not shown in a table visualization when showPartialRows:true {pull}25690[#25690]
* Reverts settings.html to fix Graph display {pull}26008[#26008]
* Defaults the scroll zoom capability of Vega Maps to 'false'  {pull}21169[#21169]
* Fixes TSVB number/percentage format {pull}27704[#27704]
* Enables TSVB series opacity {pull}27956[#27956]
* Fixes error in Visual Builder markdown rendering on dashboard {pull}27835[#27835]
* Fixes fatal error in Visual Builder using annotations {pull}27780[#27780]
* Fixes Visual Builder color rules on multiple gauges {pull}27810[#27810]
* Adds support for using Kuery/KQL without passing an index pattern object {pull}28010[#28010]
* Fixes date labels to show in milliseconds after dates selection {pull}25654[#25654]
* Removes lab stage for visualizations {pull}25702[#25702]
* Rewrites URL when closing the visualization type selection modal {pull}26327[#26327]
* Fixes incorrect calls from .on to .off in TSVB {pull}24575[#24575]
* Guards against empty and undefined index pattern arrays passed to QueryBar {pull}24607[#24607]
* Maps inspector requests by ID so that single requests can be reset at a time {pull}26770[#26770]
* Updates ecommerce index pattern fields to have the same type as Elasticsearch mappings {pull}27549[#27549]
* Removes `dashboardContext` {pull}23227[#23227]
* Removes `indexPattern` from vega/tsvb/timelion request handler {pull}26007[#26007]
* Passes global filters from editor {pull}26009[#26009]
* Enables visualisations in a dashboard to be opened in a new tab {pull}25233[#25233]
* Fixes other bucket option to correctly apply without having to change other settings {pull}26874[#26874]
* Stops using schemas in aggconfigs to output dsl {pull}26010[#26010].
* Fixes Timelion props function {pull}28834[#28834]







[[release-notes-6.5.4]]
== {kib} 6.5.4

[float]
[[breaking-changes-6.5.4]]
=== Breaking changes

See <<breaking-changes, Breaking changes>> for the changes to be aware of
when migrating your application from one version of {kib} to another.

[float]
[[bug-6.5.4]]
=== Bug fixes

Canvas::
* Fixes offset mouse capture after scrolling {pull}27096[#27096]
* Fixes query bug in esdocs {pull}27157[#27157]
* Sets time to start/end of day when selecting date in the timepicker {pull}27186[#27186]
* Upgrades TinyMath so that columns with dots work correctly {pull}26659[#26659]
* Updates the TinyMath reference links {pull}27085[#27085]

Kibana App::
* Fixes vertical scroll on long legends {pull}23806[#23806]
* Fixes a problem that caused {kib} to set the {es} timeout to 0,
instead of excluding it. As a result, visualizations
returned partial data or errors. {pull}27217[#27217]

Machine Learning::
* Fixes population chart marker positions and swimlane race
condition {pull}26716[#26716]

Management::
* Fixes rollup indices request failures so that they don't block the Create
Index Pattern button {pull}26988[#26988]

Security::
* Initializes authorization mode for reporting jobs {pull}26762[#26762]

Visualization::
* Fixes the check for the `show partial buckets` option {pull}25520[#25520]
* Fixes tooltips for the stacked line chart {pull}26881[#26881]


[[release-notes-6.5.3]]
== {kib} 6.5.3

[float]
[[breaking-changes-6.5.3]]
=== Breaking changes

See <<breaking-changes, Breaking changes>> for the changes to be aware of
when migrating your application from one version of {kib} to another.

[float]
[[deprecation-6.5.3]]
=== Deprecations
Platform::
* Returns support for `i18n.defaultLocale` and marks it as deprecated {pull}26556[#26556]
+
`i18n.defaultLocale` has been renamed to `i18n.locale` to better reflect what
this setting actually does since the default is always English locale.

[float]
[[bug-6.5.3]]
=== Bug fixes

Canvas::
* Makes error messages consistent between `esdocs` and `essql` {pull}26399[#26399]
* Reduces HTTP POST generation on selections and drags {pull}26391[#26391]

Dashboard::
* Fixes an issue where read only roles were unable to view pagination controls
on saved searches in a dashboard panel {pull}26224[#26224]

Monitoring::
* Uses proper {kib} index for KQL telemetry {pull}26479[#26479]
* Adds missing apm-server response error monitor {pull}26787[#26787]

Querying &amp; Filtering::
* Specifies the timeout for the `_msearch` in the body {pull}26446[#26446]
+
Resolves the issue with the `_msearch` timeouts being specified incorrectly,
which caused them to be ignored."

Platform::
* Does not skip config properties with values equal to empty array\object {pull}26690[#26690]
* Allows SIGHUP to recreate log file handler {pull}26675[#26675]

Security::
* Fixes documentation links for {es} role privileges {pull}26466[#26466]
+
Updates documentation links to `run_as`, `index`, and `cluster` privilege categories.

Visualizations::
* Fixes the `group by terms` functionality in Time Series Visual Builder
so it correctly shows the Metric and Gauge visualizations {pull}26520[#26520]


[[release-notes-6.5.2]]
== {kib} 6.5.2

[float]
[[breaking-changes-6.5.2]]
=== Breaking changes

See <<breaking-changes, Breaking changes>> for the changes to be aware of
when migrating your application from one version of Kibana to another.

[float]
[[enhancements-6.5.2]]
=== Enhancements

Canvas::
* Adds support for url params {pull}25828[#25828]

Operations::
* Bumps node to 8.14.0 {pull}26313[#26313]

[float]
[[bug-6.5.2]]
=== Bug fixes

APM::
* Fixes rtl bug while maintaining dynamic right alignment {pull}25780[#25780]

Canvas::
* Fixes loading component {pull}25819[#25819]
* Adds tags to Canvas functional suite {pull}26046[#26046]
* Fixes reporting import and config checking {pull}25829[#25829]
* Uses `savedObjectsClient` to get index-patterns {pull}25630[#25630]

Dashboard::
* Fixes flash of unstyled dashboard content {pull}25559[#25559]

Design::
* Fixes `EuiComboBox` single selection layout issue in Firefox {pull}26202[#26202]

Geo::
* Fixes region maps color schema selection {pull}26354[#26354]

Graph::
* Fixes broken settings in Graph UI {pull}25927[#25927]

{kib} App::
* Fixes auto refresh so it works after page reload {pull}26088[#26088]

Machine Learning::
* Fixes recognizer job wizard so it uses dedicated index setting {pull}25706[#25706]
* Ensures jobs from saved searches are cloned in advanced wizard {pull}26002[#26002]
* Aggregates anomalies table data using configured {kib} timezone {pull}26192[#26192]

Operations::
* Fixes `logging.useUTC` deprecation unset {pull}26053[#26053]
* Ignores packages directory when running from source {pull}26098[#26098]
* Runs babel-cli with `--quiet` {pull}26097[#26097]
* Uses disallow license header rule {pull}26309[#26309]
* Throws error if reindex task fails {pull}26062[#26062]
* Provides protection against missing shards {pull}26303[#26303]
* Upgrades npm-run-all to 4.1.5 {pull}26200[#26200]

Platform::
* Handles deprecated SSL config settings {pull}26196[#26196]
* Allows packages to define extra paths to kbn clean {pull}26132[#26132]
* Wraps remote in `browser` service {pull}26394[#26394]

Querying &amp; Filtering::
* Changes timefilter so it returns strings instead of moments {pull}25625[#25625]

Spaces::
* Fixes redirect after log in {pull}25546[#25546]
* Makes short urls space-aware {pull}26181[#26181]
* Allows the public spaces API to work with a gold license {pull}26270[#26270]

Security::
* Fixes anonymous access to status page {pull}24706[#24706]
* Adds `read_ccr` and `manage_ccr` cluster privileges {pull}25605[#25605]
* Adds `manage_follow_index index` privilege for CCR {pull}25720[#25720]

Visualizations::
* Ensures custom set axis titles are preserved when loading a saved visualization {pull}24176[#24176]
* Uses retry to avoid stale element references in the `PageObjects.visualize.filterOnTableCell()` method {pull}25973[#25973]


[[release-notes-6.5.1]]
== {kib} 6.5.1

[float]
[[breaking-changes-6.5.1]]
=== Breaking changes

See <<breaking-changes, Breaking changes>> for the changes to be aware of
when migrating your application from one version of Kibana to another.

[float]
[[enhancements-6.5.1]]
=== Enhancements

Machine Learning::
* Updates job type and APM module icon to new designs {pull}25380[#25380]

Security::
* Grant `.tasks` access to `kibana_system` role https://github.com/elastic/elasticsearch/pull/35573[#35573]
+
{kib} now uses the tasks API to manage automatic reindexing of the `.kibana` index during upgrades.

[float]
[[bug-6.5.1]]
=== Bug fixes

Canvas::
* Fixes duplicate `Value` options in math select value {pull}25556[#25556]
* Gets correct plugins path {pull}25448[#25448]
* Quotes the index pattern in SQL input {pull}25488[#25488]
* Fixes issues with loading in IE11 {pull}25562[#25562]
* Fixes Canvas test runner {pull}25492[#25492]
* Improves plugin pre-build {pull}25267[#25267]

Dashboard::
* Fixes flashing of unstyled dashboard content {pull}25559[#25559]

Management::
* Wraps long field names in tables in Rollup Job wizard {pull}25405[#25405]
+
Long field names used to be truncated by the table cell. Now they wrap so users can read the entire field name.

* Updates the Saved Objects management page and the Advanced Settings management page to handle query parse failures {pull}25235[#25235]

Operations::
* Adds types for `setRootController()` and theme-related methods in `ui/chrome` types {pull}25611[#25611]

Platform::
* Increases start timeout for snapshots in es-test-cluster {pull}25600[#25600]

Visualizations::
* Fixes Timelion issue when `elasticsearch.shardTimeout` is 0 {pull}25461[#25461]
* Fixes map bounds {pull}25040[#25040]


[[release-notes-6.5.0]]
== {kib} 6.5.0


[float]
=== Breaking changes

See <<breaking-changes>>.

[float]
[[known-issues-6.5.0]]
=== Known issues

* {kib} gets stuck when upgrading from an older version
+
After upgrading from an older version of {kib} while using {security}, if you get a permission error when you start {kib} for the first time, do the following steps to recover:
+
1. Stop Kibana
2. Delete the `.kibana_1` and `.kibana_2` indices that were created
3. Create a new role in Elasticsearch that has `create_index`, `create`, and `read` permissions for the .tasks index
4. Create a new user in Elasticsearch that has the `kibana_system` role as well as the new role you just created
5. Update `elasticsearch.username` and `elasticsearch.password` in kibana.yml with the details from that new user
6. If using a Kibana secure settings keystore, remove keys `elasticsearch.username` and `elasticsearch.password` from the keystore using the `kibana-keystore` tool. Add these keys back to the keystore using the new user and password as values.
7. Start Kibana
+
This will be fixed in a future bug fix release, at which time you can go back to using the built-in `kibana` user.

* {kib} ignores the timezone setting `dateFormat:tz` {pull}25596[#25596]
+
If you use the default `browser` setting for `dateFormat:tz`,
you're fine. If you use any other setting for `dateFormat:tz`, and you use
Absolute time ranges, you might see issues where {kib} initially
shows data in your browser's local timezone instead of the configured timezone.
Refreshing the page usually corrects the issue.
This will be fixed in a future bug fix release.

* {kib} errors when setting `logging.useUTC` in kibana.yml.
+
The setting is meant to be deprecated, and using the replacement setting `logging.timezone` can be used as a workaround.

[float]
[[deprecation-6.5.0]]
=== Deprecations

Monitoring::
* Deprecates `xpack:defaultAdminEmail` for monitoring alerts {pull}22195[#22195]
+
The `xpack:defaultAdminEmail` UI Setting is deprecated for Monitoring, but is still
fully supported for the Watcher UI. To receive cluster alert notification emails,
configure `xpack.monitoring.cluster_alerts.email_notifications.email_address` in `kibana.yml`.

[float]
=== Plugin API changes

See https://www.elastic.co/blog/kibana-plugin-api-changes-in-6-5[Kibana plugin API changes in 6.5], which describes changes to the visualizations
response handler, data schema, and aggregations.


[float]
=== New features

* Spaces
* Canvas
* Monitoring of cross-cluster replication
* Rollup jobs in Management
* Rolled up data in visualizations
* Beats central management
* Infrastructure and Logs
* Distributed tracing in APM
* Data Visualizer and File Data Visualizer in Machine Learning
* Two new sample data sets

For an overview of the new features that were added in 6.5.0 and how the user
experience improved, see the <<release-highlights-6.5.0, 6.5.0 Release Highlights>>.

[float]

[[enhancement-6.5.0]]
=== Enhancements

Discovery::
* Allows Kibana users to configure the `max_concurrent_shard_requests` param used by Kibana when sending `_msearch requests`. The configuration is exposed as an advanced setting. By default the parameter is not sent, relying on the Elasticsearch default instead. {pull}22379[#22379]

Kibana Home &amp; Add Data::
* Allows sample data set to install multiple indices {pull}23230[#23230]
* Adds an optional `now` query parameter that allows installing sample data at a fixed point in time {pull}20678[#20678]
* Adds an "Uptime Monitors" box to the Metrics tab. This box guides users through installing and configuring Heartbeat and loading the dashboards. {pull}23995[#23995]
* Adds link to “Upload data from log file” to Kibana home page {pull}24226[#24226]
* Adds a link to Canvas on the Kibana home page {pull}24038[#24038]
* Adds Canvas workpad for sample data {pull}24347[#24347]

Kibana Application::
* Changes courier so that instead of emitting Elasticsearch errors, which originate with the Elasticsearch client, it will emit `SearchError`. This uncouples error-handling from the internal strategy courier uses to send search requests. {pull}23382[#23382]
* Adds an option to always present a certificate when connecting to Elasticsearch using `elasticsearch.ssl.alwaysPresentCertificate: true` {pull}24304[#24304]

Machine Learning::
* Adds context to the job picker for accessibility {pull}23483[#23483]
* Adds button for refreshing job list without full page refresh {pull}24084[#24084]
* Ensures that the applying/removing groups menu is keyboard accessible {pull}24212[#24212]
* Replaces EuiComboBox with EuiSuperSelect  in Anomalies Table severity control    {pull}24272[#24272]
* Disables auto focus on job wizard select index and search page {pull}21913[#21913]
* Adds `aria-label` to calendar and jobs list buttons {pull}21922[#21922]
* Adds validation to the label and time range when editing custom URLs in the Jobs List flyout. {pull}21960[#21960]
* Adds links to rule editor for quick edit of value or filter {pull}22990[#22990]
* Removes the job ID from the detector description to avoid duplication {pull}23192[#23192]
* Moves the “Add custom URL” button and form to the top of the editor {pull}23326[#23326]
* Adds indicators for multi-bucket anomalies to the charts and anomalies table in the Single Metric Viewer and Anomaly Explorer dashboards {pull}23746[#23746]
* Sets focus to the “View results” link on the Job wizards (Single metric, Multi metric, and Population job types) when the job starts running and when the job finishes {pull}24190[#24190]
* Introduces custom charts for detectors that use a `rare`  function (Event Distribution Chart) as well as detectors that use an `over` field (Population Distribution Chart) {pull}23423[#23423]
* Adds validation for the model memory limit value  {pull}21270[#21270]
* Adds a group selection menu to the jobs management page {pull}21780[#21780]
* Enables support for the `rare` detector for the charts in Anomaly Explorer and Single Metric Viewer {pull}21524[#21524]
* Migrates the Explorer Charts to React {pull}22622[#22622]
* Migrates Anomaly Explorer Swimlanes to React {pull}22641[#22641]
* Tweaks the design of the Explorer Chart to more clearly visualize how the time range of the cell selected in the swimlane relates to the time span shown in the charts {pull}22955[#22955]
* Enables the display of contextual data for population charts using other metrics than `count` {pull}24083[#24083]

Management::
* Adds opt in for telemetry to start trial and upload license screens {pull}22925[#22925]
* Adds a home page section for rollups that links to the rollup jobs CRUD UI {pull}24421[#24421]
* Polishes the Index Management UI {pull}21979[#21979]
* Makes the width of the import saved objects dialog narrower so it doesn't obscure the UI {pull}22011[#22011]
* Adds ingest node updates for auto-complete in console {pull}24100[#24100]
* Adds autocomplete rules for CCR to Kibana console. Also fixes an issue with the documentation link URL manipulation {pull}24739[#24739]

Monitoring::
* Adds a monitoring UI for APM {pull}22975[#22975]

Operations::
* Upgrades prettier to version 1.14.0 to gain support for the new TypeScript language features introduced in 2.9 and 3.0 {pull}21466[#21466]
* Adds new K7 header navigation as an optional UI {pull}23300[#23300]

Reporting::
* Adds ability to disable polling for idle jobs {pull}24295[#24295]
+
A new `kibana.yml` config setting, `xpack.reporting.queue.pollEnabled`, can be set to `false` (default is `true`) to stop the {kib} instance from running polling workers to claim and execute reporting jobs. This makes it possible to configure a Kibana instance to only act as a Reporting worker, and other instances to do everything for Reporting (queuing, listing, provide downloads, and so on) except for executing reporting jobs.

Sharing::
* Implements Inspect panel for saved searches {pull}22376[#22376]

Visualizations::
* Adds support for `format:number:defaultLocale` and `format:number/bytes/percent:defaultPattern` settings in Time Series Visual Builder {pull}21444[#21444]
* Introduces date histogram time base configuration to EditorConfig.  This is needed to support rollups in Kibana. {pull}22344[#22344]


[float]
[[bug-6.5.0]]
=== Bug fixes

Dashboard::
* Uses EuiPanel for dashboard panels {pull}22078[#22078]
* Always starts dashboard with closed context menu {pull}24252[#24252]
* Replaces the old theme CSS with the newly selected CSS, so the HTML document source remains a constant size {pull}21709[#21709]
* Converts all LESS files to Sass in Dashboard, using EUI variable scope {pull}21374[#21374]
* Converts PanelOptionsMenuForm to EUI {pull}21375[#21375]
* Converts Dashboard options top nav to EUI {pull}21510[#21510]
* Fixes 'Add' button in empty dashboard {pull}21816[#21816]
* Migrates report listing management to React and EUI {pull}22928[#22928]
* Updates dashboard_constants.js to .ts and panel_error.js to .tsx {pull}22141[#22141]
* Fixes refreshed dashboard losing time range {pull}20858[#20858]
* Changes the dashboard panel actions code to TypeScript {pull}21740[#21740]
* Changes more dashboard panel code to TypeScript {pull}21810[#21810]
* Generalizes dashboard panel actions  {pull}22775[#22775]

Discovery::
* Makes query bar autocomplete screen reader accessible {pull}20740[#20740]
* Fixes query input lag {pull}21753[#21753]
* Forces date format in context query {pull}22684[#22684]
* Renames the filter bar collapser tooltip {pull}22942[#22942]
* Converts Discover open top navigation to EUI flyout {pull}22971[#22971]
* Migrates save top navigation in Discover and Visualize to EUI {pull}23190[#23190]

Kibana Home &amp; Add Data::
* Avoids $$phase errors by not passing functions from ngReact {pull}24460[#24460]
* Fixes windows instructions for Uptime Monitors in Add Data {pull}24587[#24587]
* Fixes sample data install toasts error when user navigates away from the home application while installing {pull}23574[#23574]
* Fixes error when user attempts to navigate away from the Add Data to Kibana page when installing sample data {pull}23711[#23711]

Logstash::
* Uses EUI in Logstash Management and removes all KUI controls and classes from the code {pull}22902[#22902]

Machine Learning::
* Ensures the Single day, Day range, and Time range options are accessible via a keyboard and screen reader when creating a calendar event in Machine Learning > Settings > Calendar Management {pull}23832[#23832]
* Ensures the search bar aligns when no job is selected (so no job actions are available) and prevents job actions from wrapping {pull}24334[#24334]
* Fixes the positioning of the anomaly markers on the Single Metric Viewer chart when the chart aggregation interval is greater than the bucket span {pull}22055[#22055]
* Makes the field type icon component, as used on the cards in the Data Visualizer, keyboard accessible {pull}22708[#22708]
* Fixes the labels for the start time options in the time range selector modal, used when starting the datafeed of a job. The labels now reflect whether the datafeed is starting for the first time, or whether it is restarting for a job that has already processed data. {pull}24489[#24489]
* Fixes the job validation for the lower bound of the model memory limit. Previously, the check was against zero. Now the check is against less than 1MB, which is the same as what the backend expects. {pull}24323[#24323]
* Updates Edit job so users cannot add a group that has the same ID as an existing job ID {pull}21987[#21987]
* Updates group selector so users cannot add a group ID that has the same ID as an existing job {pull}21988[#21988]
* Adds a license check to the Data Visualizer landing page.  {pull}23809[#23809]
* Updates invalid model memory limit message {pull}21329[#21329]
* Fixes issue with historical job audit messages {pull}21718[#21718]
* Fixes `IOException` in `java.time.LocalDateTime` for painless script in Machine Learning Watch {pull}21998[#21998]
* Adds string type check to jobs list search {pull}22627[#22627]
* Fixes various issues when cloning a job using a wizard {pull}23368[#23368]
* Fixes missing field when cloning a `distinct count` job {pull}23439[#23439]
* Fixes issue when editing script fields in advanced job creator {pull}23475[#23475]
* Fixes duplicate influencers when cloning a job via a wizard {pull}23484[#23484]
* Redesigns the landing page for the Data Visualizer and adds a bottom bar for navigation between pages {pull}24438[#24438]
* Fixes regression that removed breadcrumbs from the Machine Learning header {pull}23756[#23756]
* Fixes the styling of the elements in the expanded row section of the anomalies table, so that all the heading elements have the same font size {pull}24390[#24390]
* Fixes the Anomaly Explorer Swimlane race condition and adds tests {pull}22814[#22814]
* Fixes loading the influencers for Anomaly Explorer {pull}22963[#22963]
* Fixes reloading Anomaly Explorer Charts on resize {pull}22967[#22967]
* Deprecates the use of jQuery for rendering Anomaly Explorer Swimlanes {pull}23000[#23000]
* Fixes the cleanup of the Anomaly Explorer resize listener once the user changes to another page within Machine Learning {pull}23427[#23427]
* Fixes the limit dropdown behavior and simplifies the state management of Anomaly Explorer {pull}23388[#23388]
* Improves the display of the Explorer Chart labels {pull}23494[#23494]
* Makes `mlExplorerDashboardService` independent of `angularjs` {pull}23874[#23874]
* Fixes an issue where resizing the Anomaly Explorer window triggers an error if the job being loaded didn't have any `anomalyChartRecords` {pull}24021[#24021]
* Fixes job validation for nested time fields. {pull}24137[#24137]
* Removes an obsolete sentence from info tooltip in the datafeed tab of the advanced job creation wizard {pull}24716[#24716]
* Fixes a call stack size exception triggered by a negative `tickInterval` {pull}24742[#24742]
* Fixes check for enabled X-Pack features {pull}24742[#24742]
* Adds alt prop with empty string to fix jsx-a11y errors  {pull}24922[#24922]

Management::
* Fixes license endpoint paths for proxy {pull}22133[#22133]
* Adds tag and updates pipeline processor parameter to ingest node in console {pull}24400[#24400]
* Fixes problem with color and static lookup field formatters not loading {pull}22044[#22044]
* Fixes console fatal errors {pull}21996[#21996]
* Adds aria-label attributes to form inputs for advanced settings {pull}22969[#22969]
* Updates documentation links in the console for ingest node {pull}24535[#24535]
* Makes the Watcher table width 100% of the view {pull}21803[#21803]
* Updates index pattern creation loading state to not have confusing "Reticulating splines" message {pull}21977[#21977]
* Reconciles Index Management selection state with index deletion {pull}22242[#22242]
* Adds `repositionOnScroll` to popovers in the Inspect and Index Management detail panel {pull}23856[#23856]
* Fixes structure of plural message {pull}24208[#24208]
* Supports overriding `uiSettings` from the configuration file {pull}21628[#21628]
* Fixes problem when filtering saved objects by single type  {pull}24950[#24950]

Monitoring::
* Supports legacy use cases for passthrough {pull}21211[#21211]
* Converts Beats overview page to use EUI components {pull}20765[#20765]
* Converts info button to EUI {pull}20828[#20828]
* Exposes Kibana settings API {pull}21100[#21100]
* Fixes EUI warnings {pull}21726[#21726]
* Addresses multiple accessibility issues {pull}20619[#20619]
* Ensures the settings API always return the xpack/default_admin_email {pull}22220[#22220]
* Adds Beats architecture stats to telemetry {pull}21227[#21227]
* Ensures the telemetry banner is accessible with the keyboard {pull}22664[#22664]
* Ensures the provided node id is used in the query {pull}23715[#23715]
* Preserves ccs state {pull}24331[#24331]
* Adds handles graph for Beats {pull}24265[#24265]
* Improves Logstash monitoring accessibility {pull}24169[#24169]
* Manages telemetry opt-in via a dedicated document {pull}22268[#22268]
* Adds two usage stats to telemetry {pull}23547[#23547]
* Adds latency to index and node Elasticsearch stats {pull}22625[#22625]
* Relaxes check to account for metricbeat-indexed doc format {pull}23730[#23730]
* Retrofits the Bulk Uploader types combiner {pull}22030[#22030]
* Updates telemetry to automatically get all the Kibana usage stats {pull}22336[#22336]


Operations::
* Makes saved object client await migrations prior to calling Elasticsearch {pull}23709[#23709]
* Fixes a bug where Elasticsearch sends a string and migrations expect a boolean {pull}23313[#23313]
* Fixes a bug with reindex timing out during migration of largish indices {pull}23397[#23397]
* Removes to window title to Kibana Server {pull}21567[#21567]
* Adds optimize and --no-optimize flags {pull}16302[#16302]
+
`bin/kibana` now supports standalone optimization with the `--optimize` flag.  `bin/kibana-plugin` now supports skipping the optimization step with  the `--no-optimize` flag.

* Filters nested and object fields types  {pull}23658[#23658]
* Converts status page to EUI {pull}21491[#21491]
* Fixes plugin generator when using hacks and SCSS {pull}23579[#23579]
* Removes conflicting package for kbn bootstrap {pull}23662[#23662]
* Adds server OS information to telemetry stats {pull}23793[#23793]
* Reinstates the default TypeScript configuration in development {pull}21966[#21966]
* Tweaks the kbn-es error message to provide more context than just `Not Found` {pull}24664[#24664]
* Implements more efficient method for cleaning `node_modules` {pull}24692[#24692]
* Ignores `node_modules` in the x-pack directory {pull}24797[#24797]
* Removes red color from the kbn-pm logs {pull}24362[#24362]
* Enables security for Trial license only {pull}20803[#20803]
* Adds autoprefixer support and improves watcher {pull}21656[#21656]
* Moves `styleSheetPath` to uiExports {pull}23007[#23007]
* Normalizes path for comparison on Windows {pull}23404[#23404]

Platform::
* Updates the `url-overflow` redirect to use the `modifyUrl` helper to deal with the confusion of node’s `path` and `pathname` {pull}22435[#22435]
* Introduces a new uiSetting `accessibility:disableAnimations`, which disables all non-essential animations in Kibana. {pull}21629[#21629]
* Introduces `schema.any` {pull}21775[#21775]
* Makes core logging independent from the legacy Kibana {pull}21831[#21831]
* Merges `MutableLoggerFactory` and `LoggingService` {pull}21879[#21879]
* Revamps core environment class to support upcoming core to legacy bootstrap inversion. {pull}21885[#21885]
* Makes `core` responsible for reading and merging of config files. Simplifies legacy config adapter. {pull}21956[#21956]
* Implements `LegacyService`. Uses `core` to start legacy Kibana.  {pull}22190[#22190]
* Upgrades to TypeScript 3 {pull}22792[#22792]
* Correctly passes `timestamp` from the core to the legacy Kibana. Does not try to stop legacy Hapi server if it does not exist. {pull}23436[#23436]
* Exposes the core config schema validation system as  `@kbn/config-schema` package {pull}23609[#23609]
* Adds Kibana bootstrap step to generate types exposed by the core and its plugins {pull}23686[#23686]
* Uses only core in browser environment, loader in node env {pull}20905[#20905]
* Wraps consts in kibana tutorials {pull}22181[#22181]
* Removes Notifier's directive and banner methods {pull}20870[#20870]
* Converts usage of `notify.error` to `toastNotifications.addDanger` for string messages {pull}22243[#22243]
* Adds temporary hotfix for flyouts not in portals {pull}24515[#24515]
* Adds saved object migrations {pull}20243[#20243]
* Implements a build tool for default messages extraction {pull}19620[#19620]
* Fixes default messages extractor bug with line break escaping {pull}22140[#22140]
* Adds ability to skip file writing for messages extraction tool {pull}21588[#21588]
* Adds logging to messages validation {pull}22296[#22296]
* Fixes line breaks in default JSON serializer {pull}22653[#22653]
* Migrates ui/notify/fatal_error to new platform {pull}20752[#20752]
* Renders legacy platform into a container {pull}21248[#21248]
* Adds type-check script that will run the TypeScript compiler in "checking" mode and report results {pull}19325[#19325]
* Migrates toastNotifications to the new platform {pull}21772[#21772]
* Kills kbn_observable and @kbn/observable {pull}21944[#21944]
* Migrates ui/chrome/loading_count API to new platform {pull}21967[#21967]
* Gives tooling log configurable writers {pull}22110[#22110]
* Fixes error thrown for undefined provider instances {pull}22689[#22689]
* Migrates base path APIs and UiSettings client to new platform {pull}22694[#22694]
* Changes `absoluteToParsedUrl()` to TypeScript {pull}22849[#22849]
* Fixes the recursive type in the `deepFreeze()` function used by `core.injectedMetadata` for better array support {pull}22904[#22904]
* Migrates chrome injected vars API to new platform {pull}22911[#22911]
* Adds `shareWeakReplay()` operator {pull}23333[#23333]
* Upgrades yarn to 1.10.1 {pull}23971[#23971]
* Shares sync subscribe logic {pull}23341[#23341]
* Migrates the controls, theme, and visibility `ui/chrome` APIs {pull}22987[#22987]
* Only tries to autoCreateOrUpgrade on the first request {pull}24605[#24605]
* Improves types in the `@kbn/datemath` package {pull}24671[#24671]
* Bumps elasticsearch-js and makelogs {pull}24767[#24767]
* Add support for interceptors. This makes it possible for plugins to transform request config and response of http requests made with kfetch. {pull}22128[#22128]
* Improves how the Saved Objects client handles s RequestEntityTooLarge error from Elasticsearch {pull}22430[#22430]
* Turns off the `no-multi-str` rule in eslint config {pull}22525[#22525]
* Fixes a problem in which more than one search request error would result in an error {pull}24952[#24952]

Querying &amp; Filtering::
* Implements query bar component in React using some EUI components. {pull}23704[#23704]
* Fixes problem where suggestion text needs to be a string {pull}24526[#24526]
* Introduces query bar update button with dirty checking {pull}24529[#24529]
* Provides feedback when searches do not return all matching results. Showing hits and total hits allows users to know when search results are not complete. {pull}23434[#23434]

Reporting::
* Fixes problem where Chromium browser waited until `domcontentloaded` and not `networkidle0`, which caused the Report job to fail with a timeout error {pull}23586[#23586]
* Fixes relative timezone bug for Chromium reports {pull}23652[#23652]
* Improves text of pending status in job listing {pull}24300[#24300]
* Updates `_claimPendingJobs` so they have a valid job when updating encounters a version conflict {pull}21980[#21980]
* Fixes error with Reporting URLs generated prior to 6.2 (when no layout parameter exists) {pull}23508[#23508]
* Changes the Reporting layout code to TypeScript {pull}22454[#22454]

Security::
* Fixes missing email address on account management screen {pull}22652[#22652]
* Updates user management so that email and name are optional {pull}24842[#24842]

Sharing::
* Removes the LESS files inside `/src/core_plugins/kibana/public/home` and replaces them with Sass {pull}22160[#22160]
* Updates redux, react-redux, and corresponding types {pull}22442[#22442]
* Moves /shorten to /api/shorten_url {pull}21808[#21808]
* Replaces RadioButtonGroup with EuiButtonGroup {pull}22256[#22256]
* Converts Sharing top navigation to EUI {pull}21997[#21997]
* Migrates reporting top navigation to Share context menu {pull}22596[#22596]
* Migrates panel_state.js to panel_state.ts {pull}22515[#22515]

Visualizations::
* Fixes issue with heat map showing black tiles.  {pull}20753[#20753]
* Fixes pie charts so that they work properly when the time window doesn’t have any data {pull}24031[#24031]
* Removes extraneous whitespace characters between attributions in attribution string in map visualization {pull}22003[#22003]
* Fixes a memory leak in `vislib`, where the scope used for the legend was never destroyed.  As a result, memory piled up in a dashboard with auto-refresh enabled. {pull}24134[#24134]
* Fixes input controls so that child controls are correctly updated after parent reset {pull}23616[#23616]
* Resolves a regression introduced by the `vis legacy` response handler, where a data table was no longer able to display nested tables beyond one level deep when splitting on a table. {pull}24377[#24377]
* Fixes IE scrollbar issue on Time Series Visual Builder gauges in dashboard {pull}22740[#22740]
* Removes the LESS files inside `/src/core_plugins/kibana/public/visualize` and replaces them with SASS {pull}22679[#22679]
* Removes the LESS files for the Timelion plugin and replaces them with Sass {pull}23339[#23339]
* Removes the LESS files for vis types in the core_plugins input_control_vis, markdown_vis, metric_vis, region_map, table_vis, tag cloud, tile_map, and vega and replaces them with Sass. {pull}23513[#23513]
* Upgrades Tinymath to v1.1.0 {pull}24457[#24457]
* Introduces an artificial delay to mitigate an issue with Chromium reports occasionally rendering a blank initial visualization {pull}22601[#22601]
* Removes a deprecation notice that is no longer needed for ascending sort for terms aggregations {pull}23421[#23421]
* Fixes heat map colors to depend on existing number of ranges {pull}21958[#21958]
* Creates re-usable `IndexPatternSelect component` {pull}23335[#23335]
* Refactors maps wms settings {pull}20371[#20371]
* Fixes date_histogram to correctly work inside plugins without global time picker {pull}21955[#21955]
* Simplifies tabify {pull}19061[#19061]
* Decouples agg configs from vis {pull}21827[#21827]
* Changes the way aggconfig field filter works {pull}22756[#22756]
* Fixes sorting of terms bucket {pull}22919[#22919]
* Rewrites hierarchical response handler {pull}22578[#22578]
* Removes vis dependency from response handlers {pull}22583[#22583]
* Adds proper aria-label for Close button in Inspect panel {pull}21719[#21719]
* Prevents IE11 from focusing parts of vislib charts {pull}22135[#22135]
* Adds option to drop partial buckets from date_histogram visuals {pull}19979[#19979]
* Moves timezone settings into autoload file {pull}22623[#22623]
* Fixes broken visualize CSS {pull}22707[#22707]
* Removes nesting-indicator directive {pull}23180[#23180]
* Ensures vega options dropdown menu is visible {pull}24409[#24409]
* Fixes updating editor state {pull}22869[#22869]
* Fixes courier issues causing `showMetricsOnAllLevels` to break {pull}24488[#24488]
* Fixes “other” bucket so that it works on multiple aggregations.  Also fixes filtering on “other” bucket {pull}24217[#24217]
* Generates the correct bucket keys regardless of query type {pull}25002[#25002]
* Fixes Time Series Visual Builder state updates when changing index patterns {pull}24832[#24832]
* Fixes filters on other bucket for table visualization and vislib legend {pull}24473[#24473]
* Ensures baselayers display in region maps {pull}22609[#22609]
* Fixes Time Series Visual Builder state updates when changing index patterns {pull}24832[#24832]
* Fixes missing Markdown variables in Time Series Visual Builder {pull}25132[#25132]




[[release-notes-6.4.3]]
== {kib} 6.4.3

[float]
[[breaking-6.4.3]]
=== Breaking changes

See <<breaking-changes, breaking changes>> for the changes
to be aware of when migrating your application from one version of
{kib} to another.


[float]
[[enhancement-6.4.3]]
=== Enhancements

Platform::
* Upgrades the minimum yarn version to 1.10.1 {pull}23971[#23971]

[float]
[[bug-6.4.3]]
=== Bug fixes

Monitoring::
* Ensures the provided node id is used in a query {pull}23715[#23715]
* Preserves the state of cross cluster search {pull}24331[#24331]

Security::
* Fixes an issue with reporting that could potentially send authentication
credentials to third parties (CVE-2018-17245).  See
https://www.elastic.co/blog/elastic-support-alert-kibana-reporting-vulnerability[this blog post].  {pull}24177[#24177]
* Fixes an issue with the console API that might allow arbitrary files to be
included from the system (CVE-2018-17246). See
https://www.elastic.co/community/security[Security issues]. {pull}24398[#24398]

Visualization::
* Fixes the editor so that updating `aggconfigs` in a visualization
and then calling `vis.updateState()` works correctly {pull}22869[#22869]
* Fixes a memory leak in `vislib`, where the scope used for the legend was never
destroyed, which caused memory to pile up in a dashboard that has auto-refresh enabled {pull}24134[#24134]
* Fixes pie charts so that they work properly when the time window doesn't have
any data {pull}24031[#24031]


[[release-notes-6.4.2]]
== {kib} 6.4.2

[float]
[[bug-6.4.2]]
=== Bug fixes

Platform::
* Updates Typescript to enable support for iterators in browsers {pull}22986[#22986]

Security::
* Fixes sorting by full name and email address in *Management > Users* {pull}23242[#23242]


[[release-notes-6.4.1]]
== {kib} 6.4.1

[float]
[[bug-6.4.1]]
=== Bug fixes

APM::

* Reverts the default value for indices to `apm-*` {pull}22445[#22445]
* Fixes links that were missing the base path {pull}22592[#22592]
* Fixes links to machine learning jobs {pull}22820[#22820]

Design::
* Resolves a problem that caused tooltips to generate an error in Internet Explorer 11 {pull}23006[#23006]

Discover::
* Fixes regression in `CallClient` that caused request errors,
such as timeouts, to result in fatal errors {pull}22558[#22558]
* Improves test coverage for `CallClient` error cases {pull}22599[#22599]
* Adds explicit format parameter to `docvalue_fields` requests {pull}22771[#22771]

Docs::
* Sets branch to 6.4 for doc links {pull}22845[#22845]

Machine Learning::
* Fixes links to results for jobs with no results {pull}22650[#22650]
* Adds milliseconds to watch start and end times {pull}22659[#22659]
* Removes calendars from job when cloning {pull}22667[#22667]
* Fixes issue with incorrect timezones in Jobs list {pull}22714[#22714]
* Disables links on the Jobs list to Single Metric Viewer for non-applicable jobs {pull}22809[#22809]

Management::
* Fixes issue with importing a visualization with a missing saved search {pull}22029[#22029]
* Fixes issue with importing saved objects when an index pattern is missing {pull}22068[#22068]
* Fixes the alignment of the Save and Cancel buttons on the Settings page {pull}21898[#21898]
* Fixes _source formatting {pull}22800[#22800]

Monitoring::
* Uses 0 as the default for shard count if the node is not found {pull}21000[#21000]
* Fixes logging when Monitoring reinitializes with a HUP signal (#22464) {pull}22513[#22513]
* Fixes the problem where the *Shard Legend* panel in *Monitoring > Indices*
only shows one replica per shard {pull}23183[#23183]

Platform::
* Calculates the content length for the export API {pull}22847[#22847]
* Relies on RFC1123 when validating `server.host` {pull}22469[#22469]
* Fixes a problem with force `del()` when `bundleDir` is outside the current
working directory {pull}22981[#22981]
+
Trying to run a {kib} optimization (usually after installing or disabling a plugin)
from a directory that is not a parent of the `optimize.bundleDir` configuration or
the {kib} installation no longer fails with "Cannot delete files/folders outside
the current working directory."

Reporting::
* Removes the `shouldComponentUpdate` function from `MarkdownVisComponent`
because it caused reporting failures {pull}21501[#21501]


Sharing::
* Displays warning state when status check has no data {pull}22178[#22178]
* Adds detection of invalid JSON searchSource to saved_object and dashboard {pull}20379[#20379]
* Updates dashboard-only mode to display saved searches {pull}22685[#22685]
* Adds `aria-label` to search input on dashboard listing view {pull}22467[#22467]
* In the Controls visualization, safely handles case where value can not be
extracted from Kibana filter {pull}22885[#22885]

Visualization::
* Fixes broken visualize CSS {pull}22713[#22713]
* Fixes the editor so that it correctly shows errors for parent pipeline aggregations {pull}22874[#22874]

[[release-notes-6.4.0]]
== {kib} 6.4.0

[float]
[[breaking-6.4.0]]
=== Breaking Changes

Platform::
* Replaces `SearchSource` fetch with `fetchAsRejectablePromise` {pull}20130[#20130]
+
`SearchSource` exposed two methods for fetching, `fetch` and `fetchAsRejectablePromise`.
`fetch` provided a broken implementation because it never set an `errorHandler` on
the created `SearchRequest` instance. This resulted in a method that worked fine
until the underlying {es} request failed. Then {kib} would crash because
`SearchRequest` would attempt to call `errorHandler` which was undefined.
+
The only difference between `fetch` and `fetchAsRejectablePromise` was how errors
were handled. This change removes the original fetch method and renames
`fetchAsRejectablePromise` as fetch. It also moves `errorHandler` into
the constructor of `SearchRequest` and throws an error when not provided.

[float]
[[features-6.4.0]]
=== New Features

For an overview of the features that were added in 6.4.0 and how the user experience
improved, see <<release-highlights-6.4.0, 6.4.0 Release Highlights>>.

[float]
[[enhancements-6.4.0]]
=== Enhancements

APM::
* Adds `compressed` prop to the EuiFormRows for a more compressed looking form.
Works nicely for smaller screensizes. {pull}19204[#19204]
* Updates Ruby onboarding instructions {pull}21477[#21477]
* Syncs stored_objects with files from APM Server {pull}21096[#21096]

Console::
* [Fixes #19178] Adds support for Console autocompletion of missing
Query Domain Specific Language (DSL) features {pull}19318[#19318]
* [Fixes #19138] Adds `regexp` to query DSL support for Console autocompletion {pull}19176[#19176]
* [Fixes #20141] Adds support to Console for autocompletion of template names in API endpoints {pull}20218[#20218]
* [Fixes #20140] Adds rollover endpoint body completion to Console {pull}20167[#20167]
* Adds links to the API documentation in the Console {pull}19715[#19715]
* [Fixes #10264] Updates {es} API support to the 6.0 level for Console autocompletion {pull}18930[#18930]

Discover::
* [Fixes #11752] Adds the ability to show and hide the filter bar {pull}17161[#17161]
* [Fixes #20182] Uses config `filters:pinnedByDefault` for filters created with the
*Add a filter* modal so new filters are pinned by default  {pull}20359[#20359]

Grok Debugger::
* Converts the Grok Debugger to use React and EUI components {pull}20027[#20027]
* [Fixes #17857] Adds syntax highlighting for grok expressions
in the *Grok pattern* text area of the Grok Debugger {pull}18572[#18572]

Logstash::

* Creates a new class that represents the pipeline in a flat structure to make it easier
for the Config view to visualize data {pull}19084[#19084]
* [Fixes #18423, #18020] Adds a new visualization of Logstash pipelines that mimics what
users see when they look at the corresponding configuration file {pull}18597[#18597]
* [Fixes #19006] Adds a *Netflow Overview dashboard* button at the end of the Netflow tutorial {pull}19299[#19299]

Machine Learning::

* Allows overwriting of query in recognized jobs {pull}18632[#18632]
* Adds feature to move from wizard to advanced job configuration {pull}18633[#18633]
* Converts forecasting modal to EUI and React {pull}18630[#18630]
* Adds number of forecasts to monitoring overview {pull}20758[#20758]
* Adds Ace editor for JSON {pull}18692[#18692]
* Adds improvements to Data recognizer UI {pull}18804[#18804]
* Adds APM module {pull}18805[#18805]
* Adds jsconfig file for better code navigation in vscode {pull}19203[#19203]
* Starts datafeed from the module setup endpoint {pull}19254[#19254]
* Rewrites jobs list using React and EUI {pull}19758[#19758]
* Allows job cloning via wizards {pull}20227[#20227]
* Uses {kib}'s auto-refresh for jobs list {pull}20496[#20496]
* [Fixes #20518] Provides better error notifications in jobs list {pull}20880[#20880]
* Adds rules and filters permission checks {pull}21097[#21097]
* Creates watch from new jobs list {pull}21112[#21112]
* Updates URLs in job validation messages {pull}21361[#21361]
* [Fixes #18192] Displays typical values for `lat_long` anomalies {pull}18715[#18715]
* Converts Explorer Influencers List to React and EUI {pull}18773[#18773]
* [Fixes #18456] Hides Top Influencers list if job has no influencers {pull}18819[#18819]
* Filters Top Influencers list based on swimlane selection {pull}18946[#18946]
* [Fixes #18574] Sorts Explorer view by swimlane for selected time {pull}18955[#18955]
* Converts anomalies table to React and EUI {pull}19352[#19352]
* Converts anomalies controls to React and EUI {pull}19856[#19856]
* Adds page to ML Settings for viewing and editing filter lists {pull}20769[#20769]
* Adds editor for configuring detector rules {pull}20989[#20989]
* Converts the custom URL editor to React and EUI {pull}21094[#21094]
* Adds icon to the Anomalies Table if detector has rules {pull}21135[#21135]
* Migrates `mlDocumentationHelpLink` to React and EUI {pull}19124[#19124]
* Migrates bucket span estimator button to React and EUI {pull}19045[#19045]
* [Fixes #19068] Provides more helpful job validation success messages {pull}21079[#21079]
* [Fixes #18689] Makes script_fields available in field dropdowns of the advanced wizard's detectors modal {pull}21205[#21205]
* Improves job validation messages {pull}21191[#21191]

Management::
* [Fixes #19741] Modifies the logic for showing the *Extend Trial* pane {pull}20211[#20211]
* [Fixes #19269] Refactors the *Management > Index Pattern > Edit field*
and *Create scripted field* pages to use React and EUI {pull}20245[#20245]
* [Fixes #11804] Adds the ability to run scripted fields so users can view the results and see if the script works
as intended {pull}20746[#20746]
* Adds a field formatter for a static lookup table/map {pull}19637[#19637]
* [Fixes #19872] Improves warnings for delete and force merge {pull}20264[#20264]
* [Fixes #17045] Refactors the *Management > Advanced Settings* page to use React and EUI {pull}17465[#17465]
* [Fixes #19185] Updates querying for saved objects to use the saved objects API {pull}19193[#19193]
* [Fixes #18584] Adds support for index patterns to leverage
https://www.elastic.co/guide/en/elasticsearch/guide/current/optimistic-concurrency-control.html[optimistic concurrency],
 which is supported through the saved objects API {pull}18937[#18937]
* Converts the *Users* and *Edit User* pages of security management to the EUI {pull}20739[#20739]
* Updates the *Saved Objects* UI {pull}17426[#17426]

Monitoring::

* Adds `get_clusters_summary` to the shrink cluster API response {pull}18596[#18596]
* Adds a yellow status phase to the Monitoring app plugin startup {pull}18939[#18939]
* Adds anonymous Beats statistics found in the Monitoring data to the telemetry payload {pull}18833[#18833]

Operations::

* Adds metrics collector and stats API {pull}17773[#17773]
+
Adds a new `/api/stats` route to expose metrics for {kib} Metricbeat.

* Updates React to 16.3  {pull}18768[#18768]
* Upgrades TypeScript to 2.9.2 {pull}20757[#20757]
* Adds TypeScript support for the server and browser {pull}19104[#19104]
* [Fixes #18780] Adds https://github.com/palantir/tslint[TSLint integration] {pull}19105[#19105]
* Adds SCSS support for plugins {pull}19643[#19643]

Platform::

* Integrates new platform server side into {kib} {pull}18951[#18951]
* [Fixes #14870] Documents how the new platform is integrated into the legacy {kib} platform {pull}20925[#20925]
* Adds Beats tutorials {pull}20514[#20514]
* Adds Apache 2.0 license headers to the top of each file {pull}19383[#19383]

Security::
* [Fixes #18178] Implements {kib} privileges to enable role-based access
control in {kib} without granting {kib} users direct access to the `.kibana
index` {pull}19723[#19723]

Sharing::
* [Fixes #16611] Adds a status check to the *Add data* tutorials {pull}17732[#17732]
* [Fixes #17679] Adds an `isBeta` flag so the UI can indicate when an *Add Data* module
is in Beta mode {pull}20049[#20049]
* [Fixes #17803] Adds the ability to publish {kib} saved objects from
an *Add Data* tutorial {pull}19559[#19559]
* [Fixes #16473, #10813] Adds REST endpoints for listing, installing, and uninstalling sample data sets {pull}17807[#17807]
* Allows panels in the dashboard to include custom actions {pull}18877[#18877]
+
This enables you to include actions specific to the type of visualization or search in the panel.
For example, some visualizations might have an action for creating a machine learning
job while others might have actions for generating a report or creating a watch.

* [Fixes #14529] Adds a *Dynamic Options* toggle switch to the Controls visualization
{pull}18985[#18985]
+
When set to true, the *Dropdown Options* list is updated and filtered by the user input.

* Adds a notification service to {kib} that can be used to send
asynchronous notifications, such as email and Slack messages {pull}19236[#19236]
* Converts the dashboard listing page to React and EUI {pull}16967[#16967]
* Converts the dashboard *Add Panel* to React and EUI {pull}17374[#17374]
* Converts the dashboard *Save* modal to React and EUI {pull}19531[#19531]
* [Fixes #19591] Migrates the dashboard Save error to EUI toast {pull}19956[#19956]
* Converts KuiContextMenu to EuiContextMenu {pull}17621[#17621]
* [Fixes #20742] Highlights sample data section for new users {pull}20953[#20953]

Telemetry::
* Add Beats module and input info to Telemetry {pull}20648[#20648]
* [Fixes #19534] Moves `x-pack/monitoring` collector classes to `src/server/usage` {pull}20248[#20248]

Visualization::
* [Fixes #18918] Allows setting an offset relative to {kib} time {pull}19709[#19709]
+
For example, you can set a Timelion expression as
`.es(index=logstash*,timefield=@timestamp,offset=timerange:-1)`.
When the time picker is set to "last 15 minutes", the offset is `-900s`.
When the time picker is set to "last 24", the offset is `-86400s`.

* Allows splitting series on multiple fields {pull}17855[#17855]
+
Splitting lines, bars, and so on in charts on multiple fields no longer requires
you to create a scripted field that contains the value of all other fields.
You can now define multiple aggregations to split your chart on multiple fields.

* [Fixes #5517] Adds multiple colorramps to coordinate maps {pull}17403[#17403]
* [Fixes #9502] Adds significant terms to tag cloud visualization {pull}17770[#17770]
* Replaces spy panels with an Inspector {pull}16387[#16387]

[float]
[[bugs-6.4.0]]
=== Bug Fixes

APM::

* Fixes Kuery autocompletion in APM {pull}21249[#21249]
* Fixes APM so it no longer has a hard requirement on `kuery_autocomplete` {pull}21539[#21539]

Console::
* Fixes issues with autocompletion {pull}19654[#19654]
* [Fixes #20139] Fixes issues with autocompletion and slashes at end of a URL {pull}20151[#20151]
* Brings Console in line with {kib} eslint rules {pull}19438[#19438]
* Adds generated spec files for {xpack} endpoints to Console and adjusts code to
to handle the same override logic {pull}19928[#19928]
* Removes custom tokenizer code from Console {pull}20013[#20013]

Discover::

* Removes unnecessary PromiseEmitter {pull}19845[#19845]
* Prevents undefined "to" and "from" timepicker dates {pull}20355[#20355]
* Refactors courier by naming internal `searchRequest` variable consistently {pull}20448[#20448]
* Replaces notifier warnings in Discover with toasts {pull}20650[#20650]
* Tests the `callClient.js` client {pull}20605[#20605]
* Fixes a bug in which Discover erroneously shows shard failures message {pull}21003[#21003]
* [Fixes #16771] Fixes bug in Discover where the code expected the shard failure's `reason`
property to be a string or number, when it's really an object  {pull}21601[#21601]
* [Fixes #15143, #17696] Incrementally increases the context time window {pull}16878[#16878]
* [Fixes #18636] In the Filter editor, hides fields until they are scrolled into view to decrease load time {pull}18640[#18640]
* Extracts the autocomplete functionality of {kib}'s query language into a plugin {pull}20747[#20747]
* Ensures a field exists in an the index pattern before grabbing it.  This ensures that the filter bar displays even if the index pattern or the field name is bad. {pull}20639[#20639]
* Fixes a typo where quotes were used when backticks were intended. This fixes the text for a shard failure warning toast. {pull}21285[#21285]
* [Fixes #19718] Allows overwriting of filters when adding a filter with `queryFilter` {pull}19754[#19754]

Grok Debugger::
* [Fixes #17856] Fixes the border in the Grok Debugger so it no longer cuts off the bottom line of text {pull}18752[#18752]
* [Grok Debugger] Exports a helper function from the Ace `index.js` file instead from its own file {pull}18820[#18820]

Logstash::
* [Fixes #18791] Removes Ruby mode from the Pipeline Ace editor {pull}18807[#18807]
* Fixes the bottom border of the editor on the *Edit Pipeline* page in Logstash Management {pull}18834[#18834]
* Adds vertex reference to pipeline statement classes in the Pipeline viewer {pull}19134[#19134]
* Preserves all nested pipeline statements during graph conversion {pull}19101[#19101]
* Provides `events_in_per_millisecond` and `events_out_per_millisecond` for Logstash pipelines {pull}19446[#19446]
* [Fixes #19736] Removes obsolete visualization code as part of revamp of the Pipeline viewer {pull}20122[#20122]
* [Fixes #20123] Renames the Config viewer to Pipeline viewer {pull}20230[#20230]
* [PipelineViewer] Replaces the bare `img` tags the with EuiIcon component {pull}20330[#20330]
* [Fixes #19844] Refactors the collapsible statement component to wrap `props.children` in the Pipeline viewer {pull}20252[#20252]
* Removes the explicit Close button in the Pipeline viewer because the new EuiFlyout component provides a Close button by default   {pull}20044[#20044]


Machine Learning::

* [Fixes #5003] Provides better error reporting in create recognized job page {pull}18638[#18638]
* [Fixes #18745] Fixes issue in Firefox and IE11 where the loading of new job icons results in a 404 response {pull}18766[#18766]
* Fixes issue where the data recognizer appears to hang after all tasks have completed successfully {pull}18803[#18803]
* Removes `_feature` and `_ignored` from detector modal {pull}20984[#20984]
* Adds missing default privilege values {pull}21131[#21131]
* [Fixes #18168] Fixes min and max date picker options {pull}21197[#21197]
* [Fixes #18379] Clears bucket span invalid label {pull}21262[#21262]
* [Fixes #21401] Provides fixes for wizard card layout when cloning {pull}21403[#21403]
* Fixes crash in fields service when user has no index permission {pull}21469[#21469]
* [Fixes #18575] Fixes issues with end time of Explorer swimlane selection {pull}18995[#18995]
* [Fixes #19205] Turns off display of time series charts if metric field is script field {pull}19206[#19206]
* [Fixes #19720] Fixes Single Metric Viewer for multi week bucket spans {pull}19759[#19759]
* [Fixes #20096] Adds missing aria-label attribute to various components {pull}20117[#20117]
* [Fixes #19944] Fixes link to Single Metric Viewer zoom for sparse data {pull}20144[#20144]
* [Fixes #18023] Fixes cosmetic issues with cut off chart overflows {pull}19794[#19794]
* [Fixes #18187] Fixes overlapping swimlane axis labels {pull}19800[#19800]
* [Fixes #18880] Fixes `agg-type` dropdowns size and styling {pull}19816[#19816]
* Changes info icon tooltip position to top to avoid overlapping with corresponding form fields {pull}20874[#20874]
* [Fixes #20867] Updates job validation so it reports an error when categorization job is using `mlcategory` {pull}21075[#21075]
* [Fixes #18516] Updates job validation so it uses fieldCaps to check aggregatable fields to avoid triggering Elasticsearch errors {pull}21087[#21087]
* [Fixes #18163] Improves bucket span estimator stability {pull}21282[#21282]
* Fixes an issue with failing job validation when fieldCaps object is malformed {pull}21116[#21116]


Management::
* [Fixes #17583] Clears error message for upload in `componentDidMount` so that users no
longer see the message when they use the Cancel or Back button to go back to the Upload page. {pull}20268[#20268]
* [Fixes #20069] Fixes sorting for index management {pull}20266[#20266]
* [Fixes #20107] Fixes issues with bad error message for low permission users {pull}20275[#20275]
* [Fixes #19309] Fixes issue in edit index settings caused by Ace upgrade {pull}19311[#19311]
* [Fixes #21703] Fixes import of index patterns {pull}21743[#21743]
* Removes Close buttons from *Saved Object Relationship* flyout and *Index Management* flyout {pull}20043[#20043]
* In Watcher, replace uses of Notifier with toastNotifications {pull}20538[#20538]
* [Fixes #20611] Re-enables the `indexPattern:placeholder` setting {pull}20685[#20685]
*  Adds `SearchStrategyRegistry` and `defaultSearchStrategy` to support existing search behavior
and integrates it with `CallClient` {pull}20497[#20497]
* [Fixes #21512] Fixes broken link to saved object from *Relationship* flyout {pull}21513[#21513]
* [Fixes #21572] Blocks users from interacting with the UI while saved objects
are deleted {pull}21575[#21575]
* [Fixes #21615]  Fixes saved objects item count and table filtering {pull}21574[#21574]
* Swaps Watcher `create action` tooltips {pull}21717[#21717]
* In Watcher, ensures the text property is optional {pull}19034[#19034]
* Updates jest snapshots {pull}19186[#19186]
* [Fixes #19120] Ensures Watcher accounts for cluster-level settings {pull}19121[#19121]
* [Fixes #18756] Fixes Ace editor warnings {pull}18893[#18893]
* Fixes Ace warnings in Console output {pull}19272[#19272]
* [Fixes #19802] Fixes search in *Advanced Settings* {pull}19841[#19841]
* [Fixes #20156] In *Advanced Settings*, changes the display of the JSON default setting value to
use EuiCodeBlock and uses the `overflowHeight` prop for long values {pull}20744[#20744]
* Adds test coverage around the relationships endpoints to validate responses and check error handling {pull}19737[#19737]
* Updates data test subject to use correct property from item object {pull}20794[#20794]
* [Fixes #21416] Fixes *Export everything* {pull}21434[#21434]
* Changes the painless scripted field {pull}21026[#21026]
* Uses `SavedObjectsClientProvider` to provide `SavedObjectLoader` with an Angular-wrapped saved object client {pull}21541[#21541]
* [Fixes #18443] Makes *Change password* button on account page keyboard accessible {pull}20958[#20958]

Monitoring::
* Ignores duplicate shards {pull}21057[#21057]
* [Fixes #20276] Capitalizes the license type {pull}20683[#20683]
* [Fixes #20853] Removes `kibana_stats.requests.status_codes` from the bulk uploader {pull}20855[#20855]
* [Fixes #20628] Uses 0 as the default for shard count if the node is not found {pull}21000[#21000]
* [Fixes #21308] Ensures {kib} passes down the `expiry_date` for the license {pull}21354[#21354]
* Fixes capitalization typo for `className` attribute {pull}20104[#20104]
* [Fixes #18104] Refactors the {es} Indices Listing to use Base Controller and a React component
instead of an Angular directive {pull}18595[#18595]
* Adds collector classes for objects that are registered in a `CollectorSet` {pull}19098[#19098]
* Ensures functional tests work correctly for the summary status component {pull}19289[#19289]
* Refactors the {es} Nodes Listing to use Base Controller and a
React component instead of an Angular directive {pull}18585[#18585]
* Uses React components for {es} directives {pull}19362[#19362]
* Uses React components for {kib} directives {pull}19379[#19379]
* Updates the Logstash cluster status bars to React {pull}19433[#19433]
* [Fixes #19453] Fixes the Node Advanced page {pull}19740[#19740]
* [Fixes #20132] Fixes the listing and filtering of {es} nodes {pull}20321[#20321]
* [Fixes #19052] Updates the monitoring status bars to use React components instead of Angular directives {pull}19183[#19183]
* Removes the {xpack} usage module {pull}21099[#21099]
* [Fixes #12504] Moves hardcoded Reporting stats type collection out of monitoring plugin {pull}18894[#18894]
* [Fixes #19509] Checks if monitoring is enabled before registering collector {pull}19581[#19581]
* Implements the &quot;kibana status&quot; spec from the Monitoring data model for stats {pull}20577[#20577]
* [Fixes #12504] Renames `TypeCollector` to `CollectorSet` for semantics {pull}18987[#18987]
* [Fixes #19567] Separates bulk upload behavior from CollectorSet {pull}19691[#19691]

Operations::
* Executes the `tsc.cmd` on Windows during a build {pull}19622[#19622]
* Bumps `https-proxy-agent` to the latest version and removes the version lock {pull}17840[#17840]
* [Fixes #16836] Uses the `--no-bin-links` flag and deletes the `.bin` folders in the final build because they are not used {pull}19373[#19373]
* Removes build files {pull}19603[#19603]
* [Fixes #7237] Allows setting `NODE_OPTIONS` via `/etc/default` when using `sysv` {pull}15900[#15900]
* Puts JSX support in the root `tsconfig` file {pull}19359[#19359]
* Allows prod optimizations when running source {pull}20174[#20174]
* Avoids unnecessary recompile at startup {pull}20176[#20176]
* Validates current node version {pull}19154[#19154]
* Removes node version validator from git pre-commit hook script {pull}19950[#19950]
* Organizes metrics into `metrics_collector`, tests into `test` directories, and removes `mock-fs` for the `cgroup` test {pull}17788[#17788]
* Handles configured `path.data` for Keystore location {pull}19916[#19916]
* Includes `Node.js` version in notice file {pull}20133[#20133]
* [Fixes #20063] Uses zip snapshot on Windows {pull}20503[#20503]
* Ensures no `yarn.lock` changes are required  {pull}20625[#20625]
* Provides workaround for yarn interdependency conflicts {pull}20805[#20805]
* Skips install dependencies {pull}20649[#20649]
* Updates messaging when {xpack} is not available {pull}21221[#21221]
* Updates status page to reflect changes to the `/api/stats` endpoint {pull}21055[#21055]
* [Fixes #19968] Adds `data-test-subj` to buttons and updates snapshots {pull}20080[#20080]
* Changes `tryForTime` error output from `failure` to `error`, to make it easier to grep the logs for actual failures {pull}19707[#19707]
* Removes `markdown-to-jsx` from `yarn.lock` {pull}20537[#20537]
* Extends the `Chrome` TypeScript type {pull}21076[#21076]
* Updates `yarn.lock` with new `react-test-renderer` version {pull}19745[#19745]
* [Fixes #21006] [esArchiver] Replace Windows line endings on parse {pull}21111[#21111]
* [precommitHook] Ignores casing for files in `.github` directory {pull}19279[#19279]
* [devUtils/procRunner] Waits for proc to exit so can fallback to SIGKILL {pull}20918[#20918]
* [Fixes #19700] Turns off `object-literal-sort-keys` rule {pull}20274[#20274]
* Converts `ResizeChecker` and `render-complete` tools to TypeScript {pull}20531[#20531]
* Solves a problem where the `toApiFieldNames` method in the Stats API was converting
arrays in the data to objects. {pull}21053[#21053]
* Returns keystore data as a structured object. {pull}22022[#22022]

Platform::
* [Fixes #20573] Removes unnecessary`kbn-version` header on all HTTP responses {pull}20551[#20551]
* [Fixes #18779] Renames `@kbn/babel-preset/common` and `node` and `webpack`
to `@kbn/babel-preset/common_preset` and `node_preset` and `webpack_preset` {pull}19025[#19025]
* Upgrades RxJS from `6.1.0` to `6.2.1` {pull}20209[#20209]
* Uses TSLint to handle errors in `kbn_internal_native_observable` types {pull}20705[#20705]
* Makes legacy Kibana server aware of connection protocol {pull}20756[#20756]
* Logs correct {kib} URL when TLS is enabled {pull}20721[#20721]
* Fixes broken `SearchRequest` clone method {pull}20222[#20222]
* Simplifies Courier interface and organizes internals {pull}20060[#20060]
* Refactors `SearchLooper` and renames it `SearchPoll` {pull}20315[#20315]
* Removes Notifier `lifecycle`, `timed`, `event`, `describeError`, and `log` methods {pull}20327[#20327]
* Aggregates `SearchRequestQueue` functions into a single module {pull}20332[#20332]
* Refactors `SearchSource` interface {pull}20334[#20334]
* Declares `SearchRequest` state variables in constructor {pull}20578[#20578]
* Fixes bug in `propFilter` logic when it is not passed a filter  {pull}20569[#20569]
* Adds the ability to abort a `kfetch` call {pull}20700[#20700]
* Removes `courier:searchRefresh` Angular event from `searchPoll` {pull}20850[#20850]
* Converts `notify.warning` calls to use `toastNotifications` {pull}20767[#20767]
* [Fixes #21386] Fixes formatting of *Saved object not found* error toast {pull}21421[#21421]
* Adds missing dev dependencies to `package.json` {pull}19625[#19625]
* Adds `_bulk_create` endpoint to `/api/saved_objects` {pull}20498[#20498]
* Removes Angular dependencies in `SavedObjectClient` {pull}20384[#20384]
* [Fixes #17481] Migrates uiApp &quot;uses&quot; to explicit imports in apps {pull}17828[#17828]
* [eslint] Unifies resolver configs {pull}19102[#19102]
* [tslint] Fixes violations in `kbn-system-loader` {pull}19336[#19336]
* [tslint] Fixes violations in `kbn-pm` {pull}19335[#19335]
* Adds `import()` support to `eslint-plugin-no-unsanitized` {pull}19315[#19315]
* Checks filename casing in CI {pull}19282[#19282]
* Ensures all failures are logged {pull}19271[#19271]
* Uses https://github.com/sindresorhus/execa[execa] in plugin-helpers so that errors include
`stdout` with helpful information {pull}20110[#20110]
* [tslint] Ensures that the status code is 1 when an error occurs in a linter {pull}20567[#20567]
* [tslint] Adds helper for running tslint on specific projects {pull}20866[#20866]
* [Fixes #20524] Fixes inconsistency with plugin naming in `kbn-plugin-generator` {pull}20808[#20808]
* [Fixes #20694] Bootstraps the legacy platform within the new platform {pull}20699[#20699]
* [tslint] Enables no-default-export rule {pull}20952[#20952]
* [kfetch] Converts the kfetch API to TypeScript to make it easier to consume in a purely TypeScript project {pull}20914[#20914]
* [kfetch] Calls `Error.captureStackTrace` only if it exists {pull}21376[#21376]
* [Fixes #20922] Converts the `kibana-install-dir` flag to the `installDir` option in `kbn-test` {pull}21317[#21317]
* Disables the tslint rule that checks that every interface name begins with an `I` {pull}19402[#19402]
* Updates makelogs to 4.1.0 {pull}20232[#20232]
* Increases the maximum line width in prettier to 100 {pull}20535[#20535]
* Moves `del` to dependencies {pull}20921[#20921]
* Adds the `_xpack/usage` HTTP API endpoint, which returns data fetched from {es} about {xpack} feature usage. {pull}19232[#19232]
* [Fixes #19611] Uses authentication from request headers in {xpack} usage API {pull}19613[#19613]


Security::

* [Fixes #20600, #20177] Improves communication for {es}/{xpack} being unavailable {pull}21124[#21124]
* [RBAC Phase 1] Updates application privileges when {xpack} license changes {pull}19839[#19839]
* [Fixes #16516] Disallows use of `dangerouslySetInnerHTML` on React components {pull}17759[#17759]
* Exposes `getSavedObjectsRepository` from Saved Objects Service to allow callers
to obtain an instance of the repository directly {pull}19677[#19677]
* [Saved Objects Client] Returns information about what is missing in the 404 {pull}19868[#19868]
* No longer sets certs and keys for proxied calls to {es} {pull}17804[#17804]
+
Resolved issue with using PKI to authenticate the internal server user against
{es} when {security} is disabled or the realms in {es} are configured with
PKI taking precedence to basic authentication.


Sharing::
* [Fixes #17853] Replaces `react-select` with EuiComboBox for input controls {pull}17452[#17452]
* [Fixes #19803] Provides valid value for InputRange component when Range slider is not set {pull}20002[#20002]
* Updates RangeControl to properly handle disabled state {pull}20811[#20811]
* [Fixes #20807] Avoids day-long gaps in sample data {pull}20897[#20897]
* [Fixes #21430] Removes `mergePanelData` from dashboard redux reducers {pull}21607[#21607]
* Removes padding {pull}19547[#19547]
* [Fixes #20724] Blacklists `Transfer-Encoding` HTTP header for PDF report generation {pull}20755[#20755]
* [Fixes #21212] Fixes layout on Reporting page {pull}21218[#21218]
* [Fixes #20469] Fixes issue with layout of the Sample Data list in Internet Explorer {pull}21619[#21619]
* [Fix #18838] Fixes incorrect 403 message when generating reports {pull}19054[#19054]
* Edits the Reporting job complete notification service {pull}19283[#19283]
* Removes application icon assets from {kib} because they now ship with EUI {pull}18570[#18570]
* Removes double modal when cloning dashboard with duplicate title {pull}19049[#19049]
* [Fixes #19665] Fixes gaps in the sample Flight data {pull}19912[#19912]
* Replaces timefilter Angular service with singleton {pull}19852[#19852]
* [Fixes #20062] Uses absolute path for sample data {pull}20244[#20244]
* Removes `display` from timefilter refreshInterval state {pull}20348[#20348]
* Removes Angular dependency from Field and FieldList {pull}20589[#20589]
* [Fixes #21326] Moves the global state management out of `kbn_global_timepicker.js` and into `timefilter.js` so all of the
timefilter code resides in a single location and timefilter itself is responsible for updating the global state {pull}21440[#21440]
* [Fixes #21438] Sets pause to `true` when refresh interval is zero {pull}21498[#21498]
* [Fixes #21551] Ensures the Range control correctly handles response when read-only user does not have index permission {pull}21557[#21557]
* [Fixes #20477] Fixes dashboard state filters {pull}20480[#20480]
* Fleshes out communication layer between embeddables and dashboard {pull}17446[#17446]
* Cleans up the time range handling in embeddables {pull}17718[#17718]
* [Fixes #17912] Shows `completed_at` timestamp if status is completed or failed {pull}19551[#19551]
* Cleans up context menu toggle in view mode {pull}19558[#19558]
* [Fixes #19479, #19481] Updates the code for accessibility {pull}19561[#19561]
* Converts `ui/embeddable` folder to TypeScript {pull}19648[#19648]
* [Fixes #19541] Fixes bad call to `this.updateUrl` on Reporting panel {pull}19687[#19687]
* Converts dashboard panel actions to TypeScript {pull}19675[#19675]
* Converts dashboard redux code to TypeScript {pull}19857[#19857]
* [Fixes #19563] Converts screenshot stitcher code in Reporting to TypeScript {pull}20061[#20061]
* Removes `_behaviors` abstraction in Chromium reporting {pull}20106[#20106]
* Removes unused `destroy` function {pull}20111[#20111]
* [Fixes #20832] Bumps reporting timeout {pull}20833[#20833]
* [Fixes #20154] Fixes the dashboard start screen so it is center aligned on IE11 {pull}21066[#21066]

Telemetry::

* Removes {xpack} Usage API endpoint {pull}20800[#20800]

Visualization::
* [Fixes #18949] Fixes rendering of Markdown when opening links in new tab {pull}19356[#19356]
* [Fixes #17575] Sets timeout for Timelion search requests {pull}19711[#19711]
* [Fixes #18626] Fixes the disabling of aggregations in the visualize editor {pull}18796[#18796]
* [Fixes #19724] Fixes the filtering of the "other bucket" so that it works on all charts {pull}19860[#19860]
* [Fixes #4877] Fixes an issue with links containing parentheses being broken in Markdown {pull}19470[#19470]
* [Fixes #19823] Fixes issue with pre 6.1 gauge charts that were wrongly rendered as metric visualizations  {pull}19853[#19853]
* [Fixes #19919] Fixes prop type check in `MetricVisValue` {pull}19991[#19991]
* [Fixes #1059] Fixes relative URL for visualizations with terms aggregations {pull}20521[#20521]
* Adds log scale mode to the Y-axis for TSVB {pull}17761[#17761]
* Adds `AggTypeFieldFilters` to filter out fields in visualize editor {pull}20539[#20539]
* Refactors Markdown lifecycle methods to React 16.3 {pull}19436[#19436]
* [Fixes #21499] Fixes hidden ticks when using log scale {pull}21507[#21507]
* Removes unused code `src/core_plugins/metrics/public/services/executor_provider.js` {pull}20135[#20135]
* [Fixes #21426] Adds `if` check around using async `handler` object in `VisEditorVisualization` {pull}21454[#21454]
* Removes Angular from field formats {pull}17581[#17581]
* Removes Angular from `AggConfigs` {pull}17682[#17682]
* [Fixes #16595] Explicitly passes filters and queries to dashboard visualizations and saved searches {pull}19172[#19172]
* Removes Angular from courier request handler {pull}20032[#20032]
* Replaces `showMeticsAtAllLevels`, which is missing an "r" in the word metrics,
with `showMetricsAtAllLevels` {pull}20369[#20369]
* Moves the visualize editor out of visualize directive {pull}20263[#20263]
* Splits edit state from saved state {pull}20323[#20323]
* Removes Angular dependency from base and React vis types {pull}20386[#20386]
* [Fixes #20459] Applies scope in Angular vis type {pull}20461[#20461]
* Moves visualize legend into `vislib` legend {pull}20479[#20479]
* Removes Angular from `render_complete` {pull}20478[#20478]
* Refactors geohash agg to not use vis {pull}20298[#20298]
* Adds `indexPattern` to agg so it is not accessed from `vis.indexPattern` {pull}20491[#20491]
* Fixes broken interval label for the date histogram {pull}20548[#20548]
* Removes Angular from visualize {pull}20295[#20295]
* Removes `vis.aggs` references from `aggTypes` {pull}20508[#20508]
* Removes schema references from vis types {pull}20489[#20489]
* [Fixes #20407] Fixes filter on values that are not in the result {pull}20608[#20608]
* [Fixes #21297] Fixes problems with Apply being disabled in some cases {pull}21333[#21333]
* [Fixes #21301] Fixes error with average bucket pipeline aggregation {pull}21400[#21400]
* [Fixes #21464] Fixes embedded mode in visualize {pull}21468[#21468]
* [Fixes #21435, #21532] Fixes pinned filters in Visualize and Dashboard {pull}21463[#21463]
* Adds `EditorOptionsGroup` component {pull}18812[#18812]
* Replaces `_term` order in terms agg by `_key` {pull}19032[#19032]
* Adds an update function to the visualize loader {pull}19030[#19030]
* Changes toast notification so it doesn't show a warning in filter agg {pull}19255[#19255]
* Replace `vis.reload` by `forceFetch` requestHandler param {pull}19296[#19296]
* [Fixes #13590] Provides better geometry assessment in axis label filtering {pull}16130[#16130]
* Adds `AggTypeFilters` to filter out aggs in editor {pull}19913[#19913]
* Changes `AggConfig` to ES6 syntax {pull}20224[#20224]
* Makes `aggTypeFilter` registry return value directly {pull}20523[#20523]
* Reenables VEGA_DEBUG for Vega visualization {pull}20456[#20456]
* Improves the update status and converts it to TypeScript {pull}20546[#20546]
* Converts the components used in the visualization rendering infrastructure to TypeScript {pull}20940[#20940]
* Converts the visualize loader to TypeScript {pull}21025[#21025]
* Fixes empty vis toasts {pull}21388[#21388]
* Adds support for HTML tooltips to Vega {pull}17632[#17632]
* [Fixes #18942] Fixes Vega map refresh {pull}19245[#19245]
* Adds `autoRefreshFetch` event to timefilter {pull}20863[#20863]
* Always uses Elastic Map Services production url, even in dev {pull}21237[#21237]

{xpack}::
* Removes use of `resolveKibanaPath` from plugin helpers {pull}18979[#18979]
* Upgrades redux, redux-thunk and react-redux in {xpack} {pull}20267[#20267]
* [Fixes #18346] Temporarily ignores kebab casing in some parts of {xpack} {pull}18505[#18505]






[[release-notes-6.3.2]]
== {kib} 6.3.2

[float]
=== Bug fixes

Accessibility::
* [Fixes #19012] Adds missing aria-level attribute on the solutions page in {kib}. In
particular, it adds aria-level to KuiCardDescriptionTitle. {pull}20579[#20579]

Dashboard::
* [Fixes #20635] Reduces the scale factor to 4 when migrating panels that are in
a dashboard with margins. {pull}20727[#20727]

Discover::
* [Fixes #19445] Removes outdated Aria attribute {pull}20532[#20532]

Monitoring::
* Fixes issues with sorting and filtering of {es} nodes {pull}20383[#20383]
+
This issue fixes the sorting and filtering of rows in the table of {es} nodes
in the {kib} Monitoring UI.

Reporting::
* Fixes issue with running Chromium headless over HTTP when accessing {kib}
publicly via HTTPS {pull}20528[#20528]

Visualization::
* [Fixes #19378, #16884] Fixes editor sidebar to better handle long field
names {pull}20476[#20476]
* [Fixes #20240] Fixes issues with the flickering of visualizations on
refresh {pull}20848[#20848]
* Avoids shard failures when performing a `geo_bounding_box` filter on coordinate
maps {pull}19548[#19548]
* Fixes disabled aggregations in the visualization editor {pull}20450[#20450]

[float]
=== Important documentation and developer changes
Platform::
* Defaults to running the {es} functional test server from a snapshot locally
in the {xpack} directory {pull}20585[#20585]

Visualization::
* Adds distinct links and float tags to Region Map docs {pull}20499[#20499]

[[release-notes-6.3.1]]
== {kib} 6.3.1

[float]
[[enhancement-6.3.1]]
=== Enhancements
Management::
* [Fixes #19475] Replaces the `watch-type-select` directive in Watcher
with buttons {pull}19782[#19782]
+
[role="screenshot"]
image::images/management-watcher-2-buttons.png[]

Monitoring::
* Improves the experience of enabling monitoring collection when the page is set
to an absolute time range {pull}19451[#19451]

Operations::
* Bumps node to version 8.11.3 {pull}19861[#19861]

[float]
[[bug-6.3.1]]
=== Bug fixes

Machine Learning::
* Fixes issues when watching the scope of single metric viewer
data {pull}19029[#19029]

Management::
* [Fixes #19617] Shows internal indices if *Include system indices* is toggled
on and no other indices exist {pull}19618[#19618]
* [Fixes #19483] Adds `aria-labelledby` to index details flyout to tell
screen reader what to announce when the flyout is opened {pull}19776[#19776]
* [Fixes #19048] Adds heading hierarchy to Management landing page and `role='group'`
to panels to aid screen reader accessibility {pull}19777[#19777]
* [Fixes #19482] Adds `aria-label` to Indices Management search input {pull}19778[#19778]
* [Fixes #19474] Adds `described-by` attribute to `duration-selection` directive
to make children inputs accessible to screen readers {pull}19779[#19779]
* [Fixes #19814] Guards against calling `fieldWildcardMatcher` or `fieldWildcardFilter`
with undefined {pull}19865[#19865]


Operations::
* Allows the plugin installer to remove an {xpack} plugin if it exists {pull}19327[#19327]
* Changes license checker and generator behavior to only add dev dependencies
with the `--dev` flag {pull}19626[#19626]

Platform::
* [Fixes #20017] Updates the {xpack} plugin status anytime the license changes
{pull}20018[#20018]
+
When using {xpack}, it was previously possible for {kib} to get stuck in a "red"
state, preventing access to the {kib} applications, if {kib} and {es} were
started at the same time. We've fixed this issue to ensure that {kib} is always
usable when it's able to talk to {es}.

Sharing::
* [Fixes #19320] Adds `aria-label` to input controls that don't have a
label {pull}19830[#19830]

Visualization::
* [Fixes #19191] Shows tooltip when string and integer fields are used
for joining region maps to {es} results {pull}19447[#19447]




[[release-notes-6.3.0]]
== {kib} 6.3.0

[float]
[[breaking-6.3.0]]
=== Breaking Changes

Operations::
+
As of Kibana 6.3.0, X-Pack is bundled by default in the default distribution.
Existing X-Pack users should remove the plugin before upgrading.
+
There is a known issue preventing `bin/kibana-plugin` from removing the pre-existing
plugin after upgrading. This will be resolved in 6.3.1. If you happen to encounter this issue,
there are a few options:
+
* **Uninstall the plugin before upgrading:** `bin/kibana-plugin remove x-pack`
* **Uninstall the plugin after upgrading:** Manually delete the `plugins/x-pack` directory.

Platform::
* Renames saved objects bulk_get and find endpoints {pull}17512[#17512]
+
To support sending larger and more expressive queries to the Saved Objects find
API, we added a POST endpoint for find and therefore needed a way to disambiguate
the find API from from the POST API used to create Saved Objects.
+
Starting in {kib} 6.3, endpoints that are not simple CRUD operations on a single
object will be named and their name will start with an underscore. For example,
{es} `GET /api/saved_objects` is now `GET /api/saved_objects/_find`,
`GET /api/saved_objects/{type}` is now `GET /api/saved_objects/_find?type={type}`,
and `GET /api/saved_objects/bulk_get` is now `GET /api/saved_objects/_bulk_get`.

[float]
=== New Features

For an overview of the features that were added in 6.3 and how the user experience
improved, see <<release-highlights-6.3.0, 6.3.0 Release Highlights>>.

[float]
=== Enhancements

Machine learning::
* You can now use {ref}/modules-cross-cluster-search.html[cross cluster search]
in the {ml} features in {kib}. If you have configured a cross cluster index
pattern in {kib}, you can use that index pattern when you create jobs.

Platform::
* Angular was upgraded to version 1.6.9 {pull}17677[#17677]


[float]
=== Bug Fixes

Accessibility::
* [Fixes #19009] Adds alt text to the icons on the home page for accessibility
{pull}19083[#19083]

APM::
* Fixes links in APM {pull}19391[#19391]

Machine Learning::
* [Fixes #18722] Increases the calculated model memory limit {pull}18723[#18723]

Management::
* [Fixes #17147] Always sends a comma delimited index to support commas in
index patterns {pull}17173[#17173]
* Fixes issues with autocomplete and bucket aggregations {pull}17695[#17695]
* Removes the unsupported type from autocomplete options {pull}17694[#17694]
* Fixes an issue with autocomplete in the console {pull}17678[#17678]
+
Endpoint definitions are expected to have unique names, and the code was using
the same name for endpoints with overloaded HTTP verb semantics. This code fixes
those names by adding a timestamp.

Monitoring::
* Changes the Advanced Node page for {es} to recognize the `write` threadpool
{pull}18147[#18147]

Operations::
* [Fixes #6688] Adds support for environment variable injection in the
`kibana.yml` file {pull}16988[#16988]

Security::
* Preserves boom error headers for index pattern exceptions {pull}17725[#17725]
+
This fix resolves the issue with the index pattern APIs not responding with
WWW-Authenticate headers on 401s. This caused basic authentication via {kib} to not
work properly in some configurations.

Sharing::
* [Fixes #17611] Sets a minimum width on the range slider control
{pull}17620[#17620]
* [Fixes #17657] Allows wrapping of the recently viewed items on the {kib} home
page {pull}18726[#18726]
* [Fixes #18915] Fixes the arrows in the input control so that the up icon moves
the control up and the down icon moves the control down {pull}18929[#18929]
* [Fixes #18882] Disables an input control when an index pattern no longer exists
{pull}18931[#18931]
* [Fixes #19252] Fixes copy to the clipboard in Internet Explorer
{pull}19281[#19281]
* Fixes the date math parser to allow longer expressions {pull}17751[#17751]

Visualization::
*  Updates the `geo_bounds` request to inherit from the visualize search
source so that all application state filters are applied {pull}17727[#17727]
* [Fixes #17839] Normalizes longitudes so that they fall within the acceptable [-180,180]
range {pull}18674[#18674]
* [Fixes #18765] Fixes problem handling precision changes on a coordinate
map when no aggregations are configured {pull}18826[#18826]
* [Fixes #18761] Fixes problem when clicking on a map and no aggregation is
specified {pull}18825[#18825]
* [Fixes #19095] Avoids shard failures when performing `geo_bounding_box` filter
on coordinate maps {pull}19416[#19416]
* [Fixes #17623] Fixes negative unit formatting in Timelion {pull}17624[#17624]
* [Fixes #12408, #14382] Fixes 0 values in percentage mode {pull}15765[#15765]
* [Fixes #17721] Adds proper labeling for pie chart without buckets
{pull}17739[#17739]
* [Fixes #17352] Removes other bucket configuration from significant terms
aggregation {pull}17810[#17810]
* [Fixes #15912] Ensures type is defined and has `postFlightRequest` function
{pull}17809[#17809]
* Bumps Vega lib version to 3.3.1 to fix problem with how the Vega library
manages its dependencies {pull}17829[#17829]

[float]
=== Regressions

Management::

* In 6.2.4, if users edit a watch or a logstash pipeline and navigate away from
the page without saving, a confirmation modals asks if they want to save the
changes. In 6.3, the prompt was disabled to fix {pull}19488[#19488] and
{pull}19608[#19608].


[[release-notes-6.2.4]]
== {kib} 6.2.4

[float]
=== Enhancements

Machine Learning::
* Adds bucket span to the chart labels in the Single Metric Viewer.
* Adds checks for web URLs prior to adding to the links menu in the anomalies
table.

Visualization::
* Upgrade Vega libraries:  `vega-lib` to 3.2.1 and `vega-lite` to 2.3.1
{pull}17314[#17314]

[float]
=== Bug Fixes

Logstash::
* Fixes unhandled rejection error in {kib} server log.
* Fixes Pipeline Viewer to correctly format percentages.

Machine Learning::
* Fixes the formatting of HTML characters so that text is rendered correctly.
* Formats the field name in the tooltip for swimlane labels.
* Fixes the formatting of partition titles in multi-metric and population job
wizards.

Management::
* Adds better support for discarding results of older queries {pull}17148[#17148]

Monitoring::
* Fixes some {kib} metrics which are not derivatives.
* Fixes the handing of window resizing to more smoothly resize charts whenever
the window size changes.

Platform::
* Fixes an issue with the numeric formatter to handle small exponential numbers {pull}17508[#17508]
* Fixes deprecation logging warnings {pull}17439[#17439]

Visualization::
* Fixes map zoom settings {pull}17367[#17367]
* Enables Option change to show on map {pull}17405[#17405]
* Adds support for percentiles and percentile ranks to metrics visualizations {pull}17243[#17243]

[[release-notes-6.2.3]]
== {kib} 6.2.3

[float]
=== Known Issues

{pull}17139[#17139] Cross cluster search index pattern won't go to next step.


[[release-notes-6.2.2]]
== {kib} 6.2.2

[float]
=== Bug Fixes

Design::
* [Fixes #4475] Removing flex-basis: 0 to make items size properly in IE11 {pull}16557[#16557]

Machine Learning::
* Fixed issue where jobs created by the data recognizer used the default job
groups instead of the specified job groups.
* Added leading slashes to calendar endpoints to address problems using calendars
in {kib} on Cloud and behind proxies.
* Fixed a scenario where a "no results found" message was returned in the
*Single Metric Viewer* when an entity contained a special URL character such as
`+`.

Management::
* [Fixes #16304] [Management] Prevent react warnings in index pattern creation {pull}16520[#16520]

Platform::
* Destroying socket when we get a clientError {pull}16700[#16700]

Security::
* Enabled users that have the `kibana_dashboard_only_user` role to change their
passwords in {kib}. For more information, see <<xpack-dashboard-only-mode>>.

[[release-notes-6.2.1]]
== {kib} 6.2.1

There were no changes for this release.

[[release-notes-6.2.0]]
== {kib} 6.2.0

[float]
=== New Features

APM::
* The Elastic APM is generally available as part of the 6.2.0 release of the
Elastic Stack. For more information about the APM functionality in {kib}, see
<<xpack-apm>>.

Machine Learning::
* Added the ability to create
{stack-ov}/ml-calendars.html[calendars and scheduled events].

Monitoring::
* Added monitoring information for Beats in {kib}. See <<beats-page>>.

[float]
=== Enhancements

Discover::
* [Fixes #15642] Introduce simple kibana query language {pull}15646[#15646]

Machine Learning::
* Enhanced the creation of custom URLs for existing jobs. When you edit jobs,
there is a new *Custom URLs* tab, which provides options for creating a link to
a {kib} dashboard or a different URL.
// Repo: x-pack-kibana
// Pull: 4130

Management::
* Renamed the *Save* button *Save &amp; Deploy*. This change makes it clearer
that when you click the button the pipeline is saved to an {es} index and
deployed to any Logstash instances that are configured to run it.
// Repo: x-pack-kibana
// Pull: 3599
* Added the ability to clone pipelines in {kib}. When you click the *Clone*
button, data from the original pipeline is used to pre-populate the new pipeline
form.
// Repo: x-pack-kibana
// Pull: 3786
* Enabled auto-sizing of the pipeline configuration text area. The text area
automatically grows or shrinks as you type out a pipeline definition.
// Repo: x-pack-kibana
// Pull: 4026
* [Fixes #9228, #8983] add support for number format internationalization {pull}14019[#14019]
* [Fixes #15922] [Management] Index pattern step in React! {pull}15936[#15936]
* Advanced Settings - Image Input {pull}15342[#15342]

Monitoring::
* Added resolved alerts to the list of alerts that are visible during a selected
time frame in {kib}.
* Added the interval size for aggregated metrics in the tooltip for each chart.
* Improved error handling such that generic `500` errors provide better messages.
* Redesigned the Logstash Pipelines view to provide more actionable information
in a tabular format.
* Added a basic detail drawer to the Logstash Pipeline Viewer. When you click on
any vertex in the Pipeline Viewer, the drawer slides open. It shows basic
information about the vertex that was clicked and any metrics, if available.

Operations::
* Use auto_expand_replicas to stay green on 1 node clusters {pull}15694[#15694]
* Feat: Add config provider to disable state management {pull}15275[#15275]
* [optimizer] More aggressive chunking of common/vendor code {pull}15907[#15907]
  - Improved the build optimize time by more aggressively chunking common code, resulting in the removal of duplicate code. This drastically cuts the build and plugin install time and overall bundle asset size.
* [Fixes #14813] [ui/bundles][optimizer] only use caches when in dev mode {pull}15780[#15780]
* [optimizer] run webpack compilation ASAP (no more laziness) {pull}15795[#15795]

Platform::
* [Fixes #6520] [optimizer] allow http caching for bundles {pull}15880[#15880]
* Make it possible to disable CSRF check for the specified list of paths. {pull}13904[#13904]

Reporting::
* By default, weekly `.reporting` indices created after upgrading to 6.2 use a
single primary shard and have the `auto_expand_replicas: 0-1` setting rather
than a fixed setting of 1 replica. As a result, these indices can have a green
status on single node clusters. There is no impact in multi-node clusters.

Sharing::
* [Fixes #2758] Add advanced setting to control quick ranges {pull}15975[#15975]
* [input controls] Horizontal layout {pull}14918[#14918]
* Kibana Home page - phase two {pull}14749[#14749]
* Add &quot;use time filter&quot; option to input controls {pull}15852[#15852]

Visualization::
* [Fixes #13992] Grab the default index pattern and use it in TSVB {pull}14739[#14739]
  - TSVB now uses Kibana's default index pattern by default.
* [TSVB] Add params._interval to mathjs {pull}14944[#14944]
  - Make the bucket interval available as a parameter.
* [Fixes #13781] [timelion] allow sum, subtract, multiply, divide functions to accept seriesList with multiple series {pull}14891[#14891]
* [Fixes #8953] Add Timelion percentiles aggregation support (#8953) {pull}15154[#15154]
* [Fixes #9845] [timelion] highlight series on legend mouseover {pull}15229[#15229]
* add time to visualization status {pull}15856[#15856]
* few enhancements to default sidebar editor {pull}15619[#15619]
  - Its now possible to resize the sidebar editor and auto apply is possible in markdown visualization.
* [Fixes #1961] other and missing bucket support for terms agg {pull}15525[#15525]
  - 'other' and 'missing' bucket for the terms aggregation resolves #1961
* [Fixes #15146] Refactor and improve Visualize Loader {pull}15157[#15157]
  - Do not use the &lt;visualize&gt; directive anymore to embed a visualization. Use the Visualize Loader instead.
* [Fixes #15153] Use visualize loader for dashboards {pull}15444[#15444]
* Refactor rendering events {pull}15895[#15895]
* Migrating vega_vis from plugin {pull}15014[#15014]


[float]
=== Bug Fixes

Discover::
* display NOT when new filter is negated {pull}15865[#15865]
* [Fixes #15364] Truncate long names in the discover index pattern selection {pull}15510[#15510]
* Add missing discover labels {pull}16030[#16030]

Machine Learning::
* The job selection control now remembers the state of the `Also apply time range`
checkbox, such that the previous selection is restored when the control is
re-opened.
* Fixed issues where lines were drawn over the Y-axis in the event rate charts
for multimetric and population jobs.
* Removed scripted fields from job wizards.
* Added type-ahead filtering to the job group and influencer selection controls
in the job wizards.
* Updated the data preview to use the index pattern or the list of indices that
were selected.
* Disabled the start button for jobs that do not have {dfeeds}.
* Fixed issue where jobs created by the data recognizer used the default job
groups instead of the specified job groups.
* Updated the actual and typical values for anomalies in {kib}, such that they
are formatted according to their magnitude.
* Fixed the handling of anomalies when field values contain backslashes.
* Ensured Anomaly Explorer swimlane rows are sorted by score.
* Disabled the Forecast button for jobs that were created before 6.1.0 and for
jobs that contain an `over_field_name` property.
* Added support for field names with non-alphanumeric characters in the
*Data Visualizer*.
* Fixed problems creating jobs from saved searches that have `exists` filters.

Management::
* [Fixes #16098] [Management] Allow wildcard anywhere in the search query {pull}16109[#16109]
* [Fixes #16192] [Management] Update pager with new props in Index Pattern Creation {pull}16195[#16195]
* [Fixes #15922] Hide caret when indices has no time fields, remove indices object containing unused string {pull}16412[#16412]

Monitoring::
* Added the ability to navigate between the pipeline versions in the Logstash
Pipeline Viewer.
* Updated the Logstash Pipeline Viewer such that you can change the refresh
interval but you cannot select the time range.
* Added Logstash version information back in the node list.
* Improved logging when the {kib} monitoring collectors stop or resume and
downgraded the log level for these log messages to `info`.

Reporting::
* Resolved issue with horizontal metric visualizations being displayed
incorrectly in PDF reports.
* Fixed bug where the title of the Dashboard panels was hidden when creating
PDFs with the preserve layout option.
* Fixed issue with certain characters in the job parameters which caused CSV
reports to fail.
* Resolved issue with preserve layout PDF reports intermittently having blank
visualizations.

Sharing::
* [Fixes #16307] link to dashboards by id instead of title {pull}16319[#16319]

Visualization::
* [Fixes #16349] Fix issue with disabled lab mode {pull}16351[#16351]
* [TSVB] Changing the behaivor of getLastValue to get the actual last value {pull}14919[#14919]
* [TSVB] Stacked series should not contain null values {pull}14923[#14923]
* [Fixes #15273] disable input control when field contains no values in index pattern {pull}15317[#15317]
* Set list-style-type for list items in markdown-body {pull}15827[#15827]
* Visualization render status - pass correct parameters to resize check {pull}15855[#15855]
* fixes angular vis type so it correctly propagates events up to visualize {pull}15629[#15629]
* [Fixes #15427] fixing dot ratio slider {pull}15860[#15860]
  - dot size slider for line chart works again
* fixing log scale error {pull}15984[#15984]
  - log scale now works with empty buckets
* [Fixes #15114] fixing boolean filters {pull}15927[#15927]
* [Fixes #15931, #15656] check if data hash changed instead of stringifying {pull}15988[#15988]
  - performance of visualization rendering is improved
* Remove SVG element styling rules {pull}15906[#15906]
* [Fixes #15553] Fix bug where negative time offsets in visual builder will shift x-axis range {pull}15554[#15554]
* [6.x] Fix maps for reporting (#15272) {pull}15357[#15357]
* Sharing - exposing Dashboard and Visualize title and type {pull}14946[#14946]
* [Fixes #14730] pass bucket size as _interval param to calculation metric script {pull}14731[#14731]
* [Fixes #15672, #14353] Revert Resize and FlotChart components to 6.0 {pull}15717[#15717]
* [Fixes #15501] [TSVB] Fixes #15501 - Change xaxis formatter to honor dateFormat:tz {pull}15512[#15512]
* [TSVB] Make form font-sizes consistent (after EUI upgrade) {pull}15909[#15909]
* Remove MathJS Feature {pull}15652[#15652]
* [TSVB] Add checks for scaledDataFormat and dateFormat in xaxisFormatter {pull}15997[#15997]
* [TSVB] Fix typo is filter ratio path for table visualization {pull}16052[#16052]
* [Fixes #14888] [timelion] provide argument suggestions when argument name not provided {pull}15081[#15081]
* [Fixes #15594] fixes pie chart size to normal if labels are not applied {pull}15641[#15641]
* [Fixes #15818] fixing collapsible side bar editor {pull}15826[#15826]
* [Fixes #15703] refactoring vis uiState {pull}15709[#15709]
* [Fixes #15673] fixes table padding on dashboard {pull}15862[#15862]
* [Fixes #15778] fixing tag cloud and region map click handler {pull}15861[#15861]
* fixes renderComplete in angular vis type {pull}16150[#16150]
* [Fixes #16217] fixing axis title position for firefox {pull}16278[#16278]
* [Fixes #13822] visualize editor should not show if embed is set to true in url {pull}16310[#16310]
* [Fixes #16083] configure Kibana with production endpoint for EMSv3 {pull}16108[#16108]
* [Fixes #13813] Use a width range instead of a fixed width for visualize legends {pull}13818[#13818]
* should always set base layer {pull}16213[#16213]
* Extract lab HTML on dashboard into own file {pull}15546[#15546]
* Remove implementsRenderComplete property {pull}15579[#15579]
* [Fixes #15255] Set uiState to Vis from visualization {pull}15549[#15549]
* [Fixes #15618] Fix broken initial uiState set {pull}15630[#15630]
* [Fixes #15742] Only apply forced max mode when panel is shown {pull}15752[#15752]
* Fix JSON hint styling and accessibility {pull}15890[#15890]
* [Fixes #15712] Fix broken editor styles {pull}15735[#15735]
* [Fixes #15713] Use euiCallOut for experimental banner {pull}15989[#15989]
* Fix some styling issues {pull}16023[#16023]
* Listen to resize events in &lt;visualize&gt; {pull}16048[#16048]
* [Fixes #16216] Prevent rendering into 0 size containers {pull}16287[#16287]
* [Fixes #14331] Add topojson support / EMS v3 support {pull}15361[#15361]

[[release-notes-6.1.4]]
== {kib} 6.1.4

There are no user-facing changes in this release.

[[release-notes-6.1.3]]
== {kib} 6.1.3

[float]
=== Bug Fixes

Machine Learning::
* Improved error messages for forecasts in {kib}.
* Removed forecasts that were not created successfully from the list of
forecasts in {kib}.

Visualization::
* Use textContent and jQuery to set label and title {pull}16178[#16178]

[[release-notes-6.1.2]]
== {kib} 6.1.2

[float]
=== Security Issues

* Kibana versions before 6.1.2 and 5.6.6 but after 5.1.1 had a cross-site scripting (XSS) vulnerability via the colored fields formatter that could allow an attacker to obtain sensitive information from or perform destructive actions on behalf of other Kibana users. CVE ID: CVE-2018-3818

Users should upgrade to Kibana version 6.1.2 or 5.6.6. There are no known workarounds for this issue.

[float]
=== Enhancements

Dev Tools::
* [Fixes #15786] [Console] Adding autocomplete rules for composite agg {pull}15787[#15787]

[float]
=== Bug Fixes

Machine Learning::
* Disabled the ability to create forecasts for jobs that were created before
6.1.0.
* Fixed the **Anomaly Explorer** such that it retains the chosen swim lane
limits when you reload the page.
* Fixed incorrect line positions in the **Single Metric Viewer**. When all data
points had the same value, the Y-axis offset was not calculated correctly and
the line was drawn in the wrong position or was invisible in the line chart.

Monitoring::
* Fixed situations where {kib} was showing the same information for different
clusters in the Logstash Overview.

Platform::
* Update color field formatter {pull}15837[#15837]

Visualization::
* [Fixes #15843] Fix broken loader in 6.1 {pull}15885[#15885]
* [Fixes #15594] fixes pie chart size to normal if labels are not applied {pull}15641[#15641]

Watcher::
* Fixed error that prevented users from creating threshold alerts with email
actions.

[[release-notes-6.1.1]]
== {kib} 6.1.1

[float]
=== Bug Fixes

Machine Learning::
* Removed incorrect job group information from the URL when linking to the
results page after job creation.
* Fixed bug related to cloning jobs that do not have {dfeeds}.
* Fixed issues with the first and last buckets in the Anomaly Explorer swimlanes
and in the Single Metric Viewer charts.

Management::
* Allow pasting into index pattern field using keyboard shortcut {pull}15500[#15500]
* Typing a CCS pattern into the index pattern field no longer triggers an error {pull}15372[#15372]

Operations::
* Bump node.js version to 6.12.2 {pull}15612[#15612]
* Kibana indices are no longer flagged as out-of-date just because they include `_default_` {pull}15432[#15432]

Reporting::
* Resolved issue with the preserve layout option occasionally causing Chromium
to crash when it was given partial pixels for the viewport.

Visualizations::
* Disable math aggregation in Time Series Visual Builder {pull}15653[#15653]
* Bucket paths for overall aggregations now use syntax compatible with Elasticsearch 6+ {pull}15322[#15322]

Watcher::
* Removed error messages that were appearing when you created an email action
for a watch without a body or subject. For more information, see
{ref}/actions-email.html[Email action].

[[release-notes-6.1.0]]
== {kib} 6.1.0

[float]
=== Enhancements

Design::
* [Fixes #12889] Make saved-object-finder and paginated-selectable-list accessible {pull}13834[#13834]
* [Fixes #12901] [UI Framework] Add KuiCodeEditor as react-ace replacement/wrapper {pull}14026[#14026]
* [UI Framework] KuiGalleryItem automatically becomes link or button {pull}14240[#14240]

Dev Tools::
* [Fixes #11522] Improve Dev Tools accessibility {pull}13496[#13496]
  - Console no longer traps keyboard focus. You can quit editing with Escape.

Discover::
* [Fixes #12633, #12641] Improve accessibility of the discover app {pull}13498[#13498]
* [Fixes #14456] [Accessibility] Improve filter bar accessibility {pull}14474[#14474]

Machine Learning::
* Added the ability to create and display forecasts for {ml} jobs in {kib}.
* Simplified job creation for certain recognizable data sources, such as
Filebeat access logs from Nginx and Apache HTTP servers.
* Added a Data Visualizer, which enables you to learn more about the
characteristics of your data and identify fields for {ml} analysis. For more
information, see <<ml-jobs>>.
* Added bucket span to the chart labels in the Single Metric Viewer.
* Added support for job groups when managing jobs in {kib}.
* Added the ability to show or hide the Anomaly Explorer charts by selecting a
checkbox. The choice is saved in the URL, so it persists if you re-open the
view from a bookmarked URL.
* Added a new job creation wizard for population jobs, which detect activity
that is unusual compared to the behavior of the population. For more information,
see {stack-ov}/ml-configuring-pop.html[Performing Population Analysis].
* Added the ability to control the maximum number of rows in the Anomaly
Explorer view by swimlane, with options of `5`, `10`, `25`, or `50`. Previously,
it was fixed to a maximum of 10 rows.
* Changed the job creation wizards such that you select an index pattern or
saved search before you select the type of job.
* Added licensing checks to the job creation features in {kib}. If the license
is expired, for example, the create job, edit job, clone job, and start {dfeed}
buttons are disabled.
* Added the ability to set the model memory limit in job creation wizards. For
more information about the `model_memory_limit` property, see
{ref}/ml-job-resource.html#ml-apilimits[Job Resource Analysis Limits].
* Added a **Close Job** button that enables you to force the closure of a job
when it fails. The button is disabled if the job is running, closed, or does not
have a {dfeed}.
* Added the ability to display jobs with multiple detectors in the Single Metric
Viewer when the `model_plot_config` property is enabled. Previously, this
functionality was only possible for jobs with a single detector.

Management::
* [Fixes #12867] &quot;Create index pattern&quot; wizard.  {pull}13454[#13454]
  - Introducing a new wizard to create index patterns that makes index discovery and matching much easier than before.
* [Fixes #12668] add an option for url types so that it can be opened in current tab (master branch) {pull}13209[#13209]
* [Fixes #12869, #12873, #13803] Improve Management section accessibility {pull}14243[#14243]
* Add rel=&quot;noopener noreferrer&quot; to external links {pull}14440[#14440]

Monitoring::
* Added Cross Cluster Search (CCS) to efficiently retrieve monitoring data from
local and remote clusters.
* Improved handling of health check errors. If there is a problem making a query,
for example, an error is returned and extra information is provided in the logs.
As part of this change, the `monitoring` plugin for {kib} will never cause {kib}
to go `red`.
* Improved logging when X-Pack is not installed on the monitoring cluster.
* Saved table interaction states such that if you leave the {kib} page and
subsequently return, your filters persist.

Operations::
* [Fixes #11091] Adds keystore for storing settings {pull}14714[#14714]
* [eslint-config-kibana] Add AirBnB linting rules for React best practices. Bump to v0.10.0. {pull}13259[#13259]
* Add updated_at timestamp to saved objects {pull}13503[#13503]
* [Fixes #14312] [build] Clean examples from node modules {pull}14587[#14587]
* [SavedObjects] use constructor options {pull}14200[#14200]
* [savedObjects] wait for Kibana index on every write {pull}14202[#14202]
* [es/clusters] improve cleanup {pull}14188[#14188]
* Upgrade to webpack 3 {pull}14315[#14315]
* Upgrade to eslint 4 {pull}14862[#14862]
* Proxy support for plugin installer {pull}12753[#12753]
  - Kibana now respects the http_proxy, https_proxy and no_proxy environment variables to download plugins via a proxy.
* [Fixes #13937] Make console history keyboard accessible {pull}13946[#13946]

Platform::
* [Fixes #8499] [server/logging] Allow opting out of UTC {pull}14705[#14705]
* Improve performance of sort_prefix_first for large arrays {pull}14974[#14974]

Reporting::
* Added support for a HTTP Proxy to be configured when using Chromium as the
browser. For more information, see <<reporting-chromium-settings>>.
* Added headless build of Chromium that can be used instead of PhantomJS for
capturing Reporting screenshots. To enable Chromium, set the following setting
in your `kibana.yml` file: `xpack.reporting.capture.browser.type: chromium`. For
now PhantomJS will remain the default. In the future, however, Chromium will
become the default.
* Added an option for PDF reports that preserves the existing layout and size of
the Visualization or Dashboard.

Security::
* Added `manage_index_templates` cluster privileges to the `kibana_system` role,
which enables the {kib} system user to create and manage the index template for
the `.kibana` index. For more information, see
{ref}/security-privileges.html[Security privileges] and
{ref}/built-in-roles.html[Built-in roles].

Sharing::
* Add a feature for custom panel titles {pull}14831[#14831]
  - Introduces the ability to specify custom titles, or remove the title entirely, for individual dashboard panels.  Just hit the reset link to restore the title to it's original value.
* Input Control visualization {pull}13314[#13314]
* Kibana Home page - phase one {pull}14673[#14673]
* only show expand toggle, in view mode, on hover {pull}14706[#14706]
* [Fixes #13948] Add new &quot;use margins&quot; option to add separation between panels {pull}14708[#14708]
* Add new title query param to dashboard listing page {pull}14760[#14760]
* [Fixes #12563] Hide all panel titles option at the dashboard level {pull}15006[#15006]

Visualization::
* [Fixes #1702] pie chart labels {pull}12174[#12174]
  - pie charts can now have labels on them to increase readability
* [Fixes #13519, #13103, #13968] Improve Region Maps for use without network connection {pull}15056[#15056]
  - Improve the use of Region Maps for deployment in environments without internet access. Similar to the Coordinate Map visualization, the Region map can now use a WMS-service as a base-layer. Admins can now also setup Kibana to opt-out of connection to the Elastic Maps Service. Users can now opt-out of having the visualization display warnings.
* Introduce lab mode for visualizations {pull}15050[#15050]
  - Newly introduced visualizations can now be part of labs-mode. Visualizations in labs-mode introduce new more cutting-edge functionality and can be subject to change across minor releases.  Labs-mode can be turned off in the advanced settings. Labs-visualization will then no longer be available to the user. The Time Series Visual Builder is not part of labs-mode, it continues to be an experimental feature. The input controls are the first to be flagged as a lab visualization.
* reverts metric visualization {pull}14052[#14052]
  - The metric visualization now no longer reuses the rendering code of the gauge and goal visualizations. This improves consistency of positioning of the metric on Dashboards.
* [TSVB] Adding the ability to sort terms split by terms and change order {pull}14213[#14213]
* Math Aggregation to support Sibling Aggs for TSVB {pull}13681[#13681]
* [TSVB] Add support for Math Aggregation to tables {pull}14553[#14553]
  - This PR adds support for the Math aggregation to the new TSVB table visualization. This wasn't possible at the time of the PR because both features were separated. This also adds support for the drop last bucket feature.
* [TSVB] Series Filter {pull}14696[#14696]
  - This PR adds the series filter feature allowing the user to create a filter per series. This allows users to user to have a group by terms along with a filter for each series.
* [Fixes #13992] Grab the default index pattern and use it in TSVB {pull}14739[#14739]
  - TSVB now uses Kibana's default index pattern by default.
* [TSVB] Add params._interval to mathjs {pull}14944[#14944]
  - Make the bucket interval available as a parameter.
* Upgrade kibana to leaflet 1.x {pull}12367[#12367]
* [Fixes #1385] relative date field formatter {pull}13921[#13921]
* Allow visualizations to specify open editor tab  {pull}13977[#13977]
* Show the x-axis (time) value in legend when hovering over a Timelion graph {pull}14627[#14627]
  - Hovering over a Timelion  graph now shows the corresponding x-axis value in the legend.
* Timelion typeahead for argument names {pull}14657[#14657]
* [Fixes #9022] Timelion query language support for scripted fields {pull}14700[#14700]
* Timelion typeahead for argument values {pull}14801[#14801]
* add API to embed visualizations {pull}14292[#14292]
  - visualize loader helps with inserting visualizations into DOM elements
* [Fixes #11533] Improve timelion accessibility {pull}13531[#13531]
* [Fixes #11858] Allow reordering aggregation priority by keyboard {pull}13635[#13635]
* [Fixes #12902, #12903] Improve time series visual builder accessibility {pull}13817[#13817]
* [Fixes #11843] [Accessibility] Improve visualization legends accessibility {pull}14505[#14505]
  - Improve the keyboard accessibility of visualization legends.
* [Fixes #12905] [Accessibility] Refactor font slider for accessibility {pull}14817[#14817]
* Remove ready:vis and application.load event {pull}14988[#14988]
  - Visualizations no longer send a ready:vis event to the $rootScope once they initialized. Applications don't need to emit an application.load event anymore.

[float]
=== Bug Fixes

Design::
* [Fixes #12247] [Accessibility] Make table pagination controls keyboard-accessible.  {pull}13541[#13541]
* [Fixes #12482] [Accessibility] Give kuiTables keyboard-accessible column headers  {pull}13586[#13586]
* [UI Framework] Reset Chrome's native styling for button border-radius {pull}14758[#14758]
* [UI Framework] Fix spacing bug with LocalTabs. {pull}14772[#14772]

Dev Tools::
* [Fixes #14586] [console] Remove cluster/_nodes/stats {pull}14757[#14757]
* [Fixes #10841, #10840, #10071, #8930, #9651, #8790] [console] assorted autocomplete fixes {pull}14770[#14770]

Machine Learning::
* Fixed scenarios where clicking the "View examples" link in the Anomalies
section of the Single Metric Viewer or Anomaly Explorer caused the browser to hang.
* Fixed scenarios where the Anomaly Explorer or Single Metric Viewer failed to
plot metric data in the charts due to a blank field name in a detector. This
problem was specific to jobs that were originally created in 5.4.

Management::
* [Fixes #12612] Create keyboard mode for ui-ace editor {pull}13339[#13339]
  - Our code editor in several places won't trap keyboard focus anymore, by using the Tab key. When navigating by keyboard, you first need to Enter editing mode in the code editor and you can leave it by pressing Escape.

Monitoring::
* Fixed problems viewing pipelines in {kib} from a Firefox web browser.
For more information, see
{logstash-ref}/logstash-pipeline-viewer.html[Pipeline Viewer UI].
* The `xpack.monitoring.node_resolver` setting, which was deprecated in 5.5.0,
now allows only the `uuid` value to be used. This setting will be removed in 7.0.

Operations::
* Removes webpack-directory-name-as-main dependency {pull}13584[#13584]

Platform::
* [Fixes #15078] Courier - $state in searchSource {pull}15166[#15166]

Sharing::
* Refine use of aria-label in Dashboard panel and top nav, Discover, and Management 'Edit index pattern' UI. {pull}14341[#14341]
* [Fixes #11532] [11532] Improve local nav accessibility  {pull}14365[#14365]
* Fix bug with Dashboard breadcrumb alignment. {pull}13580[#13580]
* [Fixes #13421] Dashboard dark-theme fixes {pull}13690[#13690]
* Set timeout and terminate_after parameters when fetching terms for Input Controls {pull}14977[#14977]
* [Fixes #13458] Fix out of memory crash on auto refreshing dashboards {pull}13871[#13871]
* [Fixes #9523] Fix issue where saved searches are not updated {pull}14452[#14452]
  - There has been a long standing issue where if you add a saved search to a dashboard, then go edit and save that saved search, the updates are not propagated to the dashboard.  The only way, previously, to get the new changes was to remove and re-add the search from your dashboard. With this fix, that is no longer necessary. However, there is one situation when your saved search will stop updating and that is when someone has made and saved local edits to the saved search on the dashboard.  For example, if you remove a column from a saved search in a dashboard panel, then save the dashboard, that search will always show that column set, even if columns are added or removed to the underlying saved search. We did it this way to still allow users to override the configuration at the dashboard level.

Visualization::
* Visualization resizeInit {pull}15321[#15321]
* [Fixes #14344] Remove aria-hidden=&quot;true&quot; from TSVB tabs and agg component to make their content screen-reader accessible. {pull}14345[#14345]
* [TSVB] Remove console.log from Resize PR {pull}14555[#14555]
* [TSVB] Fixes #14124 - Removes the 1w label from interval pattern {pull}14577[#14577]
* [TSVB] Change term sorting to match Kibana Core {pull}14679[#14679]
* [TSVB] Stacked series should not contain null values {pull}14923[#14923]
* fix issue of duplicate TSVB flot chart creation {pull}14626[#14626]
* Fix spatial filters when Kuery is in use {pull}14158[#14158]
* [6.x] update spy table headers when columns update {pull}13224[#13224]
* [Fixes #2908] Scale histogram aggregation interval to avoid crashing browser {pull}14157[#14157]
* [Fixes #12545] [timelion] trim number of colors when there are more colors than gradient stops {pull}14906[#14906]

[[release-notes-6.0.1]]
== {kib} 6.0.1

[float]
[[security-6.0.1]]
=== Security Issues

* ​Kibana cross site scripting issue (ESA-2017-22): Kibana versions prior to 6.0.1 and 5.6.5 had a cross-site scripting (XSS) vulnerability via URL fields that could allow an attacker to obtain sensitive information from or perform destructive actions on behalf of other Kibana users. CVE ID: CVE-2017-11481

* Kibana open redirect flaw (ESA-2017-23) : The Kibana fix for CVE-2017-8451 was found to be incomplete. With X-Pack installed, Kibana versions before 6.0.1 and 5.6.5 have an open redirect vulnerability on the login page that would enable an attacker to craft a link that redirects to an arbitrary website. CVE ID: CVE-2017-11482

Users should upgrade to Kibana version 6.0.1 or 5.6.5. There are no known workarounds for these issues.

[float]
=== Bug Fixes

Design::
* [UI Framework] Fix IE11 bug which caused kuiToolBarSearch to grow too wide when there is only a single kuiToolBarSection sibling. {pull}15215[#15215]

Discover::
* [Fixes #14634] Don't show { match_all: {} } for migrated objects {pull}14644[#14644]
* [Fixes #15398] Solidify context app filter test {pull}15203[#15203]

Platform::
* Fix fieldFormat plugins {pull}14984[#14984]
  - In 6.0.0 we accidentally included a breaking change that prevented plugins from supplying custom FieldFormatters. This has been fixed but, also changes the way that they need to be defined. Take a look at the field formatters Kibana supplies to see how you should update your custom FieldFormats.
* Fix: exponent values in table view {pull}15309[#15309]
* Prepend relative urls {pull}14994[#14994]
* [eslint] add eslint dev script {pull}14889[#14889]
* [dev/ci_setup] generalize jenkins_setup script for other CI environments {pull}15178[#15178]

Operations::
* Adds task to export a CSV of all dependencies {pull}15068[#15068]
* [Logging] more tests and added robustness to log formatting {pull}15035[#15035]

Sharing::
* [Fixes #15333] [Timepicker] Fix alignment, consistency in error msg {pull}15343[#15343]
* [Fixes #15336] Add parsedUrl to the code driving viz/dashboards {pull}15335[#15335]

Visualization::
* [Fixes #13436] allows to hide warnings in gauge {pull}15139[#15139]
* [Fixes #14833] Fix Kibana crashing when resizing a tag cloud too small {pull}15001[#15001]
* [Fixes #13947] uses maximum space for arc gauge and center aligns it {pull}15140[#15140]
* [Fixes #15146] fixes the visualizeLoader error in IE {pull}15150[#15150]
* fixing field formatters for gauge {pull}15145[#15145]
* [Fixes #13947] fix metric align and size {pull}15141[#15141]

[[release-notes-6.0.0]]
== {kib} 6.0.0

[float]
=== Breaking Changes

Reporting::
* When {security} is enabled, reports will only be accessible to the user that created them.
* When {security} is enabled, user authorization is controlled by the
`xpack.reporting.roles.allow` setting in the `kibana.yml` which defaults to
`['reporting_user']`. Users will no longer have access to the underlying {reporting}
indices in {es} when assigned to the built-in `reporting_user` role. If using
custom reporting roles, the privileges to the indices will need to be removed, and the
role will need to be added to the `xpack-reporting.roles.allow` setting.

Security::
* The built-in users (`elastic`, `kibana`, and `logstash_system`) no longer have
default passwords. You must create passwords for these users and configure {kib}
to use this information. For more information, see
{ref}/setting-up-authentication.html[User authentication].

Watcher::
* The built-in HTTP client used in webhooks, the http input and the http email attachment has been replaced.
This results in the need to always escape all parts of an URL.
* The new built-in HTTP client also enforces a maximum request size, which defaults to 10mb.
* The watch `_status` field has been renamed to `status`, as underscores in
field names will not be allowed.

[float]
=== Enhancements

Core::
* Remove legacy pre-4.2 configurations {pull}12013[#12013]
* NODE_ENV no longer has an impact on Kibana {pull}12010[#12010]
* Only support 64 bit operating systems {pull}11941[#11941]
* Remove field_stats pre-flight option for index patterns {pull}12814[#12814]
* [Fixes #13439] Upgrade Angular to 1.6.5 {pull}13543[#13543]

Dashboard::
*  If you had a chance to check out the new Dashboard Only Mode in 6.0.0-beta1,
we've changed things up a bit for 6.0.0-beta2. Previously we required you to
flag every role a user belonged to as being in the View dashboards only mode
in order for that user to be flagged as a Dashboard only mode user. In this
new set up, we created a reserved role, `kibana_dashboard_only_user`, that is
already pre-configured with read only access to the .kibana index, and set up
to be in Dashboard Only Mode. All you have to add is this one role to any user
and they will now be a Dashboard Only Mode user. We also got rid of this new
setting in the Roles UI, as this one role should suffice for most user's setups.
If you have a more complicated setup, such as multi-tenancy with multiple
`.kibana` indexes, you can create more dashboard only mode roles by adding
role names to the `xpackDashboardMode:roles` advanced setting. For more
information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Design::
* Palette swap for accessibility / kibana 6 {pull}12085[#12085]
  - We re-skinned a decent portion of Kibana to be mostly AA accessibility compatible in regards to coloring of major navigation elements.
* [UI Framework] Reactify menu {pull}12135[#12135]
* Adding for and id attributes to labels and form elements {pull}12215[#12215]
* [UI Framework] Reactify kuiEvent and related CSS components (#12226) {pull}12228[#12228]
* [UI Framework] Reactify actionItem {pull}12142[#12142]
* [UI Framework] Reactify kuiCollapseButton {pull}12225[#12225]
* [UI Framework] Reactify kuiFieldGroup and related CSS components {pull}12260[#12260]
* [UI Framework] Update LocalNav examples to use tabIndex instead of tabindex, to eliminate React console warnings. {pull}12284[#12284]
* [UI Framework] Reactify kuiCard and related CSS components {pull}12197[#12197]
* [UI Framework] Reactify kuiBar {pull}12167[#12167]
* [UI Framework] Reactify kuiGallery and related CSS components {pull}12277[#12277]
* [UI Framework] Fix examples of Table component with ToolBar. {pull}12326[#12326]
* [UI Framework] Improve Warning Button contrast {pull}12327[#12327]
* [UI Framework] Reactify kuiHeaderBar and related CSS components {pull}12280[#12280]
* [UI Framework] Define consistent default, small, and wide sizing for form fields, and support them within ExpressionItems. {pull}12190[#12190]
* [UI Framework] Order UI Framework React component exports to be alphabetical {pull}12526[#12526]
* [UI Framework] Reactify kuiTabs and related CSS components {pull}12302[#12302]
* Replace brand-danger color with new global red color. {pull}12654[#12654]
* Make ui-select appearance match other inputs. {pull}12652[#12652]
* [UI Framework] remove check for ng-untouched class from formControlInvalid mixin {pull}12153[#12153]
* [UI Framework] reactify prompt for items {pull}12151[#12151]
* [UI Framework] Allow custom placeholder for Tool Bar Search Box {pull}12959[#12959]
* [UI Framework] Add new react color picker to ui framework with tests {pull}12245[#12245]

Discover::
* Implement new Kibana query language {pull}12624[#12624]
  - This PR adds a new experimental query language to Kibana. The new language is turned off by default but can be enabled in the Management > Advanced Settings via the search:queryLanguage:switcher:enable option. Changing this setting to true will add a language selector to the query bar that allows users to choose the new language for their query. Details of the new query language can be found in the issue description (#12282).
* Remove highlight query {pull}13231[#13231]
* [Fixes #12635]  Improve the accessibility of the Discover screen {pull}12681[#12681]
* [Fixes #12343] Remove custom keyboard navigation in datepicker {pull}13644[#13644]
* Accessible sort buttons {pull}12217[#12217]
* [Accessibility] Avoid empty th in doc-table header row {pull}12364[#12364]
  - The discover document table header cells provide appropriate hints to screen-readers.
* [Accessibility] Add button to skip past the discover doc table {pull}12539[#12539]
  - The new "Skip to bottom"-button in Discover is invisible unless focused. When activated it displays all remaining rows that were already loaded and focuses an anchor located below the table.
* Timepicker on the right {pull}11980[#11980]

Machine Learning::
* Added a Datafeed Preview tab to expanded rows in the jobs list under
Job Management. This displays the JSON response from the preview endpoint.
* Added an option to create a watch when you start a {dfeed} in {kib}. After the
{dfeed} starts, you are prompted to specify details such as the interval and the
anomaly severity threshold. If {watcher} is disabled, this option does not appear.
* Updated the bucket span estimator, which suggests bucket span values when you
create jobs in {kib}. The estimator now suggests a minimum bucket span value
of 15 minutes.

Management::
* [indexPatterns] remove support for time patterns {pull}12158[#12158]
  - Removes ability to create index patterns based on time patterns/intervals  - Adds a warning that informs users when they are using an index pattern that is now unsupported (disabled by default until #10442 is done, #12322)  - Does not address editing/remapping index patterns, see last task in #12242
* [Fix for #11526, #8225] Move build info from management section to status page {pull}13341[#13341]
* [Management] Provide a way to fetch indices and template index patterns {pull}12200[#12200]
* [Management] More universal solution for fetching indices and aliases {pull}12405[#12405]
* Add breadcrumb-page-title to management-app {pull}12765[#12765]
  - The bread-crumbs component allows for the consumer to pass in a page-title value which is appended as the final breadcrumb in the chain. This PR adds a scope argument to the management-app to take advantage of it.

Monitoring::
* The Logstash Pipeline viewer in {kib} displays an information icon and a
corresponding tip for every plugin that does not define an ID explicitly.
Defining an ID for plugins enables you to track differences across pipeline
changes. For more information, see
{logstash-ref}/logstash-pipeline-viewer.html[Pipeline Viewer UI].
* Added an alert in clusters that have trial licenses and have enabled {security}
but do not have TLS/SSL configured. The message provides information about the
steps that are required to enable {security} when they obtain a non-trial license.
* Added support for cluster alerts, for example to provide information about
license expiration.
* Added an advanced setting for a default admin e-mail, which is the recipient
of {xpack} admin operations such as cluster alert e-mail notifications.

Operations::
* Updates to status API, re-align status page {pull}10180[#10180]
* [Fix for #10181] Revert same port http -> https redirect {pull}10930[#10930]
  - Kibana 5.x redirected requests from http to https on the same port if TLS was configured. Starting in Kibana 6.0.0 Kibana no longer redirects basic http traffic to https.
* Update mappings for kibana index {pull}9280[#9280]
* Use single ES document type {pull}12794[#12794]
  - Starting in Elasticsearch 6.0, you are no longer able to create new indices with multiple index types. To accomplish the same effect as index types, a new type field was added to identify the document and the value mapped under the index to allow for strict mapping.
* [logging] Downgrade hapi connection errors when connecting with the w… {pull}11209[#11209]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* [Fixes #9436] [optimizer] remove support for .jsx extension {pull}12712[#12712]
* Sets ES mapping to single_type=false {pull}11451[#11451]

Platform::
* [Fix for #12012] Fail to start if settings include unknown keys {pull}12554[#12554]
  - When a config file includes invalid keys or values, Kibana usually logs a message describing the issue and fails to start. There has been an exception to this rule since 4.2 that allowed top-level keys to be unknown/misspelled and only caused a warning to be logged. That exception has been removed and now any unknown or misspelled config key passed to Kibana (via the config file or command line flags) will prevent it from starting.
* Remove the es_admin proxy {pull}13000[#13000]
* Restrict ES data proxy to msearch and search {pull}13020[#13020]
* [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]
* Remove client-side management of Kibana index mappings {pull}12820[#12820]
* Uses uuid for auto-generated ids and prepends type (#12834) {pull}12877[#12877]
* [uiSettings] support defining settings with uiExports {pull}12250[#12250]
  - define a uiExports.uiSettingDefaults key your plugin definition to add uiSettingDefaults - uiSettingDefaults must be unique. If a key is already defined elsewhere then the server will not start. - defined settings will display in the advanced settings editor, along with the intended default value and description - the REST API is identical to before - the browser API is identical to before - defaults for timelion have been extracted to the timelion plugin definition and the existing defaults are defined in the kibana plugin definition
* Refactor commaList filter logic into common util {pull}12553[#12553]
* [kbnServer/extensions] formalize request factories with helper {pull}12697[#12697]
* Allow plugins to turn off the "link to last URL" navigation helper {pull}13044[#13044]

Reporting::
* Enabled export as CSV.

Security::
* Added a View Dashboards Only setting to the roles section under
Security management. If a user is assigned a role that has this setting
enabled, when they access Kibana it presents Dashboard Only mode.
* Added reserved `kibana_dashboard_only_user` role. For more information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Sharing::
* Add label and clear link to color picker {pull}12422[#12422]
* Expose the variables for dynamically building doc links {pull}12513[#12513]
* Reactify stateless table components {pull}12349[#12349]
* Full screen mode implementation for dashboard {pull}12265[#12265]
  - You can now enter full screen mode when viewing a dashboard. This hides the Chrome and the top nav bar.  If you have any filters applied, you'll see the filter bar, otherwise that will be hidden as well.  To exit full screen mode, hover over and click the Kibana button on the lower left side of the page, or simple press the ESC key.

Visualize::
* Visualize Refactor {pull}11786[#11786]
  - When creating new visualizations, developers are no longer restricted to using just Angular as a rendering technology. The changes now also enables developers to create custom editors that do not conform to the current sidebar-layout. Commonly used functionality - such as access to the query bar or timefilter - is now also exposed on the visualization object. This avoids the need to import individual modules from inside Kibana. These changes are a first step in a longer term effort to provide a robust long-lived programming interface for building visualizations in Kibana.
* Replace "marked" with "markdown-it" {pull}13623[#13623]
* Upgrade kibana to leaflet 1.x {pull}12367[#12367]
* Duration Formatting for TSVB {pull}13337[#13337]
* allows more flexible timelion queries {pull}10961[#10961]
* Support multiline Timelion queries {pull}11972[#11972]
* Fix ui-select error border color and placeholder font color. {pull}12411[#12411]
* Fix appearance of error indicator in Visualize sidebar.  {pull}12410[#12410]
* [Fix for #11193] hide current time marker when the timespan doesn't include the current time {pull}12266[#12266]
  - Only display current time marker on  a visualization when the x-axis extent includes the current time.
* [Fix for #7040] Add github-markdown.css to markdown visualization {pull}12377[#12377]
* Filter geohash_grid aggregation to map view box with collar {pull}12806[#12806]
* add font size control to markdown visualization {pull}12860[#12860]
* [vis/resizeChecker] swap out implemenation with ResizeObserver polyfill {pull}9439[#9439]
* Add imports for SavedObjectRegistryProvider.register, fixing Timelion {pull}12844[#12844]
* [Fix for #7572] add polygon drawing tool {pull}11578[#11578]
  - On a coordinate map, users can now make a selection on the map by drawing a freehand polygon. Just like the earlier boundary selection, this adds a boundary filter to the filter bar.
* [Fixes #12491, #12904, #12887] Improve accessibility of visualizations {pull}13507[#13507]
* [Fixes #11856, #12888, #12900] Improve accessibility of visualization view {pull}13726[#13726]

Watcher::
* Watcher indices no longer use multiple types.


[float]
=== Bug Fixes

Core::
* update logstash data and mappings for single type {pull}13001[#13001]

Design::
* #12656 Fixes Aria-Hidden without value {pull}12658[#12658]
* [UI Framework] Fix disappearing borders for LocalNav search select. {pull}12803[#12803]
* Make breadcrumb a heading for screen readers, fix #12885 {pull}13734[#13734]
* [Fixes #12634] Improve date picker accessibility {pull}12676[#12676]
* [UI Framework] Fix margin for KuiLocalTabs which are applied to typographic elements. {pull}14451[#14451]
* Remove truncate from viz form text, remove additional wrapper {pull}14311[#14311]

Dev Tools::
* Clarified field labels in the Grok Debugger.
* Added auto-sizing to the input, pattern, and output text areas in the Grok Debugger.
* Added auto-sizing of the custom patterns text area in the Grok Debugger.
* Enabled users to specify custom patterns in a well-known format in the Grok Debugger.
* Fixed issue with input not being accepted in the *Sample Data* or
*Grok Pattern* fields in the Grok Debugger.
* [Fix for #10504] [console] Replace text/plain fallback with application/json {pull}12294[#12294]
* [Fixes #13142] Allow console to send multiline strings with CRLF line endings {pull}14094[#14094]
  - Console will now allow sending multiline strings on Windows.

Discover::
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]
* [Fixes #12970] Make 'time picker' button in Discover no results prompt keyboard and screen-reader accessible. {pull}13046[#13046]
* [Fixes #12692] Re-enable filter editor suggestions {pull}13376[#13376]
* [Fixes #13738] Fix 'is one of' filter editor {pull}13771[#13771]
* [Fixes #12639] Make filter pills keyboard accessible {pull}13331[#13331]
* [Fixes #12640] Make 'all filters' actions keyboard accessible {pull}13391[#13391]
* [Fixes #11830] Disable creation of 'exists' filters for scripted fields {pull}13538[#13538]
* Fix relative z-index of spy panel and filter editor {pull}13717[#13717]
* [Fixes #5164] Check sort:options for Discover default sort order {pull}13708[#13708]
* [Fixes #13075] Improve missing index pattern error message {pull}13915[#13915]
* [Fixes #13743] Refetch even when the query has not changed {pull}13759[#13759]
* [Fixes #14270] Handle strings in source mapped as numbers in filter editor {pull}14318[#14318]
* [Fixes #7767] Fix invisible filters caused by missing index pattern {pull}14131[#14131]
* [Fixes #14319] Loosen check for dashboard queries in filters array {pull}14338[#14338]

Graph::
* Reinstated `_xpack/graph/_explore` as the correct graph endpoint.
`_xpack/_graph/_explore` is deprecated and will be removed in v7.0.

Machine Learning::
* Fixed the position of text that appears when you hover over anomalies in {ml}
charts in a Safari web browser.
* Fixed {ml} charts so that they plot nulls as gaps rather than zeroes. This
change provides a more accurate visual indication of gaps in the data.
* Added support for periods in field names when you create jobs or datafeeds in
{kib}.
* Fixed job creation failure that occurred when using saved searches with filters.

Management::
* Limit scripted fields to painless and expression langs {pull}9172[#9172]
* [Fix for #12249] Fixes issue #12249 {pull}12254[#12254]
* Refine getIndices() to return an empty array if there are no matching indices. {pull}12659[#12659]
* [Fix for #9352] Change mapping of index-pattern fields to text {pull}9353[#9353]
* [Fix for #12861, #12862, #12863, #12865, #12868, #12870, #11526] [Management] Improve accessibility within management {pull}13364[#13364]
* [Fix for #12864] [Management] Accessibility - continued {pull}13576[#13576]
* [Fix for #13542] [Management] Fix breaking scope changes in the field format editor samples {pull}13549[#13549]
* [Fix for #12872] Adds getAriaName function and applies it to advanced settings {pull}13448[#13448]
* Remove premature abstraction {pull}13042[#13042]
* fix create_index_pattern_method to handle no timefields {pull}13852[#13852]
* Work around #11959 for now {pull}12051[#12051]
* [Fixes #14350] [Management] Fix FF quirk with max width in the import saved object modal {pull}14352[#14352]

Operations::
* Use es6 exports, replace module.exports {pull}12084[#12084]
* Removing mapper.dynamic setting from the esArchiver mappings {pull}13970[#13970]
* Add linting rules for formatting JSX. {pull}12810[#12810]
* Upgrade eslint config to 0.8.1. {pull}13128[#13128]
* Move eslint-config-kibana into core {pull}12725[#12725]
* [npm] Upgrade wreck {pull}13849[#13849]
* Eslint/remove last amd modules {pull}14282[#14282]

Platform::
* Update HTML style guide with rule for camel casing attribute values. {pull}11653[#11653]
* Add title and tooltip accessibility information to HTML style guide. {pull}11655[#11655]
* [Fix for #12580] Update HTML style guide with rule about putting nested elements on multiple lines. {pull}12812[#12812]
* [Fix for #12047] [uiSettings] make service request based {pull}12243[#12243]
  - removes server.uiSettings() (throws error with instructions)  - Adds request.getUiSettingsService() which returns a unique instance of UiSettingsService per request  - Methods on UiSettingsService no longer require a request object  - Adds server.uiSettingsServiceFactory(options) which can be used to create an instance of UiSettingsService with a custom callCluster() function
* [Fix for #12436] Fix stats permissions and use underscore instead of dash {pull}12478[#12478]
* [ftr] remove timestamp prefix, jenkins has it built in now {pull}13825[#13825]
* [ftr/config] prevent mochaOpts and timeouts conflict {pull}14060[#14060]
* create babel-preset and babel-register modules {pull}13973[#13973]
* [vis/requesting] only call when actually requesting {pull}14017[#14017]
* [Fixes #14255] Use Boom.boomify instead of deprecated Boom.wrap {pull}14325[#14325]
* [Fixes #14497] Import Babel polyfill when running Jest tests {pull}14508[#14508]

Reporting::
* Fixed generated reports such that they show the time zone on the client, as
specified in the `dateFormat` field in the Advanced Settings.
* Resolved intermittent issue with Firefox logging users out of {kib} after
they download a PDF report.

Security::
* Ensured that privileged information does not appear in the error message when
a {kib} login attempt fails.

Sharing::
* Restoring the dashboard-grid padding to appease Gridster {pull}12613[#12613]
* [Fix for #11857] Accessibility: Sharing UI - associate labels with controls {pull}12143[#12143]
* [Fix for #11860] Make add edit buttons accessible {pull}12320[#12320]
* Need to trigger renderComplete when there are no results {pull}12380[#12380]
* remove inline awaits {pull}13043[#13043]
* Stabilize and bring back flaky tests {pull}13034[#13034]
* [Fix for #12484, #12485, #12483] Fix accessibility issues with saved object finder {pull}13152[#13152]
* [Fix for #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]
* [Fixes #13421] Dashboard dark-theme fixes {pull}13690[#13690]
* [Fixes #12233] Be case insensitive when sorting on the visualize and dashboard landing pages {pull}13397[#13397]
* Fix bug with Dashboard breadcrumb alignment. {pull}13580[#13580]
* [Fixes #13040] Make sure no one can show the chrome if the default setting is hidden. {pull}13250[#13250]
* [Fixes #13297] Fix full screen toggle button when panel is expanded {pull}13320[#13320]
* Show full screen option even when write controls are hidden {pull}13247[#13247]
* [Fixes #13289] Use find service instead of remote  {pull}13296[#13296]
* [Fixes #13754] Small clean up with visualize test + extra debug log {pull}13755[#13755]
* [Fixes #13588] Fix map updates not propagating to the dashboard {pull}13589[#13589]
* Set pie chart border to match background in dark mode {pull}14375[#14375]
* [Fixes #14462] Prevent event handlers from being triggered after they are &quot;off&quot;ed {pull}14463[#14463]

Visualize::
* update spy table headers when columns update {pull}13225[#13225]
* Fixes #12757 - Fixing field fetching for index patterns for TSVB {pull}12771[#12771]
* [Fix for #4599] Add "Sum of series in legend" option {pull}7970[#7970]
* [Fix for #9053] [timelion/fit/carry] do nothing if there is not any data {pull}9054[#9054]
* [Fix for #8763] [vislib/tilemap/heatmap] scale the heatmap maxZoom with map zoom {pull}8765[#8765]
* [Fix for #9184] fixes error with custom interval in datetime aggregation {pull}9427[#9427]
* Fix timelion's flot when neither thor nor monitoring are installed {pull}10412[#10412]
* Fixes #12763 - Add show_grid to the default vis structure for TSVB {pull}12769[#12769]
* Fixes #12777 - Add onBrush to Visualization component for TSVB {pull}12778[#12778]
* [Fix for #12802, #12762] Fix TSVB Visualizations to honor darkTheme {pull}12804[#12804]
* [Fix for #8076] Scaled date format for date histogram aggregation {pull}12384[#12384]
  - Format date_histogram aggregation bucket labels with format specified in Advanced Setting's "dateFormat:scaled"
* [Fix for #3230] Make vertical bar chart gutter widths consistent {pull}12264[#12264]
  - Histogram intervals are not always equal widths (monthly time intervals). Keeping gutter widths consistent and reducing the bar width provides a more visually appealing bar chart.
* [Fix for #3173] Date histogram brush - add range filter when field is not index pattern time field. {pull}12286[#12286]
* Remove event listener for resizeChecker when directive is destroyed {pull}12734[#12734]
* Date histogram axis label not getting updated when time interval changes {pull}12815[#12815]
* [Fix for #12782] visualize should send ready:vis event when done {pull}12796[#12796]
* [Fix for #12811] reload visualization on auto refresh trigger {pull}12823[#12823]
* [Fix for #12882] changing query should update url state {pull}12912[#12912]
* vis with saved search should not show query and filter panels {pull}12911[#12911]
* [Fix for #12925] analyze wildcard should not be part of default query {pull}12938[#12938]
* [Fix for #12940] query queue should be cleared on failure {pull}12942[#12942]
* Handle date histogram scaling for table vis and avg_buckets metric {pull}11929[#11929]
* [Fix for #11414] remove default WMS settings {pull}11573[#11573]
* [Fix for #12497] allows to order percentiles freely {pull}12498[#12498]
* [Fix for #12732] Should only run visualization on Discover page when the indexpattern is time based {pull}12741[#12741]
* reload on global fetch event and emit vis:ready {pull}12805[#12805]
* [Fix for #12919] Fix excessive redraw {pull}12931[#12931]
* [Fix for #13181, elastic/beats#4777] Add Checks to Dashboard Context {pull}13182[#13182]
* [Fix for #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fix for #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fix for #12827] removes :filters from label {pull}12962[#12962]
* [Fix for #12983] resize was not detected correctly {pull}13239[#13239]
* [Fix for #13011] Should respect pinned filters {pull}13019[#13019]
* Visualization accessibility issues {pull}13226[#13226]
* Fixes #12685 - Improve error handling for TSVB {pull}12688[#12688]
* [Fix for #13246] Fixes #13246 - Add checks for empty annotations {pull}13422[#13422]
* [Fix for #13010] Fixes #13010 - Add dateFormat config to TSVB Visualizations {pull}13626[#13626]
* [Fix for #13625] Map filter not set appropriately when spy panel is open {pull}13678[#13678]
* [Fix for #13156] fixing disabling aggregations {pull}13686[#13686]
  - Disabled aggregations are no longer removed on applying visualization configuration.
* [Fix for #12896, #12897, #12898, #12899] Visualize Accessibility Issues {pull}13428[#13428]
* Fix a bug with the interval label for TSVB {pull}13440[#13440]
* [Fix for #12113] Fixes #12113 - Add timezone to date histogram aggregations for TSVB {pull}13378[#13378]
* [Fix for #13471] Closes #13471 - Change split behavior of gauges and metrics vis {pull}13583[#13583]
* [Fix for #12227] Fix discover sidebar Visualize button for geo_point fields {pull}13539[#13539]
* Clamp the centroid to stay within the box boundaries {pull}13581[#13581]
* [Fix for #13551] fix heatmap sizing on dashboard {pull}13636[#13636]
* ensure editor mode propagates correctly {pull}13355[#13355]
* [Fix for #13517] remove geo_bounds agg from visualizations {pull}13536[#13536]
* [Fix for #13424] Exclude filter agg from visualizations {pull}13680[#13680]
* [Fix for #13572] Show a warning for non accessible charts for screen readers {pull}13573[#13573]
* date_histogram: some bars are too big {pull}13068[#13068]
* [Fixes #13713] [Accessibility] Use aria-label in TSVB React components, instead of ariaLabel. {pull}13714[#13714]
* [TSVB] Adding check for model and visData {pull}13854[#13854]
* Fixes a bug with PR #13854 {pull}13873[#13873]
* [TSVB] Fix chart legend formatting in bottom position {pull}14084[#14084]
* [Fixes #12733, #12781] fixing refresh and auto refresh {pull}12752[#12752]
* [Fixes #12836] fix spy panel on discovery page {pull}12853[#12853]
* visual builder should set vis.initialized when ready {pull}13779[#13779]
* [Fixes #13770] updating time picker should not set vis to dirty {pull}13793[#13793]
* editor render method should not be called if request is pending {pull}13858[#13858]
* [Fixes #12759, #12761, #12763] Fix TSVB UX flow {pull}12770[#12770]
* fixing region map click handler {pull}12790[#12790]
* use parentNode iso parentElement {pull}13842[#13842]
* wrap responsehandler in angular promise {pull}14095[#14095]
* [TSVB] Greater Than or Equal to Interval Pattern {pull}13872[#13872]
* [Fixes #14470] [TSVB] Fixes #14470 - Remove field restriction on cardinality agg {pull}14483[#14483]
* [TSVB] Fix CSS Bug with Top N Values {pull}14254[#14254]
* [Fixes #14357] Fixes #14357 - Add courier's migrateFilters to dashboard context {pull}14481[#14481]
* [Fixes #14040, #13997] Show query and filter bars even when there's a linked search {pull}14212[#14212]
* [Fixes #13287] adds stroke back to area charts {pull}14149[#14149]
* [Fixes #13193] fixes legend refreshing {pull}14150[#14150]
* [Fixes #13252] fixes error when expanding gauge to full screen {pull}14114[#14114]
* pie chart design guidelines {pull}13661[#13661]
* [Fixes #14028] removing check for vis type on saved visualizations {pull}14093[#14093]
* [Fixes #10543] fixing ordering of series in legend {pull}14113[#14113]
  - order of legend for series should be same as provided in the configuration.
* [Fixes #14078] fixes console error when selecting a pipeline aggregation {pull}14148[#14148]
* allows visualize to load saved vis {pull}14146[#14146]
* [Fixes #13570] don't show spy panel with tsvb or timelion {pull}14090[#14090]
* moving shouldShowSpyPanel to visualize {pull}14269[#14269]
* refactor tagcloud to use tabify responseHandler {pull}14266[#14266]
* some updates to visualize loader {pull}14404[#14404]
* Visualize loader updates {pull}14528[#14528]
* [Fixes #13705] use correct element for size {pull}14105[#14105]
* [Fixes #12953] remove junk tests {pull}14191[#14191]
* use tabify for regionmap {pull}14364[#14364]
* [Fixes #13144] Fixes 13144 - Add ability to select percentiles in pipeline aggs {pull}13453[#13453]
* [Fixes #12069] apply field formatter to tag cloud {pull}14230[#14230]
* [Fixes #12134] add tickDecimals option to yaxis {pull}14371[#14371]
* [Fixes #14457] Set configurable to true so AggConfig decorated properties can be deleted {pull}14569[#14569]
* [Fixes #10236, #9053] Timelion .fit() - avoid removing values that are zero {pull}14560[#14560]
* [Fixes #13874] Allow panning beyond dateline {pull}13955[#13955]
  - Users can now pan and zoom the map beyond the date line.
* [TSVB] Allow negative time offsets {pull}14494[#14494]
* [Fixes #14565] Fix tagcloud sync issues, fix #14565 {pull}14566[#14566]

Watcher::
* Fixed problem related to creating a threshold-based alert in {kib} with a
Safari web browser. For example, the dialogs related to choosing fields and
aggregations were not shown in that browser.
* Fixed incorrect watch states in {kib}. In particular, the UI now respects the
actual state of the watch when exceptions occur in its input or condition.
* The HTTP client respects timeouts now and does not get stuck leading to stuck watches.

//[float]
//=== Regressions

//[float]
//=== Known Issues

[[release-notes-6.0.0-rc2]]
== {kib} 6.0.0-rc2

[float]
=== Bug Fixes

Design::
* [UI Framework] Fix margin for KuiLocalTabs which are applied to typographic elements. {pull}14451[#14451]
* [DESIGN]: Remove truncate from viz form text, remove additional wrapper {pull}14311[#14311]


Dev Tools::
* Fixed issue with input not being accepted in the *Sample Data* or
*Grok Pattern* fields in the Grok Debugger.

Discover::
* [Fixes #14270] Handle strings in source mapped as numbers in filter editor {pull}14318[#14318]
* [Fixes #7767] Fix invisible filters caused by missing index pattern {pull}14131[#14131]
* [Fixes #14319] Loosen check for dashboard queries in filters array {pull}14338[#14338]

Machine Learning::
* Fixed the position of text that appears when you hover over anomalies in {ml}
charts in a Safari web browser.
* Fixed {ml} charts so that they plot nulls as gaps rather than zeroes. This
change provides a more accurate visual indication of gaps in the data.
* Added support for periods in field names when you create jobs or datafeeds in
{kib}.

Management::
* [Fixes #14350] [Management] Fix FF quirk with max width in the import saved object modal {pull}14352[#14352]
* [Fixes #14592] [Management] Handle saved search import better {pull}14625[#14625]

Operations::
* Eslint/remove last amd modules {pull}14282[#14282]
* Add (GPL-2.0 OR MIT) license as allowed {pull}14439[#14439]
* [Fixes #14468] Fix crash when hitting shift+return in console {pull}14478[#14478]

Platform::
* [Fixes #14255] Use Boom.boomify instead of deprecated Boom.wrap {pull}14325[#14325]
* [Fixes #14497] Import Babel polyfill when running Jest tests {pull}14508[#14508]

Security::
* Ensured that privileged information does not appear in the error message when
a {kib} login attempt fails.

Sharing::
* Set pie chart border to match background in dark mode {pull}14375[#14375]
* [Fixes #14462] Prevent event handlers from being triggered after they are &quot;off&quot;ed {pull}14463[#14463]

Visualization::
* [Fixes #13983] Fix Timelion suggestions broken by upgrading to Angular 1.6.5 {pull}14316[#14316]
* [TSVB] Greater Than or Equal to Interval Pattern {pull}13872[#13872]
* [Fixes #14470] [TSVB] Fixes #14470 - Remove field restriction on cardinality agg {pull}14483[#14483]
* [TSVB] Fix CSS Bug with Top N Values {pull}14254[#14254]
* [Fixes #14357] Fixes #14357 - Add courier's migrateFilters to dashboard context {pull}14481[#14481]
* [Fixes #14040, #13997] Show query and filter bars even when there's a linked search {pull}14212[#14212]
* [Fixes #13287] adds stroke back to area charts {pull}14149[#14149]
* [Fixes #13193] fixes legend refreshing {pull}14150[#14150]
* [Fixes #13252] fixes error when expanding gauge to full screen {pull}14114[#14114]
* pie chart design guidelines {pull}13661[#13661]
* [Fixes #14028] removing check for vis type on saved visualizations {pull}14093[#14093]
* [Fixes #10543] fixing ordering of series in legend {pull}14113[#14113]
  - order of legend for series should be same as provided in the configuration.
* [Fixes #14078] fixes console error when selecting a pipeline aggregation {pull}14148[#14148]
* allows visualize to load saved vis {pull}14146[#14146]
* [Fixes #13570] don't show spy panel with tsvb or timelion {pull}14090[#14090]
* moving shouldShowSpyPanel to visualize {pull}14269[#14269]
* refactor tagcloud to use tabify responseHandler {pull}14266[#14266]
* some updates to visualize loader {pull}14404[#14404]
* Visualize loader updates {pull}14528[#14528]
* [Fixes #13705] use correct element for size {pull}14105[#14105]
* [Fixes #12953] remove junk tests {pull}14191[#14191]
* use tabify for regionmap {pull}14364[#14364]
* use proper SVG APIs to readout contents {pull}14458[#14458]
* [Fixes #13144] Fixes 13144 - Add ability to select percentiles in pipeline aggs {pull}13453[#13453]
* [Fixes #12069] apply field formatter to tag cloud {pull}14230[#14230]
* [Fixes #12134] add tickDecimals option to yaxis {pull}14371[#14371]
* [Fixes #14457] Set configurable to true so AggConfig decorated properties can be deleted {pull}14569[#14569]
* [Fixes #10236, #9053] Timelion .fit() - avoid removing values that are zero {pull}14560[#14560]
* [Fixes #13874] Allow panning beyond dateline {pull}13955[#13955]
  - Users can now pan and zoom the map beyond the date line.
* [TSVB] Allow negative time offsets {pull}14494[#14494]
* [Fixes #14565] Fix tagcloud sync issues, fix #14565 {pull}14566[#14566]
* Add tooltip to long title. {pull}14167[#14167]

Watcher::
* Fixed problem related to creating a threshold-based alert in {kib} with a
Safari web browser. For example, the dialogs related to choosing fields and
aggregations were not shown in that browser.
* Fixed incorrect watch states in {kib}. In particular, the UI now respects the
actual state of the watch when exceptions occur in its input or condition.

[[release-notes-6.0.0-rc1]]
== {kib} 6.0.0-rc1

[float]
=== Breaking Changes

Management::
* [indexPatterns] remove support for time patterns {pull}12158[#12158]
  - - Removes ability to create index patterns based on time patterns/intervals  - Adds a warning that informs users when they are using an index pattern that is now unsupported (disabled by default until #10442 is done, #12322)  - Does not address editing/remapping index patterns, see last task in #12242

Operations::
* Updates to status API, re-align status page {pull}10180[#10180]
* [Fixes #10181] Revert same port http -&gt; https redirect {pull}10930[#10930]
  - Kibana 5.x redirected requests from http to https on the same port if TLS was configured. Starting in Kibana 6.0.0 Kibana no longer redirects basic http traffic to https.

Other::
* [Fixes #13096] Remove highlight query {pull}13231[#13231]

Platform::
* [Fixes #12012] Fail to start if settings include unknown keys {pull}12554[#12554]
  - When a config file includes invalid keys or values, Kibana usually logs a message describing the issue and fails to start. There has been an exception to this rule since 4.2 that allowed top-level keys to be unknown/misspelled and only caused a warning to be logged. That exception has been removed and now any unknown or misspelled config key passed to Kibana (via the config file or command line flags) will prevent it from starting.

Visualization::
* [Fixes #10907] allows more flexible timelion queries {pull}10961[#10961]

[float]
=== New Features

Operations::
* Use single ES document type {pull}12794[#12794]
  - Starting in Elasticsearch 6.0, you are no longer able to create new indices
  with multiple index types. To accomplish the same effect as index types, a new
  type field was added to identify the document and the value mapped under the
  index to allow for strict mapping.

[float]
=== Enhancements

Design::
* [UI Framework] Reactify menu {pull}12135[#12135]
* [UI Framework] reactify prompt for items {pull}12151[#12151]
* [UI Framework] Allow custom placeholder for Tool Bar Search Box {pull}12959[#12959]
* Palette swap for accessibility / kibana 6 {pull}12085[#12085]
  - We re-skinned a decent portion of Kibana to be mostly AA accessibility compatible in regards to coloring of major navigation elements.

Discover::
* [Fixes #4785] Timepicker on the right {pull}11980[#11980]
* [Fixes #12635]  Improve the accessibility of the Discover screen {pull}12681[#12681]
* [Fixes #12343] Remove custom keyboard navigation in datepicker {pull}13644[#13644]

Management::
* [Management] Provide a way to fetch indices and template index patterns {pull}12200[#12200]
* [Management] More universal solution for fetching indices and aliases {pull}12405[#12405]
* [Fixes #11526, #8225] Move build info from management section to status page {pull}13341[#13341]

Operations::
* [Fixes #9276] Update mappings for kibana index {pull}9280[#9280]
* [eslint] Ignore ui_framework/doc_site/build {pull}12400[#12400]
* [git] ignore extra files in the root config/ directory {pull}9296[#9296]
* upgrade makelogs {pull}9295[#9295]
* [Fixes #9436] [optimizer] remove support for .jsx extension {pull}12712[#12712]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* Sets ES mapping to single_type=false {pull}11451[#11451]

Platform::
* [Fixes #10863] [uiSettings] support defining settings with uiExports {pull}12250[#12250]
  - - define a uiExports.uiSettingDefaults key your plugin definition to add uiSettingDefaults - uiSettingDefaults must be unique. If a key is already defined elsewhere then the server will not start. - defined settings will display in the advanced settings editor, along with the intended default value and description - the REST API is identical to before - the browser API is identical to before - defaults for timelion have been extracted to the timelion plugin definition and the existing defaults are defined in the kibana plugin definition
* [Fixes #12012] Refactor commaList filter logic into common util {pull}12553[#12553]
* [kbnServer/extensions] formalize request factories with helper {pull}12697[#12697]
* Allow plugins to turn off the “link to last URL” navigation helper {pull}13044[#13044]

Sharing::
* Add new react color picker to ui framework with tests {pull}12245[#12245]
* Reactify stateless table components {pull}12349[#12349]

Visualization::
* [Fixes #11193] hide current time marker when the timespan doesn't include the current time {pull}12266[#12266]
  - Only display current time marker on  a visualization when the x-axis extent includes the current time.
* add font size control to markdown visualization {pull}12860[#12860]
* [vis/resizeChecker] swap out implemenation with ResizeObserver polyfill {pull}9439[#9439]
* Add imports for SavedObjectRegistryProvider.register, fixing Timelion {pull}12844[#12844]
* [Fixes #7572] add polygon drawing tool {pull}11578[#11578]
  - On a coordinate map, users can now make a selection on the map by drawing a freehand polygon. Just like the earlier boundary selection, this adds a boundary filter to the filter bar.
* [Fixes #12491, #12904, #12887] Improve accessibility of visualizations {pull}13507[#13507]
* [Fixes #11856, #12888, #12900] Improve accessibility of visualization view {pull}13726[#13726]

[float]
=== Bug Fixes

Design::
* #12656 Fixes Aria-Hidden without value {pull}12658[#12658]
* [Fixes #12634] Improve date picker accessibility {pull}12676[#12676]

Dev Tools::
* Clarified field labels in the Grok Debugger.
* Added auto-sizing to the input, pattern, and output text areas in the Grok Debugger.
* Added auto-sizing of the custom patterns text area in the Grok Debugger.
* Enabled users to specify custom patterns in a well-known format in the Grok Debugger.
* [Fixes #10504] [console] Replace text/plain fallback with application/json {pull}12294[#12294]
* [Fixes #13142] Allow console to send multiline strings with CRLF line endings {pull}14094[#14094]
  - Console will now allow sending multiline strings on Windows.

Discover::
* [Fixes #12970] Make 'time picker' button in Discover no results prompt keyboard and screen-reader accessible. {pull}13046[#13046]
* [Fixes #12692] Re-enable filter editor suggestions {pull}13376[#13376]
* [Fixes #13738] Fix &quot;is one of&quot; filter editor {pull}13771[#13771]
* Fix filter editor test {pull}13971[#13971]
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]
* [Fixes #12639] Make filter pills keyboard accessible {pull}13331[#13331]
* [Fixes #12640] Make 'all filters' actions keyboard accessible {pull}13391[#13391]
* [Fixes #11830] Disable creation of &quot;exists&quot; filters for scripted fields {pull}13538[#13538]
* Fix relative z-index of spy panel and filter editor {pull}13717[#13717]
* [Fixes #5164] Check sort:options for Discover default sort order {pull}13708[#13708]
* [Fixes #13075] Improve missing index pattern error message {pull}13915[#13915]

Machine Learning::
* Fixed job creation failure that occurred when using saved searches with filters.

Management::
* [Fixes #9352] Change mapping of index-pattern fields to text {pull}9353[#9353]
* Remove premature abstraction {pull}13042[#13042]
* [Fixes #12861, #12862, #12863, #12865, #12868, #12870, #11526] [Management] Improve accessibility within management {pull}13364[#13364]
* [Fixes #12864] [Management] Accessibility - continued {pull}13576[#13576]
* [Fixes #13542] [Management] Fix breaking scope changes in the field format editor samples {pull}13549[#13549]
* fix create_index_pattern_method to handle no timefields {pull}13852[#13852]
* Work around #11959 for now {pull}12051[#12051]

Operations::
* [es archiver] fix error causes when requesting multiple index feature… {pull}12473[#12473]
* Bump makelogs to 4.0.2 {pull}13007[#13007]
* Removing mapper.dynamic setting from the esArchiver mappings {pull}13970[#13970]
* Add linting rules for formatting JSX. {pull}12810[#12810]
* Upgrade eslint config to 0.8.1. {pull}13128[#13128]
* Move eslint-config-kibana into core {pull}12725[#12725]
* Remove `@elastic` folder from `packages/` {pull}13089[#13089]
* [npm] Upgrade wreck {pull}13849[#13849]

Other::
* Limit scripted fields to painless and expression langs {pull}9172[#9172]
* [6.0] update spy table headers when columns update {pull}13225[#13225]
* Add comments and inline docs for visualization saving and editing process. {pull}8208[#8208]
* Revert &quot;Make searching saved objects more powerful with query_string (#9870)&quot; {pull}10239[#10239]
* [Tests] Adjust makelog mappings and associated tests {pull}13014[#13014]
* misspelling substituting to subtituting in CONTRIBUTING.md {pull}8730[#8730]
* [Fixes #9763] [test fixtures] string -&gt; text/keyword for logstash data {pull}9799[#9799]
* [functional tests] Remove include_in_all {pull}10268[#10268]
* [Fixes #8861] Port #8880 to master Support Cloud testing {pull}8915[#8915]
* [Fixes #13743] Refetch even when the query has not changed {pull}13759[#13759]
* Update 6.0 breaking changes docs to match 5.0 structure {pull}8800[#8800]
* fixing linting issue which blocks CI {pull}9480[#9480]
* Testbed for aiding development in Kibana {pull}11571[#11571]
* [Pagination buttons] Adding test subjects to enable functional testing {pull}13925[#13925]
* [esvm] bump, remove outdated config {pull}12043[#12043]
* upgrade @elastic/eslint-import-resolver-kibana {pull}12296[#12296]
* [server] remove unused module {pull}12694[#12694]
* Updates esArchiver mappings to use single type {pull}13107[#13107]
* [esTestConfig] fix esvm directory {pull}13190[#13190]
* Add some testSubject helpers {pull}13305[#13305]
* [ui/queryBar/tests] attach $elem to DOM so &quot;click&quot; triggers &quot;submit&quot; {pull}13544[#13544]
* [savedObjectClient] decorate non-es errors too {pull}13596[#13596]
* [visualize] Fix agg param race {pull}13429[#13429]
* [Fixes #13439] Upgrade Angular to 1.6.5 {pull}13543[#13543]
* [aggTypes/paramTypes] naming cleanup {pull}14020[#14020]
* [uiFramework] fix webpack config {pull}14067[#14067]
* [Fixes #13936] Fix flaky tilemap tests {pull}13942[#13942]
* fix wrapped retry error. {pull}13967[#13967]
* Allow custom timeouts on click {pull}14042[#14042]
* Make breadcrumb a heading for screen readers, fix #12885 {pull}13734[#13734]
* Remove Stats API {pull}13896[#13896]
* Revert Stats API for 6.0 {pull}13969[#13969]
* Fixes path to the functional test runner {pull}12651[#12651]
* Removed _default_ from esArchiver test and updates data.json {pull}13122[#13122]

Platform::
* [Fixes #12047] [uiSettings] make service request based {pull}12243[#12243]
  - - removes server.uiSettings() (throws error with instructions)  - Adds request.getUiSettingsService() which returns a unique instance of UiSettingsService per request  - Methods on UiSettingsService no longer require a request object  - Adds server.uiSettingsServiceFactory(options) which can be used to create an instance of UiSettingsService with a custom callCluster() function
  * [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]
  * [ftr] remove timestamp prefix, jenkins has it built in now {pull}13825[#13825]
  * [ftr/config] prevent mochaOpts and timeouts conflict {pull}14060[#14060]
  * create babel-preset and babel-register modules {pull}13973[#13973]
  * [vis/requesting] only call when actually requesting {pull}14017[#14017]

Reporting::
* Fixed generated reports such that they show the time zone on the client, as
specified in the `dateFormat` field in the Advanced Settings.

Sharing::
* [Fixes #13421] Dashboard dark-theme fixes {pull}13690[#13690]
* [Fixes #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]
* [Fixes #12233] Be case insensitive when sorting on the visualize and dashboard landing pages {pull}13397[#13397]
* Fix bug with Dashboard breadcrumb alignment. {pull}13580[#13580]
* Stats API {pull}11992[#11992]
  - We introduced a new api endpoint at api/stats which displays counts of saved objects in your kibana index: {&quot;dashboard&quot;:{&quot;total&quot;:1},&quot;visualization&quot;:{&quot;total&quot;:3},&quot;search&quot;:{&quot;total&quot;:1},&quot;index_pattern&quot;:{&quot;total&quot;:1},&quot;index&quot;:&quot;.kibana&quot;}
* remove inline awaits {pull}13043[#13043]
* Stabilize and bring back flaky tests {pull}13034[#13034]
* [Fixes #13040] Make sure no one can show the chrome if the default setting is hidden. {pull}13250[#13250]
* [Fixes #13297] Fix full screen toggle button when panel is expanded {pull}13320[#13320]
* [Fixes #12484, #12485, #12483] Fix accessibility issues with saved object finder {pull}13152[#13152]
* Show full screen option even when write controls are hidden {pull}13247[#13247]
* [Fixes #13289] Use find service instead of remote  {pull}13296[#13296]
* [Fixes #12181] Fix dark theme issues with spy toggle and spy pane {pull}13345[#13345]
* [Fixes #13455] Avoid a wrapped retry and use exists instead of find, which will take up all the time allotted for the retry if it fails once {pull}13467[#13467]
* [Fixes #13754] Small clean up with visualize test + extra debug log {pull}13755[#13755]
* [Fixes #13588] Fix map updates not propagating to the dashboard {pull}13589[#13589]

Visualization::
* [Fixes #13010] Fixes #13010 - Add dateFormat config to TSVB Visualizations {pull}13626[#13626]
* [Fixes #3173] Date histogram brush - add range filter when field is not index pattern time field. {pull}12286[#12286]
* date_histogram: some bars are too big {pull}13068[#13068]
* [Fixes #13625] Map filter not set appropriately when spy panel is open {pull}13678[#13678]
* [Fixes #12782] visualize should send ready:vis event when done {pull}12796[#12796]
* [Fixes #12811] reload visualization on auto refresh trigger {pull}12823[#12823]
* [Fixes #12882] changing query should update url state {pull}12912[#12912]
* vis with saved search should not show query and filter panels {pull}12911[#12911]
* [Fixes #12925] analyze wildcard should not be part of default query {pull}12938[#12938]
* [Fixes #12940] query queue should be cleared on failure {pull}12942[#12942]
* Handle date histogram scaling for table vis and avg_buckets metric {pull}11929[#11929]
* [Fixes #13156] fixing disabling aggregations {pull}13686[#13686]
  - Disabled aggregations are no longer removed on applying visualization configuration.
* [Fixes #11414] remove default WMS settings {pull}11573[#11573]
* [Fixes #12497] allows to order percentiles freely {pull}12498[#12498]
* reload on global fetch event and emit vis:ready {pull}12805[#12805]
* Visualization accessibility issues {pull}13226[#13226]
* [Fixes #12896, #12897, #12898, #12899] Visualize Accessibility Issues {pull}13428[#13428]
* [Fixes #13713] [Accessibility] Use aria-label in TSVB React components, instead of ariaLabel. {pull}13714[#13714]
* Duration Formatting for TSVB {pull}13337[#13337]
* [Fixes #13471] Closes #13471 - Change split behavior of gauges and metrics vis {pull}13583[#13583]
* [TSVB] Adding check for model and visData {pull}13854[#13854]
* Fixes a bug with PR #13854 {pull}13873[#13873]
* [TSVB] Fix chart legend formatting in bottom position {pull}14084[#14084]
* [Fixes #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fixes #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fixes #12227] Fix discover sidebar Visualize button for geo_point fields {pull}13539[#13539]
* [Fixes #12733, #12781] fixing refresh and auto refresh {pull}12752[#12752]
* [Fixes #12836] fix spy panel on discovery page {pull}12853[#12853]
* [Fixes #12827] removes :filters from label {pull}12962[#12962]
* [Fixes #12983] resize was not detected correctly {pull}13239[#13239]
* Clamp the centroid to stay within the box boundaries {pull}13581[#13581]
* [Fixes #13551] fix heatmap sizing on dashboard {pull}13636[#13636]
* visual builder should set vis.initialized when ready {pull}13779[#13779]
* [Fixes #13770] updating time picker should not set vis to dirty {pull}13793[#13793]
* editor render method should not be called if request is pending {pull}13858[#13858]
* [6.0] fixes bad backport of #13877 {pull}14070[#14070]
* Remove some lodash usage {pull}10746[#10746]
* [Fixes #12759, #12761, #12763] Fix TSVB UX flow {pull}12770[#12770]
* fixing region map click handler {pull}12790[#12790]
* ensure editor mode propagates correctly {pull}13355[#13355]
* [Fixes #13517] remove geo_bounds agg from visualizations {pull}13536[#13536]
* [Fixes #13424] Exclude filter agg from visualizations {pull}13680[#13680]
* use parentNode iso parentElement {pull}13842[#13842]
* wrap responsehandler in angular promise {pull}14095[#14095]
* [Fixes #13572] Show a warning for non accessible charts for screen readers {pull}13573[#13573]

[[release-notes-6.0.0-beta2]]
== {kib} 6.0.0-beta2

[float]
=== Breaking Changes

Discover::
* [Fix for #13096] Remove highlight query {pull}13231[#13231]

Visualization::
* [Fix for #13425] Replace "marked" with "markdown-it" {pull}13623[#13623]

[float]
=== Enhancements

Dashboard::
*  If you had a chance to check out the new Dashboard Only Mode in 6.0.0-beta1,
we've changed things up a bit for 6.0.0-beta2. Previously we required you to
flag every role a user belonged to as being in the View dashboards only mode
in order for that user to be flagged as a Dashboard only mode user. In this
new set up, we created a reserved role, `kibana_dashboard_only_user`, that is
already pre-configured with read only access to the .kibana index, and set up
to be in Dashboard Only Mode. All you have to add is this one role to any user
and they will now be a Dashboard Only Mode user. We also got rid of this new
setting in the Roles UI, as this one role should suffice for most user's setups.
If you have a more complicated setup, such as multi-tenancy with multiple
`.kibana` indexes, you can create more dashboard only mode roles by adding
role names to the `xpackDashboardMode:roles` advanced setting. For more
information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Discover::
* [Fix for #12343] Remove custom keyboard navigation in datepicker {pull}13644[#13644]

Management::
* [Management] Provide a way to fetch index pattern titles {pull}13030[#13030]
  - This PR adds another method to the indexPatterns service to fetch index patterns titles. Since the code was nearly identical to how index pattern ids are fetched, I decided to slightly refactor the function to accept a parameter for which property to fetch from the index pattern. I've updated all usages to the new approach.
* [Fix for #11526, #8225] Move build info from management section to status page {pull}13341[#13341]

Monitoring::
* Added a tip in the pipeline viewer in {kib} when a pipeline contains a plugin
that does not have an id explicitly set in its configuration options. If you
specify an ID, you can track differences across pipeline changes. For more
information, see
{logstash-ref}/logstash-pipeline-viewer.html[Pipeline Viewer UI].

Platform::
* [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]

Security::
* Added reserved `kibana_dashboard_only_user` role. For more information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Visualization::
* Upgrade kibana to leaflet 1.x {pull}12367[#12367]
* Duration Formatting for TSVB {pull}13337[#13337]

[float]
=== Bug Fixes

Design::
* Make breadcrumb a heading for screen readers, fix #12885 {pull}13734[#13734]
* [Accessibility] Make kbn_accessible_click part of autoload/all  {pull}13299[#13299]

Dev Tools::
* [Fix for #10504] [console] Replace text/plain fallback with application/json {pull}12294[#12294]
* [Fix for #10677] Keep top line in view when resizing Console to avoid losing user context {pull}13695[#13695]

Discover::
* [Fix for #12745] Handle booleans in filter editor {pull}13406[#13406]
* [Fix for #12692] Re-enable filter editor suggestions {pull}13376[#13376]
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]
* [Fix for #12639] Make filter pills keyboard accessible {pull}13331[#13331]
* [Fix for #12640] Make 'all filters' actions keyboard accessible {pull}13391[#13391]
* [Fix for #12416] Fix fixed-scroll on Discover page {pull}13516[#13516]
* [Fix for #12955] Improves dark theme support in the filter editor {pull}13522[#13522]
* [Fix for #11830] Disable creation of "exists" filters for scripted fields {pull}13538[#13538]
* [Fix for #13080] Fix blank index pattern selector in Discover {pull}13715[#13715]
* Fix relative z-index of spy panel and filter editor {pull}13717[#13717]

Management::
* [Fix for #12861, #12862, #12863, #12865, #12868, #12870, #11526] [Management] Improve accessibility within management {pull}13364[#13364]
* [Fix for #12864] [Management] Accessibility - continued {pull}13576[#13576]
* [Fix for #13542] [Management] Fix breaking scope changes in the field format editor samples {pull}13549[#13549]
* [Fix for #12872] Adds getAriaName function and applies it to advanced settings {pull}13448[#13448]
* [Fix for #13072] Prevents default index pattern name when ID is provided {pull}13353[#13353]
* [Fix for #13654] Changes verbage for opening an existing pattern {pull}13697[#13697]

Operations::
* Remove `@elastic` folder from `packages/` {pull}13089[#13089]

Platform::
* [Fix for #12933] [chrome/nav/lastUrl] do not track redirect routes {pull}13432[#13432]
  - When you navigate to a URL that Kibana doesn't recognize it tries to be helpful and send you to discover. At the same time it tries to remember the URL you were last using in each app and bring back where you left off when you come back. Unfortunately, these two features recently collided. If you somehow ended up at an unknown URL that looked like the URL for an app other than discover Kibana would get confused and remember the bad URL and immediately redirect you to discover. If you didn't give up right away you would probably try to go back to the app, but since it Kibana is trying to be helpful it would send you right back to the bad URL and then back to discover... Stupid right?! Well, it won't happen anymore!

Sharing::
* remove inline awaits {pull}13043[#13043]
* Stabilize and bring back flaky tests {pull}13034[#13034]
* [Fix for #12484, #12485, #12483] Fix accessibility issues with saved object finder {pull}13152[#13152]
* [Fix for #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]

Visualization::
* Fixes #12685 - Improve error handling for TSVB {pull}12688[#12688]
* [Fix for #13246] Fixes #13246 - Add checks for empty annotations {pull}13422[#13422]
* [Fix for #12866] Use devicePixelRatio to scale up and down canvas values in TSVB for Tooltip {pull}13565[#13565]
* [Fix for #13010] Fixes #13010 - Add dateFormat config to TSVB Visualizations {pull}13626[#13626]
* [Fix for #13625] Map filter not set appropriately when spy panel is open {pull}13678[#13678]
* don't hide metric if show labels is false {pull}13637[#13637]
  - goal/gauge show labels option should only hide the labels not the metric value
* [Fix for #13156] fixing disabling aggregations {pull}13686[#13686]
  - Disabled aggregations are no longer removed on applying visualization configuration.
* [Fix for #13546] custom value axis title should not be overiden {pull}13639[#13639]
* Visualization accessibility issues {pull}13226[#13226]
* [Fix for #12896, #12897, #12898, #12899] Visualize Accessibility Issues {pull}13428[#13428]
* [Fix for #13267, #13517] fix available metric aggs {pull}13518[#13518]
* [Fix for #12491, #12904, #12887] Improve accessibility of visualizations {pull}13507[#13507]
* [Fix for #11856, #12888, #12900] Improve accessibility of visualization view {pull}13726[#13726]
* Fix a bug with the interval label for TSVB {pull}13440[#13440]
* [Fix for #12113] Fixes #12113 - Add timezone to date histogram aggregations for TSVB {pull}13378[#13378]
* [Fix for #13471] Closes #13471 - Change split behavior of gauges and metrics vis {pull}13583[#13583]
* [Fix for #13244] [visualize spy] Pull index title instead of id {pull}13254[#13254]
* [Fix for #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fix for #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fix for #12227] Fix discover sidebar Visualize button for geo_point fields {pull}13539[#13539]
* [Fix for #12827] removes :filters from label {pull}12962[#12962]
* [Fix for #12983] resize was not detected correctly {pull}13239[#13239]
* Clamp the centroid to stay within the box boundaries {pull}13581[#13581]
* [Fix for #13551] fix heatmap sizing on dashboard {pull}13636[#13636]
* ensure editor mode propagates correctly {pull}13355[#13355]
* [Fix for #13517] remove geo_bounds agg from visualizations {pull}13536[#13536]
* [Fix for #13424] Exclude filter agg from visualizations {pull}13680[#13680]
* [Fix for #13572] Show a warning for non accessible charts for screen readers {pull}13573[#13573]

[[release-notes-6.0.0-beta1]]
== {kib} 6.0.0-beta1

[float]
=== Breaking Changes

Management::
* [indexPatterns] remove support for time patterns {pull}12158[#12158]
  - - Removes ability to create index patterns based on time patterns/intervals  - Adds a warning that informs users when they are using an index pattern that is now unsupported (disabled by default until #10442 is done, #12322)  - Does not address editing/remapping index patterns, see last task in #12242

Operations::
* Updates to status API, re-align status page {pull}10180[#10180]
* [Fix for #10181] Revert same port http -> https redirect {pull}10930[#10930]
  - Kibana 5.x redirected requests from http to https on the same port if TLS was configured. Starting in Kibana 6.0.0 Kibana no longer redirects basic http traffic to https.

Platform::
* [Fix for #12012] Fail to start if settings include unknown keys {pull}12554[#12554]
  - When a config file includes invalid keys or values, Kibana usually logs a message describing the issue and fails to start. There has been an exception to this rule since 4.2 that allowed top-level keys to be unknown/misspelled and only caused a warning to be logged. That exception has been removed and now any unknown or misspelled config key passed to Kibana (via the config file or command line flags) will prevent it from starting.
* Remove the es_admin proxy {pull}13000[#13000]
* Restrict ES data proxy to msearch and search {pull}13020[#13020]

Reporting::
* When {security} is enabled, reports will only be accessible to the user that created them.
* When {security} is enabled, user authorization is controlled by the
`xpack.reporting.roles.allow` setting in the `kibana.yml` which defaults to
`['reporting_user']`. Users will no longer have access to the underlying {reporting}
indices in {es} when assigned to the built-in `reporting_user` role. If using
custom reporting roles, the privileges to the indices will need to be removed, and the
role will need to be added to the `xpack-reporting.roles.allow` setting.

Visualization::
* [Fix for #10907] allows more flexible timelion queries {pull}10961[#10961]

[float]
=== New Features

Discover::
* Implement new Kibana query language {pull}12624[#12624]
  - This PR adds a new experimental query language to Kibana. The new language is turned off by default but can be enabled in the Management > Advanced Settings via the search:queryLanguage:switcher:enable option. Changing this setting to true will add a language selector to the query bar that allows users to choose the new language for their query. Details of the new query language can be found in the issue description (#12282).

Sharing::
* Full screen mode implementation for dashboard {pull}12265[#12265]
  - You can now enter full screen mode when viewing a dashboard. This hides the Chrome and the top nav bar.  If you have any filters applied, you'll see the filter bar, otherwise that will be hidden as well.  To exit full screen mode, hover over and click the Kibana button on the lower left side of the page, or simple press the ESC key.

Visualization::
* Visualize Refactor {pull}11786[#11786]
  - When creating new visualizations, developers are no longer restricted to using just Angular as a rendering technology. The changes now also enables developers to create custom editors that do not conform to the current sidebar-layout. Commonly used functionality - such as access to the query bar or timefilter - is now also exposed on the visualization object. This avoids the need to import individual modules from inside Kibana. These changes are a first step in a longer term effort to provide a robust long-lived programming interface for building visualizations in Kibana.

[float]
=== Enhancements

Design::
* We'd like to extend a special thanks to Arpad Popradi for his contributions to the UI Framework.
* [UI Framework] Reactify menu {pull}12135[#12135]
* Adding for and id attributes to labels and form elements {pull}12215[#12215]
* [UI Framework] Reactify kuiEvent and related CSS components (#12226) {pull}12228[#12228]
* [UI Framework] Reactify actionItem {pull}12142[#12142]
* [UI Framework] Reactify kuiCollapseButton {pull}12225[#12225]
* [UI Framework] Reactify kuiFieldGroup and related CSS components {pull}12260[#12260]
* [UI Framework] Update LocalNav examples to use tabIndex instead of tabindex, to eliminate React console warnings. {pull}12284[#12284]
* [UI Framework] Reactify kuiCard and related CSS components {pull}12197[#12197]
* [UI Framework] Reactify kuiBar {pull}12167[#12167]
* [UI Framework] Reactify kuiGallery and related CSS components {pull}12277[#12277]
* [UI Framework] Fix examples of Table component with ToolBar. {pull}12326[#12326]
* [UI Framework] Improve Warning Button contrast {pull}12327[#12327]
* [UI Framework] Reactify kuiHeaderBar and related CSS components {pull}12280[#12280]
* [UI Framework] Define consistent default, small, and wide sizing for form fields, and support them within ExpressionItems. {pull}12190[#12190]
* [UI Framework] Order UI Framework React component exports to be alphabetical {pull}12526[#12526]
* [UI Framework] Reactify kuiTabs and related CSS components {pull}12302[#12302]
* Replace brand-danger color with new global red color. {pull}12654[#12654]
* Make ui-select appearance match other inputs. {pull}12652[#12652]
* [UI Framework] remove check for ng-untouched class from formControlInvalid mixin {pull}12153[#12153]
* [UI Framework] reactify prompt for items {pull}12151[#12151]
* [UI Framework] Allow custom placeholder for Tool Bar Search Box {pull}12959[#12959]
* Palette swap for accessibility / kibana 6 {pull}12085[#12085]
  - We re-skinned a decent portion of Kibana to be mostly AA accessibility compatible in regards to coloring of major navigation elements.
* [Design] Use alpha logo, retain branding in fullscreen mode {pull}12735[#12735]
* [Fix for #12622] [Design] Update favicons {pull}12774[#12774]

Dev Tools::
* Respects ES customHeaders config for Console {pull}13033[#13033]

Discover::
* Accessible sort buttons {pull}12217[#12217]
* [Accessibility] Avoid empty th in doc-table header row {pull}12364[#12364]
  - The discover document table header cells provide appropriate hints to screen-readers.
* [Accessibility] Add button to skip past the discover doc table {pull}12539[#12539]
  - The new "Skip to bottom"-button in Discover is invisible unless focused. When activated it displays all remaining rows that were already loaded and focuses an anchor located below the table.
* Timepicker on the right {pull}11980[#11980]

Management::
* Uses SavedObjectsClient for UI Settings {pull}12747[#12747]
* [Management] Provide a way to fetch indices and template index patterns {pull}12200[#12200]
* [Management] More universal solution for fetching indices and aliases {pull}12405[#12405]
* [Management] Provide a way to fetch index pattern titles {pull}13030[#13030]
  - This PR adds another method to the indexPatterns service to fetch index patterns titles. Since the code was nearly identical to how index pattern ids are fetched, I decided to slightly refactor the function to accept a parameter for which property to fetch from the index pattern. I've updated all usages to the new approach.
* Add breadcrumb-page-title to management-app {pull}12765[#12765]
  - The bread-crumbs component allows for the consumer to pass in a page-title value which is appended as the final breadcrumb in the chain. This PR adds a scope argument to the management-app to take advantage of it.

Operations::
* Update mappings for kibana index {pull}9280[#9280]
* Saved objects compatibility layer {pull}12648[#12648]
* Support v6 mappings for saved objects import/export {pull}12792[#12792]
* Use single ES document type {pull}12794[#12794]
  - Starting in Elasticsearch 6.0, you are no longer able to create new indices with multiple index types. To accomplish the same effect as index types, a new type field was added to identify the document and the value mapped under the index to allow for strict mapping.
* Add eslint import resolution {pull}12025[#12025]
* [eslint] Ignore ui_framework/doc_site/build {pull}12400[#12400]
* [logging] Downgrade hapi connection errors when connecting with the w… {pull}11209[#11209]
* [git] ignore extra files in the root config/ directory {pull}9296[#9296]
* upgrade makelogs {pull}9295[#9295]
* [Fix for #9436] [optimizer] remove support for .jsx extension {pull}12712[#12712]
* [elasticsearch/migrateConfig] use server.savedObjectsClientFactory() {pull}12767[#12767]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* Sets ES mapping to single_type=false {pull}11451[#11451]
* Adds bulk_get to SavedObjects {pull}12426[#12426]
* Uses SavedObjects API in Courier Saved Object {pull}12407[#12407]

Platform::
* Use SavedObjectsClient for Courier Index Pattern {pull}12719[#12719]
* Document merge conflict resolution process in CONTRIBUTING.md. {pull}12212[#12212]
* Update files_to_commit to find renamed files. {pull}12423[#12423]
* Remove client-side management of Kibana index mappings {pull}12820[#12820]
* Uses uuid for auto-generated ids and prepends type (#12834) {pull}12877[#12877]
* Use node instead of webpack config for jest {pull}12974[#12974]
* add api tag to api routes {pull}12948[#12948]
* Move Jest config to json {pull}12402[#12402]
* [uiSettings] support defining settings with uiExports {pull}12250[#12250]
  - - define a uiExports.uiSettingDefaults key your plugin definition to add uiSettingDefaults - uiSettingDefaults must be unique. If a key is already defined elsewhere then the server will not start. - defined settings will display in the advanced settings editor, along with the intended default value and description - the REST API is identical to before - the browser API is identical to before - defaults for timelion have been extracted to the timelion plugin definition and the existing defaults are defined in the kibana plugin definition
* Refactor commaList filter logic into common util {pull}12553[#12553]
* [kbnServer/extensions] formalize request factories with helper {pull}12697[#12697]
* Allow plugins to turn off the “link to last URL” navigation helper {pull}13044[#13044]

Sharing::
* Uses SavedObjectsClient for Short URL Lookup {pull}12787[#12787]
* Stats API {pull}11992[#11992]
  - We introduced a new api endpoint at api/stats which displays counts of saved objects in your kibana index: {"dashboard":{"total":1},"visualization":{"total":3},"search":{"total":1},"index_pattern":{"total":1},"index":".kibana"}
* Add new react color picker to ui framework with tests {pull}12245[#12245]
* Add label and clear link to color picker {pull}12422[#12422]
* Expose the variables for dynamically building doc links {pull}12513[#12513]
* Reactify stateless table components {pull}12349[#12349]

Other::
* ES Healthcheck v6 mapping compatibility {pull}12714[#12714]
* Remove field_stats pre-flight option for index patterns {pull}12814[#12814]
* Configurable custom response headers for server {pull}13045[#13045]

Visualization::
* Fix ui-select error border color and placeholder font color. {pull}12411[#12411]
* Fix appearance of error indicator in Visualize sidebar.  {pull}12410[#12410]
* Adding ability to configure grid for TSVB {pull}12385[#12385]
* Adding option for controlling if last bucket is dropped for TSVB {pull}12379[#12379]
  - This PR creates an option in "Panel Options" and the metric index pattern override to allow the user to control if the last bucket should be dropped. By default TSVB will drop the last bucket since most of the time it's incomplete. This also changes the method for dropping the last bucket to a more reliable method.
* Fixes #12602 - Change TSVB Fields API to use fieldCaps API {pull}12611[#12611]
* [Fix for #11193] hide current time marker when the timespan doesn't include the current time {pull}12266[#12266]
  - Only display current time marker on  a visualization when the x-axis extent includes the current time.
* [Fix for #7040] Add github-markdown.css to markdown visualization {pull}12377[#12377]
* Filter geohash_grid aggregation to map view box with collar {pull}12806[#12806]
* add font size control to markdown visualization {pull}12860[#12860]
* [vis/resizeChecker] swap out implemenation with ResizeObserver polyfill {pull}9439[#9439]
* Add imports for SavedObjectRegistryProvider.register, fixing Timelion {pull}12844[#12844]
* [Fix for #7572] add polygon drawing tool {pull}11578[#11578]
  - On a coordinate map, users can now make a selection on the map by drawing a freehand polygon. Just like the earlier boundary selection, this adds a boundary filter to the filter bar.
* Visualize refactor (bis) {pull}12715[#12715]

[float]
=== Bug Fixes

Design::
* [UI Framework] Fix disappearing borders for LocalNav search select. {pull}12803[#12803]
* [Accessibility] Make kbn_accessible_click part of autoload/all  {pull}13299[#13299]

Discover::
* Fix call to suggestions API to correctly use index pattern title {pull}12917[#12917]
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]

Management::
* [Fix for #12728] Ensure conflicted fields can be searchable and/or aggregatable {pull}13070[#13070]
* [Fix for #13186] [Management] Update saved objects client usage to `attributes` instead of `_source` {pull}13223[#13223]
* [Fix for #12249] Fixes issue #12249 {pull}12254[#12254]
* Refine getIndices() to return an empty array if there are no matching indices. {pull}12659[#12659]
* Remove translations from management section {pull}13049[#13049]
* [Fix for #9352] Change mapping of index-pattern fields to text {pull}9353[#9353]

Operations::
* Remove `@elastic` folder from `packages/` {pull}13089[#13089]
* Fix jsonify license check (#12615) {pull}12619[#12619]
* Use es6 exports, replace module.exports {pull}12084[#12084]
* [es archiver] fix error causes when requesting multiple index feature… {pull}12473[#12473]
* Bump makelogs to 4.0.2 {pull}13007[#13007]

Platform::
* Update HTML style guide with rule for camel casing attribute values. {pull}11653[#11653]
* Add title and tooltip accessibility information to HTML style guide. {pull}11655[#11655]
* [Fix for #12580] Update HTML style guide with rule about putting nested elements on multiple lines. {pull}12812[#12812]
* Remove Version Check for Dashboard Import API {pull}12476[#12476]
* Toast Notification should handle connection failed {pull}12609[#12609]
* [Fix for #12047] [uiSettings] make service request based {pull}12243[#12243]
  - - removes server.uiSettings() (throws error with instructions)  - Adds request.getUiSettingsService() which returns a unique instance of UiSettingsService per request  - Methods on UiSettingsService no longer require a request object  - Adds server.uiSettingsServiceFactory(options) which can be used to create an instance of UiSettingsService with a custom callCluster() function
* [Fix for #12436] Fix stats permissions and use underscore instead of dash {pull}12478[#12478]
* [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]

Sharing::
* Restoring the dashboard-grid padding to appease Gridster {pull}12613[#12613]
* [Fix for #11857] Accessibility: Sharing UI - associate labels with controls {pull}12143[#12143]
* [Fix for #12600] Fix search issue on listing page + tests {pull}12618[#12618]
* [Fix for #11860] Make add edit buttons accessible {pull}12320[#12320]
* Need to trigger renderComplete when there are no results {pull}12380[#12380]
* [Fix for #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]

Other::
* Fixes #12757 - Fixing field fetching for index patterns for TSVB {pull}12771[#12771]
* Limit scripted fields to painless and expression langs {pull}9172[#9172]
* update logstash data and mappings for single type {pull}13001[#13001]
* [Fix for #13032] TEST - Fix flaky map functional test {pull}13039[#13039]

Visualization::
* Fixes #11721 - Fix bug with axis updating when data format is changed in TSVB {pull}12386[#12386]
  - Axes in the Time Series Visual Builder now correctly update when changing a data formatter.
* Fixes #12763 - Add show_grid to the default vis structure for TSVB {pull}12769[#12769]
* Fixes #12777 - Add onBrush to Visualization component for TSVB {pull}12778[#12778]
* [Fix for #12802, #12762] Fix TSVB Visualizations to honor darkTheme {pull}12804[#12804]
* [Fix for #8076] Scaled date format for date histogram aggregation {pull}12384[#12384]
  - Format date_histogram aggregation bucket labels with format specified in Advanced Setting's "dateFormat:scaled"
* [Fix for #3230] Make vertical bar chart gutter widths consistent {pull}12264[#12264]
  - Histogram intervals are not always equal widths (monthly time intervals). Keeping gutter widths consistent and reducing the bar width provides a more visually appealing bar chart.
* [Fix for #3173] Date histogram brush - add range filter when field is not index pattern time field. {pull}12286[#12286]
* Remove event listener for resizeChecker when directive is destroyed {pull}12734[#12734]
* Date histogram axis label not getting updated when time interval changes {pull}12815[#12815]
* [Fix for #9530] Don't declare empty properties in Timelion's bool query {pull}9573[#9573]
* [Fix for #12782] visualize should send ready:vis event when done {pull}12796[#12796]
* [Fix for #11490] fix range agg label on heatmap y axis {pull}12754[#12754]
* [Fix for #12811] reload visualization on auto refresh trigger {pull}12823[#12823]
* [Fix for #12882] changing query should update url state {pull}12912[#12912]
* vis with saved search should not show query and filter panels {pull}12911[#12911]
* [Fix for #12925] analyze wildcard should not be part of default query {pull}12938[#12938]
* [Fix for #12838] fix gauge field formatters {pull}12913[#12913]
  - metric/goal/gauge now correctly respect the fieldFormatters when multiple metrics are defined.
* [Fix for #12940] query queue should be cleared on failure {pull}12942[#12942]
* Handle date histogram scaling for table vis and avg_buckets metric {pull}11929[#11929]
* [Fix for #12724] by default metric should not define color {pull}12993[#12993]
* [Fix for #11414] remove default WMS settings {pull}11573[#11573]
* ensure spy panel obscures underlying visualization {pull}12502[#12502]
* [Fix for #12497] allows to order percentiles freely {pull}12498[#12498]
* [Fix for #12732] Should only run visualization on Discover page when the indexpattern is time based {pull}12741[#12741]
* reload on global fetch event and emit vis:ready {pull}12805[#12805]
* Use the customMetric's formatter for pipeline aggregations {pull}11933[#11933]
* [Fix for #12919] Fix excessive redraw {pull}12931[#12931]
* [Fix for #12220] Should only fit on shapes that are part of the result {pull}12881[#12881]
* [Fix for #12172] Save layer setting in the region map UI {pull}12956[#12956]
* [Fix for #12189] Region map should respect saved center and zoom {pull}12883[#12883]
* [Fix for #13181, elastic/beats#4777] Add Checks to Dashboard Context {pull}13182[#13182]
* [Fix for #13244] [visualize spy] Pull index title instead of id {pull}13254[#13254]
* [Fix for #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fix for #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fix for #12827] removes :filters from label {pull}12962[#12962]
* [Fix for #12983] resize was not detected correctly {pull}13239[#13239]
* [Fix for #13011] Should respect pinned filters {pull}13019[#13019]
* [Fix for #13255] Ensure we are working with data-series to avoid tooltip errors {pull}13266[#13266]
* [Fix for #12724] by default metric should not define color {pull}12993[#12993]
* [Fix for #12391] in percentage mode tooltip should also show percentages {pull}13217[#13217]
  - Tooltips now correctly display the percentage-value in area charts where the Y-Axis is formatted in percentage mode.
* [Fix for #12963] Exclude stacktrace from error response of Timelion backend {pull}12973[#12973]
  - the Timelion backend no longer includes the stacktrace as part of the server response. This stacktrace is now logged to the server console.
* Visualization accessibility issues {pull}13226[#13226]

[[release-notes-6.0.0-alpha2]]
== {kib} 6.0.0-alpha2

[float]
=== Breaking Changes

Core::
* Remove legacy pre-4.2 configurations {pull}12013[#12013]
* NODE_ENV no longer has an impact on Kibana {pull}12010[#12010]
* Only support 64 bit operating systems {pull}11941[#11941]

Watcher::
* The watch `_status` field has been renamed to `status`, as underscores in
field names will not be allowed.

[float]
=== New Features

Core::
* Getting started page {pull}11805[#11805]

Dashboard::
* Clone dashboard from view mode {pull}10925[#10925]

Reporting::
* Enabled export as CSV.

Security::
* Added a View Dashboards Only setting to the roles section under
Security management. If a user is assigned a role that has this setting
enabled, when they access Kibana it presents Dashboard Only mode.

Visualize::
* Region map {pull}10937[#10937]
* Gauge chart {pull}10336[#10336]

[float]
=== Enhancements

Core::
* Add new UI setting to control the amount of items in listing pages {pull}11674[#11674]

Discover::
* Apply filters to the event context view {pull}11466[#11466]

Machine Learning::
* Added a Datefeed Preview tab to expanded rows in the jobs list under
Job Management. This displays the JSON response from the preview endpoint.

Timelion::
* Support multiline Timelion queries {pull}11972[#11972]

Time series visual builder::
* Help text for writing painless scripts {pull}11936[#11936]
* Toggle for automatically applying changes to visualization {pull}11460[#11460]

Timepicker::
* Improve accessibility of the datepicker {pull}11753[#11753]

Watcher::
* Watcher indices no longer use multiple types.

[float]
=== Bug Fixes

Graph::
* Reinstated `_xpack/graph/_explore` as the correct graph endpoint.
`_xpack/_graph/_explore` is deprecated and will be removed in v7.0.

Timelion::
* Timelion tutorial now persists until you close it {pull}11962[#11962]

Time series visual builder::
* No longer trigger error in certain circumstances when using using percentiles {pull}11772[#11772]

Visualize::
* Disable save button if visualization is dirty {pull}11576[#11576]

[[release-notes-6.0.0-alpha1]]
== {kib} 6.0.0-alpha1

[float]
=== Breaking Changes

Watcher::
* The built-in HTTP client used in webhooks, the http input and the http email attachment has been replaced.
This results in the need to always escape all parts of an URL.
* The new built-in HTTP client also enforces a maximum request size, which defaults to 10mb.

[float]
=== Enhancements

Core::
* Deprecate Bootstrap buttons {pull}11352[#11352]
* Fix missing border of PaginatedTable rows in Firefox {pull}11452[#11452]
* Reinstate a few Bootstrap btn classes to support angular-ui-select. {pull}11569[#11569]
* Remove Bootstrap btn classes. {pull}11353[#11353]
* [UI Framework] Add AssistedInput. {pull}11343[#11343]
* [UI Framework] Add example of disabled kuiSelect. {pull}11345[#11345]
* [UI Framework] Add example of spinner Icon. {pull}11424[#11424]
* [UI Framework] Add kuiButton--fullWidth kuiButton--small, and kuiButtonGroup--fullWidth modifiers. {pull}11365[#11365]
* [UI Framework] Add support for dark theme links. {pull}11344[#11344]
* [UI Framework] Add support for selects and secondary inputs to LocalNavSearch component of UI Framework. {pull}11287[#11287]
* [UI Framework] Apply elastic.co look and feel to UI Framework docs site. {pull}11174[#11174]
* [UI Framework] Fix appearance of some form components in Firefox {pull}11589[#11589]
* [UI Framework] Make CardGroup split apart by default. Add kuiCardGroup--united modifier. {pull}11580[#11580]
* [UI Framework] Vertical align children in a FieldGroup. {pull}11374[#11374]
* Add small text input to UI framework {pull}11354[#11354]
* [UI Framework] Add uiFramework:build task. {pull}11402[#11402]
* Updates to status API, re-align status page {pull}10180[#10180]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* Sets ES mapping to single_type=false {pull}11451[#11451]

Dashboard::
* Improve Dashboard screen-reader accessibility. {pull}11600[#11600]
* Update angular-bootstrap DatePicker with UI Framework classes. {pull}11378[#11378]
* Finish loading a dashboard even if some visualizations throw errors {pull}11324[#11324]
* React search box tool bar {pull}10821[#10821]
* Don't kill an entire dashboard because of one bad request {pull}11337[#11337]
* Add back dashboard descriptions {pull}11552[#11552]
* Hide the second toast when adding a new visualization straight from dashboard {pull}11621[#11621]

Dev Tools::
* Adding autocomplete rules for reindex API to Console {pull}10150[#10150]
* minimum_number_should_match was deprecated {pull}11316[#11316]

Discover::
* Add ignore_unmapped to geo filters to prevent exceptions {pull}11461[#11461]
* Create CollapseButton component class to standardize appearance of this button. {pull}11462[#11462]
* Migrate deprecated match query syntax {pull}11554[#11554]
* Remove the _source field toggle button which was accidentally reinstated {pull}11485[#11485]
* Search bar drop-down for managing filters {pull}10976[#10976]

Management::
* Convert Index Pattern Creation form UI to use UI Framework components. {pull}11419[#11419]
* Convert ScriptedFieldsTable and SourceFiltersTable to UI Framework components. {pull}11401[#11401]
* Removes the "Index contains time-based events" checkbox {pull}11409[#11409]
* Update Settings page with UI Framework components. {pull}11272[#11272]
* Report shard failures in the field_capabilities response {pull}11450[#11450]

Visualize::
* Fix spelling in time series visual builder {pull}11212[#11212]
* Adding label templates to legend keys for TSVB {pull}11266[#11266]
* Fix missing icons in Visualize listing. {pull}11243[#11243]
* Update illegible vis type icons with legible ones. {pull}11317[#11317]
* Fixing the fields for the numbers for percentile aggs for Time Series Visual Builder {pull}11169[#11169]
* using ui-select for field selection in visualize {pull}10998[#10998]
* add polygon drawing tool {pull}11578[#11578]
* Fix timelion's flot when neither thor nor monitoring are installed {pull}10412[#10412]

[float]
=== Bug Fixes

Core::
* [Fix for #4964] Disable dynamic/Implement static mappings {pull}10638[#10638]
* Fix visualize sort icon bug {pull}11568[#11568]

Visualize::
* Fixes #11232 - Add option for panel and global filters to annotations for TSVB {pull}11260[#11260]
* Fixes #11289 - Change top_n to not use split colors for TSVB {pull}11342[#11342]
* [Fix for #10907] allows more flexible timelion queries {pull}10961[#10961]
* [Fix for #10292] fixing heatmap black squares {pull}11489[#11489]
* [Fix for #4599] Add "Sum of series in legend" option {pull}7970[#7970]
* [Fix for #9053] [timelion/fit/carry] do nothing if there is not any data {pull}9054[#9054]
* [Fix for #8763] [vislib/tilemap/heatmap] scale the heatmap maxZoom with map zoom {pull}8765[#8765]
* [Fix for #9184] fixes error with custom interval in datetime aggregation {pull}9427[#9427]

Watcher::
* The HTTP client respects timeouts now and does not get stuck leading to stuck watches.
