[[release-notes]]
= {kib} Release Notes
++++
<titleabbrev>Release Notes</titleabbrev>
++++

[partintro]
--
// To add a release, copy and paste the template text
// and add a link to the new section. Note that release subheads must
// be floated and sections cannot be empty.

// Use these for links to issue and pulls. Note issues and pulls redirect one to
// each other on Github, so don't worry too much on using the right prefix.
:issue: https://github.com/elastic/kibana/issues/
:pull: https://github.com/elastic/kibana/pull/

This section summarizes the changes in each release.

* <<release-notes-6.3.1>>
* <<release-notes-6.3.0>>
* <<release-notes-6.2.4>>
* <<release-notes-6.2.3>>
* <<release-notes-6.2.2>>
* <<release-notes-6.2.1>>
* <<release-notes-6.2.0>>
* <<release-notes-6.1.4>>
* <<release-notes-6.1.3>>
* <<release-notes-6.1.2>>
* <<release-notes-6.1.1>>
* <<release-notes-6.1.0>>
* <<release-notes-6.0.1>>
* <<release-notes-6.0.0>>
* <<release-notes-6.0.0-rc2>>
* <<release-notes-6.0.0-rc1>>
* <<release-notes-6.0.0-beta2>>
* <<release-notes-6.0.0-beta1>>
* <<release-notes-6.0.0-alpha2>>
* <<release-notes-6.0.0-alpha1>>

--

////
// To add a release, copy and paste the following text,  uncomment the relevant
// sections, and add a link to the new section in the list of releases at the
// top of the page. Note that release subheads must be floated and sections
// cannot be empty.
// TEMPLATE:

// [[release-notes-n.n.n]]
// == {kib} n.n.n

//[float]
//[[breaking-n.n.n]]
//=== Breaking Changes

//[float]
//=== Deprecations

//[float]
//=== New Features

//[float]
//=== Enhancements

//[float]
//=== Bug Fixes

//[float]
//=== Regressions

//[float]
//=== Known Issues
////

[[release-notes-6.3.1]]
== {kib} 6.3.1

[float]
[[enhancement-6.3.1]]
=== Enhancements
Management::
* [Fixes #19475] Replaces the `watch-type-select` directive in Watcher 
with buttons {pull}19782[#19782]
+
[role="screenshot"]
image::images/management-watcher-2-buttons.png[]

Monitoring::
* Improves the experience of enabling monitoring collection when the page is set 
to an absolute time range {pull}19451[#19451]

Operations::
* Bumps node to version 8.11.3 {pull}19861[#19861]

[float]
[[bug-6.3.1]]
=== Bug fixes

Machine Learning::
* Fixes issues when watching the scope of single metric viewer 
data {pull}19029[#19029]

Management::
* [Fixes #19617] Shows internal indices if *Include system indices* is toggled
on and no other indices exist {pull}19618[#19618]
* [Fixes #19483] Adds `aria-labelledby` to index details flyout to tell 
screen reader what to announce when the flyout is opened {pull}19776[#19776] 
* [Fixes #19048] Adds heading hierarchy to Management landing page and `role='group'`
to panels to aid screen reader accessibility {pull}19777[#19777]
* [Fixes #19482] Adds `aria-label` to Indices Management search input {pull}19778[#19778]
* [Fixes #19474] Adds `described-by` attribute to `duration-selection` directive
to make children inputs accessible to screen readers {pull}19779[#19779]
* [Fixes #19814] Guards against calling `fieldWildcardMatcher` or `fieldWildcardFilter` 
with undefined {pull}19865[#19865]


Operations::
* Allows the plugin installer to remove an {xpack} plugin if it exists {pull}19327[#19327]
* Changes license checker and generator behavior to only add dev dependencies 
with the `--dev` flag {pull}19626[#19626]

Platform::
* [Fixes #20017] Updates the {xpack} plugin status anytime the license changes
{pull}20018[#20018]
+
When using {xpack}, it was previously possible for {kib} to get stuck in a "red"
state, preventing access to the {kib} applications, if {kib} and {es} were 
started at the same time. We've fixed this issue to ensure that {kib} is always
usable when it's able to talk to {es}.

Sharing::
* [Fixes #19320] Adds `aria-label` to input controls that don't have a
label {pull}19830[#19830]

Visualization::
* [Fixes #19191] Shows tooltip when string and integer fields are used 
for joining region maps to {es} results {pull}19447[#19447]




[[release-notes-6.3.0]]
== {kib} 6.3.0

[float]
[[breaking-6.3.0]]
=== Breaking Changes

Operations::
+
As of Kibana 6.3.0, X-Pack is bundled by default in the default distribution. 
Existing X-Pack users should remove the plugin before upgrading.
+
There is a known issue preventing `bin/kibana-plugin` from removing the pre-existing 
plugin after upgrading. This will be resolved in 6.3.1. If you happen to encounter this issue, 
there are a few options:
+
* **Uninstall the plugin before upgrading:** `bin/kibana-plugin remove x-pack`
* **Uninstall the plugin after upgrading:** Manually delete the `plugins/x-pack` directory.

Platform::
* Renames saved objects bulk_get and find endpoints {pull}17512[#17512]
+
To support sending larger and more expressive queries to the Saved Objects find
API, we added a POST endpoint for find and therefore needed a way to disambiguate
the find API from from the POST API used to create Saved Objects.
+
Starting in {kib} 6.3, endpoints that are not simple CRUD operations on a single
object will be named and their name will start with an underscore. For example,
{es} `GET /api/saved_objects` is now `GET /api/saved_objects/_find`,
`GET /api/saved_objects/{type}` is now `GET /api/saved_objects/_find?type={type}`,
and `GET /api/saved_objects/bulk_get` is now `GET /api/saved_objects/_bulk_get`.

[float]
=== New Features

For an overview of the features that were added in 6.3 and how the user experience
improved, see <<release-highlights-6.3.0, 6.3.0 Release Highlights>>.

[float]
=== Enhancements

Machine learning::
* You can now use {ref}/modules-cross-cluster-search.html[cross cluster search]
in the {ml} features in {kib}. If you have configured a cross cluster index
pattern in {kib}, you can use that index pattern when you create jobs.

Platform::
* Angular was upgraded to version 1.6.9 {pull}17677[#17677]


[float]
=== Bug Fixes

Accessibility::
* [Fixes #19009] Adds alt text to the icons on the home page for accessibility
{pull}19083[#19083]

APM::
* Fixes links in APM {pull}19391[#19391]

Machine Learning::
* [Fixes #18722] Increases the calculated model memory limit {pull}18723[#18723]

Management::
* [Fixes #17147] Always sends a comma delimited index to support commas in
index patterns {pull}17173[#17173]
* Fixes issues with autocomplete and bucket aggregations {pull}17695[#17695]
* Removes the unsupported type from autocomplete options {pull}17694[#17694]
* Fixes an issue with autocomplete in the console {pull}17678[#17678]
+
Endpoint definitions are expected to have unique names, and the code was using
the same name for endpoints with overloaded HTTP verb semantics. This code fixes
those names by adding a timestamp.

Monitoring::
* Changes the Advanced Node page for {es} to recognize the `write` threadpool
{pull}18147[#18147]

Operations::
* [Fixes #6688] Adds support for environment variable injection in the
`kibana.yml` file {pull}16988[#16988]

Security::
* Preserves boom error headers for index pattern exceptions {pull}17725[#17725]
+
This fix resolves the issue with the index pattern APIs not responding with
WWW-Authenticate headers on 401s. This caused basic authentication via {kib} to not
work properly in some configurations.

Sharing::
* [Fixes #17611] Sets a minimum width on the range slider control
{pull}17620[#17620]
* [Fixes #17657] Allows wrapping of the recently viewed items on the {kib} home
page {pull}18726[#18726]
* [Fixes #18915] Fixes the arrows in the input control so that the up icon moves
the control up and the down icon moves the control down {pull}18929[#18929]
* [Fixes #18882] Disables an input control when an index pattern no longer exists
{pull}18931[#18931]
* [Fixes #19252] Fixes copy to the clipboard in Internet Explorer
{pull}19281[#19281]
* Fixes the date math parser to allow longer expressions {pull}17751[#17751]

Visualization::
*  Updates the `geo_bounds` request to inherit from the visualize search
source so that all application state filters are applied {pull}17727[#17727]
* [Fixes #17839] Normalizes longitudes so that they fall within the acceptable [-180,180]
range {pull}18674[#18674]
* [Fixes #18765] Fixes problem handling precision changes on a coordinate
map when no aggregations are configured {pull}18826[#18826]
* [Fixes #18761] Fixes problem when clicking on a map and no aggregation is
specified {pull}18825[#18825]
* [Fixes #19095] Avoids shard failures when performing `geo_bounding_box` filter
on coordinate maps {pull}19416[#19416]
* [Fixes #17623] Fixes negative unit formatting in Timelion {pull}17624[#17624]
* [Fixes #12408, #14382] Fixes 0 values in percentage mode {pull}15765[#15765]
* [Fixes #17721] Adds proper labeling for pie chart without buckets
{pull}17739[#17739]
* [Fixes #17352] Removes other bucket configuration from significant terms
aggregation {pull}17810[#17810]
* [Fixes #15912] Ensures type is defined and has `postFlightRequest` function
{pull}17809[#17809]
* Bumps Vega lib version to 3.3.1 to fix problem with how the Vega library
manages its dependencies {pull}17829[#17829]

[float]
=== Regressions

Management::

* In 6.2.4, if users edit a watch or a logstash pipeline and navigate away from 
the page without saving, a confirmation modals asks if they want to save the 
changes. In 6.3, the prompt was disabled to fix {pull}19488[#19488] and 
{pull}19608[#19608].


[[release-notes-6.2.4]]
== {kib} 6.2.4

[float]
=== Enhancements

Machine Learning::
* Adds bucket span to the chart labels in the Single Metric Viewer.
* Adds checks for web URLs prior to adding to the links menu in the anomalies
table.

Visualization::
* Upgrade Vega libraries:  `vega-lib` to 3.2.1 and `vega-lite` to 2.3.1
{pull}17314[#17314]

[float]
=== Bug Fixes

Logstash::
* Fixes unhandled rejection error in {kib} server log.
* Fixes Pipeline Viewer to correctly format percentages.

Machine Learning::
* Fixes the formatting of HTML characters so that text is rendered correctly.
* Formats the field name in the tooltip for swimlane labels.
* Fixes the formatting of partition titles in multi-metric and population job
wizards.

Management::
* Adds better support for discarding results of older queries {pull}17148[#17148]

Monitoring::
* Fixes some {kib} metrics which are not derivatives.
* Fixes the handing of window resizing to more smoothly resize charts whenever
the window size changes.

Platform::
* Fixes an issue with the numeric formatter to handle small exponential numbers {pull}17508[#17508]
* Fixes deprecation logging warnings {pull}17439[#17439]

Visualization::
* Fixes map zoom settings {pull}17367[#17367]
* Enables Option change to show on map {pull}17405[#17405]
* Adds support for percentiles and percentile ranks to metrics visualizations {pull}17243[#17243]

[[release-notes-6.2.3]]
== {kib} 6.2.3

[float]
=== Known Issues

{pull}17139[#17139] Cross cluster search index pattern won't go to next step.


[[release-notes-6.2.2]]
== {kib} 6.2.2

[float]
=== Bug Fixes

Design::
* [Fixes #4475] Removing flex-basis: 0 to make items size properly in IE11 {pull}16557[#16557]

Machine Learning::
* Fixed issue where jobs created by the data recognizer used the default job
groups instead of the specified job groups.
* Added leading slashes to calendar endpoints to address problems using calendars
in {kib} on Cloud and behind proxies.
* Fixed a scenario where a "no results found" message was returned in the
*Single Metric Viewer* when an entity contained a special URL character such as
`+`.

Management::
* [Fixes #16304] [Management] Prevent react warnings in index pattern creation {pull}16520[#16520]

Platform::
* Destroying socket when we get a clientError {pull}16700[#16700]

Security::
* Enabled users that have the `kibana_dashboard_only_user` role to change their
passwords in {kib}. For more information, see <<xpack-dashboard-only-mode>>.

[[release-notes-6.2.1]]
== {kib} 6.2.1

There were no changes for this release.

[[release-notes-6.2.0]]
== {kib} 6.2.0

[float]
=== New Features

APM::
* The Elastic APM is generally available as part of the 6.2.0 release of the
Elastic Stack. For more information about the APM functionality in {kib}, see
<<xpack-apm>>.

Machine Learning::
* Added the ability to create
{stack-ov}/ml-calendars.html[calendars and scheduled events].

Monitoring::
* Added monitoring information for Beats in {kib}. See <<beats-page>>.

[float]
=== Enhancements

Discover::
* [Fixes #15642] Introduce simple kibana query language {pull}15646[#15646]

Machine Learning::
* Enhanced the creation of custom URLs for existing jobs. When you edit jobs,
there is a new *Custom URLs* tab, which provides options for creating a link to
a {kib} dashboard or a different URL.
// Repo: x-pack-kibana
// Pull: 4130

Management::
* Renamed the *Save* button *Save &amp; Deploy*. This change makes it clearer
that when you click the button the pipeline is saved to an {es} index and
deployed to any Logstash instances that are configured to run it.
// Repo: x-pack-kibana
// Pull: 3599
* Added the ability to clone pipelines in {kib}. When you click the *Clone*
button, data from the original pipeline is used to pre-populate the new pipeline
form.
// Repo: x-pack-kibana
// Pull: 3786
* Enabled auto-sizing of the pipeline configuration text area. The text area
automatically grows or shrinks as you type out a pipeline definition.
// Repo: x-pack-kibana
// Pull: 4026
* [Fixes #9228, #8983] add support for number format internationalization {pull}14019[#14019]
* [Fixes #15922] [Management] Index pattern step in React! {pull}15936[#15936]
* Advanced Settings - Image Input {pull}15342[#15342]

Monitoring::
* Added resolved alerts to the list of alerts that are visible during a selected
time frame in {kib}.
* Added the interval size for aggregated metrics in the tooltip for each chart.
* Improved error handling such that generic `500` errors provide better messages.
* Redesigned the Logstash Pipelines view to provide more actionable information
in a tabular format.
* Added a basic detail drawer to the Logstash Pipeline Viewer. When you click on
any vertex in the Pipeline Viewer, the drawer slides open. It shows basic
information about the vertex that was clicked and any metrics, if available.

Operations::
* Use auto_expand_replicas to stay green on 1 node clusters {pull}15694[#15694]
* Feat: Add config provider to disable state management {pull}15275[#15275]
* [optimizer] More aggressive chunking of common/vendor code {pull}15907[#15907]
  - Improved the build optimize time by more aggressively chunking common code, resulting in the removal of duplicate code. This drastically cuts the build and plugin install time and overall bundle asset size.
* [Fixes #14813] [ui/bundles][optimizer] only use caches when in dev mode {pull}15780[#15780]
* [optimizer] run webpack compilation ASAP (no more laziness) {pull}15795[#15795]

Platform::
* [Fixes #6520] [optimizer] allow http caching for bundles {pull}15880[#15880]
* Make it possible to disable CSRF check for the specified list of paths. {pull}13904[#13904]

Reporting::
* By default, weekly `.reporting` indices created after upgrading to 6.2 use a
single primary shard and have the `auto_expand_replicas: 0-1` setting rather
than a fixed setting of 1 replica. As a result, these indices can have a green
status on single node clusters. There is no impact in multi-node clusters.

Sharing::
* [Fixes #2758] Add advanced setting to control quick ranges {pull}15975[#15975]
* [input controls] Horizontal layout {pull}14918[#14918]
* Kibana Home page - phase two {pull}14749[#14749]
* Add &quot;use time filter&quot; option to input controls {pull}15852[#15852]

Visualization::
* [Fixes #13992] Grab the default index pattern and use it in TSVB {pull}14739[#14739]
  - TSVB now uses Kibana's default index pattern by default.
* [TSVB] Add params._interval to mathjs {pull}14944[#14944]
  - Make the bucket interval available as a parameter.
* [Fixes #13781] [timelion] allow sum, subtract, multiply, divide functions to accept seriesList with multiple series {pull}14891[#14891]
* [Fixes #8953] Add Timelion percentiles aggregation support (#8953) {pull}15154[#15154]
* [Fixes #9845] [timelion] highlight series on legend mouseover {pull}15229[#15229]
* add time to visualization status {pull}15856[#15856]
* few enhancements to default sidebar editor {pull}15619[#15619]
  - Its now possible to resize the sidebar editor and auto apply is possible in markdown visualization.
* [Fixes #1961] other and missing bucket support for terms agg {pull}15525[#15525]
  - 'other' and 'missing' bucket for the terms aggregation resolves #1961
* [Fixes #15146] Refactor and improve Visualize Loader {pull}15157[#15157]
  - Do not use the &lt;visualize&gt; directive anymore to embed a visualization. Use the Visualize Loader instead.
* [Fixes #15153] Use visualize loader for dashboards {pull}15444[#15444]
* Refactor rendering events {pull}15895[#15895]
* Migrating vega_vis from plugin {pull}15014[#15014]


[float]
=== Bug Fixes

Discover::
* display NOT when new filter is negated {pull}15865[#15865]
* [Fixes #15364] Truncate long names in the discover index pattern selection {pull}15510[#15510]
* Add missing discover labels {pull}16030[#16030]

Machine Learning::
* The job selection control now remembers the state of the `Also apply time range`
checkbox, such that the previous selection is restored when the control is
re-opened.
* Fixed issues where lines were drawn over the Y-axis in the event rate charts
for multimetric and population jobs.
* Removed scripted fields from job wizards.
* Added type-ahead filtering to the job group and influencer selection controls
in the job wizards.
* Updated the data preview to use the index pattern or the list of indices that
were selected.
* Disabled the start button for jobs that do not have {dfeeds}.
* Fixed issue where jobs created by the data recognizer used the default job
groups instead of the specified job groups.
* Updated the actual and typical values for anomalies in {kib}, such that they
are formatted according to their magnitude.
* Fixed the handling of anomalies when field values contain backslashes.
* Ensured Anomaly Explorer swimlane rows are sorted by score.
* Disabled the Forecast button for jobs that were created before 6.1.0 and for
jobs that contain an `over_field_name` property.
* Added support for field names with non-alphanumeric characters in the
*Data Visualizer*.
* Fixed problems creating jobs from saved searches that have `exists` filters.

Management::
* [Fixes #16098] [Management] Allow wildcard anywhere in the search query {pull}16109[#16109]
* [Fixes #16192] [Management] Update pager with new props in Index Pattern Creation {pull}16195[#16195]
* [Fixes #15922] Hide caret when indices has no time fields, remove indices object containing unused string {pull}16412[#16412]

Monitoring::
* Added the ability to navigate between the pipeline versions in the Logstash
Pipeline Viewer.
* Updated the Logstash Pipeline Viewer such that you can change the refresh
interval but you cannot select the time range.
* Added Logstash version information back in the node list.
* Improved logging when the {kib} monitoring collectors stop or resume and
downgraded the log level for these log messages to `info`.

Reporting::
* Resolved issue with horizontal metric visualizations being displayed
incorrectly in PDF reports.
* Fixed bug where the title of the Dashboard panels was hidden when creating
PDFs with the preserve layout option.
* Fixed issue with certain characters in the job parameters which caused CSV
reports to fail.
* Resolved issue with preserve layout PDF reports intermittently having blank
visualizations.

Sharing::
* [Fixes #16307] link to dashboards by id instead of title {pull}16319[#16319]

Visualization::
* [Fixes #16349] Fix issue with disabled lab mode {pull}16351[#16351]
* [TSVB] Changing the behaivor of getLastValue to get the actual last value {pull}14919[#14919]
* [TSVB] Stacked series should not contain null values {pull}14923[#14923]
* [Fixes #15273] disable input control when field contains no values in index pattern {pull}15317[#15317]
* Set list-style-type for list items in markdown-body {pull}15827[#15827]
* Visualization render status - pass correct parameters to resize check {pull}15855[#15855]
* fixes angular vis type so it correctly propagates events up to visualize {pull}15629[#15629]
* [Fixes #15427] fixing dot ratio slider {pull}15860[#15860]
  - dot size slider for line chart works again
* fixing log scale error {pull}15984[#15984]
  - log scale now works with empty buckets
* [Fixes #15114] fixing boolean filters {pull}15927[#15927]
* [Fixes #15931, #15656] check if data hash changed instead of stringifying {pull}15988[#15988]
  - performance of visualization rendering is improved
* Remove SVG element styling rules {pull}15906[#15906]
* [Fixes #15553] Fix bug where negative time offsets in visual builder will shift x-axis range {pull}15554[#15554]
* [6.x] Fix maps for reporting (#15272) {pull}15357[#15357]
* Sharing - exposing Dashboard and Visualize title and type {pull}14946[#14946]
* [Fixes #14730] pass bucket size as _interval param to calculation metric script {pull}14731[#14731]
* [Fixes #15672, #14353] Revert Resize and FlotChart components to 6.0 {pull}15717[#15717]
* [Fixes #15501] [TSVB] Fixes #15501 - Change xaxis formatter to honor dateFormat:tz {pull}15512[#15512]
* [TSVB] Make form font-sizes consistent (after EUI upgrade) {pull}15909[#15909]
* Remove MathJS Feature {pull}15652[#15652]
* [TSVB] Add checks for scaledDataFormat and dateFormat in xaxisFormatter {pull}15997[#15997]
* [TSVB] Fix typo is filter ratio path for table visualization {pull}16052[#16052]
* [Fixes #14888] [timelion] provide argument suggestions when argument name not provided {pull}15081[#15081]
* [Fixes #15594] fixes pie chart size to normal if labels are not applied {pull}15641[#15641]
* [Fixes #15818] fixing collapsible side bar editor {pull}15826[#15826]
* [Fixes #15703] refactoring vis uiState {pull}15709[#15709]
* [Fixes #15673] fixes table padding on dashboard {pull}15862[#15862]
* [Fixes #15778] fixing tag cloud and region map click handler {pull}15861[#15861]
* fixes renderComplete in angular vis type {pull}16150[#16150]
* [Fixes #16217] fixing axis title position for firefox {pull}16278[#16278]
* [Fixes #13822] visualize editor should not show if embed is set to true in url {pull}16310[#16310]
* [Fixes #16083] configure Kibana with production endpoint for EMSv3 {pull}16108[#16108]
* [Fixes #13813] Use a width range instead of a fixed width for visualize legends {pull}13818[#13818]
* should always set base layer {pull}16213[#16213]
* Extract lab HTML on dashboard into own file {pull}15546[#15546]
* Remove implementsRenderComplete property {pull}15579[#15579]
* [Fixes #15255] Set uiState to Vis from visualization {pull}15549[#15549]
* [Fixes #15618] Fix broken initial uiState set {pull}15630[#15630]
* [Fixes #15742] Only apply forced max mode when panel is shown {pull}15752[#15752]
* Fix JSON hint styling and accessibility {pull}15890[#15890]
* [Fixes #15712] Fix broken editor styles {pull}15735[#15735]
* [Fixes #15713] Use euiCallOut for experimental banner {pull}15989[#15989]
* Fix some styling issues {pull}16023[#16023]
* Listen to resize events in &lt;visualize&gt; {pull}16048[#16048]
* [Fixes #16216] Prevent rendering into 0 size containers {pull}16287[#16287]
* [Fixes #14331] Add topojson support / EMS v3 support {pull}15361[#15361]

[[release-notes-6.1.4]]
== {kib} 6.1.4

There are no user-facing changes in this release.

[[release-notes-6.1.3]]
== {kib} 6.1.3

[float]
=== Bug Fixes

Machine Learning::
* Improved error messages for forecasts in {kib}.
* Removed forecasts that were not created successfully from the list of
forecasts in {kib}.

Visualization::
* Use textContent and jQuery to set label and title {pull}16178[#16178]

[[release-notes-6.1.2]]
== {kib} 6.1.2

[float]
=== Security Issues

* Kibana versions before 6.1.2 and 5.6.6 but after 5.1.1 had a cross-site scripting (XSS) vulnerability via the colored fields formatter that could allow an attacker to obtain sensitive information from or perform destructive actions on behalf of other Kibana users. CVE ID: CVE-2018-3818

Users should upgrade to Kibana version 6.1.2 or 5.6.6. There are no known workarounds for this issue.

[float]
=== Enhancements

Dev Tools::
* [Fixes #15786] [Console] Adding autocomplete rules for composite agg {pull}15787[#15787]

[float]
=== Bug Fixes

Machine Learning::
* Disabled the ability to create forecasts for jobs that were created before
6.1.0.
* Fixed the **Anomaly Explorer** such that it retains the chosen swim lane
limits when you reload the page.
* Fixed incorrect line positions in the **Single Metric Viewer**. When all data
points had the same value, the Y-axis offset was not calculated correctly and
the line was drawn in the wrong position or was invisible in the line chart.

Monitoring::
* Fixed situations where {kib} was showing the same information for different
clusters in the Logstash Overview.

Platform::
* Update color field formatter {pull}15837[#15837]

Visualization::
* [Fixes #15843] Fix broken loader in 6.1 {pull}15885[#15885]
* [Fixes #15594] fixes pie chart size to normal if labels are not applied {pull}15641[#15641]

Watcher::
* Fixed error that prevented users from creating threshold alerts with email
actions.

[[release-notes-6.1.1]]
== {kib} 6.1.1

[float]
=== Bug Fixes

Machine Learning::
* Removed incorrect job group information from the URL when linking to the
results page after job creation.
* Fixed bug related to cloning jobs that do not have {dfeeds}.
* Fixed issues with the first and last buckets in the Anomaly Explorer swimlanes
and in the Single Metric Viewer charts.

Management::
* Allow pasting into index pattern field using keyboard shortcut {pull}15500[#15500]
* Typing a CCS pattern into the index pattern field no longer triggers an error {pull}15372[#15372]

Operations::
* Bump node.js version to 6.12.2 {pull}15612[#15612]
* Kibana indices are no longer flagged as out-of-date just because they include `_default_` {pull}15432[#15432]

Reporting::
* Resolved issue with the preserve layout option occasionally causing Chromium
to crash when it was given partial pixels for the viewport.

Visualizations::
* Disable math aggregation in Time Series Visual Builder {pull}15653[#15653]
* Bucket paths for overall aggregations now use syntax compatible with Elasticsearch 6+ {pull}15322[#15322]

Watcher::
* Removed error messages that were appearing when you created an email action
for a watch without a body or subject. For more information, see
{stack-ov}/actions-email.html[Email Action].

[[release-notes-6.1.0]]
== {kib} 6.1.0

[float]
=== Enhancements

Design::
* [Fixes #12889] Make saved-object-finder and paginated-selectable-list accessible {pull}13834[#13834]
* [Fixes #12901] [UI Framework] Add KuiCodeEditor as react-ace replacement/wrapper {pull}14026[#14026]
* [UI Framework] KuiGalleryItem automatically becomes link or button {pull}14240[#14240]

Dev Tools::
* [Fixes #11522] Improve Dev Tools accessibility {pull}13496[#13496]
  - Console no longer traps keyboard focus. You can quit editing with Escape.

Discover::
* [Fixes #12633, #12641] Improve accessibility of the discover app {pull}13498[#13498]
* [Fixes #14456] [Accessibility] Improve filter bar accessibility {pull}14474[#14474]

Machine Learning::
* Added the ability to create and display forecasts for {ml} jobs in {kib}.
* Simplified job creation for certain recognizable data sources, such as
Filebeat access logs from Nginx and Apache HTTP servers.
* Added a Data Visualizer, which enables you to learn more about the
characteristics of your data and identify fields for {ml} analysis. For more
information, see <<ml-jobs>>.
* Added bucket span to the chart labels in the Single Metric Viewer.
* Added support for job groups when managing jobs in {kib}.
* Added the ability to show or hide the Anomaly Explorer charts by selecting a
checkbox. The choice is saved in the URL, so it persists if you re-open the
view from a bookmarked URL.
* Added a new job creation wizard for population jobs, which detect activity
that is unusual compared to the behavior of the population. For more information,
see {stack-ov}/ml-configuring-pop.html[Performing Population Analysis].
* Added the ability to control the maximum number of rows in the Anomaly
Explorer view by swimlane, with options of `5`, `10`, `25`, or `50`. Previously,
it was fixed to a maximum of 10 rows.
* Changed the job creation wizards such that you select an index pattern or
saved search before you select the type of job.
* Added licensing checks to the job creation features in {kib}. If the license
is expired, for example, the create job, edit job, clone job, and start {dfeed}
buttons are disabled.
* Added the ability to set the model memory limit in job creation wizards. For
more information about the `model_memory_limit` property, see
{ref}/ml-job-resource.html#ml-apilimits[Job Resource Analysis Limits].
* Added a **Close Job** button that enables you to force the closure of a job
when it fails. The button is disabled if the job is running, closed, or does not
have a {dfeed}.
* Added the ability to display jobs with multiple detectors in the Single Metric
Viewer when the `model_plot_config` property is enabled. Previously, this
functionality was only possible for jobs with a single detector.

Management::
* [Fixes #12867] &quot;Create index pattern&quot; wizard.  {pull}13454[#13454]
  - Introducing a new wizard to create index patterns that makes index discovery and matching much easier than before.
* [Fixes #12668] add an option for url types so that it can be opened in current tab (master branch) {pull}13209[#13209]
* [Fixes #12869, #12873, #13803] Improve Management section accessibility {pull}14243[#14243]
* Add rel=&quot;noopener noreferrer&quot; to external links {pull}14440[#14440]

Monitoring::
* Added Cross Cluster Search (CCS) to efficiently retrieve monitoring data from
local and remote clusters.
* Improved handling of health check errors. If there is a problem making a query,
for example, an error is returned and extra information is provided in the logs.
As part of this change, the `monitoring` plugin for {kib} will never cause {kib}
to go `red`.
* Improved logging when X-Pack is not installed on the monitoring cluster.
* Saved table interaction states such that if you leave the {kib} page and
subsequently return, your filters persist.

Operations::
* [Fixes #11091] Adds keystore for storing settings {pull}14714[#14714]
* [eslint-config-kibana] Add AirBnB linting rules for React best practices. Bump to v0.10.0. {pull}13259[#13259]
* Add updated_at timestamp to saved objects {pull}13503[#13503]
* [Fixes #14312] [build] Clean examples from node modules {pull}14587[#14587]
* [SavedObjects] use constructor options {pull}14200[#14200]
* [savedObjects] wait for Kibana index on every write {pull}14202[#14202]
* [es/clusters] improve cleanup {pull}14188[#14188]
* Upgrade to webpack 3 {pull}14315[#14315]
* Upgrade to eslint 4 {pull}14862[#14862]
* Proxy support for plugin installer {pull}12753[#12753]
  - Kibana now respects the http_proxy, https_proxy and no_proxy environment variables to download plugins via a proxy.
* [Fixes #13937] Make console history keyboard accessible {pull}13946[#13946]

Platform::
* [Fixes #8499] [server/logging] Allow opting out of UTC {pull}14705[#14705]
* Improve performance of sort_prefix_first for large arrays {pull}14974[#14974]

Reporting::
* Added support for a HTTP Proxy to be configured when using Chromium as the
browser. For more information, see <<reporting-chromium-settings>>.
* Added headless build of Chromium that can be used instead of PhantomJS for
capturing Reporting screenshots. To enable Chromium, set the following setting
in your `kibana.yml` file: `xpack.reporting.capture.browser.type: chromium`. For
now PhantomJS will remain the default. In the future, however, Chromium will
become the default.
* Added an option for PDF reports that preserves the existing layout and size of
the Visualization or Dashboard.

Security::
* Added `manage_index_templates` cluster privileges to the `kibana_system` role,
which enables the {kib} system user to create and manage the index template for
the `.kibana` index. For more information, see
{stack-ov}/security-privileges.html[Security Privileges] and
{stack-ov}/built-in-roles.html[Built-in Roles].

Sharing::
* Add a feature for custom panel titles {pull}14831[#14831]
  - Introduces the ability to specify custom titles, or remove the title entirely, for individual dashboard panels.  Just hit the reset link to restore the title to it's original value.
* Input Control visualization {pull}13314[#13314]
* Kibana Home page - phase one {pull}14673[#14673]
* only show expand toggle, in view mode, on hover {pull}14706[#14706]
* [Fixes #13948] Add new &quot;use margins&quot; option to add separation between panels {pull}14708[#14708]
* Add new title query param to dashboard listing page {pull}14760[#14760]
* [Fixes #12563] Hide all panel titles option at the dashboard level {pull}15006[#15006]

Visualization::
* [Fixes #1702] pie chart labels {pull}12174[#12174]
  - pie charts can now have labels on them to increase readability
* [Fixes #13519, #13103, #13968] Improve Region Maps for use without network connection {pull}15056[#15056]
  - Improve the use of Region Maps for deployment in environments without internet access. Similar to the Coordinate Map visualization, the Region map can now use a WMS-service as a base-layer. Admins can now also setup Kibana to opt-out of connection to the Elastic Maps Service. Users can now opt-out of having the visualization display warnings.
* Introduce lab mode for visualizations {pull}15050[#15050]
  - Newly introduced visualizations can now be part of labs-mode. Visualizations in labs-mode introduce new more cutting-edge functionality and can be subject to change across minor releases.  Labs-mode can be turned off in the advanced settings. Labs-visualization will then no longer be available to the user. The Time Series Visual Builder is not part of labs-mode, it continues to be an experimental feature. The input controls are the first to be flagged as a lab visualization.
* reverts metric visualization {pull}14052[#14052]
  - The metric visualization now no longer reuses the rendering code of the gauge and goal visualizations. This improves consistency of positioning of the metric on Dashboards.
* [TSVB] Adding the ability to sort terms split by terms and change order {pull}14213[#14213]
* Math Aggregation to support Sibling Aggs for TSVB {pull}13681[#13681]
* [TSVB] Add support for Math Aggregation to tables {pull}14553[#14553]
  - This PR adds support for the Math aggregation to the new TSVB table visualization. This wasn't possible at the time of the PR because both features were separated. This also adds support for the drop last bucket feature.
* [TSVB] Series Filter {pull}14696[#14696]
  - This PR adds the series filter feature allowing the user to create a filter per series. This allows users to user to have a group by terms along with a filter for each series.
* [Fixes #13992] Grab the default index pattern and use it in TSVB {pull}14739[#14739]
  - TSVB now uses Kibana's default index pattern by default.
* [TSVB] Add params._interval to mathjs {pull}14944[#14944]
  - Make the bucket interval available as a parameter.
* Upgrade kibana to leaflet 1.x {pull}12367[#12367]
* [Fixes #1385] relative date field formatter {pull}13921[#13921]
* Allow visualizations to specify open editor tab  {pull}13977[#13977]
* Show the x-axis (time) value in legend when hovering over a Timelion graph {pull}14627[#14627]
  - Hovering over a Timelion  graph now shows the corresponding x-axis value in the legend.
* Timelion typeahead for argument names {pull}14657[#14657]
* [Fixes #9022] Timelion query language support for scripted fields {pull}14700[#14700]
* Timelion typeahead for argument values {pull}14801[#14801]
* add API to embed visualizations {pull}14292[#14292]
  - visualize loader helps with inserting visualizations into DOM elements
* [Fixes #11533] Improve timelion accessibility {pull}13531[#13531]
* [Fixes #11858] Allow reordering aggregation priority by keyboard {pull}13635[#13635]
* [Fixes #12902, #12903] Improve time series visual builder accessibility {pull}13817[#13817]
* [Fixes #11843] [Accessibility] Improve visualization legends accessibility {pull}14505[#14505]
  - Improve the keyboard accessibility of visualization legends.
* [Fixes #12905] [Accessibility] Refactor font slider for accessibility {pull}14817[#14817]
* Remove ready:vis and application.load event {pull}14988[#14988]
  - Visualizations no longer send a ready:vis event to the $rootScope once they initialized. Applications don't need to emit an application.load event anymore.

[float]
=== Bug Fixes

Design::
* [Fixes #12247] [Accessibility] Make table pagination controls keyboard-accessible.  {pull}13541[#13541]
* [Fixes #12482] [Accessibility] Give kuiTables keyboard-accessible column headers  {pull}13586[#13586]
* [UI Framework] Reset Chrome's native styling for button border-radius {pull}14758[#14758]
* [UI Framework] Fix spacing bug with LocalTabs. {pull}14772[#14772]

Dev Tools::
* [Fixes #14586] [console] Remove cluster/_nodes/stats {pull}14757[#14757]
* [Fixes #10841, #10840, #10071, #8930, #9651, #8790] [console] assorted autocomplete fixes {pull}14770[#14770]

Machine Learning::
* Fixed scenarios where clicking the "View examples" link in the Anomalies
section of the Single Metric Viewer or Anomaly Explorer caused the browser to hang.
* Fixed scenarios where the Anomaly Explorer or Single Metric Viewer failed to
plot metric data in the charts due to a blank field name in a detector. This
problem was specific to jobs that were originally created in 5.4.

Management::
* [Fixes #12612] Create keyboard mode for ui-ace editor {pull}13339[#13339]
  - Our code editor in several places won't trap keyboard focus anymore, by using the Tab key. When navigating by keyboard, you first need to Enter editing mode in the code editor and you can leave it by pressing Escape.

Monitoring::
* Fixed problems viewing pipelines in {kib} from a Firefox web browser.
For more information, see
{logstash-ref}/logstash-pipeline-viewer.html[Pipeline Viewer UI].
* The `xpack.monitoring.node_resolver` setting, which was deprecated in 5.5.0,
now allows only the `uuid` value to be used. This setting will be removed in 7.0.

Operations::
* Removes webpack-directory-name-as-main dependency {pull}13584[#13584]

Platform::
* [Fixes #15078] Courier - $state in searchSource {pull}15166[#15166]

Sharing::
* Refine use of aria-label in Dashboard panel and top nav, Discover, and Management 'Edit index pattern' UI. {pull}14341[#14341]
* [Fixes #11532] [11532] Improve local nav accessibility  {pull}14365[#14365]
* Fix bug with Dashboard breadcrumb alignment. {pull}13580[#13580]
* [Fixes #13421] Dashboard dark-theme fixes {pull}13690[#13690]
* Set timeout and terminate_after parameters when fetching terms for Input Controls {pull}14977[#14977]
* [Fixes #13458] Fix out of memory crash on auto refreshing dashboards {pull}13871[#13871]
* [Fixes #9523] Fix issue where saved searches are not updated {pull}14452[#14452]
  - There has been a long standing issue where if you add a saved search to a dashboard, then go edit and save that saved search, the updates are not propagated to the dashboard.  The only way, previously, to get the new changes was to remove and re-add the search from your dashboard. With this fix, that is no longer necessary. However, there is one situation when your saved search will stop updating and that is when someone has made and saved local edits to the saved search on the dashboard.  For example, if you remove a column from a saved search in a dashboard panel, then save the dashboard, that search will always show that column set, even if columns are added or removed to the underlying saved search. We did it this way to still allow users to override the configuration at the dashboard level.

Visualization::
* Visualization resizeInit {pull}15321[#15321]
* [Fixes #14344] Remove aria-hidden=&quot;true&quot; from TSVB tabs and agg component to make their content screen-reader accessible. {pull}14345[#14345]
* [TSVB] Remove console.log from Resize PR {pull}14555[#14555]
* [TSVB] Fixes #14124 - Removes the 1w label from interval pattern {pull}14577[#14577]
* [TSVB] Change term sorting to match Kibana Core {pull}14679[#14679]
* [TSVB] Stacked series should not contain null values {pull}14923[#14923]
* fix issue of duplicate TSVB flot chart creation {pull}14626[#14626]
* Fix spatial filters when Kuery is in use {pull}14158[#14158]
* [6.x] update spy table headers when columns update {pull}13224[#13224]
* [Fixes #2908] Scale histogram aggregation interval to avoid crashing browser {pull}14157[#14157]
* [Fixes #12545] [timelion] trim number of colors when there are more colors than gradient stops {pull}14906[#14906]

[[release-notes-6.0.1]]
== {kib} 6.0.1

[float]
[[security-6.0.1]]
=== Security Issues

* â€‹Kibana cross site scripting issue (ESA-2017-22): Kibana versions prior to 6.0.1 and 5.6.5 had a cross-site scripting (XSS) vulnerability via URL fields that could allow an attacker to obtain sensitive information from or perform destructive actions on behalf of other Kibana users. CVE ID: CVE-2017-11481

* Kibana open redirect flaw (ESA-2017-23) : The Kibana fix for CVE-2017-8451 was found to be incomplete. With X-Pack installed, Kibana versions before 6.0.1 and 5.6.5 have an open redirect vulnerability on the login page that would enable an attacker to craft a link that redirects to an arbitrary website. CVE ID: CVE-2017-11482

Users should upgrade to Kibana version 6.0.1 or 5.6.5. There are no known workarounds for these issues.

[float]
=== Bug Fixes

Design::
* [UI Framework] Fix IE11 bug which caused kuiToolBarSearch to grow too wide when there is only a single kuiToolBarSection sibling. {pull}15215[#15215]

Discover::
* [Fixes #14634] Don't show { match_all: {} } for migrated objects {pull}14644[#14644]
* [Fixes #15398] Solidify context app filter test {pull}15203[#15203]

Platform::
* Fix fieldFormat plugins {pull}14984[#14984]
  - In 6.0.0 we accidentally included a breaking change that prevented plugins from supplying custom FieldFormatters. This has been fixed but, also changes the way that they need to be defined. Take a look at the field formatters Kibana supplies to see how you should update your custom FieldFormats.
* Fix: exponent values in table view {pull}15309[#15309]
* Prepend relative urls {pull}14994[#14994]
* [eslint] add eslint dev script {pull}14889[#14889]
* [dev/ci_setup] generalize jenkins_setup script for other CI environments {pull}15178[#15178]

Operations::
* Adds task to export a CSV of all dependencies {pull}15068[#15068]
* [Logging] more tests and added robustness to log formatting {pull}15035[#15035]

Sharing::
* [Fixes #15333] [Timepicker] Fix alignment, consistency in error msg {pull}15343[#15343]
* [Fixes #15336] Add parsedUrl to the code driving viz/dashboards {pull}15335[#15335]

Visualization::
* [Fixes #13436] allows to hide warnings in gauge {pull}15139[#15139]
* [Fixes #14833] Fix Kibana crashing when resizing a tag cloud too small {pull}15001[#15001]
* [Fixes #13947] uses maximum space for arc gauge and center aligns it {pull}15140[#15140]
* [Fixes #15146] fixes the visualizeLoader error in IE {pull}15150[#15150]
* fixing field formatters for gauge {pull}15145[#15145]
* [Fixes #13947] fix metric align and size {pull}15141[#15141]

[[release-notes-6.0.0]]
== {kib} 6.0.0

[float]
=== Breaking Changes

Reporting::
* When {security} is enabled, reports will only be accessible to the user that created them.
* When {security} is enabled, user authorization is controlled by the
`xpack.reporting.roles.allow` setting in the `kibana.yml` which defaults to
`['reporting_user']`. Users will no longer have access to the underlying {reporting}
indices in {es} when assigned to the built-in `reporting_user` role. If using
custom reporting roles, the privileges to the indices will need to be removed, and the
role will need to be added to the `xpack-reporting.roles.allow` setting.

Security::
* The built-in users (`elastic`, `kibana`, and `logstash_system`) no longer have
default passwords. You must create passwords for these users and configure {kib}
to use this information. For more information, see
{stack-ov}/setting-up-authentication.html[Setting Up User Authentication].

Watcher::
* The built-in HTTP client used in webhooks, the http input and the http email attachment has been replaced.
This results in the need to always escape all parts of an URL.
* The new built-in HTTP client also enforces a maximum request size, which defaults to 10mb.
* The watch `_status` field has been renamed to `status`, as underscores in
field names will not be allowed.

[float]
=== Enhancements

Core::
* Remove legacy pre-4.2 configurations {pull}12013[#12013]
* NODE_ENV no longer has an impact on Kibana {pull}12010[#12010]
* Only support 64 bit operating systems {pull}11941[#11941]
* Remove field_stats pre-flight option for index patterns {pull}12814[#12814]
* [Fixes #13439] Upgrade Angular to 1.6.5 {pull}13543[#13543]

Dashboard::
*  If you had a chance to check out the new Dashboard Only Mode in 6.0.0-beta1,
we've changed things up a bit for 6.0.0-beta2. Previously we required you to
flag every role a user belonged to as being in the View dashboards only mode
in order for that user to be flagged as a Dashboard only mode user. In this
new set up, we created a reserved role, `kibana_dashboard_only_user`, that is
already pre-configured with read only access to the .kibana index, and set up
to be in Dashboard Only Mode. All you have to add is this one role to any user
and they will now be a Dashboard Only Mode user. We also got rid of this new
setting in the Roles UI, as this one role should suffice for most user's setups.
If you have a more complicated setup, such as multi-tenancy with multiple
`.kibana` indexes, you can create more dashboard only mode roles by adding
role names to the `xpackDashboardMode:roles` advanced setting. For more
information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Design::
* Palette swap for accessibility / kibana 6 {pull}12085[#12085]
  - We re-skinned a decent portion of Kibana to be mostly AA accessibility compatible in regards to coloring of major navigation elements.
* [UI Framework] Reactify menu {pull}12135[#12135]
* Adding for and id attributes to labels and form elements {pull}12215[#12215]
* [UI Framework] Reactify kuiEvent and related CSS components (#12226) {pull}12228[#12228]
* [UI Framework] Reactify actionItem {pull}12142[#12142]
* [UI Framework] Reactify kuiCollapseButton {pull}12225[#12225]
* [UI Framework] Reactify kuiFieldGroup and related CSS components {pull}12260[#12260]
* [UI Framework] Update LocalNav examples to use tabIndex instead of tabindex, to eliminate React console warnings. {pull}12284[#12284]
* [UI Framework] Reactify kuiCard and related CSS components {pull}12197[#12197]
* [UI Framework] Reactify kuiBar {pull}12167[#12167]
* [UI Framework] Reactify kuiGallery and related CSS components {pull}12277[#12277]
* [UI Framework] Fix examples of Table component with ToolBar. {pull}12326[#12326]
* [UI Framework] Improve Warning Button contrast {pull}12327[#12327]
* [UI Framework] Reactify kuiHeaderBar and related CSS components {pull}12280[#12280]
* [UI Framework] Define consistent default, small, and wide sizing for form fields, and support them within ExpressionItems. {pull}12190[#12190]
* [UI Framework] Order UI Framework React component exports to be alphabetical {pull}12526[#12526]
* [UI Framework] Reactify kuiTabs and related CSS components {pull}12302[#12302]
* Replace brand-danger color with new global red color. {pull}12654[#12654]
* Make ui-select appearance match other inputs. {pull}12652[#12652]
* [UI Framework] remove check for ng-untouched class from formControlInvalid mixin {pull}12153[#12153]
* [UI Framework] reactify prompt for items {pull}12151[#12151]
* [UI Framework] Allow custom placeholder for Tool Bar Search Box {pull}12959[#12959]
* [UI Framework] Add new react color picker to ui framework with tests {pull}12245[#12245]

Discover::
* Implement new Kibana query language {pull}12624[#12624]
  - This PR adds a new experimental query language to Kibana. The new language is turned off by default but can be enabled in the Management > Advanced Settings via the search:queryLanguage:switcher:enable option. Changing this setting to true will add a language selector to the query bar that allows users to choose the new language for their query. Details of the new query language can be found in the issue description (#12282).
* Remove highlight query {pull}13231[#13231]
* [Fixes #12635]  Improve the accessibility of the Discover screen {pull}12681[#12681]
* [Fixes #12343] Remove custom keyboard navigation in datepicker {pull}13644[#13644]
* Accessible sort buttons {pull}12217[#12217]
* [Accessibility] Avoid empty th in doc-table header row {pull}12364[#12364]
  - The discover document table header cells provide appropriate hints to screen-readers.
* [Accessibility] Add button to skip past the discover doc table {pull}12539[#12539]
  - The new "Skip to bottom"-button in Discover is invisible unless focused. When activated it displays all remaining rows that were already loaded and focuses an anchor located below the table.
* Timepicker on the right {pull}11980[#11980]

Machine Learning::
* Added a Datafeed Preview tab to expanded rows in the jobs list under
Job Management. This displays the JSON response from the preview endpoint.
* Added an option to create a watch when you start a {dfeed} in {kib}. After the
{dfeed} starts, you are prompted to specify details such as the interval and the
anomaly severity threshold. If {watcher} is disabled, this option does not appear.
* Updated the bucket span estimator, which suggests bucket span values when you
create jobs in {kib}. The estimator now suggests a minimum bucket span value
of 15 minutes.

Management::
* [indexPatterns] remove support for time patterns {pull}12158[#12158]
  - Removes ability to create index patterns based on time patterns/intervals  - Adds a warning that informs users when they are using an index pattern that is now unsupported (disabled by default until #10442 is done, #12322)  - Does not address editing/remapping index patterns, see last task in #12242
* [Fix for #11526, #8225] Move build info from management section to status page {pull}13341[#13341]
* [Management] Provide a way to fetch indices and template index patterns {pull}12200[#12200]
* [Management] More universal solution for fetching indices and aliases {pull}12405[#12405]
* Add breadcrumb-page-title to management-app {pull}12765[#12765]
  - The bread-crumbs component allows for the consumer to pass in a page-title value which is appended as the final breadcrumb in the chain. This PR adds a scope argument to the management-app to take advantage of it.

Monitoring::
* The Logstash Pipeline viewer in {kib} displays an information icon and a
corresponding tip for every plugin that does not define an ID explicitly.
Defining an ID for plugins enables you to track differences across pipeline
changes. For more information, see
{logstash-ref}/logstash-pipeline-viewer.html[Pipeline Viewer UI].
* Added an alert in clusters that have trial licenses and have enabled {security}
but do not have TLS/SSL configured. The message provides information about the
steps that are required to enable {security} when they obtain a non-trial license.
* Added support for cluster alerts, for example to provide information about
license expiration.
* Added an advanced setting for a default admin e-mail, which is the recipient
of {xpack} admin operations such as cluster alert e-mail notifications.

Operations::
* Updates to status API, re-align status page {pull}10180[#10180]
* [Fix for #10181] Revert same port http -> https redirect {pull}10930[#10930]
  - Kibana 5.x redirected requests from http to https on the same port if TLS was configured. Starting in Kibana 6.0.0 Kibana no longer redirects basic http traffic to https.
* Update mappings for kibana index {pull}9280[#9280]
* Use single ES document type {pull}12794[#12794]
  - Starting in Elasticsearch 6.0, you are no longer able to create new indices with multiple index types. To accomplish the same effect as index types, a new type field was added to identify the document and the value mapped under the index to allow for strict mapping.
* [logging] Downgrade hapi connection errors when connecting with the wâ€¦ {pull}11209[#11209]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* [Fixes #9436] [optimizer] remove support for .jsx extension {pull}12712[#12712]
* Sets ES mapping to single_type=false {pull}11451[#11451]

Platform::
* [Fix for #12012] Fail to start if settings include unknown keys {pull}12554[#12554]
  - When a config file includes invalid keys or values, Kibana usually logs a message describing the issue and fails to start. There has been an exception to this rule since 4.2 that allowed top-level keys to be unknown/misspelled and only caused a warning to be logged. That exception has been removed and now any unknown or misspelled config key passed to Kibana (via the config file or command line flags) will prevent it from starting.
* Remove the es_admin proxy {pull}13000[#13000]
* Restrict ES data proxy to msearch and search {pull}13020[#13020]
* [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]
* Remove client-side management of Kibana index mappings {pull}12820[#12820]
* Uses uuid for auto-generated ids and prepends type (#12834) {pull}12877[#12877]
* [uiSettings] support defining settings with uiExports {pull}12250[#12250]
  - define a uiExports.uiSettingDefaults key your plugin definition to add uiSettingDefaults - uiSettingDefaults must be unique. If a key is already defined elsewhere then the server will not start. - defined settings will display in the advanced settings editor, along with the intended default value and description - the REST API is identical to before - the browser API is identical to before - defaults for timelion have been extracted to the timelion plugin definition and the existing defaults are defined in the kibana plugin definition
* Refactor commaList filter logic into common util {pull}12553[#12553]
* [kbnServer/extensions] formalize request factories with helper {pull}12697[#12697]
* Allow plugins to turn off the "link to last URL" navigation helper {pull}13044[#13044]

Reporting::
* Enabled export as CSV.

Security::
* Added a View Dashboards Only setting to the roles section under
Security management. If a user is assigned a role that has this setting
enabled, when they access Kibana it presents Dashboard Only mode.
* Added reserved `kibana_dashboard_only_user` role. For more information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Sharing::
* Add label and clear link to color picker {pull}12422[#12422]
* Expose the variables for dynamically building doc links {pull}12513[#12513]
* Reactify stateless table components {pull}12349[#12349]
* Full screen mode implementation for dashboard {pull}12265[#12265]
  - You can now enter full screen mode when viewing a dashboard. This hides the Chrome and the top nav bar.  If you have any filters applied, you'll see the filter bar, otherwise that will be hidden as well.  To exit full screen mode, hover over and click the Kibana button on the lower left side of the page, or simple press the ESC key.

Visualize::
* Visualize Refactor {pull}11786[#11786]
  - When creating new visualizations, developers are no longer restricted to using just Angular as a rendering technology. The changes now also enables developers to create custom editors that do not conform to the current sidebar-layout. Commonly used functionality - such as access to the query bar or timefilter - is now also exposed on the visualization object. This avoids the need to import individual modules from inside Kibana. These changes are a first step in a longer term effort to provide a robust long-lived programming interface for building visualizations in Kibana.
* Replace "marked" with "markdown-it" {pull}13623[#13623]
* Upgrade kibana to leaflet 1.x {pull}12367[#12367]
* Duration Formatting for TSVB {pull}13337[#13337]
* allows more flexible timelion queries {pull}10961[#10961]
* Support multiline Timelion queries {pull}11972[#11972]
* Fix ui-select error border color and placeholder font color. {pull}12411[#12411]
* Fix appearance of error indicator in Visualize sidebar.  {pull}12410[#12410]
* [Fix for #11193] hide current time marker when the timespan doesn't include the current time {pull}12266[#12266]
  - Only display current time marker on  a visualization when the x-axis extent includes the current time.
* [Fix for #7040] Add github-markdown.css to markdown visualization {pull}12377[#12377]
* Filter geohash_grid aggregation to map view box with collar {pull}12806[#12806]
* add font size control to markdown visualization {pull}12860[#12860]
* [vis/resizeChecker] swap out implemenation with ResizeObserver polyfill {pull}9439[#9439]
* Add imports for SavedObjectRegistryProvider.register, fixing Timelion {pull}12844[#12844]
* [Fix for #7572] add polygon drawing tool {pull}11578[#11578]
  - On a coordinate map, users can now make a selection on the map by drawing a freehand polygon. Just like the earlier boundary selection, this adds a boundary filter to the filter bar.
* [Fixes #12491, #12904, #12887] Improve accessibility of visualizations {pull}13507[#13507]
* [Fixes #11856, #12888, #12900] Improve accessibility of visualization view {pull}13726[#13726]

Watcher::
* Watcher indices no longer use multiple types.


[float]
=== Bug Fixes

Core::
* update logstash data and mappings for single type {pull}13001[#13001]

Design::
* #12656 Fixes Aria-Hidden without value {pull}12658[#12658]
* [UI Framework] Fix disappearing borders for LocalNav search select. {pull}12803[#12803]
* Make breadcrumb a heading for screen readers, fix #12885 {pull}13734[#13734]
* [Fixes #12634] Improve date picker accessibility {pull}12676[#12676]
* [UI Framework] Fix margin for KuiLocalTabs which are applied to typographic elements. {pull}14451[#14451]
* Remove truncate from viz form text, remove additional wrapper {pull}14311[#14311]

Dev Tools::
* Clarified field labels in the Grok Debugger.
* Added auto-sizing to the input, pattern, and output text areas in the Grok Debugger.
* Added auto-sizing of the custom patterns text area in the Grok Debugger.
* Enabled users to specify custom patterns in a well-known format in the Grok Debugger.
* Fixed issue with input not being accepted in the *Sample Data* or
*Grok Pattern* fields in the Grok Debugger.
* [Fix for #10504] [console] Replace text/plain fallback with application/json {pull}12294[#12294]
* [Fixes #13142] Allow console to send multiline strings with CRLF line endings {pull}14094[#14094]
  - Console will now allow sending multiline strings on Windows.

Discover::
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]
* [Fixes #12970] Make 'time picker' button in Discover no results prompt keyboard and screen-reader accessible. {pull}13046[#13046]
* [Fixes #12692] Re-enable filter editor suggestions {pull}13376[#13376]
* [Fixes #13738] Fix 'is one of' filter editor {pull}13771[#13771]
* [Fixes #12639] Make filter pills keyboard accessible {pull}13331[#13331]
* [Fixes #12640] Make 'all filters' actions keyboard accessible {pull}13391[#13391]
* [Fixes #11830] Disable creation of 'exists' filters for scripted fields {pull}13538[#13538]
* Fix relative z-index of spy panel and filter editor {pull}13717[#13717]
* [Fixes #5164] Check sort:options for Discover default sort order {pull}13708[#13708]
* [Fixes #13075] Improve missing index pattern error message {pull}13915[#13915]
* [Fixes #13743] Refetch even when the query has not changed {pull}13759[#13759]
* [Fixes #14270] Handle strings in source mapped as numbers in filter editor {pull}14318[#14318]
* [Fixes #7767] Fix invisible filters caused by missing index pattern {pull}14131[#14131]
* [Fixes #14319] Loosen check for dashboard queries in filters array {pull}14338[#14338]

Graph::
* Reinstated `_xpack/graph/_explore` as the correct graph endpoint.
`_xpack/_graph/_explore` is deprecated and will be removed in v7.0.

Machine Learning::
* Fixed the position of text that appears when you hover over anomalies in {ml}
charts in a Safari web browser.
* Fixed {ml} charts so that they plot nulls as gaps rather than zeroes. This
change provides a more accurate visual indication of gaps in the data.
* Added support for periods in field names when you create jobs or datafeeds in
{kib}.
* Fixed job creation failure that occurred when using saved searches with filters.

Management::
* Limit scripted fields to painless and expression langs {pull}9172[#9172]
* [Fix for #12249] Fixes issue #12249 {pull}12254[#12254]
* Refine getIndices() to return an empty array if there are no matching indices. {pull}12659[#12659]
* [Fix for #9352] Change mapping of index-pattern fields to text {pull}9353[#9353]
* [Fix for #12861, #12862, #12863, #12865, #12868, #12870, #11526] [Management] Improve accessibility within management {pull}13364[#13364]
* [Fix for #12864] [Management] Accessibility - continued {pull}13576[#13576]
* [Fix for #13542] [Management] Fix breaking scope changes in the field format editor samples {pull}13549[#13549]
* [Fix for #12872] Adds getAriaName function and applies it to advanced settings {pull}13448[#13448]
* Remove premature abstraction {pull}13042[#13042]
* fix create_index_pattern_method to handle no timefields {pull}13852[#13852]
* Work around #11959 for now {pull}12051[#12051]
* [Fixes #14350] [Management] Fix FF quirk with max width in the import saved object modal {pull}14352[#14352]

Operations::
* Use es6 exports, replace module.exports {pull}12084[#12084]
* Removing mapper.dynamic setting from the esArchiver mappings {pull}13970[#13970]
* Add linting rules for formatting JSX. {pull}12810[#12810]
* Upgrade eslint config to 0.8.1. {pull}13128[#13128]
* Move eslint-config-kibana into core {pull}12725[#12725]
* [npm] Upgrade wreck {pull}13849[#13849]
* Eslint/remove last amd modules {pull}14282[#14282]

Platform::
* Update HTML style guide with rule for camel casing attribute values. {pull}11653[#11653]
* Add title and tooltip accessibility information to HTML style guide. {pull}11655[#11655]
* [Fix for #12580] Update HTML style guide with rule about putting nested elements on multiple lines. {pull}12812[#12812]
* [Fix for #12047] [uiSettings] make service request based {pull}12243[#12243]
  - removes server.uiSettings() (throws error with instructions)  - Adds request.getUiSettingsService() which returns a unique instance of UiSettingsService per request  - Methods on UiSettingsService no longer require a request object  - Adds server.uiSettingsServiceFactory(options) which can be used to create an instance of UiSettingsService with a custom callCluster() function
* [Fix for #12436] Fix stats permissions and use underscore instead of dash {pull}12478[#12478]
* [ftr] remove timestamp prefix, jenkins has it built in now {pull}13825[#13825]
* [ftr/config] prevent mochaOpts and timeouts conflict {pull}14060[#14060]
* create babel-preset and babel-register modules {pull}13973[#13973]
* [vis/requesting] only call when actually requesting {pull}14017[#14017]
* [Fixes #14255] Use Boom.boomify instead of deprecated Boom.wrap {pull}14325[#14325]
* [Fixes #14497] Import Babel polyfill when running Jest tests {pull}14508[#14508]

Reporting::
* Fixed generated reports such that they show the time zone on the client, as
specified in the `dateFormat` field in the Advanced Settings.
* Resolved intermittent issue with Firefox logging users out of {kib} after
they download a PDF report.

Security::
* Ensured that privileged information does not appear in the error message when
a {kib} login attempt fails.

Sharing::
* Restoring the dashboard-grid padding to appease Gridster {pull}12613[#12613]
* [Fix for #11857] Accessibility: Sharing UI - associate labels with controls {pull}12143[#12143]
* [Fix for #11860] Make add edit buttons accessible {pull}12320[#12320]
* Need to trigger renderComplete when there are no results {pull}12380[#12380]
* remove inline awaits {pull}13043[#13043]
* Stabilize and bring back flaky tests {pull}13034[#13034]
* [Fix for #12484, #12485, #12483] Fix accessibility issues with saved object finder {pull}13152[#13152]
* [Fix for #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]
* [Fixes #13421] Dashboard dark-theme fixes {pull}13690[#13690]
* [Fixes #12233] Be case insensitive when sorting on the visualize and dashboard landing pages {pull}13397[#13397]
* Fix bug with Dashboard breadcrumb alignment. {pull}13580[#13580]
* [Fixes #13040] Make sure no one can show the chrome if the default setting is hidden. {pull}13250[#13250]
* [Fixes #13297] Fix full screen toggle button when panel is expanded {pull}13320[#13320]
* Show full screen option even when write controls are hidden {pull}13247[#13247]
* [Fixes #13289] Use find service instead of remote  {pull}13296[#13296]
* [Fixes #13754] Small clean up with visualize test + extra debug log {pull}13755[#13755]
* [Fixes #13588] Fix map updates not propagating to the dashboard {pull}13589[#13589]
* Set pie chart border to match background in dark mode {pull}14375[#14375]
* [Fixes #14462] Prevent event handlers from being triggered after they are &quot;off&quot;ed {pull}14463[#14463]

Visualize::
* update spy table headers when columns update {pull}13225[#13225]
* Fixes #12757 - Fixing field fetching for index patterns for TSVB {pull}12771[#12771]
* [Fix for #4599] Add "Sum of series in legend" option {pull}7970[#7970]
* [Fix for #9053] [timelion/fit/carry] do nothing if there is not any data {pull}9054[#9054]
* [Fix for #8763] [vislib/tilemap/heatmap] scale the heatmap maxZoom with map zoom {pull}8765[#8765]
* [Fix for #9184] fixes error with custom interval in datetime aggregation {pull}9427[#9427]
* Fix timelion's flot when neither thor nor monitoring are installed {pull}10412[#10412]
* Fixes #12763 - Add show_grid to the default vis structure for TSVB {pull}12769[#12769]
* Fixes #12777 - Add onBrush to Visualization component for TSVB {pull}12778[#12778]
* [Fix for #12802, #12762] Fix TSVB Visualizations to honor darkTheme {pull}12804[#12804]
* [Fix for #8076] Scaled date format for date histogram aggregation {pull}12384[#12384]
  - Format date_histogram aggregation bucket labels with format specified in Advanced Setting's "dateFormat:scaled"
* [Fix for #3230] Make vertical bar chart gutter widths consistent {pull}12264[#12264]
  - Histogram intervals are not always equal widths (monthly time intervals). Keeping gutter widths consistent and reducing the bar width provides a more visually appealing bar chart.
* [Fix for #3173] Date histogram brush - add range filter when field is not index pattern time field. {pull}12286[#12286]
* Remove event listener for resizeChecker when directive is destroyed {pull}12734[#12734]
* Date histogram axis label not getting updated when time interval changes {pull}12815[#12815]
* [Fix for #12782] visualize should send ready:vis event when done {pull}12796[#12796]
* [Fix for #12811] reload visualization on auto refresh trigger {pull}12823[#12823]
* [Fix for #12882] changing query should update url state {pull}12912[#12912]
* vis with saved search should not show query and filter panels {pull}12911[#12911]
* [Fix for #12925] analyze wildcard should not be part of default query {pull}12938[#12938]
* [Fix for #12940] query queue should be cleared on failure {pull}12942[#12942]
* Handle date histogram scaling for table vis and avg_buckets metric {pull}11929[#11929]
* [Fix for #11414] remove default WMS settings {pull}11573[#11573]
* [Fix for #12497] allows to order percentiles freely {pull}12498[#12498]
* [Fix for #12732] Should only run visualization on Discover page when the indexpattern is time based {pull}12741[#12741]
* reload on global fetch event and emit vis:ready {pull}12805[#12805]
* [Fix for #12919] Fix excessive redraw {pull}12931[#12931]
* [Fix for #13181, elastic/beats#4777] Add Checks to Dashboard Context {pull}13182[#13182]
* [Fix for #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fix for #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fix for #12827] removes :filters from label {pull}12962[#12962]
* [Fix for #12983] resize was not detected correctly {pull}13239[#13239]
* [Fix for #13011] Should respect pinned filters {pull}13019[#13019]
* Visualization accessibility issues {pull}13226[#13226]
* Fixes #12685 - Improve error handling for TSVB {pull}12688[#12688]
* [Fix for #13246] Fixes #13246 - Add checks for empty annotations {pull}13422[#13422]
* [Fix for #13010] Fixes #13010 - Add dateFormat config to TSVB Visualizations {pull}13626[#13626]
* [Fix for #13625] Map filter not set appropriately when spy panel is open {pull}13678[#13678]
* [Fix for #13156] fixing disabling aggregations {pull}13686[#13686]
  - Disabled aggregations are no longer removed on applying visualization configuration.
* [Fix for #12896, #12897, #12898, #12899] Visualize Accessibility Issues {pull}13428[#13428]
* Fix a bug with the interval label for TSVB {pull}13440[#13440]
* [Fix for #12113] Fixes #12113 - Add timezone to date histogram aggregations for TSVB {pull}13378[#13378]
* [Fix for #13471] Closes #13471 - Change split behavior of gauges and metrics vis {pull}13583[#13583]
* [Fix for #12227] Fix discover sidebar Visualize button for geo_point fields {pull}13539[#13539]
* Clamp the centroid to stay within the box boundaries {pull}13581[#13581]
* [Fix for #13551] fix heatmap sizing on dashboard {pull}13636[#13636]
* ensure editor mode propagates correctly {pull}13355[#13355]
* [Fix for #13517] remove geo_bounds agg from visualizations {pull}13536[#13536]
* [Fix for #13424] Exclude filter agg from visualizations {pull}13680[#13680]
* [Fix for #13572] Show a warning for non accessible charts for screen readers {pull}13573[#13573]
* date_histogram: some bars are too big {pull}13068[#13068]
* [Fixes #13713] [Accessibility] Use aria-label in TSVB React components, instead of ariaLabel. {pull}13714[#13714]
* [TSVB] Adding check for model and visData {pull}13854[#13854]
* Fixes a bug with PR #13854 {pull}13873[#13873]
* [TSVB] Fix chart legend formatting in bottom position {pull}14084[#14084]
* [Fixes #12733, #12781] fixing refresh and auto refresh {pull}12752[#12752]
* [Fixes #12836] fix spy panel on discovery page {pull}12853[#12853]
* visual builder should set vis.initialized when ready {pull}13779[#13779]
* [Fixes #13770] updating time picker should not set vis to dirty {pull}13793[#13793]
* editor render method should not be called if request is pending {pull}13858[#13858]
* [Fixes #12759, #12761, #12763] Fix TSVB UX flow {pull}12770[#12770]
* fixing region map click handler {pull}12790[#12790]
* use parentNode iso parentElement {pull}13842[#13842]
* wrap responsehandler in angular promise {pull}14095[#14095]
* [TSVB] Greater Than or Equal to Interval Pattern {pull}13872[#13872]
* [Fixes #14470] [TSVB] Fixes #14470 - Remove field restriction on cardinality agg {pull}14483[#14483]
* [TSVB] Fix CSS Bug with Top N Values {pull}14254[#14254]
* [Fixes #14357] Fixes #14357 - Add courier's migrateFilters to dashboard context {pull}14481[#14481]
* [Fixes #14040, #13997] Show query and filter bars even when there's a linked search {pull}14212[#14212]
* [Fixes #13287] adds stroke back to area charts {pull}14149[#14149]
* [Fixes #13193] fixes legend refreshing {pull}14150[#14150]
* [Fixes #13252] fixes error when expanding gauge to full screen {pull}14114[#14114]
* pie chart design guidelines {pull}13661[#13661]
* [Fixes #14028] removing check for vis type on saved visualizations {pull}14093[#14093]
* [Fixes #10543] fixing ordering of series in legend {pull}14113[#14113]
  - order of legend for series should be same as provided in the configuration.
* [Fixes #14078] fixes console error when selecting a pipeline aggregation {pull}14148[#14148]
* allows visualize to load saved vis {pull}14146[#14146]
* [Fixes #13570] don't show spy panel with tsvb or timelion {pull}14090[#14090]
* moving shouldShowSpyPanel to visualize {pull}14269[#14269]
* refactor tagcloud to use tabify responseHandler {pull}14266[#14266]
* some updates to visualize loader {pull}14404[#14404]
* Visualize loader updates {pull}14528[#14528]
* [Fixes #13705] use correct element for size {pull}14105[#14105]
* [Fixes #12953] remove junk tests {pull}14191[#14191]
* use tabify for regionmap {pull}14364[#14364]
* [Fixes #13144] Fixes 13144 - Add ability to select percentiles in pipeline aggs {pull}13453[#13453]
* [Fixes #12069] apply field formatter to tag cloud {pull}14230[#14230]
* [Fixes #12134] add tickDecimals option to yaxis {pull}14371[#14371]
* [Fixes #14457] Set configurable to true so AggConfig decorated properties can be deleted {pull}14569[#14569]
* [Fixes #10236, #9053] Timelion .fit() - avoid removing values that are zero {pull}14560[#14560]
* [Fixes #13874] Allow panning beyond dateline {pull}13955[#13955]
  - Users can now pan and zoom the map beyond the date line.
* [TSVB] Allow negative time offsets {pull}14494[#14494]
* [Fixes #14565] Fix tagcloud sync issues, fix #14565 {pull}14566[#14566]

Watcher::
* Fixed problem related to creating a threshold-based alert in {kib} with a
Safari web browser. For example, the dialogs related to choosing fields and
aggregations were not shown in that browser.
* Fixed incorrect watch states in {kib}. In particular, the UI now respects the
actual state of the watch when exceptions occur in its input or condition.
* The HTTP client respects timeouts now and does not get stuck leading to stuck watches.

//[float]
//=== Regressions

//[float]
//=== Known Issues

[[release-notes-6.0.0-rc2]]
== {kib} 6.0.0-rc2

[float]
=== Bug Fixes

Design::
* [UI Framework] Fix margin for KuiLocalTabs which are applied to typographic elements. {pull}14451[#14451]
* [DESIGN]: Remove truncate from viz form text, remove additional wrapper {pull}14311[#14311]


Dev Tools::
* Fixed issue with input not being accepted in the *Sample Data* or
*Grok Pattern* fields in the Grok Debugger.

Discover::
* [Fixes #14270] Handle strings in source mapped as numbers in filter editor {pull}14318[#14318]
* [Fixes #7767] Fix invisible filters caused by missing index pattern {pull}14131[#14131]
* [Fixes #14319] Loosen check for dashboard queries in filters array {pull}14338[#14338]

Machine Learning::
* Fixed the position of text that appears when you hover over anomalies in {ml}
charts in a Safari web browser.
* Fixed {ml} charts so that they plot nulls as gaps rather than zeroes. This
change provides a more accurate visual indication of gaps in the data.
* Added support for periods in field names when you create jobs or datafeeds in
{kib}.

Management::
* [Fixes #14350] [Management] Fix FF quirk with max width in the import saved object modal {pull}14352[#14352]
* [Fixes #14592] [Management] Handle saved search import better {pull}14625[#14625]

Operations::
* Eslint/remove last amd modules {pull}14282[#14282]
* Add (GPL-2.0 OR MIT) license as allowed {pull}14439[#14439]
* [Fixes #14468] Fix crash when hitting shift+return in console {pull}14478[#14478]

Platform::
* [Fixes #14255] Use Boom.boomify instead of deprecated Boom.wrap {pull}14325[#14325]
* [Fixes #14497] Import Babel polyfill when running Jest tests {pull}14508[#14508]

Security::
* Ensured that privileged information does not appear in the error message when
a {kib} login attempt fails.

Sharing::
* Set pie chart border to match background in dark mode {pull}14375[#14375]
* [Fixes #14462] Prevent event handlers from being triggered after they are &quot;off&quot;ed {pull}14463[#14463]

Visualization::
* [Fixes #13983] Fix Timelion suggestions broken by upgrading to Angular 1.6.5 {pull}14316[#14316]
* [TSVB] Greater Than or Equal to Interval Pattern {pull}13872[#13872]
* [Fixes #14470] [TSVB] Fixes #14470 - Remove field restriction on cardinality agg {pull}14483[#14483]
* [TSVB] Fix CSS Bug with Top N Values {pull}14254[#14254]
* [Fixes #14357] Fixes #14357 - Add courier's migrateFilters to dashboard context {pull}14481[#14481]
* [Fixes #14040, #13997] Show query and filter bars even when there's a linked search {pull}14212[#14212]
* [Fixes #13287] adds stroke back to area charts {pull}14149[#14149]
* [Fixes #13193] fixes legend refreshing {pull}14150[#14150]
* [Fixes #13252] fixes error when expanding gauge to full screen {pull}14114[#14114]
* pie chart design guidelines {pull}13661[#13661]
* [Fixes #14028] removing check for vis type on saved visualizations {pull}14093[#14093]
* [Fixes #10543] fixing ordering of series in legend {pull}14113[#14113]
  - order of legend for series should be same as provided in the configuration.
* [Fixes #14078] fixes console error when selecting a pipeline aggregation {pull}14148[#14148]
* allows visualize to load saved vis {pull}14146[#14146]
* [Fixes #13570] don't show spy panel with tsvb or timelion {pull}14090[#14090]
* moving shouldShowSpyPanel to visualize {pull}14269[#14269]
* refactor tagcloud to use tabify responseHandler {pull}14266[#14266]
* some updates to visualize loader {pull}14404[#14404]
* Visualize loader updates {pull}14528[#14528]
* [Fixes #13705] use correct element for size {pull}14105[#14105]
* [Fixes #12953] remove junk tests {pull}14191[#14191]
* use tabify for regionmap {pull}14364[#14364]
* use proper SVG APIs to readout contents {pull}14458[#14458]
* [Fixes #13144] Fixes 13144 - Add ability to select percentiles in pipeline aggs {pull}13453[#13453]
* [Fixes #12069] apply field formatter to tag cloud {pull}14230[#14230]
* [Fixes #12134] add tickDecimals option to yaxis {pull}14371[#14371]
* [Fixes #14457] Set configurable to true so AggConfig decorated properties can be deleted {pull}14569[#14569]
* [Fixes #10236, #9053] Timelion .fit() - avoid removing values that are zero {pull}14560[#14560]
* [Fixes #13874] Allow panning beyond dateline {pull}13955[#13955]
  - Users can now pan and zoom the map beyond the date line.
* [TSVB] Allow negative time offsets {pull}14494[#14494]
* [Fixes #14565] Fix tagcloud sync issues, fix #14565 {pull}14566[#14566]
* Add tooltip to long title. {pull}14167[#14167]

Watcher::
* Fixed problem related to creating a threshold-based alert in {kib} with a
Safari web browser. For example, the dialogs related to choosing fields and
aggregations were not shown in that browser.
* Fixed incorrect watch states in {kib}. In particular, the UI now respects the
actual state of the watch when exceptions occur in its input or condition.

[[release-notes-6.0.0-rc1]]
== {kib} 6.0.0-rc1

[float]
=== Breaking Changes

Management::
* [indexPatterns] remove support for time patterns {pull}12158[#12158]
  - - Removes ability to create index patterns based on time patterns/intervals  - Adds a warning that informs users when they are using an index pattern that is now unsupported (disabled by default until #10442 is done, #12322)  - Does not address editing/remapping index patterns, see last task in #12242

Operations::
* Updates to status API, re-align status page {pull}10180[#10180]
* [Fixes #10181] Revert same port http -&gt; https redirect {pull}10930[#10930]
  - Kibana 5.x redirected requests from http to https on the same port if TLS was configured. Starting in Kibana 6.0.0 Kibana no longer redirects basic http traffic to https.

Other::
* [Fixes #13096] Remove highlight query {pull}13231[#13231]

Platform::
* [Fixes #12012] Fail to start if settings include unknown keys {pull}12554[#12554]
  - When a config file includes invalid keys or values, Kibana usually logs a message describing the issue and fails to start. There has been an exception to this rule since 4.2 that allowed top-level keys to be unknown/misspelled and only caused a warning to be logged. That exception has been removed and now any unknown or misspelled config key passed to Kibana (via the config file or command line flags) will prevent it from starting.

Visualization::
* [Fixes #10907] allows more flexible timelion queries {pull}10961[#10961]

[float]
=== New Features

Operations::
* Use single ES document type {pull}12794[#12794]
  - Starting in Elasticsearch 6.0, you are no longer able to create new indices
  with multiple index types. To accomplish the same effect as index types, a new
  type field was added to identify the document and the value mapped under the
  index to allow for strict mapping.

[float]
=== Enhancements

Design::
* [UI Framework] Reactify menu {pull}12135[#12135]
* [UI Framework] reactify prompt for items {pull}12151[#12151]
* [UI Framework] Allow custom placeholder for Tool Bar Search Box {pull}12959[#12959]
* Palette swap for accessibility / kibana 6 {pull}12085[#12085]
  - We re-skinned a decent portion of Kibana to be mostly AA accessibility compatible in regards to coloring of major navigation elements.

Discover::
* [Fixes #4785] Timepicker on the right {pull}11980[#11980]
* [Fixes #12635]  Improve the accessibility of the Discover screen {pull}12681[#12681]
* [Fixes #12343] Remove custom keyboard navigation in datepicker {pull}13644[#13644]

Management::
* [Management] Provide a way to fetch indices and template index patterns {pull}12200[#12200]
* [Management] More universal solution for fetching indices and aliases {pull}12405[#12405]
* [Fixes #11526, #8225] Move build info from management section to status page {pull}13341[#13341]

Operations::
* [Fixes #9276] Update mappings for kibana index {pull}9280[#9280]
* [eslint] Ignore ui_framework/doc_site/build {pull}12400[#12400]
* [git] ignore extra files in the root config/ directory {pull}9296[#9296]
* upgrade makelogs {pull}9295[#9295]
* [Fixes #9436] [optimizer] remove support for .jsx extension {pull}12712[#12712]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* Sets ES mapping to single_type=false {pull}11451[#11451]

Platform::
* [Fixes #10863] [uiSettings] support defining settings with uiExports {pull}12250[#12250]
  - - define a uiExports.uiSettingDefaults key your plugin definition to add uiSettingDefaults - uiSettingDefaults must be unique. If a key is already defined elsewhere then the server will not start. - defined settings will display in the advanced settings editor, along with the intended default value and description - the REST API is identical to before - the browser API is identical to before - defaults for timelion have been extracted to the timelion plugin definition and the existing defaults are defined in the kibana plugin definition
* [Fixes #12012] Refactor commaList filter logic into common util {pull}12553[#12553]
* [kbnServer/extensions] formalize request factories with helper {pull}12697[#12697]
* Allow plugins to turn off the â€œlink to last URLâ€ navigation helper {pull}13044[#13044]

Sharing::
* Add new react color picker to ui framework with tests {pull}12245[#12245]
* Reactify stateless table components {pull}12349[#12349]

Visualization::
* [Fixes #11193] hide current time marker when the timespan doesn't include the current time {pull}12266[#12266]
  - Only display current time marker on  a visualization when the x-axis extent includes the current time.
* add font size control to markdown visualization {pull}12860[#12860]
* [vis/resizeChecker] swap out implemenation with ResizeObserver polyfill {pull}9439[#9439]
* Add imports for SavedObjectRegistryProvider.register, fixing Timelion {pull}12844[#12844]
* [Fixes #7572] add polygon drawing tool {pull}11578[#11578]
  - On a coordinate map, users can now make a selection on the map by drawing a freehand polygon. Just like the earlier boundary selection, this adds a boundary filter to the filter bar.
* [Fixes #12491, #12904, #12887] Improve accessibility of visualizations {pull}13507[#13507]
* [Fixes #11856, #12888, #12900] Improve accessibility of visualization view {pull}13726[#13726]

[float]
=== Bug Fixes

Design::
* #12656 Fixes Aria-Hidden without value {pull}12658[#12658]
* [Fixes #12634] Improve date picker accessibility {pull}12676[#12676]

Dev Tools::
* Clarified field labels in the Grok Debugger.
* Added auto-sizing to the input, pattern, and output text areas in the Grok Debugger.
* Added auto-sizing of the custom patterns text area in the Grok Debugger.
* Enabled users to specify custom patterns in a well-known format in the Grok Debugger.
* [Fixes #10504] [console] Replace text/plain fallback with application/json {pull}12294[#12294]
* [Fixes #13142] Allow console to send multiline strings with CRLF line endings {pull}14094[#14094]
  - Console will now allow sending multiline strings on Windows.

Discover::
* [Fixes #12970] Make 'time picker' button in Discover no results prompt keyboard and screen-reader accessible. {pull}13046[#13046]
* [Fixes #12692] Re-enable filter editor suggestions {pull}13376[#13376]
* [Fixes #13738] Fix &quot;is one of&quot; filter editor {pull}13771[#13771]
* Fix filter editor test {pull}13971[#13971]
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]
* [Fixes #12639] Make filter pills keyboard accessible {pull}13331[#13331]
* [Fixes #12640] Make 'all filters' actions keyboard accessible {pull}13391[#13391]
* [Fixes #11830] Disable creation of &quot;exists&quot; filters for scripted fields {pull}13538[#13538]
* Fix relative z-index of spy panel and filter editor {pull}13717[#13717]
* [Fixes #5164] Check sort:options for Discover default sort order {pull}13708[#13708]
* [Fixes #13075] Improve missing index pattern error message {pull}13915[#13915]

Machine Learning::
* Fixed job creation failure that occurred when using saved searches with filters.

Management::
* [Fixes #9352] Change mapping of index-pattern fields to text {pull}9353[#9353]
* Remove premature abstraction {pull}13042[#13042]
* [Fixes #12861, #12862, #12863, #12865, #12868, #12870, #11526] [Management] Improve accessibility within management {pull}13364[#13364]
* [Fixes #12864] [Management] Accessibility - continued {pull}13576[#13576]
* [Fixes #13542] [Management] Fix breaking scope changes in the field format editor samples {pull}13549[#13549]
* fix create_index_pattern_method to handle no timefields {pull}13852[#13852]
* Work around #11959 for now {pull}12051[#12051]

Operations::
* [es archiver] fix error causes when requesting multiple index featureâ€¦ {pull}12473[#12473]
* Bump makelogs to 4.0.2 {pull}13007[#13007]
* Removing mapper.dynamic setting from the esArchiver mappings {pull}13970[#13970]
* Add linting rules for formatting JSX. {pull}12810[#12810]
* Upgrade eslint config to 0.8.1. {pull}13128[#13128]
* Move eslint-config-kibana into core {pull}12725[#12725]
* Remove `@elastic` folder from `packages/` {pull}13089[#13089]
* [npm] Upgrade wreck {pull}13849[#13849]

Other::
* Limit scripted fields to painless and expression langs {pull}9172[#9172]
* [6.0] update spy table headers when columns update {pull}13225[#13225]
* Add comments and inline docs for visualization saving and editing process. {pull}8208[#8208]
* Revert &quot;Make searching saved objects more powerful with query_string (#9870)&quot; {pull}10239[#10239]
* [Tests] Adjust makelog mappings and associated tests {pull}13014[#13014]
* misspelling substituting to subtituting in CONTRIBUTING.md {pull}8730[#8730]
* [Fixes #9763] [test fixtures] string -&gt; text/keyword for logstash data {pull}9799[#9799]
* [functional tests] Remove include_in_all {pull}10268[#10268]
* [Fixes #8861] Port #8880 to master Support Cloud testing {pull}8915[#8915]
* [Fixes #13743] Refetch even when the query has not changed {pull}13759[#13759]
* Update 6.0 breaking changes docs to match 5.0 structure {pull}8800[#8800]
* fixing linting issue which blocks CI {pull}9480[#9480]
* Testbed for aiding development in Kibana {pull}11571[#11571]
* [Pagination buttons] Adding test subjects to enable functional testing {pull}13925[#13925]
* [esvm] bump, remove outdated config {pull}12043[#12043]
* upgrade @elastic/eslint-import-resolver-kibana {pull}12296[#12296]
* [server] remove unused module {pull}12694[#12694]
* Updates esArchiver mappings to use single type {pull}13107[#13107]
* [esTestConfig] fix esvm directory {pull}13190[#13190]
* Add some testSubject helpers {pull}13305[#13305]
* [ui/queryBar/tests] attach $elem to DOM so &quot;click&quot; triggers &quot;submit&quot; {pull}13544[#13544]
* [savedObjectClient] decorate non-es errors too {pull}13596[#13596]
* [visualize] Fix agg param race {pull}13429[#13429]
* [Fixes #13439] Upgrade Angular to 1.6.5 {pull}13543[#13543]
* [aggTypes/paramTypes] naming cleanup {pull}14020[#14020]
* [uiFramework] fix webpack config {pull}14067[#14067]
* [Fixes #13936] Fix flaky tilemap tests {pull}13942[#13942]
* fix wrapped retry error. {pull}13967[#13967]
* Allow custom timeouts on click {pull}14042[#14042]
* Make breadcrumb a heading for screen readers, fix #12885 {pull}13734[#13734]
* Remove Stats API {pull}13896[#13896]
* Revert Stats API for 6.0 {pull}13969[#13969]
* Fixes path to the functional test runner {pull}12651[#12651]
* Removed _default_ from esArchiver test and updates data.json {pull}13122[#13122]

Platform::
* [Fixes #12047] [uiSettings] make service request based {pull}12243[#12243]
  - - removes server.uiSettings() (throws error with instructions)  - Adds request.getUiSettingsService() which returns a unique instance of UiSettingsService per request  - Methods on UiSettingsService no longer require a request object  - Adds server.uiSettingsServiceFactory(options) which can be used to create an instance of UiSettingsService with a custom callCluster() function
  * [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]
  * [ftr] remove timestamp prefix, jenkins has it built in now {pull}13825[#13825]
  * [ftr/config] prevent mochaOpts and timeouts conflict {pull}14060[#14060]
  * create babel-preset and babel-register modules {pull}13973[#13973]
  * [vis/requesting] only call when actually requesting {pull}14017[#14017]

Reporting::
* Fixed generated reports such that they show the time zone on the client, as
specified in the `dateFormat` field in the Advanced Settings.

Sharing::
* [Fixes #13421] Dashboard dark-theme fixes {pull}13690[#13690]
* [Fixes #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]
* [Fixes #12233] Be case insensitive when sorting on the visualize and dashboard landing pages {pull}13397[#13397]
* Fix bug with Dashboard breadcrumb alignment. {pull}13580[#13580]
* Stats API {pull}11992[#11992]
  - We introduced a new api endpoint at api/stats which displays counts of saved objects in your kibana index: {&quot;dashboard&quot;:{&quot;total&quot;:1},&quot;visualization&quot;:{&quot;total&quot;:3},&quot;search&quot;:{&quot;total&quot;:1},&quot;index_pattern&quot;:{&quot;total&quot;:1},&quot;index&quot;:&quot;.kibana&quot;}
* remove inline awaits {pull}13043[#13043]
* Stabilize and bring back flaky tests {pull}13034[#13034]
* [Fixes #13040] Make sure no one can show the chrome if the default setting is hidden. {pull}13250[#13250]
* [Fixes #13297] Fix full screen toggle button when panel is expanded {pull}13320[#13320]
* [Fixes #12484, #12485, #12483] Fix accessibility issues with saved object finder {pull}13152[#13152]
* Show full screen option even when write controls are hidden {pull}13247[#13247]
* [Fixes #13289] Use find service instead of remote  {pull}13296[#13296]
* [Fixes #12181] Fix dark theme issues with spy toggle and spy pane {pull}13345[#13345]
* [Fixes #13455] Avoid a wrapped retry and use exists instead of find, which will take up all the time allotted for the retry if it fails once {pull}13467[#13467]
* [Fixes #13754] Small clean up with visualize test + extra debug log {pull}13755[#13755]
* [Fixes #13588] Fix map updates not propagating to the dashboard {pull}13589[#13589]

Visualization::
* [Fixes #13010] Fixes #13010 - Add dateFormat config to TSVB Visualizations {pull}13626[#13626]
* [Fixes #3173] Date histogram brush - add range filter when field is not index pattern time field. {pull}12286[#12286]
* date_histogram: some bars are too big {pull}13068[#13068]
* [Fixes #13625] Map filter not set appropriately when spy panel is open {pull}13678[#13678]
* [Fixes #12782] visualize should send ready:vis event when done {pull}12796[#12796]
* [Fixes #12811] reload visualization on auto refresh trigger {pull}12823[#12823]
* [Fixes #12882] changing query should update url state {pull}12912[#12912]
* vis with saved search should not show query and filter panels {pull}12911[#12911]
* [Fixes #12925] analyze wildcard should not be part of default query {pull}12938[#12938]
* [Fixes #12940] query queue should be cleared on failure {pull}12942[#12942]
* Handle date histogram scaling for table vis and avg_buckets metric {pull}11929[#11929]
* [Fixes #13156] fixing disabling aggregations {pull}13686[#13686]
  - Disabled aggregations are no longer removed on applying visualization configuration.
* [Fixes #11414] remove default WMS settings {pull}11573[#11573]
* [Fixes #12497] allows to order percentiles freely {pull}12498[#12498]
* reload on global fetch event and emit vis:ready {pull}12805[#12805]
* Visualization accessibility issues {pull}13226[#13226]
* [Fixes #12896, #12897, #12898, #12899] Visualize Accessibility Issues {pull}13428[#13428]
* [Fixes #13713] [Accessibility] Use aria-label in TSVB React components, instead of ariaLabel. {pull}13714[#13714]
* Duration Formatting for TSVB {pull}13337[#13337]
* [Fixes #13471] Closes #13471 - Change split behavior of gauges and metrics vis {pull}13583[#13583]
* [TSVB] Adding check for model and visData {pull}13854[#13854]
* Fixes a bug with PR #13854 {pull}13873[#13873]
* [TSVB] Fix chart legend formatting in bottom position {pull}14084[#14084]
* [Fixes #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fixes #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fixes #12227] Fix discover sidebar Visualize button for geo_point fields {pull}13539[#13539]
* [Fixes #12733, #12781] fixing refresh and auto refresh {pull}12752[#12752]
* [Fixes #12836] fix spy panel on discovery page {pull}12853[#12853]
* [Fixes #12827] removes :filters from label {pull}12962[#12962]
* [Fixes #12983] resize was not detected correctly {pull}13239[#13239]
* Clamp the centroid to stay within the box boundaries {pull}13581[#13581]
* [Fixes #13551] fix heatmap sizing on dashboard {pull}13636[#13636]
* visual builder should set vis.initialized when ready {pull}13779[#13779]
* [Fixes #13770] updating time picker should not set vis to dirty {pull}13793[#13793]
* editor render method should not be called if request is pending {pull}13858[#13858]
* [6.0] fixes bad backport of #13877 {pull}14070[#14070]
* Remove some lodash usage {pull}10746[#10746]
* [Fixes #12759, #12761, #12763] Fix TSVB UX flow {pull}12770[#12770]
* fixing region map click handler {pull}12790[#12790]
* ensure editor mode propagates correctly {pull}13355[#13355]
* [Fixes #13517] remove geo_bounds agg from visualizations {pull}13536[#13536]
* [Fixes #13424] Exclude filter agg from visualizations {pull}13680[#13680]
* use parentNode iso parentElement {pull}13842[#13842]
* wrap responsehandler in angular promise {pull}14095[#14095]
* [Fixes #13572] Show a warning for non accessible charts for screen readers {pull}13573[#13573]

[[release-notes-6.0.0-beta2]]
== {kib} 6.0.0-beta2

[float]
=== Breaking Changes

Discover::
* [Fix for #13096] Remove highlight query {pull}13231[#13231]

Visualization::
* [Fix for #13425] Replace "marked" with "markdown-it" {pull}13623[#13623]

[float]
=== Enhancements

Dashboard::
*  If you had a chance to check out the new Dashboard Only Mode in 6.0.0-beta1,
we've changed things up a bit for 6.0.0-beta2. Previously we required you to
flag every role a user belonged to as being in the View dashboards only mode
in order for that user to be flagged as a Dashboard only mode user. In this
new set up, we created a reserved role, `kibana_dashboard_only_user`, that is
already pre-configured with read only access to the .kibana index, and set up
to be in Dashboard Only Mode. All you have to add is this one role to any user
and they will now be a Dashboard Only Mode user. We also got rid of this new
setting in the Roles UI, as this one role should suffice for most user's setups.
If you have a more complicated setup, such as multi-tenancy with multiple
`.kibana` indexes, you can create more dashboard only mode roles by adding
role names to the `xpackDashboardMode:roles` advanced setting. For more
information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Discover::
* [Fix for #12343] Remove custom keyboard navigation in datepicker {pull}13644[#13644]

Management::
* [Management] Provide a way to fetch index pattern titles {pull}13030[#13030]
  - This PR adds another method to the indexPatterns service to fetch index patterns titles. Since the code was nearly identical to how index pattern ids are fetched, I decided to slightly refactor the function to accept a parameter for which property to fetch from the index pattern. I've updated all usages to the new approach.
* [Fix for #11526, #8225] Move build info from management section to status page {pull}13341[#13341]

Monitoring::
* Added a tip in the pipeline viewer in {kib} when a pipeline contains a plugin
that does not have an id explicitly set in its configuration options. If you
specify an ID, you can track differences across pipeline changes. For more
information, see
{logstash-ref}/logstash-pipeline-viewer.html[Pipeline Viewer UI].

Platform::
* [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]

Security::
* Added reserved `kibana_dashboard_only_user` role. For more information, see
{kibana-ref}/xpack-dashboard-only-mode.html[Kibana Dashboard Only Mode].

Visualization::
* Upgrade kibana to leaflet 1.x {pull}12367[#12367]
* Duration Formatting for TSVB {pull}13337[#13337]

[float]
=== Bug Fixes

Design::
* Make breadcrumb a heading for screen readers, fix #12885 {pull}13734[#13734]
* [Accessibility] Make kbn_accessible_click part of autoload/all  {pull}13299[#13299]

Dev Tools::
* [Fix for #10504] [console] Replace text/plain fallback with application/json {pull}12294[#12294]
* [Fix for #10677] Keep top line in view when resizing Console to avoid losing user context {pull}13695[#13695]

Discover::
* [Fix for #12745] Handle booleans in filter editor {pull}13406[#13406]
* [Fix for #12692] Re-enable filter editor suggestions {pull}13376[#13376]
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]
* [Fix for #12639] Make filter pills keyboard accessible {pull}13331[#13331]
* [Fix for #12640] Make 'all filters' actions keyboard accessible {pull}13391[#13391]
* [Fix for #12416] Fix fixed-scroll on Discover page {pull}13516[#13516]
* [Fix for #12955] Improves dark theme support in the filter editor {pull}13522[#13522]
* [Fix for #11830] Disable creation of "exists" filters for scripted fields {pull}13538[#13538]
* [Fix for #13080] Fix blank index pattern selector in Discover {pull}13715[#13715]
* Fix relative z-index of spy panel and filter editor {pull}13717[#13717]

Management::
* [Fix for #12861, #12862, #12863, #12865, #12868, #12870, #11526] [Management] Improve accessibility within management {pull}13364[#13364]
* [Fix for #12864] [Management] Accessibility - continued {pull}13576[#13576]
* [Fix for #13542] [Management] Fix breaking scope changes in the field format editor samples {pull}13549[#13549]
* [Fix for #12872] Adds getAriaName function and applies it to advanced settings {pull}13448[#13448]
* [Fix for #13072] Prevents default index pattern name when ID is provided {pull}13353[#13353]
* [Fix for #13654] Changes verbage for opening an existing pattern {pull}13697[#13697]

Operations::
* Remove `@elastic` folder from `packages/` {pull}13089[#13089]

Platform::
* [Fix for #12933] [chrome/nav/lastUrl] do not track redirect routes {pull}13432[#13432]
  - When you navigate to a URL that Kibana doesn't recognize it tries to be helpful and send you to discover. At the same time it tries to remember the URL you were last using in each app and bring back where you left off when you come back. Unfortunately, these two features recently collided. If you somehow ended up at an unknown URL that looked like the URL for an app other than discover Kibana would get confused and remember the bad URL and immediately redirect you to discover. If you didn't give up right away you would probably try to go back to the app, but since it Kibana is trying to be helpful it would send you right back to the bad URL and then back to discover... Stupid right?! Well, it won't happen anymore!

Sharing::
* remove inline awaits {pull}13043[#13043]
* Stabilize and bring back flaky tests {pull}13034[#13034]
* [Fix for #12484, #12485, #12483] Fix accessibility issues with saved object finder {pull}13152[#13152]
* [Fix for #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]

Visualization::
* Fixes #12685 - Improve error handling for TSVB {pull}12688[#12688]
* [Fix for #13246] Fixes #13246 - Add checks for empty annotations {pull}13422[#13422]
* [Fix for #12866] Use devicePixelRatio to scale up and down canvas values in TSVB for Tooltip {pull}13565[#13565]
* [Fix for #13010] Fixes #13010 - Add dateFormat config to TSVB Visualizations {pull}13626[#13626]
* [Fix for #13625] Map filter not set appropriately when spy panel is open {pull}13678[#13678]
* don't hide metric if show labels is false {pull}13637[#13637]
  - goal/gauge show labels option should only hide the labels not the metric value
* [Fix for #13156] fixing disabling aggregations {pull}13686[#13686]
  - Disabled aggregations are no longer removed on applying visualization configuration.
* [Fix for #13546] custom value axis title should not be overiden {pull}13639[#13639]
* Visualization accessibility issues {pull}13226[#13226]
* [Fix for #12896, #12897, #12898, #12899] Visualize Accessibility Issues {pull}13428[#13428]
* [Fix for #13267, #13517] fix available metric aggs {pull}13518[#13518]
* [Fix for #12491, #12904, #12887] Improve accessibility of visualizations {pull}13507[#13507]
* [Fix for #11856, #12888, #12900] Improve accessibility of visualization view {pull}13726[#13726]
* Fix a bug with the interval label for TSVB {pull}13440[#13440]
* [Fix for #12113] Fixes #12113 - Add timezone to date histogram aggregations for TSVB {pull}13378[#13378]
* [Fix for #13471] Closes #13471 - Change split behavior of gauges and metrics vis {pull}13583[#13583]
* [Fix for #13244] [visualize spy] Pull index title instead of id {pull}13254[#13254]
* [Fix for #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fix for #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fix for #12227] Fix discover sidebar Visualize button for geo_point fields {pull}13539[#13539]
* [Fix for #12827] removes :filters from label {pull}12962[#12962]
* [Fix for #12983] resize was not detected correctly {pull}13239[#13239]
* Clamp the centroid to stay within the box boundaries {pull}13581[#13581]
* [Fix for #13551] fix heatmap sizing on dashboard {pull}13636[#13636]
* ensure editor mode propagates correctly {pull}13355[#13355]
* [Fix for #13517] remove geo_bounds agg from visualizations {pull}13536[#13536]
* [Fix for #13424] Exclude filter agg from visualizations {pull}13680[#13680]
* [Fix for #13572] Show a warning for non accessible charts for screen readers {pull}13573[#13573]

[[release-notes-6.0.0-beta1]]
== {kib} 6.0.0-beta1

[float]
=== Breaking Changes

Management::
* [indexPatterns] remove support for time patterns {pull}12158[#12158]
  - - Removes ability to create index patterns based on time patterns/intervals  - Adds a warning that informs users when they are using an index pattern that is now unsupported (disabled by default until #10442 is done, #12322)  - Does not address editing/remapping index patterns, see last task in #12242

Operations::
* Updates to status API, re-align status page {pull}10180[#10180]
* [Fix for #10181] Revert same port http -> https redirect {pull}10930[#10930]
  - Kibana 5.x redirected requests from http to https on the same port if TLS was configured. Starting in Kibana 6.0.0 Kibana no longer redirects basic http traffic to https.

Platform::
* [Fix for #12012] Fail to start if settings include unknown keys {pull}12554[#12554]
  - When a config file includes invalid keys or values, Kibana usually logs a message describing the issue and fails to start. There has been an exception to this rule since 4.2 that allowed top-level keys to be unknown/misspelled and only caused a warning to be logged. That exception has been removed and now any unknown or misspelled config key passed to Kibana (via the config file or command line flags) will prevent it from starting.
* Remove the es_admin proxy {pull}13000[#13000]
* Restrict ES data proxy to msearch and search {pull}13020[#13020]

Reporting::
* When {security} is enabled, reports will only be accessible to the user that created them.
* When {security} is enabled, user authorization is controlled by the
`xpack.reporting.roles.allow` setting in the `kibana.yml` which defaults to
`['reporting_user']`. Users will no longer have access to the underlying {reporting}
indices in {es} when assigned to the built-in `reporting_user` role. If using
custom reporting roles, the privileges to the indices will need to be removed, and the
role will need to be added to the `xpack-reporting.roles.allow` setting.

Visualization::
* [Fix for #10907] allows more flexible timelion queries {pull}10961[#10961]

[float]
=== New Features

Discover::
* Implement new Kibana query language {pull}12624[#12624]
  - This PR adds a new experimental query language to Kibana. The new language is turned off by default but can be enabled in the Management > Advanced Settings via the search:queryLanguage:switcher:enable option. Changing this setting to true will add a language selector to the query bar that allows users to choose the new language for their query. Details of the new query language can be found in the issue description (#12282).

Sharing::
* Full screen mode implementation for dashboard {pull}12265[#12265]
  - You can now enter full screen mode when viewing a dashboard. This hides the Chrome and the top nav bar.  If you have any filters applied, you'll see the filter bar, otherwise that will be hidden as well.  To exit full screen mode, hover over and click the Kibana button on the lower left side of the page, or simple press the ESC key.

Visualization::
* Visualize Refactor {pull}11786[#11786]
  - When creating new visualizations, developers are no longer restricted to using just Angular as a rendering technology. The changes now also enables developers to create custom editors that do not conform to the current sidebar-layout. Commonly used functionality - such as access to the query bar or timefilter - is now also exposed on the visualization object. This avoids the need to import individual modules from inside Kibana. These changes are a first step in a longer term effort to provide a robust long-lived programming interface for building visualizations in Kibana.

[float]
=== Enhancements

Design::
* We'd like to extend a special thanks to Arpad Popradi for his contributions to the UI Framework.
* [UI Framework] Reactify menu {pull}12135[#12135]
* Adding for and id attributes to labels and form elements {pull}12215[#12215]
* [UI Framework] Reactify kuiEvent and related CSS components (#12226) {pull}12228[#12228]
* [UI Framework] Reactify actionItem {pull}12142[#12142]
* [UI Framework] Reactify kuiCollapseButton {pull}12225[#12225]
* [UI Framework] Reactify kuiFieldGroup and related CSS components {pull}12260[#12260]
* [UI Framework] Update LocalNav examples to use tabIndex instead of tabindex, to eliminate React console warnings. {pull}12284[#12284]
* [UI Framework] Reactify kuiCard and related CSS components {pull}12197[#12197]
* [UI Framework] Reactify kuiBar {pull}12167[#12167]
* [UI Framework] Reactify kuiGallery and related CSS components {pull}12277[#12277]
* [UI Framework] Fix examples of Table component with ToolBar. {pull}12326[#12326]
* [UI Framework] Improve Warning Button contrast {pull}12327[#12327]
* [UI Framework] Reactify kuiHeaderBar and related CSS components {pull}12280[#12280]
* [UI Framework] Define consistent default, small, and wide sizing for form fields, and support them within ExpressionItems. {pull}12190[#12190]
* [UI Framework] Order UI Framework React component exports to be alphabetical {pull}12526[#12526]
* [UI Framework] Reactify kuiTabs and related CSS components {pull}12302[#12302]
* Replace brand-danger color with new global red color. {pull}12654[#12654]
* Make ui-select appearance match other inputs. {pull}12652[#12652]
* [UI Framework] remove check for ng-untouched class from formControlInvalid mixin {pull}12153[#12153]
* [UI Framework] reactify prompt for items {pull}12151[#12151]
* [UI Framework] Allow custom placeholder for Tool Bar Search Box {pull}12959[#12959]
* Palette swap for accessibility / kibana 6 {pull}12085[#12085]
  - We re-skinned a decent portion of Kibana to be mostly AA accessibility compatible in regards to coloring of major navigation elements.
* [Design] Use alpha logo, retain branding in fullscreen mode {pull}12735[#12735]
* [Fix for #12622] [Design] Update favicons {pull}12774[#12774]

Dev Tools::
* Respects ES customHeaders config for Console {pull}13033[#13033]

Discover::
* Accessible sort buttons {pull}12217[#12217]
* [Accessibility] Avoid empty th in doc-table header row {pull}12364[#12364]
  - The discover document table header cells provide appropriate hints to screen-readers.
* [Accessibility] Add button to skip past the discover doc table {pull}12539[#12539]
  - The new "Skip to bottom"-button in Discover is invisible unless focused. When activated it displays all remaining rows that were already loaded and focuses an anchor located below the table.
* Timepicker on the right {pull}11980[#11980]

Management::
* Uses SavedObjectsClient for UI Settings {pull}12747[#12747]
* [Management] Provide a way to fetch indices and template index patterns {pull}12200[#12200]
* [Management] More universal solution for fetching indices and aliases {pull}12405[#12405]
* [Management] Provide a way to fetch index pattern titles {pull}13030[#13030]
  - This PR adds another method to the indexPatterns service to fetch index patterns titles. Since the code was nearly identical to how index pattern ids are fetched, I decided to slightly refactor the function to accept a parameter for which property to fetch from the index pattern. I've updated all usages to the new approach.
* Add breadcrumb-page-title to management-app {pull}12765[#12765]
  - The bread-crumbs component allows for the consumer to pass in a page-title value which is appended as the final breadcrumb in the chain. This PR adds a scope argument to the management-app to take advantage of it.

Operations::
* Update mappings for kibana index {pull}9280[#9280]
* Saved objects compatibility layer {pull}12648[#12648]
* Support v6 mappings for saved objects import/export {pull}12792[#12792]
* Use single ES document type {pull}12794[#12794]
  - Starting in Elasticsearch 6.0, you are no longer able to create new indices with multiple index types. To accomplish the same effect as index types, a new type field was added to identify the document and the value mapped under the index to allow for strict mapping.
* Add eslint import resolution {pull}12025[#12025]
* [eslint] Ignore ui_framework/doc_site/build {pull}12400[#12400]
* [logging] Downgrade hapi connection errors when connecting with the wâ€¦ {pull}11209[#11209]
* [git] ignore extra files in the root config/ directory {pull}9296[#9296]
* upgrade makelogs {pull}9295[#9295]
* [Fix for #9436] [optimizer] remove support for .jsx extension {pull}12712[#12712]
* [elasticsearch/migrateConfig] use server.savedObjectsClientFactory() {pull}12767[#12767]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* Sets ES mapping to single_type=false {pull}11451[#11451]
* Adds bulk_get to SavedObjects {pull}12426[#12426]
* Uses SavedObjects API in Courier Saved Object {pull}12407[#12407]

Platform::
* Use SavedObjectsClient for Courier Index Pattern {pull}12719[#12719]
* Document merge conflict resolution process in CONTRIBUTING.md. {pull}12212[#12212]
* Update files_to_commit to find renamed files. {pull}12423[#12423]
* Remove client-side management of Kibana index mappings {pull}12820[#12820]
* Uses uuid for auto-generated ids and prepends type (#12834) {pull}12877[#12877]
* Use node instead of webpack config for jest {pull}12974[#12974]
* add api tag to api routes {pull}12948[#12948]
* Move Jest config to json {pull}12402[#12402]
* [uiSettings] support defining settings with uiExports {pull}12250[#12250]
  - - define a uiExports.uiSettingDefaults key your plugin definition to add uiSettingDefaults - uiSettingDefaults must be unique. If a key is already defined elsewhere then the server will not start. - defined settings will display in the advanced settings editor, along with the intended default value and description - the REST API is identical to before - the browser API is identical to before - defaults for timelion have been extracted to the timelion plugin definition and the existing defaults are defined in the kibana plugin definition
* Refactor commaList filter logic into common util {pull}12553[#12553]
* [kbnServer/extensions] formalize request factories with helper {pull}12697[#12697]
* Allow plugins to turn off the â€œlink to last URLâ€ navigation helper {pull}13044[#13044]

Sharing::
* Uses SavedObjectsClient for Short URL Lookup {pull}12787[#12787]
* Stats API {pull}11992[#11992]
  - We introduced a new api endpoint at api/stats which displays counts of saved objects in your kibana index: {"dashboard":{"total":1},"visualization":{"total":3},"search":{"total":1},"index_pattern":{"total":1},"index":".kibana"}
* Add new react color picker to ui framework with tests {pull}12245[#12245]
* Add label and clear link to color picker {pull}12422[#12422]
* Expose the variables for dynamically building doc links {pull}12513[#12513]
* Reactify stateless table components {pull}12349[#12349]

Other::
* ES Healthcheck v6 mapping compatibility {pull}12714[#12714]
* Remove field_stats pre-flight option for index patterns {pull}12814[#12814]
* Configurable custom response headers for server {pull}13045[#13045]

Visualization::
* Fix ui-select error border color and placeholder font color. {pull}12411[#12411]
* Fix appearance of error indicator in Visualize sidebar.  {pull}12410[#12410]
* Adding ability to configure grid for TSVB {pull}12385[#12385]
* Adding option for controlling if last bucket is dropped for TSVB {pull}12379[#12379]
  - This PR creates an option in "Panel Options" and the metric index pattern override to allow the user to control if the last bucket should be dropped. By default TSVB will drop the last bucket since most of the time it's incomplete. This also changes the method for dropping the last bucket to a more reliable method.
* Fixes #12602 - Change TSVB Fields API to use fieldCaps API {pull}12611[#12611]
* [Fix for #11193] hide current time marker when the timespan doesn't include the current time {pull}12266[#12266]
  - Only display current time marker on  a visualization when the x-axis extent includes the current time.
* [Fix for #7040] Add github-markdown.css to markdown visualization {pull}12377[#12377]
* Filter geohash_grid aggregation to map view box with collar {pull}12806[#12806]
* add font size control to markdown visualization {pull}12860[#12860]
* [vis/resizeChecker] swap out implemenation with ResizeObserver polyfill {pull}9439[#9439]
* Add imports for SavedObjectRegistryProvider.register, fixing Timelion {pull}12844[#12844]
* [Fix for #7572] add polygon drawing tool {pull}11578[#11578]
  - On a coordinate map, users can now make a selection on the map by drawing a freehand polygon. Just like the earlier boundary selection, this adds a boundary filter to the filter bar.
* Visualize refactor (bis) {pull}12715[#12715]

[float]
=== Bug Fixes

Design::
* [UI Framework] Fix disappearing borders for LocalNav search select. {pull}12803[#12803]
* [Accessibility] Make kbn_accessible_click part of autoload/all  {pull}13299[#13299]

Discover::
* Fix call to suggestions API to correctly use index pattern title {pull}12917[#12917]
* Remove simple_query_string hack now that multi_match supports * properly {pull}13285[#13285]
* Add documentation link to query bar when Kuery is selected {pull}13300[#13300]

Management::
* [Fix for #12728] Ensure conflicted fields can be searchable and/or aggregatable {pull}13070[#13070]
* [Fix for #13186] [Management] Update saved objects client usage to `attributes` instead of `_source` {pull}13223[#13223]
* [Fix for #12249] Fixes issue #12249 {pull}12254[#12254]
* Refine getIndices() to return an empty array if there are no matching indices. {pull}12659[#12659]
* Remove translations from management section {pull}13049[#13049]
* [Fix for #9352] Change mapping of index-pattern fields to text {pull}9353[#9353]

Operations::
* Remove `@elastic` folder from `packages/` {pull}13089[#13089]
* Fix jsonify license check (#12615) {pull}12619[#12619]
* Use es6 exports, replace module.exports {pull}12084[#12084]
* [es archiver] fix error causes when requesting multiple index featureâ€¦ {pull}12473[#12473]
* Bump makelogs to 4.0.2 {pull}13007[#13007]

Platform::
* Update HTML style guide with rule for camel casing attribute values. {pull}11653[#11653]
* Add title and tooltip accessibility information to HTML style guide. {pull}11655[#11655]
* [Fix for #12580] Update HTML style guide with rule about putting nested elements on multiple lines. {pull}12812[#12812]
* Remove Version Check for Dashboard Import API {pull}12476[#12476]
* Toast Notification should handle connection failed {pull}12609[#12609]
* [Fix for #12047] [uiSettings] make service request based {pull}12243[#12243]
  - - removes server.uiSettings() (throws error with instructions)  - Adds request.getUiSettingsService() which returns a unique instance of UiSettingsService per request  - Methods on UiSettingsService no longer require a request object  - Adds server.uiSettingsServiceFactory(options) which can be used to create an instance of UiSettingsService with a custom callCluster() function
* [Fix for #12436] Fix stats permissions and use underscore instead of dash {pull}12478[#12478]
* [server/indexPatterns] expose indexPatternService getter/factory {pull}13012[#13012]

Sharing::
* Restoring the dashboard-grid padding to appease Gridster {pull}12613[#12613]
* [Fix for #11857] Accessibility: Sharing UI - associate labels with controls {pull}12143[#12143]
* [Fix for #12600] Fix search issue on listing page + tests {pull}12618[#12618]
* [Fix for #11860] Make add edit buttons accessible {pull}12320[#12320]
* Need to trigger renderComplete when there are no results {pull}12380[#12380]
* [Fix for #12987] Children of buttons won't capture hover events in firefox {pull}13015[#13015]

Other::
* Fixes #12757 - Fixing field fetching for index patterns for TSVB {pull}12771[#12771]
* Limit scripted fields to painless and expression langs {pull}9172[#9172]
* update logstash data and mappings for single type {pull}13001[#13001]
* [Fix for #13032] TEST - Fix flaky map functional test {pull}13039[#13039]

Visualization::
* Fixes #11721 - Fix bug with axis updating when data format is changed in TSVB {pull}12386[#12386]
  - Axes in the Time Series Visual Builder now correctly update when changing a data formatter.
* Fixes #12763 - Add show_grid to the default vis structure for TSVB {pull}12769[#12769]
* Fixes #12777 - Add onBrush to Visualization component for TSVB {pull}12778[#12778]
* [Fix for #12802, #12762] Fix TSVB Visualizations to honor darkTheme {pull}12804[#12804]
* [Fix for #8076] Scaled date format for date histogram aggregation {pull}12384[#12384]
  - Format date_histogram aggregation bucket labels with format specified in Advanced Setting's "dateFormat:scaled"
* [Fix for #3230] Make vertical bar chart gutter widths consistent {pull}12264[#12264]
  - Histogram intervals are not always equal widths (monthly time intervals). Keeping gutter widths consistent and reducing the bar width provides a more visually appealing bar chart.
* [Fix for #3173] Date histogram brush - add range filter when field is not index pattern time field. {pull}12286[#12286]
* Remove event listener for resizeChecker when directive is destroyed {pull}12734[#12734]
* Date histogram axis label not getting updated when time interval changes {pull}12815[#12815]
* [Fix for #9530] Don't declare empty properties in Timelion's bool query {pull}9573[#9573]
* [Fix for #12782] visualize should send ready:vis event when done {pull}12796[#12796]
* [Fix for #11490] fix range agg label on heatmap y axis {pull}12754[#12754]
* [Fix for #12811] reload visualization on auto refresh trigger {pull}12823[#12823]
* [Fix for #12882] changing query should update url state {pull}12912[#12912]
* vis with saved search should not show query and filter panels {pull}12911[#12911]
* [Fix for #12925] analyze wildcard should not be part of default query {pull}12938[#12938]
* [Fix for #12838] fix gauge field formatters {pull}12913[#12913]
  - metric/goal/gauge now correctly respect the fieldFormatters when multiple metrics are defined.
* [Fix for #12940] query queue should be cleared on failure {pull}12942[#12942]
* Handle date histogram scaling for table vis and avg_buckets metric {pull}11929[#11929]
* [Fix for #12724] by default metric should not define color {pull}12993[#12993]
* [Fix for #11414] remove default WMS settings {pull}11573[#11573]
* ensure spy panel obscures underlying visualization {pull}12502[#12502]
* [Fix for #12497] allows to order percentiles freely {pull}12498[#12498]
* [Fix for #12732] Should only run visualization on Discover page when the indexpattern is time based {pull}12741[#12741]
* reload on global fetch event and emit vis:ready {pull}12805[#12805]
* Use the customMetric's formatter for pipeline aggregations {pull}11933[#11933]
* [Fix for #12919] Fix excessive redraw {pull}12931[#12931]
* [Fix for #12220] Should only fit on shapes that are part of the result {pull}12881[#12881]
* [Fix for #12172] Save layer setting in the region map UI {pull}12956[#12956]
* [Fix for #12189] Region map should respect saved center and zoom {pull}12883[#12883]
* [Fix for #13181, elastic/beats#4777] Add Checks to Dashboard Context {pull}13182[#13182]
* [Fix for #13244] [visualize spy] Pull index title instead of id {pull}13254[#13254]
* [Fix for #11586] Use ui-select for agg selector {pull}13292[#13292]
* [Fix for #13227] Send map filters through $newFilters so they get picked up by both kuery and lucene {pull}13251[#13251]
* [Fix for #12827] removes :filters from label {pull}12962[#12962]
* [Fix for #12983] resize was not detected correctly {pull}13239[#13239]
* [Fix for #13011] Should respect pinned filters {pull}13019[#13019]
* [Fix for #13255] Ensure we are working with data-series to avoid tooltip errors {pull}13266[#13266]
* [Fix for #12724] by default metric should not define color {pull}12993[#12993]
* [Fix for #12391] in percentage mode tooltip should also show percentages {pull}13217[#13217]
  - Tooltips now correctly display the percentage-value in area charts where the Y-Axis is formatted in percentage mode.
* [Fix for #12963] Exclude stacktrace from error response of Timelion backend {pull}12973[#12973]
  - the Timelion backend no longer includes the stacktrace as part of the server response. This stacktrace is now logged to the server console.
* Visualization accessibility issues {pull}13226[#13226]

[[release-notes-6.0.0-alpha2]]
== {kib} 6.0.0-alpha2

[float]
=== Breaking Changes

Core::
* Remove legacy pre-4.2 configurations {pull}12013[#12013]
* NODE_ENV no longer has an impact on Kibana {pull}12010[#12010]
* Only support 64 bit operating systems {pull}11941[#11941]

Watcher::
* The watch `_status` field has been renamed to `status`, as underscores in
field names will not be allowed.

[float]
=== New Features

Core::
* Getting started page {pull}11805[#11805]

Dashboard::
* Clone dashboard from view mode {pull}10925[#10925]

Reporting::
* Enabled export as CSV.

Security::
* Added a View Dashboards Only setting to the roles section under
Security management. If a user is assigned a role that has this setting
enabled, when they access Kibana it presents Dashboard Only mode.

Visualize::
* Region map {pull}10937[#10937]
* Gauge chart {pull}10336[#10336]

[float]
=== Enhancements

Core::
* Add new UI setting to control the amount of items in listing pages {pull}11674[#11674]

Discover::
* Apply filters to the event context view {pull}11466[#11466]

Machine Learning::
* Added a Datefeed Preview tab to expanded rows in the jobs list under
Job Management. This displays the JSON response from the preview endpoint.

Timelion::
* Support multiline Timelion queries {pull}11972[#11972]

Time series visual builder::
* Help text for writing painless scripts {pull}11936[#11936]
* Toggle for automatically applying changes to visualization {pull}11460[#11460]

Timepicker::
* Improve accessibility of the datepicker {pull}11753[#11753]

Watcher::
* Watcher indices no longer use multiple types.

[float]
=== Bug Fixes

Graph::
* Reinstated `_xpack/graph/_explore` as the correct graph endpoint.
`_xpack/_graph/_explore` is deprecated and will be removed in v7.0.

Timelion::
* Timelion tutorial now persists until you close it {pull}11962[#11962]

Time series visual builder::
* No longer trigger error in certain circumstances when using using percentiles {pull}11772[#11772]

Visualize::
* Disable save button if visualization is dirty {pull}11576[#11576]

[[release-notes-6.0.0-alpha1]]
== {kib} 6.0.0-alpha1

[float]
=== Breaking Changes

Watcher::
* The built-in HTTP client used in webhooks, the http input and the http email attachment has been replaced.
This results in the need to always escape all parts of an URL.
* The new built-in HTTP client also enforces a maximum request size, which defaults to 10mb.

[float]
=== Enhancements

Core::
* Deprecate Bootstrap buttons {pull}11352[#11352]
* Fix missing border of PaginatedTable rows in Firefox {pull}11452[#11452]
* Reinstate a few Bootstrap btn classes to support angular-ui-select. {pull}11569[#11569]
* Remove Bootstrap btn classes. {pull}11353[#11353]
* [UI Framework] Add AssistedInput. {pull}11343[#11343]
* [UI Framework] Add example of disabled kuiSelect. {pull}11345[#11345]
* [UI Framework] Add example of spinner Icon. {pull}11424[#11424]
* [UI Framework] Add kuiButton--fullWidth kuiButton--small, and kuiButtonGroup--fullWidth modifiers. {pull}11365[#11365]
* [UI Framework] Add support for dark theme links. {pull}11344[#11344]
* [UI Framework] Add support for selects and secondary inputs to LocalNavSearch component of UI Framework. {pull}11287[#11287]
* [UI Framework] Apply elastic.co look and feel to UI Framework docs site. {pull}11174[#11174]
* [UI Framework] Fix appearance of some form components in Firefox {pull}11589[#11589]
* [UI Framework] Make CardGroup split apart by default. Add kuiCardGroup--united modifier. {pull}11580[#11580]
* [UI Framework] Vertical align children in a FieldGroup. {pull}11374[#11374]
* Add small text input to UI framework {pull}11354[#11354]
* [UI Framework] Add uiFramework:build task. {pull}11402[#11402]
* Updates to status API, re-align status page {pull}10180[#10180]
* [status] 15m load average should use the 3rd index {pull}11202[#11202]
* Sets ES mapping to single_type=false {pull}11451[#11451]

Dashboard::
* Improve Dashboard screen-reader accessibility. {pull}11600[#11600]
* Update angular-bootstrap DatePicker with UI Framework classes. {pull}11378[#11378]
* Finish loading a dashboard even if some visualizations throw errors {pull}11324[#11324]
* React search box tool bar {pull}10821[#10821]
* Don't kill an entire dashboard because of one bad request {pull}11337[#11337]
* Add back dashboard descriptions {pull}11552[#11552]
* Hide the second toast when adding a new visualization straight from dashboard {pull}11621[#11621]

Dev Tools::
* Adding autocomplete rules for reindex API to Console {pull}10150[#10150]
* minimum_number_should_match was deprecated {pull}11316[#11316]

Discover::
* Add ignore_unmapped to geo filters to prevent exceptions {pull}11461[#11461]
* Create CollapseButton component class to standardize appearance of this button. {pull}11462[#11462]
* Migrate deprecated match query syntax {pull}11554[#11554]
* Remove the _source field toggle button which was accidentally reinstated {pull}11485[#11485]
* Search bar drop-down for managing filters {pull}10976[#10976]

Management::
* Convert Index Pattern Creation form UI to use UI Framework components. {pull}11419[#11419]
* Convert ScriptedFieldsTable and SourceFiltersTable to UI Framework components. {pull}11401[#11401]
* Removes the "Index contains time-based events" checkbox {pull}11409[#11409]
* Update Settings page with UI Framework components. {pull}11272[#11272]
* Report shard failures in the field_capabilities response {pull}11450[#11450]

Visualize::
* Fix spelling in time series visual builder {pull}11212[#11212]
* Adding label templates to legend keys for TSVB {pull}11266[#11266]
* Fix missing icons in Visualize listing. {pull}11243[#11243]
* Update illegible vis type icons with legible ones. {pull}11317[#11317]
* Fixing the fields for the numbers for percentile aggs for Time Series Visual Builder {pull}11169[#11169]
* using ui-select for field selection in visualize {pull}10998[#10998]
* add polygon drawing tool {pull}11578[#11578]
* Fix timelion's flot when neither thor nor monitoring are installed {pull}10412[#10412]

[float]
=== Bug Fixes

Core::
* [Fix for #4964] Disable dynamic/Implement static mappings {pull}10638[#10638]
* Fix visualize sort icon bug {pull}11568[#11568]

Visualize::
* Fixes #11232 - Add option for panel and global filters to annotations for TSVB {pull}11260[#11260]
* Fixes #11289 - Change top_n to not use split colors for TSVB {pull}11342[#11342]
* [Fix for #10907] allows more flexible timelion queries {pull}10961[#10961]
* [Fix for #10292] fixing heatmap black squares {pull}11489[#11489]
* [Fix for #4599] Add "Sum of series in legend" option {pull}7970[#7970]
* [Fix for #9053] [timelion/fit/carry] do nothing if there is not any data {pull}9054[#9054]
* [Fix for #8763] [vislib/tilemap/heatmap] scale the heatmap maxZoom with map zoom {pull}8765[#8765]
* [Fix for #9184] fixes error with custom interval in datetime aggregation {pull}9427[#9427]

Watcher::
* The HTTP client respects timeouts now and does not get stuck leading to stuck watches.
