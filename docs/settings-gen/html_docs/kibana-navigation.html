<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<meta name="keywords" content="Kibana diagnostic, diagnostics">
<title>Routing, Navigation and URL | Kibana Guide | Elastic</title>
<meta class="elastic" name="content" content="Routing, Navigation and URL | Kibana Guide">

<link rel="home" href="index.html" title="Kibana Guide"/>
<link rel="up" href="development-best-practices.html" title="Best practices"/>
<link rel="prev" href="plugin-performance.html" title="Keep Kibana fast"/>
<link rel="next" href="stability.html" title="Stability"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="plugin-performance.html">« Keep Kibana fast</a>
</span>
<span class="next">
<a href="stability.html">Stability »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="development.html">Developer guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="development-best-practices.html">Best practices</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Routing, Navigation and URL</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="kibana-navigation"></a>Routing, Navigation and URL</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>The Kibana platform provides a set of tools to help developers build consistent experience around routing and browser navigation.
Some of that tooling is inside <code class="literal">core</code>, some is available as part of various plugins.</p>
<p>The purpose of this guide is to give a high-level overview of available tools and to explain common approaches for handling routing and browser navigation.</p>
<p>This guide covers following topics:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="kibana-navigation.html#deep-linking" title="Deep-linking into Kibana apps">Deep-linking into Kibana apps</a>
</li>
<li class="listitem">
<a class="xref" href="kibana-navigation.html#navigating-between-kibana-apps" title="Navigating between Kibana apps">Navigating between Kibana apps</a>
</li>
<li class="listitem">
<a class="xref" href="kibana-navigation.html#routing" title="Setting up internal app routing">Setting up internal app routing</a>
</li>
<li class="listitem">
<a class="xref" href="kibana-navigation.html#history-and-location" title="Using history and browser location">Using history and browser location</a>
</li>
<li class="listitem">
<a class="xref" href="kibana-navigation.html#state-sync" title="Syncing state with URL">Syncing state with URL</a>
</li>
<li class="listitem">
<a class="xref" href="kibana-navigation.html#preserve-state" title="Preserving state between navigations">Preserving state between navigations</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="deep-linking"></a>Deep-linking into Kibana apps</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>Assuming you want to link from your app to <span class="strong strong"><strong>Discover</strong></span>. When building such URL there are two things to consider:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Prepending a proper <code class="literal">basePath</code>.
</li>
<li class="listitem">
Specifying <span class="strong strong"><strong>Discover</strong></span> state.
</li>
</ol>
</div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="_prepending_a_proper_basepath"></a>Prepending a proper <code class="literal">basePath</code></h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>To prepend Kibana&#8217;s <code class="literal">basePath</code> use <a href="https://github.com/elastic/kibana/tree/master/packages/core/http/core-http-browser-internal/src/base_path.ts" class="ulink" target="_top">core.http.basePath.prepend</a> helper:</p>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">const discoverUrl = core.http.basePath.prepend(`/discover`);

console.log(discoverUrl); // http://localhost:5601/bpr/s/space/app/discover</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="_specifying_state"></a>Specifying state</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p><span class="strong strong"><strong>Consider a Kibana app URL a part of app&#8217;s plugin contract:</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Avoid hardcoding other app&#8217;s URL in your app&#8217;s code.
</li>
<li class="listitem">
Avoid generating other app&#8217;s state and serializing it into URL query params.
</li>
</ol>
</div>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">// Avoid relying on other app's state structure in your app's code:
const discoverUrlWithSomeState = core.http.basePath.prepend(`/discover#/?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:'2020-09-10T11:39:50.203Z',to:'2020-09-10T11:40:20.249Z'))&amp;_a=(columns:!(_source),filters:!(),index:'90943e30-9a47-11e8-b64d-95841ca0b247',interval:auto,query:(language:kuery,query:''),sort:!())`);</pre>
</div>
<p>Instead, each app should expose <a href="https://github.com/elastic/kibana/tree/master/src/plugins/share/common/url_service/locators/README.md" class="ulink" target="_top">a locator</a>.
Other apps should use those locators for navigation or URL creation.</p>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">// Properly generated URL to *Discover* app. Locator code is owned by *Discover* app and available on *Discover*'s plugin contract.
const discoverUrl = await plugins.discover.locator.getUrl({filters, timeRange});
// or directly execute navigation
await plugins.discover.locator.navigate({filters, timeRange});</pre>
</div>
<p>To get a better idea, take a look at <span class="strong strong"><strong>Discover</strong></span> locator <a href="https://github.com/elastic/kibana/tree/master/src/plugins/discover/public/application/doc/locator.ts" class="ulink" target="_top">implementation</a>.
It allows specifying various <span class="strong strong"><strong>Discover</strong></span> app state pieces like: index pattern, filters, query, time range and more.</p>
<p>There are two ways to access locators of other apps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
From a plugin contract of a destination app <span class="strong strong"><strong>(preferred)</strong></span>.
</li>
<li class="listitem">
Using locator client in <code class="literal">share</code> plugin (case an explicit plugin dependency is not possible).
</li>
</ol>
</div>
<p>In case you want other apps to link to your app, then you should create a locator and expose it on your plugin&#8217;s contract.</p>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="navigating-between-kibana-apps"></a>Navigating between Kibana apps</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>Kibana is a single page application and there is a set of simple rules developers should follow
to make sure there is no page reload when navigating from one place in Kibana to another.</p>
<p>For example, navigation using native browser APIs would cause a full page reload.</p>
<div class="pre_wrapper lang-js">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-js">const urlToADashboard = core.http.basePath.prepend(`/dashboard/my-dashboard`);

// this would cause a full page reload:
window.location.href = urlToADashboard;</pre>
</div>
<p>To navigate between different Kibana apps without a page reload (by default) there are APIs in <code class="literal">core</code>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/contracts.ts" class="ulink" target="_top">core.application.navigateToApp</a>
</li>
<li class="listitem">
<a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/contracts.ts" class="ulink" target="_top">core.application.navigateToUrl</a>
</li>
</ul>
</div>
<p>Both methods offer customization such as opening the target in a new page, with an <code class="literal">options</code> parameter. All the options are optional be default.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/contracts.ts" class="ulink" target="_top">core.application.navigateToApp options</a>
</li>
<li class="listitem">
<a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/contracts.ts" class="ulink" target="_top">core.application.navigateToUrl options</a>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Rendering a link to a different Kibana app on its own would also cause a full page reload:</strong></span></p>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">const myLink = () =&gt;
  &lt;a href={urlToADashboard}&gt;Go to Dashboard&lt;/a&gt;;</pre>
</div>
<p>A workaround could be to handle a click, prevent browser navigation and use <code class="literal">core.application.navigateToApp</code> API:</p>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">const MySPALink = () =&gt;
  &lt;a
    href={urlToADashboard}
    onClick={(e) =&gt; {
      e.preventDefault();
      core.application.navigateToApp('dashboard', { path: '/my-dashboard' });
    }}
  &gt;
    Go to Dashboard
  &lt;/a&gt;;</pre>
</div>
<p>As it would be too much boilerplate to do this for each Kibana link in your app, there is a handy wrapper that helps with it:
<a href="https://github.com/elastic/kibana/tree/master/packages/shared-ux/link/redirect_app/impl/src/redirect_app_links.tsx" class="ulink" target="_top">RedirectAppLinks</a>.</p>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">const MyApp = () =&gt;
  &lt;RedirectAppLinks coreStart={{application: core.application}}&gt;
    {/*...*/}
    {/* navigations using this link will happen in SPA friendly way */}
      &lt;a href={urlToADashboard}&gt;Go to Dashboard&lt;/a&gt;
    {/*...*/}
  &lt;/RedirectAppLinks&gt;</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>There may be cases where you need a full page reload. While rare and should be avoided, rather than implement your own navigation,
you can use the <code class="literal">navigateToUrl</code> <code class="literal">forceRedirect</code> option.</p>
</div>
</div>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">const MyForcedPageReloadLink = () =&gt;
  &lt;a
    href={urlToSomeSpecialApp}
    onClick={(e) =&gt; {
      e.preventDefault();
      core.application.navigateToUrl('someSpecialApp', { forceRedirect: true });
    }}
  &gt;
    Go to Some Special App
  &lt;/a&gt;;</pre>
</div>
<p>If you also need to bypass the default onAppLeave behavior, you can set the <code class="literal">skipUnload</code> option to <code class="literal">true</code>. This option is also available in <code class="literal">navigateToApp</code>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="routing"></a>Setting up internal app routing</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>It is very common for Kibana apps to use React and React Router.
Common rules to follow in this scenario:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set up <code class="literal">BrowserRouter</code> and not <code class="literal">HashRouter</code>.
</li>
<li class="listitem">
<span class="strong strong"><strong>Initialize your router with <code class="literal">history</code> instance provided by the <code class="literal">core</code>.</strong></span>
</li>
</ul>
</div>
<p>This is required to make sure <code class="literal">core</code> is aware of navigations triggered inside your app, so it could act accordingly when needed.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">Core</code>'s <a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/scoped_history.ts" class="ulink" target="_top">ScopedHistory</a> instance.
</li>
<li class="listitem">
<a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/app_mount.ts" class="ulink" target="_top">Example usage</a>
</li>
<li class="listitem">
<a href="https://github.com/elastic/kibana/tree/master/test/plugin_functional/plugins/core_plugin_a/public/application.tsx#L120" class="ulink" target="_top">Example plugin</a>
</li>
</ul>
</div>
<p>Relative links will be resolved relative to your app&#8217;s route (e.g.: <code class="literal">http://localhost5601/app/{your-app-id}</code>)
and setting up internal links in your app in SPA friendly way would look something like:</p>
<div class="pre_wrapper lang-typescript jsx">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-typescript jsx">import {Link} from 'react-router-dom';

const MyInternalLink = () =&gt; &lt;Link to="/my-other-page"&gt;&lt;/Link&gt;</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="history-and-location"></a>Using history and browser location</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>Try to avoid using <code class="literal">window.location</code> and <code class="literal">window.history</code> directly.<br>
Instead, consider using <a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/scoped_history.ts" class="ulink" target="_top">ScopedHistory</a>
instance provided by <code class="literal">core</code>.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
This way <code class="literal">core</code> will know about location changes triggered within your app, and it would act accordingly.
</li>
<li class="listitem">
Some plugins are listening to location changes. Triggering location change manually could lead to unpredictable and hard-to-catch bugs.
</li>
</ul>
</div>
<p>Common use-case for using
<code class="literal">core</code>'s <a href="https://github.com/elastic/kibana/tree/master/packages/core/application/core-application-browser/src/scoped_history.ts" class="ulink" target="_top">ScopedHistory</a> directly:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Reading/writing query params or hash.
</li>
<li class="listitem">
Imperatively triggering internal navigations within your app.
</li>
<li class="listitem">
Listening to browser location changes.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="state-sync"></a>Syncing state with URL</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>Historically Kibana apps store <em>a lot</em> of application state in the URL.
The most common pattern that Kibana apps follow today is storing state in <code class="literal">_a</code> and <code class="literal">_g</code> query params in <a href="https://github.com/w33ble/rison-node#readme" class="ulink" target="_top">rison</a> format.</p>
<p><a id="query-params"></a>Those query params follow the convention:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">_g</code> (<span class="strong strong"><strong>global</strong></span>) - global UI state that should be shared and synced across multiple apps. common example from Analyze group apps: time range, refresh interval, <span class="strong strong"><strong>pinned</strong></span> filters.
</li>
<li class="listitem">
<code class="literal">_a</code> (<span class="strong strong"><strong>application</strong></span>) - UI state scoped to current app.
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>After migrating to KP platform we got navigations without page reloads. Since then there is no real need to follow <code class="literal">_g</code> and <code class="literal">_a</code> separation anymore. It&#8217;s up you to decide if you want to follow this pattern or if you prefer a single query param or something else. The need for this separation earlier is explained in <a class="xref" href="kibana-navigation.html#preserve-state" title="Preserving state between navigations">Preserving state between navigations</a>.</p>
</div>
</div>
<p>There are utils to help you to implement such kind of state syncing.</p>
<p><span class="strong strong"><strong>When you should consider using state syncing utils:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You want to sync your application state with URL in similar manner Analyze group applications do.
</li>
<li class="listitem">
You want to follow platform&#8217;s <a class="xref" href="kibana-navigation.html#history-and-location" title="Using history and browser location">working with browser history and location best practices</a> out of the box.
</li>
<li class="listitem">
You want to support <code class="literal">state:storeInSessionStore</code> escape hatch for URL overflowing out of the box.
</li>
<li class="listitem">
You should also consider using them if you&#8217;d like to serialize state to different (not <code class="literal">rison</code>) format. Utils are composable, and you can implement your own <code class="literal">storage</code>.
</li>
<li class="listitem">
In case you want to sync part of your state with URL, but other part of it with browser storage.
</li>
</ul>
</div>
<p><span class="strong strong"><strong>When you shouldn&#8217;t use state syncing utils:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Adding a query param flag or simple key/value to the URL.
</li>
</ul>
</div>
<p>Follow <a href="https://github.com/elastic/kibana/tree/master/src/plugins/kibana_utils/docs/state_sync#state-syncing-utilities" class="ulink" target="_top">these</a> docs to learn more.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="preserve-state"></a>Preserving state between navigations</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/developer/best-practices/navigation.asciidoc">edit</a></div>
</div></div></div>
<p>Consider the scenario:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
You are in <span class="strong strong"><strong>Dashboard</strong></span> app looking at a dashboard with some filters applied;
</li>
<li class="listitem">
Navigate to <span class="strong strong"><strong>Discover</strong></span> using in-app navigation;
</li>
<li class="listitem">
Change the time filter'
</li>
<li class="listitem">
Navigate to <span class="strong strong"><strong>Dashboard</strong></span> using in-app navigation.
</li>
</ol>
</div>
<p>You&#8217;d notice that you were navigated to <span class="strong strong"><strong>Dashboard</strong></span> app with the <span class="strong strong"><strong>same state</strong></span> that you left it with,
except that the time filter has changed to the one you applied on <span class="strong strong"><strong>Discover</strong></span> app.</p>
<p>Historically Kibana Analyze groups apps achieve that behavior relying on state in the URL.
If you&#8217;d have a closer look on a link in the navigation,
you&#8217;d notice that state is stored inside that link, and it also gets updated whenever relevant state changes happen:</p>
<p class="screenshot"><span class="image"><img src="images/state_inside_the_link.png" alt="State is stored inside the navigation link"></span></p>
<p>This is where <a class="xref" href="kibana-navigation.html#query-params">separation</a> into <code class="literal">_a</code> and <code class="literal">_g</code> query params comes into play. What is considered a <span class="strong strong"><strong>global</strong></span> state gets constantly updated in those navigation links. In the example above it was a time filter.
This is backed by <a href="https://github.com/elastic/kibana/tree/master/src/plugins/kibana_utils/public/state_management/url/kbn_url_tracker.ts#L57" class="ulink" target="_top">KbnUrlTracker</a> util. You can use it to achieve similar behavior.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>After migrating to KP navigation works without page reloads and all plugins are loaded simultaneously.
Hence, likely there are simpler ways to preserve state of your application, unless you want to do it through URL.</p>
</div>
</div>
</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="plugin-performance.html">« Keep Kibana fast</a>
</span>
<span class="next">
<a href="stability.html">Stability »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
