<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Kibana Query Language | Kibana Guide | Elastic</title>
<meta class="elastic" name="content" content="Kibana Query Language | Kibana Guide">

<link rel="home" href="index.html" title="Kibana Guide"/>
<link rel="up" href="kibana-concepts-analysts.html" title="Kibana concepts"/>
<link rel="prev" href="esql.html" title="ES|QL"/>
<link rel="next" href="lucene-query.html" title="Lucene query syntax"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles-v1.css" />
  </head>

  <!--© 2015-2025 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div class="navheader">
<span class="prev">
<a href="esql.html">« ES|QL</a>
</span>
<span class="next">
<a href="lucene-query.html">Lucene query syntax »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="kibana-concepts-analysts.html">Kibana concepts</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Kibana Query Language</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="kuery-query"></a>Kibana Query Language</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
</div></div></div>
<p>The Kibana Query Language (KQL) is a simple text-based query language for filtering data.</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
KQL only filters data, and has no role in aggregating, transforming, or sorting data.
</li>
<li class="listitem">
KQL is not to be confused with the <a class="xref" href="lucene-query.html" title="Lucene query syntax">Lucene query language</a>, which has a different feature set.
</li>
</ul>
</div>
<p>Use KQL to filter documents where a value for a field exists, matches a given value, or is within a given range.</p>
<div class="position-relative"><h3><a id="_filter_for_documents_where_a_field_exists"></a>Filter for documents where a field exists</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>To filter documents for which an indexed value exists for a given field, use the <code class="literal">*</code> operator.
For example, to filter for documents where the <code class="literal">http.request.method</code> field exists, use the following syntax:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.method: *</pre>
</div>
<p>This checks for any indexed value, including an empty string.</p>
<div class="position-relative"><h3><a id="_filter_for_documents_that_match_a_value"></a>Filter for documents that match  a value</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>Use KQL to filter for documents that match a specific number, text, date, or boolean value.
For example, to filter for documents where the <code class="literal">http.request.method</code> is GET, use the following query:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.method: GET</pre>
</div>
<p>The field parameter is optional. If not provided, all fields are searched for the given value.
For example, to search all fields for “Hello”, use the following:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">Hello</pre>
</div>
<p>When querying keyword, numeric, date, or boolean fields, the value must be an exact match,
including punctuation and case. However, when querying text fields, Elasticsearch analyzes the
value provided according to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/analysis.html" class="ulink" target="_top">field’s mapping settings</a>.
For example, to search for documents where <code class="literal">http.request.body.content</code> (a <code class="literal">text</code> field)
contains the text “null pointer”:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.body.content: null pointer</pre>
</div>
<p>Because this is a <code class="literal">text</code> field, the order of these search terms does not matter, and
even documents containing “pointer null” are returned. To search <code class="literal">text</code> fields where the
terms are in the order provided, surround the value in quotation marks, as follows:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.body.content: "null pointer"</pre>
</div>
<p>Certain characters must be escaped by a backslash (unless surrounded by quotes).
For example, to search for documents where <code class="literal">http.request.referrer</code> is <a href="https://example.com" class="ulink" target="_top">https://example.com</a>,
use either of the following queries:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.referrer: "https://example.com"
http.request.referrer: https\://example.com</pre>
</div>
<p>You must escape following characters:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">\():&lt;&gt;"*</pre>
</div>
<div class="position-relative"><h3><a id="_filter_for_documents_within_a_range"></a>Filter for documents within a range</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>To search documents that contain terms within a provided range, use KQL’s range syntax.
For example, to search for all documents for which <code class="literal">http.response.bytes</code> is less than 10000,
use the following syntax:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.response.bytes &lt; 10000</pre>
</div>
<p>To search for an inclusive range, combine multiple range queries.
For example, to search for documents where <code class="literal">http.response.bytes</code> is greater than 10000
but less than or equal to 20000, use the following syntax:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.response.bytes &gt; 10000 and http.response.bytes &lt;= 20000</pre>
</div>
<p>You can also use range syntax for string values, IP addresses, and timestamps.
For example, to search for documents earlier than two weeks ago, use the following syntax:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">@timestamp &lt; now-2w</pre>
</div>
<p>For more examples on acceptable date formats, refer to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/common-options.html#date-math" class="ulink" target="_top">Date Math</a>.</p>
<div class="position-relative"><h3><a id="_filter_for_documents_using_wildcards"></a>Filter for documents using wildcards</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>To search for documents matching a pattern, use the wildcard syntax.
For example, to find documents where <code class="literal">http.response.status_code</code> begins with a 4, use the following syntax:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.response.status_code: 4*</pre>
</div>
<p>By default, leading wildcards are not allowed for performance reasons.
You can modify this with the <a class="xref" href="advanced-options.html#query-allowleadingwildcards"><code class="literal">query:allowLeadingWildcards</code></a> advanced setting.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Only <code class="literal">*</code> is currently supported. This matches zero or more characters.</p>
</div>
</div>
<div class="position-relative"><h3><a id="_negating_a_query"></a>Negating a query</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>To negate or exclude a set of documents, use the <code class="literal">not</code> keyword (not case-sensitive).
For example, to filter documents where the <code class="literal">http.request.method</code> is <span class="strong strong"><strong>not</strong></span> GET, use the following query:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">NOT http.request.method: GET</pre>
</div>
<div class="position-relative"><h3><a id="_combining_multiple_queries"></a>Combining multiple queries</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>To combine multiple queries, use the <code class="literal">and</code>/<code class="literal">or</code> keywords (not case-sensitive).
For example, to find documents where the <code class="literal">http.request.method</code> is GET <span class="strong strong"><strong>or</strong></span> the <code class="literal">http.response.status_code</code> is 400,
use the following query:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.method: GET OR http.response.status_code: 400</pre>
</div>
<p>Similarly, to find documents where the <code class="literal">http.request.method</code> is GET <span class="strong strong"><strong>and</strong></span> the
<code class="literal">http.response.status_code</code> is 400, use this query:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.method: GET AND http.response.status_code: 400</pre>
</div>
<p>To specify precedence when combining multiple queries, use parentheses.
For example, to find documents where the <code class="literal">http.request.method</code> is GET <span class="strong strong"><strong>and</strong></span>
the <code class="literal">http.response.status_code</code> is 200, <span class="strong strong"><strong>or</strong></span> the <code class="literal">http.request.method</code> is POST <span class="strong strong"><strong>and</strong></span>
<code class="literal">http.response.status_code</code> is 400, use the following:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">(http.request.method: GET AND http.response.status_code: 200) OR
(http.request.method: POST AND http.response.status_code: 400)</pre>
</div>
<p>You can also use parentheses for shorthand syntax when querying multiple values for the same field.
For example, to find documents where the <code class="literal">http.request.method</code> is GET, POST, <span class="strong strong"><strong>or</strong></span> DELETE, use the following:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">http.request.method: (GET OR POST OR DELETE)</pre>
</div>
<div class="position-relative"><h3><a id="_matching_multiple_fields"></a>Matching multiple fields</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>Wildcards can also be used to query multiple fields. For example, to search for
documents where any sub-field of <code class="literal">datastream</code> contains “logs”, use the following:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">datastream.*: logs</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When using wildcards to query multiple fields, errors might occur if the fields are of
different types. For example, if <code class="literal">datastream.*</code> matches both numeric and string fields, the
above query will result in an error because numeric fields cannot be queried for string values.</p>
</div>
</div>
<div class="position-relative"><h3><a id="_querying_nested_fields"></a>Querying nested fields</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/concepts/kuery.asciidoc">edit</a></div>
<p>Querying <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/nested.html" class="ulink" target="_top">nested fields</a> requires a special syntax. Consider the
following document, where <code class="literal">user</code> is a nested field:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">{
  "user" : [
    {
      "first" : "John",
      "last" :  "Smith"
    },
    {
      "first" : "Alice",
      "last" :  "White"
    }
  ]
}</pre>
</div>
<p>To find documents where a single value inside the <code class="literal">user</code> array contains a first name of
“Alice” and last name of “White”, use the following:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">user:{ first: "Alice" and last: "White" }</pre>
</div>
<p>Because nested fields can be inside other nested fields,
you must specify the full path of the nested field you want to query.
For example, consider the following document where <code class="literal">user</code> and <code class="literal">names</code> are both nested fields:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">{
  "user": [
    {
      "names": [
        {
          "first": "John",
          "last": "Smith"
        },
        {
          "first": "Alice",
          "last": "White"
        }
      ]
    }
  ]
}</pre>
</div>
<p>To find documents where a single value inside the <code class="literal">user.names</code> array contains a first name of “Alice” <span class="strong strong"><strong>and</strong></span>
last name of “White”, use the following:</p>
<div class="pre_wrapper lang-yaml">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-yaml">user.names:{ first: "Alice" and last: "White" }</pre>
</div>
</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="esql.html">« ES|QL</a>
</span>
<span class="next">
<a href="lucene-query.html">Lucene query syntax »</a>
</span>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs-v1.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
