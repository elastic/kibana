<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Resolve copy saved objects to space conflicts API | Kibana Guide | Elastic</title>
<meta class="elastic" name="content" content="Resolve copy saved objects to space conflicts API | Kibana Guide">

<link rel="home" href="index.html" title="Kibana Guide"/>
<link rel="up" href="spaces-api.html" title="Kibana spaces APIs"/>
<link rel="prev" href="spaces-api-copy-saved-objects.html" title="Copy saved objects to space API"/>
<link rel="next" href="spaces-api-disable-legacy-url-aliases.html" title="Disable legacy URL aliases API"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>
</head>
<body>
<div class="navheader">
<span class="prev">
<a href="spaces-api-copy-saved-objects.html">« Copy saved objects to space API</a>
</span>
<span class="next">
<a href="spaces-api-disable-legacy-url-aliases.html">Disable legacy URL aliases API »</a>
</span>
</div>
<div class="book" lang="en">
<div class="titlepage">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Kibana Guide</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="api.html">REST API</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="spaces-api.html">Kibana spaces APIs</a></span>
</div>
<div>
<div><h1 class="title"><a id="id-1"></a>Resolve copy saved objects to space conflicts API</h1><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div>
<!--EXTRA-->
</div>
<div id="content">
<div class="section xpack">
<div class="titlepage"><div><div>
<div class="position-relative"><h2 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts"></a>Resolve copy saved objects to space conflicts API</h2><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>

<p><span class="Admonishment Admonishment--preview">
[<span class="Admonishment-title u-mono">preview</span>]
<span class="Admonishment-detail">
This functionality is in technical preview and may be changed or removed in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features.
</span>
</span> Overwrite saved objects that are returned as errors from the <a class="xref" href="spaces-api-copy-saved-objects.html" title="Copy saved objects to space API">copy saved objects to space API</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-request"></a>Request</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<p><code class="literal">POST &lt;kibana host&gt;:&lt;port&gt;/api/spaces/_resolve_copy_saved_objects_errors</code></p>
<p><code class="literal">POST &lt;kibana host&gt;:&lt;port&gt;/s/&lt;space_id&gt;/api/spaces/_resolve_copy_saved_objects_errors</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-prereqs"></a>Prerequisites</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<p>Execute the <a class="xref" href="spaces-api-copy-saved-objects.html" title="Copy saved objects to space API">copy saved objects to space API</a>, which returns the errors for you to resolve.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-path-params"></a>Path parameters</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">space_id</code>
</span>
</dt>
<dd>
(Optional, string) The ID of the space that contains the saved objects you want to copy. When <code class="literal">space_id</code> is unspecified in the URL, the default space is used. The <code class="literal">space_id</code> must be the same value used during the failed <a class="xref" href="spaces-api-copy-saved-objects.html" title="Copy saved objects to space API">copy saved objects to space API</a> operation.
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-request-body"></a>Request body</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">objects</code>
</span>
</dt>
<dd>
<p>
(Required, object array) The saved objects to copy. The <code class="literal">objects</code> must be the same values used during the failed <a class="xref" href="spaces-api-copy-saved-objects.html" title="Copy saved objects to space API">copy saved objects to space API</a> operation.
</p>
<details open>
<summary class="title">Properties of <code class="literal">objects</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
(Required, string) The saved object type.
</dd>
<dt>
<span class="term">
<code class="literal">id</code>
</span>
</dt>
<dd>
(Required, string) The saved object ID.
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">includeReferences</code>
</span>
</dt>
<dd>
(Optional, boolean) When set to <code class="literal">true</code>, all saved objects related to the specified saved objects are copied into the target spaces. The <code class="literal">includeReferences</code> must be the same values used during the failed <a class="xref" href="spaces-api-copy-saved-objects.html" title="Copy saved objects to space API">copy saved objects to space API</a> operation. The default value is <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">createNewCopies</code>
</span>
</dt>
<dd>
(Optional, boolean) Creates new copies of the saved objects, regenerates each object ID, and resets the origin. When enabled during the
initial copy, also enable when resolving copy errors. The default value is <code class="literal">true</code>.
</dd>
<dt>
<span class="term">
<code class="literal">retries</code>
</span>
</dt>
<dd>
<p>
(Required, object) The retry operations to attempt, which can specify how to resolve different types of errors. Object keys represent the
target space IDs.
</p>
<details open>
<summary class="title">Properties of <code class="literal">retries</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;space_id&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, array) The errors to resolve for the specified <code class="literal">&lt;space_id&gt;</code>.
</p>
<details open>
<summary class="title">Properties of <code class="literal">&lt;space_id&gt;</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
(Required, string) The saved object type.
</dd>
<dt>
<span class="term">
<code class="literal">id</code>
</span>
</dt>
<dd>
(Required, string) The saved object ID.
</dd>
<dt>
<span class="term">
<code class="literal">overwrite</code>
</span>
</dt>
<dd>
(Required, boolean) When set to <code class="literal">true</code>, the saved object from the source space (designated by the <a class="xref" href="spaces-api-resolve-copy-saved-objects-conflicts.html#spaces-api-resolve-copy-saved-objects-conflicts-path-params" title="Path parameters"><code class="literal">space_id</code> path parameter</a>) overwrites the conflicting object in the destination space. When set to <code class="literal">false</code>, this does nothing.
</dd>
<dt>
<span class="term">
<code class="literal">destinationId</code>
</span>
</dt>
<dd>
<p>
(Optional, string) Specifies the destination ID that the copied object should have, if different from the current ID.
</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">ignoreMissingReferences</code>
</span>
</dt>
<dd>
(Optional, boolean) When set to <code class="literal">true</code>, any missing references errors are ignored. When set to <code class="literal">false</code>, does nothing.
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section child_attributes">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-response-body"></a>Response body</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;space_id&gt;</code>
</span>
</dt>
<dd>
<p>
(object) An object that describes the result of the copy operation for the space. Includes the dynamic keys in the response.
</p>
<details open>
<summary class="title">Properties of <code class="literal">&lt;space_id&gt;</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">success</code>
</span>
</dt>
<dd>
(boolean) The copy operation was successful. When set to <code class="literal">false</code>, some objects may have been copied. For additional information, refer to the <code class="literal">successCount</code> and <code class="literal">errors</code> properties.
</dd>
<dt>
<span class="term">
<code class="literal">successCount</code>
</span>
</dt>
<dd>
(number) The number of objects that successfully copied.
</dd>
<dt>
<span class="term">
<code class="literal">errors</code>
</span>
</dt>
<dd>
<p>
(Optional, array) The errors that occurred during the copy operation. When errors are reported, the <code class="literal">success</code> flag is set to <code class="literal">false</code>.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>One object may result in multiple errors, which requires separate steps to resolve. For instance, a <code class="literal">missing_references</code> error and a
<code class="literal">conflict</code> error.</p>
</div>
</div>
<details open>
<summary class="title">Properties of <code class="literal">errors</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">id</code>
</span>
</dt>
<dd>
(string) The saved object ID that failed to copy.
</dd>
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
(string) The type of saved object that failed to copy.
</dd>
<dt>
<span class="term">
<code class="literal">error</code>
</span>
</dt>
<dd>
<p>
(object) The error that caused the copy operation to fail.
</p>
<details open>
<summary class="title">Properties of <code class="literal">error</code></summary>
<div class="content">
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">type</code>
</span>
</dt>
<dd>
(string) The type of error. For example, <code class="literal">conflict</code>, <code class="literal">ambiguous_conflict</code>, <code class="literal">missing_references</code>, <code class="literal">unsupported_type</code>, or <code class="literal">unknown</code>.
</dd>
<dt>
<span class="term">
<code class="literal">destinationId</code>
</span>
</dt>
<dd>
(Optional, string) The destination ID that was used during the copy attempt. This is only present on <code class="literal">conflict</code> errors types.
</dd>
<dt>
<span class="term">
<code class="literal">destinations</code>
</span>
</dt>
<dd>
(Optional, array) A list of possible object destinations with <code class="literal">id</code>, <code class="literal">title</code>, and <code class="literal">updatedAt</code> fields to describe each one. This is
only present on <code class="literal">ambiguous_conflict</code> error types.
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt>
<span class="term">
<code class="literal">successResults</code>
</span>
</dt>
<dd>
<p>
(Optional, array) Indicates successfully copied objects, with any applicable metadata.
</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Objects are created when all resolvable errors are addressed, including conflict and missing references errors. For more information,
refer to the <a class="xref" href="spaces-api-resolve-copy-saved-objects-conflicts.html#spaces-api-resolve-copy-saved-objects-conflicts-example" title="Examples">examples</a>.</p>
</div>
</div>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h3 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-example"></a>Examples</h3><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-example-1"></a>Resolve conflict errors</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<p>This example builds upon the <a class="xref" href="spaces-api-copy-saved-objects.html#spaces-api-copy-saved-objects-example-3" title="Failed copy (with conflict errors)">Copy objects API example with conflict errors</a>.</p>
<p>Resolve conflict errors for a data view, visualization, and <span class="strong strong"><strong>Canvas</strong></span> workpad by overwriting the existing saved objects:</p>
<div class="pre_wrapper lang-kibana">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-kibana">$ curl -X POST api/spaces/_resolve_copy_saved_objects_errors
{
  "objects": [{
    "type": "dashboard",
    "id": "my-dashboard"
  }],
  "includeReferences": true,
  "createNewCopies": false,
  "retries": {
    "sales": [
      {
        "type": "index-pattern",
        "id": "my-pattern",
        "overwrite": true
      },
      {
        "type": "visualization",
        "id": "my-vis",
        "overwrite": true,
        "destinationId": "another-vis"
      },
      {
        "type": "canvas",
        "id": "my-canvas",
        "overwrite": true,
        "destinationId": "yet-another-canvas"
      },
      {
        "type": "dashboard",
        "id": "my-dashboard"
      }
    ]
  }
}</pre>
</div>
<div class="kibana_widget" data-snippet="snippets/22.kibana"></div>
<p>The API returns the following:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">{
  "sales": {
    "success": true,
    "successCount": 4,
    "successResults": [
      {
        "id": "my-pattern",
        "type": "index-pattern",
        "meta": {
          "icon": "indexPatternApp",
          "title": "my-pattern-*"
        }
      },
      {
        "id": "my-vis",
        "type": "visualization",
        "destinationId": "another-vis",
        "meta": {
          "icon": "visualizeApp",
          "title": "Look at my visualization"
        }
      },
      {
        "id": "my-canvas",
        "type": "canvas-workpad",
        "destinationId": "yet-another-canvas",
        "meta": {
          "icon": "canvasApp",
          "title": "Look at my canvas"
        }
      },
      {
        "id": "my-dashboard",
        "type": "dashboard",
        "meta": {
          "icon": "dashboardApp",
          "title": "Look at my dashboard"
        }
      }
    ]
  }
}</pre>
</div>
<p>The result indicates a successful copy, and all four objects are created.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If a prior copy attempt resulted in resolvable errors, you must include a retry for each object you want to copy, including any that
were returned in the <code class="literal">successResults</code> array. In this example, we retried copying the dashboard accordingly.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<div class="position-relative"><h4 class="title"><a id="spaces-api-resolve-copy-saved-objects-conflicts-example-2"></a>Resolve missing reference errors</h4><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/api/spaces-management/resolve_copy_saved_objects_conflicts.asciidoc">edit</a></div>
</div></div></div>
<p>This example builds upon the <a class="xref" href="spaces-api-copy-saved-objects.html#spaces-api-copy-saved-objects-example-4" title="Failed copy (with missing reference errors)">Copy objects API example with missing reference errors</a>.</p>
<p>Resolve missing reference errors for a visualization by ignoring the error:</p>
<div class="pre_wrapper lang-kibana">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-kibana">$ curl -X POST api/spaces/_resolve_copy_saved_objects_errors
{
  "objects": [{
    "type": "dashboard",
    "id": "my-dashboard"
  }],
  "includeReferences": true,
  "createNewCopies": false,
  "retries": {
    "marketing": [
      {
        "type": "visualization",
        "id": "my-vis",
        "ignoreMissingReferences": true
      },
      {
        "type": "canvas",
        "id": "my-canvas"
      },
      {
        "type": "dashboard",
        "id": "my-dashboard"
      }
    ]
  }
}</pre>
</div>
<div class="kibana_widget" data-snippet="snippets/23.kibana"></div>
<p>The API returns the following:</p>
<div class="pre_wrapper lang-sh">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-sh">{
  "marketing": {
    "success": true,
    "successCount": 3,
    "successResults": [
      {
        "id": "my-vis",
        "type": "visualization",
        "meta": {
          "icon": "visualizeApp",
          "title": "Look at my visualization"
        }
      },
      {
        "id": "my-canvas",
        "type": "canvas-workpad",
        "meta": {
          "icon": "canvasApp",
          "title": "Look at my canvas"
        }
      },
      {
        "id": "my-dashboard",
        "type": "dashboard",
        "meta": {
          "icon": "dashboardApp",
          "title": "Look at my dashboard"
        }
      }
    ]
  }
}</pre>
</div>
<p>The result indicates a successful copy and all three objects are created.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If a prior copy attempt resulted in resolvable errors, you must include a retry for each object you want to copy, including any that
were returned in the <code class="literal">successResults</code> array. In this example, we retried copying the dashboard and canvas accordingly.</p>
</div>
</div>
</div>

</div>

</div>
</div>
</div><div class="navfooter">
<span class="prev">
<a href="spaces-api-copy-saved-objects.html">« Copy saved objects to space API</a>
</span>
<span class="next">
<a href="spaces-api-disable-legacy-url-aliases.html">Disable legacy URL aliases API »</a>
</span>
</div>
</body>
</html>
