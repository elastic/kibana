[[field-filter]]
== Filtering by field
You can filter the search results to display only those documents that contain
a particular value in a field. You can also create negative filters that
exclude documents that contain the specified field value.

You add field filters from the Fields list, the Documents table, or by manually
adding a filter. In addition to creating positive and negative filters, the
Documents table enables you to filter on whether or not a field is present. The
applied filters are shown below the Query bar. Negative filters are shown in red.

[float]
=== Add a filter

The quickest way to add a filter is from the Fields list.

. Click the name of the field you want to filter on. 
+
You'll see the number of documents that contain 
the field, up to top 5 values, and the percentage of documents contain each value.
+
[role="screenshot"]
image::images/filter-field.png[height=317]

. Use the image:images/PositiveFilter.jpg[Positive Filter] icon to show only documents that contain that value
and and image:images/NegativeFilter.jpg[Negative Filter] to exclude all documents with that value.

[float]
=== Apply an operator to a filter

. Click *Add Filter*.
+
You'll see a list of fields from the
index pattern that you are currently querying against.

. Select a field. 
+
[role="screenshot"]
image::images/add_filter_field.png[]
. Select an operation for your filter:
+
[horizontal]
`is`:: The value for the field matches the given value.
`is not`:: The value for the field does not match the given value.
`is one of`:: The field matches one of the specified values.
`is not one of`:: The value for the field does not match any of the specified values.
`is between`:: The value for the field is in the given range.
`is not between`:: The value for the field is not in the given range.
`exists`:: Any value is present for the field.
`does not exist`:: No value is present for the field.
. Choose the value(s) for your filter. 
+
Values from your indices may be suggested
as selections if you are filtering against an aggregatable field.

. (Optional) Specify a label for the filter. If you specify a label, it will be
displayed below the query bar instead of the filter definition.
. Click *Save*. The filter will be applied to your search and be displayed below
the query bar.

NOTE: If you are experiencing long-running queries as a result of the value suggestions, you can
turn off the suggestions by setting the advanced setting, `filterEditor:suggestValues`, to `false`.

[float]
[[filter-pinning]]
=== Manage Filters

To modify a filter, click on it and then click one of the actions in the dropdown menu.

Pin across all apps :: Pinned filters
persist when you switch contexts in Kibana. For example, you can pin a filter
in Discover and it remains in place when you switch to Visualize.
Note that a filter is based on a particular index field--if the indices being
searched don't contain the field in a pinned filter, it has no effect.
Edit filter :: Edit the
filter definition.  Enables you to manually update the filter and
specify a label for the filter.
Exclude results :: Switch from a positive
filter to a negative filter and vice-versa.
Temporarily disable :: Disable the filter without
removing it. Click again to reenable the filter. Diagonal stripes indicate
that a filter is disabled.
Remove filter :: Remove the filter.

To apply a filter action to all of the applied filters,
click *Actions* and select the action.

[float]
[[filter-edit]]
=== Modify the filter query
You can directly modify
the filter query that is performed to filter your search results. This
enables you to create more complex filters that are based on multiple fields.

. Click the edit button for the filter, then
click *Edit Query DSL*.

. Edit the query for the filter.
+
image::images/edit_filter_query_json.png[]
+
For example, you could use a
{ref}/query-dsl-bool-query.html[bool query] to create a filter for the
sample log data that displays the hits that originated from Canada or China that resulted in a 404 error:
+
==========
[source,json]
{
  "bool": {
    "should": [
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "China"
        }
      }
    ],
    "must": [
      {
        "term": {
          "response": "404"
        }
      }
    ]
  }
}
==========
