[[search-sessions]]
=== Save a long-running search in the background

++++
<titleabbrev>Save a long-running search</titleabbrev>
++++

Sometimes you might need to search through large amounts of data no matter
how long the search takes. While this might not happen often,
there are times that long-running queries are required.
Consider a threat hunting scenario, where you need to search through years of data.

If your query is running long, you can save your search session, which
allows {kib} to continue processing your request in the
background.  Save your search session from *Discover* or *Dashboard*,
and when your session is complete, view and manage it in *Stack Management*.

[role="screenshot"]
image::images/search-session.png[Search Session indicator displaying the current state of the search, which you can click to stop or save a running Search Session ]

Search sessions are <<search-session-settings-kb,enabled by default>>. Saving
a session is only available when
<<set-time-filter,auto refresh>> is off.


[float]
==== Requirements


* To save a session, you must have permissions for *Discover* and *Dashboard*,
and the <<kibana-feature-privileges, search sessions subfeature>>.

* To view and restore a saved session, you must have access to *Stack Management*.

[float]
==== Example: Save and manage a search session

You’re trying to understand a trend you see on a dashboard in {kib}. You
need to look at several years of data, currently in
{ref}/data-tiers.html#cold-tier[cold storage],
but you don’t have time to wait. You want {kib} to
continue working in the background, so tomorrow morning you can get your coffee,
open your browser, and pick up where you left off.

. Load your dashboard.
+
Your search session begins automatically. The icon after the dashboard title
displays the current state of the search. A clock indicates the session is in progress.
A checkmark indicates that the search session is complete.

. To instruct {kib} to continue the search in the background, click the clock icon,
and then click *Save session*. Once you save search session, you can start a new search,
navigate to a different application, or close the browser.
+
[role="screenshot"]
image::images/search-session-awhile.png[Search Session indicator displaying the current state of the search, which you can click to stop or save a running Search Session ]

. To view your saved searches, open the main menu, and then click
*Stack Management > Search Sessions*.  You can also open this view from the Search sessions popup once you save the session.
+
[role="screenshot"]
image::images/search-sessions-menu.png[Search Sessions management view with actions for inspecting, extending, and deleting a session. ]
+
. In *Search Sessions*, use the edit menu to:
** *Inspect* the queries and filters that makeup the session.
** *Extend* the expiration of a completed session.
** *Restore* a session. Relative dates become
absolute dates, panning is disabled for maps, and changing a filter, query, or drilldown starts a new search.
** *Delete* a session.
