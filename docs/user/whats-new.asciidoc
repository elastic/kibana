[[whats-new]]
== What's new in {minor-version}

coming::[8.1.0]

Here are the highlights of what's new and improved in {minor-version}.
For detailed information about this release,
check the <<release-notes, release notes>>.

Previous versions: {kibana-ref-all}/8.0/whats-new.html[8.0]

//NOTE: The notable-highlights tagged regions are re-used in the
//Installation and Upgrade Guide

// tag::notable-highlights[]

[float]
=== Discover

[float]
==== Field statistics on by default

Find fields to visualize and learn more about the shape of your data
with *Field statistics*.  This view
is similar to the *Index Data Visualizer* in *{ml-app}*.
For details, check out {kibana-ref}/show-field-statistics.html[Explore the fields in your data].

[role="screenshot"]
image::discover/images/field-statistics-view.png[Filter panel in Canvas]

[float]
==== New $ field syntax for Painless scripts
Creating runtime fields is now easier and more reliable.
{kib} now has shortcut for the field method when a script context supports the scripting fields API.
This shortcut replaces `field('fieldname').get(defaultValue)` with `$('fieldname', defaultValue)`.

*Before*

[source,js]
----------------------------------
if (!doc.containsKey('myfield') || doc['myfield'].empty) { return "unavailable" } else { return doc['myfield'].value }
----------------------------------

*After*

[source,js]
----------------------------------
$('myfield', 'unavailable')
----------------------------------

[float]
=== Dashboard

[float]
==== Synchronized ML anomaly visualizations
*{ml-app}* visualizations now synchronize your cursor position with the visualization panels you create with
*Lens*, *TSVB*, *Timelion*, and *Aggregation-based* editors.
Highlight an anomaly in time and see a visual indication
of this time on other panels.
The reverse is also true&mdash;hovering in another editor highlights the same point-in-time in *{ml-app}* panels.

[float]
=== Canvas

[float]
==== Add heatmap elements to workpads
Create heatmaps in workpads using *Canvas*-only functionality to fetch data, such as {es} SQL.
Configure your heatmap with flexible legend, axis,
and visual controls.

[float]
==== New filter capabilities
To help you create workpads with exactly the right behavior, use the new *Filters* on any
element or object to view the applied filters.

[role="screenshot"]
image::images/highlights-canvas-filter.png[Filter panel in Canvas]

[float]
=== Lens & visualizations

[float]
==== Combine fields with drag and drop

To view the top combinations in *Lens*, combine multiple fields with drag and drop.
This helps you to determine the combinations that contribute to your metric performance.

[role="screenshot"]
image::images/highlights-lens-combine.gif[Drag to combin in Lens]

[float]
==== Top values by rarity

When looking for root cause, it is often useful to find the rare values in your data.
Take advantage of the {es} rare terms aggregations in *Lens* and view the top values by rarity.
You'll find answers to "What's not normal here?"

[role="screenshot"]
image::images/highlights-lens-rarity.png[Rank by rarity in top values in Lens, width=50%]

[float]
==== Horizontal and vertical gauges

The gauge visualization adds extra context to your metrics.
Show minimum and maximum values dynamically by using a quick function or custom formula,
or set a static value for known metric ranges. Include a goal value to see
if a metric is above or below the goal. Set color bands to show ranges visually&mdash;similar
to reference lines in bar, line, and area visualizations. The gauge visualization is
in technical preview in 8.1.

[role="screenshot"]
image::images/highlights-lens-guage.png[Example horizontal gauge with target value in Lens, width=50%]

[float]
==== Mosaic visualization

The mosaic visualization, also known as marimekko or mekko, allows for side-by-side
comparison of two dimensions against a single metric. Treemaps and two-layered
pies do this as well, but the mosaic can be more effective for visual comparisons
by aligning the colors for the terms side-by-side. For the best mosaic visualizations, create with low cardinality dimensions.
The mosaic visualization is in technical preview in 8.1.

[role="screenshot"]
image::images/highlights-lens-mosaic.png[Example mosaic visualization in Lens]

[float]
==== Waffle visualization

Create proportional waffle visualizations that make
more efficient use of space than pie charts.
Waffles are designed for square spaces, which aligns well with how
most dashboards are created. Because waffles display the data in 1% blocks, they are best for low cardinality breakdowns, and are not recommended for small partitions.
You might be surprised how small you can make a waffle
visualization and maintain readability. The waffle visualization is in technical preview in 8.1.

[role="screenshot"]
image::images/highlights-lens-waffle.png[Example waffle visualization in Lens, width=50%]

[float]
==== Color by value in metrics

Apply color to the text and background of metric visualizations
based on the value of the metric. Set up color stops for multiple colors, similar
to what you can do in *Lens* tables, heatmaps, and gauge.

[role="screenshot"]
image::images/highlights-lens-metric.png[Metric color options in Lens, width=75%]

[float]
==== Sort tables in dashboard view mode
Enable users with view-only dashboard privileges to sort data tables on the fly, similar to the existing visualization editor behavior.

[float]
==== Filter formulas globally

Bring the familiar *Filter by* option for metrics defined by a formula.
Filter each part of your formula with KQL
without copying or pasting to all the aggregations in the formula.

[float]
==== Configurable donut visualizations
The inner area size (or donut hole) in the donut
visualization is now configurable&mdash;keeping the default as a smaller size to maximize space for
labels, but allowing you to change the option in *Lens*.

[role="screenshot"]
image::images/highlights-lens-donut.png[Inner area size setting in Lens donuts,width=75%]

[float]
==== Collapsable Suggestions panel

Get back some vertical space in *Lens* and save on the query cost of
suggestions by collapsing the *Suggestions* panel. {kib} remembers when you collapse
your suggestions the next time you use the editor with the same browser.

[float]
==== Improved color controls

The revised color stop editing experience offers a more streamlined way to specify
what happens outside of the defined ranges (above and below the minimum and maximum).
These revised controls also add the ability to easily distribute color stops
evenly in one click. Look for the new functionality in *Lens* tables, heatmaps, metrics,
and gauges.

[role="screenshot"]
image::images/highlights-lens-color.png[Color editing in Lens, width=50%]

[float]
=== Maps

[float]
==== Shapefile upload
Effortlessly load shapefiles into Elastic with this simple but powerful uploader built
right into the *Maps* application. Easily load local open data and boundaries for analysis and comparison.

[role="screenshot"]
image::images/highlights-maps-shapefile.png[Shapefile upload in Maps]

[float]
==== Vector tiles now the default
All new polygon layers now enable *Use vector tiles* by default.
Vector tiles offer the best performance and smooth
zooming over the alternative methods. You can change the scaling options
in layer settings if you prefer the previous approach.

// end::notable-highlights[]
