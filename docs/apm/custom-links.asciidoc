[[custom-links]]
=== Custom links

Elastic's custom link feature allows you to easily create up to 500 dynamic links
based on your specific APM data.
Custom links can be filtered to only appear in the APM app for relevant services,
environments, transaction types, or transaction names.

[float]
[[custom-links-create]]
==== Create a link

Each custom link consists of a label, url, and optional filter.
The easiest way to create a custom link is from within the actions dropdown in the transaction detail page.
This method will automatically apply filters, scoping the link to that specific service,
environment, transaction type, and transaction name.

Alternatively, you can create a custom link in the APM app by navigating to **Settings** > **Customize UI**,
and selecting **Create custom link**.

[float]
[[custom-links-label]]
===== Label

The name of your custom link.
This text will be shown in the actions context menu,
so keep it as short as possible.

TIP: Custom links are displayed alphabetically in the actions menu.

[float]
[[custom-links-url]]
===== URL

The URL your link points to.
URLs support dynamic field name variables, encapsulated in double curly brackets: `{{field.name}}`.
These variables will be replaced with transaction metadata when the link is clicked.

Because everyone's data is different,
you'll need to examine your own traces to see what metadata is available for use.
The easiest way to do this is to select a trace in the APM app, and click **Metadata** in the **Trace Sample** table. 

[role="screenshot"]
image::apm/images/example-metadata.png[Example metadata]

[float]
[[custom-links-filters]]
===== Filters

Filter each link to only appear so it only appears for specific services or transactions.
You can filter on the following fields:

* `service.name`
* `service.env`
* `transaction.type`
* `transaction.name`

Multiple values are allowed when comma separated.

[float]
[[custom-links-examples]]
==== Custom link examples

// Relevant documentation links
:jira-query-params: https://confluence.atlassian.com/jirakb/how-to-create-issues-using-direct-html-links-in-jira-server-159474.html
:github-query-params: https://help.github.com/en/github/managing-your-work-on-github/about-automation-for-issues-and-pull-requests-with-query-parameters

Not sure where to start with custom links?
Take a look at the examples below, and customize them to your liking!

**Email**

Create a custom link that emails the owner of a service.

Label: "Email {{service.name}} engineer"
Link: mailto:TEAM@COMPANY_NAME.com
Filters: `service.name` : `SERVICE_NAME`

Example
This link creates an email addressed to the owner of the python service.
It only appears on relevant services.

Label: `Email {{service.name}} engineer`
Link: `mailto:python_team@COMPANY_NAME.com`
Filters: `service.name` : `python`


**GitHub issue**

Open a GitHub issue with pre-populated metadata from the current transaction.
See the {github-query-params}[GitHub automation documentation] for a full list of supported query parameters. 

Label: `Open an issue in REPO_NAME`
Link: `https://github.com/ORG/REPO/issues/new?title=Test+title&body=Test+post`
Filters: `service.name` : `client`

Example
This link opens a new GitHub issue in the apm-agent-rum repository.
It populates the issue body with relevant metadata from the currently active trace.

Label: `Open an issue in apm-rum-js`
Link: `https://github.com/elastic/apm-agent-rum-js/issues/new?title=Investigate+APM+trace&body=Investigate+the+following+APM+trace%3A%0D%0A%0D%0A---%0D%0A%0D%0Aservice.name%3A+%7B%7Bservice.name%7D%7D%0D%0Atransaction.id%3A+%7B%7Btransaction.id%7D%7D%0D%0Acontainer.id%3A+%7B%7Bcontainer.id%7D%7D%0D%0Aurl.full%3A+%7B%7Burl.full%7D%7D`
Filters: `service.name` : `client`

[role="screenshot"]
image::apm/images/create-github-issue.png[Example github issue]

**Jira issue**

Create a Jira issue with metadata from the current transaction.
See the {jira-query-parans}[Jira application administration knowledge base]
for a full list of supported query parameters.

Label: `Open an issue in Jira`
Link: `https://JIRA_BASE_URL/secure/CreateIssueDetails!init.jspa?ARGUMENTS`

Example
This link opens a new issue in Jira.
It populates the issue body with relevant metadata from the currently active trace.

Label: `Open an issue in Jira`
Link: `https://test-site-33.atlassian.net/secure/CreateIssueDetails!init.jspa?pid=10000&issuetype=10001&summary=Created+via+APM&description=Investigate+the+following+APM+trace%3A%0D%0A%0D%0A---%0D%0A%0D%0Aservice.name%3A+%7B%7Bservice.name%7D%7D%0D%0Atransaction.id%3A+%7B%7Btransaction.id%7D%7D%0D%0Acontainer.id%3A+%7B%7Bcontainer.id%7D%7D%0D%0Aurl.full%3A+%7B%7Burl.full%7D%7D`

[role="screenshot"]
image::apm/images/create-jira-issue.png[Example jira issue]


**Kibana dashboard**

Link to custom dashboards (filtered via the URL) in Kibana?

Label: `Open transaction in custom visualization`
Link: `https://kibana-instance/app/kibana#/dashboard?_g=query:(language:kuery,query:'transaction.id:{{transaction.id}}'...`

Example
This link opens the current transaction.id in a custom kibana dashboard.
There are no filters set.

Label: `Open transaction in Python drilldown viz`
URL: `https://kibana-instance/app/kibana#/dashboard?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-24h,to:now))&_a=(description:'',filters:!(),fullScreenMode:!f,options:(hidePanelTitles:!f,useMargins:!t),panels:!((embeddableConfig:(),gridData:(h:15,i:cb79c1c0-1af8-472c-aaf7-d158a76946fb,w:24,x:0,y:0),id:c8c74b20-6a30-11ea-92ab-b5d3feff11df,panelIndex:cb79c1c0-1af8-472c-aaf7-d158a76946fb,type:visualization,version:'7.7')),query:(language:kuery,query:'transaction.id:{{transaction.id}}'),timeRestore:!f,title:'',viewMode:edit)`

**Slack**

Create a custom link that opens a slack channel.

Label: `Open SLACK_CHANNEL`
Link: `https://COMPANY_SLACK.slack.com/archives/SLACK_CHANNEL`
Filters: `service.name` : `SERVICE_NAME`

Example
This link opens a company slack channel.
It only appears when {{TODO: ENTER CRITERIA FOR WHEN THIS LINK WOULD APPEAR}}.

Label: `Open #apm-support`
Link: `https://microsoft.slack.com/archives/efk52kt23k`
Filters: `{{TODO: ENTER CRITERIA}}` : `{{TODO: ENTER CRITERIA}}`

**Website**

Create a custom link that opens an internal company site.

Label: `Open SLACK_CHANNEL`
Link: `https://COMPANY_SLACK.slack.com/archives/SLACK_CHANNEL`
Filters: `service.name` : `SERVICE_NAME`

Example
This link opens more data on a specific `user.email`.
It only appears on front-end transactions.

Label: `View user internally`
Link: `https://internal-site.company.com/user/{{user.email}}`
Filters: `service.name` : `client`
