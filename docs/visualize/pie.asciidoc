[[pie-chart]]
== Pie charts
With pie charts, you can display proportions, or slices, of your data compared to the total. 

[float]
[[piechart-choose-data]]
=== Choose the data you want to display

To choose the data that you want to display in the pie chart, specify the aggregation options. 

. In the *Metrics* area, expand the *Slice size* options.

. From the *Aggregation* dropdown, select the aggregation for the slice size.

. Specify the bucket aggregation.

.. In the *Buckets* area, click *Add*, then select *Split series* or *Split chart*.

.. Select the bucket aggregation.

. To further break down the data, specify sub aggregations.

.. In the *Buckets* area, click *Add*, then select *Split series* or *Split chart*.

.. Specify the sub aggregation settings.

.. To change the order, drag and drop the aggregations.

. Click *Apply changes* image:images/apply-changes-button.png[].

[float]
[[customize-format-piechart]]
=== Format the chart

To make the chart look the way you want, change the format options.

. Select *Options*.

. Specify the *Pie Settings* and *Labels Settings*.

. Click *Apply changes* image:images/apply-changes-button.png[].

[float]
[[piechart-example]]
== Example: Create a pie chart with Metricbeat data

To view the real-time CPU system data collected by Metricbeat, create a pie chart.

[float]
[[piechart-before-you-begin]]
=== Before you begin

In this tutorial, you'll use the data from https://www.elastic.co/guide/en/beats/metricbeat/current/index.html[Metricbeat]. To ingest the data locally, link:https://www.elastic.co/downloads/beats/metricbeat[download Metricbeat].

[float]
[[piechart-metricbeat-data]]
=== Create the visualization

To create the area chart visualization, use the visualization builder.

. In the side navigation, click *Visualize*.

. Click *Create new visualization*.

. On the *New Visualization* window, click *Pie Chart*.

. On the *New Area/Choose a source* window, select the metricbeat data.

[float]
[[piechart-metricbeat-data-aggregation]]
=== Choose the data aggregation

Specify the data you would like to display. 

. In the *Metrics* area, expand the *Slice size* options.

. From the *Aggregation* dropdown, select *Count*.

. In the *Custom label* field, enter a name for the y-axis. For example, `Count`.

[float]
[[piechart-metricbeat-data-bucket]]
=== Choose the bucket aggregation

Specify the bucket aggregation options.

. In the *Buckets* area, click *Add*, then select *Split slices*.

. From the *Aggregation* dropdown, select *Terms*.

. From the *Field* dropdown, select *system.cpu.total.pct*.

. Click *Apply changes* image:images/apply-changes-button.png[].

image:images/visualize-pie-chart01.png[Example pie chart]

[float]
[[piechart-metricbeat-data-format]]
=== Format the pie chart

To format the area chart, change the chart style and position the legend. 

. Select *Options*.

. From the *Legend Position* dropdown, select *left*.

. Select *Show Labels* and *Show Values*.

. Click *Apply changes* image:images/apply-changes-button.png[].

image:images/visualize-pie-chart02.png[Example pie chart]
