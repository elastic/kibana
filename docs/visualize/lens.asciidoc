[[lens]]
== Lens

beta[]

To easily make sense of your Elasticsearch data, *Lens* provides you with a simple and fast way to create basic visualizations.

With Lens, you can:

* Quickly build visualizations by simply dragging and dropping data fields.

* Get a quick summary of each data field to help you decide exactly what you want to display.

* Easily change the visualization type by selecting the automatically generated visualization suggestions.

[float]
[[choose-lens-visualization]]
=== Supported visualizations

Lens supports several types of visualizations.

[cols="^,<v,^,<v"]
|===
|*Bar*
|image:images/lens_bar_chart.png[Lens bar chart]
Display numerical comparisons across multiple categories. In bar charts,
data is displayed using a number of bars that represent a particular category.

|*Stacked Bar*
|image:images/lens_stacked_bar_chart.png[Lens stacked bar chart]
Display numerical comparisons across multiple categories, with the
added ability to compare the different parts of a particular category. In
stacked bar charts, each bar represents a particular category, and the segments
of the bar represent the subcategories of that bar.

|*Line*
|image:images/lens_line_chart.png[Lens line chart]
Display data trends over time. In line charts, data is displayed as a
series of data points that are connected by line segments.

|*Area*
|image:images/lens_area.png[Lens area chart]
Display one or more quantities over time. In area charts, points are
plotted and connected by lines to show the value of a quantity at several
different times.

|*Stacked Area*
|image:images/lens_stacked_area.png[Lens stacked area chart]
Display the evolution of numeric variables for several
categories stacked on top of each other.

|*Data Table*
|image:images/lens_data_table.png[Lens data table]
Display your raw data or aggregation results in a tabular format.

|*Metric*
|image:images/lens_metric.png[Lens metric]
Display the latest number in a data series.

|
|

|===

[float]
[[lens-aggregation-types]]
=== Supported aggregations

To build your visualizations, Lens supports these metric aggregations:

{ref}/search-aggregations-metrics-valuecount-aggregation.html[Count]:: Visualize the number of records, or documents, in a bucket.
If there are no bucket aggregations defined, the count is the total number of records, or documents, that match the query.

{ref}/search-aggregations-metrics-cardinality-aggregation.html[Unique Count]:: Cardinality of the field within the bucket.
Supports any data type.

{ref}/search-aggregations-metrics-avg-aggregation.html[Average]:: The mean value.

{ref}/search-aggregations-metrics-max-aggregation.html[Maximum]:: The highest value.

{ref}/search-aggregations-metrics-min-aggregation.html[Minimum]:: The lowest value.

{ref}/search-aggregations-metrics-sum-aggregation.html[Sum]:: The total value.

Lens supports these bucket aggregations:

{ref}/search-aggregations-bucket-datehistogram-aggregation.html[Date Histogram]:: Splits a date field into buckets by interval. When the date field is the primary time field for the index pattern, an internal is automatically chosen for you.

{ref}/search-aggregations-bucket-terms-aggregation.html[Top Values]:: Specifies the top or bottom _n_ elements of a field to display. Ordered by count or a custom metric.

[float]
[[create-lens-visualization]]
=== Build visualizations

When you build visualizations with Lens, you add data fields from the left column. The data fields that appear are dependent on the time filter.

There are two ways you can add data:

* Drag and drop the data fields onto the visualization builder pane.

* Drag and drop the data fields onto the *X-axis* and *Y-axis* fields in the right column.

As you drag and drop different data fields, Lens automatically builds the visualization.

[role="screenshot"]
image::images/lens_drag_drop.gif[]

TIP: Drag and drop capabilities are available only when Lens is able to build a visualization using that data.

If at any time you'd like to update the data that is displayed, click *Refresh*.

[float]
[[view-data-summaries]]
==== View data information

To help you decide exactly the data you want to display, get a quick summary of each data field.

To view the data information, navigate to a data field, then click *i*.

[role="screenshot"]
image::images/lens_data_info.gif[]

[float]
[[apply-lens-filters]]
==== Filter the data

To narrow the data fields you see in the left column, you can apply filters.

There are two ways to filter the data fields:

* In *Search field names*, enter the field name, then select the field.

* Click *Filter by type*, then click the filter you want to apply.

[float]
[[change-the-visualization-type]]
==== Change the visualization type

With Lens, you are no longer required to build each visualization from scratch. With smart suggestions, Lens automatically creates alternative visualizations that already include your selected data fields.

To view your data in another type of visualization, click the *Suggestions*.

[role="screenshot"]
image::images/lens_suggestions.gif[]

[float]
[[lens-tutorial]]
=== Lens tutorial

Ready to create your own visualization with Lens? Use the following tutorial to create a visualization that displays the average ticket price from the {kib} sample flight data.

[float]
[[lens-before-you-begin]]
==== Before you begin

For this tutorial, you'll need to add the <<add-sample-data, Sample flight data>>.

[float]
[[build-the-lens-visualization]]
==== Build the visualization

Add the data fields to the visualization builder pane.

. Open *Visualize*, then click *Create visualization*.

. On the *New Visualization* window, click *Lens*.

. In the left column, make sure that the *kibana_sample_data_flights* data appears.

. Drag and drop the *AvgTicketPrice* data field to the visualization builder pane.
+
[role="screenshot"]
image::images/lens_tutorial_1.png[Lens tutorial]

[float]
[[customize-lens-visualization]]
==== Customize the visualization

Customize your visualization to look the way you want.

. In the right column, click *timestamp*.

.. Select *Customize time interval*.

.. In the *Minimum interval* field, enter `1`, then select *days* from the dropdown.

.. In the *Label* field, enter a name for the x-axis. For example, `Average`.

. Click *Average of AvgTicketPrice*, then enter a name for the y-axis in the *Label* field. For example, `Average Ticket Price`.

. Click image:images/time-filter-calendar.png[], then click *Last 7 days*.
+
[role="screenshot"]
image::images/lens_tutorial_2.png[Lens tutorial]

[float]
[[change-lens-visualization-type]]
==== Change the visualization type

Click on each of the *Suggestions* to see if the other visualizations display your data better.

[role="screenshot"]
image::images/lens_tutorial_3.gif[Lens tutorial]
