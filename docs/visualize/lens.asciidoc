[[lens]]
== Lens

beta[]

*Lens* provides you with a simple and fast way to create visualizations that allow you to easily make sense of your Elasticsearch data.

With Lens, you can:

* Easily change the search query that retrieves the data you want to display.
* Use aggregations to plot any data set, no matter how large.
* Focus the data you want to display with searches and filters.
* Easily change the type of visualization that you want to use to display your data.

[float]
[[choose-lens-visualization]]
=== Types of Lens visualizations

Lens comes with these types of visualizations:

Bar:: Display numerical comparisons across multiple categories. In bar charts,
data is displayed using a number of bars that represent a particular category.
+
[role="screenshot"]
image::images/lens_bar_chart.png[Lens bar chart]

Stacked Bar::

Display numerical comparisons across multiple categories, with the
added ability to compare the different parts of a particular category. In
stacked bar charts, each bar represents a particular category, and the segments
of the bar represent the subcategories of that bar.
+
[role="screenshot"]
image::images/lens_stacked_bar_chart.png[Lens stacked bar chart]

Line::

Display data trends over time. In line charts, data is displayed as a
series of data points that are connected by line segments.
+
[role="screenshot"]
image::images/lens_line_chart.png[Lens line chart]

Area::

Display one or more quantities over time. In area charts, points are
plotted and connected by lines to show the value of a quantity at several
different times.
+
[role="screenshot"]
image::images/lens_area.png[Lens area chart]

Stacked Area::

Display the evolution of numeric variables for several
categories stacked on top of each other.
+
[role="screenshot"]
image::images/lens_stacked_area.png[Lens stacked area chart]

Data Table::

Display your raw data or aggregation results in a tabular format.
+
[role="screenshot"]
image::images/lens_data_table.png[Lens data table]

Metric::

Display the latest number in a data series.
+
[role="screenshot"]
image::images/lens_metric.png[Lens metric]

[float]
[[create-lens-visualization]]
=== Create Lens visualizations

To create your Lens visualizations, use the visualization builder.

[float]
[[choose-your-data]]
==== Choose the data you want to display

The data that you can add to the visualization builder appears in the left column.

. If you want to use a different index pattern, click the dropdown next to the index name, then select the index.

. To narrow the data fields that are displayed:

* Enter the field name in *Search for fields*.

* Click *Filter by type*, then click the filter

. To see the top values of a field, click *i* next to the field.

[float]
[[add-data]]
==== Add the data you want to display

Add your data to the Lens visualization builder by simply dragging and dropping the data fields to the visualization builder pane. Lens does the hard work for you and figures out which data to apply to the x- and y-axises.

[role="screenshot"]
image::images/lens_data_fields.gif[Data fields]

If you already know the data you want to apply to the x- and y-axises, drag and drop the data fields to the *X-axis* and *Y-axis* fields.

To refresh the data, click *Refresh*.

[float]
[[change-visualization-type]]
==== Change the visualization type

When you add your data, Lens automatically creates _Suggestions_. To quickly see the visualization that best displays your data, click on each of the *Suggestions*.

[role="screenshot"]
image::images/lens_suggestions.gif[Suggestions]

To manually change the visualization type, click *change* in the editor on the right, then select the visualization.

[float]
[[lens-tutorial]]
=== Lens tutorial

Ready to create a visualization with Lens? Use the following tutorial to create a visualization that displays the average ticket price from the {kib} sample flight data.

[float]
[[lens-before-you-begin]]
==== Before you begin

For this tutorial, you'll need to add the <<add-sample-data, Sample flight data>>.

[float]
[[build-the-lens-visualization]]
==== Build the visualization

Create the visualization, then add your data.

. Open *Visualize*.

. Click *Create visualization*.

. On the *New Visualization* window, click *Lens*.

. Make sure that the *kibana_sample_data_flights* data appears in the left column.

. Drag and drop the *AvgTicketPrice* data field to the visualization builder pane.
+
[role="screenshot"]
image::images/lens_tutorial_1.png[Lens tutorial]

[float]
[[customize-lens-visualization]]
==== Customize the visualization

Customize your visualization to look the way you want.

. In the right column, click *timestamp*.

.. Select *Customize time interval*.

.. In the *Minimum interval* field, enter `1`, then select *days* from the dropdown.

.. In the *Label* field, enter a name for the x-axis. For example, `Average`.

. Click *Average of AvgTicketPrice*, then enter a name for the y-axis in the *Label* field. For example, `Average Ticket Price`.

. Click image:images/time-filter-calendar.png[], then click *Last 7 days*.
+
[role="screenshot"]
image::images/lens_tutorial_2.png[Lens tutorial]

[float]
[[change-lens-visualization-type]]
==== Change the visualization type

To find the visualization that best displays your data, click on each of the *Suggestions*.

[role="screenshot"]
image::images/lens_tutorial_3.gif[Lens tutorial]
