[[supported-aggregations]]
=== Supported aggregations

All of these visualizations support:

**Metric Aggregations:**

* {ref}/search-aggregations-metrics-avg-aggregation.html[Average]
* {ref}/search-aggregations-metrics-valuecount-aggregation.html[Count]
* {ref}/search-aggregations-metrics-max-aggregation.html[Maximum]
* *{ref}/search-aggregations-metrics-percentile-aggregation.html[Median]*: The value that is in the 50% percentile.
* {ref}/search-aggregations-metrics-min-aggregation.html[Minimum]
* {ref}/search-aggregations-metrics-sum-aggregation.html[Sum]
* Unique Count: Uses the {ref}/search-aggregations-metrics-cardinality-aggregation.html[Cardinality] aggregation.
* Standard Deviation: Uses the {ref}/search-aggregations-metrics-extendedstats-aggregation.html[_extended stats_]
aggregation.
* Top Hit: Uses the {ref}/search-aggregations-metrics-top-hits-aggregation.html[_top hits_]
aggregation to return a sample of individual documents. If more than one document is matched by this aggregation, you must choose a technique for combining the values. These techniques are average, min, max, and sum.
* Percentiles: The {ref}/search-aggregations-metrics-percentile-aggregation.html[_percentile_] aggregation divides the
values in a numeric field into percentile bands that you specify. Select a field from the drop-down, then specify one
or more ranges in the *Percentiles* fields. Click the *X* to remove a percentile field. Click *+ Add* to add a
percentile field.
* Percentile Rank: The {ref}/search-aggregations-metrics-percentile-rank-aggregation.html[_percentile ranks_]
aggregation returns the percentile rankings for the values in the numeric field you specify. Select a numeric field
from the drop-down, then specify one or more percentile rank values in the *Values* fields. Click the *X* to remove a
values field. Click *+Add* to add a values field.

**Sibling Pipeline Aggregations:**

For each of the sibling pipeline aggregations you have to define a bucket and metric to calculate. This
has the effect of condensing many buckets into one number.

*Average Bucket*:: The {ref}/search-aggregations-pipeline-avg-bucket-aggregation.html[_avg bucket_]
calculates the (mean) average value of a specified metric in a sibling aggregation
*Sum Bucket*:: The {ref}/search-aggregations-pipeline-avg-bucket-aggregation.html[_sum bucket_]
calculates the sum of values of a specified metric in a sibling aggregation
*Min Bucket*:: The {ref}/search-aggregations-pipeline-avg-bucket-aggregation.html[_min bucket_]
calculates the minimum value of a specified metric in a sibling aggregation
*Max Bucket*:: The {ref}/search-aggregations-pipeline-avg-bucket-aggregation.html[_max bucket_]calculates the maximum value of a specified metric in a sibling aggregation

**Bucket Aggregations:**

*Date Histogram*:: A {ref}/search-aggregations-bucket-datehistogram-aggregation.html[_date histogram_] splits a date field into buckets by interval. If the date field is the primary time field for the index pattern, it will pick an automatic interval for you. You can also choose a minimum time interval. You can also specify a custom interval frame by selecting *Custom* as the interval and
specifying a number and a time unit in the text field. Custom interval time units are *s* for seconds, *m* for minutes,
*h* for hours, *d* for days, *w* for weeks, and *y* for years. Different units support different levels of precision,
down to one millisecond. Intervals are labeled at the start of the interval, using the date-key returned by Elasticsearch.For example, the tooltip for a monthly interval will show the first day of the month.

*Histogram*:: A standard {ref}/search-aggregations-bucket-histogram-aggregation.html[_histogram_] is built from a
numeric field. Specify an integer interval for this field. Select the *Show empty buckets* checkbox to include empty
intervals in the histogram.
*Range*:: With a {ref}/search-aggregations-bucket-range-aggregation.html[_range_] aggregation, you can specify ranges
of values for a numeric field. Click *Add Range* to add a set of range endpoints. Click the red *(x)* symbol to remove
a range.
*Date Range*:: A {ref}/search-aggregations-bucket-daterange-aggregation.html[_date range_] aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
{ref}/common-options.html#date-math[_date math_] expressions. Click *Add Range* to add a set of range endpoints.
Click the red *(x)* symbol to remove a range.
*IPv4 Range*:: The {ref}/search-aggregations-bucket-iprange-aggregation.html[_IPv4 range_] aggregation enables you to
specify ranges of IPv4 addresses. Click *Add Range* to add a set of range endpoints. Click the red *(x)* symbol to
remove a range.
*Terms*:: A {ref}/search-aggregations-bucket-terms-aggregation.html[_terms_] aggregation enables you to specify the top
or bottom _n_ elements of a  given field to display, ordered by count or a custom metric.
*Filters*:: Each filter creates a bucket of documents. You can specify a filter as a
<<kuery-query, KQL>> or <<lucene-query, Lucene>> query string. Click *Add Filter* to
add another filter. Click the image:images/labelbutton.png[Label button icon] *label* button to open the label field, where
you can type in a name to display on the visualization.
*Significant Terms*:: An aggregation that returns interesting or unusual occurrences of terms in a set. Uses the{es} {ref}/search-aggregations-bucket-significantterms-aggregation.html[Significant terms] aggregation.


These visualizations support parent pipeline aggregations:

* Line, Area and Bar charts
* Data table

**Parent Pipeline Aggregations:**

For each of the parent pipeline aggregations you have to define a bucket and metric to calculate. These
metrics expect the buckets to be ordered, and are especially useful for time series data.
You can also nest these aggregations, for example to produce a 3rd derivative.

* Derivative: The {ref}/search-aggregations-pipeline-derivative-aggregation.html[_derivative_] aggregation calculates
the derivative of specific metrics.
* Cumulative Sum: The {ref}/search-aggregations-pipeline-cumulative-sum-aggregation.html[_cumulative sum_] aggregation
calculates the cumulative sum of a specified metric in a parent histogram
* Moving Average: The {ref}/search-aggregations-pipeline-movavg-aggregation.html[_moving average_] aggregation  will
slide a window across the data and emit the average value of that window
* Serial Diff: The {ref}/search-aggregations-pipeline-serialdiff-aggregation.html[_serial differencing_] is a technique
where values in a time series are subtracted from itself at different time lags or period


Custom Kibana plugins can <<development-visualize-index, add more capabilities to the default editor>>
which includes support for adding more aggregations.

Most aggregations have extra options under the *Advanced* link:

include::json-input.asciidoc[]

When multiple bucket aggregations are defined, you can use the drag target on each aggregation to change
the aggregation's priority. For more information about working with aggregation order, see
https://www.elastic.co/blog/kibana-aggregation-execution-order-and-you[Kibana,
Aggregation Execution Order, and You].
