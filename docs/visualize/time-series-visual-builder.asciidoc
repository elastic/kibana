[[TSVB]]
== Visualize your data with TSVB

TSVB is a time series data visualizer that allows you to use the full power of 
Elasticsearch aggregation framework. With TSVB, you can combine an infinite 
number of aggregations and pipeline aggregations to display complex data in a 
meaningful way.

image:images/tsvb-screenshot.png["TSVB Interface"]

[float]
[[time-series-visualizations]]
=== TSVB visualizations

TSVB comes with 6 different visualizations. To switch between the 
visualizations, use the tabbed picker at the top of the interface.

==== Time Series

A histogram visualization that supports area, line, bar, and steps along with 
multiple y-axis. Fully customize the colors, points, line thickness, and fill 
opacity. Compare two time periods by using time shifting, and use annotations 
that are loaded from a separate index based on a query.

image:images/tsvb-screenshot.png["Time Series Visualization"]

==== Metric

A visualization that displays the latest number in a series. With the Metric 
visualization, you can use a primary and secondary metric, and customize the 
labels and backgrounds based on a set of rules.

image:images/tsvb-metric.png["Metric Visualization"]

==== Top N

A horizontal bar chart where the y-axis is based on a series of metrics, and the 
x-axis is the latest value in the series. The values are displayed in descending 
order, and you can customize the color of the bars based on a set of rules.

image:images/tsvb-top-n.png["Top N Visualization"]

==== Gauge

A single value gauge visualization based on the latest value in a series.
The face of the gauge displays as a half-circle or full-circle. You
can customize the thicknesses of the inner and outer lines to achieve a desired
design aesthetic, and customize the gauge and text color based on a set of rules.

image:images/tsvb-gauge.png["Gauge Visualization"]

==== Markdown

To customize the Markdown with data based on a set of series, enter Markdown 
text and embed Mustache template syntax.

image:images/tsvb-markdown.png["Markdown Visualization"]

==== Table

Display data from multiple time series by defining the field group to show in 
the rows, and the columns of data to display.

image:images/tsvb-table.png["Table Visualization"]

[[time-series-interface]]
=== Using the visualization interface

Choose how you want to display your data using the interface options.

==== Data Tab

The data tab is used for configuring the series for each visualization. This tab
allows you to add multiple series, depending on what the visualization
supports, with multiple aggregations composed together to create a single metric.
Here is a breakdown of the significant components of the data tab UI.

===== Series Label and Color

Each series supports a label which will be used for legends and titles depending on
which visualization type is selected. For series that are grouped by a term, you
can specify a mustache variable of `{{key}}` to substitute the term. For most
visualizations you can also choose a color by clicking on the swatch, this will display
the color picker.

image:images/tsvb-data-tab-label.png["Label Example"]

===== Metrics

Each series supports multiple metrics (aggregations); the last metric (aggregation)
is the value that will be displayed for the series, this is indicated with the "eye"
icon to the left of the metric. Metrics can be composed using pipeline aggregations.
A common use case is to create a metric with a "max" aggregation then create a "derivative"
metric and choose the previous "max" metric as the source; this will create a rate.

image:images/tsvb-data-tab-derivative-example.png["Derivative Example"]

===== Series Options

Each series also supports a set of options which are dependent on the type of
visualizations you have selected. Universal across each visualization type
you can configure:

* Data format
* Time range offset
* Index pattern, timestamp, and interval override


image:images/tsvb-data-tab-series-options.png["Default Series Options"]

For the Time Series visualization you can also configure:

* Chart type
* Options for each chart type
* Legend Visibility
* Y-Axis options
* Split color theme

image:images/tsvb-data-tab-series-options-time-series.png["Time Series Series Options"]

===== Group By Controls

At the bottom of the metrics there is a set of "Group By" controls that allows you
to specify how the series should be grouped or split. There are four choices:

* Everything
* Filter (single)
* Filters (multiple with configurable colors)
* Terms

By default the series is grouped by everything.

==== Panel Options Tab

The panel options tab is used for configuring the entire panel; the set of options
available is dependent on which visualization you have selected. Below is a list
of the options available per visualization:

*Time Series*

* Index pattern, timestamp, and Interval
* Y-Axis min and max
* Y-Axis position
* Background color
* Legend visibility
* Legend position
* Panel filter

*Metric*

* Index pattern, timestamp, and interval
* Panel filter
* Color rules for background and primary value

*Top N*

* Index pattern, timestamp, and interval
* Panel filter
* Background color
* Item URL
* Color rules for bar colors

*Gauge*

* Index pattern, timestamp, and interval
* Panel filter
* Background color
* Gauge max
* Gauge style
* Inner gauge color
* Inner gauge width
* Gauge line width
* Color rules for gauge line

*Markdown*

* Index pattern, timestamp, and interval
* Panel filter
* Background color
* Scroll bar visibility
* Vertical alignment of content
* Custom Panel CSS with support for Less syntax

==== Annotations Tab

The annotations tab is used for adding annotation data sources to the Time Series
Visualization. You can configure the following options:

* Index pattern and time field
* Annotation color
* Annotation icon
* Fields to include in message
* Format of message
* Filtering options at the panel and global level

image:images/tsvb-annotations.png["Annotation Tab"]

==== Markdown Tab

The markdown tab is used for editing the source for the Markdown visualization.
The user interface has an editor on the left side and the available variables from
the data tab on the right side. You can click on the variable names to insert
the mustache template variable into the markdown at the cursor position. The mustache
syntax uses the Handlebar.js processor which is an extended version of the Mustache
template language.

image:images/tsvb-markdown.png["Markdown Tab"]
