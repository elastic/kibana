<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [kibana-plugin-core-server](./kibana-plugin-core-server.md) &gt; [DeprecationsServiceSetup](./kibana-plugin-core-server.deprecationsservicesetup.md)

## DeprecationsServiceSetup interface

The deprecations service provides a way for the Kibana platform to communicate deprecated features and configs with its users. These deprecations are only communicated if the deployment is using these features. Allowing for a user tailored experience for upgrading the stack version.

The Deprecation service is consumed by the upgrade assistant to assist with the upgrade experience.

If a deprecated feature can be resolved without manual user intervention. Using correctiveActions.api allows the Upgrade Assistant to use this api to correct the deprecation upon a user trigger.

<b>Signature:</b>

```typescript
export interface DeprecationsServiceSetup 
```

## Example


```ts
import { DeprecationsDetails, GetDeprecationsContext, CoreSetup } from 'src/core/server';

async function getDeprecations({ esClient, savedObjectsClient }: GetDeprecationsContext): Promise<DeprecationsDetails[]> {
  const deprecations: DeprecationsDetails[] = [];
  const count = await getTimelionSheetsCount(savedObjectsClient);

  if (count > 0) {
    // Example of a manual correctiveAction
    deprecations.push({
      message: `You have ${count} Timelion worksheets. The Timelion app will be removed in 8.0. To continue using your Timelion worksheets, migrate them to a dashboard.`,
      documentationUrl:
        'https://www.elastic.co/guide/en/kibana/current/create-panels-with-timelion.html',
      level: 'warning',
      correctiveActions: {
        manualSteps: [
          'Navigate to the Kibana Dashboard and click "Create dashboard".',
          'Select Timelion from the "New Visualization" window.',
          'Open a new tab, open the Timelion app, select the chart you want to copy, then copy the chart expression.',
          'Go to Timelion, paste the chart expression in the Timelion expression field, then click Update.',
          'In the toolbar, click Save.',
          'On the Save visualization window, enter the visualization Title, then click Save and return.',
        ],
      },
    });
  }

  // Example of an api correctiveAction
  deprecations.push({
    "message": "User 'test_dashboard_user' is using a deprecated role: 'kibana_user'",
    "documentationUrl": "https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-user.html",
    "level": "critical",
    "correctiveActions": {
        "api": {
            "path": "/internal/security/users/test_dashboard_user",
            "method": "POST",
            "body": {
                "username": "test_dashboard_user",
                "roles": [
                    "machine_learning_user",
                    "enrich_user",
                    "kibana_admin"
                ],
                "full_name": "Alison Goryachev",
                "email": "alisongoryachev@gmail.com",
                "metadata": {},
                "enabled": true
            }
        },
        "manualSteps": [
            "Using Kibana user management, change all users using the kibana_user role to the kibana_admin role.",
            "Using Kibana role-mapping management, change all role-mappings which assing the kibana_user role to the kibana_admin role."
        ]
    },
  });

  return deprecations;
}


export class Plugin() {
  setup: (core: CoreSetup) => {
    core.deprecations.registerDeprecations({ getDeprecations });
  }
}

```

## Properties

|  Property | Type | Description |
|  --- | --- | --- |
|  [registerDeprecations](./kibana-plugin-core-server.deprecationsservicesetup.registerdeprecations.md) | <code>(deprecationContext: RegisterDeprecationsConfig) =&gt; void</code> |  |

