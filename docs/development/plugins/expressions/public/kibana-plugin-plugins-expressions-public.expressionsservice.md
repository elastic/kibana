<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [kibana-plugin-plugins-expressions-public](./kibana-plugin-plugins-expressions-public.md) &gt; [ExpressionsService](./kibana-plugin-plugins-expressions-public.expressionsservice.md)

## ExpressionsService class

`ExpressionsService` class is used for multiple purposes:

1. It implements the same Expressions service that can be used on both: (1) server-side and (2) browser-side. 2. It implements the same Expressions service that users can fork/clone, thus have their own instance of the Expressions plugin. 3. `ExpressionsService` defines the public contracts of \*setup\* and \*start\* Kibana Platform life-cycles for ease-of-use on server-side and browser-side. 4. `ExpressionsService` creates a bound version of all exported contract functions. 5. Functions are bound the way there are:

\`\`\`<!-- -->ts registerFunction = (...args: Parameters<!-- -->&lt;<!-- -->Executor\['registerFunction'\]<!-- -->&gt; ): ReturnType<!-- -->&lt;<!-- -->Executor\['registerFunction'\]<!-- -->&gt; =<!-- -->&gt; this.executor.registerFunction(...args); \`\`\`

so that JSDoc appears in developers IDE when they use those `plugins.expressions.registerFunction(`<!-- -->.

<b>Signature:</b>

```typescript
export declare class ExpressionsService implements PersistableStateService<ExpressionAstExpression> 
```

## Constructors

|  Constructor | Modifiers | Description |
|  --- | --- | --- |
|  [(constructor)({ executor, renderers, })](./kibana-plugin-plugins-expressions-public.expressionsservice._constructor_.md) |  | Constructs a new instance of the <code>ExpressionsService</code> class |

## Properties

|  Property | Modifiers | Type | Description |
|  --- | --- | --- | --- |
|  [execute](./kibana-plugin-plugins-expressions-public.expressionsservice.execute.md) |  | <code>ExpressionsServiceStart['execute']</code> |  |
|  [executor](./kibana-plugin-plugins-expressions-public.expressionsservice.executor.md) |  | <code>Executor</code> |  |
|  [extract](./kibana-plugin-plugins-expressions-public.expressionsservice.extract.md) |  | <code>(state: ExpressionAstExpression) =&gt; {</code><br/><code>        state: ExpressionAstExpression;</code><br/><code>        references: SavedObjectReference[];</code><br/><code>    }</code> | Extracts saved object references from expression AST |
|  [fork](./kibana-plugin-plugins-expressions-public.expressionsservice.fork.md) |  | <code>() =&gt; ExpressionsService</code> |  |
|  [getFunction](./kibana-plugin-plugins-expressions-public.expressionsservice.getfunction.md) |  | <code>ExpressionsServiceStart['getFunction']</code> |  |
|  [getFunctions](./kibana-plugin-plugins-expressions-public.expressionsservice.getfunctions.md) |  | <code>() =&gt; ReturnType&lt;Executor['getFunctions']&gt;</code> | Returns POJO map of all registered expression functions, where keys are names of the functions and values are <code>ExpressionFunction</code> instances. |
|  [getRenderer](./kibana-plugin-plugins-expressions-public.expressionsservice.getrenderer.md) |  | <code>ExpressionsServiceStart['getRenderer']</code> |  |
|  [getRenderers](./kibana-plugin-plugins-expressions-public.expressionsservice.getrenderers.md) |  | <code>() =&gt; ReturnType&lt;ExpressionRendererRegistry['toJS']&gt;</code> | Returns POJO map of all registered expression renderers, where keys are names of the renderers and values are <code>ExpressionRenderer</code> instances. |
|  [getType](./kibana-plugin-plugins-expressions-public.expressionsservice.gettype.md) |  | <code>ExpressionsServiceStart['getType']</code> |  |
|  [getTypes](./kibana-plugin-plugins-expressions-public.expressionsservice.gettypes.md) |  | <code>() =&gt; ReturnType&lt;Executor['getTypes']&gt;</code> | Returns POJO map of all registered expression types, where keys are names of the types and values are <code>ExpressionType</code> instances. |
|  [inject](./kibana-plugin-plugins-expressions-public.expressionsservice.inject.md) |  | <code>(state: ExpressionAstExpression, references: SavedObjectReference[]) =&gt; ExpressionAstExpression</code> | Injects saved object references into expression AST |
|  [migrate](./kibana-plugin-plugins-expressions-public.expressionsservice.migrate.md) |  | <code>(state: SerializableState, version: string) =&gt; ExpressionAstExpression</code> | Runs the migration (if it exists) for specified version. This will run a single migration step (ie from 7.10.0 to 7.10.1) |
|  [registerFunction](./kibana-plugin-plugins-expressions-public.expressionsservice.registerfunction.md) |  | <code>(functionDefinition: AnyExpressionFunctionDefinition &#124; (() =&gt; AnyExpressionFunctionDefinition)) =&gt; void</code> | Register an expression function, which will be possible to execute as part of the expression pipeline.<!-- -->Below we register a function which simply sleeps for given number of milliseconds to delay the execution and outputs its input as-is.
```ts
expressions.registerFunction({
  name: 'sleep',
  args: {
    time: {
      aliases: ['_'],
      help: 'Time in milliseconds for how long to sleep',
      types: ['number'],
    },
  },
  help: '',
  fn: async (input, args, context) => {
    await new Promise(r => setTimeout(r, args.time));
    return input;
  },
}

```
The actual function is defined in the <code>fn</code> key. The function can be \*async\*. It receives three arguments: (1) <code>input</code> is the output of the previous function or the initial input of the expression if the function is first in chain; (2) <code>args</code> are function arguments as defined in expression string, that can be edited by user (e.g in case of Canvas); (3) <code>context</code> is a shared object passed to all functions that can be used for side-effects. |
|  [registerRenderer](./kibana-plugin-plugins-expressions-public.expressionsservice.registerrenderer.md) |  | <code>(definition: AnyExpressionRenderDefinition &#124; (() =&gt; AnyExpressionRenderDefinition)) =&gt; void</code> |  |
|  [registerType](./kibana-plugin-plugins-expressions-public.expressionsservice.registertype.md) |  | <code>(typeDefinition: AnyExpressionTypeDefinition &#124; (() =&gt; AnyExpressionTypeDefinition)) =&gt; void</code> |  |
|  [renderers](./kibana-plugin-plugins-expressions-public.expressionsservice.renderers.md) |  | <code>ExpressionRendererRegistry</code> |  |
|  [run](./kibana-plugin-plugins-expressions-public.expressionsservice.run.md) |  | <code>ExpressionsServiceStart['run']</code> |  |
|  [telemetry](./kibana-plugin-plugins-expressions-public.expressionsservice.telemetry.md) |  | <code>(state: ExpressionAstExpression, telemetryData?: Record&lt;string, any&gt;) =&gt; Record&lt;string, any&gt;</code> | Extracts telemetry from expression AST |

## Methods

|  Method | Modifiers | Description |
|  --- | --- | --- |
|  [setup()](./kibana-plugin-plugins-expressions-public.expressionsservice.setup.md) |  | Returns Kibana Platform \*setup\* life-cycle contract. Useful to return the same contract on server-side and browser-side. |
|  [start()](./kibana-plugin-plugins-expressions-public.expressionsservice.start.md) |  | Returns Kibana Platform \*start\* life-cycle contract. Useful to return the same contract on server-side and browser-side. |
|  [stop()](./kibana-plugin-plugins-expressions-public.expressionsservice.stop.md) |  |  |

