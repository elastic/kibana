[[openai-action-type]]
== OpenAI connector and action
++++
<titleabbrev>OpenAI</titleabbrev>
++++
:frontmatter-description: Add a connector that can send requests to an OpenAI provider.
:frontmatter-tags-products: [kibana]
:frontmatter-tags-content-type: [how-to]
:frontmatter-tags-user-goals: [configure]


The OpenAI connector uses https://github.com/axios/axios[axios] to send a POST request to an OpenAI provider, either OpenAI or Azure OpenAI.
[float]
[[define-gen-ai-ui]]
=== Create connectors in {kib}

You can create connectors in *{stack-manage-app} > {connectors-ui}*.  For example:

[role="screenshot"]
image::management/connectors/images/gen-ai-connector.png[OpenAI connector]
// NOTE: This is an autogenerated screenshot. Do not edit it directly.

[IMPORTANT]
====
Elastic provides no official support for connecting to the Azure OpenAI service through a proxy.
However if you must use a proxy,
ensure that the proxy supports streaming and is SSE-compatible.
Elastic will only parse streamed responses.

To validate that your connectivity problems are caused by using a proxy,
you can attempt to set up the connector and access the Azure OpenAI service without using a proxy.
====

[float]
[[openai-connector-configuration]]
==== Connector configuration

OpenAI connectors have the following configuration properties:

Name:: The name of the connector.
OpenAI provider:: The OpenAI API provider, either OpenAI or Azure OpenAI.
URL:: The OpenAI request URL.
Default model:: (optional) The default model to use for requests. This option is available only when the provider is `OpenAI`.
API key:: The OpenAI or Azure OpenAI API key for authentication.

[float]
[[gen-ai-action-configuration]]
=== Test connectors

You can test connectors as you're creating or editing the connector in {kib}. For example:

[role="screenshot"]
image::management/connectors/images/gen-ai-params-test.png[OpenAI params test]
// NOTE: This is an autogenerated screenshot. Do not edit it directly.

The OpenAI actions have the following configuration properties.

Body::      A JSON payload sent to the OpenAI API URL. For example:
+
[source,text]
--
{
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "user",
      "content": "Hello world"
    }
  ]
}
--
[float]
[[openai-connector-networking-configuration]]
=== Connector networking configuration

Use the <<action-settings, Action configuration settings>> to customize connector networking configurations, such as proxies, certificates, or TLS settings. You can set configurations that apply to all your connectors or use `xpack.actions.customHostSettings` to set per-host configurations.

[float]
[[openai-connector-token-dashboard]]
=== Token usage dashboard

Once you've created a OpenAI connector, you can monitor its token usage using the *OpenAI Token Usage* dashboard. Select the connector in *{stack-manage-app}* > *{connectors-ui}* to view its details, then click the *View OpenAI Usage Dashboard for "_<Name>_" Connector* link to open the dashboard.

NOTE: To view the dashboard, you need at least `read` and `view_index_metadata` privileges for the `.kibana-event-log-*` index and the `Read` feature privilege for {kib}. You can set up a role with these minimum privileges and assign it to non-admin users who need to view this dashboard.
