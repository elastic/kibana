<kibana-panel ng-controller="table" ng-init="init()">
  <span class="panelextra pointer" ng-show="panel.spyable" style="position:absolute;right:0px;top:0px">
    <i bs-modal="'partials/modal.html'" class="icon-eye-open"></i>
  </span>
  <div style="{{panel.overflow}}:{{panel.height || row.height}};overflow-y:auto;overflow-x:auto">
    <div class="row-fluid" ng-show="panel.paging">
      <div class="span1 offset1" style="text-align:right">
        <i class="icon-circle-arrow-left pointer" ng-click="panel.offset = 0" ng-show="panel.offset &amp;gt; 0"></i>
        <i class="icon-arrow-left pointer" ng-click="panel.offset = (panel.offset - panel.size)" ng-show="panel.offset &amp;gt; 0"></i>
      </div>
      <div class="span8" style="text-align:center">
        <strong>{{panel.offset}}</strong>
        to
        <strong>{{panel.offset + data.slice(panel.offset,panel.offset+panel.size).length}}</strong>
        <small>of {{data.length}} available for paging</small>
      </div>
      <div class="span1" style="text-align:left">
        <i class="icon-arrow-right pointer" ng-click="panel.offset = (panel.offset + panel.size)" ng-show="data.length &amp;gt; panel.offset+panel.size"></i>
      </div>
    </div>
    <div class="small" ng-show="panel.fields.length == 0">
      No columns configured. You may want to add a
      <strong>fields panel</strong>,
      or click the edit button in the top right of this panel to add some columns
    </div>
    <table class="table-hover table table-condensed" ng-style="panel.style">
      <thead ng-show="panel.header"></thead>
    </table>
  </div>
  <th ng-repeat="field in panel.fields" style="white-space:nowrap">
    <i class="pointer link icon-caret-left" ng-click="_.move(panel.fields,$index,$index-1)" ng-show="!$first"></i>
    <span class="pointer" ng-click="set_sort(field)" ng-show="panel.sortable">
      {{field}}
      <i class="pointer link" ng-class="{'icon-chevron-up': panel.sort[1] == 'asc','icon-chevron-down': panel.sort[1] == 'desc'}" ng-show="field == panel.sort[0]"></i>
    </span>
    <span ng-show="!panel.sortable">{{field}}</span>
    <i class="pointer link icon-caret-right" ng-click="_.move(panel.fields,$index,$index+1)" ng-show="!$last"></i>
  </th>
  <tbody ng-class-odd="'odd'" ng-repeat="row in data.slice(panel.offset,panel.offset+panel.size)">
    <tr class="pointer" ng-click="toggle_details(row)">
      <td ng-bind-html-unsafe="(row.highlight[field]||row._source[field]) | highlight" ng-repeat="field in panel.fields"></td>
    </tr>
    <tr ng-show="row.kibana.details">
      <td colspan="1000">
        <table class="table table-bordered table-condensed">
          <thead></thead>
        </table>
      </td>
      <th>Field</th>
      <th>Action</th>
      <th>Value</th>
    </tr>
    <tr ng-class-odd="'odd'" ng-repeat="(key,value) in row.kibana.details._source">
      <td>{{key}}</td>
      <td>
        <i class="icon-search pointer" ng-click="build_search(key,value)"></i>
        <i class="icon-ban-circle pointer" ng-click="build_search(key,value,true)"></i>
      </td>
      <td>{{value}}</td>
    </tr>
  </tbody>
  <div class="row-fluid" ng-show="panel.paging">
    <div class="span1 offset3" style="text-align:right">
      <i class="icon-circle-arrow-left pointer" ng-click="panel.offset = 0" ng-show="panel.offset &amp;gt; 0"></i>
      <i class="icon-arrow-left pointer" ng-click="panel.offset = (panel.offset - panel.size)" ng-show="panel.offset &amp;gt; 0"></i>
    </div>
    <div class="span4" style="text-align:center">
      <strong>{{panel.offset}}</strong>
      to
      <strong>{{panel.offset + data.slice(panel.offset,panel.offset+panel.size).length}}</strong>
      <small>of {{data.length}} available for paging</small>
    </div>
    <div class="span1" style="text-align:left">
      <i class="icon-arrow-right pointer" ng-click="panel.offset = (panel.offset + panel.size)" ng-show="data.length &amp;gt; panel.offset+panel.size"></i>
    </div>
  </div>
</kibana-panel>
