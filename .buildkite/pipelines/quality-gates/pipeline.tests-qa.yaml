steps:
  - label: ":pipeline::kibana::seedling: Trigger Kibana Serverless Tests for ${ENVIRONMENT}"
    trigger: appex-qa-kibana-serverless-ftr-tests # https://buildkite.com/elastic/appex-qa-kibana-serverless-ftr-tests
    build:
      env:
        ENVIRONMENT: ${ENVIRONMENT}
      message: Triggered by pipeline.tests.qa.yaml

  - label: ":pipeline::weight_lifter::seedling: Trigger RAC Alert Load tests for ${ENVIRONMENT}"
    trigger: appex-qa-rac-alert-load # https://buildkite.com/elastic/appex-qa-rac-alert-load
    build:
      env:
        ENVIRONMENT: ${ENVIRONMENT}
        SERVERLESS_ONLY: true
      message: Triggered by pipeline.tests.qa.yaml

  - label: ":pipeline::female-detective::seedling: Trigger Security Solution quality gate script"
    command: .buildkite/scripts/pipelines/security_solution_quality_gate/pipeline.sh

  - label: ":pipeline::ship::seedling: Trigger Fleet serverless smoke tests for ${ENVIRONMENT}"
    trigger: fleet-smoke-tests # https://buildkite.com/elastic/fleet-smoke-tests
    build:
      env:
        ENVIRONMENT: ${ENVIRONMENT}
      message: Triggered by pipeline.tests.qa.yaml

  - wait: ~

  - block: ":male-mechanic: Confirm QA tests"
    prompt: "Do you confirm, that the QA testing is done and successful?"
