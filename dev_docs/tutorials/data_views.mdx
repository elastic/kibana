---
id: kibDevTutorialDataViews
slug: /kibana-dev-docs/tutorials/data-views
title: Data views API
summary: Data views API
date: 2021-08-11
tags: ['kibana', 'onboarding', 'dev', 'architecture']
---

*Note: Kibana index patterns are currently being renamed to data views. There will be some naming inconsistencies until the transition is complete.*

### Data views API

- Get list of data views
- Get default data view and examine fields
- Get data view by id
- Find data view by title
- Create data view
- Create data view and save it
- Modify data view and save it
- Delete data view

#### Get list of data view titles and ids

```
const idsAndTitles = await data.indexPatterns.getIdsWithTitle();
idsAndTitles.forEach(({id, title}) => console.log(`Data view id: ${id} title: ${title}`));
```

#### Get default data view and examine fields

```
const defaultDataView = await data.indexPatterns.getDefault();
defaultDataView.fields.forEach(({name}) => { console.log(name); })
```

#### Get data view by id

```
const id = 'xxxxxx-xxx-xxxxxx';
const dataView = await data.indexPatterns.get(id);
```

#### Find data view by title

```
const title = 'kibana-*';
const [dataView] = await data.indexPatterns.find(title);
```

#### Create data view

```
const dataView = await data.indexPatterns.create({ title: 'kibana-*' });
```

#### Create data view and save it immediately

```
const dataView = await data.indexPatterns.createAndSave({ title: 'kibana-*' });
```

#### Create data view, modify, and save

```
const dataView = await data.indexPatterns.create({ title: 'kibana-*' });
dataView.setFieldCustomLabel('customer_name', 'Customer Name');
data.indexPatterns.createSavedObject(dataView);
```

#### Modify data view and save it

```
dataView.setFieldCustomLabel('customer_name', 'Customer Name');
await data.indexPatterns.updateSavedObject(dataView);
```

#### Delete index pattern

```
await data.indexPatterns.delete(dataViewId);
```

### Data view HTTP API

Rest-like HTTP CRUD+ API with the following endpoints:

- Data view API
  - Create a data view &mdash; `POST /api/index_patterns/index_pattern`
  - Fetch a data view by `{id}` &mdash; `GET /api/index_patterns/index_pattern/{id}`
  - Delete a data view by `{id}` &mdash; `DELETE /api/index_patterns/index_pattern/{id}`
  - Partially update a data view by `{id}` &mdash; `POST /api/index_patterns/index_pattern/{id}`
- Fields API
  - Update field &mdash; `POST /api/index_patterns/index_pattern/{id}/fields`
- Scripted Fields API
  - Create a scripted field &mdash; `POST /api/index_patterns/index_pattern/{id}/scripted_field`
  - Upsert a scripted field &mdash; `PUT /api/index_patterns/index_pattern/{id}/scripted_field`
  - Fetch a scripted field &mdash; `GET /api/index_patterns/index_pattern/{id}/scripted_field/{name}`
  - Remove a scripted field &mdash; `DELETE /api/index_patterns/index_pattern/{id}/scripted_field/{name}`
  - Update a scripted field &mdash; `POST /api/index_patterns/index_pattern/{id}/scripted_field/{name}`

### Dat aview API

Data view REST API allows you to create, retrieve and delete data view. I also
exposes an update endpoint which allows you to update specific fields without changing
the rest of the data view object.

#### Create a data view

Create a data view with a custom title.

```
POST /api/index_patterns/index_pattern
{
    "index_pattern": {
        "title": "hello"
    }
}
```

Customize creation behavior with:

- `override` &mdash; if set to `true`, replaces an existing data view if a
  data view with the provided title already exists. Defaults to `false`.
- `refresh_fields` &mdash; if set to `true` reloads data view fields after
  the data view is stored. Defaults to `false`.

```
POST /api/index_patterns/index_pattern
{
    "override": false,
    "refresh_fields": true,
    "index_pattern": {
        "title": "hello"
    }
}
```

At creation all data view fields are option and you can provide them.

```
POST /api/index_patterns/index_pattern
{
    "index_pattern": {
        "id": "...",
        "version": "...",
        "title": "...",
        "type": "...",
        "intervalName": "...",
        "timeFieldName": "...",
        "sourceFilters": [],
        "fields": {},
        "typeMeta": {},
        "fieldFormats": {},
        "fieldAttrs": {}
    }
}
```

The endpoint returns the created data view object.

```json
{
  "index_pattern": {}
}
```

#### Fetch a data view by ID

Retrieve a data view by its ID.

```
GET /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```

Returns a data view object.

```json
{
  "index_pattern": {
    "id": "...",
    "version": "...",
    "title": "...",
    "type": "...",
    "intervalName": "...",
    "timeFieldName": "...",
    "sourceFilters": [],
    "fields": {},
    "typeMeta": {},
    "fieldFormats": {},
    "fieldAttrs": {}
  }
}
```

#### Delete a data view by ID

Delete a data view by its ID.

```
DELETE /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```

Returns an '200 OK` response with empty body on success.

#### Partially update a data view by ID

Update part of a data view. Only provided fields will be updated on the
data view, missing fields will stay as they are persisted.

These fields can be update partially:

- `title`
- `timeFieldName`
- `intervalName`
- `fields` (optionally refresh fields)
- `sourceFilters`
- `fieldFormatMap`
- `type`
- `typeMeta`

Update a title of a data view.

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
{
    "index_pattern": {
        "title": "new_title"
    }
}
```

All update fields are optional, you can specify the following fields.

```
POST /api/index_patterns/index_pattern
{
    "index_pattern": {
        "title": "...",
        "timeFieldName": "...",
        "intervalName": "...",
        "sourceFilters": [],
        "fieldFormats": {},
        "type": "...",
        "typeMeta": {},
        "fields": {}
    }
}
```

- `refresh_fields` &mdash; if set to `true` reloads data view fields after
  the data view is stored. Defaults to `false`.

```
POST /api/index_patterns/index_pattern
{
    "refresh_fields": true,
    "index_pattern": {
        "fields": {}
    }
}
```

This endpoint returns the updated data view object.

```json
{
  "index_pattern": {}
}
```

### Fields API

Fields API allows to change field metadata, such as `count`, `customLabel`, and `format`.

#### Update fields

Update endpoint allows you to update fields presentation metadata, such as `count`,
`customLabel`, and `format`. You can update multiple fields in one request. Updates
are merges with persisted metadata. To remove existing metadata specify `null` as value.

Set popularity `count` for field `foo`:

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/fields
{
    "fields": {
        "foo": {
            "count": 123
        }
    }
}
```

Update multiple metadata values and fields in one request:

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/fields
{
    "fields": {
        "foo": {
            "count": 123,
            "customLabel": "Foo"
        },
        "bar": {
            "customLabel": "Bar"
        }
    }
}
```

Use `null` value to delete metadata:

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/fields
{
    "fields": {
        "foo": {
            "customLabel": null
        }
    }
}
```

This endpoint returns the updated data view object.

```json
{
  "index_pattern": {}
}
```

### Scripted Fields API

Scripted Fields API provides CRUD API for scripted fields of a data view.

#### Create a scripted field

Create a field by simply specifying its name, will default to `string` type. Returns
an error if a field with the provided name already exists.

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field
{
    "field": {
        "name": "my_field"
    }
}
```

Create a field by specifying all field properties.

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field
{
    "field": {
        "name": "",
        "type": "",
        "searchable": false,
        "aggregatable": false,
        "count": 0,
        "script": "",
        "scripted": false,
        "lang": "",
        "conflictDescriptions": {},
        "format": {},
        "esTypes": [],
        "readFromDocValues": false,
        "subType": {},
        "indexed": false,
        "customLabel": "",
        "shortDotsEnable": false
    }
}
```

#### Upsert a scripted field

Creates a new field or updates an existing one, if one already exists with the same name.

Create a field by simply specifying its name.

```
PUT /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field
{
    "field": {
        "name": "my_field"
    }
}
```

Create a field by specifying all field properties.

```
PUT /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field
{
    "field": {
        "name": "",
        "type": "",
        "searchable": false,
        "aggregatable": false,
        "count": 0,
        "script": "",
        "scripted": false,
        "lang": "",
        "conflictDescriptions": {},
        "format": {},
        "esTypes": [],
        "readFromDocValues": false,
        "subType": {},
        "indexed": false,
        "customLabel": "",
        "shortDotsEnable": false
    }
}
```

#### Fetch a scripted field

Fetch an existing data view field by field name.

```
GET /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field/<name>
```

Returns the field object.

```json
{
  "field": {}
}
```

#### Delete a scripted field

Delete a field of a data view.

```
DELETE /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field/<name>
```

#### Update a an existing scripted field

Updates an exiting field by mergin provided properties with the existing ones. If
there is no existing field with the specified name, returns a `404 Not Found` error.

You can specify any field properties, except `name` which is specified in the URL path.

```
POST /api/index_patterns/index_pattern/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/scripted_field/<name>
{
    "field": {
        "type": "",
        "searchable": false,
        "aggregatable": false,
        "count": 0,
        "script": "",
        "scripted": false,
        "lang": "",
        "conflictDescriptions": {},
        "format": {},
        "esTypes": [],
        "readFromDocValues": false,
        "subType": {},
        "indexed": false,
        "customLabel": "",
        "shortDotsEnable": false
    }
}
```