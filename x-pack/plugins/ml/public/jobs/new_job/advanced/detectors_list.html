<div>
  <div class="form-group">
    <div ng-repeat="detector in detectors track by $index">
      <div class="detector" ng-class="{'detector-edit-mode':(editMode==='EDIT')}">
        <div class="detector-fields">
          <label
            ng-show="editMode==='EDIT'"
            i18n-id="xpack.ml.newJob.advanced.detectorsList.detectorLabel"
            i18n-default-message="Detector:"
          ></label>
          <div
            aria-label="{{ ::'xpack.ml.newJob.advanced.detectorsList.customisedDescriptionAriaLabel' | i18n: {defaultMessage: 'Customised description'} }}"
            ng-hide="editMode==='EDIT' || detector.detector_description === '' || detector.detector_description === detectorToString(detector) "
          >
            {{ detector.detector_description }}
          </div>
          <div
            aria-label="{{ ::'xpack.ml.newJob.advanced.detectorsList.defaultDescriptionAriaLabel' | i18n: {defaultMessage: 'Default description'} }}"
            style="font-style:italic;"
          >
            {{ detectorToString(detector) }}
          </div>

          <div ng-show="editMode==='EDIT'">
            <label
              class="kuiFormLabel"
              i18n-id="xpack.ml.newJob.advanced.detectorsList.descriptionLabel"
              i18n-default-message="Description:"
            ></label>
            <input
              ng-model="detector.detector_description"
              class="form-control" />
          </div>

        </div>

        <div class="button-container" ng-show="editMode==='NEW'">
          <button
            ng-click="editDetector($index)"
            aria-label="{{ ::'xpack.ml.newJob.advanced.detectorsList.editButtonAriaLabel' | i18n: {defaultMessage: 'Edit'} }}"
            class="kuiButton kuiButton--basic kuiButton--small"
            data-toggle="tooltip"
            tooltip="{{ ::'xpack.ml.newJob.advanced.detectorsList.editButtonTooltip' | i18n: {defaultMessage: 'Edit Detector'} }}">
              <i aria-hidden="true" class="fa fa-pencil"></i>
          </button>

          <button
            aria-label="{{ ::'xpack.ml.newJob.advanced.detectorsList.removeDetectorButtonAriaLabel' | i18n: {defaultMessage: 'Remove Detector'} }}"
            ng-click="removeDetector($index)"
            tooltip-append-to-body="true"
            type="button"
            class="kuiButton kuiButton--danger kuiButton--small remove-button">
              <i aria-hidden="true" class="fa fa-trash"></i>
          </button>
        </div>

      </div>

    </div>

    <div ng-show="editMode==='NEW'">
      <button
        aria-labelledby="ml_aria_description_new_job_detectors"
        aria-describedby="ml_aria_label_new_job_add_detector"
        ng-click="openNewWindow()"
        type="button"
        class="kuiButton kuiButton--primary kuiButton--small">
          <i aria-hidden="true" class="fa fa-plus"></i>
          <span
            id="ml_aria_label_new_job_add_detector"
            i18n-id="xpack.ml.newJob.advanced.detectorsList.addDetectorButtonLabel"
            i18n-default-message="Add Detector"
          ></span>
      </button>
    </div>
  </div>

</div>
