title: Timeslice metric
required:
  - type
  - params
description: Defines properties for a timeslice metric indicator type
type: object
properties:
  params:
    description: An object containing the indicator parameters.
    type: object
    nullable: false
    required:
      - index
      - timestampField
      - metric
    properties:
      index:
        description: The index or index pattern to use
        type: string
        example: my-service-*
      filter:
        description: the KQL query to filter the documents with.
        type: string
        example: 'field.environment : "production" and service.name : "my-service"'
      timestampField:
        description: >
          The timestamp field used in the source indice.
        type: string
        example: timestamp
      metric:
        description: >
          An object defining the metrics, equation, and threshold to determine if it's a good slice or not
        type: object
        required:
          - metrics
          - equation
          - comparator
          - threshold
        properties:
          metrics:
            description: List of metrics with their name, aggregation type, and field.
            type: array
            items:
              anyOf:
                - $ref: './timeslice_metric_basic_metric_with_field.yaml'
                - $ref: './timeslice_metric_percentile_metric.yaml'
                - $ref: './timeslice_metric_doc_count_metric.yaml'
          equation:
            description: The equation to calculate the metric.
            type: string
            example: A
          comparator:
            description: The comparator to use to compare the equation to the threshold.
            type: string
            example: GT
            enum: [GT, GTE, LT, LTE]
          threshold:
            description: The threshold used to determine if the metric is a good slice or not.
            type: number
            example: 100
  type:
    description: The type of indicator.
    type: string
    example: sli.metric.timeslice
