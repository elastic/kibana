/*!
 * 
 *     Gainsight PX Agent Wrapper
 *     Agent Version:  0.47.0
 *     Installed:      2022-11-23 08:17
 * 
 */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=392)}([function(e,t,n){"use strict";function r(e){return void 0!==e&&null!==e&&"string"==typeof e}function o(e){return void 0===e||null===e||"string"!=typeof e}function i(e){return!e||"string"!=typeof e||""==e.trim()}function a(e){return i(e)?e:e.trim()}function s(e){return e&&Array.isArray(e)&&e.length>0}function l(e){if(e){var t=e;return Array.isArray(t)||(t=(0,Ne.arrayFrom)(e)),Array.isArray(t)&&0==t.length}return!0}function c(e,t,n){var r=e[t];if(n&&{}.hasOwnProperty.call(e,"Zone")){r=e[e.Zone.__symbol__(t)]||e[t]}return r}function d(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=c(e,"addEventListener",(0,_e.getConfig)("angularAddEventListener"));if(o)o.call(e,t,n,r);else{if(!e.attachEvent)return!1;e.attachEvent("on"+t,n)}return!0}function u(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=c(e,"removeEventListener",(0,_e.getConfig)("angularAddEventListener"));o?o.call(e,t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}function p(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function f(e,t,n){var r=document.getElementById(t);r?r.styleSheet?r.styleSheet.cssText=e:(r.innerHTML="",r.appendChild(document.createTextNode(e))):r=ze(e,t),n?n.parentNode.insertBefore(r,n):(0,_e.getBody)().appendChild(r)}function g(e){return e.join("&")}function h(e,t,n){return n||(n=[]),n.push(e+(""!==t?"="+encodeURIComponent(t):"")),n}function m(e){var t=(new Date).getTime()+"-"+Ae.UUIDGenerator.generateRandom(4);return Object.assign(e,{cb:t}),e}function v(e,t){for(var n in e)e.hasOwnProperty(n)&&(t=h(n,e[n],t));return t}function b(e,t){return t&&y(t)||(t={}),e.forEach(function(e){var n=e.split("=");n.length<2||(t[n[0]]=n.slice(1).join(""))}),t}function y(e){return void 0!==e&&null!=e&&"[object Object]"==Object.prototype.toString.call(e)}function E(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function S(e,t,n,r,o){t.parentNode;if(t.getAttribute("apt-ignore")!==r){var i=parseInt(t.getAttribute("apt-original")||n.getPropertyValue("top"),10);i!==r&&!o&&(t.style.top=i+r+"px")&&t.setAttribute("apt-original",i),t.setAttribute("apt-ignore",r)}}function C(e,t){for(var n=Be.body.getElementsByTagName("*"),r=n.length,o=void 0,i=[],a=(0,_e.getConfig)("mapperResizeFullHeightElements"),s=(0,_e.getConfig)("mapperResizeFullHeightBody"),l=0;l<r;l++){if(o=window.getComputedStyle(n[l],null),a&&o&&parseInt(o.getPropertyValue("height"))===Be.body.clientHeight&&(n[l].style.height="calc(100vh - "+e+"px)"),o&&"fixed"===o.getPropertyValue("position")){if(F(n[l].className)&&(n[l].className.indexOf("apt")>-1||n[l].className.indexOf("tippy-popper")>-1))continue;S(i,n[l],o,e,t)}if(o&&"absolute"===o.getPropertyValue("position")){if(F(n[l].className)&&(n[l].className.indexOf("apt")>-1||n[l].className.indexOf("tippy-popper")>-1))continue;for(var c=n[l].parentNode,d=!1,u=void 0;c&&"body"!==c.tagName.toLowerCase();){u=Oe.windowRef.getComputedStyle(c,null);var p=u.getPropertyValue("position");if("relative"===p||"fixed"===p||i.indexOf(c)>-1){d=!0;break}c=c.parentNode,!1}if(!d&&n[l].getAttribute("apt-ignore")!==e){i.push(n[l]),n[l].style.marginTop=e+"px";var f=o.getPropertyValue("top");!t&&(n[l].style.top=f),n[l].setAttribute("apt-ignore",e)}}}o=window.getComputedStyle(Be.body,null),s&&o&&parseInt(o.getPropertyValue("height"))===Be.body.clientHeight&&Be.body.style.setProperty("box-sizing","border-box","important"),Be.body.style.setProperty("padding-top",e+"px","important")}function w(e,t){if(!("style"in e))throw new Error("object "+e+" has no 'style' property");e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}function T(e,t){var n=e.replace("#","");return"rgba("+parseInt(n.substring(0,2),16)+","+parseInt(n.substring(2,4),16)+","+parseInt(n.substring(4,6),16)+","+t+")"}function x(e){var t=e.replace("#","");return(parseInt(t.substring(0,2),16)+parseInt(t.substring(2,4),16)+parseInt(t.substring(4,6),16))/3<128}function k(e){for(var t=document.querySelectorAll(e),n=0,r=0;r<t.length;r++){var o=Number.parseInt(document.defaultView.getComputedStyle(t[r],null).getPropertyValue("z-index"),10);o>n&&(n=o)}return n}function I(e,t){var n=!0;if(t){var r={x:e.left+e.width/2,y:e.top+e.height/2},o=document.elementFromPoint(r.x,r.y),i="true"===o.getAttribute("data-apt-ignore-visible"),a=o.getAttribute("class")||"",s=o!==(0,_e.getBody)()&&a.indexOf("apt")>-1;n=o===t||i||s}return n}function A(e,t,n){if(!e)return!1;var r=window.getComputedStyle(e);if("none"===r.display)return!1;if("visible"!==r.visibility)return!1;if(r.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;if(t){var o=e.getBoundingClientRect(),i={x:o.left+e.offsetWidth/2,y:o.top+e.offsetHeight/2};if(i.x<0)return!1;if(i.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(i.y<0)return!1;if(i.y>(document.documentElement.clientHeight||window.innerHeight))return!1;if((0,De.elementContainsChild)(e,(0,De.documentElementFromPoint)(document,i.x,i.y))||(0,De.elementContainsChild)(e,(0,De.documentElementFromPoint)(document,o.left,o.top))||(0,De.elementContainsChild)(e,(0,De.documentElementFromPoint)(document,o.right,o.top))||(0,De.elementContainsChild)(e,(0,De.documentElementFromPoint)(document,o.right,o.bottom))||(0,De.elementContainsChild)(e,(0,De.documentElementFromPoint)(document,o.left,o.bottom)))return!0;var a=document.elementFromPoint(i.x,i.y);do{var s=!1;if(a){var l="true"===a.getAttribute("data-apt-ignore-visible"),c=a===e,d=a.getAttribute("class")||"",u=n&&a!==(0,_e.getBody)()&&d.indexOf("apt")>-1;s=l||c||u}if(s)return!0}while(a&&(a=a.parentNode)&&a.tagName);return!1}return!0}function O(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("margin-top");n=n.substring(0,n.length-2),n=Number(n);var r=t.getPropertyValue("margin-bottom");return r=r.substring(0,r.length-2),(r=Number(r))+n}function N(e){return e.getBoundingClientRect().top+e.offsetHeight/2}function L(e){var t=O((0,_e.getBody)()),n=(window.innerHeight-t)/2,r=N(e);return Math.abs(n-r)<10}function _(e){if(!e)return!1;var t=e.getBoundingClientRect(),n=t.left,r=t.top,o={x:n+e.offsetWidth/2,y:r+e.offsetHeight/2};return!L(e)||o.x<0||o.x>Math.min(document.documentElement.clientWidth,window.innerWidth)||o.y<0||o.y>Math.min(document.documentElement.clientHeight,window.innerHeight)}function F(e){return e&&("string"==typeof e||e instanceof String)}function D(e){return e&&("function"==typeof e||e instanceof Function)}function B(e){return["body","#document","frameset","html"].indexOf(e.nodeName.toLowerCase())>-1}function R(e){return e===document||["body","frameset","html"].indexOf(e.tagName.toLowerCase())>-1}function P(e,t){for(var n=e;n&&!B(n);){if(n.classList.contains(t))return!0;n=(0,De.getParentNode)(n)}return!1}function M(e,t,n){for(var r=e;r&&!B(r);){if(r[t]===n)return!0;r=(0,De.getParentNode)(r)}return!1}function U(e,t){for(var n=t;n&&!R(n);){if(n===e)return!0;n=(0,De.getParentNode)(n)}return!1}function j(e,t,n){var r=Be.createElement("a");r.href=e;var o=ge(r),a=he(r),s=i(r.search)?"?":"";return s+=h(t,n,r.search?r.search.split("&"):null).join("&"),[o,a,s,r.hash].join("")}function H(e,t){var n=Be.createElement("a");n.href=e;var r=ge(n),o=he(n),a=i(n.search)?"?":"";return a+=v(t,n.search?n.search.split("&"):[]).join("&"),[r,o,a,n.hash].join("")}function $(e){for(var t=window.location.search.substring(1),n=t.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(o[0]===e)return o[1]}return null}function V(e){for(var t=window.location.search.substring(1),n=t.split("&"),r=[],o=0;o<n.length;o++){n[o].split("=")[0]!==e&&""!==n[o]&&""!==n[o]&&r.push(n[o])}return location.protocol+"//"+location.host+location.pathname+(r.length>0?"?"+r.join("&"):"")+location.hash}function K(e){return void 0!==$e.find(function(t){return t.test(e)})}function q(e,t){e&&(e.innerText=t.toLowerCase(),e.classList.contains("strong")&&e.classList.remove("strong"),e.classList.contains("medium")&&e.classList.remove("medium"),e.classList.contains("weak")&&e.classList.remove("weak"),e.classList.add(t.toLowerCase()))}function W(e,t){function n(e){e=e||window.event,e.target.classList.add("dragging"),s=e.clientX,l=e.clientY,d(document,"mouseup",o),d(document,"mousemove",r)}function r(t){t=t||window.event,i=s-t.clientX,a=l-t.clientY,s=t.clientX,l=t.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-i+"px"}function o(e){e.target.classList.remove("dragging"),u(document,"mouseup",o),u(document,"mousemove",r)}var i=0,a=0,s=0,l=0;t?d(t,"mousedown",n):d(e,"mousedown",n)}function z(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function G(e,t){for(var n=e;n!=Be;){if(n&&n.tagName&&n.tagName.toLowerCase()===t)return n;n=n.parentNode}return null}function Y(){(0,_e.getConfig)("crossProductEngagement")||(Oe.windowRef.sessionStorage.removeItem("apt.prevStepMap"),Oe.windowRef.sessionStorage.removeItem("apt.stepId"),Oe.windowRef.sessionStorage.removeItem("aptGuideSelectedLanguage"),Oe.windowRef.sessionStorage.removeItem("aptCurrentGuideUrl"),Oe.windowRef.sessionStorage.removeItem("apt.engagementSessionId"),Oe.windowRef.sessionStorage.removeItem("aptMapperDockingPosition"))}function X(e,t,n){for(var r=0;r<e;r++)setTimeout(n,t*r)}function J(e){var t=window.innerHeight/2,n=(0,Le.detectIE)(),r=n<=Fe.LAST_IE_VERSION,o=r?document.documentElement:(0,_e.getBody)(),i=N(e),a=Math.abs(i-t);o.scrollTop+i>t&&(o.scrollTop+=a)}function Q(e,t,n){try{if(e){var r=e.getBoundingClientRect(),o=window.innerHeight,i=(o-r.height)/2,a=Math.max((0,_e.getBody)().scrollHeight,(0,_e.getBody)().offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),s=a-(window.scrollY+r.bottom),l=r.top<i&&!(0,_e.isIframe)(),c=s<i&&!(0,_e.isIframe)(),d=n?{behavior:"smooth"}:{};l?(d.top=0,d.left=0,window.scrollTo(d)):c?(d.top=a,d.left=0,window.scrollTo(d)):(d.block="center",e.scrollIntoView(d))}}catch(e){t&&t(new Error("Error in scrollIntoView "+e))}}function Z(e,t){try{var n=(0,Le.detectIE)();!1!==n&&n<79?(e.scrollIntoView(!1),setTimeout(function(){J(e)},500)):((0,_e.getConfig)("viewAlignedScroll")?Q(e,t,!0):e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(function(){_(e)&&((0,_e.getConfig)("viewAlignedScroll")?Q(e,t,!1):e.scrollIntoView({block:"center"}))},800))}catch(e){t&&t(new Error("Error in scrollIntoView "+e))}}function ee(e,t,n){return e.some(function(e){var r=new RegExp("^"+e.split("*").join(".*")+"$").test(t);return n?!r:r})}function te(e,t,n){return e.every(function(e){var r=new RegExp("^"+e.split("*").join(".*")+"$").test(t);return n?!r:r})}function ne(e){return e.replace(/[.+?^${}()|[\]\\]/g,"\\$&")}function re(e,t){return(t||(0,_e.getConfig)("stripSafeUrlProtocol"))&&(0===e.indexOf("http://")?e=e.substring("http://".length):0===e.indexOf("https://")&&(e=e.substring("https://".length))),0===e.indexOf("www.")&&(e=e.substring("www.")),e.endsWith("/")&&(e=e.substring(0,e.length-1)),e}function oe(e,t,n,r){Array.isArray(e)||(e=[e]);var o=(0,Ne.arrayFrom)(e,function(e){return e=re(e),t.endsWith("/")&&(e=e.replace(/\/\*/,"*")),ne(e)});return t=re(t),r?te(o,t,n):ee(o,t,n)}function ie(e){var t=e.split("-");if(t.length<3)throw"invalid key "+e;return"2"===t[2]}function ae(e){return!i(e)&&"80"!==e&&"443"!==e}function se(){var e="localhost"===location.hostname||ae(location.port)?location.host:location.hostname;return location.protocol+"//"+e+location.pathname+location.search+location.hash}function le(){return["localhost"===location.hostname?location.host:location.hostname,location.pathname,location.search,location.hash]}function ce(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){n=n||Oe.windowRef.event;var r=!1;(r="key"in n?"Escape"===n.key||"Esc"===n.key:27===n.keyCode)&&(t&&n.preventDefault(),e())}}function de(e){return function(t){13===t.keyCode&&e(t)}}function ue(e,t){var n=de(t);return d(e,"keydown",n),n}function pe(e,t){t||(t=["click","mousedown","mouseup"]),e.forEach(function(e){t.forEach(function(t){return d(e,t,function(e){e.stopImmediatePropagation()})})})}function fe(e,t){var n=this,r=Ae.UUIDGenerator.generateV4Id(),o=[];return arguments.length>2&&(o=Array.prototype.slice.call(arguments,2)),e?(o.unshift(r),[r,function(e){var r=(0,Ne.arrayFrom)(o);r.unshift(e),t.apply(n,r)}]):[r,function(){var e=(0,Ne.arrayFrom)(o);e.unshift(r),t.apply(n,e)}]}function ge(e){if(!e||!e.href)throw new Error("getOriginFromAnchorElement - Wrong element was provided, missing href");return e.origin?e.origin:e.protocol+"//"+e.hostname}function he(e){if(!e||!e.href)throw new Error("getPathnameFromAnchorElement - Wrong element was provided, missing href");return e.origin?e.pathname:e.pathname?"/"+e.pathname:""}function me(e){return-1===[null,void 0].indexOf(e)}function ve(e){return[null,void 0].indexOf(e)>-1}function be(e){return e&&"INPUT"===e.nodeName&&"text"===e.type}function ye(e,t){return isNaN(e)||!e&&0!==e?t:e}function Ee(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function Se(e,t){var n=void 0;return function(){var r=arguments,o=this;clearTimeout(n),n=setTimeout(function(){return e.apply(o,r)},t)}}function Ce(e,t){var n=e.substring(e.indexOf(t),e.length);return n=n.substring(0,n.indexOf("}")+1)}function we(e){var t=[];return e.substring(e.indexOf("{")+1,e.indexOf("}")).split(";").map(function(e){return e.trim()}).forEach(function(e){if(e){var n=e.split(":");n&&2===n.length&&t.push({inlineProperty:n[0],value:n[1]})}}),t}function Te(e,t){var n={},r=0;for(var o in e)if({}.hasOwnProperty.call(e,o)){if(r++>=t)break;n[o]=e[o]}return n}function xe(e){return null!==e&&"object"===(void 0===e?"undefined":Ie(e))&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&"number"==typeof e.length&&(0===e.length||"object"===Ie(e[0])&&e[0].nodeType>0)}function ke(e){if(Array.prototype.toJSON){var t=null,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,t=JSON.stringify(e),Array.prototype.toJSON=n,t}return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isElementInIframeVisible=t.isValidPort=t.isRootTag=t.isRootNode=t.isEmail=t.getNumberWithFallback=t.trimString=t.paramToObject=t.isNotNullOrUndefined=t.isNullOrUndefined=t.isFunction=t.addEnterKeyDownListener=t.getEnterHandler=t.getUrlParts=t.addStopClickListeners=t.hasElement=t.getHandler=t.addStyle=t.getEscHandlerCallback=t.safeUrl=t.isDefinedStr=t.isUndefinedStr=t.getPageUrl=t.isWebApp=t.matchUrl=t.escapeRegex=t.matchEither=t.scrollElementToCenter=t.needToScroll=t.createInputConfig=t.isRandomIdSelector=t.retryFunction=t.createElementFromString=t.clearAptrinsicSessionStorage=t.searchElementInParentTree=t.checkDarkColor=t.hasParentField=t.isObjectEmpty=t.isEmptyArr=t.makeDraggable=t.setSelectorStrengthLabel=t.removeFromQueryParam=t.getQueryParam=t.addParametersToUrl=t.addParameterToUrl=t.hasParentClass=t.isString=t.isElementVisible=t.findHighestZIndex=t.hexToRgba=t.setCrossBrowserTransform=t.pushElements=t.createStyle=t.removeChildren=t.isObject=t.addCacheBuster=t.addParameters=t.addParameter=t.convert2Parameters=t.MILLISEC=t.removeEventListener=t.isNotEmptyArr=t.createInput=t.appendElements=t.createElement=t.addEventListener=t.isBlank=t.isEnterAllowedElement=void 0;var Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getNativeFunction=c,t.debounce=Se,t.extractStyleString=Ce,t.extractStyleProperties=we,t.limitJsonKeys=Te,t.isNodeList=xe,t.jsonStringify=ke;var Ae=n(15),Oe=n(4),Ne=n(12),Le=n(10),_e=n(2),Fe=n(8),De=n(18),Be=document,Re=new RegExp(/(^| )[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i),Pe=new RegExp(/(^| )#.+_(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+){8,}$/),Me=new RegExp(/(^| )#.+gen[0-9]{4}/),Ue=new RegExp(/(^| )#.+-[0-9]{4}.*$/),je=new RegExp(/(^| )#ember[0-9]{4}$/),He=new RegExp(/(^| )#id[0-9a-zA-Z]{3}$/),$e=[Re,Pe,Me,Ue,je,He],Ve=function(e,t,n,r){if("text"===e)return Be.createTextNode(n);var o=Be.createElement(e);switch(void 0!==t&&null!=t&&(o.className=s(t)?t.join(" "):t),e){case"option":o.value=n.value,o.text=n.name,n.selected&&o.setAttribute("selected",n.selected);break;case"a":o.href=n.href,n.blank&&(o.target="_blank");break;case"textarea":o.rows=n.rows,o.cols=n.cols;break;case"input":o.value=n.value;break;case"p":o.innerHTML=n.value;break;case"label":n&&n.for&&o.setAttribute("for",n.for);break;case"img":n&&n.src&&(o.src=n.src)}if(void 0!==n&&null!=n&&(void 0!==n.text&&o.appendChild(Be.createTextNode(n.text)),n.title&&(o.title=n.title),n.dataAtt))for(var i=0;i<n.dataAtt.length;i++)o.setAttribute(n.dataAtt[i].name,n.dataAtt[i].value);return r&&(Array.isArray(r)||(r=[r]),Ke(o,r)),o},Ke=function(e,t){for(var n=0;n<t.length;n++)t[n]&&e.appendChild(t[n]);return e},qe=function(e,t,n,r,o,i,a,l,c){var d=Be.createElement("input");if(d.type=e,void 0!==n&&null!==n&&(d.value=n,d.setAttribute("value",n)),void 0!==r&&(d.placeholder=r),void 0!==t&&null!==t&&(d.className=s(t)?t.join(" "):t),o&&(d.disabled=o),i&&(d.setAttribute("checked",i),d.checked=i),a)for(var u in a)a.hasOwnProperty(u)&&d.setAttribute("data-"+u,a[u]);if(l)for(var p in l)l.hasOwnProperty(p)&&d.setAttribute(p,l[p]);return c&&(Array.isArray(c)||(c=[c]),Ke(d,c)),d},We=function(e,t){return qe(e,t.classes,t.value,t.placeholder,t.disabled,t.checked,t.dataAtt,t.otherAtt,t.children)},ze=function(e,t){var n=document.createElement("style");t&&(n.id=t);var r=(0,_e.getConfig)("cssNonce");return r&&(n.nonce=r),n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:(n.innerHTML="",n.appendChild(document.createTextNode(e))),n};t.isEnterAllowedElement=be,t.isBlank=i,t.addEventListener=d,t.createElement=Ve,t.appendElements=Ke,t.createInput=qe,t.isNotEmptyArr=s,t.removeEventListener=u,t.MILLISEC=1e3,t.convert2Parameters=g,t.addParameter=h,t.addParameters=v,t.addCacheBuster=m,t.isObject=y,t.removeChildren=E,t.createStyle=ze,t.pushElements=C,t.setCrossBrowserTransform=w,t.hexToRgba=T,t.findHighestZIndex=k,t.isElementVisible=A,t.isString=F,t.hasParentClass=P,t.addParameterToUrl=j,t.addParametersToUrl=H,t.getQueryParam=$,t.removeFromQueryParam=V,t.setSelectorStrengthLabel=q,t.makeDraggable=W,t.isEmptyArr=l,t.isObjectEmpty=z,t.hasParentField=M,t.checkDarkColor=x,t.searchElementInParentTree=G,t.clearAptrinsicSessionStorage=Y,t.createElementFromString=p,t.retryFunction=X,t.isRandomIdSelector=K,t.createInputConfig=We,t.needToScroll=_,t.scrollElementToCenter=Z,t.matchEither=ee,t.escapeRegex=ne,t.matchUrl=oe,t.isWebApp=ie,t.getPageUrl=se,t.isUndefinedStr=o,t.isDefinedStr=r,t.safeUrl=re,t.getEscHandlerCallback=ce,t.addStyle=f,t.getHandler=fe,t.hasElement=U,t.addStopClickListeners=pe,t.getUrlParts=le,t.getEnterHandler=de,t.addEnterKeyDownListener=ue,t.isFunction=D,t.isNullOrUndefined=ve,t.isNotNullOrUndefined=me,t.paramToObject=b,t.trimString=a,t.getNumberWithFallback=ye,t.isEmail=Ee,t.isRootNode=B,t.isRootTag=R,t.isValidPort=ae,t.isElementInIframeVisible=I},,function(e,t,n){"use strict";function r(e){var t=k[e];if(null===t)throw new Error("not found any value for config "+e);return t}function o(){return Object.assign({},k)}function i(){var e=window.self!==window.top.parent&&r("iframeModeEnabled")&&!window.runVue;return e?window.self!==window.top.parent.self:e}function a(){return r("framesetMode")?document.documentElement:document.body}function s(e){switch(e){case"style":return r("cssFileEndpoint")||be+"/style.css";case"widget":return r("widgetFileEndpoint")||ye;default:return null}}function l(e,n){e&&!e.startsWith("http")&&(e="https://"+e),n&&!n.startsWith("http")&&(n="https://"+n),e&&(t.serverEndpointBase=X=e+A,t.serverEndpoint=J=X+O,t.commandEndpoint=Q=J+N,t.commandEndPointV2=Z=X+"/v2/command",t.campaignEndpoint=ee=J+L,t.notificationEndpoint=te=J+F,t.notificationStateEndpoint=ne=J+D,t.engagementTrackEndpoint=re=J+B,t.accountEndpoint=oe=J+R,t.logErrorEndpoint=ie=J+P,t.internalErrorEndpoint=ae=J+M,t.ondemandEndpoint=se=J+U,t.ongoingEngagementEndpoint=le=J+j,t.getConfigEndpoint=ce=J+H,t.getKnowledceCenterConfigEndpoint=de=X+$,t.getWidgetConfigUrl=ue=J+V,t.trackMultiStepEndpoint=he=J+"/engagement/multistep/track",t.trackStepEndpoint=me=J+"/engagement/multistep/step/track",t.getWidgetContentEndpoint=pe=X+K,t.getWidgetDocsEndpoint=fe=X+q,t.getAllInAppEndpoint=ve=J+_,t.getWidgetSingleDocEndpoint=ge=X+W,t.desktopEngagementTrackEndpoint=Se=X+z,t.trackSurveyCompleteEndpoint=Te=X+Y,t.fetchFeatureRuleEndpoint=Ce=""+X+G,t.snoozeUrl=we=J+"/engagement/track/snooze",t.trackKcEndpoint=Ee=J+"/kc"),n&&(t.staticContentHost=be=n)}function c(e){return ke.indexOf(e)>-1&&("identify"!==e||!r("enableIdentifyFromIFrame"))}function d(e){return void 0!==e&&"[object Object]"==Object.prototype.toString.call(e)}function u(){k.enableTag=!1}function p(e){return("string"!=typeof e||!(0,T.isBlank)(e))&&(!Array.isArray(e)||!(0,T.isEmptyArr)(e))}function f(e,t,n,r){var i=o();if(d(e))for(var a in e)e.hasOwnProperty(a)&&k.hasOwnProperty(a)&&p(e[a])&&(-1===I.indexOf(a)||r)&&(k[a]=e[a],n&&I.push(a));k.autoTrack?k.autoClickTrack||(k.trackLevel=1):k.trackLevel=0,t&&m(i,k),l(k.espProxyDomain,k.contentProxyDomain)}function g(e){return(!i()||!c(e))&&("pageView"===e?k.trackLevel>0&&r("autoTrackPage"):xe[e]<=k.trackLevel)}function h(e,t){if(!k.hasOwnProperty(e))return void w.logger.logInternalError(new Error("Unrecognized config field: "+e+". Cannot set config change handler"));Ie[e]=t}function m(e,t){for(var n in Ie)Ie.hasOwnProperty(n)&&e[n]!==t[n]&&Ie[n](e[n],t[n])}function v(e,t){Le.setdata(e,t)}function b(e){return Le.getKey(e)}function y(){return Ae}function E(e){if(Ae=e,Ne)for(var t in Ne)e.hasOwnProperty(t)||(Ae[t]=Ne[t])}function S(e,t){d(Ae)&&(Ae[e]=t),-1!==Oe.indexOf(e)&&(Ne=Ne||{},Ne[e]=t)}function C(){return{enableTag:!0,maxEngagementCalls:2,engagementCallDelay:500,filterType:"mask",filterUrls:[],nameParamFilterType:"mask",namedParamFilter:[],autoTrackHash:!1,widgetEnabled:!1,trackLevel:3,autoClickTrack:1,autoTrack:1,autoTrackPage:!0,iframeModeEnabled:!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCachedConfig=t.setCachedConfig=t.getAssetEndpoint=t.disableTag=t.setKcConfigByName=t.setKcConfig=t.getKcConfig=t.getDefaultConfiguration=t.registerConfigChangeHandler=t.getConfigObj=t.isIframe=t.isIframeDisabled=t.featureEnabled=t.getConfig=t.overrideConfig=t.trackSurveyCompleteEndpoint=t.snoozeUrl=t.fetchFeatureRuleEndpoint=t.desktopEngagementTrackEndpoint=t.trackKcEndpoint=t.widgetUrl=t.staticContentHost=t.getAllInAppEndpoint=t.refreshBadgeEndpoint=t.badgeTrackEndpoint=t.fetchBadgeEndpoint=t.trackStepEndpoint=t.trackMultiStepEndpoint=t.getWidgetSingleDocEndpoint=t.getWidgetDocsEndpoint=t.getWidgetContentEndpoint=t.getWidgetConfigUrl=t.getKnowledceCenterConfigEndpoint=t.getConfigEndpoint=t.ongoingEngagementEndpoint=t.ondemandEndpoint=t.internalErrorEndpoint=t.logErrorEndpoint=t.accountEndpoint=t.engagementTrackEndpoint=t.notificationStateEndpoint=t.notificationEndpoint=t.campaignEndpoint=t.commandEndPointV2=t.commandEndpoint=t.serverEndpoint=t.serverEndpointBase=t.trackWidgetExternalArticleInfix=void 0,t.getBody=a;var w=n(3),T=n(0),x=n(5),k={enableTag:!0,maxEngagementCalls:1,engagementCallDelay:750,filterType:"mask",filterUrls:[],nameParamFilterType:"mask",namedParamFilter:[],autoTrackHash:!1,widgetEnabled:!1,trackLevel:3,autoClickTrack:!0,autoTrack:!0,autoTrackPage:!0,iframeModeEnabled:!0,elementAttributeWhitelist:[],engagementExcludeUrl:[],delayClickEvent:!1,delayClickEventTime:2e3,textMatchEnabled:!1,guideAdvanceOnHover:!1,espProxyDomain:void 0,contentProxyDomain:void 0,enableBadge:!0,badgeRefreshInterval:5,setSessionExternally:!1,usePOST:!1,allowCrossDomain:!1,enableFullStory:!1,fullDomainCookie:!1,cssFileEndpoint:void 0,widgetFileEndpoint:void 0,multipleProductsPerDomain:!0,fetchKcType:"automatic",kcDisplayType:"default",kcPositionType:"injection",sfdcTemplate:void 0,overrideBotSearchContextUrl:void 0,htmlSanitization:!1,htmlSanitizationAllowedDomains:void 0,mapperResizeFullHeightElements:!1,sessionCookieTTL:18e5,enableIdentifyFromIFrame:!1,engagementChecksumFileUrl:void 0,cssNonce:void 0,enableKcSecureArticle:!1,useSessionStorageEditorToken:!1,secureCookie:!1,mapperResizeFullHeightBody:!1,stripSafeUrlProtocol:!0,elementAttributeDenyMap:{},maskUrlFunction:void 0,trustedOrigin:void 0,angularMutationObserver:!1,badgeUseInterval:!1,badgeRepositionInterval:500,enableModalBodyScroll:!0,evaluateEngRuleOnNavigation:!1,usesShadowDom:!1,dockMapper:!1,kcAllowedFuncNames:[],usePointerEvent:!0,badgesUseFixedPosition:!1,crossOriginStyle:!1,viewAlignedScroll:!1,newProductMapper:!0,framesetMode:!1,angularAddEventListener:!1,crossProductEngagement:!1,queryParamsInHash:!1,clientSideEngagementTracking:!1,engagementEditorV2AutoSave:!1,trackPageTitles:!0,excludeUrls:[]},I=[],A="/rte",O="/v1",N="/command",L="/engagements/single",_="/inapp",F="/notification/list",D="/notification/state",B="/engagement/track",R="/account",P="/error/log",M="/activity/error",U="/engagement/ondemand",j="/engagement/ongoing",H="/configuration",$="/v2/kc",V="/kc/config",K=$+"/content",q=$+"/docs",W=$+"/doc",z="/v1/desktop/engagement",G="/api/v1/feature/client",Y="/v1/engagement/survey/completed",X=(t.trackWidgetExternalArticleInfix="track/article/external",t.serverEndpointBase='https://esp.aptrinsic.com'+A),J=t.serverEndpoint=X+O,Q=t.commandEndpoint=J+N,Z=t.commandEndPointV2=X+"/v2/command",ee=t.campaignEndpoint=J+L,te=t.notificationEndpoint=J+F,ne=t.notificationStateEndpoint=J+D,re=t.engagementTrackEndpoint=J+B,oe=t.accountEndpoint=J+R,ie=t.logErrorEndpoint=J+P,ae=t.internalErrorEndpoint=J+M,se=t.ondemandEndpoint=J+U,le=t.ongoingEngagementEndpoint=J+j,ce=t.getConfigEndpoint=J+H,de=t.getKnowledceCenterConfigEndpoint=X+$,ue=t.getWidgetConfigUrl=J+V,pe=t.getWidgetContentEndpoint=X+K,fe=t.getWidgetDocsEndpoint=X+q,ge=t.getWidgetSingleDocEndpoint=X+W,he=t.trackMultiStepEndpoint=J+"/engagement/multistep/track",me=t.trackStepEndpoint=J+"/engagement/multistep/step/track",ve=(t.fetchBadgeEndpoint=J+"/badges",t.badgeTrackEndpoint=J+"/badge/track",t.refreshBadgeEndpoint=J+"/badges/full/sync",t.getAllInAppEndpoint=J+_),be=t.staticContentHost='https://web-sdk.aptrinsic.com',ye=t.widgetUrl='https://web-sdk.aptrinsic.com'+"/widget/aptrinsic-widget.js",Ee=t.trackKcEndpoint=J+"/kc",Se=t.desktopEngagementTrackEndpoint=""+X+z,Ce=t.fetchFeatureRuleEndpoint=""+X+G,we=t.snoozeUrl=J+"/engagement/track/snooze",Te=t.trackSurveyCompleteEndpoint=""+X+Y,xe={click:2,pageView:1,form:1,identify:0,engagementPull:0},ke=["pageView","identify","sessionInitialized","engagementPull"],Ie={},Ae=void 0,Oe=["labels"],Ne=void 0,Le=new x.LocalCache;t.overrideConfig=f,t.getConfig=r,t.featureEnabled=g,t.isIframeDisabled=c,t.isIframe=i,t.getConfigObj=o,t.registerConfigChangeHandler=h,t.getDefaultConfiguration=C,t.getKcConfig=y,t.setKcConfig=E,t.setKcConfigByName=S,t.disableTag=u,t.getAssetEndpoint=s,t.setCachedConfig=v,t.getCachedConfig=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(45),a=n(4),s=n(11),l=n(2),c=n(6),d=n(13),u=n(21),p=a.eventTrackData,f=function(){function e(){r(this,e);var t=i.Cookie.getCookie("apt.debug");this.debugMode="true"===t}return o(e,[{key:"log",value:function(e){this.debugMode&&console&&console.log&&console.log(e)}},{key:"trace",value:function(e){this.debugMode&&console&&console.trace&&console.trace(e)}},{key:"logInternalMessage",value:function(e){(0,l.getConfig)("enableTag")&&((0,l.isIframe)()||s.AjaxUtil.postData(l.internalErrorEndpoint+"?p="+p.data[a.productIdParameter],e,void 0,void 0,void 0,void 0,!0))}},{key:"logInternalError",value:function(e,t){if((0,l.getConfig)("enableTag")){if((0,l.isIframe)()){t||(t=""),t+="Error from Iframe: "+window.location.toString();var n=c.IframeRequest.getIframeRequest((0,d.getIframeId)(),"apt-log",{message:e.message,stackTrace:e.stack,extraMessage:t});return void window.top.postMessage(JSON.stringify(n),"*")}var r="aptrinsic web sdk error: ";t&&(r+=t+"\n"),r+=e.message,e.stack?(r+=", stack trace: "+e.stack,this.log(r)):(r+=e.message,e.stack?(r+=", stack trace: "+e.stack,this.log(r)):this.trace(r)),this.reportToServer(r)}}},{key:"reportToServer",value:function(e){s.AjaxUtil.postData(l.logErrorEndpoint,{url:(0,u.getFullUrlMasked)(),apiKey:p.data[a.productIdParameter],message:e,applicationVersion:a.applicationVersion},void 0,void 0,void 0,void 0,!0)}}]),e}();t.logger=new f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRA_ATTRIBUTES_BY_ELEMENT_TYPE=t.path=t.host=t.externalEventListeners=t.globalContextCache=t.eventTrackData=t.aptrinsicGlobalObjName=t.decode=t.documentRef=t.windowRef=t.applicationVersion=t.aptrinsicIdParam=t.sessionIdParam=t.userIdParameter=t.productIdParameter=t.apiMethods=t.trackApiMethod=void 0;var r=n(5),o=t.trackApiMethod="track";t.apiMethods=[o,"get","users","set","identify","initWithExternalState","carousel","login","lead","account","checklog","event","setOnce","remove","pageView","send","bot","kcb","reset","addListener","config","render"],t.productIdParameter="p",t.userIdParameter="v",t.sessionIdParam="s",t.aptrinsicIdParam="ai",t.applicationVersion="0.47.0",t.windowRef=window,t.documentRef=document,t.decode=decodeURIComponent,t.aptrinsicGlobalObjName="aptrinsic",t.eventTrackData=new r.LocalCache,t.globalContextCache=new r.LocalCache,t.externalEventListeners={},t.host=location.hostname,t.path=location.pathname+location.search+location.hash,t.EXTRA_ATTRIBUTES_BY_ELEMENT_TYPE={button:["name","value","type"],img:["src","alt"],select:["name"],textarea:["name"],input:["name","type"],a:["href"]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return void 0!==e&&null!=e&&"[object Object]"==Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.LocalCache=function(){function e(){r(this,e),this.data={},this.callbacks=[]}return i(e,[{key:"getdata",value:function(){return this.data}},{key:"onChange",value:function(e){e&&"function"==typeof e&&this.callbacks.push(e)}},{key:"toString",value:function(){return JSON.stringify(this.data)}},{key:"setdata",value:function(e,t){var n=this;try{this.data[e]=t,this.callbacks.forEach(function(e){e(n.data)})}catch(e){}}},{key:"mergeData",value:function(e,t,n){if(o(t)){var r=this.data[e];r||(r={}),n?Object.keys(t).forEach(function(e){r.hasOwnProperty(e)||(r[e]=t[e])}):Object.assign(r,t),this.data[e]=r}else{var i=this.getKey(e);n?!i&&this.setdata(e,t):this.setdata(e,t)}}},{key:"addToMap",value:function(e,t,n){var r=this.data[e];r||(r={}),r[t]||(r[t]={}),Object.assign(r[t],n),this.data[e]=r}},{key:"getKey",value:function(e){return this.data[e]}},{key:"deleteKey",value:function(e){delete this.data[e]}}]),e}();t.cacheSet="setdata",t.cacheGetAll="getdata",t.cacheGet="getKey",t.cacheGetAsString="toString",t.cacheMerge="mergeData",t.cacheOnChange="onChange"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){for(var t=document.querySelectorAll("frame"),n=void 0,r=0;r<t.length;r++)if(t[r].name===e.name){n=t[r];break}return n}function i(e,t,n,r){if(r){var i=o(e);S[n]=S[n]||new y(e,t,n,i.getBoundingClientRect())}else S[n]=S[n]||new y(e,t,n);b.internalEventListener.dispatchEvent("IFRAME_REGISTERED",S[n])}function a(e){delete S[e]}function s(){return Object.keys(S).map(function(e){return S[e]})}function l(e){return S[e]}function c(e,t){var n=S[e];n&&(n.domElement=t,n.isChild=!0)}function d(e,t,n){var r={callback:t,counter:0,data:null,additionalData:n};C[e]=r}function u(e){C[e].counter++}function p(e,t){var n=C[e];n&&(null===n.data&&(n.data=[]),n.data.push(t),--n.counter<=0&&(n.timeout&&clearTimeout(n.timeout),n.callback(n.data,n.additionalData)))}function f(e,t){var n=C[e];n&&t&&(n.timeout=setTimeout(function(){for(;n.counter>0;)p(e,{error:"PX_INCREMENT_STATE_TIMEOUT_"+n.counter})},t))}function g(e){w[e]=Date.now()}function h(){Object.entries(w).map(function(e){if(e[1]<Date.now()-T)return e[0]}).filter(function(e){return void 0!==e}).forEach(function(e){return delete w[e]})}function m(e){return h(),w[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHandledRequest=t.addHandledRequestId=t.execute=t.unregisterIframe=t.associateIframe=t.getIframeData=t.IframeData=t.decrementState=t.incrementState=t.subscribe=t.IframeRequest=t.getRegisteredIframes=t.registerIframe=void 0;var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=n(9),y=function e(t,n,o,i){r(this,e),this.iframe=t,this.origin=n,this.iframeId=o,this.frameOffset=i},E=function(){function e(t){if(r(this,e),t&&(this.aptrinsicEventType=t.aptrinsicEventType,this.aptrinsicIframeId=t.aptrinsicIframeId,this.content=t.content,this.aptrinsicRequestId=t.aptrinsicRequestId,!this.aptrinsicEventType))throw new Error("cannot initiate iframe request without event type")}return v(e,null,[{key:"getMasterRequst",value:function(t,n,r,o){var i=new e({aptrinsicIframeId:o,aptrinsicEventType:t,content:n,aptrinsicRequestId:r});if(!i.aptrinsicEventType)throw new Error("cannot initiate iframe request without event type");return i}},{key:"getIframeRequest",value:function(t,n,r,o){var i=new e({aptrinsicIframeId:t,aptrinsicEventType:n,content:r,aptrinsicRequestId:o});if(!i.aptrinsicEventType)throw new Error("cannot initiate iframe request without event type");if(!i.aptrinsicIframeId)throw new Error("cannot initiate iframe request without iframe id");return i}}]),e}(),S={},C={},w={},T=6e4;t.registerIframe=i,t.getRegisteredIframes=s,t.IframeRequest=E,t.subscribe=d,t.incrementState=u,t.decrementState=p,t.IframeData=y,t.getIframeData=l,t.associateIframe=c,t.unregisterIframe=a,t.execute=f,t.addHandledRequestId=g,t.checkHandledRequest=m},function(e,t,n){"use strict";function r(e,t,n){var r=(0,F.createElement)("div",n);return e=o(e),r.innerHTML=e,t?r.firstChild:r}function o(e){var t=(0,D.getConfig)("cssNonce");if(t){var n=/<style(>|[ ]+[^>]*>)/g;e=e.replace(n,'<style nonce="'+t+'"$1')}return e}function i(e){var t=""+ +new Date+Math.random();try{var n=e;return n[t]="asd","asd"===n[t]}catch(e){return!1}}function a(e,t){var n=window.top.document.querySelector(e),r=void 0;if(n)return{element:n,sourceIframe:null};try{if((0,F.isNotEmptyArr)(t))for(var o=0;o<t.length&&(r=t[o],!i(r)||!(n=r.iframe.document.querySelector(e)));o++);}catch(e){}return n?{element:n,sourceIframe:n?r:void 0}:void 0}function s(e,t){var n=void 0,r=void 0;try{if((0,F.isNotEmptyArr)(t))for(var o=0;o<t.length&&(r=t[o],!i(r)||!(n=r.iframe.document.querySelector(e)));o++);}catch(e){}return{element:n,sourceIframe:n?r:void 0}}function l(e,t,n){return t[n?"querySelectorAll":"querySelector"](e)}function c(e){for(var t=e;t&&"BODY"!==t.tagName;){if(1===t.nodeType&&(t.classList.contains("apt-guide-popup")||"true"===t.getAttribute("data-apt-disable-selector")||t.classList.value.indexOf("apt-")>-1||t.classList.value.indexOf("aptr-")>-1))return!1;t=t.parentNode}return!0}function d(e,t,n){var r=void 0,o=void 0,i=null;for(e=e.firstChild;e;e=e.nextSibling)if(r=e.nodeType,o="",r===K||r===q&&-1==V.indexOf(e.tagName.toLowerCase())&&c(e))if(o=e.textContent,o=o.trim(),e.childNodes&&e.childNodes.length>0){var a=void 0,s="";switch(t){case"is":case"startsWith":case"endsWith":case"contains":a="contains",s=n;break;case"isNot":case"notContains":case"notStartsWith":case"notEndsWith":a="isNotEmpty";break;case"isNotEmpty":a=t}if(("isEmpty"===t||(0,P.matchExpression)(o,a,s))&&(i=d(e,t,n)))return i}else{if(r===K&&(0,P.matchExpression)(o,t,n)&&(0,F.isElementVisible)(e.parentNode))return e.parentNode;if(r===q&&(0,P.matchExpression)(o,t,n)&&(0,F.isElementVisible)(e))return e}return i}function u(e,t,n){var r=void 0,o=void 0;if(e.matchCssSelector){if(o=(0,j.findElementsInShadowDom)(e.cssSelector,t),(0,F.isEmptyArr)(o))return null;if(e.matchTextRule){for(var i=[],a=0;a<o.length;a++)if(r=o[a],(0,P.matchExpression)((0,F.isBlank)(r.textContent)?"":r.textContent.trim(),e.textRuleOperator,e.textRuleValues[0])){if(!n)return r;i.push(r)}return(0,F.isEmptyArr)(i)?null:i}return n?o:o[0]}if(e.matchTextRule){var s=d((0,D.getBody)(),e.textRuleOperator,e.textRuleValues[0]);return s&&n?[s]:s}return null}function p(e,t){var n=[],r=window.top.document.querySelector(e);r&&n.push(r);try{var o=void 0;if(t)for(var a=0;a<t.length;a++)o=t[a],i(o)&&(r=o.iframe.document.querySelector(e))&&n.push(r)}catch(e){}return n}function f(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function g(e){return e.ownerDocument.defaultView.frameElement}function h(e){try{for(var t=0,n=0,r=0,o=0,i=e.ownerDocument.defaultView;i!==window.top;){var a=i.frameElement.getBoundingClientRect();t+=a.top,n+=a.left,r+=a.right,o+=a.bottom,i=i.frameElement.ownerDocument.defaultView}return{top:t,left:n,right:r,bottom:o}}catch(e){return B.logger.logInternalError(e),{top:0,left:0,right:0,bottom:0}}}function m(e){if(!e||!(0,F.isElementVisible)(e))return null;var t=void 0;return t="input"===e.tagName.toLowerCase()?e.value:e.textContent,(0,F.isUndefinedStr)(t)?null:t.trim()}function v(e){return m(l(e,document))}function b(e,t,n){var r=n?n+" ."+t:"."+t,o=e.indexOf(t);if(o>-1){var i=e.indexOf("}",o),a=e.substring(0,o-1),s=e.substring(i+1,e.length),l=e.substring(o-1,i+1),c=(a+s).replace($,r+" $1 $2");return n?n+" "+l+c:l+c}return e.replace($,r+" $1 $2")}function y(e,t,n,r){if(!(0,F.isBlank)(t)){var o=document.createElement("style"),i=(0,D.getConfig)("cssNonce");i&&(o.nonce=i),o.type="text/css",t=n?b(t,n,r):t,o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),e.appendChild(o)}}function E(){var e=U.documentRef.documentElement,t=(0,R.detectIE)();if(t){e=t<=M.LAST_IE_VERSION?U.documentRef.documentElement:U.documentRef.body}return e}function S(){var e=(0,R.detectIE)(),t=!1;return e&&(t=e<79),t}function C(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e){var n=E(),r=n.scrollTop,o=n.scrollLeft;e.focus({preventScroll:t}),t&&S()&&(n.scrollLeft=o,n.scrollTop=r)}}catch(e){B.logger.logInternalError(e,"FocusElement - could not focus on element")}}function w(e,t){try{(0,F.addEventListener)(e,"mousedown",function(e){e.preventDefault(),t&&C(t)})}catch(e){B.logger.log(e,"disableFocusOnClick")}}function T(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":_(e))&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}function k(e,t){["webkitTransitionEnd","mozTransitionEnd","oTransitionEnd","transitionend"].forEach(function(n){(0,F.addEventListener)(e,n,t)})}function I(e,t){["webkitTransitionEnd","mozTransitionEnd","oTransitionEnd","transitionend"].forEach(function(n){(0,F.removeEventListener)(e,n,t)})}function A(e,t){["webkitTransitionStart","mozTransitionStart","oTransitionStart","transitionstart"].forEach(function(n){(0,F.addEventListener)(e,n,t)})}function O(e,t){["webkitTransitionStart","mozTransitionStart","oTransitionStart","transitionstart"].forEach(function(n){(0,F.removeEventListener)(e,n,t)})}function N(e){return e.tagName&&"function"==typeof e.tagName.toLowerCase?e.tagName:e.nodeName}function L(e,t){return t===e||t.isEqualNode(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.checkIfSameElement=t.getTagName=t.removeTransitionStartListener=t.addTransitionStartListener=t.removeTransitionEndListener=t.addTransitionEndListener=t.stripHtml=t.isElement=t.addNonceToDomString=t.disableFocusOnClick=t.focusElement=t.getText=t.findElementInWindow=t.observeDOM=t.addStyleTag=t.getElementText=t.getIframeOffsetOfElement=t.getContainingIframeOfElement=t.getParentWindowOfElement=t.findElementInFrames=t.findInWindow=t.findAllElements=t.findElement=t.checkIframe=t.toDom=void 0;var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=n(0),D=n(2),B=n(3),R=n(10),P=n(78),M=n(8),U=n(4),j=n(18),H=n(30),$=/([^]*?)({[^]*?}|,)/g,V=["script","style"],K=3,q=1,W=function(){var e=(0,H.getNativeMutationObserver)();return function(t,n){if(t&&1!==!t.nodeType)if(e){var r=new e(function(e){n(e)});r.observe(t,{childList:!0,subtree:!0})}else window.addEventListener&&(t.addEventListener("DOMNodeInserted",n,!1),t.addEventListener("DOMNodeRemoved",n,!1))}}();t.toDom=r,t.checkIframe=i,t.findElement=a,t.findAllElements=p,t.findInWindow=l,t.findElementInFrames=s,t.getParentWindowOfElement=f,t.getContainingIframeOfElement=g,t.getIframeOffsetOfElement=h,t.getElementText=v,t.addStyleTag=y,t.observeDOM=W,t.findElementInWindow=u,t.getText=m,t.focusElement=C,t.disableFocusOnClick=w,t.addNonceToDomString=o,t.isElement=T,t.stripHtml=x,t.addTransitionEndListener=k,t.removeTransitionEndListener=I,t.addTransitionStartListener=A,t.removeTransitionStartListener=O,t.getTagName=N,t.checkIfSameElement=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.MAX_TAB_INDEX=32767,o=(t.TAB_INDEX_START=r-1e3,t.NO_TAB_INDEX=-1,t.LAST_IE_VERSION=11,t.DESKTOP_CHANNEL=4,t.PROD_ENVIRONMENT=1,t.GLOBAL_CONTEXT_CHANGED="GLOBAL_CONTEXT_CHANGED",t.TEXT_OPERATOR_IS="is",t.IN_APP_GUIDE="IN_APP_GUIDE",t.IN_APP_MULTIPLE_QUESTION_SURVEY="IN_APP_MULTIPLE_QUESTION_SURVEY",t.IN_APP_RATING_SURVEY="IN_APP_RATING_SURVEY"),i=t.IN_APP_SURVEY_NPS="IN_APP_SURVEY_NPS",a=t.IN_APP_BOOLEAN_SURVEY="IN_APP_BOOLEAN_SURVEY",s=t.IN_APP_CES_SURVEY="IN_APP_CES_SURVEY";t.SCORE_SURVEY_TYPES=[o,i,a,s],t.ACTIVATION_TYPE_AUTOMATIC="a",t.EDITOR_ACTIVATION_TYPE_AUTOMATIC="APPLICATION",t.VIEW_TYPE_BAR="BAR"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return d.getKey(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.internalEventListener=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=n(0),l=n(3),c=n(15),d=new a.LocalCache,u=function(){function e(){r(this,e)}return i(e,[{key:"addListener",value:function(e,t,n,r,o){var i=c.UUIDGenerator.generateV4Id(),a=d.getKey(e);a||(a=[],d.setdata(e,a));for(var s=!1,l=0;l<a.length;l++)if(a[l].callback===t){s=!0;break}s||a.push({listenerId:i,callback:t,thisReference:n,isExternal:r,executeOnce:o})}},{key:"removeListener",value:function(e,t,n){var r=d.getKey(e);if((0,s.isNotEmptyArr)(r))for(var o=0;o<r.length;o++)r[o].callback!==t&&r[o].listenerId!==n||r.splice(o,1)}},{key:"dispatchEvent",value:function(e){try{var t=o(e),n=[];arguments.length>1&&(n=Array.prototype.slice.call(arguments,1));var r=[];t&&t.forEach(function(t,o){var i=this;try{t.isExternal?setTimeout(function(){t.callback.apply(t.thisReference||i,n)},0):t.executeOnce&&!t.executed?(t.executed=!0,r.unshift(o),t.callback.apply(t.thisReference||this,n)):t.callback.apply(t.thisReference||this,n)}catch(t){l.logger.logInternalError(t,"Error while executing listener for type "+e)}}),r.length>0&&r.forEach(function(e){return t.splice(e,1)})}catch(t){l.logger.logInternalError(t,"Error while trying to execute listeners for type"+e)}}}]),e}(),p=new u;t.internalEventListener=p},function(e,t,n){"use strict";function r(){try{return localStorage.setItem("aptTest","aptTest"),localStorage.removeItem("aptTest"),!0}catch(e){return!1}}function o(){if(k!==document.location.hostname){k=document.location.hostname;var e=new Date,t=void 0,n=void 0,r="apt.temp-"+Date.now()+b.UUIDGenerator.generateRandom(8),o=document.location.hostname.split("."),i=f();if(e.setTime(Date.now()+6e4),1==o.length)return I="";for(var a=o.length-1;a>=0;a--)if(t=o.slice(a).join("."),n="."+t,document.cookie=r+"=cookie;domain="+n+"; expires="+e.toUTCString()+i,document.cookie.indexOf(r)>-1)return document.cookie=r+"=;domain="+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;"+i,I="."+t;I=document.location.hostname}return I}function i(e){var t=null;return window.innerWidth&&!e?t=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?t=document.documentElement.clientWidth:(0,C.getBody)()&&(t=(0,C.getBody)().clientWidth),t||0}function a(){var e=null;return window.innerHeight?e=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:(0,C.getBody)()&&(e=(0,C.getBody)().clientHeight),e||0}function s(){var e=document,t=e.body,n=document.documentElement;return Math.max(t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)}function l(){if(!w){w=!0;for(var e=0;e<x.length;e++){var t=Array.prototype.slice.call(x[e]),n=t.shift();try{n.apply(window,t)}catch(e){}}x=[]}}function c(){"complete"===document.readyState&&ready()}function d(e){if(w){var t=[].slice.call(arguments,1);return void setTimeout(function(){e.apply(window,t)},1)}x.push(arguments),"complete"===document.readyState?setTimeout(l,1):T||(document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):(document.attachEvent("onreadystatechange",c),window.attachEvent("onload",l)),T=!0)}function u(e){if((0,E.isBlank)(e))return null;try{var t=y.documentRef.createElement("a");return t.href=e,{protocol:t.protocol+"//",host:t.host,pathname:t.pathname,search:t.search,hash:t.hash}}catch(e){return null}}function p(e){var t=e||window.navigator.userAgent,n=t.indexOf("MSIE ");if(n>0)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);if(t.indexOf("Trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var o=t.indexOf("Edge/");return o>0&&parseInt(t.substring(o+5,t.indexOf(".",o)),10)}function f(){return g()&&y.documentRef.location.protocol.startsWith("https")?"; SameSite=None; secure":""}function g(){return window.self!==window.top.parent&&!window.runVue}function h(e,t,n){n&&(e.style[t]=n)}function m(){var e=p();return e&&e<S.LAST_IE_VERSION?"MSPointerDown":"pointerdown"}function v(){var e=p();return e&&e<S.LAST_IE_VERSION?"MSPointerUp":"pointerup"}Object.defineProperty(t,"__esModule",{value:!0}),t.getPointerDownEventName=t.getPointerUpEventName=t.applyStyle=t.getSameSiteCookieSuffix=t.detectIE=t.localStorageEnabled=t.url2Location=t.getDomain=t.addDOMReadyListener=t.getFullPageHeight=t.getPageHeight=t.getPageWidth=void 0;var b=n(15),y=n(4),E=n(0),S=n(8),C=n(2),w=!1,T=!1,x=[],k=null,I=null;t.getPageWidth=i,t.getPageHeight=a,t.getFullPageHeight=s,t.addDOMReadyListener=d,t.getDomain=o,t.url2Location=u,t.localStorageEnabled=r,t.detectIE=p,t.getSameSiteCookieSuffix=f,t.applyStyle=h,t.getPointerUpEventName=v,t.getPointerDownEventName=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r,o,i,p,f){try{var g=u.createCors(e,t);if(!g){if(f)return;throw new Error("cannot make request to "+t+" not supported")}if(p&&g.setRequestHeader("Content-Type","application/json"),o)for(var h in o)o.hasOwnProperty(h)&&g.setRequestHeader(h,o[h]);g.onload=function(){try{var o=g.responseText,i=null;if(""!==o)try{i=JSON.parse(o)}catch(e){i=o}if(g.status>=200&&g.status<300){var u=a.eventTrackData[l.cacheGet](a.productIdParameter);if(i&&i.p&&u&&!(0,c.isApiKeyMatch)(i.p,u)&&!(0,d.getConfig)("crossProductEngagement"))return;n&&n(i)}else s.logger.log("error "+g.statusText+" happened in the request: "+e+" "+t),r&&r(g.status,i)}catch(e){if(f)return;s.logger.logInternalError(e)}},g.onerror=function(){f||(r&&r(),s.logger.log("error happened in the request: "+e+" "+t))},g.PXsource="true",i&&"GET"!==e?g.send(JSON.stringify(i)):g.send()}catch(e){if(f)return;var m="sendAjaxRequest: ";if(m+="URL: '"+t+"'\n",i)try{m+="Data: '"+JSON.stringify(i)+"'\n"}catch(e){}s.logger.logInternalError(e,m)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxUtil=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=n(3),l=n(5),c=n(20),d=n(2),u=function(){function e(){r(this,e)}return i(e,null,[{key:"createCors",value:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n}},{key:"postData",value:function(e,t,n,r,i,a,s){o("POST",e,r,i,n,t,a,s)}},{key:"putData",value:function(e,t,n,r,i,a){o("PUT",e,r,i,n,t,a)}},{key:"getData",value:function(e,t,n,r,i,a){o("GET",e,t,r,n,null,i,a)}},{key:"deleteData",value:function(e,t,n,r,i,a){o("DELETE",e,r,i,n,t,a)}},{key:"loadFile",value:function(e,t,n){try{var r=null;switch(e){case"js":r=a.documentRef.createElement("script"),r.async=!0,r.type="text/javascript",r.src=t;break;case"css":r=a.documentRef.createElement("link"),r.rel="stylesheet",r.type="text/css",r.href=t,n&&(r.crossOrigin="anonymous");break;default:throw new Error("unknown type "+e)}a.documentRef.getElementsByTagName("head")[0].appendChild(r)}catch(e){s.logger.logInternalError(e)}}}]),e}();t.AjaxUtil=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return!!e&&/\{\s+\[native code\]/.test(Function.prototype.toString.call(e))}(Array.from)?Array.from:function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i=arguments.length>1?arguments[1]:void 0,a=void 0;if(void 0!==i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s=o(r.length),l=t(n)?Object(new n(s)):new Array(s),c=0,d=void 0;c<s;)d=r[c],l[c]=i?void 0===a?i(d,c):i.call(a,d,c):d,c+=1;return l.length=s,l}}();t.arrayFrom=r},function(e,t,n){"use strict";function r(e,t){try{if((0,g.isIframe)()||(0,h.isEmptyArr)(t))return;t.forEach(function(t){e.aptrinsicIframeId=t.iframeId,t.iframe&&t.iframe.postMessage(JSON.stringify(e),t.origin)})}catch(e){m.logger.logInternalError(e)}}function o(e){try{if(!(e&&e.data&&("string"==typeof e.data||e.data instanceof String)&&e.data.startsWith("{")))return null;return new v.IframeRequest(JSON.parse(e.data))}catch(e){return null}}function i(e,t,n){var r=(0,g.getConfig)("trustedOrigin"),o=void 0;o=n?r||"*":t.location.protocol+"//"+((0,h.isValidPort)(t.location.port)?t.location.host:t.location.hostname),t.postMessage(JSON.stringify(e),o)}function a(e,t){var n=(0,g.getConfig)("trustedOrigin");n&&n!==t.origin||t.iframe.postMessage(JSON.stringify(e),t.origin)}function s(){return window.aptrinsicIframeId=window.aptrinsicIframeId||b.UUIDGenerator.generateV4Id()}function l(e){var t=(0,y.getDomain)();e=(0,h.safeUrl)(e,!0),e.indexOf(":")>-1&&-1===t.indexOf(":")&&(e=e.split(":")[0]);var n=e.endsWith(t),r=e.indexOf(t)>-1,o=(0,g.getConfig)("trustedOrigin");return(!o||(0,h.safeUrl)(o,!0)===e)&&(!n&&r&&m.logger.logInternalError(new Error("iframe validate domain suffix does not match but domain "+t+" found in "+e)),!(!n&&0!==e.indexOf(t.substring(1,t.length))&&!(0,g.getConfig)("allowCrossDomain")))}function c(e){var t=window,n=t.frames;if(n.length>0)for(var r=0;r<n.length;r++)if(n[r]===e.source){var o=n[r].getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,width:o.width,height:o.height,x:o.x,y:o.y}}return{top:0,right:0,bottom:0,left:0}}function d(e,t,n,r){var o=b.UUIDGenerator.generateV4Id();(0,v.subscribe)(o,r),a(v.IframeRequest.getMasterRequst(e,t,o),n),(0,v.incrementState)(o)}function u(e,t,n){var r=b.UUIDGenerator.generateV4Id();(0,v.subscribe)(r,n),i(v.IframeRequest.getIframeRequest(s(),e,t,r),window.top,!0),(0,v.incrementState)(r)}function p(e){if(e.length>0)for(var t=0;t<e.length;t++){(function(t){if(!e[t].src.startsWith("http"))return"continue";var n=document.createElement("a");n.href=e[t].src;var r=n.protocol+"//"+((0,h.isValidPort)(n.port)?n.host:n.hostname),o=!1;(0,h.retryFunction)(5,500,function(){o||d("getChildAssociation",null,new v.IframeData(e[t].contentWindow,r),function(n){(0,v.associateIframe)(n[0].iframeId,e[t]),o=!0})})})(t)}}function f(e,t){var n=(0,v.getIframeData)(e);if(!n)return[];var r=n.domElement,o=(0,g.getConfig)("framesetMode"),i=o?n.frameOffset:r.getBoundingClientRect(),a=o||(0,h.isElementVisible)(r,!0),s=[];return Array.isArray(t)&&(s=t.map(function(e){return Object.assign({},e,{isVisible:e.isVisible&&a,rect:Object.assign({},e.rect,{top:e.rect.top+i.top,left:e.rect.left+i.left,right:e.rect.right+i.right,bottom:e.rect.bottom+i.bottom})})})),s}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidPort=t.fixBadgesLocations=t.iframeSubscribeCallback=t.createSubscribeCallbackRequest=t.associateChildIframes=t.getIframeBoundingRect=t.getIframeId=t.isValidCallingDomain=t.postRequestDown=t.postRequest=t.parseEvent=t.propagateDown=void 0;var g=n(2),h=n(0),m=n(3),v=n(6),b=n(15),y=n(10);t.propagateDown=r,t.parseEvent=o,t.postRequest=i,t.postRequestDown=a,t.isValidCallingDomain=l,t.getIframeId=s,t.getIframeBoundingRect=c,t.associateChildIframes=p,t.createSubscribeCallbackRequest=d,t.iframeSubscribeCallback=u,t.fixBadgesLocations=f,t.isValidPort=h.isValidPort},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=decodeURIComponent(e);if(t.indexOf("?redirect=")>-1){var n=document.createElement("a");return n.href=t.substring("?redirect=".length),n.search}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.previewEndpoint=void 0;var i=n(45),a=n(0),s=n(11),l=n(2),c=(n(4),n(5),window),d='https://app-be.aptrinsic.com'+"/api/editor/v2/preview",u=new function(){var e=void 0,t=void 0,n={},u=void 0,p=void 0,f=void 0,g=function(){return u.push(arguments),!0};return c.guideEditor=c.guideEditor||g,u=c.guideEditor.q||[],c.guideEditor.q=c.guideEditor.q||u,g.getQueue=function(){return u},g.isEditorMode=function(){return e&&t},g.isEngagementEditorV2=function(){return"7"===t},g.getToken=function(){return e},g.getType=function(){return t},g.isPreview=function(){return"true"===n.aptPreview},g.getPreviewUrl=function(){return d+"/"+n.groupId+"/"+n.contentId+"?lang="+n.aptLang},g.loadEditor=function(e){p=p||e;return"1"===t?s.AjaxUtil.loadFile("js",l.staticContentHost+"/api/editor.js?a="+e):"2"===t?s.AjaxUtil.loadFile("js",l.staticContentHost+"/api/guide-editor.min.js?a="+e):g.isEngagementEditorV2()&&s.AjaxUtil.loadFile("js",l.staticContentHost+"/api/engagement-editor.min.js?a="+e),!0},g.getAdditionalDetails=function(){return n},g.replaceCall=function(e){g=e},g.exit=function(){sessionStorage.removeItem("apt.token"),i.Cookie.deleteCookie("apt.token")},g.cleanEngagementData=function(){var e="queryParam"===f?c.location.search:c.location.hash,t=void 0;t=e.indexOf("aptToken");var n=t>-1?e.substring(0,t-1):e,r=c.location.protocol+"//"+c.location.host+c.location.pathname;return r+="queryParam"===f?n+c.location.hash:c.location.search+n},g.getProductKey=function(){return p},g.getQueryParams=function(){var o;return Object.assign((o={},r(o,"aptToken",e),r(o,"aptEditor",t),r(o,"aptProductKey",p),o),n)},g.saveConfig=function(){if(e&&t&&3!=t&&4!=t&&5!=t){var r=[e,t,1!=t?JSON.stringify(n):"{}"].join("&");(0,l.getConfig)("useSessionStorageEditorToken")?(sessionStorage.setItem("apt.token",r),i.Cookie.deleteCookie("apt.token")):(i.Cookie.setCookie("apt.token",r),sessionStorage.removeItem("apt.token"))}},function(){var r=c.location.search,s=c.location.hash;r=o(r);var l=(0,a.isBlank)(r)?-1:r.indexOf("aptToken"),d=(0,a.isBlank)(s)?-1:s.indexOf("aptToken"),u=-1,g=void 0;if(l>-1?(u=l,g="queryParam"):d>-1&&(u=d,g="hash"),u>-1){f=g;var h=void 0;h="queryParam"===f?r:s;for(var m=h.substring(u).split("&"),v=0;v<m.length;v++){var b=m[v].split("=");switch(b[0]){case"aptToken":e=b[1];break;case"aptEditor":t=b[1];break;case"aptProductKey":p=b[1];break;case"guideId":case"groupId":case"engagementId":case"contentId":case"aptPreview":case"kcId":case"aptLang":case"selectedFeature":case"isParentSubscription":case"isChildSubscription":n[b[0]]=b[1]}}h.includes("isEditorV2=true")&&h.includes("aptProductKey=AP-E9VUBBLZ6BIS-2")&&(t="7")}else{var y=sessionStorage.getItem("apt.token")||i.Cookie.getCookie("apt.token",!0),E=y&&y.split("&");(0,a.isNotEmptyArr)(E)&&E.length>1&&(e=E[0])&&(t=E[1])&&(n=JSON.parse(E[2]))}}(),g};t.default=u,t.previewEndpoint=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(96);t.UUIDGenerator=function(){function e(){r(this,e)}return o(e,null,[{key:"generateUuid",value:function(e){return e+"-"+(new Date).getTime()+"-"+this.generateRandom(8)}},{key:"getProductId",value:function(e){return e?e.split(".")[0].split("-").slice(0,-2).join("-"):null}},{key:"getRandomInt",value:function(e,t){var n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n))+n}},{key:"generateRandom",value:function(e){for(var t="",n=0;n<e;n++)t+=this.getRandomInt(1,10);return t}},{key:"generateV4Id",value:function(){return i()}}]),e}()},function(e,t,n){"use strict";function r(e,t,n){return e===U.ACTIVATION_TYPE_AUTOMATIC&&t&&t.enabled||n&&n.includes(U.EDITOR_ACTIVATION_TYPE_AUTOMATIC)}function o(e,t,n){var r=t.backgroundColor,o=t.backgroundFill,i=t.textColor,a=t.cornerRadius,s=t.hoverBackgroundColor,l=t.hoverBackgroundFill,c=t.hoverBorderColor,d=t.hoverTextColor,u=t.borderColor,p=t.borderWidth,f=".px-step-navigation-"+n+" {",g=".px-step-navigation-"+n+":hover {";f+="background-color: "+(o>-1?(0,_.hexToRgba)(r,o/100):r)+";",g+="background-color: "+(l>-1?(0,_.hexToRgba)(s,l/100):s)+";",f+="color: "+i+";",g+="color: "+d+";",f+="border-radius: "+a+"px;",f+="border-width: "+p+"px;",f+="border-color: "+u+";",g+="border-color: "+c+";",f+="}",g+="}",(0,_.addStyle)(f+g,"px-step-navigation-"+n,e)}function i(e,t,n){if(!z.default.isEditorMode()){var r=[];r=(0,_.addParameters)(R.eventTrackData[B.cacheGetAll](),r),(0,_.addParameters)({ei:e.engagementId,ecoi:e.contentId||e.content.id,evi:e.matchEventId||null,ent:e.contentTypeId||e.content.contentTypeId,acci:e.accountId,exi:e.executionId,ext:e.executionTimestamp,cl:e.contentLocale,at:e.activationType||"a",cosi:t,cossn:n},r);var o=(0,K.getGlobalContext)();o&&(0,_.addParameters)({gcx:JSON.stringify(o)},r),r=(0,_.addParameters)((0,q.getWebContext)(),r),H.AjaxUtil.getData($.snoozeUrl+"?"+(0,_.convert2Parameters)(r))}}function a(e,t,n,r,a,s){var l=(0,_.createElement)("button",["px-step-navigation-snooze"],{text:e.text||"Show me later"});t.appendChild(l),o(l,e,"snooze"),(0,_.addEventListener)(l,"click",function(){i(n,r,a),s()}),(0,F.disableFocusOnClick)(l)}function s(e,t,n,r){var o={ei:e.engagementId,ecoi:e.content.id,evi:e.matchEventId,ett:t,exi:e.executionId,ext:e.executionTimestamp,ent:e.content.contentTypeId};n&&(o.cosi=n,(r||0===r)&&(o.cossn=r));var i=(0,_.addParameters)(o,[]),a=(0,K.getGlobalContext)();return a&&(0,_.addParameters)({gcx:JSON.stringify(a)},i),i=(0,_.addParameters)(R.eventTrackData[B.cacheGetAll](),i)}function l(e){var t=void 0;switch(e){case"IN_APP_DIALOG":t="Dialog";break;case"IN_APP_CAROUSEL":t="Slider";break;case"IN_APP_GUIDE":t="Guide";break;case"IN_APP_SURVEY_NPS":t="NPS";break;case"IN_APP_CES_SURVEY":t="CES";break;case"IN_APP_RATING_SURVEY":t="Rating";break;case"IN_APP_BOOLEAN_SURVEY":t="Boolean";break;case"IN_APP_MULTIPLE_QUESTION_SURVEY":t="Multi Question";break;default:return}return t}function c(e){switch(e){case"a":return"Auto";case"kc":return"Bot";case"b":return"Badge";case"jo":return"Journey Orchestrator";default:throw"unknown activation type "+e}}function d(e,t){return{engagementId:e.engagementId,executionId:e.executionId,executionTimestamp:e.executionTimestamp,engagementType:l(e.contentType||e.content.contentType),activation:c(e.activationType),engagementName:e.engagementName,interaction:t,identifyId:e.ideId}}function u(e,t){return{engagementId:e.engagementId,executionId:e.executionId,executionTimestamp:e.executionTimestamp,engagementType:l(e.contentType),activation:c(e.activationType),engagementName:e.engagementName,interaction:t,identifyId:e.ideId}}function p(e,t,n,r){var o={engagementId:e.engagementId,executionId:e.executionId,executionTimestamp:e.executionTimestamp,engagementType:l(e.content.contentType),activation:c(e.activationType),engagementName:e.engagementName,interaction:t,identifyId:e.ideId};if(r)if("SCORE"===r.questionType){if(o.score=r.score,"IN_APP_SURVEY_NPS"===n)for(var i=0;i<Y.length;i++)if(Y[i].lowScore<=o.score&&Y[i].maxScore>=o.score){o.scoreType=Y[i].type;break}(0,_.isBlank)(r.comment)||(o.comment=r.comment)}else"OPEN_TEXT"!==r.questionType||(0,_.isBlank)(r.comment)||(o.comment=r.comment);return o}function f(e){var t=void 0,n=void 0;if(e){document.querySelectorAll(".px-engagement-wrapper").forEach(function(r){n||(n=r.querySelector("#step-"+e),t=r)})}else t=document.querySelector(".px-engagement-wrapper");return t}function g(e,t,n){function r(e){var r=f(n),i=r&&(r.contains(e.target)||r===e.target);t?t(e.target)?(G+=1,o(e)):G=0:i?G=0:(G+=1,o(e)),5===G&&D.logger.logInternalError(new Error("Accessibility - circular tabs - 5 invalid elements in a row with tabindex "+e.target.tabIndex))}var o=(0,_.debounce)(e);return(0,_.addEventListener)(document,"focusin",r),r}function h(e,t,n){function r(e){var r=f(n),s=(0,V.getEventTarget)(e),l=r&&(r.contains(s)||r===s);if(l)G=0;else{var c=s===t||t.contains(s);c?G=0:(G+=1,i?((0,F.focusElement)(t),R.documentRef.activeElement!==t&&o(e)):o(a?e:e)),a=c}i=l,5===G&&D.logger.logInternalError(new Error("Accessibility - circular tabs - 5 invalid elements in a row with tabindex "+e.target.tabIndex))}var o=(0,_.debounce)(e),i=!1,a=!1;return(0,_.addEventListener)(document,"focusin",r),r}function m(e){e&&(0,_.removeEventListener)(document,"focusin",e)}function v(e,t){var n=t,r=e.querySelectorAll("a[href], button[onclick]");return r.length>0&&r.forEach(function(e){e.setAttribute("tabindex",n),e.setAttribute("role","button"),e.setAttribute(X,"true"),n+=1}),n}function b(){J||(J=(0,_.addEnterKeyDownListener)(document,function(e){var t=document.activeElement;t.getAttribute(X)&&(t.click(),e.preventDefault())}))}function y(){J&&((0,_.removeEventListener)(document,"keydown",J),J=null)}function E(e,t){return e&&t>0}function S(e,t,n){return function(r){try{var o=r.target;if(e===o||e.contains(o)){var i="LINK_CLICK",a="linkClick",s="Link Clicked";if(e.parentNode.classList.contains("apt-custom-button")&&(i="CUSTOM_BUTTON_CLICK",a="customButtonClick",s="Custom Button clicked"),e.href){var l=e.href.split("ru=");if(2===l.length){var c=decodeURIComponent(l[1]);P.internalEventListener.dispatchEvent(a,c,d(t,s),n),P.internalEventListener.dispatchEvent(i,c,d(t,s),n)}}}}catch(r){D.logger.log("listenToLinksClicks "+r)}}}function C(e,t,n){e.querySelectorAll("a[href]").forEach(function(e){(0,_.addEventListener)(e,"click",S(e,t,n),!1)})}function w(e,t){if((0,M.getChannel)(R.eventTrackData[B.cacheGet](R.productIdParameter))==U.DESKTOP_CHANNEL){var n=e.getBoundingClientRect();P.internalEventListener.dispatchEvent("engagementResize",{engagementType:t.content.contentType,engagementId:t.engagementId,width:n.width,height:n.height})}}function T(e,t,n){var r=(0,_.paramToObject)(t,{}),o=j.eventCache.getKey("trackingPayload"),i=r.gcx,a=r.ru;Object.assign(r,o||{},n||{},i?{gcx:decodeURIComponent(i)}:{},a?{ru:decodeURIComponent(a)}:{}),H.AjaxUtil.postData(e,r,null,null,null,!0)}function x(e,t){T($.desktopEngagementTrackEndpoint+"/multistep/track",e,t)}function k(e,t){T($.desktopEngagementTrackEndpoint+"/multistep/step/track",e,t)}function I(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return function(i){i.preventDefault();var a=s(e,"ENGAGEMENT_CLICK",t,n);return a=(0,_.addParameters)({ru:r},a),T($.desktopEngagementTrackEndpoint+"/track/link/click",a),P.internalEventListener.dispatchEvent("engagementLinkClick",{engagementType:e.content.contentType,engagementId:e.engagementId,link:r,close:o}),!1}}function A(e,t,n,r,o){try{e.querySelectorAll("a").forEach(function(e){(0,_.addEventListener)(e,"click",I(t,n,r,e.href,o))})}catch(e){D.logger.logInternalError(e,"failed to add lister ")}}function O(e,t,n){if(e){var r=e.querySelector(".apt-step-content");if(r&&t&&null!==t.right&&null!==t.top&&null!==t.bottom&&null!==t.left){r.style.paddingTop=(t.top||0)+"px",r.style.paddingBottom=(t.bottom||0)+"px";var o=n?"#step-"+n:"";(0,F.addStyleTag)(e,o+" .px-div-group { \n\t\t\t\t\tpadding-left: "+(t.left||0)+"px; \n\t\t\t\t\tpadding-right: "+(t.right||0)+"px; \n\t\t\t\t}","px-engagement-wrapper-guide",".apt-vex.vex.vex-theme-os")}}}function N(e,t){if(["padding","padding-top","padding-bottom","padding-left","padding-right"].includes(t.inlineProperty)){var n=e.querySelector(".apt-step-content");n&&(n.style[t.inlineProperty]=t.value)}else e.style[t.inlineProperty]=t.value}function L(e,t,n,r){if(t.indexOf(".px-engagement-global-settings")>=0){var o=(0,_.extractStyleString)(t,".px-engagement-global-settings"),i=(0,_.extractStyleProperties)(o);i&&i.length>0&&i.forEach(function(t){N(e,t)})}if(n){var a=".px-step-settings-"+n,s=".px-step-navigation-settings-"+n;if(t.indexOf(a)>=0){var l=(0,_.extractStyleString)(t,a),c=(0,_.extractStyleProperties)(l);c&&c.length>0&&c.forEach(function(t){e.style[t.inlineProperty]=t.value})}if(t.indexOf(s)>=0){var d=(0,_.extractStyleString)(t,s),u=(0,_.extractStyleProperties)(d);u&&u.length>0&&u.forEach(function(t){var n=e.querySelector(".px-step-navigation");n&&(n.style[t.inlineProperty]=t.value)})}}O(e,r,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.addGlobalSettings=t.addLinkListener=t.desktopTrackStep=t.desktopTrackEngagementState=t.sendDesktopResize=t.toExternalEventSurvey=t.toExternalEventGuide=t.getExternalEvent=t.getEngagementTrackPayload=t.PX_TABBABLE_ATTR=void 0,t.isSnoozeButtonEnabled=r,t.addHoverState=o,t.trackSnooze=i,t.createSnoozeButton=a,t.getRelevantDialog=f,t.addCircularTabListener=g,t.addCircularTabListenerForTooltips=h,t.removeCicularTabsWrapperListener=m,t.setTabIndexes=v,t.addTabbableEnterListener=b,t.removeTabbableEnterListener=y,t.checkHasOverlay=E,t.listenToLinksClicks=C;var _=n(0),F=n(7),D=n(3),B=n(5),R=n(4),P=n(9),M=n(20),U=n(8),j=n(55),H=n(11),$=n(2),V=n(18),K=n(19),q=n(21),W=n(14),z=function(e){return e&&e.__esModule?e:{default:e}}(W),G=0,Y=[{type:"Promoter",lowScore:9,maxScore:10},{type:"Passive",lowScore:7,maxScore:8},{type:"Detractor",lowScore:0,maxScore:6}],X=t.PX_TABBABLE_ATTR="data-apt-tabbable-element",J=null;t.getEngagementTrackPayload=s,t.getExternalEvent=d,t.toExternalEventGuide=u,t.toExternalEventSurvey=p,t.sendDesktopResize=w,t.desktopTrackEngagementState=x,t.desktopTrackStep=k,t.addLinkListener=A,t.addGlobalSettings=L},function(e,t,n){"use strict";function r(e,t,n,r,a,u){if(!e)return void n(void 0);var p=[],f=(0,o.getConfig)("sfdcTemplate")||document,g=(0,c.findElementInWindow)(e,f,!0),h=void 0,m=((0,s.isNodeList)(g)||Array.isArray(g))&&g.length>0,v=Node.prototype.isPrototypeOf(g);if(m||v){var b=v?g:g[0],y=v?1:g.length;u&&(0,s.scrollElementToCenter)(b);var E={element:b,isVisible:(0,s.isElementVisible)(b),count:y};if(!a)return void n(E);p.push(E)}var S=l.UUIDGenerator.generateV4Id();(0,i.subscribe)(S,function(e){for(var t=0;t<e.length;t++)!function(t){e[t].exist&&!p.some(function(n){return n.iframeData&&n.iframeData.iframeId===e[t].iframeData.iframeId})&&p.push({iframeData:e[t].iframeData,count:e[t].count})}(t);n(r?p:p.length>0?p[0]:void 0)});try{if((0,s.isNotEmptyArr)(t)){for(var C=0;C<t.length;C++)h=t[C],d.elementExist(h,e,S,u),(0,i.incrementState)(S);(0,i.execute)(S,200)}else n(p.length>0?p:void 0)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.findInAll=void 0;var o=n(2),i=n(6),a=n(13),s=n(0),l=n(15),c=n(7),d=new function(){this.guideHideSteps=function(){if(!(0,o.isIframe)()){var e=i.IframeRequest.getMasterRequst("guide",{type:"hideAll"});(0,a.propagateDown)(e,(0,i.getRegisteredIframes)())}},this.updateState=function(e,t){if(!(0,o.isIframe)()){var n=i.IframeRequest.getMasterRequst("guide",{type:"updateState",state:e,enableSelector:t});(0,a.propagateDown)(n,(0,i.getRegisteredIframes)())}},this.setSelectorStateForEditorV2=function(e){if(!(0,o.isIframe)()){var t=i.IframeRequest.getMasterRequst("guide",{type:"setSelectorStateForEditorV2",isMapperEnabled:e});(0,a.propagateDown)(t,(0,i.getRegisteredIframes)())}},this.setSelectorState=function(e){if(!(0,o.isIframe)()){var t=i.IframeRequest.getMasterRequst("guide",{type:"updateSelectorState",state:e});(0,a.propagateDown)(t,(0,i.getRegisteredIframes)())}},this.guideRemoveHighlighted=function(e,t){if(!(0,o.isIframe)()){var n=i.IframeRequest.getMasterRequst("guide",{type:"removeHighlighted",tag:e,removeAll:t});(0,a.propagateDown)(n,(0,i.getRegisteredIframes)())}},this.selectorHighlightElement=function(e,t,n){if(!(0,o.isIframe)()){var r=i.IframeRequest.getMasterRequst("guide",{type:"highlightElement",tag:t,cssSelector:e});(0,a.postRequest)(r,n)}},this.selectorHighlightAll=function(e,t,n){if(!(0,o.isIframe)()){var r=i.IframeRequest.getMasterRequst("guide",{type:"highlightAll",stepId:t,cssSelector:e});(0,a.postRequestDown)(r,n)}},this.selectorRemoveAllHighlighted=function(){if(!(0,o.isIframe)()){var e=i.IframeRequest.getMasterRequst("guide",{type:"removeAllHighlighted"});(0,a.propagateDown)(e,(0,i.getRegisteredIframes)())}},this.getBadgesLocations=function(e,t){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("apt_msg_get_badges_locations",{},e,t)},this.removeBadgeFromIframe=function(e,t,n){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("apt_msg_remove_badge",{badgeId:t},e,n)},this.setBadgeObserver=function(e,t){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("apt_msg_badge_set_observer",{},e,t)},this.unsetBadgeObserver=function(e,t){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("apt_msg_badge_unset_observer",{},e,t)},this.sendBadgeToIframe=function(e,t){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("apt_msg_send_badge",{badge:t},e)},this.getElementLocation=function(e,t,n){if(!(0,o.isIframe)()){var r={elementSelector:t};(0,a.createSubscribeCallbackRequest)("apt-msg-get-element-location",r,e,n)}},this.elementExist=function(e,t,n,r){if(!(0,o.isIframe)()){var s=i.IframeRequest.getMasterRequst("elementExist",{elementSelector:t,scrollToElement:r},n,e.iframeId);(0,a.postRequestDown)(s,e)}},this.addElementHandler=function(e,t,n,r){if(!(0,o.isIframe)()){var i={nextStepTrigger:n,elementSelector:t};(0,a.createSubscribeCallbackRequest)("apt-msg-add-handler-show-next-step",i,e,r)}},this.isElementVisible=function(e,t,n){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("guide",{type:"isElementVisible",cssSelector:t},e,n)},this.sendEditorV2StateResponse=function(e,t,n,r){if(!(0,o.isIframe)()){var s=i.IframeRequest.getMasterRequst("guide",{type:"editorV2StateResponse",isMapperEnabled:n,isPreview:r},t);(0,a.postRequestDown)(s,e)}},this.sendStateResponse=function(e,t,n,r){if(!(0,o.isIframe)()){var s=i.IframeRequest.getMasterRequst("guide",{type:"stateResponse",state:n,isStepSelected:r},t);(0,a.postRequestDown)(s,e)}},this.getAlternateSelector=function(e,t,n){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("guide",{type:"getAlternateSelector",cssSelector:t},e,n)},this.addOutsideEventHandler=function(e,t,n,r){if(!(0,o.isIframe)()){var i={nextStepTrigger:n,elementSelector:t};(0,a.createSubscribeCallbackRequest)("aptGuideExternalClick",i,e,r)}},this.removeElementHandlers=function(e){(0,o.isIframe)()||(0,a.createSubscribeCallbackRequest)("apt-msg-remove-element-handlers",{},e)}};t.default=d,t.findInAll=r},function(e,t,n){"use strict";function r(e,t){var n=t||v.documentRef;return(0,m.getConfig)("usesShadowDom")?(0,h.querySelectorAllDeep)(e,n):n.querySelectorAll(e)}function o(e,t){var n=t||v.documentRef;return(0,m.getConfig)("usesShadowDom")?(0,h.querySelectorDeep)(e,n):n.querySelector(e)}function i(e){var t=(0,m.getConfig)("usesShadowDom");return e?t&&e.composedPath&&e.composedPath()[0]||e.target:void 0}function a(e){return(0,m.getConfig)("usesShadowDom")&&e.parentNode instanceof DocumentFragment?e.parentNode.host:e.parentNode}function s(e){return(0,m.getConfig)("usesShadowDom")&&e.parentNode instanceof DocumentFragment?e.parentNode.host:e.parentElement}function l(e,t){return e.nodeType===Node.ELEMENT_NODE&&t.some(function(t){return null!==e.getAttribute(t)&&""!==e.getAttribute(t)})}function c(e,t,n){if(l(e,t))return e;if(n>=y)return null;var r=e.childNodes;if(r.length>0)for(var o=0;o<r.length;o++){var i=c(r[o],t,n+1);if(null!==i)return i}return null}function d(e){return e&&e.nodeName&&-1===["body","html","#document"].indexOf(e.nodeName)}function u(e){if(!e||!e.nodeName||E.indexOf(e.nodeName.toLowerCase())>-1)return e;var t=(0,m.getConfig)("elementAttributeWhitelist");if((0,b.isNotEmptyArr)(t)){if(t=t.filter(function(e){return-1===e.indexOf("*")}),l(e,t))return e;for(var n=0,r=e.parentNode;n<=y&&d(r);n++,r=r.parentNode)if(l(r,t))return r;var o=c(e,t,0);if(o)return o}return e}function p(e,t){var n=(0,m.getConfig)("usesShadowDom"),r=void 0;if(n){for(var o=t;o&&o!==e&&"BODY"!==o.tagNameProp;)o=a(o);r=o===e}else r=e.contains(t);return r}function f(e,t,n,r){var o=e.elementFromPoint(t,n);if(o.shadowRoot&&o.shadowRoot!==e){if(!(r<S))return o;o=f(o.shadowRoot,t,n,r+1)}return o}function g(e,t,n){var r=(0,m.getConfig)("usesShadowDom");return r?f(e,t,n,0):e.elementFromPoint(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.documentElementFromPoint=t.findOptimizedTarget=t.elementContainsChild=t.getParentElement=t.getParentNode=t.getEventTarget=t.findSingleElementInShadowDom=t.findElementsInShadowDom=void 0;var h=n(123),m=n(2),v=n(4),b=n(0),y=2,E=["#document","html","body"],S=5e3;t.findElementsInShadowDom=r,t.findSingleElementInShadowDom=o,t.getEventTarget=i,t.getParentNode=a,t.getParentElement=s,t.elementContainsChild=p,t.findOptimizedTarget=u,t.documentElementFromPoint=g},function(e,t,n){"use strict";function r(){var e=o.globalContextCache[i.cacheGet]("apt.gcx");return(0,a.limitJsonKeys)(e,100)}Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalContext=r;var o=n(4),i=n(5),a=n(0)},function(e,t,n){"use strict";function r(e){if(e){var t=e.split("-"),n=t.length;return t.length>2&&t.splice(2,1),n<4&&t.push("1"),t.join("-")}return e}function o(e){return e?e.split("-").slice(1,2).join():e}function i(e,t){return r(e)===r(t)}function a(e){if(!e)throw new Error("invalid API key, the value must be set to be parsed");return e.split("-")}function s(e){var t=a(e);if(t.length<3)throw new Error("invalid API key structure "+e);return parseInt(t[2],10)}function l(e){var t=a(e);return t.length<4?d.PROD_ENVIRONMENT:parseInt(t[3],10)}function c(){return s(u.eventTrackData[p.cacheGet](u.productIdParameter))===d.DESKTOP_CHANNEL}Object.defineProperty(t,"__esModule",{value:!0}),t.isDesktop=t.getEnvironment=t.getChannel=t.isApiKeyMatch=t.getProduct=t.getProductKeyFromApiKey=void 0;var d=n(8),u=n(4),p=n(5);t.getProductKeyFromApiKey=r,t.getProduct=o,t.isApiKeyMatch=i,t.getChannel=s,t.getEnvironment=l,t.isDesktop=c},function(e,t,n){"use strict";function r(e){var t=(0,v.getConfig)("filterUrls"),n=(0,v.getConfig)("filterType");if((0,b.isNotEmptyArr)(t)){var r=e||location.hostname+location.pathname+location.search+location.hash;if((0,b.matchUrl)(t,r))return n}return null}function o(e,t){if((0,b.isNotEmptyArr)(t)){var n=e||location.hostname+location.pathname+location.search+location.hash;if((0,b.matchUrl)(t,n))return!0}return!1}function i(e){return o(e,(0,v.getConfig)("excludeUrls"))}function a(e){return"exclude"===r(e)||i(e)}function s(e){return"mask"===r(e)}function l(e){var t=(0,v.getConfig)("namedParamFilter"),n=(0,v.getConfig)("nameParamFilterType");if((0,b.isNotEmptyArr)(t)&&!(0,b.isBlank)(e)){var r=e.startsWith("?")?e.substring(1).split("&"):e.split("&"),o={},i=void 0,a=!0,s=!1,l=void 0;try{for(var c,d=r[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){i=c.value.split("="),i.length>0&&i.length<2?o[i[0]]="":i.length>0&&i.length<3&&(o[i[0]]=i[1])}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}var u=!0,p=!1,f=void 0;try{for(var g,h=t[Symbol.iterator]();!(u=(g=h.next()).done);u=!0){var m=g.value;o.hasOwnProperty(m)&&("mask"===n?o[m]="apt-masked":"exclude"==n&&delete o[m])}}catch(e){p=!0,f=e}finally{try{!u&&h.return&&h.return()}finally{if(p)throw f}}return"?"+(0,b.convert2Parameters)((0,b.addParameters)(o,[]))}return e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];try{return e({url:t,title:n,path:o,referrer:r},i?"rule":"track")}catch(e){throw S.logger.logInternalError(e,"failed to execute masking function, going to fail the tracking"),e}}function d(e){var t=y.documentRef.createElement("a");return t.href=e,[t.protocol+"//",t.host,t.pathname,t.search,t.hash]}function u(e,t,n,r,o,i,u){var p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,f=arguments[8],g=s(p),h=void 0,E=(0,v.getConfig)("maskUrlFunction"),S=(0,b.isFunction)(E);if(S){var C=void 0;f?C=""+e+t+n:t&&(C=""+e+t+n+r+o),h=c(E,C,u,i,C?void 0:n,f)}else if(f)return[e,t,n,r,o,i,u];if(S){if(h.url){var w=d(h.url),T=m(w,5);e=T[0],t=T[1],n=T[2],r=T[3],o=T[4]}else h.path&&(n=h.path);u=h.title}else r=l(r),g&&(n="/apt-masked-url",r="",o="",u="");var x="";if(i&&!a(i)){var k=y.documentRef.createElement("a");k.href=i;var I=s(i);x=k.host!==location.host?k.protocol+"//"+k.host+(I?"/apt-masked-url":k.pathname+l(k.search)+k.hash):"",I&&!(0,b.isBlank)(x)&&S&&(x=h.referrer)}return(0,v.getConfig)("trackPageTitles")||(u=""),[e,t,n,r,o,x,u]}function p(e,t,n){return u(e,t,n,void 0,void 0,void 0,void 0,void 0,!0)}function f(){var e=location.protocol+"//",t=location,n=t.host,r=location.pathname,o=location.search,i=location.hash,a=u(e,n,r,o,i,null,null),s=m(a,5);return e=s[0],n=s[1],r=s[2],o=s[3],i=s[4],""+e+n+r+o+i}function g(){var e=location.protocol+"//",t=location,n=t.host,r=location.pathname,o=location.search,i=y.documentRef.title,a=location.hash,s=u(e,n,r,o,a,null,i),l=m(s,6);return e=l[0],n=l[1],r=l[2],o=l[3],a=l[4],i=l[5],{sc:e,ho:n,pa:decodeURIComponent(r),q:decodeURIComponent(o),ha:decodeURIComponent(a),sch:(0,E.getPageHeight)(),scw:(0,E.getPageWidth)(),pt:i}}function h(e){var t=y.documentRef.createElement("a");t.href=e;var n=t.protocol+"//",r=t.host,o=t.pathname,i=t.search,a=t.hash,s=u(n,r,o,i,a,null,null,e),l=m(s,5);return n=l[0],r=l[1],o=l[2],i=l[3],a=l[4],(0,b.isEmail)(o)&&(o=""),e.startsWith("http")?""+n+r+o+i+a:e.startsWith("mailto:")?""+t.protocol+o:""+o+i+a}Object.defineProperty(t,"__esModule",{value:!0}),t.maskUrlEditor=t.maskFullUrl=t.getFullUrlMasked=t.maskParameters=t.shouldBeMasked=t.isUrlFiltered=t.isExcluded=t.maskUrl=t.getWebContext=void 0;var m=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=n(2),b=n(0),y=n(4),E=n(10),S=n(3);t.getWebContext=g,t.maskUrl=u,t.isExcluded=a,t.isUrlFiltered=r,t.shouldBeMasked=s,t.maskParameters=l,t.getFullUrlMasked=f,t.maskFullUrl=h,t.maskUrlEditor=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EVENTS={BOT:"bot"},t.TOP_TO_IFRAME_EVENTS={BOT_RESPONSE:"botResponse",BOT_FOUND:"botFound",GET_BOT_CONTENT_RESPONSE:"getBotContentResponse",POST_BOT_EVENT:"postBotEvent",SET_BOT_IS_OPEN:"setBotIsOpen",REMOVE_BOT:"removeBot",IS_ELEMENT_VISIBLE:"isElementVisible",GET_APTRINSIC_ID_RESPONSE:"getAptrinsicIdResponse",ADD_ELEMENT_CLICK_LISTENER:"ADD_ELEMENT_CLICK_LISTENER"},t.IFRAME_TO_TOP_EVENTS={IFRAME_CLOSED:"iframeClosed",BOT_FOUND:"botFound",GET_BOT_CONTENT:"getBotContent",TRACK_BOT_TOGGLE:"trackBotToggle",IS_ELEMENT_VISIBLE_RESPONSE:"isElementVisibleResponse",GET_APTRINSIC_ID:"getAptrinsicId",BOT_ELEMENT_CLICK:"botElementClick"},t.BOT_IFRAME_INTERNAL_EVENTS={INIT_WIDGET_IN_IFRAME:"INIT_WIDGET_IN_IFRAME",BOT_EMPTY_CONFIG:"BOT_EMPTY_CONFIG"},t.BOT_INTERNAL_EVENTS={BOT_CLICK_OUTSIDE:"BOT_CLICK_OUTSIDE"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserData=void 0;var r=n(15),o=n(45),i=n(4),a=n(5),s=n(3),l=n(24),c=n(0),d=n(2),u=n(10),p=n(9),f=n(20),g="apt.uid",h="apt.sid",m=31536e6,v=18e5,b=20,y=null,E=t.UserData=new function(){function e(){return(0,d.getConfig)("sessionCookieTTL")||v}function t(e){return e.split(".")}function n(e){return e.join(".")}function S(){try{var e=o.Cookie.getAllCookieVal(g);null!=e&&e.length>1&&(o.Cookie.setCookie(g,null,-1,(0,d.getConfig)("fullDomainCookie")?(0,u.getDomain)():document.location.hostname),e=o.Cookie.getAllCookieVal(g),null!=e&&e.length>1&&o.Cookie.setCookie(g,null,-1,(0,d.getConfig)("fullDomainCookie")?(0,u.getDomain)():" "),s.logger.logInternalError(new Error("deleting "+g+" for domain, current cookies: "+document.cookie)))}catch(e){s.logger.logInternalError(e)}}function C(){try{var e=o.Cookie.getAllCookieVal(h);null!=e&&e.length>1&&(o.Cookie.setCookie(h,null,-1,(0,d.getConfig)("fullDomainCookie")?(0,u.getDomain)():" "),s.logger.logInternalError(new Error("deleting "+h+" for domain, current cookies: "+document.cookie)))}catch(e){s.logger.logInternalError(e)}}function w(e,l,c){if((0,d.getConfig)("enableTag")){S();var u=o.Cookie.getCookie(g),p=[],h=e||A;if(u&&(0,d.getConfig)("multipleProductsPerDomain")){var v=r.UUIDGenerator.getProductId(u);v&&!(0,f.isApiKeyMatch)(v,O)&&(u=null)}if(!u||l||u&&u.startsWith("undefined-")?(l&&!c&&s.logger.logInternalError(new Error("force new is "+l+", and did not have aptrinsic id so generating a new one")),u=r.UUIDGenerator.generateUuid(O),p.push(u),p.push(0),p.push(h),l&&c&&p.push(c)):(p=t(u),e&&e>p[2]&&(p[2]=e)),i.eventTrackData[a.cacheSet](i.userIdParameter,p[0]),o.Cookie.setCookie(g,n(p),m),!(u=o.Cookie.getCookie(g)))throw new Error("wasn't able to save user cookie for type: "+e+", force new:"+l+", aptrinsic id: "+c);L=!0}}function T(){if((0,d.getConfig)("enableTag")){var e=r.UUIDGenerator.generateUuid(O);return x(e),i.eventTrackData[a.cacheSet](i.sessionIdParam,e),e}}function x(t){if(o.Cookie.setCookie(h,t,e()),k(),!(t=o.Cookie.getCookie(h)))throw new Error("wan't able to create session cookie, not going to track this user")}function k(){y&&clearTimeout(y),y=setTimeout(function(){o.Cookie.getCookie(h)||p.internalEventListener.dispatchEvent("sessionExpired")},e()+b)}var I=this,A=0,O=void 0,N=!1,L=!1;this.initializeUser=function(e){(0,d.getConfig)("enableTag")&&(e&&(O=e),w(),I.getSessionId())},this.clearUserData=function(){o.Cookie.deleteCookie(g),o.Cookie.deleteCookie(h)},this.ensureUserData=function(){if((0,d.getConfig)("enableTag")){S();var e=o.Cookie.getCookie(g),t=o.Cookie.getCookie(h);e&&t||I.initializeUser()}},this.getUserId=function(){if((0,d.getConfig)("enableTag")){var e=o.Cookie.getCookie(g);if(!e)throw new Error("user cookie is not initialized, is init called before: "+L+", current cookies in doc: "+document.cookie);return t(e)[0]}},this.getAptrinisId=function(e){if((0,d.getConfig)("enableTag")){var n=o.Cookie.getCookie(g),r=[];if(e&&!n)return null;if(!n)throw new Error("user cookie is not initialized, is init called before: "+L+", current cookies in doc: "+document.cookie);return r=t(n),r.length>3?r[3]:r[0]}},this.setAptrinsicId=function(e,n){if((0,d.getConfig)("enableTag")){var r=o.Cookie.getCookie(g),s=[];if(!r)throw new Error("user cookie is not initialized, is init called before: "+L+", current cookies in doc: "+document.cookie);s=t(r);var l=s.length<4||s.length>3&&s[3]!==e;return l&&(T(),w(n?1:2,!0,e)),s[3]=e,i.eventTrackData[a.cacheSet](i.aptrinsicIdParam,s[3]),l}},this.changeUserType=function(e){(0,d.getConfig)("enableTag")&&(w(e),i.eventTrackData[a.cacheSet]("vt",E.getUserType()))},this.getUserType=function(e){if((0,d.getConfig)("enableTag")){var n=o.Cookie.getCookie(g),r=[];if(e&&!n)return A;if(!n)throw new Error("user cookie is not initialize");r=t(n);return r[2]||0}},this.getSessionId=function(){if((0,d.getConfig)("enableTag")){C();var e=o.Cookie.getCookie(h),t=!1;return!e||(0,d.getConfig)("multipleProductsPerDomain")&&(0,f.getProductKeyFromApiKey)(r.UUIDGenerator.getProductId(e))!==(0,f.getProductKeyFromApiKey)(O)?(t=N=!0,e=r.UUIDGenerator.generateUuid(O)):N=!1,x(e),t&&!(0,d.getConfig)("setSessionExternally")&&(i.eventTrackData[a.cacheSet]("ai",E.getAptrinisId()),i.eventTrackData[a.cacheSet]("vt",E.getUserType()),i.eventTrackData[a.cacheSet](i.sessionIdParam,e),(0,l.internalApt)("sessionInitialized",null,null,null,!1),(0,c.clearAptrinsicSessionStorage)()),e}},this.setSessionId=function(t){if((0,d.getConfig)("enableTag")){if(C(),o.Cookie.setCookie(h,t,e()),k(),!(t=o.Cookie.getCookie(h)))throw new Error("wan't able to create session cookie, not going to track this user");i.eventTrackData[a.cacheSet]("ai",E.getAptrinisId()),i.eventTrackData[a.cacheSet](i.sessionIdParam,t),i.eventTrackData[a.cacheSet]("vt",E.getUserType()),(0,c.clearAptrinsicSessionStorage)()}},this.getLeadType=function(){return 1},this.userType=function(){return 2},this.visitorType=function(){return A},this.isNewSession=function(){var e=N;return N=!1,e},this.isUser=function(){return 2==I.getUserType()}}},function(e,t,n){"use strict";function r(){(0,p.getConfig)("enableTag")&&f.push(arguments)}function o(){var e=Array.prototype.slice.call(arguments);u.api.trackEvent.apply(u.api,e)}function i(){if((0,p.getConfig)("enableTag")){for(var e=f,n=void 0,r=e.length,i=0;i<r;i++)n=e.shift(),o.apply(null,n);t.internalApt=v=function(){o.apply(null,arguments)}}}function a(){t.internalApt=v=r}function s(){h=!1,g&&clearTimeout(g)&&(g=null),i();for(var e=0;e<m.length;e++){var t=m[e],n=t[0],r=t.slice(1);n.apply(null,r)}}function l(){h=!0,g=setTimeout(s,1e3),t.internalApt=v=r}function c(){return h}function d(){var e=[].slice.call(arguments),t=e[0];if(!t||"function"!=typeof t)return void logger.logInternalError(new Error("registerIdentifyCallback didnt receive function as first argument"));m.push(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.appNotReady=t.registerIdentifyCallback=t.isInIdentify=t.identifyFinished=t.identifyStart=t.internalApt=t.appReady=void 0;var u=n(42),p=n(2),f=[],g=null,h=!1,m=[],v=r;t.appReady=i,t.internalApt=v,t.identifyStart=l,t.identifyFinished=s,t.isInIdentify=c,t.registerIdentifyCallback=d,t.appNotReady=a},function(e,t,n){"use strict";function r(){if(K){var e=(0,C.removeFromQueryParam)(U);history.replaceState("",document.title,e)}if(z){var t=(0,C.removeFromQueryParam)(j);history.replaceState("",document.title,t)}}function o(){V=m(),K=(0,C.getQueryParam)(U),q=T.windowRef.sessionStorage.getItem("apt.guideId"),W=K||q,z=(0,C.getQueryParam)(j),r(),setTimeout(r,1500)}function i(e){var t=G[e];D.internalEventListener.removeListener("pageview",t)}function a(e,t){i(e),D.internalEventListener.addListener("pageview",t),G[e]=t}function s(){D.internalEventListener.dispatchEvent("engagementClosed");var e=T.eventTrackData[k.cacheGet](T.productIdParameter);!e||0!==e.indexOf("AP-BTJ9NZXEJFSP")&&0!==e.indexOf("AP-2POJKINZM5HL")||D.internalEventListener.dispatchEvent("surveyClosed")}function l(e){M[e]=!0}function c(e){d(e),setTimeout(function(){N.KnowledgeCenterManager.fetchEntriesAndSendToWidget(T.eventTrackData.data[T.productIdParameter],T.eventTrackData.data[T.aptrinsicIdParam])},200),i(e)}function d(e){u(e)&&(M[e]=!1)}function u(e){return{}.hasOwnProperty.call(M,e)&&!0===M[e]}function p(){return Object.values(M).some(function(e){return e})}function f(){return W}function g(){return V}function h(e){try{var t={guideId:e,timestamp:Date.now()};T.windowRef.sessionStorage.setItem(H,JSON.stringify(t))}catch(e){x.logger.logInternalError("Error setting onDemand guide id",e)}}function m(){var e=void 0;try{var t=T.windowRef.sessionStorage.getItem(H);if(t){var n=JSON.parse(t);n&&n.timestamp&&Date.now()<=n.timestamp+$&&(e=n.guideId),T.windowRef.sessionStorage.removeItem(H)}}catch(e){x.logger.logInternalError("Error reading onDemand guide id",e)}return e}function v(e){b(e)}function b(e){try{if(W&&!A.default.isEditorMode()){var t={};Object.assign(t,T.eventTrackData[k.cacheGetAll]()),(0,C.addCacheBuster)(t);var n=(0,B.getGlobalContext)();n&&Object.assign(t,{gcx:JSON.stringify(n)});var r=(0,_.getEngagementSessionId)();t.s=r,z&&(t.at=z);var o=T.eventTrackData.data[T.productIdParameter];if((0,O.getConfig)("crossProductEngagement")){var i=JSON.parse(T.windowRef.sessionStorage.getItem("apt.localCache"));t.ai=i.ai,t.v=r,t.p=R.UUIDGenerator.getProductId(r),o=t.p}var a=O.ongoingEngagementEndpoint+"/"+o+"/"+W+"?"+(0,C.convert2Parameters)((0,C.addParameters)(t,[]));w.AjaxUtil.getData(a,function(t){if(q){var n=JSON.parse(T.windowRef.sessionStorage.getItem("apt.prevStepMap")),r=T.windowRef.sessionStorage.getItem("apt.stepId");if(!n||!r)return void x.logger.logInternalError(new Error("guide ongoing cannot be processed due to missing parameters, prev step map: "+n+", current step: "+r));var o=t.content.steps,i=void 0;if(o.forEach(function(e){e.id===n[r].id&&(i=e)}),!i)return void x.logger.logInternalError(new Error("guide ongoing cannot be processed since previous step "+n[r].id+", does not exist in guide "+W));var a=(0,L.resolveUrlWithPlaceholders)(T.windowRef.location.href,i.navigation.nextStepUrl);if(!K&&q&&!(0,C.matchUrl)(a,(0,C.getPageUrl)()))return}e(t)})}}catch(e){x.logger.logInternalError("Error during getting on demand engagement id "+W)}}function y(){if(!(0,O.isIframe)()){var e=window.self!==window.top.parent?window.document:window.top.document;Object.values(P.getAll()).forEach(function(e){e.rootEl.classList.contains("apt-vex")&&e.close()});e.querySelectorAll(".apt-hotspot-element").forEach(function(t){t&&e.body.removeChild(t)})}}function E(e){var t={},n={},r=e.engagementChecksums;(0,C.isNotEmptyArr)(r)&&r.forEach(function(e){t[e.engagementId]=e.validChecksums}),(0,O.setCachedConfig)(F.ENGAGEMENT_CHECKSUM_KEY,t);var o=e.checksumVersion;(0,O.setCachedConfig)(F.CHECKSUM_VERSION,o);var i=e.botChecksums;(0,C.isNotEmptyArr)(i)&&i.forEach(function(e){n[e.botId]=e.validContentChecksums.concat(e.validConfigChecksums)}),(0,O.setCachedConfig)(F.BOT_CHECKSUM_KEY,n);var a=e.engFieldMappingEnabled;a?(0,O.setCachedConfig)(F.ENGAGEMENT_FIELD_MAPPING_ENABLED_KEY,a):(0,O.setCachedConfig)(F.ENGAGEMENT_FIELD_MAPPING_ENABLED_KEY,!1)}function S(){var e=(0,O.getConfig)(F.ENGAGEMENT_CHECKSUM_URL_CONFIG);e&&w.AjaxUtil.getData(e,E)}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanOndemandGuideDataFromURL=t.sendEngagementClosedEvent=t.registerEngagementPageChangedHandler=t.loadEngagementChecksum=t.hasLiveEngagement=t.getGuideRefreshData=t.hideAnyActiveEngagement=t.handleEngagementFinish=t.saveOnDemandGuideId=t.isOndemandState=t.startOverEngagement=t.isStartOverState=t.isLocked=t.unlockEngagementType=t.lockEngagementType=void 0,t.getOngoingEngagement=b;var C=n(0),w=n(11),T=n(4),x=n(3),k=n(5),I=n(14),A=function(e){return e&&e.__esModule?e:{default:e}}(I),O=n(2),N=n(29),L=n(32),_=n(38),F=n(36),D=n(9),B=n(19),R=n(15),P=n(31),M={},U="aptGuideId",j="aptActivationType",H="apt.aptOdGuideId",$=3e4,V=void 0,K=void 0,q=void 0,W=void 0,z=void 0,G={};o(),t.lockEngagementType=l,t.unlockEngagementType=d,t.isLocked=u,t.isStartOverState=f,t.startOverEngagement=v,t.isOndemandState=g,t.saveOnDemandGuideId=h,t.handleEngagementFinish=c,t.hideAnyActiveEngagement=y,t.getGuideRefreshData=o,t.hasLiveEngagement=p,t.loadEngagementChecksum=S,t.registerEngagementPageChangedHandler=a,t.sendEngagementClosedEvent=s,t.cleanOndemandGuideDataFromURL=r},function(e,t,n){"use strict";function r(e,t){if(e.showQuestionNumber){var n=(0,u.createElement)("div","apt-question-sequence",{text:t+"."});return n.style.fontFamily=e.numberFontFamily,n.style.fontSize=e.numberSize+"px",n.style.color=e.numberColor,n}return null}function o(e,t){var n="string"==typeof t?t+"Text":"text";return(0,u.isBlank)(e[n])?e.isLast?"Done":"Next":e[n]}function i(e,t,n,r){var i=(0,u.createElement)("div","apt-survey-submit",{text:o(e)});return i.style.color=e[r?"submitButtonTextColor":"textColor"],i.style.backgroundColor=e[r?"submitButtonBackgroundColor":"backgroundColor"],i.style.borderWidth=e[r?"submitButtonBorderWidth":"borderWidth"]+"px",i.style.borderRadius=e[r?"submitButtonBorderRadius":"borderRadius"]+"px",i.style.borderColor=e[r?"submitButtonBorderColor":"borderColor"],i.setAttribute("tabindex",n+t),i.setAttribute("role","button"),i}function a(e,t,n,o,i){var a=(0,p.toDom)(t,!1,["apt-survey-title"].concat(o));return n.push("apt-survey-title-wrapper"),(0,u.createElement)("div",n,null,[r(e,i),a])}function s(e,t){return(0,u.createInput)("checkbox",void 0,!1,void 0,void 0,!1,void 0,{"aria-label":e.contactMeMessage||f,tabindex:t})}function l(e,t){var n=(0,u.createElement)("div",["apt-contact-wrapper"],void 0,[t,(0,u.createElement)("div","apt-contact-me-text",{text:e.contactMeMessage||f,dataAtt:[{name:"aria-hidden",value:"true"}]})]);return e.showContactMeMessage||(n.style.display="none"),n}function c(){document.querySelector(".aptr-snooze-container").style.display="none"}function d(e,t){var n=e.querySelector(".apt-question-sequence");n&&(n.innerText=t+".")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONTACT_ME_MESSAGE=void 0,t.renderSubmitButton=i,t.renderSurveyTitle=a,t.renderContactMeCheckBox=s,t.renderContactMe=l,t.hideSnooze=c,t.updateStepNumber=d;var u=n(0),p=n(7),f=t.DEFAULT_CONTACT_ME_MESSAGE="It's okay to contact me about my feedback"},function(e,t,n){"use strict";function r(e){var t={};return Object.keys(e).sort().forEach(function(n){(0,s.isObject)(e[n])?t[n]=r(e[n]):Array.isArray(e[n])?t[n]=(0,l.arrayFrom)(e[n],function(e){return(0,s.isObject)(e)?r(e):e}):t[n]=e[n]}),t}function o(e,t){var n={};for(var r in e)t.indexOf(r)>-1&&e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function i(e){return Object.keys(e).filter(function(t){return null!=e[t]}).reduce(function(t,n){return t[n]="object"===a(e[n])?i(e[n]):e[n],t},Array.isArray(e)?[]:{})}Object.defineProperty(t,"__esModule",{value:!0}),t.removeNullFields=t.filterProperties=t.orderAlphabetically=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(0),l=n(12);t.orderAlphabetically=r,t.filterProperties=o,t.removeNullFields=i},function(e,t,n){"use strict";(function(e){var n,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
!function(t,n){"object"===o(e)&&"object"===o(e.exports)?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:void 0,function(i,a){function s(e,t,n){n=n||ke;var r,o,i=n.createElement("script");if(i.text=e,t)for(r in Ie)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,o);n.head.appendChild(i).parentNode.removeChild(i)}function l(e){return null==e?e+"":"object"===(void 0===e?"undefined":o(e))||"function"==typeof e?be[ye.call(e)]||"object":void 0===e?"undefined":o(e)}function c(e){var t=!!e&&"length"in e&&e.length,n=l(e);return!Te(e)&&!xe(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function d(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function u(e,t,n){return Te(t)?Ae.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Ae.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Ae.grep(e,function(e){return ve.call(t,e)>-1!==n}):Ae.filter(t,e,n)}function p(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function f(e){var t={};return Ae.each(e.match(Me)||[],function(e,n){t[n]=!0}),t}function g(e){return e}function h(e){throw e}function m(e,t,n,r){var o;try{e&&Te(o=e.promise)?o.call(e).done(t).fail(n):e&&Te(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function v(){ke.removeEventListener("DOMContentLoaded",v),i.removeEventListener("load",v),Ae.ready()}function b(e,t){return t.toUpperCase()}function y(e){return e.replace($e,"ms-").replace(Ve,b)}function E(){this.expando=Ae.expando+E.uid++}function S(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ze.test(e)?JSON.parse(e):e)}function C(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ge,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=S(n)}catch(e){}We.set(e,t,n)}else n=void 0;return n}function w(e,t,n,r){var o,i,a=20,s=r?function(){return r.cur()}:function(){return Ae.css(e,t,"")},l=s(),c=n&&n[3]||(Ae.cssNumber[t]?"":"px"),d=e.nodeType&&(Ae.cssNumber[t]||"px"!==c&&+l)&&Xe.exec(Ae.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;a--;)Ae.style(e,t,d+c),(1-i)*(1-(i=s()/l||.5))<=0&&(a=0),d/=i;d*=2,Ae.style(e,t,d+c),n=n||[]}return n&&(d=+d||+l||0,o=n[1]?d+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=d,r.end=o)),o}function T(e){var t,n=e.ownerDocument,r=e.nodeName,o=nt[r];return o||(t=n.body.appendChild(n.createElement(r)),o=Ae.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),nt[r]=o,o)}function x(e,t){for(var n,r,o=[],i=0,a=e.length;i<a;i++)r=e[i],r.style&&(n=r.style.display,t?("none"===n&&(o[i]=qe.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&tt(r)&&(o[i]=T(r))):"none"!==n&&(o[i]="none",qe.set(r,"display",n)));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}function k(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&d(e,t)?Ae.merge([e],n):n}function I(e,t){for(var n=0,r=e.length;n<r;n++)qe.set(e[n],"globalEval",!t||qe.get(t[n],"globalEval"))}function A(e,t,n,r,o){for(var i,a,s,c,d,u,p=t.createDocumentFragment(),f=[],g=0,h=e.length;g<h;g++)if((i=e[g])||0===i)if("object"===l(i))Ae.merge(f,i.nodeType?[i]:i);else if(st.test(i)){for(a=a||p.appendChild(t.createElement("div")),s=(ot.exec(i)||["",""])[1].toLowerCase(),c=at[s]||at._default,a.innerHTML=c[1]+Ae.htmlPrefilter(i)+c[2],u=c[0];u--;)a=a.lastChild;Ae.merge(f,a.childNodes),a=p.firstChild,a.textContent=""}else f.push(t.createTextNode(i));for(p.textContent="",g=0;i=f[g++];)if(r&&Ae.inArray(i,r)>-1)o&&o.push(i);else if(d=Ze(i),a=k(p.appendChild(i),"script"),d&&I(a),n)for(u=0;i=a[u++];)it.test(i.type||"")&&n.push(i);return p}function O(){return!0}function N(){return!1}function L(e,t){return e===_()==("focus"===t)}function _(){try{return ke.activeElement}catch(e){}}function F(e,t,n,r,i,a){var s,l;if("object"===(void 0===t?"undefined":o(t))){"string"!=typeof n&&(r=r||n,n=void 0);for(l in t)F(e,l,n,r,t[l],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=N;else if(!i)return e;return 1===a&&(s=i,i=function(e){return Ae().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=Ae.guid++)),e.each(function(){Ae.event.add(this,t,i,r,n)})}function D(e,t,n){if(!n)return void(void 0===qe.get(e,t)&&Ae.event.add(e,t,O));qe.set(e,t,!1),Ae.event.add(e,t,{namespace:!1,handler:function(e){var r,o,i=qe.get(this,t);if(1&e.isTrigger&&this[t]){if(i.length)(Ae.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=ge.call(arguments),qe.set(this,t,i),r=n(this,t),this[t](),o=qe.get(this,t),i!==o||r?qe.set(this,t,!1):o={},i!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else i.length&&(qe.set(this,t,{value:Ae.event.trigger(Ae.extend(i[0],Ae.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})}function B(e,t){return d(e,"table")&&d(11!==t.nodeType?t:t.firstChild,"tr")?Ae(e).children("tbody")[0]||e:e}function R(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function P(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function M(e,t){var n,r,o,i,a,s,l;if(1===t.nodeType){if(qe.hasData(e)&&(i=qe.get(e),l=i.events)){qe.remove(t,"handle events");for(o in l)for(n=0,r=l[o].length;n<r;n++)Ae.event.add(t,o,l[o][n])}We.hasData(e)&&(a=We.access(e),s=Ae.extend({},a),We.set(t,s))}}function U(e,t){var n=t.nodeName.toLowerCase();"input"===n&&rt.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function j(e,t,n,r){t=he(t);var o,i,a,l,c,d,u=0,p=e.length,f=p-1,g=t[0],h=Te(g);if(h||p>1&&"string"==typeof g&&!we.checkClone&&dt.test(g))return e.each(function(o){var i=e.eq(o);h&&(t[0]=g.call(this,o,i.html())),j(i,t,n,r)});if(p&&(o=A(t,e[0].ownerDocument,!1,e,r),i=o.firstChild,1===o.childNodes.length&&(o=i),i||r)){for(a=Ae.map(k(o,"script"),R),l=a.length;u<p;u++)c=o,u!==f&&(c=Ae.clone(c,!0,!0),l&&Ae.merge(a,k(c,"script"))),n.call(e[u],c,u);if(l)for(d=a[a.length-1].ownerDocument,Ae.map(a,P),u=0;u<l;u++)c=a[u],it.test(c.type||"")&&!qe.access(c,"globalEval")&&Ae.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?Ae._evalUrl&&!c.noModule&&Ae._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):s(c.textContent.replace(ut,""),c,d))}return e}function H(e,t,n){for(var r,o=t?Ae.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||Ae.cleanData(k(r)),r.parentNode&&(n&&Ze(r)&&I(k(r,"script")),r.parentNode.removeChild(r));return e}function $(e,t,n){var r,o,i,a,s=e.style;return n=n||ft(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||Ze(e)||(a=Ae.style(e,t)),!we.pixelBoxStyles()&&pt.test(a)&&ht.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function V(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function K(e){for(var t=e[0].toUpperCase()+e.slice(1),n=mt.length;n--;)if((e=mt[n]+t)in vt)return e}function q(e){var t=Ae.cssProps[e]||bt[e];return t||(e in vt?e:bt[e]=K(e)||e)}function W(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function z(e,t,n,r,o,i){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=Ae.css(e,n+Je[a],!0,o)),r?("content"===n&&(l-=Ae.css(e,"padding"+Je[a],!0,o)),"margin"!==n&&(l-=Ae.css(e,"border"+Je[a]+"Width",!0,o))):(l+=Ae.css(e,"padding"+Je[a],!0,o),"padding"!==n?l+=Ae.css(e,"border"+Je[a]+"Width",!0,o):s+=Ae.css(e,"border"+Je[a]+"Width",!0,o));return!r&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0),l}function G(e,t,n){var r=ft(e),o=!we.boxSizingReliable()||n,i=o&&"border-box"===Ae.css(e,"boxSizing",!1,r),a=i,s=$(e,t,r),l="offset"+t[0].toUpperCase()+t.slice(1);if(pt.test(s)){if(!n)return s;s="auto"}return(!we.boxSizingReliable()&&i||!we.reliableTrDimensions()&&d(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===Ae.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===Ae.css(e,"boxSizing",!1,r),(a=l in e)&&(s=e[l])),(s=parseFloat(s)||0)+z(e,t,n||(i?"border":"content"),a,r,s)+"px"}function Y(e,t,n,r,o){return new Y.prototype.init(e,t,n,r,o)}function X(){Tt&&(!1===ke.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(X):i.setTimeout(X,Ae.fx.interval),Ae.fx.tick())}function J(){return i.setTimeout(function(){wt=void 0}),wt=Date.now()}function Q(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)n=Je[r],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function Z(e,t,n){for(var r,o=(ne.tweeners[t]||[]).concat(ne.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function ee(e,t,n){var r,o,i,a,s,l,c,d,u="width"in t||"height"in t,p=this,f={},g=e.style,h=e.nodeType&&tt(e),m=qe.get(e,"fxshow");n.queue||(a=Ae._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,Ae.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(o=t[r],xt.test(o)){if(delete t[r],i=i||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||Ae.style(e,r)}if((l=!Ae.isEmptyObject(t))||!Ae.isEmptyObject(f)){u&&1===e.nodeType&&(n.overflow=[g.overflow,g.overflowX,g.overflowY],c=m&&m.display,null==c&&(c=qe.get(e,"display")),d=Ae.css(e,"display"),"none"===d&&(c?d=c:(x([e],!0),c=e.style.display||c,d=Ae.css(e,"display"),x([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===Ae.css(e,"float")&&(l||(p.done(function(){g.display=c}),null==c&&(d=g.display,c="none"===d?"":d)),g.display="inline-block")),n.overflow&&(g.overflow="hidden",p.always(function(){g.overflow=n.overflow[0],g.overflowX=n.overflow[1],g.overflowY=n.overflow[2]})),l=!1;for(r in f)l||(m?"hidden"in m&&(h=m.hidden):m=qe.access(e,"fxshow",{display:c}),i&&(m.hidden=!h),h&&x([e],!0),p.done(function(){h||x([e]),qe.remove(e,"fxshow");for(r in f)Ae.style(e,r,f[r])})),l=Z(h?m[r]:0,r,p),r in m||(m[r]=l.start,h&&(l.end=l.start,l.start=0))}}function te(e,t){var n,r,o,i,a;for(n in e)if(r=y(n),o=t[r],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=Ae.cssHooks[r])&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function ne(e,t,n){var r,o,i=0,a=ne.prefilters.length,s=Ae.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=wt||J(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,i=1-r,a=0,l=c.tweens.length;a<l;a++)c.tweens[a].run(i);return s.notifyWith(e,[c,i,n]),i<1&&l?n:(l||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:Ae.extend({},t),opts:Ae.extend(!0,{specialEasing:{},easing:Ae.easing._default},n),originalProperties:t,originalOptions:n,startTime:wt||J(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Ae.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),d=c.props;for(te(d,c.opts.specialEasing);i<a;i++)if(r=ne.prefilters[i].call(c,e,d,c.opts))return Te(r.stop)&&(Ae._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return Ae.map(d,Z,c),Te(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),Ae.fx.timer(Ae.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function re(e){return(e.match(Me)||[]).join(" ")}function oe(e){return e.getAttribute&&e.getAttribute("class")||""}function ie(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Me)||[]:[]}function ae(e,t,n,r){var i;if(Array.isArray(t))Ae.each(t,function(t,i){n||Pt.test(e)?r(e,i):ae(e+"["+("object"===(void 0===i?"undefined":o(i))&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==l(t))r(e,t);else for(i in t)ae(e+"["+i+"]",t[i],n,r)}function se(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(Me)||[];if(Te(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function le(e,t,n,r){function o(s){var l;return i[s]=!0,Ae.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||i[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var i={},a=e===Yt;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ce(e,t){var n,r,o=Ae.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&Ae.extend(!0,e,r),e}function de(e,t,n){for(var r,o,i,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)i=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==l[0]&&l.unshift(i),n[i]}function ue(e,t,n,r){var o,i,a,s,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(i=d.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=d.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(a=c[l+" "+i]||c["* "+i]))for(o in c)if(s=o.split(" "),s[1]===i&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(i=s[0],d.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}var pe=[],fe=Object.getPrototypeOf,ge=pe.slice,he=pe.flat?function(e){return pe.flat.call(e)}:function(e){return pe.concat.apply([],e)},me=pe.push,ve=pe.indexOf,be={},ye=be.toString,Ee=be.hasOwnProperty,Se=Ee.toString,Ce=Se.call(Object),we={},Te=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},xe=function(e){return null!=e&&e===e.window},ke=i.document,Ie={type:!0,src:!0,nonce:!0,noModule:!0},Ae=function e(t,n){return new e.fn.init(t,n)};Ae.fn=Ae.prototype={jquery:"3.6.0",constructor:Ae,length:0,toArray:function(){return ge.call(this)},get:function(e){return null==e?ge.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Ae.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Ae.each(this,e)},map:function(e){return this.pushStack(Ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ge.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Ae.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(Ae.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:me,sort:pe.sort,splice:pe.splice},Ae.extend=Ae.fn.extend=function(){var e,t,n,r,i,a,s=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[l]||{},l++),"object"===(void 0===s?"undefined":o(s))||Te(s)||(s={}),l===c&&(s=this,l--);l<c;l++)if(null!=(e=arguments[l]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(d&&r&&(Ae.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[t],a=i&&!Array.isArray(n)?[]:i||Ae.isPlainObject(n)?n:{},i=!1,s[t]=Ae.extend(d,a,r)):void 0!==r&&(s[t]=r));return s},Ae.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ye.call(e))&&(!(t=fe(e))||"function"==typeof(n=Ee.call(t,"constructor")&&t.constructor)&&Se.call(n)===Ce)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){s(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?Ae.merge(n,"string"==typeof e?[e]:e):me.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ve.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,i=0,a=[];if(c(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&a.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&a.push(o);return he(a)},guid:1,support:we}),"function"==typeof Symbol&&(Ae.fn[Symbol.iterator]=pe[Symbol.iterator]),Ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){be["[object "+t+"]"]=t.toLowerCase()});var Oe=/*!
  * Sizzle CSS Selector Engine v2.3.6
  * https://sizzlejs.com/
  *
  * Copyright JS Foundation and other contributors
  * Released under the MIT license
  * https://js.foundation/
  *
  * Date: 2021-02-16
  */
function(e){function t(e,t,n,r){var o,i,a,s,l,d,p,f=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!r&&(N(t),t=t||L,F)){if(11!==g&&(l=ve.exec(e)))if(o=l[1]){if(9===g){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(f&&(a=f.getElementById(o))&&P(t,a)&&a.id===o)return n.push(a),n}else{if(l[2])return J.apply(n,t.getElementsByTagName(e)),n;if((o=l[3])&&E.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(o)),n}if(E.qsa&&!q[e+" "]&&(!D||!D.test(e))&&(1!==g||"object"!==t.nodeName.toLowerCase())){if(p=e,f=t,1===g&&(ce.test(e)||le.test(e))){for(f=be.test(e)&&c(t.parentNode)||t,f===t&&E.scope||((s=t.getAttribute("id"))?s=s.replace(Se,Ce):t.setAttribute("id",s=M)),d=T(e),i=d.length;i--;)d[i]=(s?"#"+s:":scope")+" "+u(d[i]);p=d.join(",")}try{return J.apply(n,f.querySelectorAll(p)),n}catch(t){q(e,!0)}finally{s===M&&t.removeAttribute("id")}}}return k(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[M]=!0,e}function o(e){var t=L.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=n.length;r--;)S.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Te(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function u(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=H++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,l){var c,d,u,p=[j,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=t[M]||(t[M]={}),d=u[t.uniqueID]||(u[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=d[i])&&c[0]===j&&c[1]===s)return p[2]=c[2];if(d[i]=p,p[2]=e(t,n,l))return!0}return!1}}function f(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var o=0,i=n.length;o<i;o++)t(e,n[o],r);return r}function h(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(s)));return a}function m(e,t,n,o,i,a){return o&&!o[M]&&(o=m(o)),i&&!i[M]&&(i=m(i,a)),r(function(r,a,s,l){var c,d,u,p=[],f=[],m=a.length,v=r||g(t||"*",s.nodeType?[s]:s,[]),b=!e||!r&&t?v:h(v,p,e,s,l),y=n?i||(r?e:m||o)?[]:a:b;if(n&&n(b,y,s,l),o)for(c=h(y,f),o(c,[],s,l),d=c.length;d--;)(u=c[d])&&(y[f[d]]=!(b[f[d]]=u));if(r){if(i||e){if(i){for(c=[],d=y.length;d--;)(u=y[d])&&c.push(b[d]=u);i(null,y=[],c,l)}for(d=y.length;d--;)(u=y[d])&&(c=i?Z(r,u):p[d])>-1&&(r[c]=!(a[c]=u))}}else y=h(y===a?y.splice(m,y.length):y),i?i(null,a,y,l):J.apply(a,y)})}function v(e){for(var t,n,r,o=e.length,i=S.relative[e[0].type],a=i||S.relative[" "],s=i?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return Z(t,e)>-1},a,!0),d=[function(e,n,r){var o=!i&&(r||n!==I)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,o}];s<o;s++)if(n=S.relative[e[s].type])d=[p(f(d),n)];else{if(n=S.filter[e[s].type].apply(null,e[s].matches),n[M]){for(r=++s;r<o&&!S.relative[e[r].type];r++);return m(s>1&&f(d),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ae,"$1"),n,s<r&&v(e.slice(s,r)),r<o&&v(e=e.slice(r)),r<o&&u(e))}d.push(n)}return f(d)}function b(e,n){var o=n.length>0,i=e.length>0,a=function(r,a,s,l,c){var d,u,p,f=0,g="0",m=r&&[],v=[],b=I,y=r||i&&S.find.TAG("*",c),E=j+=null==b?1:Math.random()||.1,C=y.length;for(c&&(I=a==L||a||c);g!==C&&null!=(d=y[g]);g++){if(i&&d){for(u=0,a||d.ownerDocument==L||(N(d),s=!F);p=e[u++];)if(p(d,a||L,s)){l.push(d);break}c&&(j=E)}o&&((d=!p&&d)&&f--,r&&m.push(d))}if(f+=g,o&&g!==f){for(u=0;p=n[u++];)p(m,v,a,s);if(r){if(f>0)for(;g--;)m[g]||v[g]||(v[g]=Y.call(l));v=h(v)}J.apply(l,v),c&&!r&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return c&&(j=E,I=b),m};return o?r(a):a}var y,E,S,C,w,T,x,k,I,A,O,N,L,_,F,D,B,R,P,M="sizzle"+1*new Date,U=e.document,j=0,H=0,$=n(),V=n(),K=n(),q=n(),W=function(e,t){return e===t&&(O=!0),0},z={}.hasOwnProperty,G=[],Y=G.pop,X=G.push,J=G.push,Q=G.slice,Z=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",re="\\["+te+"*("+ne+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+te+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ie=new RegExp(te+"+","g"),ae=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),se=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),ce=new RegExp(te+"|>"),de=new RegExp(oe),ue=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},fe=/HTML$/i,ge=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,ye=new RegExp("\\\\[\\da-fA-F]{1,6}"+te+"?|\\\\([^\\r\\n\\f])","g"),Ee=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ce=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){N()},Te=p(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{J.apply(G=Q.call(U.childNodes),U.childNodes),G[U.childNodes.length].nodeType}catch(e){J={apply:G.length?function(e,t){X.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}E=t.support={},w=t.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!fe.test(t||n&&n.nodeName||"HTML")},N=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!=L&&9===r.nodeType&&r.documentElement?(L=r,_=L.documentElement,F=!w(L),U!=L&&(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),E.scope=o(function(e){return _.appendChild(e).appendChild(L.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),E.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=o(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=me.test(L.getElementsByClassName),E.getById=o(function(e){return _.appendChild(e).id=M,!L.getElementsByName||!L.getElementsByName(M).length}),E.getById?(S.filter.ID=function(e){var t=e.replace(ye,Ee);return function(e){return e.getAttribute("id")===t}},S.find.ID=function(e,t){if(void 0!==t.getElementById&&F){var n=t.getElementById(e);return n?[n]:[]}}):(S.filter.ID=function(e){var t=e.replace(ye,Ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},S.find.ID=function(e,t){if(void 0!==t.getElementById&&F){var n,r,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),S.find.TAG=E.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},S.find.CLASS=E.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&F)return t.getElementsByClassName(e)},B=[],D=[],(E.qsa=me.test(L.querySelectorAll))&&(o(function(e){var t;_.appendChild(e).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll("[id~="+M+"-]").length||D.push("~="),t=L.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||D.push("\\["+te+"*name"+te+"*="+te+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+M+"+*").length||D.push(".#.+[+~]"),e.querySelectorAll("\\\f"),D.push("[\\r\\n\\f]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+te+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&D.push(":enabled",":disabled"),_.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(E.matchesSelector=me.test(R=_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.oMatchesSelector||_.msMatchesSelector))&&o(function(e){E.disconnectedMatch=R.call(e,"*"),R.call(e,"[s!='']:x"),B.push("!=",oe)}),D=D.length&&new RegExp(D.join("|")),B=B.length&&new RegExp(B.join("|")),t=me.test(_.compareDocumentPosition),P=t||me.test(_.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!E.sortDetached&&t.compareDocumentPosition(e)===n?e==L||e.ownerDocument==U&&P(U,e)?-1:t==L||t.ownerDocument==U&&P(U,t)?1:A?Z(A,e)-Z(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,s=[e],l=[t];if(!o||!i)return e==L?-1:t==L?1:o?-1:i?1:A?Z(A,e)-Z(A,t):0;if(o===i)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]==U?-1:l[r]==U?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if(N(e),E.matchesSelector&&F&&!q[n+" "]&&(!B||!B.test(n))&&(!D||!D.test(n)))try{var r=R.call(e,n);if(r||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){q(n,!0)}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!=L&&N(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=L&&N(e);var n=S.attrHandle[t.toLowerCase()],r=n&&z.call(S.attrHandle,t.toLowerCase())?n(e,t,!F):void 0;return void 0!==r?r:E.attributes||!F?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(Se,Ce)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(O=!E.detectDuplicates,A=!E.sortStable&&e.slice(0),e.sort(W),O){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return A=null,e},C=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var i=t.attr(o,e);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(ie," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,p,f,g,h=i!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(m){if(i){for(;h;){for(p=t;p=p[h];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;g=h="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?m.firstChild:m.lastChild],a&&b){for(p=m,u=p[M]||(p[M]={}),d=u[p.uniqueID]||(u[p.uniqueID]={}),c=d[e]||[],f=c[0]===j&&c[1],y=f&&c[2],p=f&&m.childNodes[f];p=++f&&p&&p[h]||(y=f=0)||g.pop();)if(1===p.nodeType&&++y&&p===t){d[e]=[j,f,y];break}}else if(b&&(p=t,u=p[M]||(p[M]={}),d=u[p.uniqueID]||(u[p.uniqueID]={}),c=d[e]||[],f=c[0]===j&&c[1],y=f),!1===y)for(;(p=++f&&p&&p[h]||(y=f=0)||g.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++y||(b&&(u=p[M]||(p[M]={}),d=u[p.uniqueID]||(u[p.uniqueID]={}),d[e]=[j,y]),p!==t)););return(y-=o)===r||y%r==0&&y/r>=0}}},PSEUDO:function(e,n){var o,i=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[M]?i(n):i.length>1?(o=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=Z(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:r(function(e){var t=[],n=[],o=x(e.replace(ae,"$1"));return o[M]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ye,Ee),function(t){return(t.textContent||C(t)).indexOf(e)>-1}}),lang:r(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,Ee).toLowerCase(),function(t){var n;do{if(n=F?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===_},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})S.pseudos[y]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(y);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,T=t.tokenize=function(e,n){var r,o,i,a,s,l,c,d=V[e+" "];if(d)return n?0:d.slice(0);for(s=e,l=[],c=S.preFilter;s;){r&&!(o=se.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(i=[])),r=!1,(o=le.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(ae," ")}),s=s.slice(r.length));for(a in S.filter)!(o=pe[a].exec(s))||c[a]&&!(o=c[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},x=t.compile=function(e,t){var n,r=[],o=[],i=K[e+" "];if(!i){for(t||(t=T(e)),n=t.length;n--;)i=v(t[n]),i[M]?r.push(i):o.push(i);i=K(e,b(o,r)),i.selector=e}return i},k=t.select=function(e,t,n,r){var o,i,a,s,l,d="function"==typeof e&&e,p=!r&&T(e=d.selector||e);if(n=n||[],1===p.length){if(i=p[0]=p[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&9===t.nodeType&&F&&S.relative[i[1].type]){if(!(t=(S.find.ID(a.matches[0].replace(ye,Ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=pe.needsContext.test(e)?0:i.length;o--&&(a=i[o],!S.relative[s=a.type]);)if((l=S.find[s])&&(r=l(a.matches[0].replace(ye,Ee),be.test(i[0].type)&&c(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&u(i)))return J.apply(n,r),n;break}}return(d||x(e,p))(r,t,!F,n,!t||be.test(e)&&c(t.parentNode)||t),n},E.sortStable=M.split("").sort(W).join("")===M,E.detectDuplicates=!!O,N(),E.sortDetached=o(function(e){return 1&e.compareDocumentPosition(L.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i(ee,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(i);Ae.find=Oe,Ae.expr=Oe.selectors,Ae.expr[":"]=Ae.expr.pseudos,Ae.uniqueSort=Ae.unique=Oe.uniqueSort,Ae.text=Oe.getText,Ae.isXMLDoc=Oe.isXML,Ae.contains=Oe.contains,Ae.escapeSelector=Oe.escape;var Ne=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&Ae(e).is(n))break;r.push(e)}return r},Le=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},_e=Ae.expr.match.needsContext,Fe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Ae.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Ae.find.matchesSelector(r,e)?[r]:[]:Ae.find.matches(e,Ae.grep(t,function(e){return 1===e.nodeType}))},Ae.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(Ae(e).filter(function(){for(t=0;t<r;t++)if(Ae.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Ae.find(e,o[t],n);return r>1?Ae.uniqueSort(n):n},filter:function(e){return this.pushStack(u(this,e||[],!1))},not:function(e){return this.pushStack(u(this,e||[],!0))},is:function(e){return!!u(this,"string"==typeof e&&_e.test(e)?Ae(e):e||[],!1).length}});var De,Be=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Ae.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||De,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Be.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Ae?t[0]:t,Ae.merge(this,Ae.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:ke,!0)),Fe.test(r[1])&&Ae.isPlainObject(t))for(r in t)Te(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return o=ke.getElementById(r[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):Te(e)?void 0!==n.ready?n.ready(e):e(Ae):Ae.makeArray(e,this)}).prototype=Ae.fn,De=Ae(ke);var Re=/^(?:parents|prev(?:Until|All))/,Pe={children:!0,contents:!0,next:!0,prev:!0};Ae.fn.extend({has:function(e){var t=Ae(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Ae.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&Ae(e);if(!_e.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Ae.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?Ae.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?ve.call(Ae(e),this[0]):ve.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Ae.uniqueSort(Ae.merge(this.get(),Ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ne(e,"parentNode")},parentsUntil:function(e,t,n){return Ne(e,"parentNode",n)},next:function(e){return p(e,"nextSibling")},prev:function(e){return p(e,"previousSibling")},nextAll:function(e){return Ne(e,"nextSibling")},prevAll:function(e){return Ne(e,"previousSibling")},nextUntil:function(e,t,n){return Ne(e,"nextSibling",n)},prevUntil:function(e,t,n){return Ne(e,"previousSibling",n)},siblings:function(e){return Le((e.parentNode||{}).firstChild,e)},children:function(e){return Le(e.firstChild)},contents:function(e){return null!=e.contentDocument&&fe(e.contentDocument)?e.contentDocument:(d(e,"template")&&(e=e.content||e),Ae.merge([],e.childNodes))}},function(e,t){Ae.fn[e]=function(n,r){var o=Ae.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=Ae.filter(r,o)),this.length>1&&(Pe[e]||Ae.uniqueSort(o),Re.test(e)&&o.reverse()),this.pushStack(o)}});var Me=/[^\x20\t\r\n\f]+/g;Ae.Callbacks=function(e){e="string"==typeof e?f(e):Ae.extend({},e);var t,n,r,o,i=[],a=[],s=-1,c=function(){for(o=o||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},d={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){Ae.each(n,function(n,r){Te(r)?e.unique&&d.has(r)||i.push(r):r&&r.length&&"string"!==l(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return Ae.each(arguments,function(e,t){for(var n;(n=Ae.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?Ae.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},Ae.extend({Deferred:function(e){var t=[["notify","progress",Ae.Callbacks("memory"),Ae.Callbacks("memory"),2],["resolve","done",Ae.Callbacks("once memory"),Ae.Callbacks("once memory"),0,"resolved"],["reject","fail",Ae.Callbacks("once memory"),Ae.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return Ae.Deferred(function(n){Ae.each(t,function(t,r){var o=Te(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=o&&o.apply(this,arguments);e&&Te(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,n,r){function a(e,t,n,r){return function(){var l=this,c=arguments,d=function(){var i,d;if(!(e<s)){if((i=n.apply(l,c))===t.promise())throw new TypeError("Thenable self-resolution");d=i&&("object"===(void 0===i?"undefined":o(i))||"function"==typeof i)&&i.then,Te(d)?r?d.call(i,a(s,t,g,r),a(s,t,h,r)):(s++,d.call(i,a(s,t,g,r),a(s,t,h,r),a(s,t,g,t.notifyWith))):(n!==g&&(l=void 0,c=[i]),(r||t.resolveWith)(l,c))}},u=r?d:function(){try{d()}catch(r){Ae.Deferred.exceptionHook&&Ae.Deferred.exceptionHook(r,u.stackTrace),e+1>=s&&(n!==h&&(l=void 0,c=[r]),t.rejectWith(l,c))}};e?u():(Ae.Deferred.getStackHook&&(u.stackTrace=Ae.Deferred.getStackHook()),i.setTimeout(u))}}var s=0;return Ae.Deferred(function(o){t[0][3].add(a(0,o,Te(r)?r:g,o.notifyWith)),t[1][3].add(a(0,o,Te(e)?e:g)),t[2][3].add(a(0,o,Te(n)?n:h))}).promise()},promise:function(e){return null!=e?Ae.extend(e,r):r}},a={};return Ae.each(t,function(e,o){var i=o[2],s=o[5];r[o[1]]=i.add,s&&i.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(o[3].fire),a[o[0]]=function(){return a[o[0]+"With"](this===a?void 0:this,arguments),this},a[o[0]+"With"]=i.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),o=ge.call(arguments),i=Ae.Deferred(),a=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?ge.call(arguments):n,--t||i.resolveWith(r,o)}};if(t<=1&&(m(e,i.done(a(n)).resolve,i.reject,!t),"pending"===i.state()||Te(o[n]&&o[n].then)))return i.then();for(;n--;)m(o[n],a(n),i.reject);return i.promise()}});var Ue=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Ae.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&Ue.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Ae.readyException=function(e){i.setTimeout(function(){throw e})};var je=Ae.Deferred();Ae.fn.ready=function(e){return je.then(e).catch(function(e){Ae.readyException(e)}),this},Ae.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Ae.readyWait:Ae.isReady)||(Ae.isReady=!0,!0!==e&&--Ae.readyWait>0||je.resolveWith(ke,[Ae]))}}),Ae.ready.then=je.then,"complete"===ke.readyState||"loading"!==ke.readyState&&!ke.documentElement.doScroll?i.setTimeout(Ae.ready):(ke.addEventListener("DOMContentLoaded",v),i.addEventListener("load",v));var He=function e(t,n,r,o,i,a,s){var c=0,d=t.length,u=null==r;if("object"===l(r)){i=!0;for(c in r)e(t,n,c,r[c],!0,a,s)}else if(void 0!==o&&(i=!0,Te(o)||(s=!0),u&&(s?(n.call(t,o),n=null):(u=n,n=function(e,t,n){return u.call(Ae(e),n)})),n))for(;c<d;c++)n(t[c],r,s?o:o.call(t[c],c,n(t[c],r)));return i?t:u?n.call(t):d?n(t[0],r):a},$e=/^-ms-/,Ve=/-([a-z])/g,Ke=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};E.uid=1,E.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ke(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[y(t)]=n;else for(r in t)o[y(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(y):(t=y(t),t=t in r?[t]:t.match(Me)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Ae.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Ae.isEmptyObject(t)}};var qe=new E,We=new E,ze=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ge=/[A-Z]/g;Ae.extend({hasData:function(e){return We.hasData(e)||qe.hasData(e)},data:function(e,t,n){return We.access(e,t,n)},removeData:function(e,t){We.remove(e,t)},_data:function(e,t,n){return qe.access(e,t,n)},_removeData:function(e,t){qe.remove(e,t)}}),Ae.fn.extend({data:function(e,t){var n,r,i,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(i=We.get(a),1===a.nodeType&&!qe.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=y(r.slice(5)),C(a,r,i[r])));qe.set(a,"hasDataAttrs",!0)}return i}return"object"===(void 0===e?"undefined":o(e))?this.each(function(){We.set(this,e)}):He(this,function(t){var n;if(a&&void 0===t){if(void 0!==(n=We.get(a,e)))return n;if(void 0!==(n=C(a,e)))return n}else this.each(function(){We.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){We.remove(this,e)})}}),Ae.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=qe.get(e,t),n&&(!r||Array.isArray(n)?r=qe.access(e,t,Ae.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Ae.queue(e,t),r=n.length,o=n.shift(),i=Ae._queueHooks(e,t),a=function(){Ae.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return qe.get(e,n)||qe.access(e,n,{empty:Ae.Callbacks("once memory").add(function(){qe.remove(e,[t+"queue",n])})})}}),Ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=Ae.queue(this,e,t);Ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=Ae.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=qe.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var Ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xe=new RegExp("^(?:([+-])=|)("+Ye+")([a-z%]*)$","i"),Je=["Top","Right","Bottom","Left"],Qe=ke.documentElement,Ze=function(e){return Ae.contains(e.ownerDocument,e)},et={composed:!0};Qe.getRootNode&&(Ze=function(e){return Ae.contains(e.ownerDocument,e)||e.getRootNode(et)===e.ownerDocument});var tt=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Ze(e)&&"none"===Ae.css(e,"display")},nt={};Ae.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){tt(this)?Ae(this).show():Ae(this).hide()})}});var rt=/^(?:checkbox|radio)$/i,ot=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,it=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=ke.createDocumentFragment(),t=e.appendChild(ke.createElement("div")),n=ke.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),we.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",we.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",we.option=!!t.lastChild}();var at={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};at.tbody=at.tfoot=at.colgroup=at.caption=at.thead,at.th=at.td,we.option||(at.optgroup=at.option=[1,"<select multiple='multiple'>","</select>"]);var st=/<|&#?\w+;/,lt=/^([^.]*)(?:\.(.+)|)/;Ae.event={global:{},add:function(e,t,n,r,o){var i,a,s,l,c,d,u,p,f,g,h,m=qe.get(e);if(Ke(e))for(n.handler&&(i=n,n=i.handler,o=i.selector),o&&Ae.find.matchesSelector(Qe,o),n.guid||(n.guid=Ae.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==Ae&&Ae.event.triggered!==t.type?Ae.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Me)||[""],c=t.length;c--;)s=lt.exec(t[c])||[],f=h=s[1],g=(s[2]||"").split(".").sort(),f&&(u=Ae.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=Ae.event.special[f]||{},d=Ae.extend({type:f,origType:h,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&Ae.expr.match.needsContext.test(o),namespace:g.join(".")},i),(p=l[f])||(p=l[f]=[],p.delegateCount=0,u.setup&&!1!==u.setup.call(e,r,g,a)||e.addEventListener&&e.addEventListener(f,a)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),Ae.event.global[f]=!0)},remove:function(e,t,n,r,o){var i,a,s,l,c,d,u,p,f,g,h,m=qe.hasData(e)&&qe.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Me)||[""],c=t.length;c--;)if(s=lt.exec(t[c])||[],f=h=s[1],g=(s[2]||"").split(".").sort(),f){for(u=Ae.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=p.length;i--;)d=p[i],!o&&h!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||r&&r!==d.selector&&("**"!==r||!d.selector)||(p.splice(i,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(e,d));a&&!p.length&&(u.teardown&&!1!==u.teardown.call(e,g,m.handle)||Ae.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)Ae.event.remove(e,f+t[c],n,r,!0);Ae.isEmptyObject(l)&&qe.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=new Array(arguments.length),l=Ae.event.fix(e),c=(qe.get(this,"events")||Object.create(null))[l.type]||[],d=Ae.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(a=Ae.event.handlers.call(this,l,c),t=0;(o=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==i.namespace&&!l.rnamespace.test(i.namespace)||(l.handleObj=i,l.data=i.data,void 0!==(r=((Ae.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,o,i,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],a={},n=0;n<l;n++)r=t[n],o=r.selector+" ",void 0===a[o]&&(a[o]=r.needsContext?Ae(o,this).index(c)>-1:Ae.find(o,this,null,[c]).length),a[o]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(Ae.Event.prototype,e,{enumerable:!0,configurable:!0,get:Te(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Ae.expando]?e:new Ae.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return rt.test(t.type)&&t.click&&d(t,"input")&&D(t,"click",O),!1},trigger:function(e){var t=this||e;return rt.test(t.type)&&t.click&&d(t,"input")&&D(t,"click"),!0},_default:function(e){var t=e.target;return rt.test(t.type)&&t.click&&d(t,"input")&&qe.get(t,"click")||d(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Ae.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Ae.Event=function(e,t){if(!(this instanceof Ae.Event))return new Ae.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?O:N,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Ae.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Ae.expando]=!0},Ae.Event.prototype={constructor:Ae.Event,isDefaultPrevented:N,isPropagationStopped:N,isImmediatePropagationStopped:N,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=O,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=O,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=O,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Ae.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},Ae.event.addProp),Ae.each({focus:"focusin",blur:"focusout"},function(e,t){Ae.event.special[e]={setup:function(){return D(this,e,L),!1},trigger:function(){return D(this,e),!0},_default:function(){return!0},delegateType:t}}),Ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===r||Ae.contains(r,o))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),Ae.fn.extend({on:function(e,t,n,r){return F(this,e,t,n,r)},one:function(e,t,n,r){return F(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Ae(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":o(e))){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=N),this.each(function(){Ae.event.remove(this,e,n,t)})}});var ct=/<script|<style|<link/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Ae.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),l=Ze(e);if(!(we.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Ae.isXMLDoc(e)))for(a=k(s),i=k(e),r=0,o=i.length;r<o;r++)U(i[r],a[r]);if(t)if(n)for(i=i||k(e),a=a||k(s),r=0,o=i.length;r<o;r++)M(i[r],a[r]);else M(e,s);return a=k(s,"script"),a.length>0&&I(a,!l&&k(e,"script")),s},cleanData:function(e){for(var t,n,r,o=Ae.event.special,i=0;void 0!==(n=e[i]);i++)if(Ke(n)){if(t=n[qe.expando]){if(t.events)for(r in t.events)o[r]?Ae.event.remove(n,r):Ae.removeEvent(n,r,t.handle);n[qe.expando]=void 0}n[We.expando]&&(n[We.expando]=void 0)}}}),Ae.fn.extend({detach:function(e){return H(this,e,!0)},remove:function(e){return H(this,e)},text:function(e){return He(this,function(e){return void 0===e?Ae.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return j(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){B(this,e).appendChild(e)}})},prepend:function(){return j(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=B(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return j(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return j(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Ae.cleanData(k(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Ae.clone(this,e,t)})},html:function(e){return He(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ct.test(e)&&!at[(ot.exec(e)||["",""])[1].toLowerCase()]){e=Ae.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Ae.cleanData(k(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return j(this,arguments,function(t){var n=this.parentNode;Ae.inArray(this,e)<0&&(Ae.cleanData(k(this)),n&&n.replaceChild(t,this))},e)}}),Ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Ae.fn[e]=function(e){for(var n,r=[],o=Ae(e),i=o.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),Ae(o[a])[t](n),me.apply(r,n.get());return this.pushStack(r)}});var pt=new RegExp("^("+Ye+")(?!px)[a-z%]+$","i"),ft=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},gt=function(e,t,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];r=n.call(e);for(o in t)e.style[o]=i[o];return r},ht=new RegExp(Je.join("|"),"i");!function(){function e(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qe.appendChild(c).appendChild(d);var e=i.getComputedStyle(d);n="1%"!==e.top,l=12===t(e.marginLeft),d.style.right="60%",a=36===t(e.right),r=36===t(e.width),d.style.position="absolute",o=12===t(d.offsetWidth/3),Qe.removeChild(c),d=null}}function t(e){return Math.round(parseFloat(e))}var n,r,o,a,s,l,c=ke.createElement("div"),d=ke.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",we.clearCloneStyle="content-box"===d.style.backgroundClip,Ae.extend(we,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,r;return null==s&&(e=ke.createElement("table"),t=ke.createElement("tr"),n=ke.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",Qe.appendChild(e).appendChild(t).appendChild(n),r=i.getComputedStyle(t),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,Qe.removeChild(e)),s}}))}();var mt=["Webkit","Moz","ms"],vt=ke.createElement("div").style,bt={},yt=/^(none|table(?!-c[ea]).+)/,Et=/^--/,St={position:"absolute",visibility:"hidden",display:"block"},Ct={letterSpacing:"0",fontWeight:"400"};Ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=$(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,s,l=y(t),c=Et.test(t),d=e.style;if(c||(t=q(l)),s=Ae.cssHooks[t]||Ae.cssHooks[l],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:d[t];a=void 0===n?"undefined":o(n),"string"===a&&(i=Xe.exec(n))&&i[1]&&(n=w(e,t,i),a="number"),null!=n&&n===n&&("number"!==a||c||(n+=i&&i[3]||(Ae.cssNumber[l]?"":"px")),we.clearCloneStyle||""!==n||0!==t.indexOf("background")||(d[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(c?d.setProperty(t,n):d[t]=n))}},css:function(e,t,n,r){var o,i,a,s=y(t);return Et.test(t)||(t=q(s)),a=Ae.cssHooks[t]||Ae.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=$(e,t,r)),"normal"===o&&t in Ct&&(o=Ct[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),Ae.each(["height","width"],function(e,t){Ae.cssHooks[t]={get:function(e,n,r){if(n)return!yt.test(Ae.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?G(e,t,r):gt(e,St,function(){return G(e,t,r)})},set:function(e,n,r){var o,i=ft(e),a=!we.scrollboxSize()&&"absolute"===i.position,s=a||r,l=s&&"border-box"===Ae.css(e,"boxSizing",!1,i),c=r?z(e,t,r,l,i):0;return l&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-z(e,t,"border",!1,i)-.5)),c&&(o=Xe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=Ae.css(e,t)),W(e,n,c)}}}),Ae.cssHooks.marginLeft=V(we.reliableMarginLeft,function(e,t){if(t)return(parseFloat($(e,"marginLeft"))||e.getBoundingClientRect().left-gt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Ae.each({margin:"",padding:"",border:"Width"},function(e,t){Ae.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+Je[r]+t]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(Ae.cssHooks[e+t].set=W)}),Ae.fn.extend({css:function(e,t){return He(this,function(e,t,n){var r,o,i={},a=0;if(Array.isArray(t)){for(r=ft(e),o=t.length;a<o;a++)i[t[a]]=Ae.css(e,t[a],!1,r);return i}return void 0!==n?Ae.style(e,t,n):Ae.css(e,t)},e,t,arguments.length>1)}}),Ae.Tween=Y,Y.prototype={constructor:Y,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||Ae.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(Ae.cssNumber[n]?"":"px")},cur:function(){var e=Y.propHooks[this.prop];return e&&e.get?e.get(this):Y.propHooks._default.get(this)},run:function(e){var t,n=Y.propHooks[this.prop];return this.options.duration?this.pos=t=Ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Y.propHooks._default.set(this),this}},Y.prototype.init.prototype=Y.prototype,Y.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Ae.fx.step[e.prop]?Ae.fx.step[e.prop](e):1!==e.elem.nodeType||!Ae.cssHooks[e.prop]&&null==e.elem.style[q(e.prop)]?e.elem[e.prop]=e.now:Ae.style(e.elem,e.prop,e.now+e.unit)}}},Y.propHooks.scrollTop=Y.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Ae.fx=Y.prototype.init,Ae.fx.step={};var wt,Tt,xt=/^(?:toggle|show|hide)$/,kt=/queueHooks$/;Ae.Animation=Ae.extend(ne,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return w(n.elem,e,Xe.exec(t),n),n}]},tweener:function(e,t){Te(e)?(t=e,e=["*"]):e=e.match(Me);for(var n,r=0,o=e.length;r<o;r++)n=e[r],ne.tweeners[n]=ne.tweeners[n]||[],ne.tweeners[n].unshift(t)},prefilters:[ee],prefilter:function(e,t){t?ne.prefilters.unshift(e):ne.prefilters.push(e)}}),Ae.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":o(e))?Ae.extend({},e):{complete:n||!n&&t||Te(e)&&e,duration:e,easing:n&&t||t&&!Te(t)&&t};return Ae.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Ae.fx.speeds?r.duration=Ae.fx.speeds[r.duration]:r.duration=Ae.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){Te(r.old)&&r.old.call(this),r.queue&&Ae.dequeue(this,r.queue)},r},Ae.fn.extend({fadeTo:function(e,t,n,r){return this.filter(tt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=Ae.isEmptyObject(e),i=Ae.speed(t,n,r),a=function(){var t=ne(this,Ae.extend({},e),i);(o||qe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=Ae.timers,a=qe.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&kt.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||Ae.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=qe.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=Ae.timers,a=r?r.length:0;for(n.finish=!0,Ae.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Ae.each(["toggle","show","hide"],function(e,t){var n=Ae.fn[t];Ae.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Q(t,!0),e,r,o)}}),Ae.each({slideDown:Q("show"),slideUp:Q("hide"),slideToggle:Q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Ae.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Ae.timers=[],Ae.fx.tick=function(){var e,t=0,n=Ae.timers;for(wt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||Ae.fx.stop(),wt=void 0},Ae.fx.timer=function(e){Ae.timers.push(e),Ae.fx.start()},Ae.fx.interval=13,Ae.fx.start=function(){Tt||(Tt=!0,X())},Ae.fx.stop=function(){Tt=null},Ae.fx.speeds={slow:600,fast:200,_default:400},Ae.fn.delay=function(e,t){return e=Ae.fx?Ae.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}})},function(){var e=ke.createElement("input"),t=ke.createElement("select"),n=t.appendChild(ke.createElement("option"));e.type="checkbox",we.checkOn=""!==e.value,we.optSelected=n.selected,e=ke.createElement("input"),e.value="t",e.type="radio",we.radioValue="t"===e.value}();var It,At=Ae.expr.attrHandle;Ae.fn.extend({attr:function(e,t){return He(this,Ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Ae.removeAttr(this,e)})}}),Ae.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?Ae.prop(e,t,n):(1===i&&Ae.isXMLDoc(e)||(o=Ae.attrHooks[t.toLowerCase()]||(Ae.expr.match.bool.test(t)?It:void 0)),void 0!==n?null===n?void Ae.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=Ae.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!we.radioValue&&"radio"===t&&d(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(Me);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),It={set:function(e,t,n){return!1===t?Ae.removeAttr(e,n):e.setAttribute(n,n),n}},Ae.each(Ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=At[t]||Ae.find.attr;At[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=At[a],At[a]=o,o=null!=n(e,t,r)?a:null,At[a]=i),o}});var Ot=/^(?:input|select|textarea|button)$/i,Nt=/^(?:a|area)$/i;Ae.fn.extend({prop:function(e,t){return He(this,Ae.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Ae.propFix[e]||e]})}}),Ae.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&Ae.isXMLDoc(e)||(t=Ae.propFix[t]||t,o=Ae.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Ae.find.attr(e,"tabindex");return t?parseInt(t,10):Ot.test(e.nodeName)||Nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),we.optSelected||(Ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Ae.propFix[this.toLowerCase()]=this}),Ae.fn.extend({addClass:function(e){var t,n,r,o,i,a,s,l=0;if(Te(e))return this.each(function(t){Ae(this).addClass(e.call(this,t,oe(this)))});if(t=ie(e),t.length)for(;n=this[l++];)if(o=oe(n),r=1===n.nodeType&&" "+re(o)+" "){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=re(r),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,o,i,a,s,l=0;if(Te(e))return this.each(function(t){Ae(this).removeClass(e.call(this,t,oe(this)))});if(!arguments.length)return this.attr("class","");if(t=ie(e),t.length)for(;n=this[l++];)if(o=oe(n),r=1===n.nodeType&&" "+re(o)+" "){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s=re(r),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":o(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):Te(e)?this.each(function(n){Ae(this).toggleClass(e.call(this,n,oe(this),t),t)}):this.each(function(){var t,o,i,a;if(r)for(o=0,i=Ae(this),a=ie(e);t=a[o++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=oe(this),t&&qe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":qe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+re(oe(n))+" ").indexOf(t)>-1)return!0;return!1}});var Lt=/\r/g;Ae.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=Te(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,Ae(this).val()):e,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=Ae.map(o,function(e){return null==e?"":e+""})),(t=Ae.valHooks[this.type]||Ae.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return(t=Ae.valHooks[o.type]||Ae.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Lt,""):null==n?"":n)}}}),Ae.extend({valHooks:{option:{get:function(e){var t=Ae.find.attr(e,"value");return null!=t?t:re(Ae.text(e))}},select:{get:function(e){var t,n,r,o=e.options,i=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?i+1:o.length;for(r=i<0?l:a?i:0;r<l;r++)if(n=o[r],(n.selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!d(n.parentNode,"optgroup"))){if(t=Ae(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,i=Ae.makeArray(t),a=o.length;a--;)r=o[a],(r.selected=Ae.inArray(Ae.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),Ae.each(["radio","checkbox"],function(){Ae.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Ae.inArray(Ae(e).val(),t)>-1}},we.checkOn||(Ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),we.focusin="onfocusin"in i;var _t=/^(?:focusinfocus|focusoutblur)$/,Ft=function(e){e.stopPropagation()};Ae.extend(Ae.event,{trigger:function(e,t,n,r){var a,s,l,c,d,u,p,f,g=[n||ke],h=Ee.call(e,"type")?e.type:e,m=Ee.call(e,"namespace")?e.namespace.split("."):[];if(s=f=l=n=n||ke,3!==n.nodeType&&8!==n.nodeType&&!_t.test(h+Ae.event.triggered)&&(h.indexOf(".")>-1&&(m=h.split("."),h=m.shift(),m.sort()),d=h.indexOf(":")<0&&"on"+h,e=e[Ae.expando]?e:new Ae.Event(h,"object"===(void 0===e?"undefined":o(e))&&e),e.isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:Ae.makeArray(t,[e]),p=Ae.event.special[h]||{},r||!p.trigger||!1!==p.trigger.apply(n,t))){if(!r&&!p.noBubble&&!xe(n)){for(c=p.delegateType||h,_t.test(c+h)||(s=s.parentNode);s;s=s.parentNode)g.push(s),l=s;l===(n.ownerDocument||ke)&&g.push(l.defaultView||l.parentWindow||i)}for(a=0;(s=g[a++])&&!e.isPropagationStopped();)f=s,e.type=a>1?c:p.bindType||h,u=(qe.get(s,"events")||Object.create(null))[e.type]&&qe.get(s,"handle"),u&&u.apply(s,t),(u=d&&s[d])&&u.apply&&Ke(s)&&(e.result=u.apply(s,t),!1===e.result&&e.preventDefault());return e.type=h,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),t)||!Ke(n)||d&&Te(n[h])&&!xe(n)&&(l=n[d],l&&(n[d]=null),Ae.event.triggered=h,e.isPropagationStopped()&&f.addEventListener(h,Ft),n[h](),e.isPropagationStopped()&&f.removeEventListener(h,Ft),Ae.event.triggered=void 0,l&&(n[d]=l)),e.result}},simulate:function(e,t,n){var r=Ae.extend(new Ae.Event,n,{type:e,isSimulated:!0});Ae.event.trigger(r,null,t)}}),Ae.fn.extend({trigger:function(e,t){return this.each(function(){Ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Ae.event.trigger(e,t,n,!0)}}),we.focusin||Ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Ae.event.simulate(t,e.target,Ae.event.fix(e))};Ae.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=qe.access(r,t);o||r.addEventListener(e,n,!0),qe.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=qe.access(r,t)-1;o?qe.access(r,t,o):(r.removeEventListener(e,n,!0),qe.remove(r,t))}}});var Dt=i.location,Bt={guid:Date.now()},Rt=/\?/;Ae.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||Ae.error("Invalid XML: "+(n?Ae.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Pt=/\[\]$/,Mt=/\r?\n/g,Ut=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;Ae.param=function(e,t){var n,r=[],o=function(e,t){var n=Te(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!Ae.isPlainObject(e))Ae.each(e,function(){o(this.name,this.value)});else for(n in e)ae(n,e[n],t,o);return r.join("&")},Ae.fn.extend({serialize:function(){return Ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Ae.prop(this,"elements");return e?Ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Ae(this).is(":disabled")&&jt.test(this.nodeName)&&!Ut.test(e)&&(this.checked||!rt.test(e))}).map(function(e,t){var n=Ae(this).val();return null==n?null:Array.isArray(n)?Ae.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}});var Ht=/%20/g,$t=/#.*$/,Vt=/([?&])_=[^&]*/,Kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,zt=/^\/\//,Gt={},Yt={},Xt="*/".concat("*"),Jt=ke.createElement("a");Jt.href=Dt.href,Ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt.href,type:"GET",isLocal:qt.test(Dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ce(ce(e,Ae.ajaxSettings),t):ce(Ae.ajaxSettings,e)},ajaxPrefilter:se(Gt),ajaxTransport:se(Yt),ajax:function(e,t){function n(e,t,n,o){var l,d,f,g,S,C=t;u||(u=!0,c&&i.clearTimeout(c),r=void 0,s=o||"",T.readyState=e>0?4:0,l=e>=200&&e<300||304===e,n&&(g=de(h,T,n)),!l&&Ae.inArray("script",h.dataTypes)>-1&&Ae.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),g=ue(h,g,T,l),l?(h.ifModified&&(S=T.getResponseHeader("Last-Modified"),S&&(Ae.lastModified[a]=S),(S=T.getResponseHeader("etag"))&&(Ae.etag[a]=S)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=g.state,d=g.data,f=g.error,l=!f)):(f=C,!e&&C||(C="error",e<0&&(e=0))),T.status=e,T.statusText=(t||C)+"",l?b.resolveWith(m,[d,C,T]):b.rejectWith(m,[T,C,f]),T.statusCode(E),E=void 0,p&&v.trigger(l?"ajaxSuccess":"ajaxError",[T,h,l?d:f]),y.fireWith(m,[T,C]),p&&(v.trigger("ajaxComplete",[T,h]),--Ae.active||Ae.event.trigger("ajaxStop")))}"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var r,a,s,l,c,d,u,p,f,g,h=Ae.ajaxSetup({},t),m=h.context||h,v=h.context&&(m.nodeType||m.jquery)?Ae(m):Ae.event,b=Ae.Deferred(),y=Ae.Callbacks("once memory"),E=h.statusCode||{},S={},C={},w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(u){if(!l)for(l={};t=Kt.exec(s);)l[t[1].toLowerCase()+" "]=(l[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=l[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,S[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)T.always(e[T.status]);else for(t in e)E[t]=[E[t],e[t]];return this},abort:function(e){var t=e||w;return r&&r.abort(t),n(0,t),this}};if(b.promise(T),h.url=((e||h.url||Dt.href)+"").replace(zt,Dt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Me)||[""],null==h.crossDomain){d=ke.createElement("a");try{d.href=h.url,d.href=d.href,h.crossDomain=Jt.protocol+"//"+Jt.host!=d.protocol+"//"+d.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Ae.param(h.data,h.traditional)),le(Gt,h,t,T),u)return T;p=Ae.event&&h.global,p&&0==Ae.active++&&Ae.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Wt.test(h.type),a=h.url.replace($t,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ht,"+")):(g=h.url.slice(a.length),h.data&&(h.processData||"string"==typeof h.data)&&(a+=(Rt.test(a)?"&":"?")+h.data,delete h.data),!1===h.cache&&(a=a.replace(Vt,"$1"),g=(Rt.test(a)?"&":"?")+"_="+Bt.guid+++g),h.url=a+g),h.ifModified&&(Ae.lastModified[a]&&T.setRequestHeader("If-Modified-Since",Ae.lastModified[a]),Ae.etag[a]&&T.setRequestHeader("If-None-Match",Ae.etag[a])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&T.setRequestHeader("Content-Type",h.contentType),T.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Xt+"; q=0.01":""):h.accepts["*"]);for(f in h.headers)T.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(m,T,h)||u))return T.abort();if(w="abort",y.add(h.complete),T.done(h.success),T.fail(h.error),r=le(Yt,h,t,T)){if(T.readyState=1,p&&v.trigger("ajaxSend",[T,h]),u)return T;h.async&&h.timeout>0&&(c=i.setTimeout(function(){T.abort("timeout")},h.timeout));try{u=!1,r.send(S,n)}catch(e){if(u)throw e;n(-1,e)}}else n(-1,"No Transport");return T},getJSON:function(e,t,n){return Ae.get(e,t,n,"json")},getScript:function(e,t){return Ae.get(e,void 0,t,"script")}}),Ae.each(["get","post"],function(e,t){Ae[t]=function(e,n,r,o){return Te(n)&&(o=o||r,r=n,n=void 0),Ae.ajax(Ae.extend({url:e,type:t,dataType:o,data:n,success:r},Ae.isPlainObject(e)&&e))}}),Ae.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),Ae._evalUrl=function(e,t,n){return Ae.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){Ae.globalEval(e,t,n)}})},Ae.fn.extend({wrapAll:function(e){var t;return this[0]&&(Te(e)&&(e=e.call(this[0])),t=Ae(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return Te(e)?this.each(function(t){Ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Te(e);return this.each(function(n){Ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Ae(this).replaceWith(this.childNodes)}),this}}),Ae.expr.pseudos.hidden=function(e){return!Ae.expr.pseudos.visible(e)},Ae.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Ae.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Zt=Ae.ajaxSettings.xhr();we.cors=!!Zt&&"withCredentials"in Zt,we.ajax=Zt=!!Zt,Ae.ajaxTransport(function(e){var t,n;if(we.cors||Zt&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),Ae.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Ae.globalEval(e),e}}}),Ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Ae.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(r,o){t=Ae("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),ke.head.appendChild(t[0])},abort:function(){n&&n()}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;Ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||Ae.expando+"_"+Bt.guid++;return this[e]=!0,e}}),Ae.ajaxPrefilter("json jsonp",function(e,t,n){var r,o,a,s=!1!==e.jsonp&&(tn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=Te(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(tn,"$1"+r):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||Ae.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=i[r],i[r]=function(){a=arguments},n.always(function(){void 0===o?Ae(i).removeProp(r):i[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,en.push(r)),a&&Te(o)&&o(a[0]),a=o=void 0}),"script"}),we.createHTMLDocument=function(){var e=ke.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Ae.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,o,i;return t||(we.createHTMLDocument?(t=ke.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=ke.location.href,t.head.appendChild(r)):t=ke),o=Fe.exec(e),i=!n&&[],o?[t.createElement(o[1])]:(o=A([e],t,i),i&&i.length&&Ae(i).remove(),Ae.merge([],o.childNodes))},Ae.fn.load=function(e,t,n){var r,i,a,s=this,l=e.indexOf(" ");return l>-1&&(r=re(e.slice(l)),e=e.slice(0,l)),Te(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":o(t))&&(i="POST"),s.length>0&&Ae.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(r?Ae("<div>").append(Ae.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},Ae.expr.pseudos.animated=function(e){return Ae.grep(Ae.timers,function(t){return e===t.elem}).length},Ae.offset={setOffset:function(e,t,n){var r,o,i,a,s,l,c,d=Ae.css(e,"position"),u=Ae(e),p={};"static"===d&&(e.style.position="relative"),s=u.offset(),i=Ae.css(e,"top"),l=Ae.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(i+l).indexOf("auto")>-1,c?(r=u.position(),a=r.top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(l)||0),Te(t)&&(t=t.call(e,n,Ae.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):u.css(p)}},Ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Ae.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===Ae.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Ae.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(o=Ae(e).offset(),o.top+=Ae.css(e,"borderTopWidth",!0),o.left+=Ae.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-Ae.css(r,"marginTop",!0),left:t.left-o.left-Ae.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Ae.css(e,"position");)e=e.offsetParent;return e||Qe})}}),Ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Ae.fn[e]=function(r){return He(this,function(e,r,o){var i;if(xe(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o},e,r,arguments.length)}}),Ae.each(["top","left"],function(e,t){Ae.cssHooks[t]=V(we.pixelPosition,function(e,n){if(n)return n=$(e,t),pt.test(n)?Ae(e).position()[t]+"px":n})}),Ae.each({Height:"height",Width:"width"},function(e,t){Ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Ae.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return He(this,function(t,n,o){var i;return xe(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?Ae.css(t,n,s):Ae.style(t,n,o,s)},t,a?o:void 0,a)}})}),Ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Ae.fn[t]=function(e){return this.on(t,e)}}),Ae.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Ae.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Ae.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var nn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Ae.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),Te(e))return r=ge.call(arguments,2),o=function(){return e.apply(t||this,r.concat(ge.call(arguments)))},o.guid=e.guid=e.guid||Ae.guid++,o},Ae.holdReady=function(e){e?Ae.readyWait++:Ae.ready(!0)},Ae.isArray=Array.isArray,Ae.parseJSON=JSON.parse,Ae.nodeName=d,Ae.isFunction=Te,Ae.isWindow=xe,Ae.camelCase=y,Ae.type=l,Ae.now=Date.now,Ae.isNumeric=function(e){var t=Ae.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},Ae.trim=function(e){return null==e?"":(e+"").replace(nn,"")},n=[],void 0!==(r=function(){return Ae}.apply(t,n))&&(e.exports=r);var rn=i.jQuery,on=i.$;return Ae.noConflict=function(e){return i.$===Ae&&(i.$=on),e&&i.jQuery===Ae&&(i.jQuery=rn),Ae},void 0===a&&(i.jQuery=i.$=Ae),Ae})}).call(t,n(65)(e))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=w.windowRef.sessionStorage;return{kcId:le.getKcId(),categoryId:e.getItem("apt.kcCatId"),recId:le.getRecommendedId()}}function i(){var e=(0,A.isOndemandState)();if(e){var t=o();a(e,!1,t.kcId,t.categoryId,t.recId)}}function a(e,t,n,r,o){if((0,A.hideAnyActiveEngagement)(),t)I.AjaxUtil.getData(D.previewEndpoint+"/kc/"+e,function(e){R.EngagementDrawer.draw(e)},{Authorization:"Bearer "+B.default.getToken()},function(e){try{403===e?((0,P.showMessage)("error","Not authorized to preview this engagement"),B.default.exit()):401==e&&((0,P.showMessage)("error","Token expired, try to preview again"),B.default.exit())}catch(e){x.logger.logInternalError(e)}});else{var i=(0,M.getTrackingPayload)();i.at="kc",i.kcid=n,i.catid=r,i.recId=o||null;var a=i.s;(0,O.setEngagementSessionId)(a);var s=T.ondemandEndpoint+"/"+w.eventTrackData.data[w.productIdParameter]+"/"+e+"?"+(0,N.convert2Parameters)((0,N.addParameters)(i,[]));try{I.AjaxUtil.getData(s,function(e){R.EngagementDrawer.draw([e],!0,{kcid:n,catid:r,recId:o||null})})}catch(e){x.logger.logInternalError("Error during getting on demand engagement id "+startOverGuideId)}}}function s(){var e=w.eventTrackData.data[w.productIdParameter],t=w.eventTrackData.data[w.aptrinsicIdParam];ce.fetchEntriesAndSendToWidget(e,t)}function l(e,t,n,r){return I.AjaxUtil.getData(T.getKnowledceCenterConfigEndpoint+"/"+e+"/"+t,n,"",r)}function c(e,t,n,r){var o=w.eventTrackData[U.cacheGet](w.sessionIdParam),i=(0,M.getUrl)(T.getKnowledceCenterConfigEndpoint,{s:o,p:e});return e&&o||x.logger.logInternalError(new Error("Trying to fetch kc with product id "+e+" and session id "+o)),t?l(e,t,n,r):I.AjaxUtil.getData(i,n,"",r)}function d(e){return"MIDDLE"===e||"CENTER"===e}function u(e,t,n,r){try{var o=document.querySelector("#apt-widget");if(!e||e&&!e.element||!t||!n||!o)return!o&&x.logger.logInternalError(new Error("Could not calculate position for embedded bot, widget container does not exist")),e&&!e.element&&x.logger.logInternalError(new Error("Could not calculate position for embedded bot, mapped element does not exist")),(!r||!t||!n)&&x.logger.logInternalError(new Error("Could not calculate position for embedded bot"+JSON.stringify({positionSettings:t,alignments:n,positionType:r}))),{};var i=t.positionHorizontal.toUpperCase(),a=t.positionVertical.toUpperCase(),s=n.horizontalAlignment.toUpperCase(),l=n.verticalAlignment.toUpperCase(),c="fixed"===r,u=e.element.getBoundingClientRect(),p=o.getBoundingClientRect(),f=u.height/2,g=u.width/2,h="0px",m="0px",v=0,b=c?u.top:p.top-u.top;"TOP"===a?v=c?b:0-b:"BOTTOM"===a?v=c?u.height+b:u.height-b:d(a)&&(v=c?f+b:f-b),v+=t.positionTopDelta,"BOTTOM"===l&&(m="-100%");var y=0,E=c?u.left:p.left-u.left;return"LEFT"===i?y=c?E:0-E:"RIGHT"===i?y=c?u.width+E:u.width-E:d(i)&&(y=c?g+E:g-E),y+=t.positionLeftDelta,"RIGHT"===s&&(h="-100%"),{left:y,top:v,transform:"translate("+h+", "+m+")"}}catch(e){return x.logger.logInternalError(e,"Could not calculate position for embedded bot with element"),{}}}function p(e,t){try{var n=(0,T.getConfig)("contentProxyDomain"),r=(0,T.getConfig)("enableKcSecureArticle"),o=(0,T.getConfig)("kcPositionType"),i="embedded"===(0,T.getConfig)("kcDisplayType"),a=i?u(t,e.windowSettings.embedKCSettings.positionSettings,{horizontalAlignment:e.windowSettings.embedKCSettings.horizontalAlignment,verticalAlignment:e.windowSettings.embedKCSettings.verticalAlignment},o):{};e.windowSettings.embedKCSettings.calculatedPosition=a;var s="API"===(0,T.getConfig)("fetchKcType");return Object.assign(e,{showIcon:!i&&(!s||s&&se),isEmbedded:i,kcPositionType:o,enableKcSecureArticle:r,contentProxyDomain:n})}catch(e){return x.logger.logInternalError(e,"Could not merge sdk configuration for bot"),{}}}function f(e){var t={font:e,weights:K.FONTS_WEIGHTS},n=K.FONTS_SUBSETS,r=[t].reduce(function(e,t){var n=t.font.replace(/ +/g,"+"),r=(t.weights||[]).join(",");return e.push(n+(r&&":"+r)),e},[]).join("|"),o="https://fonts.googleapis.com/css?family="+r;return n&&Array.isArray(n)&&n.length>0&&(o+="&subset="+n.join(",")),'<link rel="stylesheet" href="'+o+'">'}function g(e){return e&&K.BROWSER_DEFAULT_FONTS.indexOf(e)<0}function h(e,t){return"<style>.regular-"+t+"{font-family: "+e+";}.bold-"+t+"{font-family: "+e+';font-weight: bold}</style><div class="regular-'+t+'">a </div><div class="bold-'+t+'">a </div>'}function m(e){ae=e}function v(){return ae}function b(e){null===se&&(se=e)}function y(){return se}function E(e){return-1!==["ZSBMJTAYEANS","ALAZMN715YZH","PDCNS0SWT1ZP","RR8EQLTW2VP9","TGAN0LMXA1BX","XIKPBREHZXOJ","GLSDIDVBIAVK","AKKBV8ECO1E8","FAP8QPGYKUVA","GZKRSU61EUCU","OJY7IO6BCAAN","RMACDJOEHAEG","X4TBJOVYHWVS","ZJQOCZEF9PIR","DQ1NRPVT7VG1","9APX3RS6VUQK","ZSSKB3VPJSDK","EOLIULDC9NMZ","AS1CEZNAOYLR"].indexOf(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.KnowledgeCenterManager=t.KcSessionStorage=void 0;var S=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getKcDataFromSessionStorage=o,t.loadOnDemandEngagement=i,t.getKcEngagement=a,t.fetchKnowledgeCenterConfig=c,t.setKcIsShownViaAPI=m,t.getKcIsShownViaAPI=v,t.setIsNewAPI=b,t.getIsNewAPI=y,t.productNeedsExtraLogging=E;var C=n(23),w=n(4),T=n(2),x=n(3),k=n(9),I=n(11),A=n(25),O=n(38),N=n(0),L=n(42),_=n(32),F=n(134),D=n(14),B=r(D),R=n(44),P=n(35),M=n(75),U=n(5),j=n(52),H=n(21),$=n(20),V=n(53),K=n(129),q=n(47),W=r(q),z=n(22),G=n(13),Y=n(6),X=n(48),J=r(X),Q=n(46),Z=r(Q),ee=n(8),te=n(130),ne=n(19),re="apt_track_external_article",oe="apt_log",ie=["apt_get_engagement","APT_WIDGET_LOADED","apt_get_user_data","apt_send_feedback","apt_search_articles","apt_get_article","apt_track_internal_article","apt_tracking_toggle_widget","apt_kc_func_click","apt_kc_link_click",re,oe],ae=!1,se=null,le=t.KcSessionStorage={setKcId:function(e){w.windowRef.sessionStorage.setItem("apt.kcId",e)},setIsDefaultKc:function(e){w.windowRef.sessionStorage.setItem("apt.isDefaultKc",e)},setRecommendedId:function(e){w.windowRef.sessionStorage.setItem("apt.recId",e)},getIsDefaultKc:function(e){return w.windowRef.sessionStorage.getItem("apt.isDefaultKc")},getKcId:function(){return w.windowRef.sessionStorage.getItem("apt.kcId")},getRecommendedId:function(){return w.windowRef.sessionStorage.getItem("apt.recId")}},ce=t.KnowledgeCenterManager=new function(){function e(e){return function(){v(e.apply(this,arguments))}}function t(e,t){if(!document.querySelector(".apt-widget-frame")){x.logger.log("SDK Creating KC iframe"),de=!1,pe=C.UserData.getUserId();var n=document.createElement("iframe");n.className="apt-widget-frame",n.style.opacity="0",n.style.transform="scale(0)",n.style.visibility="hidden",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",(0,T.getBody)().appendChild(n);var r=JSON.stringify(Object.assign(t,{enableKcSecureArticle:(0,T.getConfig)("enableKcSecureArticle"),contentProxyDomain:(0,T.getConfig)("contentProxyDomain")}));n.setAttribute("data-sdkconfig",r);var o=t.initialConfig.windowSettings.textFont,i=t.initialConfig.onBoardingSettings.textFont,a=g(o),s=g(i),l=a?f(o):"",c=s?f(i):"",d=a?h(o,1):"",u=s?h(i,2):"",p="<head>"+(l+c)+'<script type="text/javascript" charset="utf-8" src='+e+" async><\/script></head><body>"+(d+u)+"</body>";n.contentWindow.document.open(),n.contentWindow.document.write(p),n.contentWindow.document.close(),B=n.contentWindow,q=!0,X=!1,x.logger.log("SDK KC iframe creation done"),(0,T.isIframe)()?W.default.postBotFound():k.internalEventListener.dispatchEvent(z.IFRAME_TO_TOP_EVENTS.BOT_FOUND,Q.TOP_WINDOW_ID)}}function n(){var e=(0,T.getKcConfig)(),t="embedded"===(0,T.getConfig)("kcDisplayType"),n=e&&e.enabled,r=(0,T.getConfig)("enableTag")&&(0,T.getConfig)("widgetEnabled")&&C.UserData.isUser(),o=r&&n&&(0,T.isIframe)()&&t,i=Z.default.getBotConfig();return r&&!(0,T.isIframe)()&&(n||i&&i.enabled&&i.isEmbedded)||o}function r(){if(n()){var e=(0,T.getKcConfig)(),t=e.includePatterns,r=e.excludePatterns,i=window.location.href;return r&&r.length>0&&(0,N.matchUrl)(r,i)?void o():t&&0!==t.length?void(t&&t.length>0&&((0,N.matchUrl)(t,i)?l():o())):void l()}}function o(){if(n()){var e=document.getElementById("apt-widget");if(!e)return void x.logger.log("Couldn't find KC element when attempting to hide it.");E((0,$.getProduct)(w.eventTrackData[U.cacheGet](w.productIdParameter)))&&x.logger.reportToServer("Hiding KC bot"),e.style.display="none"}}function l(){if(n()){var e=document.getElementById("apt-widget");if(!e)return void x.logger.log("Couldn't find KC element when attempting to show it.");e.style.display=""}}function c(){R.forEach(function(e){e.call()})}function d(){(0,A.getGuideRefreshData)(),i(),k.internalEventListener.removeListener("pageview",d)}function m(e,t,n,r){var o={type:"APT_WIDGET_ENTRIES",entries:e,recommendationRuleSets:t,userData:n};x.logger.log("SDK Posting entries to KC"),v(o),fe((0,ne.getGlobalContext)()),ge(),r&&"function"==typeof r&&r({entries:e,userData:n})}function v(e,t){try{if(t){var n=(0,Y.getIframeData)(t);J.default.postBotEvent(n,e)}else B.postMessage(JSON.stringify(e),w.windowRef.location.href)}catch(e){x.logger.log("postToWidget "+e)}}function b(e,t){return{articleId:e.articleId,categoryId:e.categoryId,articleUrl:e.articleUrl,kcId:t,articleLink:e.articleLink}}function y(){C.UserData.getSessionId()}function O(e){if(e.origin===w.windowRef.location.origin&&!(ie.indexOf(e.data.name)<0)){if(!e.data.messageId)return void x.logger.log("Web SDK skipping event without message id "+JSON.stringify(e.data));if(P[e.data.messageId])return void x.logger.log("Web SDK skipping handled message with id "+e.data.messageId);if((0,T.isIframe)()&&"APT_WIDGET_LOADED"!==e.data.name)return void window.top.postMessage(Object.assign({},e.data,{iframeId:(0,G.getIframeId)()}),window.top.location.href);switch(P[e.data.messageId]=!0,e.data.name){case"apt_get_engagement":var t=e.data,n=t.categoryId,r=t.recommendedId;if(w.windowRef.sessionStorage.setItem("apt.kcCatId",n),le.setRecommendedId(r),x.logger.log("SDK received activate engagement message"),e.data.absoluteTargetUrl){var o=(0,_.resolveUrlWithPlaceholders)(w.windowRef.location.href,e.data.absoluteTargetUrl);o!==w.windowRef.location.href?((0,A.saveOnDemandGuideId)(e.data.engId),k.internalEventListener.addListener("pageview",d),w.windowRef.location.href=o):a(e.data.engId,e.data.isPreview,K,n,r)}else a(e.data.engId,e.data.isPreview,K,n,r);return void y();case"APT_WIDGET_LOADED":return x.logger.log("SDK received KC loaded"),void(e.data.error?x.logger.logInternalError(new Error("KC failed to load due to error"),e.data.error):(k.internalEventListener.dispatchEvent("kcTriggered",{kcId:K}),c()));case"apt_send_feedback":return x.logger.log("SDK received send feedback message"),e.data.feedbackObj&&L.api.feedback(Object.assign(e.data.feedbackObj,{kcId:K})),void y();case"apt_search_articles":return x.logger.log("SDK received search articles"),(e.data.searchTerms||""===e.data.searchTerms)&&ce.searchArticles(w.eventTrackData.data[w.productIdParameter],w.eventTrackData.data[w.aptrinsicIdParam],e.data.searchTerms,e.data.labels,e.data.url,K,e.data.iframeId),y(),void(e.data.searchTerms&&k.internalEventListener.dispatchEvent("kcSearch",{searchTerms:e.data.searchTerms,kcId:K}));case"apt_get_article":x.logger.log("SDK get article by id");var i=e.data,l=i.id,u=i.title,p=i.propertyGroupId;return e.data.id&&ce.getArticleById(w.eventTrackData.data[w.productIdParameter],w.eventTrackData.data[w.aptrinsicIdParam],l,p,u,e.data.iframeId),void y();case"apt_get_user_data":return void x.logger.log("SDK received get user data message");case"apt_track_internal_article":return x.logger.log("SDK received track internal article message"),(0,M.trackArticleClick)(e.data.articleId,e.data.categoryId,e.data.articleUrl,K,e.data.recommendedId,s),k.internalEventListener.dispatchEvent("articleView",b(e.data,K)),void y();case"apt_kc_func_click":x.logger.log("SDK received call javascript function");var f=(0,T.getConfig)("kcAllowedFuncNames");return(0,N.isEmptyArr)(f)||f.indexOf(e.data.funcName)<0?void x.logger.logInternalError(new Error("tried to executed function not in the allow list, function name:"+e.data.funcName)):(e.data.funcName&&(0,F.executeFunctionByName)(e.data.funcName),void y());case"apt_kc_link_click":if(x.logger.log("SDK received link click"),(0,M.trackWebLinkClick)(e.data.webLinkId,K,e.data.recommendedId,s),e.data.linkObj){var g=(0,_.resolveUrlWithPlaceholders)(document.location.href,e.data.linkObj.url);"CURR_TAB"===e.data.linkObj.target?document.location.href=g:window.open(g,"_blank","noopener")}return void y();case re:var h=e.data,m=h.articleId,v=h.articleUrl,E=h.articleTitle,S=h.articleProvider,C=h.propertyGroupId,I=h.recommendedId,O={articleId:m,articleUrl:v,articleProvider:S,articleTitle:E,propertyGroupId:C,recommendedId:I};x.logger.log("SDK received track external article message"),(0,M.trackExternalArticleClick)(K,C,O),k.internalEventListener.dispatchEvent("articleView",b(e.data,K)),y();case oe:var D=e.data.message;x.logger.log("Widget log: "+D);case"apt_tracking_toggle_widget":x.logger.log("SDK received track toggle widget");var B=e.data,R=B.isOpen,U=B.shouldTrack,j=B.iframeId,H=de!==R;return U&&H&&((0,M.trackToggleWidget)(K,R),k.internalEventListener.dispatchEvent(R?"kcOpened":"kcClosed",{kcId:K})),j?J.default.setBotIsOpen(R,j):de=R,void y()}}}var D=this,B=void 0,R=[],P={},K=void 0,q=!1,X=!1,ae=!1,de=!1,ue=null,pe="",fe=e(te.getGlobalContextMessage),ge=e(te.getUrlMessage);this.handleIncomingBotEvents=function(){w.windowRef.addEventListener("message",O,!1)},this.initWidget=function(e,o,i,a){try{if(!n())return;if(X=!0,x.logger.log("SDK Initializing KC with config "+JSON.stringify(e,null,2)),K!==e.initialConfig.kcId&&(de=!1),K=e.initialConfig.kcId,le.setIsDefaultKc(!i),le.setKcId(K),w.windowRef.addEventListener("message",O,!1),!document.querySelector("#apt-widget")){q=!1,ue=null;var s=document.createElement("div");s.setAttribute("id","apt-widget"),s.classList.add("apt-widget-top-container"),(0,T.getBody)().appendChild(s),x.logger.log("SDK Created KC container")}var l=e.initialConfig.windowSettings.embedKCSettings.elementSelector.cssSelector;if(e.initialConfig=p(e.initialConfig,ue),e.contentProxyDomain=(0,T.getConfig)("contentProxyDomain"),e.initialConfig.isEmbedded&&l){var c=(0,T.getConfig)("kcPositionType");(0,j.injectWidgetToTargetElement)(l,a,{isNewAPI:se,positionType:c,kcId:e.initialConfig.kcId},{onClick:ce.toggleBot,onFailed:function(){q=!1,X=!1,ue=null},onFound:function(){q=!0},onDone:function(n){ue=n,e.initialConfig=p(e.initialConfig,ue),t((0,T.getAssetEndpoint)("widget"),e)}})}else t((0,T.getAssetEndpoint)("widget"),e);o||(r(),k.internalEventListener.addListener("pageview",function(){r()})),k.internalEventListener.addListener(ee.GLOBAL_CONTEXT_CHANGED,fe),k.internalEventListener.addListener("pageview",ge)}catch(e){x.logger.logInternalError(e,"cannot start kc widget")}},this.clearWidgetLoadQueue=function(){R=[]},this.checkIsInProgress=function(){return X},this.checkIsInitialized=function(){return q&&!!document.querySelector("#apt-widget")},this.cleanWidget=function(){D.clearWidgetLoadQueue(),q=!1,X=!1,ue=null},this.removeWidget=function(){P={},D.cleanWidget();var e=document.querySelector(".apt-widget-frame");e&&e.parentNode.removeChild(e);var t=document.getElementById("apt-widget");t&&(k.internalEventListener.removeListener(ee.GLOBAL_CONTEXT_CHANGED,fe),k.internalEventListener.removeListener("pageview",ge),t.parentNode.removeChild(t),clearInterval(void 0),E((0,$.getProduct)(w.eventTrackData[U.cacheGet](w.productIdParameter)))&&x.logger.reportToServer("Removing KC bot"))},this.updatePositionForEmbeddeBot=function(){var e=(0,T.getKcConfig)(),t=(0,T.getConfig)("kcPositionType");v({type:"APT_WIDGET_EMBEDDED_POSITIONS",calculatedPosition:u(ue,e.windowSettings.embedKCSettings.positionSettings,{horizontalAlignment:e.windowSettings.embedKCSettings.horizontalAlignment,verticalAlignment:e.windowSettings.embedKCSettings.verticalAlignment},t)})},this.updateWidgetConfig=function(){if(n()){v({type:"APT_WIDGET_CONFIG",config:p((0,T.getKcConfig)(),ue),shouldResetState:C.UserData.getUserId()!==pe}),pe=C.UserData.getUserId()}},this.fetchEntriesById=function(e,t,n,r,o){function i(t){if(!t)return void(r&&"function"==typeof r&&r(t));var n=Object.assign({},t);if(!(0,V.validateContentChecksum)(e,n))return void("function"==typeof o&&o("Checksum does not match when fetching knowledge center entries"));r&&"function"==typeof r&&r(t)}var a=(0,M.getUrl)(T.getWidgetContentEndpoint+"/"+t+"/"+e,{ai:n});I.AjaxUtil.getData(a,i,null,function(){"function"==typeof o&&o("Error occurred while fetching knowledge center entries"),x.logger.logInternalError("Error occurred while fetching KC entries")})},this.fetchEntriesAndSendToWidget=function(e,t,r,o){try{var i=function(e){m(e.entries,e.recommendationRuleSets,e.userData,r),ge()};if(!q||!n())return;x.logger.log("SDK Fetching KC entries");var a=(0,T.getKcConfig)(),s=a.kcId;(0,T.isIframe)()?W.default.getBotContent(s,function(e){var t=S(e,1),n=t[0],r=n.response,a=n.error;r?i(r):o(a)}):D.fetchEntriesById(s,e,t,i,o)}catch(e){x.logger.logInternalError(new Error("KC - fetch entries - "+e))}},this.registerAfterWidgetLoad=function(e){"function"==typeof e&&R.push(e)},this.searchArticles=function(e,t,r,o,i,a,s){if(n()){var l=o&&Array.isArray(o)&&o.length>0?o.join():"";x.logger.log("SDK searching Articles");var c=(0,H.maskUrl)(null,null,i,null,null,null,null);i=S(c,3)[2],i=(0,T.getConfig)("overrideBotSearchContextUrl")||i;var d=(0,M.getTrackingPayload)();Object.assign(d,{searchTerm:r,labels:l,url:i,ai:t});var u=(0,M.getUrl)(T.getWidgetDocsEndpoint+"/"+e+"/"+a,d);I.AjaxUtil.getData(u,function(e){if(e){(0,N.isNotEmptyArr)(e)&&e[0].propertyGroupId&&(e[0].propertyGroupId,(0,$.getProduct)(w.eventTrackData[U.cacheGet](w.productIdParameter)));var t={type:"APT_WIDGET_SEARCH_RESULTS",articles:e};x.logger.log("SDK Posting articles to KC"),v(t,s)}},null,function(){x.logger.logInternalError("Error occurred while searching KC articles"),v({type:"APT_WIDGET_SEARCH_RESULTS_FAILED"},s)})}},this.getArticleById=function(e,t,r,o,i,a){if(n()){x.logger.log("SDK get Article by id");var s=(0,M.getTrackingPayload)();Object.assign(s,{propertyGroupId:o,articleId:r,ai:t,art:i});var l=(0,M.getUrl)(T.getWidgetSingleDocEndpoint+"/"+e+"/"+K,s);I.AjaxUtil.getData(l,function(t){if(t&&(!t.propertyGroupId||t.propertyGroupId===(0,$.getProduct)(e))){var n={type:"APT_GET_ARTICLE",article:t};x.logger.log("SDK Posting article to KC"),v(n,a)}},null,function(){x.logger.logInternalError("Error occurred while fetching article by id:"+r),v({type:"APT_GET_ARTICLE_FAILED"},a)})}},this.updateEmbeddedMappedElement=function(e){ue=e},this.getEmbeddedMappedElement=function(){return ue},this.toggleBot=function(){de?ce.close(!0):ce.open()},this.setIsOpen=function(e){de=e},this.open=function(){if(D.checkIsInitialized()){"embedded"===(0,T.getConfig)("kcDisplayType")&&D.updatePositionForEmbeddeBot(),v({type:"APT_WIDGET_OPEN"}),ae=!0}},this.close=function(e){try{e&&de&&((0,T.isIframe)()?W.default.trackBotToggle(K,!1):(0,M.trackToggleWidget)(K,!1)),v({type:"APT_WIDGET_CLOSE"}),ae=!1}catch(e){x.logger.log("clsoing bot "+e)}},this.checkIsShown=function(){return ae},this.postToWidget=v,this.addClickListenerToElement=function(e){(0,N.addEventListener)(e,"click",ce.open)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=window.MutationObserver||window.WebKitMutationObserver;if((0,h.getConfig)("angularMutationObserver")&&window.Zone){var t=window.Zone.__symbol__("MutationObserver"),n=window.Zone.__symbol__("WebkitMutationObserver");e=window[t]||window[n]||window.MutationObserver||window.WebKitMutationObserver}return e}function i(){return!(0,h.getConfig)("badgeUseInterval")&&((0,d.detectIE)()>=11||m)}function a(e,t){y.forEach(function(n){try{(n.validateBeforeChange&&n.validateBeforeChange(e,t)||t)&&n.onChangeCallback(e,t)}catch(e){u.logger.logInternalError(e,"failed to run on change for observer")}}),E=[]}function s(){return function(e){try{return e.beforeValidator()}catch(e){return u.logger.logInternalError(e,"failed to validate if need to run observer"),!1}}}function l(){if(!b)return!1;try{var e=o();C=new e(function(e){if(y.some(s())){var t=e.some(function(e){var t=e.attributeName,n=e.target,r=e.type,o="attributes"===r&&("style"===t||"class"===t),i=n.getAttribute("class")||"",a=n.getAttribute("id")||"",s=-1===i.indexOf("apt")&&-1===a.indexOf("apt");return s&&"attributes"!==r||s&&o});E=E.concat(e),w(t)}}),C.observe((0,h.getBody)(),v)}catch(e){u.logger.logInternalMessage(e,"failed to observed mutation")}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getNativeMutationObserver=o,t.checkMutationObserverIsSupported=i;var d=n(10),u=n(3),p=n(0),f=n(15),g=n(132),h=n(2),m=window.MutationObserver||window.WebKitMutationObserver,v={attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]},b=(0,d.detectIE)()>=11||m,y=[],E=[],S={},C=void 0,w=(0,p.debounce)(function(e){a(E,e)},300),T=function e(t,n,o,i){r(this,e),this.id=t,this.beforeValidator=n,this.onChangeCallback=o,this.validateBeforeChange=i},x=function(){function e(){r(this,e)}return c(e,[{key:"addObserver",value:function(e,t,n){y.length<1&&l();var r=f.UUIDGenerator.generateV4Id();return y.push(new T(r,e,t,n)),r}},{key:"removeObserver",value:function(e){var t=(0,g.findIndex)(y,function(t){return t.id===e});t>-1&&y.splice(t,1),y.length<1&&C.disconnect()}},{key:"addPXElementObserver",value:function(e,t,n){this.addElementObserver(e,t,n,!0)}},{key:"addElementObserver",value:function(e,t,n,r){try{var i=o(),a=new i(function(e){e.some(function(e){var t=e.attributeName,n=e.target,o=e.type,i="attributes"===o&&("style"===t||"class"===t),a=n.getAttribute("class")||"",s=n.getAttribute("id")||"",l=r||-1===a.indexOf("apt")&&-1===s.indexOf("apt");return l&&"attributes"!==o||l&&i})&&n(e)});a.observe(t,{childList:!0,subtree:!0,attributeFilter:["style","class"]}),S[e]=a}catch(e){u.logger.logInternalMessage(e,"failed to observed mutation for element: "+t)}}},{key:"removeElementListener",value:function(e){var t=S[e];t&&(t.disconnect(),delete S[e])}}]),e}(),k=new x;t.default=k},function(e,t,n){"use strict";var r,o,i,a,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(8),c=n(0),d=n(7),u=n(2);!function(n){if("object"===s(t)&&void 0!==e)e.exports=n();else{o=[],r=n,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}}(function(){return function e(t,n,r){function o(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof a&&a;if(!l&&c)return a(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},s=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],o=0,i=n.length;o<i;o++)this.push(n[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],c=function(){return new s(this)};if(i.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==a(this,e)},l.add=function(){var e,t=arguments,n=0,r=t.length,o=!1;do{e=t[n]+"",-1===a(this,e)&&(this.push(e),o=!0)}while(++n<r);o&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,r=0,o=n.length,i=!1;do{for(e=n[r]+"",t=a(this,e);-1!==t;)this.splice(t,1),i=!0,t=a(this,e)}while(++r<o);i&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var d={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",d)}catch(e){-2146823252===e.number&&(d.enumerable=!1,n.defineProperty(t,"classList",d))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(window.self))},{}],2:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var i=a[r]||a._default,s=i[0],l=i[1],c=i[2],o=t.createElement("div");for(o.innerHTML=l+e+c;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var d=t.createDocumentFragment();o.firstChild;)d.appendChild(o.removeChild(o.firstChild));return d}t.exports=r;var o,i=!1;"undefined"!=typeof document&&(o=document.createElement("div"),o.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',i=!o.getElementsByTagName("link").length,o=void 0);var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.polyline=a.ellipse=a.polygon=a.circle=a.text=a.line=a.path=a.rect=a.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(e,t,n){function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var l=i[a],c=Object.getOwnPropertyDescriptor(o,l);void 0!==c&&c.enumerable&&(n[l]=o[l])}}return n}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}t.exports={assign:r,polyfill:o}},{}],4:[function(e,t,n){e("classlist-polyfill"),e("es6-object-assign").polyfill();var r=e("domify"),o=function(e){if(void 0!==e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}return""},i=function(e,t){if("string"==typeof t&&0!==t.length)for(var n=t.split(" "),r=0;r<n.length;r++){var o=n[r];o.length&&e.classList.add(o)}},a=function(){for(var e=document.createElement("div"),t=[{styleName:"animation",eventName:"animationend"},{styleName:"WebkitAnimation",eventName:"webkitAnimationEnd"},{styleName:"MozAnimation",eventName:"animationend"},{styleName:"OAnimation",eventName:"oanimationend"},{styleName:"msAnimation",eventName:"MSAnimationEnd"}],n=0;n<t.length;n++)if(void 0!==e.style[t[n].styleName])return t[n].eventName;return!1}(),s={vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},p={},f=1,g=!1,h={open:function(e){var t=function(e){console.warn('The "'+e+'" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),console.warn("See http://github.hubspot.com/vex/api/advanced/#options")};e.css&&t("css"),e.overlayCSS&&t("overlayCSS"),e.contentCSS&&t("contentCSS"),e.closeCSS&&t("closeCSS");var n={};n.id=f++,p[n.id]=n,n.isOpen=!0,n.close=function(){function e(e){var t=n.getPropertyValue(e+"animation-name"),r=n.getPropertyValue(e+"animation-duration");return!!t&&"none"!==t&&!!r&&"0s"!==r}if(!this.isOpen)return!0;var t=this.options;if(g&&!t.escapeButtonCloses)return!1;if(!1===function(){return!t.beforeClose||t.beforeClose.call(this)}.bind(this)())return!1;this.isOpen=!1;var n=window.getComputedStyle(this.contentEl),r=e("");r=r||e("-webkit-"),r=r||e("-moz-"),r=r||e("-o-");var o=function e(){this.rootEl.parentNode&&(this.rootEl.removeEventListener(a,e),delete p[this.id],this.rootEl.parentNode.removeChild(this.rootEl),t.afterClose&&t.afterClose.call(this),0===Object.keys(p).length&&(0,u.getBody)().classList.remove(s.open))}.bind(this);return a&&r?(this.rootEl.addEventListener(a,o),this.rootEl.classList.add(s.closing)):o(),!0},"string"==typeof e&&(e={content:e}),e.unsafeContent&&!e.content?e.content=e.unsafeContent:e.content&&(e.content=o(e.content));var m=n.options=Object.assign({},h.defaultOptions,e),v=n.rootEl=document.createElement("div");v.classList.add(s.vex),i(v,m.className);var b=n.overlayEl=document.createElement("div");b.classList.add(s.overlay),i(b,m.overlayClassName),m.overlayClosesOnClick&&b.addEventListener("click",function(e){e.target===b&&n.close()}),v.appendChild(b);var y=n.contentEl=document.createElement("div");if(y.classList.add(s.content),i(y,m.contentClassName),y.appendChild(m.content instanceof window.Node?m.content:r(m.content)),v.appendChild(y),m.showCloseButton){var E=n.closeEl=document.createElement("div");E.classList.add(s.close),i(E,m.closeClassName),E.setAttribute("tabindex",l.MAX_TAB_INDEX),E.setAttribute("role","button"),E.setAttribute("aria-label","close"),(0,d.disableFocusOnClick)(E,y),(0,c.addEnterKeyDownListener)(E,function(){return E&&E.click()}),E.addEventListener("click",n.close.bind(n)),y.appendChild(E)}return document.querySelector(m.appendLocation).appendChild(v),m.afterOpen&&m.afterOpen.call(n),e.disableTransitionEffect&&v.classList.add("apt-disable-transition"),y.setAttribute("tabindex",l.TAB_INDEX_START-1),e.disableAutoFocus||(0,d.focusElement)(y),e.enableModalBodyScroll&&(0,u.getBody)().classList.add(s.open),n},close:function(e){var t;if(e.id)t=e.id;else{if("string"!=typeof e)throw new TypeError("close requires a vex object or id string");t=e}return!!p[t]&&p[t].close()},closeTop:function(){var e=Object.keys(p);return!!e.length&&p[e[e.length-1]].close()},closeAll:function(){for(var e in p)this.close(e);return!0},getAll:function(){return p},getById:function(e){return p[e]}};window.addEventListener("keyup",function(e){27===e.keyCode&&(g=!0,h.closeTop(),g=!1)}),window.addEventListener("popstate",function(){h.defaultOptions.closeAllOnPopState&&h.closeAll()}),h.defaultOptions={content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",overlayClassName:"",contentClassName:"",closeClassName:"",closeAllOnPopState:!0},Object.defineProperty(h,"_escapeHtml",{configurable:!1,enumerable:!1,writable:!1,value:o}),h.registerPlugin=function(e,t){var n=e(h),r=t||n.name;if(h[r])throw new Error("Plugin "+t+" is already registered.");h[r]=n};var m=h;t.exports=m},{"classlist-polyfill":1,domify:2,"es6-object-assign":3}]},{},[4])(4)})},function(e,t,n){"use strict";function r(e,t){var n=e.substring(d.length),r=n[0];if(-1===["/","?","#"].indexOf(r))return t;var o=document.createElement("a");o.href=t;var i=decodeURIComponent(o.host.endsWith(":80")||o.host.endsWith(":443")?o.hostname:o.host),a=o.protocol+"//";switch(r){case"/":return""+a+i+n;case"?":return""+a+i+o.pathname+n;case"#":return""+a+i+o.pathname+o.search+n;default:return t}}function o(e,t){if(t.startsWith(d))return r(t,e);if(-1===t.indexOf(l))return t;if(t===c)return e;var n=document.createElement("a");n.href=e,0===t.indexOf(c)&&(t=n.protocol+"//"+t);var o=document.createElement("a");o.href=t,p(o.pathname,o.hash)&&(o.pathname+=o.hash,o.hash=""),p(n.pathname,n.hash)&&(n.pathname+=n.hash,n.hash="");var a=decodeURIComponent(n.host.endsWith(":80")||n.host.endsWith(":443")?n.hostname:n.host),s=decodeURIComponent(o.host.endsWith(":80")||o.host.endsWith(":443")?o.hostname:o.host),f=i(a,s,"."),g=i(decodeURIComponent(n.pathname),decodeURIComponent(o.pathname),"/"),h=!1;!n.hash.startsWith("#/")&&n.hash.split("/").length>1&&(n.hash=n.hash.replace("/","#")),!n.hash.startsWith("#/")&&o.hash.split("/").length>1&&(o.hash=o.hash.replace("/","#"),h=!0);var m=i(n.hash,o.hash,"#");h&&(m=m.replace("#","/"));var v="",b="",y="";if(n.search||o.search&&o.search.substring(1)!==c)if(n.search){v=decodeURIComponent(n.search).substring(1).split("&"),b=decodeURIComponent(o.search).substring(1).split("&");for(var E=[],S=0;S<b.length;S++){var C=i(v[S],b[S],"=");E.push(C)}y=E.join("&")}else y=o.search.substring(1);return u(o.protocol,f,g,y,m)}function i(e,t,n){if(!t)return"";if(!e)return t;if(t===n)return t;var r=t.split(n),o=e.split(n);if(1===r.length&&r[0]===c||2===r.length&&""===r[0]&&r[1]===c)return e.charAt(0)===n?e.substring(1):e;for(var i=[],a=0;a<r.length;a++){var s=o[a],l=r[a];s&&l&&l===c?i.push(s):l&&i.push(l)}return i.join(n)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=s.documentRef.createElement("div");return n.innerHTML=e,n.querySelectorAll("a").forEach(function(e){var n=o(window.location.href,e.href);e.href=t?t(n):n}),n.innerHTML}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveUrlWithPlaceholders=o,t.resolveUrlsWithPlaceholdersInHTML=a;var s=n(4),l="px-auto-resolve",c="$px-auto-resolve",d="$px-auto-resolve-prefix",u=function(e,t,n,r,o){var i=n&&"/"!==n?"/"+n:"/"===n?"/":"",a=r?"?"+r:"",s="";return o&&(s=o.startsWith("#")?o:"#"+o),e+"//"+t+i+a+s},p=function(e,t){return t&&(0===t.indexOf("#/")||0===t.indexOf("#!/"))&&e&&-1!==e.indexOf("/",e.length-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(2),i=window,a=function(e){function t(e,t,n,r,o){var a=[],l=i.getComputedStyle(e);switch(e.style.position="fixed",r=r||0,t.toLowerCase()){case"left":e.style.right="",e.style.left=10+o+"px",a.push("left");break;case"right":e.style.left=window.innerWidth-parseInt(l.width,10)-10+o+"px",e.style.right="",a.push("right");break;case"center":default:e.style.right="",e.style.left="calc(50% - "+(0-o+parseInt(l.width,10)/2)+"px)",a.push("center")}switch(n.toLowerCase()){case"top":e.style.bottom="",e.style.top=10+r+s+"px",a.push("top");break;case"bottom":e.style.bottom=10-r+"px",e.style.top="auto",a.push("bottom");break;case"center":default:e.style.bottom="",e.style.top="calc(50% - "+(0-r+parseInt(l.height,10)/2)+"px)",a.push("center")}return a}function n(e,t,n,i,a,l,c,d,u,p){if(!t||void 0===t)return null;var f=t.isDom?t.element.getBoundingClientRect():t.elementRect,g=e.getBoundingClientRect(),h=t&&f,m=t&&h.height,v=t&&h.width,b=g.height,y=g.width,E=(0,r.getPageWidth)(),S=(0,r.getFullPageHeight)(),C=null,w=null;switch(n.toLowerCase()){case"left":C=h.left,c||(C-=y+("center"===i?10:0));break;case"right":C=h.left+h.width,c||(C+="center"===i?10:0);break;case"center":C=Math.abs(h.left+v/2)-(c?0:y/2);break;default:throw new Error("unsupported horizontal position "+n)}switch(i.toLowerCase()){case"top":w=h.top-(c?0:b+10);break;case"center":w=h.top+m/2-(c?0:b/2);break;case"bottom":w=h.top+m+(c?0:10);break;default:throw new Error("unsupported vertical position "+i)}var T=C<0||C+y>E;if(!d&&T)return null;w+=isNaN(p)?window.pageYOffset:p;var x=w+b>S||w<s;if(!d&&x)return null;var k=w+a;if(!(0,o.getConfig)("enableModalBodyScroll")){var I=(0,o.getBody)().getBoundingClientRect(),A=I.top;A>0&&(k-=A)}k+="px";var O=C+l+"px";return u?e.style.setProperty("transform","translate3d("+O+", "+k+", 0px"):(e.style.left=O,e.style.top=k),[n,i]}var a=this,s=e||0;this.setDefaultTopOffset=function(e){s=e||0},this.positionElement=function(e,r,o,i,a,s,l,c,d,u){return a||0===a||(a=0),s||0===s||(s=0),r?n(e,r,o,i,a,s,l,c,d,u):t(e,o,i,a,s)},this.getElementPosition=function(e){var t=e.getBoundingClientRect();return[t.top,t.left,t.bottom,t.right]},this.getElementDataPosition=function(e){return e.isDom?a.getElementPosition(e.element):[e.elementRect.top,e.elementRect.left,e.elementRect.bottom,e.elementRect.right]}};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){(0,P.findTarget)(e,t.target,function(n){t.target=n,n&&ae(e,t)})}function a(){var e=(0,j.getConfig)("badgeRepositionInterval");return(0,G.isNullOrUndefined)(e)&&(e=500),e}function s(){var e=Object.values(ee);re.forEach(function(e){var t=e.sdkRules,n=e.badgeSettings.id,r=e.engagementId,o={url:(0,G.getPageUrl)()};if((0,G.isBlank)(t)||(0,Y.matchMultiTypeRules)(JSON.parse(t),o)){if(!ee[n]){e.badgeSettings.engagementId=r;var i=ae(e.badgeSettings);i&&(ee[n]=i)}}else ee[n]&&(ee[n].destroy(),delete ee[n])});var t=Object.values(ee),n=(0,J.checkMutationObserverIsSupported)();(0,j.isIframe)()?(ne.observe((0,j.getBody)(),de),p()):ne&&n?e.length>0&&0===t.length?(ne.disconnect(),p(),A()):0===e.length&&t.length>0?(ne.observe((0,j.getBody)(),de),p()):e.length>0&&t.length>0&&p():d()}function l(){try{var e=(0,J.getNativeMutationObserver)();ne=new e(function(e){Object.values(ee).length>0||(0,j.isIframe)()?e.some(function(e){var t=e.attributeName,n=e.target,r=e.type,o="attributes"===r&&("style"===t||"class"===t),i=n.getAttribute("class")||"",a=-1===i.indexOf("apt")&&-1===i.indexOf("px-");return a&&"attributes"!==r||a&&o})&&((0,j.isIframe)()?u():(ie=ie||ue())()):ne.disconnect()}),ne.observe((0,j.getBody)(),de)}catch(e){M.logger.logInternalError(new Error("Mutation Observer",e))}}function c(){oe&&clearInterval(oe)}function d(){c(),oe=setInterval(function(){var e=Object.values(ee);e.length>0||(0,j.isIframe)()?p():c()},2e3)}function u(){if((0,j.isIframe)()){var e=Object.values(ee);if(e.length>0){var t=e.map(function(e){var t=e.elementSelector,n=t.matchCssSelector,r=t.selector,o=t.cssSelector,i=t.matchTextRule,a=t.textRule,s=t.htmlTextRule,l=s||JSON.parse(a)||{},c=l.operator,d=l.values,u={matchCssSelector:n,cssSelector:r||o,matchTextRule:i,textRuleOperator:c,textRuleValues:d},p=(0,Q.findElementInWindow)(u,(0,j.getBody)(),!1);return Object.assign({},e,{isExist:!!p})});W.default.broadcastBadgesStatuses(t)}}}function p(){(0,j.isIframe)()?u():le(Object.values(ee))}function f(){ne.disconnect(),$.internalEventListener.removeListener("pageview",s)}function g(){var e=(0,J.checkMutationObserverIsSupported)();(0,j.isIframe)()?e?l():d():(I(),0===re.length?$.internalEventListener.removeListener("pageview",s):re.length>0&&(e?l():d(),$.internalEventListener.addListener("pageview",s)))}function h(e){var t=B.eventTrackData[R.cacheGet](B.sessionIdParam),n=D.default.fetchBadges(t);b(e,n),D.default.storeBadges(t,n,!0)}function m(e,t,n){D.default.setIsPreview(n);var r=void 0;if(t){r={};for(var o=0;o<t.length;o++)r[t[o].badgeSettings.id]={index:o,badge:t[o]}}var i=!1;return e.forEach(function(o,a){try{var s=o.badgeSettings,l=o.engagementId,c=o.sdkRules,d=s.id,u=ee[d];u&&u.destroy(),r&&t.splice(r[o.badgeSettings.id].index,1,o);var p={url:(0,G.getPageUrl)()};if((0,G.isBlank)(c)||(0,Y.matchMultiTypeRules)(JSON.parse(c),p)){s.engagementId=l,s.clickCallback=n?s.clickCallback:h,s.executionId=o.executionId;var f=ae(s,null);f&&(ee[d]=f)}else M.logger.log("SDK rules did not match, rules: "+c+", current URL: "+p);i||e.length-1!==a||(v(e),g(le),i=!0)}catch(e){M.logger.logInternalError(e)}}),Object.values(ee)}function v(e){e.forEach(function(e){var t=e.badgeSettings.id;re.filter(function(e){return e.badgeSettings.id===t}).length>0||re.push(e)})}function b(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=ee[e],r=0;r<t.length;r++)t[r].badgeSettings.id==e&&t.splice(r,1);for(var o=0;o<re.length;o++)re[o].badgeSettings.id==e&&re.splice(o,1);n&&(n.destroy(),delete ee[e])}function y(e){var t=e.removed,n=e.updated,r=B.eventTrackData[R.cacheGet](B.sessionIdParam),o=D.default.fetchBadges(r);(0,G.isNotEmptyArr)(t)&&t.forEach(function(e){return b(e,o)}),(0,G.isNotEmptyArr)(n)&&m(n,o),D.default.storeBadges(r,o,!0)}function E(){var e=B.eventTrackData[R.cacheGet](B.sessionIdParam),t=D.default.fetchBadges(e),n=Object.assign({},ee);if(!(0,G.isEmptyArr)(t)||!(0,G.isEmptyArr)(Object.keys(n))){var r=t.map(function(e){var t=e.badgeSettings,r=t.id,o=t.version;return delete n[r],{id:r,version:o}});r.concat((0,X.arrayFrom)(Object.values(n),function(e){var t=e.badgeAttr;return{id:t.id,version:t.version}}));var o=B.eventTrackData[R.cacheGet](B.aptrinsicIdParam),i={};Object.assign(i,B.eventTrackData[R.cacheGetAll]()),(0,G.addCacheBuster)(i);var a=j.refreshBadgeEndpoint+"?"+(0,G.convert2Parameters)((0,G.addParameters)(i,[]));H.AjaxUtil.postData(a,{sdkBadges:r,aptrinsicId:o},void 0,y,null,!0)}}function S(e,t){var n=j.badgeTrackEndpoint,r=[];r=(0,G.addParameters)(B.eventTrackData[R.cacheGetAll](),r),(0,G.addParameters)({ei:e.engagementId,ecoi:e.badgeSettings.deviceContentId||null,evi:e.badgeSettings.matchEventId||null,acci:t,exi:e.executionId,ext:(new Date).getTime(),at:"b",bi:e.badgeSettings.id},r);var o=(0,Z.getGlobalContext)();o&&(0,G.addParameters)({gcx:JSON.stringify(o)},r),n+="?"+(0,G.convert2Parameters)(r),H.AjaxUtil.getData(n)}function C(){clearInterval(fe),fe=null,T()}function w(){(0,j.isIframe)()||fe||(fe=setInterval(function(){if(0===D.default.getAllBadgesInIframes().length)return void C();(0,z.getRegisteredIframes)().forEach(function(e){var t=e.iframeId,n=e.iframe;if(D.default.getBadgesOfIframe(t).length>0){if(n.closed)return void k(t);K.default.getBadgesLocations(e,function(t){var n=L(t,1),r=n[0],o=e.domElement;r.badges.forEach(function(e){var t=ee[e.id];if(t){var n={rect:e.rect,isVisible:e.isVisible&&(0,G.isElementInIframeVisible)(e.rect,o),isExist:e.isExist,pageYOffset:window.pageYOffset};se(t,null,n)}}),0===r.badges.length&&k(e.iframeId)})}})},250))}function T(){(0,z.getRegisteredIframes)().forEach(function(e){k(e.iframeId)})}function x(e){ee[e]&&(ee[e].destroy(),delete ee[e])}function k(e){D.default.getBadgesOfIframe(e).forEach(function(e){x(e),D.default.removeBadgeFromIframe(e)}),re.forEach(function(e){var t=e.badgeSettings.id;if(!ee[t]){var n=ae(e.badgeSettings);n&&(ee[t]=n)}})}function I(){(0,z.getRegisteredIframes)().forEach(K.default.setBadgeObserver),$.internalEventListener.addListener("IFRAME_REGISTERED",K.default.setBadgeObserver)}function A(){(0,z.getRegisteredIframes)().forEach(K.default.unsetBadgeObserver),$.internalEventListener.removeListener("IFRAME_REGISTERED",K.default.setBadgeObserver)}function O(e,t){t.forEach(function(t){var n=t.id,r=t.isExist;if(D.default.addBadgeToIframe(e,n),r){if(!ee[n]){var o=re.find(function(e){return e.badgeSettings.id===n});if(o){var i=ae(o.badgeSettings);i&&(ee[n]=i)}}}else x(n)});var n=D.default.getAllBadgesInIframes(),r=D.default.getAllBadgesInIframes().length>0;0===t.length&&D.default.getBadgesOfIframe(e).length>0&&k(e),re.forEach(function(e){var t=e.badgeSettings.id;if(-1===n.indexOf(t))if(ee[t]){var r=ce();!ee[t].target&&r(ee[t])}else{var o=ae(e.badgeSettings);o&&(ee[t]=o)}}),r?w():C()}function N(){var e={};this.removeBadgeFromBadgesList=function(t){delete ee[t],delete e[t],re=Object.values(e)},this.addBadgeToBadgesList=function(t){void 0!==ee[t.id]&&void 0!==e[t.id]||(ee[t.id]=t,e[t.id]=t,re=Object.values(e),u())},this.getRenderedBadges=function(){return ee},this.getBadgesWithLocations=function(){return Object.values(ee).map(function(e){var t=e.elementSelector,n=t.matchCssSelector,r=t.selector,o=t.cssSelector,i=t.matchTextRule,a=t.textRule,s=t.htmlTextRule,l=s||JSON.parse(a)||{},c=l.operator,d=l.values,u={matchCssSelector:n,cssSelector:r||o,matchTextRule:i,textRuleOperator:c,textRuleValues:d},p=(0,Q.findElementInWindow)(u,(0,j.getBody)(),!1),f=void 0;if(p){var g=p.getBoundingClientRect(),h=(0,G.isElementVisible)(p,!0);f=Object.assign({},e,{rect:g,isVisible:h,isExist:!0})}else f=Object.assign({},e,{rect:{},isVisible:!1,isExist:!1});return f})}}Object.defineProperty(t,"__esModule",{value:!0}),t.badgeIframeHelper=void 0;var L=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.removeBadgeObserver=f,t.addBadgeObserver=g,t.drawBadges=m,t.removeBadge=b,t.setBadgeObserverForRegisteredIframes=I,t.unsetBadgeObserverForRegisteredIframes=A,t.updateBadgesFromIframe=O;var F=n(69),D=r(F),B=n(4),R=n(5),P=n(62),M=n(3),U=n(10),j=n(2),H=n(11),$=n(9),V=n(17),K=r(V),q=n(40),W=r(q),z=n(6),G=n(0),Y=n(54),X=n(12),J=n(30),Q=n(7),Z=n(19),ee={},te=void 0,ne=void 0,re=[],oe=void 0,ie=void 0,ae=function(e,t,n,r){var o=B.eventTrackData[R.cacheGet](B.sessionIdParam),i=t||new P.Badge(e),a=void 0,s=D.default.getIsPreview();if(!s){var l=e.id;if(!l)return void M.logger.log("renderBadge got wrong badge id: "+l);if(!(a=D.default.fetchBadges(o).filter(function(e){return e.badgeSettings.id===l})[0]))return void M.logger.log(new Error("No badge found in store while expecting to get badge id "+l))}if(r&&i.updateTargetData(n,r),i.render(),!s&&i.isRendered&&!a.wasViewed){a.wasViewed=!0,D.default.storeBadge(o,a);try{S(a)}catch(e){M.logger.logInternalError(e,"Error during tracking badge view "+i)}}return i},se=function(e,t,n){if(!e)return void M.logger.log("update badge was called with undefined "+e);n?e.isRendered?e.targetData.rect.top===n.rect.top&&e.targetData.rect.bottom===n.rect.bottom&&e.targetData.rect.left===n.rect.left&&e.targetData.rect.right===n.rect.right&&e.targetData.rect.height===n.rect.height&&e.targetData.rect.width===n.rect.width&&e.targetData.isVisible===n.isVisible&&e.targetData.pageYOffset===n.pageYOffset||(e.updateTargetData(t,n),e.scheduleUpdatePopper()):ae(e.badgeAttr,e,t,n):e.isRendered?e.scheduleUpdatePopper():i(e.badgeAttr,e)},le=function(e){return e.forEach(function(e){return se(e)})},ce=function(){var e=a();return(0,G.debounce)(function(e){se(e)},e)},de={attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]},ue=function(){var e=a();return(0,G.debounce)(p,e)},pe=function(){function e(){o(this,e)}return _(e,null,[{key:"init",value:function(){if((0,j.getConfig)("enableBadge")&&!(0,j.isIframe)()){te=setInterval(E,1e3*(0,j.getConfig)("badgeRefreshInterval")*60);var e=B.eventTrackData[R.cacheGet](B.sessionIdParam),t=D.default.fetchBadges(e);t.length<1||(re=t,g(le),(0,U.addDOMReadyListener)(m,t))}}},{key:"addBadges",value:function(e){try{if(!Array.isArray(e)||e.length<1)return;v(e),g(le);var t=B.eventTrackData[R.cacheGet](B.sessionIdParam);D.default.storeBadges(t,e),m(e)}catch(e){M.logger.logInternalError(e)}}},{key:"removeAllBadges",value:function(){var e=B.eventTrackData[R.cacheGet](B.sessionIdParam),t=D.default.fetchBadges(e);if((0,G.isNotEmptyArr)(t)){(0,X.arrayFrom)(t).forEach(function(e){b(e.badgeSettings.id,t)})}D.default.storeBadges(e,t,!0),D.default.clearAll()}}]),e}();t.default=pe;var fe=void 0;t.badgeIframeHelper=new N},function(e,t,n){"use strict";function r(e,t,n,r,s){var l=r&&r.messageTime||3e3,c=(0,i.getConfig)("framesetMode")?"html":"body";switch(e){case"warning":a.dialog.alert({appendLocation:c,afterOpen:function(){(0,i.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex");var e=this;setTimeout(function(){e.close()},l),(0,o.addEventListener)(this.overlayEl,"click",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mousedown",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mouseup",function(e){e.stopImmediatePropagation()})},afterClose:function(){(0,i.getBody)().classList.remove("apt-vex")},overlayClassName:"apt-wrapper",className:"apt-wrapper vex-theme-default vex-content-warning",contentClassName:"apt-wrapper",closeClassName:"apt-wrapper",unsafeMessage:'<div><div class="message-wrapper"><div class="apt-message-icon warning" ></div><div>'+t+"</div></div></div>"});break;case"success":a.dialog.alert({appendLocation:c,afterOpen:function(){(0,i.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex");var e=this;setTimeout(function(){e.close()},l),(0,o.addEventListener)(this.overlayEl,"click",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mousedown",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mouseup",function(e){e.stopImmediatePropagation()})},afterClose:function(){(0,i.getBody)().classList.remove("apt-vex")},overlayClassName:"apt-wrapper",className:"apt-wrapper vex-theme-default vex-content-success",contentClassName:"apt-wrapper",closeClassName:"apt-wrapper",unsafeMessage:'<div><div class="message-wrapper"><div class="apt-message-icon success" ></div><div>'+t+"</div></div></div>"});break;case"error":a.dialog.alert({appendLocation:c,afterOpen:function(){(0,i.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex");var e=this;r&&r.autoHideFalse||setTimeout(function(){e.close(),n&&n()},l),(0,o.addEventListener)(this.overlayEl,"click",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mousedown",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mouseup",function(e){e.stopImmediatePropagation()})},afterClose:function(){(0,i.getBody)().classList.remove("apt-vex")},overlayClassName:"apt-wrapper",className:"apt-wrapper vex-theme-default vex-content-error",contentClassName:"apt-wrapper",callback:function(e){e&&n&&n()},closeClassName:"apt-wrapper",unsafeMessage:'<div><div class="message-wrapper"><div class="apt-message-icon alert" ></div><div>'+t+"</div></div></div>"});break;case"confirm":var d="apt-wrapper";r&&r.contentClass&&(d+=" "+r.contentClass),a.dialog.buttons.YES.text=r&&r.buttonText||"OK",a.dialog.buttons.NO.text=r&&r.buttonNoText||"Cancel",a.dialog.confirm({appendLocation:c,afterOpen:function(){(0,i.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex"),r&&r.showCancel&&this.rootEl.classList.add("apt-confirm-show"),this.contentEl.querySelectorAll(".vex-dialog-button").forEach(function(e){(0,o.addEventListener)(e,"mousedown",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(e,"mouseup",function(e){e.stopImmediatePropagation()})}),(0,o.addEventListener)(this.overlayEl,"click",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mousedown",function(e){e.stopImmediatePropagation()}),(0,o.addEventListener)(this.overlayEl,"mouseup",function(e){e.stopImmediatePropagation()})},afterClose:function(){(0,i.getBody)().classList.remove("apt-vex")},callback:function(e){e&&"function"==typeof n?n():e||"function"!=typeof s||s()},overlayClassName:"apt-wrapper",contentClassName:d,closeClassName:"apt-wrapper",unsafeMessage:'<div><div class="message-wrapper"><div class="apt-message-icon alert" src="images/alert.png"></div><div class="apt-message-text">'+t+"</div></div></div>",className:"vex-theme-default vex-content-confirm"})}}Object.defineProperty(t,"__esModule",{value:!0}),t.showMessage=void 0;var o=n(0),i=n(2),a=n(39);a.registerPlugin(n(97)),a.defaultOptions.className="vex-theme-os",t.showMessage=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ENGAGEMENT_CHECKSUM_KEY="engagementChecksum",t.ENGAGEMENT_FIELD_MAPPING_ENABLED_KEY="engFieldMappingEnabled",t.ENGAGEMENT_CHECKSUM_URL_CONFIG="engagementChecksumFileUrl",t.BOT_CHECKSUM_KEY="botChecksum",t.CHECKSUM_VERSION="checksumVersion"},function(e,t,n){"use strict";function r(e,t){return e.length<t.minCommentLength?{valid:!1,message:t.minCharsValidationText?t.minCharsValidationText.replace("%minCommentLength%",t.minCommentLength):"Comment should be minimum "+t.minCommentLength+" characters"}:{valid:!0,message:""}}function o(e,t){return t.isCommentMandatory&&!e?{valid:!1,message:t.mandatoryValidationText||"Please insert your comment"}:{valid:!0,message:""}}function i(e,t){return e.length>t.maxCommentLength?{valid:!1,message:t.maxCharsValidationText?t.maxCharsValidationText.replace("%maxCommentLength%",t.maxCommentLength):"Comment can be at most "+t.maxCommentLength+" characters"}:{valid:!0,message:""}}function a(e,t,n){var a=t.value&&t.value.trim(),s=o(a,e),l=r(a,e),c=i(a,e);return n.innerText=s.message||l.message||c.message,s.valid&&l.valid&&c.valid?(t.classList.remove("error"),n.style.display="none",!0):(t.classList.add("error"),n.style.display="inline-block",!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateComment=a},function(e,t,n){"use strict";function r(e,t,n){var r=Array.isArray(n)?n:[],o=!1,i=r.every(function(e){return t.findIndex(function(t){return e===t})>-1}),a=t.length===r.length&&i;switch(e){case f.IS:o=a;break;case f.IS_NOT:o=!a;break;case f.IN:o=i;break;case f.NOT_IN:o=!i;break;default:o=!0}return o}function o(e,t,n,r){var o=!1;switch(e){case g.EQUALS:o=r===t;break;case g.GREATER_THAN:o=r>t;break;case g.SMALLER_THAN:o=r<t;break;case g.SMALLER_THAN_EQUALS:o=r<=t;break;case g.GREATER_THAN_EQUALS:o=r>=t;break;case g.BETWEEN:o=r>=t&&r<=n;break;default:o=!1}return o}function i(e,t,n,i){var a=!1;return i&&("multiValueSelector"===e?a=r(t,n,i):"number"===e&&(a=o(t,Number(n[0]),Number(n[1]),Number(i[0])))),a}function a(e,t){var n=e.stepConditionSet,r=e.defaultConditionAction,o=void 0;return Object.values(n).sort(function(e,t){return e.conditionIndex-t.conditionIndex}).forEach(function(e){var n=e.rules.reduce(function(e,n){return e[n.ruleGroupIndex]=t(n),e},{}),r=(0,u.default)(e.logicalExpression,n);!o&&r&&(o=e.action)}),o||(o=r),o}function s(e,t){return a(e,function(e){return i(e.type,e.operator,e.value,t[e.id])})}Object.defineProperty(t,"__esModule",{value:!0}),t.setEngagementSessionId=t.getEngagementSessionId=void 0,t.evaluateSurveyAnswers=i,t.evaluateStepConditionFilter=a,t.evaluateStepConditionFilterForSurvey=s;var l=n(4),c=n(23),d=n(133),u=function(e){return e&&e.__esModule?e:{default:e}}(d),p=l.windowRef.sessionStorage,f={IS:"is",IN:"in",NOT_IN:"notIn",IS_NOT:"isNot"},g={SMALLER_THAN:"smallerThan",GREATER_THAN:"greaterThan",SMALLER_THAN_EQUALS:"smallerThanEquals",GREATER_THAN_EQUALS:"greaterThanEquals",EQUALS:"equals",BETWEEN:"between"};t.getEngagementSessionId=function(){var e=p.getItem("apt.engagementSessionId"),t=c.UserData.getSessionId();return e||t},t.setEngagementSessionId=function(e){p.setItem("apt.engagementSessionId",e)}},function(e,t,n){"use strict";var r,o,i,a,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){if("object"===s(t)&&void 0!==e)e.exports=n();else{o=[],r=n,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}}(function(){return function e(t,n,r){function o(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof a&&a;if(!l&&c)return a(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},s=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],o=0,i=n.length;o<i;o++)this.push(n[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],c=function(){return new s(this)};if(i.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==a(this,e)},l.add=function(){var e,t=arguments,n=0,r=t.length,o=!1;do{e=t[n]+"",-1===a(this,e)&&(this.push(e),o=!0)}while(++n<r);o&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,r=0,o=n.length,i=!1;do{for(e=n[r]+"",t=a(this,e);-1!==t;)this.splice(t,1),i=!0,t=a(this,e)}while(++r<o);i&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var d={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",d)}catch(e){-2146823252===e.number&&(d.enumerable=!1,n.defineProperty(t,"classList",d))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(window.self))},{}],2:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var i=a[r]||a._default,s=i[0],l=i[1],c=i[2],o=t.createElement("div");for(o.innerHTML=l+e+c;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var d=t.createDocumentFragment();o.firstChild;)d.appendChild(o.removeChild(o.firstChild));return d}t.exports=r;var o,i=!1;"undefined"!=typeof document&&(o=document.createElement("div"),o.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',i=!o.getElementsByTagName("link").length,o=void 0);var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.polyline=a.ellipse=a.polygon=a.circle=a.text=a.line=a.path=a.rect=a.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(e,t,n){function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var l=i[a],c=Object.getOwnPropertyDescriptor(o,l);void 0!==c&&c.enumerable&&(n[l]=o[l])}}return n}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}t.exports={assign:r,polyfill:o}},{}],4:[function(e,t,n){e("classlist-polyfill"),e("es6-object-assign").polyfill();var r=e("domify"),o=function(e){if(void 0!==e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}return""},i=function(e,t){if("string"==typeof t&&0!==t.length)for(var n=t.split(" "),r=0;r<n.length;r++){var o=n[r];o.length&&e.classList.add(o)}},a=function(){var e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}(),s={vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},l={},c=1,d=!1,u={open:function(e){var t=function(e){console.warn('The "'+e+'" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),console.warn("See http://github.hubspot.com/vex/api/advanced/#options")};e.css&&t("css"),e.overlayCSS&&t("overlayCSS"),e.contentCSS&&t("contentCSS"),e.closeCSS&&t("closeCSS");var n={};n.id=c++,l[n.id]=n,n.isOpen=!0,n.close=function(){function e(e){return"none"!==n.getPropertyValue(e+"animation-name")&&"0s"!==n.getPropertyValue(e+"animation-duration")}if(!this.isOpen)return!0;var t=this.options;if(d&&!t.escapeButtonCloses)return!1;if(!1===function(){return!t.beforeClose||t.beforeClose.call(this)}.bind(this)())return!1;this.isOpen=!1;var n=window.getComputedStyle(this.contentEl),r=e("")||e("-webkit-")||e("-moz-")||e("-o-"),o=function e(){this.rootEl.parentNode&&(this.rootEl.removeEventListener(a,e),delete l[this.id],this.rootEl.parentNode.removeChild(this.rootEl),t.afterClose&&t.afterClose.call(this),0===Object.keys(l).length&&document.body.classList.remove(s.open))}.bind(this);return a&&r?(this.rootEl.addEventListener(a,o),this.rootEl.classList.add(s.closing)):o(),!0},"string"==typeof e&&(e={content:e}),e.unsafeContent&&!e.content?e.content=e.unsafeContent:e.content&&(e.content=o(e.content));var p=n.options=Object.assign({},u.defaultOptions,e),f=n.rootEl=document.createElement("div");f.classList.add(s.vex),i(f,p.className);var g=n.overlayEl=document.createElement("div");g.classList.add(s.overlay),i(g,p.overlayClassName),p.overlayClosesOnClick&&g.addEventListener("click",function(e){e.target===g&&n.close()}),f.appendChild(g);var h=n.contentEl=document.createElement("div");if(h.classList.add(s.content),i(h,p.contentClassName),h.appendChild(p.content instanceof window.Node?p.content:r(p.content)),f.appendChild(h),p.showCloseButton){var m=n.closeEl=document.createElement("div");m.classList.add(s.close),i(m,p.closeClassName),m.addEventListener("click",n.close.bind(n)),h.appendChild(m)}return document.querySelector(p.appendLocation).appendChild(f),p.afterOpen&&p.afterOpen.call(n),document.body.classList.add(s.open),n},close:function(e){var t;if(e.id)t=e.id;else{if("string"!=typeof e)throw new TypeError("close requires a vex object or id string");t=e}return!!l[t]&&l[t].close()},closeTop:function(){var e=Object.keys(l);return!!e.length&&l[e[e.length-1]].close()},closeAll:function(){for(var e in l)this.close(e);return!0},getAll:function(){return l},getById:function(e){return l[e]}};window.addEventListener("keyup",function(e){27===e.keyCode&&(d=!0,u.closeTop(),d=!1)}),window.addEventListener("popstate",function(){u.defaultOptions.closeAllOnPopState&&u.closeAll()}),u.defaultOptions={content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",overlayClassName:"",contentClassName:"",closeClassName:"",closeAllOnPopState:!0},Object.defineProperty(u,"_escapeHtml",{configurable:!1,enumerable:!1,writable:!1,value:o}),u.registerPlugin=function(e,t){var n=e(u),r=t||n.name;if(u[r])throw new Error("Plugin "+t+" is already registered.");u[r]=n},t.exports=u},{"classlist-polyfill":1,domify:2,"es6-object-assign":3}]},{},[4])(4)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(6),a=n(0),s=n(15),l=new function(){var e=window.top;if((0,r.isIframe)()){var t=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"register");(0,a.retryFunction)(3,3e3,function(){(0,o.postRequest)(t,e,!0)}),(0,a.retryFunction)(3,3e3,function(){(0,o.postRequest)(t,window.parent,!0)}),this.associateParent=function(e){var t=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"associateParent",null,e);(0,o.postRequest)(t,window.parent,!0)},this.guideElementSelected=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"elementSelected",cssSelector:t,elementText:n});(0,o.postRequest)(r,e,!0)},this.guideElementSelectedForEditorV2=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"elementSelectedForEditorV2",cssSelector:t,elementText:n});(0,o.postRequest)(r,e,!0)},this.getGuide=function(){var t=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"get"});(0,o.postRequest)(t,e,!0)},this.guideElementNotVisible=function(){},this.selectElementInProductMapper=function(t){(0,o.postRequest)(i.IframeRequest.getIframeRequest({aptrinsicEventType:"element_selector_document_click",content:{selector:t},aptrinsicIframeId:(0,o.getIframeId)()}),e)},this.showNextStep=function(t,n){var r=i.IframeRequest.getIframeRequest({aptrinsicEventType:"apt_msg_show_next_step",content:{stepId:t,stepSelector:n},aptrinsicIframeId:(0,o.getIframeId)()});(0,o.postRequest)(r,e,!0)},this.updateContent=function(t){var n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"updateLastContent",content:t});(0,o.postRequest)(n,e,!0)},this.setSelectorState=function(t){var n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"updateSelectorState",state:t});(0,o.postRequest)(n,e,!0)},this.selectorIconClicked=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"iconClicked",state:t,extraData:n});(0,o.postRequest)(r,e,!0)},this.broadcastElementRect=function(e,t){var n=Object.assign({},e),r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),window.parent===window.top?"apt-msg-element-rect-parent":"apt-msg-element-rect",{elementRect:n},t);(0,o.postRequest)(r,window.parent,!0)},this.broadcastUpBadgesLocation=function(e,t){var n=window.parent===window.top?"apt_msg_get_badges_locations_response":"apt_msg_get_badges_locations_parent_iframe",r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),n,{prevIframeId:(0,o.getIframeId)(),badges:e},t);(0,o.postRequest)(r,window.parent,!0)},this.broadcastBadgesStatuses=function(t){var n=s.UUIDGenerator.generateV4Id(),r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"apt_msg_badge_post_status",{badges:t},n);(0,o.postRequest)(r,e,!0)},this.sendElementResponse=function(t,n,r,a){var s=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"elementExistResult",{exist:!!t,isVisible:n,count:r},a);(0,o.postRequest)(s,e,!0)},this.guideLinkedElementClicked=function(t){var n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"apt-msg-element-clicked",{},t);(0,o.postRequest)(n,e,!0)},this.guideExternalElementClicked=function(t){var n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"apt-msg-external-element-clicked",{},t);(0,o.postRequest)(n,e,!0)},this.isElementVisibleResponse=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"isElementVisibleResponse",isVisible:n},t);(0,o.postRequest)(r,e,!0)},this.getMapperState=function(e){(0,o.iframeSubscribeCallback)("guide",{type:"getState"},e)},this.getMapperStateForEditorV2=function(e){(0,o.iframeSubscribeCallback)("guide",{type:"getMapperStateForEditorV2"},e)},this.getAlternateSelectorResponse=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"alternateSelectorResponse",alternateSelector:n},t);(0,o.postRequest)(r,e,!0)},this.postDifferentSelectorResponse=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"guide",{type:"differentSelectorResponse",selectors:n},t);(0,o.postRequest)(r,e,!0)}}};t.default=l},function(e,t,n){"use strict";function r(e,t){var n={appendTo:(0,l.getBody)(),zIndex:2147483647,theme:"px-tooltip"};return(0,s.default)(e,Object.assign(n,t))}function o(e){return e.map(function(e){var t=i(e,2);return r(t[0],t[1])})}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.addTooltipToElement=r,t.addTooltipToElements=o;var a=n(64),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){$.internalEventListener.dispatchEvent(Q.GLOBAL_CONTEXT_CHANGED,(0,Z.getGlobalContext)())}function a(){(0,M.getIsNewAPI)()?(0,K.removeWidget)():(0,q.removeWidget)()}function s(e){try{var t=v.documentRef.createElement("img");t.width=1,t.hight=1,t.src=e}catch(e){w.logger.logInternalError(e)}}function l(e,t){var n={};if(e.id&&(n.ide=e.id.toString()),!(0,I.isBlank)(e.email)&&(n.usem=e.email),(0,I.isObject)(e)){var r={};for(var o in e)e.hasOwnProperty(o)&&(-1==ie.indexOf(o)?r[o]=e[o]:n[o]=e[o]);n.customAttributes=r,(0,O.shouldInjectAccountId)(e,t)&&(n.accountId=t.id)}return delete n.id,delete n.email,n}function c(e){var t={};if((0,I.isObject)(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(-1==ae.indexOf(r)?n[r]=e[r]:t[r]=e[r]);t.customAttributes=n}return t}function d(){(0,b.isIframe)()||(m.UserData.ensureUserData(),v.eventTrackData[y.cacheSet](v.userIdParameter,m.UserData.getUserId()),v.eventTrackData[y.cacheSet](v.sessionIdParam,m.UserData.getSessionId()),v.eventTrackData[y.cacheSet]("ai",m.UserData.getAptrinisId()),v.eventTrackData[y.cacheSet]("vt",m.UserData.getUserType()))}function u(e,t,n){var r={};r[v.productIdParameter]=e[v.productIdParameter],r[ce]=e[ce],delete e.ep;var o=(0,I.convert2Parameters)((0,I.addParameters)(r,[])),i=b.commandEndPointV2+"?"+o,a={};(0,I.isObjectEmpty)(t)||(a.ep=t),E.AjaxUtil.postData(i,Object.assign({},e,a),null,n)}function p(e){try{m.UserData.changeUserType(m.UserData.userType());m.UserData.setAptrinsicId(e.ai)?pe.trackEvent("sessionInitialized",null,function(){(0,_.identifyFinished)()}):(0,_.identifyFinished)()}catch(e){w.logger.logInternalError(e,"failed to run identify call back for response")}}function f(e,t){if(e){if(t&&(0,C.setEngagementSessionId)(t),!(0,Y.isExcluded)()&&!L.default.isEditorMode()&&(0,b.getConfig)("enableBadge")){var n=e.badgeData;try{n&&j.default.addBadges(n.badges)}catch(e){w.logger.logInternalError(e)}}var r=e.engagement;r&&r.length>0&&(le=!0,ne=!1);try{S.EngagementDrawer.draw(r)}catch(e){w.logger.logInternalError(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.identifyCallback=t.startEngagementBatch=t.externalApi=t.api=void 0;var g=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(23),v=n(4),b=n(2),y=n(5),E=n(11),S=n(44),C=n(38),w=n(3),T=n(10),x=n(85),k=r(x),I=n(0),A=n(125),O=n(99),N=n(14),L=r(N),_=n(24),F=n(43),D=r(F),B=n(76),R=r(B),P=n(12),M=n(29),U=n(34),j=r(U),H=n(79),$=n(9),V=n(25),K=n(66),q=n(67),W=n(51),z=n(87),G=n(61),Y=n(21),X=n(55),J=n(20),Q=n(8),Z=n(19),ee=0,te=0,ne=!1,re=void 0,oe=["click","linkClick"],ie=["id","globalId","email","gender","firstName","lastName","signUpDate","title","role","subscriptionId","phone","countryCode","countryName","stateCode","stateName","city","street","continent","postalCode","regionName","timeZone","latitude","longitude","accountId","firstVisitDate","score","userHash","sfdcContactId"],ae=["id","name","trackedSubscriptionId","industry","numberOfEmployees","sicCode","website","naicsCode","plan","countryCode","countryName","stateCode","stateName","city","street","continent","postalCode","regionName","timeZone","latitude","longitude","sfdcId","parentGroupId"],se=["linkClick","LINK_CLICK","ENGAGEMENT_DRAWN","engagementDrawn","engagementView","engagementClosed","engagementCompleted","engagementViewedStep","engagementPostRender","surveyResponded","SURVEY_CLOSED","surveyClosed","kcSearch","articleView","kcOpened","kcClosed","engagementLinkClick","engagementResize","customButtonClick","CUSTOM_BUTTON_CLICK","kcTriggered"],le=!1,ce="et",de=function e(t,n,r,o){var i=(o||0)+1;try{if(!(0,b.getConfig)("enableTag"))return;if(le)return;n||(le=!1);var a=(new Date).getTime(),s=(0,b.getConfig)("maxEngagementCalls");if(t>s)return w.logger.log("sent "+s+" engagement calls, not calling again"),ne=!1,re=void 0,void $.internalEventListener.dispatchEvent("ENGAGEMENT_FETCH");var l=(0,b.getConfig)("engagementCallDelay");if(a-te<l||a-ee<l||(0,_.isInIdentify)()){var c=0===ee?l:l-(a-ee);return void setTimeout(function(){e(t,!0,r,i)},c)}fe.get("engagement",r),ee=a,e(t+1,!0,r,i)}catch(e){w.logger.logInternalError(e)}},ue=function e(t){try{if(!(0,b.getConfig)("enableTag")||(0,V.hasLiveEngagement)())return;var n=!(0,I.isObjectEmpty)(t)&&t.s||void 0,r=(0,b.getConfig)("crossProductEngagement")&&!!v.windowRef.sessionStorage.getItem("apt.localCache");if(!(0,b.featureEnabled)("engagementPull")||ne||r)return n&&re!==n&&$.internalEventListener.addListener("ENGAGEMENT_FETCH",e,void 0,!1,!0),void w.logger.log("we have another engagement batch already running");ne=!0,n&&(re=n),le=!1,de(1,null,t,0)}catch(e){w.logger.logInternalError(e)}},pe=t.api=function(){function e(){o(this,e)}return h(e,null,[{key:"trackEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a={};try{if(!(0,b.getConfig)("enableTag"))return;if((0,J.getChannel)(v.eventTrackData[y.cacheGet](v.productIdParameter))==Q.DESKTOP_CHANNEL)return;if("identify"!==e&&(0,Y.isExcluded)()||L.default.isEditorMode())return;var s="sessionInitialized"!==e&&!(0,b.isIframe)();if(oe.indexOf(e)>-1&&R.default.try2Match(),o&&d(),"signup"===e&&arguments.length<2)throw new Error("sign up event must contain event properties");!(0,b.isIframe)()&&Object.assign(a,v.eventTrackData[y.cacheGetAll]()),(0,b.isIframe)()||0!==a[v.aptrinsicIdParam].indexOf("AP-")||a[v.aptrinsicIdParam]===a[v.userIdParameter]||w.logger.logInternalError(new Error("visitor id does not match aptrinsic id for command"),"current cookies: "+v.documentRef.cookie);var l=location.protocol+"//",c=location,p=c.host,f=location.pathname,h=location.search,S=v.documentRef.title,C=location.hash,x=v.documentRef.referrer;if("pageview"===e&&t){if(t.url){var k=(0,T.url2Location)(t.url);l=k.protocol,p=k.host,f=k.pathname,h=k.search,C=k.hash}S=t.title||S,x=t.referrer||x,f=t.path||f,!(0,b.isIframe)()&&(t=void 0)}var A=void 0,O=(0,Y.maskUrl)(l,p,f,h,C,x,S),N=g(O,7);l=N[0],p=N[1],f=N[2],h=N[3],C=N[4],A=N[5],S=N[6],Object.assign(a,{et:e,rf:A,sc:l,ho:p,pa:decodeURIComponent(f),q:decodeURIComponent(h),ha:decodeURIComponent(C),sch:(0,T.getPageHeight)(),scw:(0,T.getPageWidth)(),pt:S}),r&&Object.assign(a,{cet:r});var _=(0,Z.getGlobalContext)();if((_||i)&&(t||(t={})),a=(0,H.addFullStoryInfo)(a),(0,I.isObject)(t)&&!(0,b.isIframe)()){"feature"==e?t=t.featureMatches?{fmf:t.featureMatches}:{fmf:[{id:t.id,femr:!0}]}:"custom"===e&&(t={epr:t});var F={};i&&Object.assign(F,i),_&&Object.assign(F,_),!(0,I.isObjectEmpty)(F)&&Object.assign(t,{gco:F}),Object.assign(a,{ep:(0,I.jsonStringify)(t)})}if(s&&(te=(new Date).getTime()),(0,b.isIframe)())D.default.track(e,t,r,_);else if((0,I.addCacheBuster)(a),(0,b.getConfig)("usePOST"))u(a,t,n);else{var B=b.commandEndpoint+"?"+(0,I.convert2Parameters)((0,I.addParameters)(a,[]));B.length<=2083?E.AjaxUtil.getData(B,n):(delete a.ep,B=b.commandEndpoint+"?"+(0,I.convert2Parameters)((0,I.addParameters)(a,[])),E.AjaxUtil.postData(B,t,null,n))}s&&ue({s:m.UserData.getSessionId()}),$.internalEventListener.dispatchEvent(e)}catch(t){w.logger.logInternalError(t,"track: "+e+":"+a)}}},{key:"feedback",value:function(e){try{d();var t=Object.assign({},v.eventTrackData[y.cacheGetAll]());Object.assign(t,(0,Y.getWebContext)()),t.et="feedback",!(0,I.isBlank)(e.category)&&(t.category=e.category),!(0,I.isBlank)(e.subject)&&(t.subject=e.subject),!(0,I.isBlank)(e.description)&&(t.description=e.description),(0,I.isNotEmptyArr)(e.labels)&&(t.labels=(0,P.arrayFrom)(e.labels,function(e){return e})),(0,I.addCacheBuster)(t);var n=b.serverEndpoint+"/feedback?"+v.productIdParameter+"="+v.eventTrackData[y.cacheGet](v.productIdParameter);(0,I.isBlank)(e.kcId)||(n+="&kcid="+e.kcId),E.AjaxUtil.postData(n,t,null,null,null,!0)}catch(t){w.logger.logInternalError(t,"failed to send feedback "+JSON.stringify(e))}}}]),e}(),fe=t.externalApi=function(){function e(){o(this,e)}return h(e,null,[{key:"track",value:function(e,t){try{if(!(0,b.getConfig)("enableTag"))return;var n="";if(!e||!(0,I.isString)(e)||""===e.trim())return void w.logger.logInternalError(new Error("cannot send custom event without event name: "+e+", properties: "+JSON.stringify(t)));"feature"!==e&&(n=e,e="custom"),(0,I.isObject)(t)&&Object.entries(t).forEach(function(e){var n=g(e,2),r=n[0],o=n[1];(0,I.isString)(o)&&o&&o.length>1024?t[r]=o.substr(0,1024):(0,I.isObject)(o)&&JSON.stringify(o).length>1024&&(t[r]=JSON.stringify(o).substr(0,1024))}),_.internalApt.call(null,e,t,null,n)}catch(n){w.logger.logInternalError(n,"custom event track: "+e+", properties: "+t)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!(0,b.getConfig)("enableTag"))return;if((0,Y.isExcluded)()||L.default.isEditorMode())return;var n=null,r=void 0,o=void 0,i={};switch(Object.assign(i,v.eventTrackData[y.cacheGetAll](),t||{}),i=(0,H.addFullStoryInfo)(i),e){case"engagement":d(),n=b.getAllInAppEndpoint;var a=(0,I.getUrlParts)(),s=g(a,4),l=s[0],c=s[1],u=s[2],p=s[3],h=(0,Y.maskUrl)(location.protocol+"//",l,c,u,p,null,null),m=g(h,5);o=m[0],l=m[1],c=m[2],u=m[3],p=m[4],Object.assign(i,{sc:o,ho:l,pa:decodeURIComponent(c),q:decodeURIComponent(u),ha:decodeURIComponent(p)}),i.u=""+l+i.pa+i.q+i.ha;var S=(0,Z.getGlobalContext)();S&&Object.assign(i,{gcx:JSON.stringify(S)});var C=i.s;r=function(e){f(e,C)};break;default:return}(0,I.addCacheBuster)(i),n+="?"+(0,I.convert2Parameters)((0,I.addParameters)(i,[])),E.AjaxUtil.getData(n,function(e){try{r.call(this,e)}catch(e){w.logger.logInternalError(e)}})}catch(e){w.logger.logInternalError(e)}}},{key:"identify",value:function(t,n,r){try{if(!(0,b.getConfig)("enableTag"))return;if(!(0,b.featureEnabled)("identify"))return;if((0,I.isObject)(r)){var o=new A.IntegrationMapper(t,n,r);if(o.mapData()&&(t=o.getUserObj(),n=o.getAccountObj()),o.isSegmentGroupCall())return void e._waitForUserIdentify(t,n)}var i={};if((0,I.isBlank)(t.id&&t.id.toString()))throw new Error("cannot identify without user id. Current user data: "+JSON.stringify(t));i={},i.usf=l(t,n),(0,I.isObject)(n)&&(i.acf=c(n)),(0,_.internalApt)("identify",i,p),(0,_.identifyStart)()}catch(e){w.logger.logInternalError(e)}}},{key:"initWithExternalState",value:function(t,n){m.UserData.setAptrinsicId(n),m.UserData.setSessionId(t),e.get("engagement")}},{key:"_waitForUserIdentify",value:function(t,n,r){r=r||0;var o=!1;try{o=m.UserData.isUser()}catch(e){}!o&&r<1500?setTimeout(function(){e._waitForUserIdentify(t,n,r+250)},250):e.identify(t,n)}},{key:"account",value:function(e){try{if(!(0,b.getConfig)("enableTag"))return;if((0,Y.isExcluded)()||L.default.isEditorMode())return;d();var t={};(0,I.isObject)(e)&&(t=c(e));var n=b.accountEndpoint+"?",r=[];r=(0,I.addParameters)(v.eventTrackData[y.cacheGetAll](),r),r=(0,I.addParameter)("acc",JSON.stringify(t),r),n+=(0,I.convert2Parameters)(r),te=(new Date).getTime(),E.AjaxUtil.getData(n)}catch(e){w.logger.logInternalError(e)}}},{key:"set",value:function(e){try{if(!(0,b.getConfig)("enableTag"))return;switch(e){case"notification":var t=arguments[1],n=[];n=(0,I.addParameters)(v.eventTrackData[y.cacheGetAll](),n),n=(0,I.addParameter)("ni",t,n),n=(0,I.addParameter)("ns",1,n),s(b.notificationStateEndpoint+"?"+(0,I.convert2Parameters)(n));break;case"user":var r={},o=arguments[1],a=m.UserData.getAptrinisId(),c=m.UserData.getUserId();if(!m.UserData.isUser())return void w.logger.log("not doing anything since not a user yet, visitor id: "+c+", user id: "+a);r.usf=l(o,null),(0,_.internalApt)("setAttribute",r);break;case"globalContext":var d=arguments[1];v.globalContextCache[y.cacheMerge]("apt.gcx",d),i();break;case"eventListener":var u=arguments[1],p=arguments[2];-1!==["ENGAGEMENT_DRAWN","SURVEY_CLOSED","engagementDrawn","surveyClosed"].indexOf(u)&&null!==p&&"function"==typeof p&&(v.externalEventListeners[u]=p)}$.internalEventListener.dispatchEvent("set",e)}catch(e){w.logger.logInternalError(e)}}},{key:"setOnce",value:function(e){try{if(!(0,b.getConfig)("enableTag"))return;switch(e){case"globalContext":var t=arguments[1];v.globalContextCache[y.cacheMerge]("apt.gcx",t,!0),i()}}catch(e){w.logger.logInternalError(e)}}},{key:"remove",value:function(e){try{if(!(0,b.getConfig)("enableTag"))return;switch(e){case"globalContext":var t=arguments[1],n=(0,Z.getGlobalContext)();(0,I.isNotEmptyArr)(t)&&(t.forEach(function(e){n.hasOwnProperty(e)&&delete n[e]}),v.globalContextCache[y.cacheSet]("apt.gcx",n),i())}}catch(e){w.logger.logInternalError(e)}}},{key:"lead",value:function(e,t){if((0,b.getConfig)("enableTag")){var n={};(0,I.isObject)(t)&&(n=l(t)),k.default.trackLead(e,n)}}},{key:"event",value:function(e,t){try{if(!(0,b.getConfig)("enableTag"))return;if(!e)return void w.logger.logInternalError(new Error("cannot track custom event from segment without event name: "+e+", event attributes: "+JSON.stringify(t)));this.track(e,t)}catch(t){w.logger.logInternalError(t,"SEGMENT_EVENT Unable to log "+e)}}},{key:"checklog",value:function(){w.logger.debugMode&&w.logger.logInternalError(new Error("Test log from web-sdk"))}},{key:"pageView",value:function(e){(0,_.internalApt)("pageview",e)}},{key:"send",value:function(e){switch(e){case"feedback":if(arguments.length<2||!(0,I.isObject)(arguments[1]))return;pe.feedback(arguments[1]);break;case"click":if(arguments.length<2||!Array.isArray(arguments[1]))return;var t=arguments[1];(0,_.internalApt)("click",{elementTree:t})}}},{key:"bot",value:function(e,t){(0,M.setIsNewAPI)(!1);var n=(0,M.getIsNewAPI)(),r="API"===(0,b.getConfig)("fetchKcType"),o=t;switch((0,I.isObject)(o)||(o={}),e){case"search":if(!(0,I.isObject)(t))return;(0,b.setKcConfigByName)("labels",t.labels),M.KnowledgeCenterManager.updateWidgetConfig();break;case"get":if(!1===n){console.log("The Bot api being used is deprecated, please check the documentation on how to use new Bot 'kcb' api");try{(0,q.fetchKcByApi)(o,!1)}catch(e){w.logger.logInternalError(new Error("Bot API - get - "+e))}}break;case"show":if(!1===n){console.log("The Bot api being used is deprecated, please check the documentation on how to use new Bot 'kcb' api");try{var i=o,a=i.onError,s=i.onDone;r&&(0,q.toggleKcBot)(!0,s,a)}catch(e){w.logger.logInternalError(new Error("Bot API - show - "+e))}}break;case"start":if(!1===n){console.log("The Bot api being used is deprecated, please check the documentation on how to use new Bot 'kcb' api");try{(0,q.fetchKcByApi)(o,!0)}catch(e){w.logger.logInternalError(new Error("Bot API - start - "+e))}}break;case"hide":if(!1===n){console.log("The Bot api being used is deprecated, please check the documentation on how to use new Bot 'kcb' api");try{var l=o,c=l.onError,d=l.onDone;r&&(0,q.toggleKcBot)(!1,d,c,!0)}catch(e){w.logger.logInternalError(new Error("Bot API - hide - "+e))}}}}},{key:"kcb",value:function(e,t){if((0,M.setIsNewAPI)(!0),(0,M.getIsNewAPI)()){var n="API"===(0,b.getConfig)("fetchKcType"),r="embedded"===(0,b.getConfig)("kcDisplayType"),o=t;switch((0,I.isObject)(o)||(o={}),e){case"open":var i=o,a=i.onError,s=i.onDone;try{n?(0,M.getKcIsShownViaAPI)()?M.KnowledgeCenterManager.checkIsInitialized()&&(0,K.toggleKcBot)(!0,s,a,!0):((0,W.addCommandToBotQueue)(function(){(0,K.toggleKcBot)(!0,s,a,!0)}),(0,K.initWidgetForAPI)(!0,a),(0,M.setKcIsShownViaAPI)(!0)):(0,K.toggleKcBot)(!0,s,a,!0)}catch(e){(0,I.isFunction)(a)&&a({message:"Bot API - error occurred"}),w.logger.logInternalError(new Error("Bot API - open - "+e))}break;case"close":var l=o,c=l.onError,d=l.onDone;try{(0,K.toggleKcBot)(!1,d,c,!0)}catch(e){(0,I.isFunction)(c)&&c({message:"Bot API - error occurred"}),w.logger.logInternalError(new Error("Bot API - close - "+e))}break;case"show":var u=o,p=u.onError,f=u.onDone;try{n?((0,W.addCommandToBotQueue)(function(){(0,M.setKcIsShownViaAPI)(!0),(0,I.isFunction)(f)&&f()}),(0,K.initWidgetForAPI)(!1,p)):((0,I.isFunction)(p)&&p({message:"Bot API - show is only supported in API mode"}),w.logger.log("Bot API - show is only supported in API mode"))}catch(e){(0,I.isFunction)(p)&&p("Bot API - error occurred"),w.logger.logInternalError(new Error("Bot API - show - "+e))}break;case"hide":var g=o,h=g.onError,m=g.onDone;try{if(n){var v=function(){r&&(0,K.removeEmbeddedHanldlers)(),(0,K.removeWidget)(),(0,M.setKcIsShownViaAPI)(!1)};(0,K.toggleKcBot)(!1,function(e){var t=e.kcId;v(),(0,I.isFunction)(m)&&m({id:t})},function(){v(),(0,I.isFunction)(h)&&h({message:"An error occurred, could not hide the bot."})},!0)}else(0,I.isFunction)(h)&&h({message:"Bot API - hide is only supported in API mode"}),w.logger.log("Bot API - hide is only supported in API mode")}catch(e){(0,I.isFunction)(h)&&h({message:"Bot API - error occurred"}),w.logger.logInternalError(new Error("Bot API - hide - "+e))}}}}},{key:"reset",value:function(){(0,M.productNeedsExtraLogging)((0,J.getProduct)(v.eventTrackData[y.cacheGet](v.productIdParameter)))&&w.logger.reportToServer("reset called"),m.UserData.clearUserData(),S.EngagementDrawer.clearEngagements(!0),j.default.removeAllBadges(),a()}},{key:"addListener",value:function(e,t){if(se.indexOf(e)<0)return void w.logger.log("trying to listen to event "+e+" that is not allowed in the API");$.internalEventListener.addListener(e,t,null,!0)}},{key:"config",value:function(e,t,n){if(void 0!==t)if("tagKey"===e){if(t!==v.eventTrackData[y.cacheGet](v.productIdParameter)){var r={};n&&!(0,I.isObjectEmpty)(n.tagConfig)&&(r=n.tagConfig),(0,b.setCachedConfig)(z.tagConfigKeyName,r),v.windowRef[v.aptrinsicGlobalObjName]=G.aptNotReady,(0,_.appNotReady)(),v.eventTrackData[y.cacheSet](v.productIdParameter,t),m.UserData.clearUserData(),S.EngagementDrawer.clearEngagements(),j.default.removeAllBadges(),R.default.clearAll(),a(),(0,z.getServerConfiguration)(!1,t,null,(0,b.getCachedConfig)(z.tagConfigKeyName),null,function(){(0,b.isIframe)()||(m.UserData.initializeUser(t),v.eventTrackData[y.cacheSet](v.userIdParameter,m.UserData.getUserId()),v.eventTrackData[y.cacheSet]("vt",m.UserData.getUserType()),v.eventTrackData[y.cacheSet]("ai",m.UserData.getAptrinisId()),v.eventTrackData[y.cacheSet](v.sessionIdParam,m.UserData.getSessionId())),(0,_.appReady)(),(0,G.aptReady)()})}}else"enableTag"===e&&((0,b.overrideConfig)({enableTag:t},!1,!0,!0),!1===t&&this.reset())}},{key:"render",value:function(e,t,n){if("engagement"===e)try{X.eventCache.setdata("trackingPayload",n),f(t,null)}catch(e){w.logger.logInternalError(e,"failed to draw engagement: "+JSON.stringify(t))}}}]),e}();t.startEngagementBatch=ue,t.identifyCallback=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(6),a=n(14),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=n(0),c=new function(){var e=window.top;if((0,r.isIframe)()&&!s.default.isEditorMode()){var t=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"register",void 0);(0,l.retryFunction)(3,1e3,function(){(0,o.postRequest)(t,e,!0)}),this.track=function(t,n,r,a){var s=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"track",{aptrinsicEventType:t,properties:n,customEventName:r,passedGlobalContext:a});(0,o.postRequest)(s,e,!0)},this.lead=function(t,n,r,a){var s=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"lead",{source:t,email:n,userData:r,formFields:a});(0,o.postRequest)(s,e,!0)},this.textElementResponse=function(t,n){var r=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"fetchElementTextResponse",{text:t},n);(0,o.postRequest)(r,e,!0)},this.textFeatureMatch=function(t){var n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"textFeatureMatches",{featureMatchData:t});(0,o.postRequest)(n,e,!0)}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,r,o){try{var i=void 0,a=void 0;return a=(0,L.getEngagementTrackPayload)(e,te.CLICK,n,r),a=(0,S.addParameters)({recId:o||null},a),i=B.engagementTrackEndpoint+"?",(0,M.resolveUrlsWithPlaceholdersInHTML)(t,(0,q.isDesktop)()?null:function(e){var t=a.concat((0,S.addParameter)("ru",e));return i+(0,S.convert2Parameters)(t)})}catch(e){T.logger.logInternalError(e)}}function a(e){return H.default.SanitizeHtml(e)}function s(e){return(0,k.isLocked)(e)?(T.logger.log("Not displaying engagement of type "+e+" because an engagement of this type already displayed"),!1):((0,k.lockEngagementType)(e),!0)}function l(e,t){T.logger.logInternalError(new Error("Engagement with id "+e.engagementId+" was dropped because of HTML sanitization errors "+t))}function c(e,t){var n=(0,q.getEnvironment)(w.eventTrackData[W.cacheGet](w.productIdParameter));if(T.logger.debugMode&&n!==z.PROD_ENVIRONMENT)return!0;var r=(0,B.getCachedConfig)($.ENGAGEMENT_CHECKSUM_KEY),o=(0,B.getCachedConfig)($.ENGAGEMENT_FIELD_MAPPING_ENABLED_KEY),i=(0,B.getConfig)($.ENGAGEMENT_CHECKSUM_URL_CONFIG);if(!i)return!0;if(!r&&i)return T.logger.logInternalError(new Error("the engagement checksum is invalid since there is URL configured but no checksum to validated against")),!1;var a=r[e];if(!a&&!Array.isArray(a)||(0,S.isEmptyArr)(a))return T.logger.logInternalError(new Error("the engagement checksum is invalid since there is URL configured but no checksum to validated against, array is empty")),!1;var s=Object.assign({},t);s=(0,G.filterAndSortEngagementFields)(s,o),s=(0,K.orderAlphabetically)(s),s=(0,K.removeNullFields)(s);var l=(0,V.sha256)(JSON.stringify(s)),c=a.indexOf(l)>-1;return c||(T.logger.logInternalError(new Error("the engagement checksum is invalid, js checksum:"+l+". engagement checksums: "+JSON.stringify(a))),T.logger.logInternalError(new Error("the engagement checksum was done on: "+JSON.stringify(s)))),c}function d(e,t){g(e.content.contentType,e.rules,t)}function u(e,t,n){var r=n&&n.recId?n.recId:null;if(Array.isArray(e)&&(e.length>1&&(e=e.sort(function(e,t){return ee[e.content.contentType]-ee[t.content.contentType]})),e=e[0]),e){var o={url:(0,S.getPageUrl)()};if(!(t||F.default.isPreview()||(0,S.isBlank)(e.rules)||(0,P.matchMultiTypeRules)(JSON.parse(e.rules),o)))return void T.logger.log("did not have client side match for engagement rules "+e.rules+", current URL: "+o);if(!c(e.engagementId,e.content))return;switch(e.content.contentTypeId=ee[e.content.contentType],e.content.contentType){case"IN_APP_DIALOG":if(s(e.content.contentType)){var u=a(e.content.htmlElements);if(u.isValid){e=ne(e,r);var f=X.checkHasOverlayForCurrentStep()?X.getStepSettings().zIndex:e.zIndex,g=X.isRunning()&&X.checkHasOverlayForCurrentStep(),h=g?0:e.content.settings.overlayFill,m=Object.assign({},e,{content:Object.assign({},e.content,{settings:Object.assign({},e.content.settings,{zIndex:f,overlayFill:h})})});Q.drawDialog(m,p,t,n),U.internalEventListener.dispatchEvent("engagementView",(0,L.getExternalEvent)(e,"Viewed"))}else l(e,u.errors);d(e,t)}break;case"IN_APP_GUIDE":if(s(e.content.contentType)){for(var v=a(e.content.footer),b=v.errors||[],y=!0,E=0;E<e.content.steps.length;E++){var C=e.content.steps[E];if(C.total=e.content.steps.length,!(0,S.isBlank)(C.content)){var w=a(C.content+C.titleHtml);w.isValid&&y?(e.content.steps[E].content=i(e,C.content,C.id,C.sequenceNumber,r),C.titleHtml&&(e.content.steps[E].titleHtml=i(e,C.titleHtml,C.id,C.sequenceNumber,r))):(y=!1,b.push(w.errors))}}if(b.length>0){l(e,b);break}var x=e.content;Object.assign(x,{engagementId:e.engagementId,contentId:e.content.id,matchEventId:e.matchEventId,accountId:e.accountId,executionId:e.executionId,executionTimestamp:e.executionTimestamp,coreStyling:e.content.coreStyling,engagementCoreStyling:e.content.engagementCoreStyling,overrideStyling:e.content.overrideStyling,activationType:e.activationType,contentLocale:e.contentLocale,ideId:e.ideId,engagementName:e.engagementName}),e.content.steps=e.content.steps.map(function(e){return Object.assign({},e,{elementSelector:{matchCssSelector:e.matchCssSelector,cssSelector:e.cssSelector,matchTextRule:e.matchTextRule,textRuleOperator:e.textRule&&e.textRule.operator,textRuleValues:e.textRule&&e.textRule.values}})});var I=function(){(0,k.handleEngagementFinish)(e.content.contentType)};X.playGuide(e.content.steps,x,I,n),U.internalEventListener.dispatchEvent("engagementView",(0,L.getExternalEvent)(e,"Viewed"))}break;case"IN_APP_CAROUSEL":if(s(e.content.contentType)){for(var A=[],O=!0,N=0;N<e.content.carouselSlideList.length;N++){var _=e.content.carouselSlideList[N];if(!(0,S.isBlank)(_.html)){var D=a(_.html);O&&D.isValid?e.content.carouselSlideList[N].html=i(e,_.html,_.id,_.sequence,r):(O=!1,A.push(D.errors))}}if(A.length>0){l(e,A);break}J.drawCarousel(e,p,n),U.internalEventListener.dispatchEvent("engagementView",(0,L.getExternalEvent)(e,"Viewed")),d(e,t)}break;case"IN_APP_BOOLEAN_SURVEY":case"IN_APP_SURVEY_NPS":case"IN_APP_CES_SURVEY":case"IN_APP_MULTIPLE_QUESTION_SURVEY":case"IN_APP_RATING_SURVEY":if(s(e.content.contentType)){var B=Z.draw(e,p,n);if(!B.isValid){l(e,B.errors);break}U.internalEventListener.dispatchEvent("engagementView",(0,L.getExternalEvent)(e,"Viewed")),d(e,t)}}}}function p(e,t){["ENGAGEMENT_DRAWN","engagementDrawn"].forEach(function(n){var r=t.getBoundingClientRect(),o={width:r.width,height:r.height};if(w.externalEventListeners[n])try{w.externalEventListeners[n](e.content.contentType,e.engagementId,o)}catch(e){T.logger.logInternalError(e,"Error calling "+n+" event listener")}U.internalEventListener.dispatchEvent(n,e.content.contentType,e.engagementId,o)})}function f(e,t){return function(){var n={url:(0,S.getPageUrl)()};(0,P.matchMultiTypeRules)(JSON.parse(e),n)||re.clearEngagement(t)}}function g(e,t,n){if((0,B.getConfig)("evaluateEngRuleOnNavigation")&&!n&&!F.default.isPreview()&&!(0,S.isBlank)(t)){var r=f(t,e);(0,k.registerEngagementPageChangedHandler)(e,r)}}function h(e,t){try{"ONCE"===e.qualificationScopeType&&"ON_CLICK"===e.engagementTrigger&&(0,Y.removeBadge)(e.id);u(t.engagement)}catch(e){T.logger.logInternalError(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.guideDrawer=t.EngagementDrawer=void 0;var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(58),b=r(v),y=n(104),E=r(y),S=n(0),C=n(10),w=n(4),T=n(3),x=n(11),k=n(25),I=n(108),A=r(I),O=n(114),N=r(O),L=n(16),_=n(14),F=r(_),D=n(35),B=n(2),R=n(29),P=n(54),M=n(32),U=n(9),j=n(72),H=r(j),$=n(36),V=n(73),K=n(27),q=n(20),W=n(5),z=n(8),G=n(107),Y=n(34),X=new b.default(null,!0),J=new E.default,Q=new A.default,Z=new N.default,ee={IN_APP_CAROUSEL:1,IN_APP_GUIDE:2,IN_APP_DIALOG:3,IN_APP_SURVEY_NPS:4,IN_APP_CES_SURVEY:5,IN_APP_BOOLEAN_SURVEY:6,IN_APP_RATING_SURVEY:7,IN_APP_MULTIPLE_QUESTION_SURVEY:8},te={CLICK:"ENGAGEMENT_CLICK"},ne=function(e,t){try{var n=void 0;if(e.content.htmlElements)if(Array.isArray(e.content.htmlElements))for(var r=0;r<e.content.htmlElements.length;r++)n=e.content.htmlElements[r],e.content.htmlElements[r]=i(e,n,null,null,t);else e.content.htmlElements=i(e,e.content.htmlElements,null,null,t);return e}catch(e){T.logger.logInternalError(e)}},re=t.EngagementDrawer=function(){function e(){o(this,e)}return m(e,null,[{key:"draw",value:function(e,t,n){(0,C.addDOMReadyListener)(u,e,t,n)}},{key:"clearEngagements",value:function(e){var t=e||!(0,B.getConfig)("crossProductEngagement");t&&X.close(),J.close(),Q.close(),Z.close(),t&&X.clearStepRedirectData()}},{key:"clearEngagement",value:function(e){switch(e){case"IN_APP_DIALOG":Q.close();break;case"IN_APP_CAROUSEL":J.close();break;case"IN_APP_GUIDE":X.close(),X.clearStepRedirectData();break;case"IN_APP_BOOLEAN_SURVEY":case"IN_APP_SURVEY_NPS":case"IN_APP_CES_SURVEY":case"IN_APP_MULTIPLE_QUESTION_SURVEY":case"IN_APP_RATING_SURVEY":Z.close()}}}]),e}();t.guideDrawer=X,!(0,B.isIframe)()&&F.default.isPreview()&&(F.default.getAdditionalDetails().kcId?(0,C.addDOMReadyListener)(function(){x.AjaxUtil.getData('https://app-be.aptrinsic.com'+"/api/knowledge/"+F.default.getProductKey().split("-")[1],function(e){R.KnowledgeCenterManager.removeWidget(),R.KnowledgeCenterManager.initWidget({apiKey:F.default.getProductKey(),initialConfig:Object.assign(e,{enabled:!0}),isPreview:!0},!0),history.replaceState("",document.title,F.default.cleanEngagementData())},{Authorization:"Bearer "+F.default.getToken()},function(e){try{403===e?((0,D.showMessage)("error","Not authorized to preview this knowledge center"),F.default.exit()):401==e&&((0,D.showMessage)("error","Token expired, try to preview again"),F.default.exit())}catch(e){T.logger.logInternalError(e)}})}):x.AjaxUtil.getData(F.default.getPreviewUrl(),function(e){(0,C.addDOMReadyListener)(function(){history.replaceState("",document.title,F.default.cleanEngagementData())});var t=e.badgeData;try{if(t&&(0,S.isNotEmptyArr)(t.badges)){var n=t.badges[0].badgeSettings;Object.assign(n,{isPreview:!0,clickCallback:function(){h(n,e)}}),(0,Y.drawBadges)(t.badges,null,!0)}else u(e.engagement)}catch(e){T.logger.logInternalError(e)}},{Authorization:"Bearer "+F.default.getToken()},function(e){try{403===e?((0,D.showMessage)("error","Not authorized to preview this engagement"),F.default.exit()):401==e&&((0,D.showMessage)("error","Token expired, try to preview again"),F.default.exit())}catch(e){T.logger.logInternalError(e)}}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return(0,s.getConfig)("fullDomainCookie")?location.hostname:(0,l.getDomain)()}Object.defineProperty(t,"__esModule",{value:!0}),t.Cookie=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=n(2),l=n(10),c=encodeURIComponent,d=decodeURIComponent;t.Cookie=function(){function e(){r(this,e)}return i(e,null,[{key:"setCookie",value:function(e,t,n,r){if(!(0,s.isIframe)()){var i=void 0,d=r||o();if(n){var u=Date.now();i=new Date,i.setTime(u+n)}a.documentRef.cookie=e+"="+c(t)+(i?"; expires="+i.toUTCString():"")+"; path=/"+(d&&d.trim().length>0?"; domain="+d:"")+(0,l.getSameSiteCookieSuffix)()+((0,s.getConfig)("secureCookie")?"; secure":"")}}},{key:"getCookie",value:function(e,t){for(var n=a.documentRef.cookie.split(";"),r=void 0,o=[],i=void 0,s=0;s<n.length;s++)r=n[s],r=r.trim(),i=r.split("="),2==i.length&&i[0]==e&&o.push(i[1]);return o.length>0&&t&&o.every(function(e){return e===o[0]})?d(o[0].trim()):1===o.length?d(o[0].trim()):null}},{key:"getAllCookieVal",value:function(e){for(var t=a.documentRef.cookie.split(";"),n=void 0,r=[],o=void 0,i=0;i<t.length;i++)n=t[i],n=n.trim(),o=n.split("="),2==o.length&&o[0]==e&&r.push(o[1]);if(r.length>0)for(var s=0;s<r.length;s++)r[s]=d(r[s].trim());return r.length>0?r:null}},{key:"deleteCookie",value:function(e){this.setCookie(e,null,-1)}},{key:"getAllAsString",value:function(){return a.documentRef.cookie}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TOP_WINDOW_ID=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=(t.TOP_WINDOW_ID="top",function(){function e(){r(this,e),this.store=new i.LocalCache}return o(e,[{key:"setIframeId",value:function(e){this.store.setdata("IFRAME_ID",e)}},{key:"getIframeId",value:function(){return this.store.getKey("IFRAME_ID")}},{key:"setBotConfig",value:function(e){this.store.setdata("KC_CONFIG",e)}},{key:"getBotConfig",value:function(){return this.store.getKey("KC_CONFIG")}}]),e}()),s=new a;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(6),a=n(22),s=n(15),l=n(0),c=new function(){var e=window.top;if((0,r.isIframe)()){var t=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"register");(0,l.retryFunction)(3,3e3,function(){(0,o.postRequest)(t,e,!0)}),(0,l.retryFunction)(3,3e3,function(){(0,o.postRequest)(t,window.parent,!0)}),this.postIframeClosed=function(){if((0,r.isIframe)()){var t=s.UUIDGenerator.generateV4Id(),n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.IFRAME_CLOSED},t);(0,o.postRequest)(n,e,!0)}},this.postBotFound=function(){if((0,r.isIframe)()){var t=s.UUIDGenerator.generateV4Id(),n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.BOT_FOUND},t);(0,o.postRequest)(n,e,!0)}},this.getBotContent=function(e,t,n){(0,o.iframeSubscribeCallback)(a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.GET_BOT_CONTENT,botId:e},function(e,r){e&&t&&t(e),r&&n&&n(r)})},this.trackBotToggle=function(t,n){if((0,r.isIframe)()){var l=s.UUIDGenerator.generateV4Id(),c=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.TRACK_BOT_TOGGLE,botId:t,isOpen:n},l);(0,o.postRequest)(c,e,!0)}},this.checkMappedElementIsVisibleResponse=function(t,n){if((0,r.isIframe)()){var s=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.IS_ELEMENT_VISIBLE_RESPONSE,isVisible:n,iframeId:(0,o.getIframeId)()},t);(0,o.postRequest)(s,e,!0)}},this.getAptrinsicId=function(e){(0,o.iframeSubscribeCallback)(a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.GET_APTRINSIC_ID},e)},this.postClickElement=function(){if((0,r.isIframe)()){var t=s.UUIDGenerator.generateV4Id(),n=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),a.EVENTS.BOT,{type:a.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK},t);(0,o.postRequest)(n,e,!0)}}}};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(6),a=n(15),s=n(22),l=new function(){function e(e,t,n){var r=a.UUIDGenerator.generateV4Id();return i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.BOT_RESPONSE,botConfig:e,isInitial:t,shouldOpen:n},r)}this.postBotEvent=function(e,t){var n=a.UUIDGenerator.generateV4Id(),r=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.POST_BOT_EVENT,data:t},n);(0,o.postRequestDown)(r,e)},this.sendBotFound=function(e){if(!(0,r.isIframe)()){var t=a.UUIDGenerator.generateV4Id(),n=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.BOT_FOUND,iframeId:e},t);(0,o.propagateDown)(n,(0,i.getRegisteredIframes)())}},this.removeWidgetFromAllIframes=function(){if(!(0,r.isIframe)()){var e=a.UUIDGenerator.generateV4Id(),t=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.REMOVE_BOT},e);(0,o.propagateDown)(t,(0,i.getRegisteredIframes)())}},this.sendBotConfig=function(t,n){if(!(0,r.isIframe)()){var a=e(t,n);(0,o.propagateDown)(a,(0,i.getRegisteredIframes)())}},this.sendBotConfigToIframe=function(t,n,i,a){if(!(0,r.isIframe)()){var s=e(n,i,a);(0,o.postRequestDown)(s,t)}},this.removeBotFromIframe=function(e){if(!(0,r.isIframe)()){var t=a.UUIDGenerator.generateV4Id(),n=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.REMOVE_BOT},t);(0,o.postRequestDown)(n,e)}},this.getBotContentResponse=function(e,t,n,a){if(!(0,r.isIframe)()){var l=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.GET_BOT_CONTENT_RESPONSE,response:n,error:a},t);(0,o.postRequestDown)(l,e)}},this.setBotIsOpen=function(e,t){var n=a.UUIDGenerator.generateV4Id(),r=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.SET_BOT_IS_OPEN,isOpen:e},n,t);(0,o.postRequestDown)(r,(0,i.getIframeData)(t))},this.checkMappedElementIsVisible=function(e,t,n){(0,r.isIframe)()||(0,o.createSubscribeCallbackRequest)(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.IS_ELEMENT_VISIBLE,cssSelector:t},e,n)},this.addElementClickListener=function(e,t){var n=a.UUIDGenerator.generateV4Id(),r=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.ADD_ELEMENT_CLICK_LISTENER,cssSelector:t},n);(0,o.postRequestDown)(r,e)},this.getAptrinsicIdResponse=function(e,t,n){if(!(0,r.isIframe)()){var a=i.IframeRequest.getMasterRequst(s.EVENTS.BOT,{type:s.TOP_TO_IFRAME_EVENTS.GET_APTRINSIC_ID_RESPONSE,aptrinsicId:n},t);(0,o.postRequestDown)(a,e)}}};t.default=l},function(e,t,n){"use strict";function r(e,t){var n=e.fromScore,r=e.toScore,o=e.labels.map(function(e){return new a.default(Object.assign({},t,{id:e.id,text:e.text}))});this.render=function(){return o.map(function(e){return e.render()})},this.getSelected=function(){return o.map(function(e){return e.isSelected()?e.getId():null}).filter(function(e){return null!==e})},this.isInRange=function(e){return n<=e&&r>=e},this.setTabIndexes=function(e){var t=e;return o.forEach(function(e){e.setTabIndex(t),t+=1}),t}}function o(e,t){var n=null,o=e.map(function(e){return new r(e,t)});t.singleList&&(n=o[0]),this.setTabIndexes=function(e){var t=e;return o.forEach(function(e){t=e.setTabIndexes(t)}),t},this.getLabelElements=function(e){if(t.singleList)return o[0].render();for(var r=0;r<o.length;r++)if(o[r].isInRange(e))return n=o[r],o[r].render()},this.getSelectedLabels=function(){return n?n.getSelected():[]}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(116),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o},function(e,t,n){"use strict";(function(e){function n(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}function r(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},pe))}}function o(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function i(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView,r=n.getComputedStyle(e,null);return t?r[t]:r}function a(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function s(e){if(!e)return document.body;switch(e.nodeName){case"HTML":return document.documentElement;case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=i(e),n=t.overflow,r=t.overflowX;return/(auto|scroll|overlay)/.test(n+t.overflowY+r)?e:s(a(e))}function l(e){return e&&e.referenceNode?e.referenceNode:e}function c(e){return 11===e?he:10===e?me:he||me}function d(e){if(!e)return document.documentElement;for(var t=c(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===i(n,"position")?d(n):n:e?e.ownerDocument.documentElement:document.documentElement}function u(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||d(e.firstElementChild)===e)}function p(e){return null!==e.parentNode?p(e.parentNode):e}function f(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,o=n?t:e,i=document.createRange();i.setStart(r,0),i.setEnd(o,0);var a=i.commonAncestorContainer;if(e!==a&&t!==a||r.contains(o))return u(a)?a:d(a);var s=p(e);return s.host?f(s.host,t):f(e,p(t).host)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var o=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||o)[n]}return e[n]}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),o=g(t,"left"),i=n?-1:1;return e.top+=r*i,e.bottom+=r*i,e.left+=o*i,e.right+=o*i,e}function m(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function v(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],c(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function b(e){var t=e.body,n=e.documentElement,r=c(10)&&getComputedStyle(n);return{height:v("Height",t,n,r),width:v("Width",t,n,r)}}function y(e){return Ee({},e,{right:e.left+e.width,bottom:e.top+e.height})}function E(e){var t={};try{if(c(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var o={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?b(e.ownerDocument):{},s=a.width||e.clientWidth||o.width,l=a.height||e.clientHeight||o.height,d=e.offsetWidth-s,u=e.offsetHeight-l;if(d||u){var p=i(e);d-=m(p,"x"),u-=m(p,"y"),o.width-=d,o.height-=u}return y(o)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=c(10),o="HTML"===t.nodeName,a=E(e),l=E(t),d=s(e),u=i(t),p=parseFloat(u.borderTopWidth,10),f=parseFloat(u.borderLeftWidth,10);n&&o&&(l.top=Math.max(l.top,0),l.left=Math.max(l.left,0));var g=y({top:a.top-l.top-p,left:a.left-l.left-f,width:a.width,height:a.height});if(g.marginTop=0,g.marginLeft=0,!r&&o){var m=parseFloat(u.marginTop,10),v=parseFloat(u.marginLeft,10);g.top-=p-m,g.bottom-=p-m,g.left-=f-v,g.right-=f-v,g.marginTop=m,g.marginLeft=v}return(r&&!n?t.contains(d):t===d&&"BODY"!==d.nodeName)&&(g=h(g,t)),g}function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=S(e,n),o=Math.max(n.clientWidth,window.innerWidth||0),i=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:g(n),s=t?0:g(n,"left");return y({top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:o,height:i})}function w(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===i(e,"position"))return!0;var n=a(e);return!!n&&w(n)}function T(e){if(!e||!e.parentElement||c())return document.documentElement;for(var t=e.parentElement;t&&"none"===i(t,"transform");)t=t.parentElement;return t||document.documentElement}function x(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},c=o?T(e):f(e,l(t));if("viewport"===r)i=C(c,o);else{var d=void 0;"scrollParent"===r?(d=s(a(t)),"BODY"===d.nodeName&&(d=e.ownerDocument.documentElement)):d="window"===r?e.ownerDocument.documentElement:r;var u=S(d,c,o);if("HTML"!==d.nodeName||w(c))i=u;else{var p=b(e.ownerDocument),g=p.height,h=p.width;i.top+=u.top-u.marginTop,i.bottom=g+u.top,i.left+=u.left-u.marginLeft,i.right=h+u.left}}n=n||0;var m="number"==typeof n;return i.left+=m?n:n.left||0,i.top+=m?n:n.top||0,i.right-=m?n:n.right||0,i.bottom-=m?n:n.bottom||0,i}function k(e){return e.width*e.height}function I(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=x(n,r,i,o),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},l=Object.keys(s).map(function(e){return Ee({key:e},s[e],{area:k(s[e])})}).sort(function(e,t){return t.area-e.area}),c=l.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),d=c.length>0?c[0].key:l[0].key,u=e.split("-")[1];return d+(u?"-"+u:"")}function A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(n,r?T(t):f(t,l(n)),r)}function O(e){var t=e.ownerDocument.defaultView,n=t.getComputedStyle(e),r=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),o=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0);return{width:e.offsetWidth+o,height:e.offsetHeight+r}}function N(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function L(e,t,n){n=n.split("-")[0];var r=O(e),o={width:r.width,height:r.height},i=-1!==["right","left"].indexOf(n),a=i?"top":"left",s=i?"left":"top",l=i?"height":"width",c=i?"width":"height";return o[a]=t[a]+t[l]/2-r[l]/2,o[s]=n===s?t[s]-r[c]:t[N(s)],o}function _(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function F(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=_(e,function(e){return e[t]===n});return e.indexOf(r)}function D(e,t,n){return(void 0===n?e:e.slice(0,F(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&o(n)&&(t.offsets.popper=y(t.offsets.popper),t.offsets.reference=y(t.offsets.reference),t=n(t,e))}),t}function B(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=A(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=I(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=L(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=D(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function R(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function P(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var o=t[r],i=o?""+o+n:e;if(void 0!==document.body.style[i])return i}return null}function M(){return this.state.isDestroyed=!0,R(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[P("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function U(e){var t=e.ownerDocument;return t?t.defaultView:window}function j(e,t,n,r){var o="BODY"===e.nodeName||"HTML"===e.nodeName,i=o?e.ownerDocument.defaultView:e;i.addEventListener(t,n,{passive:!0}),o||j(s(i.parentNode),t,n,r),r.push(i)}function H(e,t,n,r){n.updateBound=r,U(e).addEventListener("resize",n.updateBound,{passive:!0});var o=s(e);return j(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}function $(){this.state.eventsEnabled||(this.state=H(this.reference,this.options,this.state,this.scheduleUpdate))}function V(e,t){return U(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function K(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=V(this.reference,this.state))}function q(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function W(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&q(t[n])&&(r="px"),e.style[n]=t[n]+r})}function z(e,t){Object.keys(t).forEach(function(n){!1!==t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)})}function G(e){return W(e.instance.popper,e.styles),z(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&W(e.arrowElement,e.arrowStyles),e}function Y(e,t,n,r,o){var i=A(o,t,e,n.positionFixed),a=I(n.placement,i,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),W(t,{position:n.positionFixed?"fixed":"absolute"}),n}function X(e,t){var n=e.offsets,r=n.popper,o=n.reference,i=Math.round,a=Math.floor,s=function(e){return e},l=i(o.width),c=i(r.width),d=-1!==["left","right"].indexOf(e.placement),u=-1!==e.placement.indexOf("-"),p=l%2==c%2,f=l%2==1&&c%2==1,g=t?d||u||p?i:a:s,h=t?i:s;return{left:g(f&&!u&&t?r.left-1:r.left),top:h(r.top),bottom:h(r.bottom),right:g(r.right)}}function J(e,t){var n=t.x,r=t.y,o=e.offsets.popper,i=_(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==i?i:t.gpuAcceleration,s=d(e.instance.popper),l=E(s),c={position:o.position},u=X(e,window.devicePixelRatio<2||!Se),p="bottom"===n?"top":"bottom",f="right"===r?"left":"right",g=P("transform"),h=void 0,m=void 0;if(m="bottom"===p?"HTML"===s.nodeName?-s.clientHeight+u.bottom:-l.height+u.bottom:u.top,h="right"===f?"HTML"===s.nodeName?-s.clientWidth+u.right:-l.width+u.right:u.left,a&&g)c[g]="translate3d("+h+"px, "+m+"px, 0)",c[p]=0,c[f]=0,c.willChange="transform";else{var v="bottom"===p?-1:1,b="right"===f?-1:1;c[p]=m*v,c[f]=h*b,c.willChange=p+", "+f}var y={"x-placement":e.placement};return e.attributes=Ee({},y,e.attributes),e.styles=Ee({},c,e.styles),e.arrowStyles=Ee({},e.offsets.arrow,e.arrowStyles),e}function Q(e,t,n){var r=_(e,function(e){return e.name===t}),o=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!o){var i="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}function Z(e,t){var n=void 0;if(!Q(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],a=e.offsets,s=a.popper,l=a.reference,c=-1!==["left","right"].indexOf(o),d=c?"height":"width",u=c?"Top":"Left",p=u.toLowerCase(),f=c?"left":"top",g=c?"bottom":"right",h=O(r)[d];l[g]-h<s[p]&&(e.offsets.popper[p]-=s[p]-(l[g]-h)),l[p]+h>s[g]&&(e.offsets.popper[p]+=l[p]+h-s[g]),e.offsets.popper=y(e.offsets.popper);var m=l[p]+l[d]/2-h/2,v=i(e.instance.popper),b=parseFloat(v["margin"+u],10),E=parseFloat(v["border"+u+"Width"],10),S=m-e.offsets.popper[p]-b-E;return S=Math.max(Math.min(s[d]-h,S),0),e.arrowElement=r,e.offsets.arrow=(n={},ye(n,p,Math.round(S)),ye(n,f,""),n),e}function ee(e){return"end"===e?"start":"start"===e?"end":e}function te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=we.indexOf(e),r=we.slice(n+1).concat(we.slice(0,n));return t?r.reverse():r}function ne(e,t){if(R(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=x(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],o=N(r),i=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case Te.FLIP:a=[r,o];break;case Te.CLOCKWISE:a=te(r);break;case Te.COUNTERCLOCKWISE:a=te(r,!0);break;default:a=t.behavior}return a.forEach(function(s,l){if(r!==s||a.length===l+1)return e;r=e.placement.split("-")[0],o=N(r);var c=e.offsets.popper,d=e.offsets.reference,u=Math.floor,p="left"===r&&u(c.right)>u(d.left)||"right"===r&&u(c.left)<u(d.right)||"top"===r&&u(c.bottom)>u(d.top)||"bottom"===r&&u(c.top)<u(d.bottom),f=u(c.left)<u(n.left),g=u(c.right)>u(n.right),h=u(c.top)<u(n.top),m=u(c.bottom)>u(n.bottom),v="left"===r&&f||"right"===r&&g||"top"===r&&h||"bottom"===r&&m,b=-1!==["top","bottom"].indexOf(r),y=!!t.flipVariations&&(b&&"start"===i&&f||b&&"end"===i&&g||!b&&"start"===i&&h||!b&&"end"===i&&m),E=!!t.flipVariationsByContent&&(b&&"start"===i&&g||b&&"end"===i&&f||!b&&"start"===i&&m||!b&&"end"===i&&h),S=y||E;(p||v||S)&&(e.flipped=!0,(p||v)&&(r=a[l+1]),S&&(i=ee(i)),e.placement=r+(i?"-"+i:""),e.offsets.popper=Ee({},e.offsets.popper,L(e.instance.popper,e.offsets.reference,e.placement)),e=D(e.instance.modifiers,e,"flip"))}),e}function re(e){var t=e.offsets,n=t.popper,r=t.reference,o=e.placement.split("-")[0],i=Math.floor,a=-1!==["top","bottom"].indexOf(o),s=a?"right":"bottom",l=a?"left":"top",c=a?"width":"height";return n[s]<i(r[l])&&(e.offsets.popper[l]=i(r[l])-n[c]),n[l]>i(r[s])&&(e.offsets.popper[l]=i(r[s])),e}function oe(e,t,n,r){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],a=o[2];if(!i)return e;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return y(s)[t]/100*i}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i}return i}function ie(e,t,n,r){var o=[0,0],i=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=a.indexOf(_(a,function(e){return-1!==e.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1]].concat(a.slice(s+1))]:[a];return c=c.map(function(e,r){var o=(1===r?!i:i)?"height":"width",a=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)},[]).map(function(e){return oe(e,o,t,n)})}),c.forEach(function(e,t){e.forEach(function(n,r){q(n)&&(o[t]+=n*("-"===e[r-1]?-1:1))})}),o}function ae(e,t){var n=t.offset,r=e.placement,o=e.offsets,i=o.popper,a=o.reference,s=r.split("-")[0],l=void 0;return l=q(+n)?[+n,0]:ie(n,i,a,s),"left"===s?(i.top+=l[0],i.left-=l[1]):"right"===s?(i.top+=l[0],i.left+=l[1]):"top"===s?(i.left+=l[0],i.top-=l[1]):"bottom"===s&&(i.left+=l[0],i.top+=l[1]),e.popper=i,e}function se(e,t){var n=t.boundariesElement||d(e.instance.popper);e.instance.reference===n&&(n=d(n));var r=P("transform"),o=e.instance.popper.style,i=o.top,a=o.left,s=o[r];o.top="",o.left="",o[r]="";var l=x(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);o.top=i,o.left=a,o[r]=s,t.boundaries=l;var c=t.priority,u=e.offsets.popper,p={primary:function(e){var n=u[e];return u[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(u[e],l[e])),ye({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=u[n];return u[e]>l[e]&&!t.escapeWithReference&&(r=Math.min(u[n],l[e]-("right"===e?u.width:u.height))),ye({},n,r)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=Ee({},u,p[t](e))}),e.offsets.popper=u,e}function le(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var o=e.offsets,i=o.reference,a=o.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",c=s?"width":"height",d={start:ye({},l,i[l]),end:ye({},l,i[l]+i[c]-a[c])};e.offsets.popper=Ee({},a,d[r])}return e}function ce(e){if(!Q(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=_(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}function de(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,o=r.popper,i=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return o[a?"left":"top"]=i[n]-(s?o[a?"width":"height"]:0),e.placement=N(t),e.offsets.popper=y(o),e}Object.defineProperty(t,"__esModule",{value:!0});/** !
 * LOCAL VERSION
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.0
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var ue="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,pe=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(ue&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}(),fe=ue&&window.Promise,ge=fe?n:r,he=ue&&!(!window.MSInputMethodContext||!document.documentMode),me=ue&&/MSIE 10/.test(navigator.userAgent),ve=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},be=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ye=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se=ue&&/Firefox/i.test(navigator.userAgent),Ce=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],we=Ce.slice(3),Te={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},xe={shift:{order:100,enabled:!0,fn:le},offset:{order:200,enabled:!0,fn:ae,offset:0},preventOverflow:{order:300,enabled:!0,fn:se,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:re},arrow:{order:500,enabled:!0,fn:Z,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:ne,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:de},hide:{order:800,enabled:!0,fn:ce},computeStyle:{order:850,enabled:!0,fn:J,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:G,onLoad:Y,gpuAcceleration:void 0}},ke={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:xe},Ie=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ve(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=ge(this.update.bind(this)),this.options=Ee({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(Ee({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){r.options.modifiers[t]=Ee({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return Ee({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&o(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return be(e,[{key:"update",value:function(){return B.call(this)}},{key:"destroy",value:function(){return M.call(this)}},{key:"enableEventListeners",value:function(){return $.call(this)}},{key:"disableEventListeners",value:function(){return K.call(this)}}]),e}();Ie.Utils=("undefined"!=typeof window?window:e).PopperUtils,Ie.placements=Ce,Ie.Defaults=ke,t.default=Ie}).call(t,n(124))},function(e,t,n){"use strict";function r(e,t,n){return function(r){r.listenerId===e&&(n(r),d.removeListener(t))}}function o(e){(0,l.isFunction)(e)&&c.push(e)}function i(){c=[]}function a(){c.forEach(function(e){(0,l.isFunction)(e)&&e(),c.shift()})}Object.defineProperty(t,"__esModule",{value:!0}),t.botEventEmmiter=void 0,t.addCommandToBotQueue=o,t.clearBotCommands=i,t.runBotCommands=a;var s=n(9),l=n(0),c=[],d=t.botEventEmmiter=new function(){var e={},t={};this.dispatchEvent=function(t,n,r){n===e[t]&&s.internalEventListener.dispatchEvent(t,Object.assign({listenerId:n},r))},this.addListener=function(n,o,i){d.removeListener(n),e[n]=i;var a=r(i,n,o);t[i]||(t[i]={}),t[i][n]=a,s.internalEventListener.addListener(n,a)},this.removeListener=function(n){var r=e[n];if(r){var o=t[r][n];s.internalEventListener.removeListener(n,o),e[n]=null,delete e[n]}}}},function(e,t,n){"use strict";function r(){try{return["TUUD4GR54UIT","FR6WJFXU3UWQ","VFU6ONL15QEY"].indexOf((0,b.getProduct)(y.eventTrackData[E.cacheGet](y.productIdParameter)))>-1}catch(e){return h.logger.log("isTrimble "+e),!1}}function o(e,t,n,r){var o=r.onDone,i=r.onFailed,s=r.onClick;try{var l=n.positionType,d={matchCssSelector:!0,cssSelector:e,matchTextRule:!1,textRuleOperator:null,textRuleValues:null};(0,p.findInAll)(d,null,function(e){if(e&&e.element){var r=!("fixed"===l||"absolute"===l),d=e.element;k=d;!r&&(0,g.isElementVisible)(d)||r?(c(n,t,s),o&&o(e)):(a(),i&&i())}else i&&i()})}catch(e){h.logger.logInternalError(new Error("findWidgetContainer - error "+e)),i&&i()}}function i(e){if(e.target===k)return e.preventDefault(),e.stopImmediatePropagation(),!1}function a(){O.forEach(function(e){(0,g.removeEventListener)(document,e,i)})}function s(){O.forEach(function(e){(0,g.removeEventListener)(document,e,i),(0,g.addEventListener)(document,e,i)})}function l(e,t,n){try{var r=n.onDone,o=n.onFound,i=(n.onClick,n.onFailed,t.positionType),a=!("fixed"===i||"absolute"===i),s=e.element;o&&o(e);var l=document.querySelector("#apt-widget");if(l&&r){if(l.classList.remove("apt-hidden"),l.style.position=a?"relative":"absolute",l.style.width="0px",l.style.height="0px",l.style.left="0px",l.style.top="0px",l.style.zIndex=x,a){if(a){var c=s.tagName.toLowerCase();if(/br|input|img|select|textarea/.test(c)){var d=l.parentNode===s.parentNode;d||s.parentNode.appendChild(l)}else s!==l.parentNode&&s.appendChild(l)}}else l.parentNode!==(0,C.getBody)()&&(0,C.getBody)().appendChild(l);r&&r(e)}}catch(e){h.logger.logInternalError(new Error("injectWidget - "+e))}}function c(e,t,n){var r="API"===e.fetchKcType,o=!0===e.isNewAPI,i=!("fixed"===e.positionType||"absolute"===e.positionType);!r||o?(N=function(t){var i=t.kcId;i===e.kcId&&(A=i,u(n,r,o),o?((0,v.runBotCommands)(),v.botEventEmmiter.removeListener("WIDGET_LOADED")):m.botEventEmmiter.removeListener("WIDGET_LOADED"))},o?v.botEventEmmiter.addListener("WIDGET_LOADED",N,t):m.botEventEmmiter.addListener("WIDGET_LOADED",N,t),A!==e.kcId||i?A===e.kcId&&i||a():u(n,r,o)):a()}function d(e,t,n,r){var i=r.onDone,s=r.onFound,c=r.onClick,d=r.onFailed;try{"string"!=typeof e&&h.logger.logInternalError(new Error("injectWidgetToTargetElement - cssSelector should be a string "+e)),n.isNewAPI?v.botEventEmmiter.removeListener("WIDGET_FAILED"):m.botEventEmmiter.removeListener("WIDGET_FAILED"),L=function(e){e.kcId===n.kcId&&(A="",a())},n.isNewAPI?v.botEventEmmiter.addListener("WIDGET_FAILED",L,t):m.botEventEmmiter.addListener("WIDGET_FAILED",L,t),o(e,t,n,{onClick:c,onDone:function(e){s&&s(e),l(e,n,{onDone:i})},onFailed:d})}catch(e){h.logger.logInternalError(new Error("injectWidgetToTargetElement - error "+e))}}function u(e,t,n){try{(0,g.removeEventListener)(document,"click",I),I=function(t){try{if(t.target===k||k.contains(t.target)){t.preventDefault(),t.stopImmediatePropagation();var n=(0,C.isIframe)()?(0,w.getIframeId)():T.TOP_WINDOW_ID;f.internalEventListener.dispatchEvent(S.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK,n),e()}else r()&&f.internalEventListener.dispatchEvent(S.BOT_INTERNAL_EVENTS.BOT_CLICK_OUTSIDE);return!1}catch(e){h.logger.log("Embedded bot click event "+e)}},t&&!n||(s(),(0,g.addEventListener)(document,"click",I))}catch(e){h.logger.logInternalError(new Error("addClickListenerToMappedElement - error "+e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.findWidgetContainer=o,t.removeEmbeddedListeners=a,t.injectWidgetToTargetElement=d,t.addClickListenerToMappedElement=u;var p=n(17),f=n(9),g=n(0),h=n(3),m=n(74),v=n(51),b=n(20),y=n(4),E=n(5),S=n(22),C=n(2),w=n(13),T=n(46),x="99998",k=null,I=null,A="",O=["dblclick","mousedown","mouseover"],N=void 0,L=void 0},function(e,t,n){"use strict";function r(e,t){if((0,d.isBlank)(e)||!t)return!0;var n=(0,f.getEnvironment)(g.eventTrackData[h.cacheGet](g.productIdParameter));if(c.logger.debugMode&&n!==m.PROD_ENVIRONMENT)return!0;var r=(0,s.getCachedConfig)(l.BOT_CHECKSUM_KEY),o=(0,s.getConfig)(l.ENGAGEMENT_CHECKSUM_URL_CONFIG);if(!o)return!0;if(!r&&o)return c.logger.logInternalError(new Error("the bot checksum is invalid since there is URL configured but no checksum to validated against")),!1;var i=r[e];if(!i&&!Array.isArray(i)||(0,d.isEmptyArr)(i))return c.logger.logInternalError(new Error("the bot checksum is invalid since there is URL configured but no checksum to validated against, array is empty")),!1;var a=(0,u.orderAlphabetically)(t),v=(0,p.sha256)(JSON.stringify(a)),b=i.indexOf(v)>-1;return b||(c.logger.logInternalError(new Error("the bot checksum is invalid, js checksum: "+v+". engagement checksums:\n         "+JSON.stringify(i))),c.logger.logInternalError(new Error("the bot checksum was done on: "+JSON.stringify(a)))),b}function o(e,t,n){for(var o=0;o<n.length;o++){if(!0===r(e,n[o](t)))return!0}return!1}function i(e,t){var n=(0,s.getCachedConfig)(l.CHECKSUM_VERSION),r=void 0;return r=void 0===n||n<=2?[C,y]:3===n?[v.filterKcConfigV3]:[C,y],o(e,t,r)}function a(e,t){var n=(0,s.getCachedConfig)(l.CHECKSUM_VERSION),r=void 0;return r=void 0===n||n<=2?[w,E]:3===n?[v.filterKcContentV3]:[w,E],o(e,t,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateContentChecksum=t.validateConfigChecksum=void 0;var s=n(2),l=n(36),c=n(3),d=n(0),u=n(27),p=n(73),f=n(20),g=n(4),h=n(5),m=n(8),v=n(128),b=n(126),y=b.filterKcConfigV1,E=b.filterKcContentV1,S=n(127),C=S.filterKcConfigV2,w=S.filterKcContentV2;t.validateConfigChecksum=i,t.validateContentChecksum=a},function(e,t,n){"use strict";function r(e,t){var n=l[e.type];return n.matchRules(e.rules,e.operator,t[n.getAttribute()])}function o(e,t){var n=e.rules;return!!(0,s.isEmptyArr)(n)||("all"===e.operator?n.every(function(e){return r(e,t)}):n.some(function(e){return r(e,t)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.matchMultiTypeRules=void 0;var i=n(131),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=n(0),l={URL:a.default};t.matchMultiTypeRules=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventCache=void 0;var r=n(5);t.eventCache=new r.LocalCache},function(e,t,n){"use strict";function r(e){return!(e.startsWith("--")||x.test(e[0])||k.test(e))}function o(e){return new A({selectors:["class","tag","nthchild"]}).getSelector(e)}function i(e){var t="";try{var n=(0,E.getConfig)("elementAttributeWhitelist")||[],r=function(e,t,r){return f(e,(0,w.getTagName)(r).toLowerCase(),n,C.EXTRA_ATTRIBUTES_BY_ELEMENT_TYPE)&&g(e,t)};t=(0,v.default)(e,{attr:r})}catch(n){h.logger.logInternalError(n,"Selector finder failed, retrying with old method"),t=N.getSelector(e)}return t=t.replace(/\.\\_/g,"._"),u(t)}function a(e){return u(new A({selectors:["class","tag","nthchild"]}).getSelector(e))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,r=["id","class","tag","nthchild","attribute"],o={};r.forEach(function(r){var i={selectors:[r],attributeWhiteList:(0,E.getConfig)("elementAttributeWhitelist"),attributeWhiteListByType:C.EXTRA_ATTRIBUTES_BY_ELEMENT_TYPE,allowMulti:t};n=new A(i),o[r]=n.getSelector(e,null,i)});var a=i(e),s=(0,y.checkIfSelectorIsInWhitelist)(o.attribute);return o.defaultSelector=s?o.attribute:a,o.parent=i((0,T.getParentElement)(e)),o}function l(e,t,n,r){(0,E.isIframe)()||(0,S.createSubscribeCallbackRequest)("guide",{type:"getDifferentSelector",cssSelector:t,selectorType:n},e,r)}function c(e){for(var t=[],n=0;n<e.length;n++)"["===e[n]&&"\\"!==e[n-1]?t.push(e[n]):"]"===e[n]&&(n===e.length-1||n+1<e.length&&D.indexOf(e[n+1])>-1)&&t.push(e[n]);return 1===t.length}function d(e){var t=[];return e.split(" ").forEach(function(e,n){if(!(0,b.isBlank)(e))if(n>0){var r=t[t.length-1];L.some(function(e){return r.endsWith(e)})||F.some(function(e){return e.test(r)})?(r+=" "+e,t[t.length-1]=r):c(r)?(r+=" "+e,t[t.length-1]=r):t.push(e)}else t.push(e)}),t}function u(e){var t=d(e),n=[];return t.forEach(function(e,r){if([">","+","~"].indexOf(e)>-1)n.push(e);else{var o=(t.length,p(e.trim()));n.push(o)}}),n.join(" ")}function p(e){var t=/(\\\d{1})(\d)(\s)?(.*)/,n=e.startsWith("#")?"id":e.startsWith(".")?"class":"",r=e.substring(1,e.length),o=-1!==r.search(t),i=-1!==r.indexOf("\\ "),a=-1!==r.indexOf("\\."),s=-1!==r.search(_);if(o||i||a||s){if(o){var l=function(e,t,n,r,o,i,a){return[n,o].join("")};r=r.replace(t,l)}return s&&(r=r.replaceAll(_,":"),r=r.replaceAll(": ",":")),i=-1!==r.indexOf("\\ "),i&&(r=r.split("\\ ").join(" ")),a=-1!==r.indexOf("\\."),a&&(r=r.split("\\.").join(".")),"class"===n?"["+n+'*="'+r+'"]':"["+n+'="'+r+'"]'}return e}function f(e,t,n,r){return O.call(I,e)<0&&(0,b.matchEither)(n,e)||r[t]&&r[t].indexOf(e)>-1}function g(e,t){return!("href"===e&&t.startsWith("javascript:"))}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidClassName=t.getSelectorParts=t.iframeGetDifferentSelectors=t.getFixedSelector=t.getDifferentSelectors=t.getElementSelectorAlternative=t.getElementCssSelector=t.CssSelectorGenerator=void 0,t.getAlternateSelector=o;var h=n(3),m=n(180),v=function(e){return e&&e.__esModule?e:{default:e}}(m),b=n(0),y=n(57),E=n(2),S=n(13),C=n(4),w=n(7),T=n(18),x=new RegExp("^\\d+$"),k=new RegExp("^-\\d+"),I=["id","class","style","data-aptr-highlighted","data-aptr-element-id","data-aptr-element-highlighted","data-aptr-element-highlighted"],A=void 0,O=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};t.CssSelectorGenerator=A=function(){function e(e){null==e&&(e={}),this.options={},this.setOptions(this.default_options),this.setOptions(e)}return e.prototype.default_options={selectors:["id","class","tag","nthchild","attribute"],attributeWhiteList:[],attributeWhiteListByType:[]},e.prototype.setOptions=function(e){var t=void 0,n=void 0,r=void 0;null==e&&(e={}),n=[];for(t in e)r=e[t],this.default_options.hasOwnProperty(t)?n.push(this.options[t]=r):n.push(void 0);return n},e.prototype.isElement=function(e){return!(1!==(null!=e?e.nodeType:void 0))},e.prototype.getParents=function(e){var t=void 0,n=void 0;if(n=[],this.isElement(e))for(t=e;this.isElement(t)&&"html"!==(0,w.getTagName)(t).toLowerCase();)n.push(t),t=(0,T.getParentNode)(t);return n},e.prototype.getTagSelector=function(e){return this.sanitizeItem((0,w.getTagName)(e).toLowerCase())},e.prototype.sanitizeItem=function(e){var t=void 0;return t=e.split("").map(function(e){return":"===e?"\\"+":".charCodeAt(0).toString(16).toUpperCase()+" ":/[ !"#$%&'()*+,.\/;<=>?@\[\\\]^`{|}~]/.test(e)?"\\"+e:escape(e).replace(/\%/g,"\\")}),t.join("")},e.prototype.getIdSelector=function(e){var t=void 0,n=void 0;return t=e.getAttribute("id"),null==t||""===t||/\s/.exec(t)||/^\d/.exec(t)||(n="#"+this.sanitizeItem(t),1!==(0,T.findElementsInShadowDom)(n,e.ownerDocument).length)?null:n},e.prototype.getClassSelectors=function(e){var t=void 0,n=void 0,o=void 0;return o=[],t=e.getAttribute("class"),null!=t&&(t=t.replace(/\s+/g," "),""!==(t=t.replace(/^\s|\s$/g,""))&&(o=function(){var e=void 0,o=void 0,i=void 0,a=void 0;for(i=t.split(/\s+/),a=[],e=0,o=i.length;e<o;e++)n=i[e],r(n)&&a.push("."+this.sanitizeItem(n));return a}.call(this))),o},e.prototype.getAttributeSelectors=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=void 0,l=void 0;for(a=[],o=e.attributes,l=(0,w.getTagName)(e).toLowerCase(),n=0,r=o.length;n<r;n++)t=o[n],i=t.nodeName,f(i,l,this.options.attributeWhiteList,this.options.attributeWhiteListByType)&&(s="["+t.nodeName,(0,b.isBlank)(t.nodeValue)?s+="":t.nodeValue.indexOf("'")>-1?s+='="'+t.nodeValue+'"':s+="='"+t.nodeValue+"'",s+="]",a.push(s));return a},e.prototype.getNthChildSelector=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,a=void 0;if(null!=(o=(0,T.getParentNode)(e)))for(t=0,a=o.childNodes,n=0,r=a.length;n<r;n++)if(i=a[n],this.isElement(i)&&(t++,i===e))return":nth-child("+t+")";return null},e.prototype.testSelector=function(e,t,n,r){var o=void 0,i=void 0;if(o=!1,null!=t&&""!==t){var a=!(0,b.isEmptyArr)(n),s=d(t),l=s.some(function(e){return e.startsWith("[")&&a&&n.some(function(t){return e.indexOf(t)>-1})});if(r&&l)return!0;i=(0,T.findElementsInShadowDom)(t,e.ownerDocument),1===i.length&&i[0]===e&&(o=!0)}return o},e.prototype.getAllSelectors=function(e,t){var n=void 0;n={t:null,i:null,c:null,a:null,n:null};var r=t?t.selectors:this.options.selectors;return O.call(r,"tag")>=0&&(n.t=this.getTagSelector(e)),O.call(r,"id")>=0&&(n.i=this.getIdSelector(e)),O.call(r,"class")>=0&&(n.c=this.getClassSelectors(e)),O.call(r,"attribute")>=0&&(n.a=this.getAttributeSelectors(e)),O.call(r,"nthchild")>=0&&(n.n=this.getNthChildSelector(e)),n},e.prototype.testUniqueness=function(e,t){var n=void 0,r=void 0;if(r=(0,T.getParentNode)(e),(0,b.isBlank)(t))throw new Error("got empty selector for element: "+JSON.stringify(e));return n=(0,T.findElementsInShadowDom)(t,r),1===n.length&&n[0]===e},e.prototype.addTagSelector=function(e,t,n){var r=void 0,o=void 0,i=void 0,a=void 0;if(null!=n)for(r=t.map(function(e){return n+e}),a=0,o=r.length;a<o;a++)if(i=r[a],this.testUniqueness(e,i))return i;return null},e.prototype.getSelectorWithTag=function(e,t,n){var r=void 0,o=void 0,i=void 0,a=void 0,s=[];if(null!=n)for(r=t.map(function(e){return n+e}),a=0,o=r.length;a<o;a++)i=r[a],this.testUniqueness(e,i)&&s.push(i);return s.length>0?s:null},e.prototype.getCombinationsSelector=function(e,t,n){var r=void 0,o=void 0,i=void 0,a=void 0,s=[];if(1===t.length&&-1!==t[0].indexOf("nth-child")){var l=this.getSelectorWithTag(e,t,n);if(l)return l}for(a=this.getCombinations(t),o=0,i=a.length;o<i;o++)r=a[o],this.testUniqueness(e,r)&&s.push(r);if(s.length>0)return s.length>5?s.slice(0,5):s;var c=this.getSelectorWithTag(e,t,n);return c||null},e.prototype.testCombinations=function(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=void 0,l=void 0,c=void 0,d=void 0;if(1===t.length&&-1!==t[0].indexOf("nth-child")){var u=this.addTagSelector(e,t,n);if(u)return u}for(d=this.getCombinations(t),l=0,c=d.length;l<c;l++)if(s=d[l],!this.shouldBeSkipped(s,r)&&("attribute"!==o?this.testUniqueness(e,s):this.testSelector(e,s,i,a)))return s;var p=this.addTagSelector(e,t,n);return p||null},e.prototype.getAllUniqueSelectors=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,a=[];for(i=this.getAllSelectors(e),o=this.options.selectors,n=0,r=o.length;n<r;n++)switch(o[n]){case"id":null!=i.i&&a.push(i.i);break;case"tag":null!=i.t&&this.testUniqueness(e,i.t)&&a.push(i.t);break;case"class":null!=i.c&&0!==i.c.length&&(t=this.getCombinationsSelector(e,i.c,i.t))&&a.concat(t);break;case"attribute":null!=i.a&&0!==i.a.length&&(t=this.getCombinationsSelector(e,i.a,i.t))&&a.concat(t);break;case"nthchild":null!=i.n&&(t=this.getCombinationsSelector(e,[i.n],i.t),t&&a.concat(t),t=this.getCombinationsSelector(e,[i.n].concat(i.c),i.t),t&&a.concat(t),a.push(i.n))}return a.length>0?a:["*"]},e.prototype.shouldBeSkipped=function(e,t){return!!t&&t.reduce(function(e,t){return e.concat(t.split(">"))},[]).indexOf(e)>-1},e.prototype.getUniqueSelector=function(e,t,n){var r=void 0,o=void 0,i=void 0,a=void 0,s=void 0;for(a=n?n.selectors:this.options.selectors,o=0,i=a.length;o<i;o++)if(s=a[o],r=this.getSelectorByType(e,t,s,n))return r;return null},e.prototype.getSelectorByType=function(e,t,n,r){var o=void 0,i=this.getAllSelectors(e,r);switch(n){case"id":if(null!=i.i&&!this.shouldBeSkipped(i.i,t))return i.i;break;case"tag":if(null!=i.t&&!this.shouldBeSkipped(i.t,t)&&this.testUniqueness(e,i.t))return i.t;break;case"class":if(null!=i.c&&0!==i.c.length&&(o=this.testCombinations(e,i.c,i.t,t,n)))return o;break;case"attribute":if(null!=i.a&&0!==i.a.length&&(o=this.testCombinations(e,i.a,i.t,t,n,r.attributeWhiteList,r.allowMulti)))return o;break;case"nthchild":if(null!=i.n)return(o=this.testCombinations(e,[i.n],i.t,t,n))||(i.c&&(o=this.testCombinations(e,[i.n].concat(i.c),i.t,t,n))?o:i.n)}return null},e.prototype.getSelector=function(e,t,n){var r=void 0,o=void 0,i=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,u=void 0,p=void 0;for(r=[],c=this.getParents(e),i=0,s=c.length;i<s;i++)o=c[i],null!=(u=this.getUniqueSelector(o,t,n))&&r.push(u);for(p=[],a=0,l=r.length;a<l;a++)if(o=r[a],p.unshift(o),d=p.join(" > "),this.testSelector(e,d,n?n.attributeWhiteList:[],n&&n.allowMulti))return d;return null},e.prototype.testUniqueRecursive=function(e,t,n,r,o,i){if(o.length<=t||n>=5)return null;o[t].length<=n&&this.testUniqueRecursive(e,++t,0,r,o,i)},e.prototype.getMultipleSelectors=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0;for(t=[],s=this.getParents(e),r=0,i=s.length;r<i;r++)n=s[r],null!=(c=this.getAllUniqueSelectors(n))&&t.push(c);var u=t[0];for(o=0,a=u.length;a<a;o++)for(var p=1,f=t.length;p<f;p++);for(d=[],o=0,a=t.length;o<a;o++)if(n=t[o],d.unshift(n),l=d.join(" > "),this.testSelector(e,l))return l;return null},e.prototype.getCombinations=function(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=void 0;for(null==e&&(e=[]),s=[[]],t=r=0,i=e.length-1;0<=i?r<=i&&r<5:r>=i;t=0<=i?++r:--r)for(n=o=0,a=s.length-1;0<=a?o<=a:o>=a;n=0<=a?++o:--o)h.logger.log("testing combinations between: "+JSON.stringify(s[n])+" and items: "+JSON.stringify(e)),s.push(s[n].concat(e[t]));return s.shift(),s.sort(function(e,t){return e.length-t.length}),s=s.map(function(e){return e.join("")})},e}();var N=new A,L=["\\","\\."],_=new RegExp(/\\3A/g),F=[new RegExp(/\\\d{2}$/),_],D=[".","#","["];t.CssSelectorGenerator=A,t.getElementCssSelector=i,t.getElementSelectorAlternative=a,t.getDifferentSelectors=s,t.getFixedSelector=u,t.iframeGetDifferentSelectors=l,t.getSelectorParts=d,t.isValidClassName=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=(0,h.getConfig)("elementAttributeWhitelist");return t&&t.some(function(t){return new RegExp("\\["+t+"(=.*|)\\]").test(e)})}function i(e){for(var t=1,n=0;n<e.length-1;n+=1)e[n].length+e[n].index!==e[n+1].index&&(t+=1);return t}function a(e){return e.some(function(e){return void 0!==x.find(function(t){return t.test(e.selector)})})}function s(e){var t=g.default.calculate(e);return p(t,1)[0]||{parts:[],specificity:""}}function l(e){return a(s(e).parts)}function c(e,t){var n=t;if(e>1&&e<=10)t===m&&(n=v);else if(e>10||e<1)return b;return n}function d(e,t){var n=new RegExp(/\[\s*((\bdata-id\b)|(\bid\b))=.*\]\s*/);return 1===t&&(o(e)||n.test(e))?m:v}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectorStrengthManager=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.checkIfSelectorIsInWhitelist=o,t.checkIsRandomIdSelector=l;var f=n(171),g=function(e){return e&&e.__esModule?e:{default:e}}(f),h=n(2),m="STRONG",v="MEDIUM",b="WEAK",y=new RegExp(/(^| )[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i),E=new RegExp(/(^| )#.+_(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+){8,}$/),S=new RegExp(/(^| )#.+gen[0-9]{4}/),C=new RegExp(/(^| )#.+-[0-9]{4}.*$/),w=new RegExp(/(^| )#ember[0-9]{4}$/),T=new RegExp(/(^| )#id[0-9a-zA-Z]{3}$/),x=[y,E,S,C,w,T],k={"0,1,0,0":function(){return m},"0,0,1,0":d,"0,1,0,1":function(){return m},"0,1,1,0":function(){return m},"0,1,1,1":function(){return m},"0,1,1,2":function(){return m},"0,2,0,0":function(){return v},"0,2,0,1":function(){return v},"0,2,1,0":function(){return v},"0,2,1,1":function(){return v},"0,2,1,2":function(){return v},"0,2,2,0":function(){return v},"0,2,2,1":function(){return v},"0,2,2,2":function(){return v},"0,0,2,0":function(){return v}};t.SelectorStrengthManager=function(){function e(){r(this,e)}return u(e,[{key:"checkSelectorStrength",value:function(e,t){try{var n=s(e),r=n.parts,o=n.specificity;if(i(r)>=4||a(r))return b;var l=k[o];return c(t,l?l(e,t):b)}catch(e){return b}}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=(0,c.removeFromQueryParam)(W);(e=(0,c.removeFromQueryParam)(z))!==f.windowRef.location.href&&history.replaceState("",document.title,e)}function i(e,t){var n={"apt-step-footer-buttons":"px-step-navigation-buttons","apt-step-footer-next":"px-step-navigation-next","apt-step-footer-button":"px-step-navigation-button","apt-step-footer":"px-step-navigation"};return e.querySelector(".px-step-navigation")?"."+n[t]:"."+t}function a(){var e=!!f.windowRef.angular;return(0,A.getConfig)("queryParamsInHash")&&e}function s(e,t,n){n?(f.windowRef.history.replaceState({},f.documentRef.title,e),"function"==typeof t&&t()):f.windowRef.location.href=e}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectorByVersion=t.GuideDrawerIframe=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(0),d=n(33),u=r(d),p=n(11),f=n(4),g=n(5),h=n(3),m=n(10),v=n(80),b=n(9),y=n(6),E=n(17),S=r(E),C=n(14),w=r(C),T=n(7),x=n(32),k=n(77),I=r(k),A=n(2),O=n(109),N=r(O),L=n(71),_=r(L),F=n(16),D=n(8),B=n(110),R=n(18),P=n(19),M=n(21),U=n(31);U.defaultOptions.className="vex-theme-os",U.defaultOptions.closeAllOnPopState=!1;var j=D.TAB_INDEX_START,H=void 0,$="div",V="classList",K=2,q="aptCurrentGuideUrl",W="aptGuideId",z="aptActivationType",G=function(e,t,n,r){function d(){return it||(0,A.getBody)()}function C(e){return e.querySelectorAll("#px-editor-v2-content").length>0}function k(e){-1!==[Ut,jt,Ht,$t].indexOf(e.target)&&e.stopImmediatePropagation()}function O(){["click","mousedown","mouseup","touchstart"].forEach(function(e){(0,c.addEventListener)(f.documentRef,e,k)})}function L(){["click","mousedown","mouseup","touchstart"].forEach(function(e){(0,c.removeEventListener)(f.documentRef,e,k)})}function W(e){return"object"===("undefined"==typeof HTMLElement?"undefined":l(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":l(e))&&1===e.nodeType&&"string"==typeof e.nodeName}function z(){var e=f.eventTrackData[g.cacheGetAll](),t=JSON.parse(f.windowRef.sessionStorage.getItem("apt.localCache"));return(0,A.getConfig)("crossProductEngagement")&&t&&(e=t),e}function G(e){var t=A.trackMultiStepEndpoint;if(st&&!0!==wt){2===e&&(wt=!0);var n=[];n=(0,c.addParameters)(z(),n),(0,c.addParameters)({ei:bt.engagementId||null,ecoi:bt.contentId||null,ems:e||null,evi:bt.matchEventId||null,ent:K,acci:bt.accountId,exi:bt.executionId,ext:bt.executionTimestamp,cl:bt.contentLocale,at:bt.activationType||"a"},n),Kt&&"kc"===bt.activationType&&(0,c.addParameters)(Kt,n);var r=(0,P.getGlobalContext)();r&&(0,c.addParameters)({gcx:JSON.stringify(r)},n),n=(0,c.addParameters)((0,M.getWebContext)(),n),t+="?"+(0,c.convert2Parameters)(n),p.AjaxUtil.getData(t)}}function Y(e,t){if(st&&!I.default.wasStepTracked(bt.executionId,e)){I.default.markStepTracked(bt.executionId,e),(0,A.getConfig)("clientSideEngagementTracking")&&0===t&&G(1);var n=A.trackStepEndpoint,r=[];r=(0,c.addParameters)(z(),r),(0,c.addParameters)({ei:bt.engagementId,ecoi:bt.contentId,cosi:e,evi:bt.matchEventId,cossn:t,ent:K,acci:bt.accountId,exi:bt.executionId,ext:bt.executionTimestamp,cl:bt.contentLocale,at:bt.activationType||"a"},r);var o=(0,P.getGlobalContext)();o&&(0,c.addParameters)({gcx:JSON.stringify(o)},r),r=(0,c.addParameters)((0,M.getWebContext)(),r),n+="?"+(0,c.convert2Parameters)(r),p.AjaxUtil.getData(n);var i=(0,F.toExternalEventGuide)(bt,"Viewed Step");i.stepNumber=t+1,b.internalEventListener.dispatchEvent("engagementViewedStep",i)}}function X(e){return["TOOLTIP","HOTSPOT"].indexOf(e.type)>-1&&e.elementSelector||"DIALOG"===e.type&&("BAR"===e.dialogViewType&&e.barPosition||e.positionHorizontal&&e.positionVertical)}function J(e){vt.forEach(function(t,n){t.id===e&&(ht=n)}),oe()}function Q(e){Object.keys(Pt).forEach(function(e){var t=Pt[e],n=t.element,r=t.event,o=t.handler;(0,c.removeEventListener)(n,r,o),delete Pt[e]})}function Z(e){kt&&e&&e.isDom&&((0,c.removeEventListener)(e.element,"click",kt),(0,c.removeEventListener)(e.element,"contextmenu",kt),(0,c.removeEventListener)(e.element,"mouseenter",kt),Pe(e),It&&(0,c.removeEventListener)(e.element,"keydown",It))}function ee(e){Q(),e&&e.isDom&&Z(e),!(0,A.isIframe)()&&e&&!e.isDom&&e.iframeSource&&S.default.removeElementHandlers(e.iframeSource),B.hotspotEventHandler.removeListener()}function te(e,t){var n=!1;return t&&"HOTSPOT"!==t.type&&(n=t.overlay&&t.overlay.modal?t.overlayFill>0:e&&e.modal&&e.overlayFill>0),n}function ne(e){return!te(e,vt[mt])}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e||(e=document.querySelector(".apt-hotspot-element")),e&&e.parentNode&&d().removeChild(e)}function oe(e){gt=ht,mt=ht,ye(),Mt=!1,ft.length>0&&ft.pop().close(),Mt=!0,ee();for(var t=vt[mt];mt<vt.length&&!X(t);)t=vt[++mt];if(void 0===t)return ft[0]&&ft.pop().close(),ee(),re(),void(yt&&yt());ht=mt+1;for(var n=vt[ht];ht<vt.length&&!X(n);)n=vt[++ht];try{e&&e>0?setTimeout(function(){ae(t.elementSelector,t.type,function(n,r){if(("TOOLTIP"===r||"HOTSPOT"===r)&&null===n)return void(t.skippable?oe(e):(Je(),yt&&yt(t.elementSelector)));me(n,bt.footer,t.content,bt,t)},void 0,t.autoScroll,t.searchTimeout,t.skippable)},e):["TOOLTIP","HOTSPOT"].indexOf(t.type)>-1?setTimeout(function(){ae(t.elementSelector,t.type,function(n,r){if(["TOOLTIP","HOTSPOT"].indexOf(r)>-1&&null===n)return void(t.skippable?oe(e):(Je(),yt&&yt(t.elementSelector)));me(n,bt.footer,t.content,bt,t)},void 0,t.autoScroll,t.searchTimeout,t.skippable)},0):me(null,bt.footer,t.content,bt,t)}catch(e){throw pe(),Se(),e}}function ie(e,t){try{var n=bt.engagementId,r=e?e.cssSelector:"MISSING",o=n+"_"+r;if(!Vt[o]){Vt[o]=!0;var i={entityId:n,errorType:"ENGAGEMENT_MISSING_ELEMENT",engagementErrorData:{mappedElementId:r,engagementId:n,engagementType:"IN_APP_GUIDE",stepId:vt[mt]&&vt[mt].id||""},flowType:"ENGAGEMENT",exceptionDetails:"element is not found after: "+t,aptrinsicId:f.eventTrackData.data[f.aptrinsicIdParam]||null};h.logger.logInternalMessage(i)}}catch(e){h.logger.log("error sending element not found log.\n"+e.message),Se()}}function ae(e,t,n,r,o,i,a){var s=i>0?i:ct;if(-1===["TOOLTIP","HOTSPOT"].indexOf(t))return void n(null,t);var l=(new Date).getTime(),d=void 0;(0,E.findInAll)(e,(0,y.getRegisteredIframes)(),function(u){r=r||l;var p=l-r;if(p>s)return st&&!a&&ie(e,p),void n(null,t);if(u||setTimeout(function(){ae(e,t,n,r,o,i,a)},500),u&&u.element){if(d=u.element,(0,c.isElementVisible)(d,!1,null)&&p<=s)return void n({isDom:!0,element:d},t);setTimeout(function(){ae(e,t,n,r,o,i,a)},500)}else u&&u.iframeData&&setTimeout(function(){S.default.getElementLocation(u.iframeData,e,function(e){n({isDom:!1,elementRect:e[0],iframeSource:u.iframeData,iframeOrigin:y.IframeData.iframeOrigin},t)})},o?800:0)},!1,!1,o)}function se(){ht=mt;for(var e=vt[--mt];!X(e);)e=vt[--mt];gt=mt-1;for(var t=vt[gt];gt>-1&&!X(t);)t=vt[--gt];ae(e.elementSelector,e.type,function(t){if(null===t&&"DIALOG"!==e.type)return void se();try{me(t,bt.footer,e.content,bt,e)}catch(e){throw pe(),Se(),e}},void 0,e.autoScroll,e.searchTimeout,e.skippable)}function le(e){e.classList.contains("apt-guide-arrow-bottom")&&e.classList.remove("apt-guide-arrow-bottom"),e.classList.contains("apt-guide-arrow-top")&&e.classList.remove("apt-guide-arrow-top"),e.classList.contains("apt-guide-arrow-right")&&e.classList.remove("apt-guide-arrow-right"),e.classList.contains("apt-guide-arrow-left")&&e.classList.remove("apt-guide-arrow-left"),e.classList.remove("apt-guide-arrow-top-left"),e.classList.remove("apt-guide-arrow-top-right"),e.classList.remove("apt-guide-arrow-bottom-right"),e.classList.remove("apt-guide-arrow-bottom-left"),e.classList.remove("apt-guide-arrow-top-center"),e.classList.remove("apt-guide-arrow-center")}function ce(e,t,n){if(le(t),(0,c.isNotEmptyArr)(e)){var r="",o="",i="";if("top"===e[1]?(r="apt-guide-arrow-bottom",n&&(o=n+" transparent transparent transparent"),"right"===e[0]?(t.style.borderBottomLeftRadius="0",i="apt-guide-arrow-bottom-left"):"left"===e[0]?(t.style.borderBottomRightRadius="0",i="apt-guide-arrow-bottom-right"):i="apt-guide-arrow-center"):"bottom"===e[1]?(r="apt-guide-arrow-top",n&&(o="transparent transparent "+n+" transparent"),"right"===e[0]?(t.style.borderTopLeftRadius="0",i="apt-guide-arrow-top-left"):"left"===e[0]?(t.style.borderTopRightRadius="0",i="apt-guide-arrow-top-right"):i="apt-guide-arrow-center"):"left"===e[0]?(r="apt-guide-arrow-right",n&&(o="transparent transparent transparent "+n)):(r="apt-guide-arrow-left",n&&(o="transparent "+n+" transparent transparent")),t[V].add(r),""!==i&&t[V].add(i),""!==o){var a="."+r+"::after{border-color: "+o+";",s=d(),l=document.getElementById("apt-guide-arrow-style");a+="}",null===l?l=(0,c.createStyle)(a,"apt-guide-arrow-style"):l.styleSheet?l.styleSheet.cssText=a:(l.innerHTML="",l.appendChild(document.createTextNode(a))),s.appendChild(l)}}}function de(e,t,n,r,o,i,a){r||(r=0);var s=(0,m.detectIE)(),l=s&&s<79,d=e.isDom?e.element.getBoundingClientRect():e.elementRect,u=(0,m.getPageWidth)(),p=(0,m.getPageHeight)(),f=l?Math.floor(d.height):d.height,g=l?Math.floor(d.width):d.width,h=l?Math.floor(d.left):d.left,v=l?Math.floor(d.top):d.top,b=l?Math.ceil(d.bottom):d.bottom,y=l?Math.ceil(d.right):d.right,E=h-r>=0?h-r:0;Ut.style.left=E+"px",Ut.style.top="0px",Ut.style.height=(0===v?0:v-r>0?v-r:0)+"px",t&&(Ut.style.background=(0,c.hexToRgba)(t,n?n/100:0)),jt.style.top=v+r+f+"px",jt.style.height=(0===b?0:p-parseInt(jt.style.top))+"px",t&&(jt.style.background=(0,c.hexToRgba)(t,n?n/100:0)),Ht.style.left="0px",Ht.style.top="0px",Ht.style.height=p+"px";var S=0===h?0:E;Ht.style.width=S+"px",t&&(Ht.style.background=(0,c.hexToRgba)(t,n?n/100:0));var C=h+g+r;if($t.style.left=C+"px",$t.style.top="0px",$t.style.height=p+"px",$t.style.width=(0===y?0:u-C)+"px",t&&($t.style.background=(0,c.hexToRgba)(t,n?n/100:0)),Ut.style.width=C-S+"px",jt.style.width=C-S+"px",Ut.style.left=S+"px",jt.style.left=S+"px",Ut.style.display="block",Ut.style.visibility="visible",jt.style.display="block",jt.style.visibility="visible",Ht.style.display="block",Ht.style.visibility="visible",$t.style.display="block",$t.style.visibility="visible",a>0?(Ut.style.setProperty("z-index",a),jt.style.setProperty("z-index",a),Ht.style.setProperty("z-index",a),$t.style.setProperty("z-index",a)):(Ut.style.removeProperty("z-index"),jt.style.removeProperty("z-index"),Ht.style.removeProperty("z-index"),$t.style.removeProperty("z-index")),i){var w=(0,c.createElement)("div","apt-guide-target-block");w.style.left=h-r+"px",w.style.width=g+2*r+"px",w.style.height=f+2*r+"px",w.style.top=v-r+"px",o.appendChild(w)}}function ue(){Ut.style.display="block",Ut.style.visibility="visible",jt.style.display="block",jt.style.visibility="visible",Ht.style.display="block",Ht.style.visibility="visible",$t.style.display="block",$t.style.visibility="visible"}function pe(){Ut.style.display="none",Ut.style.visibility="hidden",jt.style.display="none",jt.style.visibility="hidden",Ht.style.display="none",Ht.style.visibility="hidden",$t.style.display="none",$t.style.visibility="hidden"}function fe(e,t){var n=f.windowRef.sessionStorage,r=JSON.parse(n.getItem("apt.prevStepMap"));if(r||(r={}),r[t.id]={id:e.id,url:f.windowRef.location.href},n.setItem("apt.prevStepMap",JSON.stringify(r)),n.setItem("apt.stepId",t.id),(bt.engagementId||!1===st)&&n.setItem("apt.guideId",bt.engagementId),(0,A.getConfig)("crossProductEngagement")){n.getItem("apt.localCache")||n.setItem("apt.localCache",JSON.stringify(f.eventTrackData[g.cacheGetAll]()))}}function ge(e){var t=f.windowRef.sessionStorage;t.getItem(e)&&t.removeItem(e)}function he(){ge("apt.currentGuideId"),ge("apt.stepId"),ge("apt.guideId")}function me(e,t,n,r,o,i,a,s){switch(!0!==i&&(ye(),Mt=!1,ft.length>0&&ft.pop().close(),ee(e),_.default.removeAllHandlers(),Mt=!0,xt=e),o.type){case"TOOLTIP":case"DIALOG":return ze(e,t,n,r,o,i,a,s);case"HOTSPOT":return ke(e,r,o,i,a,s);case"BADGE":return;default:h.logger.logInternalError(new Error("Unsupported step type "+o.type))}}function ve(e){var t=e.hotspotSettings,n=".apt-hotspot-dynamic {",r=".apt-hotspot-dynamic:before {",o=e.zIndex||e.zindex;f.eventTrackData[g.cacheGet](f.productIdParameter)&&f.eventTrackData[g.cacheGet](f.productIdParameter).startsWith("AP-WVMZ1DVKRDJD")&&(o=9e3),o=isNaN(o)||null===o?2147483647:o,n+="z-index: "+o+";",r+="z-index: "+o+";",n+="background-color: "+t.spotColor+";",r+="box-shadow: 0px 0px 2px 2px "+t.animationColor+";",n+="height: "+t.spotSize+"px; width: "+t.spotSize+"px;",r+="height: "+t.spotSize+"px; width: "+t.spotSize+"px;",r+="animation:apt-hotspot-active "+t.animationDuration+"ms "+(t.animationCount?t.animationCount:"infinite")+" linear; animation-delay: "+(t.animationDelay?t.animationDelay:"0")+"ms;",n+="}",r+="}";var i=n+" "+r,a=document.getElementById("apt-hotspot-style");a?a.styleSheet?a.styleSheet.cssText=i:(a.innerHTML="",a.appendChild(document.createTextNode(i))):a=(0,c.createStyle)(i,"apt-hotspot-style"),d().appendChild(a)}function be(e,t,n,r,o){e.setAttribute("tabindex",j);var i=function(){re(e),Se(),Ne(t,n)};(0,c.addEventListener)(e,"click",i),(0,T.disableFocusOnClick)(e),(0,c.addEnterKeyDownListener)(e,i),t.hotspotSettings.elementClickTrigger&&B.hotspotEventHandler.addListener(o,t.elementSelector,i)}function ye(){re()}function Ee(e,t,n){var r=function r(){setTimeout(function(){(0,E.findInAll)(e.elementSelector,(0,y.getRegisteredIframes)(),function(e){e&&(e.element||e.iframeData)&&!1!==e.isVisible||((0,R.elementContainsChild)(d(),t)&&re(t),!n.preview&&yt&&yt()),b.internalEventListener.removeListener("pageview",r),Se()})},500)};b.internalEventListener.addListener("pageview",r);var o=setInterval(function(){try{(0,E.findInAll)(e.elementSelector,(0,y.getRegisteredIframes)(),function(e){e&&(e.element||e.iframeData)&&t.parentElement&&!1!==e.isVisible||(t.parentElement&&re(t),clearInterval(o),Se(),!n.preview&&yt&&yt())})}catch(e){clearInterval(o),Se(),h.logger.logInternalError(e)}},500)}function Se(){try{Tt&&clearInterval(Tt)}catch(e){}}function Ce(e,t,n,r){var o="TOOLTIP"===r.type&&Ie(n,r);t?(e.style.display="block",o&&ue()):(e.style.display="none",o&&pe())}function we(e,t,n,r,o,i,a,s){var l=at.getElementPosition(n),d=e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3],u=l[0]!==s[0]||l[1]!==s[1]||l[2]!==s[2]||l[3]!==s[3],p=d||!d&&u,f=!1;return f=r.isDom?(0,c.isElementVisible)(r.element,!0,!0):!!r.elementRect.isVisible&&(0,c.isElementInIframeVisible)(r.elementRect,r.iframeSource.domElement),Ce(n,f,a,o),p&&(t=e,at.positionElement(n,r,o.positionHorizontal,o.positionVertical,o.positionTopDelta,o.positionLeftDelta,"HOTSPOT"===o.type,st),"TOOLTIP"===o.type&&Ae(i,a,o,r)),t}function Te(e,t,n,r,o,i){var a=!0,s=at.getElementPosition(n);if(i.preview||st){var l=function(r){if(r)if(r.element){var a=at.getElementPosition(r.element);r.isDom=!0,t=we(a,t,n,r,e,o,i,s),s=at.getElementPosition(n)}else{var l=function(a){var l={isDom:!1,elementRect:Array.isArray(a)?a[0]:a,iframeSource:r.iframeData,iframeOrigin:y.IframeData.iframeOrigin},c=at.getElementDataPosition(l);t=we(c,t,n,l,e,o,i,s),s=at.getElementPosition(n)};r.elementRect?l(r.elementRect):S.default.getElementLocation(r.iframeData,e.elementSelector,l)}},c=e.repositionInterval>0?e.repositionInterval:1e3,u=setInterval(function(){try{if(r&&r.isDom&&r.element&&!(0,R.elementContainsChild)(d(),r.element)){var t=JSON.stringify(e.elementSelector);h.logger.logInternalError(new Error("Guide "+i.id+" on step "+e.id+" with selector "+t+" was closed, mapped element was there and then removed")),qe(e,i)}else(0,E.findInAll)(e.elementSelector,(0,y.getRegisteredIframes)(),l,!1,!1,a&&e.autoScroll),a=!1}catch(e){clearInterval(u),Se(),h.logger.logInternalError(e)}},c);return u}return null}function xe(){return vt&&(ht>=vt.length||1===vt.length)}function ke(e,t,n,r,o,i){var a=n.autoScroll&&e&&e.element&&(0,c.needToScroll)(e.element);a&&(0,c.scrollElementToCenter)(e.element,function(e){return h.logger.logInternalError(e)}),ve(n);var s=(0,c.createElement)("span",["apt-hotspot-element","apt-hotspot-dynamic"]);s.setAttribute("data-apt-disable-selector",!0),(0,c.appendElements)(d(),[s]);var l=function(){var r=null;if(n&&n.positionHorizontal&&n.positionVertical){r=at.positionElement(s,e,n.positionHorizontal,n.positionVertical,n.positionTopDelta,n.positionLeftDelta,!0,st);var a=at.getElementDataPosition(e);Tt=Te(n,a,s,e,null,t)}null===r&&(r=Ge(s,e,n.positionTopDelta,n.positionLeftDelta,!0)),i||(be(s,n,t,o,e),Ee(n,s,t),vt&&(ht>=vt.length||1===vt.length)&&G(2),n&&Y(n.id,n.sequenceNumber)),St&&St(r),st&&xe()&&b.internalEventListener.dispatchEvent("engagementCompleted",(0,F.toExternalEventGuide)(bt,"Completed"))};a?setTimeout(l,800):l()}function Ie(e,t){var n=t.overlay&&t.overlay.fill<1&&!t.showOverlay;return(t.overlay&&t.overlay.modal||e.modal)&&!n}function Ae(e,t,n,r,o){var i=e.querySelector(".apt-vex.apt-popup-disable-overlay .vex-overlay"),a=void 0,s=void 0,l=void 0,u=0,p=n.overlay&&n.overlay.modal||t.modal;if(!(n.overlay&&n.overlay.fill<1)||n.showOverlay){if(p){var f=d();f.classList.contains("apt-non-scroll")||document.documentElement.classList.contains("apt-non-scroll")||(document.documentElement.classList.add("apt-non-scroll"),(0,A.getConfig)("enableModalBodyScroll")&&f.classList.add("apt-non-scroll")),a=n.overlay&&n.overlay.modal&&n.overlay.color||t.overlayColor,s=n.overlay&&n.overlay.modal&&!isNaN(n.overlay.fill)?n.overlay.fill:t.overlayFill,l=n.overlay&&n.overlay.modal&&(n.overlay.padding||0===n.overlay.padding)?n.overlay.padding:t.overlayPadding,u=n.zIndex||n.zindex}if(t&&"TOOLTIP"===n.type){var g=n.overlay&&n.overlay.modal&&n.overlay.blockElement&&!_e(n.navigation.nextStepTrigger);o||de(r,a,s,l,e,g,u),p||pe()}t&&"DIALOG"===n.type&&(p?(i.style.background=(0,c.hexToRgba)(a,s?s/100:0),i.style.display="block"):i.style.display="none")}}function Oe(e,t){var n=(0,x.resolveUrlWithPlaceholders)(f.windowRef.location.href,e);return a()||(n=(0,c.addParameterToUrl)(n,t.preview?"aptShowGuide":"aptGuideId",t.preview?"1":t.engagementId),lt||(n=(0,c.addParameterToUrl)(n,"aptActivationType",t.activationType))),n}function Ne(e,t){if("REDIRECT"===e.navigation.nextButtonAction&&e.navigation.nextStepUrl&&(0,x.resolveUrlWithPlaceholders)(window.location.href,e.navigation.nextStepUrl)!==f.windowRef.location.href){o();var n=Oe(e.navigation.nextStepUrl,t);n!==f.windowRef.location.href&&e.sequenceNumber<e.total-1&&fe(e,vt[mt+1]),s(n,function(){oe(null,!0)},a())}else oe(null,!0)}function Le(e){if(e){var t="INPUT"===e.nodeName&&"text"===e.type,n="TEXTAREA"===e.nodeName;return t||n}return!1}function _e(e){return["ELEMENT_CLICK","ELEMENT_HOVER","INPUT_TEXT_COMPLETION"].indexOf(e)>-1}function Fe(e){return["ELEMENT_CLICK","INPUT_TEXT_COMPLETION"].indexOf(e)>-1}function De(e){return-1!==["REDIRECT","REPLACE"].indexOf(e)}function Be(e,t){var n=e.total-1;if(mt>=n&&De(t.completionClosingAction)&&t.completionClosingRedirectUrl){var r=(0,x.resolveUrlWithPlaceholders)(f.windowRef.location.href,t.completionClosingRedirectUrl);r!==f.windowRef.location.href&&s(r,void 0,"REPLACE"===t.completionClosingAction)}else if(mt<n&&"REDIRECT"===t.interruptClosingAction&&t.interruptClosingRedirectUrl){var o=(0,x.resolveUrlWithPlaceholders)(f.windowRef.location.href,t.interruptClosingRedirectUrl);o!==f.windowRef.location.href&&s(o,void 0,a())}}function Re(e){(0,A.getConfig)("guideAdvanceOnHover")&&((0,c.addEventListener)(e.element,"mouseleave",qt,!1),(0,c.addEventListener)(e.element,"mouseout",qt,!1),e.element.nextElementSibling&&((0,c.addEventListener)(e.element.nextElementSibling,"mouseleave",qt,!1),(0,c.addEventListener)(e.element.nextElementSibling,"mouseout",qt,!1)))}function Pe(e){(0,A.getConfig)("guideAdvanceOnHover")&&((0,c.removeEventListener)(e.element,"mouseleave",qt),(0,c.removeEventListener)(e.element,"mouseout",qt),e.element.nextElementSibling&&((0,c.removeEventListener)(e.element.nextElementSibling,"mouseleave",qt,!1),(0,c.removeEventListener)(e.element.nextElementSibling,"mouseout",qt,!1)))}function Me(e,t){var n=He(t);return e.sequenceNumber===n}function Ue(e,t){var n=je(t);return e.sequenceNumber===n}function je(e){return e&&e.reduce(function(e,t){return Math.max(e,t.sequenceNumber)},e[0].sequenceNumber)}function He(e){return e&&e.reduce(function(e,t){return Math.min(e,t.sequenceNumber)},e[0].sequenceNumber)}function $e(e){var t=vt&&vt.filter(function(e){return"DIALOG"===e.type});return t&&t.length&&Me(e,t)}function Ve(e){var t=vt&&vt.filter(function(e){return"DIALOG"===e.type});return t&&t.length&&Ue(e,t)}function Ke(e,t,n,r,o){var i=this.contentEl.querySelector(".apt-step-new-index")||this.contentEl.querySelector(".px-step-new-index");if(i&&e.total>1){i[V].add("px-step-numbers");var a=n?" "+n+" ":" of ",s=(0,c.createElement)("div",null,{text:t+1+a+e.total});r&&(s.style.color=r),o&&(s.style.fontSize=o+"px"),i.appendChild(s)}}function qe(e,t,n){sessionStorage.removeItem(q),he(),ge("apt.localCache"),Se(),sessionStorage.removeItem("apt.prevStepMap"),!n&&yt&&yt(),ft.length>0&&ft.pop().close(),ee(),e&&t&&Be(e,t),_.default.removeAllHandlers(),L(),re(),(0,F.removeTabbableEnterListener)()}function We(e,t,n){if(e.style){(0,T.addStyleTag)(n,e.style,"px-engagement-wrapper-guide #step-"+t.id,".apt-vex.vex.vex-theme-os");var r=e.style.match(/.px-close-button\s*{[^}]*}/);r&&(0,T.addStyleTag)(n,".aptr-step-close-button-"+t.id+r[0],"px-engagement-wrapper-guide",".apt-vex.vex.vex-theme-os")}}function ze(e,t,r,l,u,p,g,m){var v=function(){try{pe(),sessionStorage.removeItem(q),he(),f.windowRef.sessionStorage.removeItem("apt.prevStepMap"),Se(),ee(e),yt&&yt(),Be(u,l)}catch(e){h.logger.logInternalError(e,"Error on closing guide")}},y=(0,c.getEscHandlerCallback)(v);if(Ct=u,!W(r)){var E=document.createElement("div");E.innerHTML=r,r=E,r[V].add("apt-step-wrapper")}var k=C(r);if(Lt=(0,F.setTabIndexes)(r,pt),Ft=Lt,Dt=Lt+1,Bt=Lt+2,_t=Lt+3,Lt+=4,!k&&Ct.titleHtml&&!W(Ct.titleHtml)){var I=document.createElement("div");I.innerHTML=Ct.titleHtml,Ct.titleHtml=I}if(!W(t)){var O=document.createElement("div");O.innerHTML=t,t=O.firstChild}var L=(0,c.createElement)($,["apt-step-content","apt-sdk"]),D=(0,c.createElement)($,["apt-guide-content-wrapper"]);L.setAttribute("id","step-"+Ct.id),L[V].toggle("px-dialog-container","DIALOG"===u.type),L[V].toggle("px-tooltip-container","TOOLTIP"===u.type),L[V].toggle("px-start-guide-dialog",$e(u)),L[V].toggle("px-end-guide-dialog",Ve(u)),L[V].toggle("px-first-step",Me(u,vt)),L[V].toggle("px-last-step",Ue(u,vt)),!k&&Ct.titleHtml&&Ct.showTitle&&D.insertBefore(Ct.titleHtml,D.firstChild),"TOOLTIP"!==u.type||Ct.titleHtml||k||(Ct.navigation.useElementListener&&_e(Ct.navigation.nextStepTrigger)?D[V].add("apt-guide-tooltip-content"):D[V].add("apt-guide-tooltip-content-navigation")),r&&t&&(D.appendChild(r),(0,c.appendElements)(L,[D,t]));var B=null,R=u.autoScroll&&e&&e.element&&(0,c.needToScroll)(e.element);R&&(0,c.scrollElementToCenter)(e.element,function(e){return h.logger.logInternalError(e)});var P=void 0,M=e&&e.isDom?e.element:null,j=d(),z=j.id,X=(0,A.getConfig)("framesetMode")?"html":z?"#"+z:"body",J={appendLocation:X,enableModalBodyScroll:(0,A.getConfig)("enableModalBodyScroll"),disableTransitionEffect:u.disableTransitionEffect,closeClassName:"aptr-engagement-close-btn px-close-button aptr-step-close-button-"+u.id,unsafeContent:L.outerHTML,overlayClosesOnClick:!1,closeAllOnPopState:!1,showCloseButton:!0,disableAutoFocus:n||w.default.isEngagementEditorV2(),afterOpen:function(){function t(e){-1!==[13,9].indexOf(e.keyCode)&&e.currentTarget===M&&(Ne(u,l),(0,c.removeEventListener)(M,"keydown",t))}var n=this,r=function(e){return(0,T.disableFocusOnClick)(e,n.contentEl)};this.rootEl.style.display="none",(0,A.getConfig)("enableModalBodyScroll")&&j.classList.add("apt-vex"),this.rootEl[V].add("apt-vex"),this.rootEl.setAttribute("data-apt-ignore-visible",!0),this.contentEl.setAttribute("data-apt-disable-selector",!0),At=this.contentEl,Ot=this.rootEl,Nt=this.overlayEl,this.rootEl[V].add("apt-popup-disable-overlay"),this.contentEl[V].add("apt-guide-popup"),this.contentEl[V].add("guide-initial-position"),this.contentEl[V].add("apt-popup-content-disable-overlay"),this.contentEl[V].add("px-engagement-wrapper-guide"),this.contentEl[V].add("px-engagement-wrapper");var d=u.zindex||u.zIndex||l.zIndex||ut;this.rootEl.style.zIndex=d,this.contentEl.style.zIndex=d,(u.zindex||u.zIndex||0===d)&&(this.overlayEl.style.zIndex=d),(0,T.addStyleTag)(this.contentEl,l.coreStyling,"px-engagement-wrapper",".apt-vex.vex.vex-theme-os"),(0,T.addStyleTag)(this.contentEl,l.engagementCoreStyling,"px-engagement-wrapper-guide",".apt-vex.vex.vex-theme-os"),(0,F.addGlobalSettings)(this.contentEl,l.engagementCoreStyling,Ct.id,u.paddingSettings),(0,T.addStyleTag)(this.contentEl,l.overrideStyling,"px-engagement-wrapper-guide",".apt-vex.vex.vex-theme-os");var p=g>-1?g:mt,E=vt[p];We(E,u,this.contentEl),l.showStepCounter&&u.showCounter&&Ke.call(this,u,p,l.stepCounterLabelText,l.stepCounterFontColor,l.stepCounterFontSize),m&&!l.preview||(_.default.removeAllHandlers(),_.default.addNavigationHandler(e,u,l,function(e,t){qe(e,t)})),u&&(u.backgroundImage&&Qe(this.contentEl,u.backgroundImage),u.backgroundColor&&(this.contentEl.style.backgroundColor=u.backgroundColor,u.backgroundFill&&(this.contentEl.style.backgroundColor=(0,c.hexToRgba)(u.backgroundColor,u.backgroundFill/100),(0,c.checkDarkColor)(u.backgroundColor)&&this.contentEl.querySelector(".aptr-engagement-close-btn").classList.add("apt-engagement-close-btn-bright")))),u.autoHeight||(u&&u.height&&(this.contentEl.style.height=u.height+"px"),u&&u.height&&(this.contentEl.querySelector(".apt-step-content").style.height=u.height+"px")),u&&u.width&&(this.contentEl.style.width=u.width+"px"),l&&l.borderRadius&&(this.contentEl.style.borderRadius=l.borderRadius+"px");var C=this.contentEl.querySelectorAll(i(this.contentEl,"apt-step-footer-buttons")),w=C[C.length-1],I=this.closeEl;(0,c.addEventListener)(I,"click",v),(0,c.addEventListener)(document,"keydown",y),u.shadow&&Ye(this.contentEl,u.shadowSettings);var O=this.contentEl.querySelector(i(this.contentEl,"apt-step-footer-next")),L=this.contentEl.querySelector(i(this.contentEl,"apt-step-footer-button")),D=this.contentEl.querySelector(i(this.contentEl,"apt-step-footer"));u.isFirstStepNonHotspot&&(N.default.addSkipButton(D,l.skipButton,u.navigation.backgroundRadius,!m,function(e,t){return function(){qe(e,t)}}(u,l),l.skipButtonText,r,_t),(0,F.isSnoozeButtonEnabled)(l.activationType,l.snoozeButton,l.activationTypes)&&N.default.addSnoozeButton(D,l.snoozeButton,!m,function(e,t){return function(){(0,F.trackSnooze)(bt,e.id,e.sequenceNumber,K),qe(e,t)}}(u,l),l.snoozeButtonText,r,Ft,k));var R=null,U=null;l.navigationV2&&u.backButton&&(R=u.backButton.text,U=u.nextButton.text),L.innerText=R||l.backButtonText||"Previous",L.setAttribute("tabindex",Dt),L.setAttribute("role","button"),O.innerText=U||l.nextButtonText||"Next",O.setAttribute("tabindex",Bt),O.setAttribute("role","button"),L.classList.add("apt-step-footer-prev"),"TOOLTIP"===u.type&&(e&&e.isDom?Le(M)&&(Pt[u.id]={element:M,event:"keydown",handler:t},(0,c.addEventListener)(M,"keydown",t)):e&&!e.isDom&&e.iframeSource&&S.default.addElementHandler(e.iframeSource,u.elementSelector,u.navigation.nextStepTrigger,function(){Ne(u,l)}));var $=xe(),W=u.nextButton,z=u.backButton;if(u&&!u.navigation.useElementListener||m||!_e(u.navigation.nextStepTrigger)){if(0===u.sequenceNumber&&("DIALOG"!==u.type&&"TOOLTIP"!==u.type||(O.innerText=l.getStartedButtonText||l.startButton&&l.startButton.text||"Get Started",W=l.startButton,O.style.width="")),0!==u.sequenceNumber&&u.showPreviousButton||(m?L.style.display="none":L.parentNode===w&&w.removeChild(L)),p>=u.total-1&&(O.innerText=l.endButtonText||"End Tour",W=l.endButton,u.total>1&&(L.innerText=l.restartButtonText||"Start Over",z=l.restartButton)),!m&&l)if($){var X=function(){J||(J=!0,qe(u,l))},J=!1;(0,c.addEventListener)(O,"click",X),(0,c.addEnterKeyDownListener)(O,X),r(O);var Q=sessionStorage.getItem(q),Z=function(){if(f.windowRef.location.href===Q){vt[0];ht=0,gt=-1,mt=0,wt=!1,oe(0)}else s(Oe(Q,l),function(){oe(0)},a())};(0,c.addEventListener)(L,"click",Z),(0,c.addEnterKeyDownListener)(L,Z),r(L)}else{var ee=!1,te=function(){if(ee)return void h.logger.log("next already clicked");ee=!0,Ne(u,l),Se()};(0,c.addEventListener)(O,"click",te),(0,c.addEnterKeyDownListener)(O,te),r(O);var ne=function(){var e=!0;if(u&&u.navigation&&"HISTORY_BACK"==u.navigation.previousButtonAction)history.back();else{var t=JSON.parse(f.windowRef.sessionStorage.getItem("apt.prevStepMap")),n=null;if(t&&(n=t[u.id]),n){Se(),he(),f.windowRef.sessionStorage.setItem("apt.stepId",n.id);var r=n.url;if(o(),r!==f.windowRef.location.href){e=!1;s((0,c.addParameterToUrl)(r,l.preview?"aptShowGuide":"aptGuideId",l.preview?"1":l.engagementId),se,a())}}}e&&se()};(0,c.addEnterKeyDownListener)(L,ne),r(L),(0,c.addEventListener)(L,"click",ne)}var re=D.querySelector(".px-step-navigation-skip"),ie=D.querySelector(".px-step-navigation-snooze");N.default.setStepNavigationV2Style({guideSettings:l,stepSettings:u,nextButton:O,prevButton:L,skipButtonDom:re,snoozeButtonDom:ie,footerElement:D,stepPrevButtonStyleSettings:z,stepNextButtonStyleSettings:W,navigation:u.navigation}),(m&&u.navigation.useElementListener||_e(u.navigation.nextStepTrigger))&&(D.style.display="none",O.style.display="none",L.style.display="none")}else D.style.display=O.style.display=L.style.display="none";if((_e(u.navigation.nextStepTrigger)||u.navigation.useElementListener)&&!m&&e){var ae=function(){oe(1e3,!0),e.isDom&&("ELEMENT_CLICK"===u.navigation.nextStepTrigger&&((0,c.removeEventListener)(e.element,"keydown",It),(0,c.removeEventListener)(e.element,"click",kt),(0,c.removeEventListener)(e.element,"contextmenu",kt)),"ELEMENT_HOVER"===u.nextStepTrigger&&((0,c.removeEventListener)(e.element,"mouseenter",kt),Pe(e))),le=!1},le=!0;kt=function(t){if(!Le(e.element)&&le)if(_.default.removeAllHandlers(),Fe(u.navigation.nextStepTrigger)&&u.navigation.nextStepUrl&&("REDIRECT"===u.navigation.nextButtonAction&&f.windowRef.location.href!==u.navigation.nextStepUrl||"SHOW_ON_NEXT_PAGE"===u.navigation.nextButtonAction)){var n=g>-1?g:mt;if(n<u.total-1&&fe(u,vt[mt+1]),"REDIRECT"===u.navigation.nextButtonAction){var r=(0,x.resolveUrlWithPlaceholders)(f.windowRef.location.href,u.navigation.nextStepUrl),o=n<u.total-1?Oe(r,l):r;s(o,ae,a())}}else ae()},e.isDom?("ELEMENT_CLICK"===u.navigation.nextStepTrigger&&((0,c.addEventListener)(e.element,"click",kt),(0,c.addEventListener)(e.element,"contextmenu",kt)),"ELEMENT_HOVER"===u.navigation.nextStepTrigger&&((0,c.addEventListener)(e.element,"mouseenter",kt,!1),Re(e)),"ELEMENT_CLICK"!==u.navigation.nextStepTrigger&&"ELEMENT_HOVER"!==u.navigation.nextStepTrigger||(It=(0,c.addEnterKeyDownListener)(e.element,function(t){kt(t),e.element.blur()}))):S.default.addElementHandler(e.iframeSource,u.elementSelector,u.navigation.nextStepTrigger,kt)}if(vt&&(ht>=vt.length||1===vt.length)&&G(2),"DIALOG"===u.type&&"BAR"===u.dialogViewType&&(this.contentEl.style.position="absolute",this.contentEl[V].add("apt-dialog-bar"),this.contentEl.style.width="100%"),this.rootEl.style.display="block","DIALOG"===u.type&&"BAR"===u.dialogViewType){var de="bottom",ue=0;"TOP"===u.barPosition&&(de="top",ue=u.barOffset||0),B=at.positionElement(this.contentEl,e,"center",de,ue,u.positionLeftDelta),"BOTTOM"===u.barPosition&&(this.contentEl.style.bottom=(u.barOffset||0)+"px",this.contentEl.style.left="0px")}else u&&u.positionHorizontal&&u.positionVertical&&(B=at.positionElement(this.contentEl,e,u.positionHorizontal,u.positionVertical,u.positionTopDelta,u.positionLeftDelta,!1,st||l.preview));if(null===B&&(B=!e&&"DIALOG"===u.type&&at.positionElement(this.contentEl,e,"center","center",u.positionTopDelta,u.positionLeftDelta,!1,st)||Ge(this.contentEl,e,u.positionTopDelta,u.positionLeftDelta)),"TOOLTIP"===u.type)if(null===B)st&&h.logger.logInternalError(new Error("Could not find linked element after attempting to position it, element might be not visible.\nLinked element css selector:"+u.elementSelector));else{this.contentEl[V].add("apt-guide-tooltip"),ce(B,this.contentEl,u&&u.backgroundColor?u.backgroundColor:"#ffffff"),e&&e.isDom&&(P=dt.getFollowScrollHandler(e.element,this.contentEl),dt.handleScrollEvent(M,P));var pe=at.getElementDataPosition(e);Tt=Te(u,pe,this.contentEl,e,this.rootEl,l)}if(Ae(this.rootEl,l,u,e),(0,F.removeCicularTabsWrapperListener)(H),Ie(l,u)&&(st||l.preview)){var ge=function(){var e=n.contentEl.querySelector("[tabindex]");e&&(0,T.focusElement)(e)};H="TOOLTIP"===u.type?(0,F.addCircularTabListenerForTooltips)(ge,e&&e.element,E.id):(0,F.addCircularTabListener)(ge,null,E.id)}u&&Y(u.id,u.sequenceNumber),(0,F.listenToLinksClicks)(this.rootEl,l,{stepId:E.id}),st&&$&&b.internalEventListener.dispatchEvent("engagementCompleted",(0,F.toExternalEventGuide)(bt,"Completed"))}};J.beforeClose=function(){(Mt||ne(l))&&(j.classList.remove("apt-vex"),j.classList.remove("apt-non-scroll"),document.documentElement.classList.remove("apt-non-scroll")),Se(),pe(),dt.clearScrollEventListenerFromParents(M),(0,c.removeEventListener)(document,"keydown",y),ee(e),(0,F.removeCicularTabsWrapperListener)(H),Et&&Et(),Mt&&!l.preview&&yt&&yt()};var Q=function(){var e=U.open(J);ft.push(e),St&&St(B)};R?setTimeout(Q,800):Q()}function Ge(e,t,n,r,o){function i(i,a){return at.positionElement(e,t,i,a,n,r,o,st)}return i("right","top")||i("center","top")||i("right","center")||i("right","bottom")||i("center","bottom")||i("left","bottom")||i("left","center")||i("left","top")}function Ye(e,t){var n=Xe(t);e.style.setProperty("filter","drop-shadow("+n+")"),e.style.setProperty("-webkit-filter","drop-shadow("+n+")")}function Xe(e){var t="";return t+=(e.offsetX?e.offsetX:0)+"px ",t+=(e.offsetY?e.offsetY:0)+"px ",t+=(e.blur?e.blur:0)+"px ",e.fill&&e.color&&(t+=(0,c.hexToRgba)(e.color,e.fill/100)),t}function Je(){Se(),pe(),rt(),re(),ft=[],xt&&Pe(xt),xt=void 0}function Qe(e,t){e&&(e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover",e.style.backgroundImage="url("+t+")")}function Ze(e){e&&(e.style.removeProperty("background-position"),e.style.removeProperty("background-repeat"),e.style.removeProperty("background-size"),e.style.removeProperty("background-image"))}function et(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Math.abs(n.left-r.left),i=Math.abs(n.right-r.right);return o>i?"left":o===i?"center":"right"}function tt(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Math.abs(n.top-r.top),i=Math.abs(n.bottom-r.bottom);return o>i?"top":o===i?"center":"bottom"}function nt(e){var t=e.guideSettings,n=e.stepSettings,r=e.engStyle,o=e.callback,i=e.dontReposition,a=e.skipReposition;this.updateDialogStyle({guideSettings:t,stepSettings:n,engStyle:r,elementData:null,dontReposition:i}),a||this.changePositionWithFallback({elementData:null,stepSettings:n,callback:o})}function rt(){for(var e=0;e<ft.length;e++)ft[e].close();var t=f.documentRef.querySelectorAll(".vex-closing");t.length>0&&t.forEach(function(e){return d().removeChild(e)})}var ot=this,it=r,at=e||new u.default,st=!(n||w.default.isEditorMode()),lt=n||!!w.default.isEditorMode(),ct=15*c.MILLISEC,dt=new v.ScrollEventBinder,ut=t||void 0,pt=D.TAB_INDEX_START+1,ft=[],gt=-1,ht=0,mt=0,vt=null,bt=null,yt=null,Et=null,St=null,Ct=null,wt=!1,Tt=void 0,xt=void 0,kt=null,It=null,At=null,Ot=null,Nt=null,Lt=void 0,_t=void 0,Ft=void 0,Dt=void 0,Bt=void 0,Rt=!1,Pt={},Mt=!0,Ut=void 0,jt=void 0,Ht=void 0,$t=void 0,Vt={},Kt=null;(0,m.addDOMReadyListener)(function(){document.querySelector(".apt-guide-overlay-top")?Ut=document.querySelector(".apt-guide-overlay-top"):(Ut=document.createElement("div"),Ut.className="apt-guide-overlay-top",Ut.style.display="none",Ut.style.visibility="hidden"),document.querySelector(".apt-guide-overlay-bottom")?jt=document.querySelector(".apt-guide-overlay-bottom"):(jt=document.createElement("div"),jt.className="apt-guide-overlay-bottom",jt.style.display="none",jt.style.visibility="hidden"),document.querySelector(".apt-guide-overlay-left")?Ht=document.querySelector(".apt-guide-overlay-left"):(Ht=document.createElement("div"),Ht.className="apt-guide-overlay-left",Ht.style.display="none",Ht.style.visibility="hidden"),document.querySelector(".apt-guide-overlay-right")?$t=document.querySelector(".apt-guide-overlay-right"):($t=document.createElement("div"),$t.className="apt-guide-overlay-right",$t.style.display="none",$t.style.visibility="hidden");var e=d();e.appendChild(Ut),e.appendChild(jt),e.appendChild(Ht),e.appendChild($t)}),this.hideOverlay=pe,this.showOverlay=de,this.showOverlayForStep=Ae,this.showStepById=J,this.findElementInPage=ae;var qt=function(e){e.stopImmediatePropagation()};this.checkHasOverlayForCurrentStep=function(){if(vt){var e=vt[mt];return!!e&&Ie(bt,e)}return!1},this.getStepSettings=function(){return vt[mt]},this.setHotspotStyle=function(e){ve(e)},this.setDialogStyle=function(e,t){if(At&&(e&&(At.style.borderRadius=e.borderRadius+"px"),t)){t.backgroundImage?Qe(At,t.backgroundImage):Ze(At),t.backgroundColor&&(t.backgroundFill?(At.style.backgroundColor=(0,c.hexToRgba)(t.backgroundColor,t.backgroundFill/100),(0,c.checkDarkColor)(t.backgroundColor)&&At.querySelector(".aptr-engagement-close-btn").classList.add("apt-engagement-close-btn-bright")):At.style.backgroundColor=t.backgroundColor),!t.autoHeight&&t.height?(At.style.height=t.height+"px",At.querySelector(".apt-step-content").style.height=t.height+"px"):(At.style.height="unset",At.querySelector(".apt-step-content").style.height="unset"),t.width&&(At.style.width=t.width+"px"),t.shadow&&t.shadow.enable?Ye(At,t.shadow):(At.style.removeProperty("filter"),At.style.removeProperty("-webkit-filter"));var n=t.zIndex;Ot.style.zIndex=n,At.style.zIndex=n,Nt.style.zIndex=n}},this.editSkipButton=function(e,t){t&&t.remove();var n=Object.assign({},e.navigation.skipButton,{enabled:e.navigation.skipButton.visible});ot.toggleSkip(e.navigation.skipButton.visible,n,e.navigation.skipButton.text)},this.editSnoozeButton=function(e,t,n){t&&t.remove();var r=Object.assign({},e,{enabled:e.visible});ot.toggleSnooze(e.visible,r,e.text,n)},this.setEngNavigationStyle=function(e){var t=e.guideSettings,n=e.stepStyle;if(n.navigation){var r=t.steps[n.navigation.currentStepIndex],o=r.nextButton,a=r.backButton,s=1===n.navigation.stepLength,l=0===n.navigation.currentStepIndex&&!s,c=n.navigation.stepLength-1===n.navigation.currentStepIndex&&!s,d=!l&&!c&&!s,u=C(At),p=At.querySelector(i(At,"apt-step-footer")),f=At.querySelector(i(At,"apt-step-footer-button")),g=At.querySelector(i(At,"apt-step-footer-next")),h=f.className.includes("snooze")?At.querySelectorAll(i(At,"apt-step-footer-button"))[1]:f,m=p.querySelector(".px-step-navigation-skip");ot.editSkipButton(n,m),m=p.querySelector(".px-step-navigation-skip"),m&&(n.navigation.isFirstStepNonHotspot?m.style.display="block":m.style.display="none");var v=p.querySelector(".px-step-navigation-snooze");ot.editSnoozeButton(n.navigation.snoozeButton,v,u),v=p.querySelector(".px-step-navigation-snooze"),v&&(v.style.display=n.navigation.isFirstStepNonHotspot?"block":"none"),l&&!c?(g&&(g.innerText=n.navigation.startButton.text,o=t.guideSettings.startButton),h.style.display=l||!n.navigation.showPreviousButton?"none":"block"):d?(h.style.display=n.navigation.showPreviousButton?"block":"none",h.innerText=a.text,g.innerText=o.text,a=r.backButton):s?g&&(g.innerText=n.navigation.endButton.text,o=t.guideSettings.endButton):c&&(g.innerText=n.navigation.endButton.text,o=t.guideSettings.endButton,h.style.display=n.navigation.showPreviousButton?"block":"none",h.innerText=n.navigation.restartButton.text,a=t.guideSettings.restartButton),p&&h&&g&&n&&n.navigation&&(g.style.display=_e(n.navigation.type)?"none":"block",p.style.display=_e(n.navigation.type)?"none":"flex",N.default.setStepNavigationV2Style({guideSettings:t.guideSettings,stepSettings:r,nextButton:g,prevButton:h,skipButtonDom:m,snoozeButtonDom:v,footerElement:p,stepPrevButtonStyleSettings:a,stepNextButtonStyleSettings:o,navigation:n.navigation}))}},this.setEngStyleTag=function(e,t,n){if(At){var r=At.querySelectorAll("style");r&&r.forEach(function(e){e.remove()}),e&&((0,T.addStyleTag)(At,e.coreStyling,"px-engagement-wrapper",".apt-vex.vex.vex-theme-os"),(0,T.addStyleTag)(At,e.engagementCoreStyling,"px-engagement-wrapper-guide",".apt-vex.vex.vex-theme-os"),(0,T.addStyleTag)(At,e.overrideStyling,"px-engagement-wrapper-guide",".apt-vex.vex.vex-theme-os")),t&&We(t,t,At),(0,F.addGlobalSettings)(At,e.engagementCoreStyling,void 0,n)}},this.positionDialogAndTooltipInCenter=function(){var e=this.getTargetContainer(),t=e.getBoundingClientRect();at.positionElement(At,{isDom:!1,elementRect:{left:0,top:0,height:t.height,width:t.width}},"center","center",0,0)},this.updateDialogViewPosition=function(e,t){"DIALOG"===e.type&&(At[V].toggle("px-dialog-bar","BAR"===e.position.dialogViewType),"BAR"===e.position.dialogViewType?(At.style.position="fixed",At.style.width="100%",At.style.left="0px","BOTTOM"===e.position.barPosition?(At.style.bottom=(e.position.barOffset||0)+"px",At.style.top="unset"):(At.style.top=(e.position.barOffset||0)+10+"px",At.style.bottom="unset")):(At.style.bottom="unset",At.style.right="unset",t?ot.positionDialogAndTooltipInCenter():(At.style.position="",At.style.width=e.width+"px")))},this.updateTargetContainer=function(e){it=e,it.appendChild(Ut),it.appendChild(jt),it.appendChild(Ht),it.appendChild($t)},this.getTargetContainer=d,this.updateDialogStyle=function(e){var t=e.guideSettings,n=e.stepSettings,r=e.engStyle,o=e.elementData,i=e.dontReposition;if(At&&At.parentElement){var a=r&&r.styleTags;if(ot.setEngStyleTag(a,n.styleTag,n.padding),ot.setDialogStyle(r,n),ot.setEngNavigationStyle({guideSettings:t,stepStyle:n}),ot.updateDialogViewPosition(n,i),"TOOLTIP"===n.type&&o?Ae(At.parentElement,t.guideSettings,n,o,i):Ae(At.parentElement,t.guideSettings,n),!n.overlay||!n.overlay.blockElement){var s=At.parentElement.querySelector(".apt-guide-target-block");s&&At.parentElement.removeChild(s)}}},this.changePositionWithFallback=function(e){var t=e.elementData,n=e.stepSettings,r=e.callback,o=parseInt(n.position.positionTopDelta)||0,i=parseInt(n.position.positionLeftDelta)||0,a=ot.changePosition(t,n.position.positionHorizontal,n.position.positionVertical,o,i),s=!a;if(At&&t&&!a){var l=et(At,t.element),c=tt(At,t.element);a=ot.changePosition(t,l,c,o,i)}r&&r(a,s)},this.updateStepStyle=function(e,t,n,r,o,i,a){if(t){var s=a||"BAR"===t.position.dialogViewType;if("DIALOG"===t.type?nt.call(ot,{guideSettings:e,stepSettings:t,engStyle:n,callback:i,dontReposition:a,skipReposition:s}):ae(o,t.type,function(r){switch(t.type){case"TOOLTIP":ot.updateDialogStyle({guideSettings:e,stepSettings:t,engStyle:n,elementData:r,dontReposition:a});break;case"HOTSPOT":t.hotspotSettings&&ve(t);break;case"BADGE":break;default:h.logger.logInternalError(new Error("Unsupported step type "+t.type))}s||ot.changePositionWithFallback({elementData:r,stepSettings:t,callback:i})},void 0,!0),At){var l=At.querySelector(".apt-step-new-index")||At.querySelector(".px-step-new-index");l&&(r.show?(l[V].add("px-step-numbers"),l.innerHTML="<div>"+(r.label||" of ")+"</div>",r.fontColor&&(l.style.color=r.fontColor),r.fontSize&&(l.style.fontSize=r.fontSize+"px")):l.innerHTML="")}}else i&&i()},this.showStep=function(e,t,n,r,o,i,a,s,l,c,d){yt=i,a&&(Et=a),d&&(St=d),vt=l,l.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber});var u=je(l);l=N.default.populateNavigationFlags(l,u),l.forEach(function(e){e.sequenceNumber===o.sequenceNumber&&(o.showCounter=e.showCounter,o.isFirstStepNonHotspot=e.isFirstStepNonHotspot)});for(var p=-1,f=!1,g=0;g<l.length;g++)l[g].id===o.id&&(p=g),"BADGE"===l[g].type&&(f=!0);return f&&(p-=1,o.total-=1),me(e,t,n,r,o,s,p,c)},this.changePosition=function(e,t,n,r,o){var i=null;if(ft[0]){if((i=at.positionElement(ft[0].contentEl,e,t,n,r,o,!1,st))&&i.length>0)return e&&ce([t,n],ft[0].contentEl,Ct.backgroundColor),i}else{var a=document.querySelector(".apt-hotspot-element");if(a&&(i=at.positionElement(a,e,t,n,r,o,!0,st),i.length>0))return i}return null},this.changeBarPosition=function(e,t){var n="bottom",r=0;"TOP"===e&&(n="top",r=t),at.positionElement(ft[0].contentEl,null,"center",n,r,0),"BOTTOM"===e&&(ft[0].contentEl.style.bottom=t+"px")},this.playGuide=function(e,t,n,r){Rt=!0,r&&(Kt=r),e.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber});var o=je(e);e=N.default.populateNavigationFlags(e,o),rt(),re(),ft=[],gt=-1,ht=0,Et=void 0,St=void 0,yt=function(e){n(e),Rt=!1},vt=e,bt=t,mt=0,wt=!1,Se(),(0,F.addTabbableEnterListener)();var i=f.windowRef.sessionStorage.getItem("apt.stepId")||t.startStepId;if(i){var a=e.findIndex(function(e){return e.id===i});ht=a,gt=a-1}f.windowRef.sessionStorage.removeItem("apt.stepId"),f.windowRef.sessionStorage.removeItem("apt.guideId"),O(),!i&&sessionStorage.setItem(q,f.windowRef.location.href),oe(i?1e3:0)},this.toggleSkip=function(e,t,n){if(ft.length>0){var r=ft[0].contentEl,o=r.querySelector(i(r,"apt-step-footer"));N.default.toggle(o,e,t,n,T.disableFocusOnClick,_t)}},this.toggleSnooze=function(e,t,n,r){if(ft.length>0){var o=ft[0].contentEl,a=o.querySelector(i(o,"apt-step-footer"));N.default.toggleSnooze(a,e,t,n,T.disableFocusOnClick,r,Ft)}},this.showAll=function(e,t){e.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber}),vt=e;for(var n=0;n<e.length;n++)!function(n){X(e[n])&&(0,E.findInAll)(e[n].elementSelector,(0,y.getRegisteredIframes)(),function(r){if(r){var o={};r.element?(o.isDom=!0,o.element=r.element,me(o,t.footer,e[n].content,t,e[n],!0,n,!0)):r.iframeData&&(o.isDom=!1,S.default.getElementLocation(r.iframeData,e[n].elementSelector,function(r){r&&1===r.length&&(o.elementRect=r[0],me(o,t.footer,e[n].content,t,e[n],!0,n,!0))}))}})}(n)},this.isRunning=function(){return Rt},this.hideAll=function(){Je()},this.setDefaultPaddingTop=function(t){e.setDefaultTopOffset((0,A.getConfig)("dockMapper")?0:t)},this.clearStepRedirectData=function(){he()},this.close=function(e){qe(void 0,void 0,e)}},Y=new function(){this.getElementBoundingRect=function(e){try{var t=(0,T.findElementInWindow)(e,document),n=(0,c.isElementVisible)(t,!0),r=t.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height,x:r.x,y:r.y,isVisible:n}}catch(e){return h.logger.logInternalError(e),null}}};t.default=G,t.GuideDrawerIframe=Y,t.getSelectorByVersion=i},function(e,t,n){"use strict";function r(e){function t(e){s=e,s?c.classList.add("apt-disabled"):c.classList.remove("apt-disabled"),a.disabled=s}var n=e&&e.labelText,r=e&&e.checkCallback,i=e&&!!e.checked,a=null,s=e&&!!e.disabled,l=e&&!!e.stopPropagation,c=void 0;this.setChecked=function(e){a.checked=e},this.getChecked=function(){return a?a.checked:null},this.disable=function(){return t(!0)},this.enable=function(){return t(!1)},this.render=function(){a=(0,o.createInput)("checkbox","",null,null,s,i),(0,o.addEventListener)(a,"click",function(){!s&&r&&r(a.checked)});var e=(0,o.createElement)("span",["apt-checkmark"]);return l&&(0,o.addStopClickListeners)([a,e]),c=(0,o.createElement)("label",["apt-checkbox "+(s?"apt-disabled":"")],{text:n},[a,e])},this.getElement=function(){return c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(){function e(t){r(this,e),this.labelText=t&&t.labelText,this.secondaryText=t&&t.secondaryText}return o(e,[{key:"render",value:function(){return(0,i.createElement)("div","apt-setting-header-cnt",null,[this.labelText&&(0,i.createElement)("div","apt-header-text",{text:this.labelText}),(0,i.createElement)("div","apt-setting-line"),this.secondaryText&&(0,i.createElement)("div","apt-header-secondary-text",{text:this.secondaryText})])}}]),e}();t.default=a},function(e,t,n){"use strict";function r(){(0,l.getConfig)("enableTag")&&h.push(arguments)}function o(){for(;h&&h.length>0;)u.default.callCommand(h.shift());c.windowRef[c.aptrinsicGlobalObjName]=m}function i(e,t,n){if(!(0,l.isIframe)()){var r=(0,l.getConfig)("fetchKcType"),o="automatic"===r,i=null;o||g.KcSessionStorage.getIsDefaultKc()||(i=g.KcSessionStorage.getKcId());(o||!o&&!!i)&&(0,p.initKnowledgeCenter)(e,t,i,!1,n)}}function a(e,t,n){if(!(0,l.isIframe)()){var r="API"===(0,l.getConfig)("fetchKcType");(!r||r&&(0,g.getKcIsShownViaAPI)())&&(0,f.initKnowledgeCenter)(e,t,null,!1,n)}}function s(e,t,n){"API"===(0,l.getConfig)("fetchKcType")||(0,g.setIsNewAPI)(!0),(0,g.getIsNewAPI)()?a(e,t,n):i(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.initKnowledgeCenterWrapper=t.aptReady=t.aptNotReady=t.aptExternal=void 0;var l=n(2),c=n(4),d=n(86),u=function(e){return e&&e.__esModule?e:{default:e}}(d),p=n(67),f=n(66),g=n(29),h=[],m=function(){u.default.call([arguments])};t.aptExternal=m,t.aptNotReady=r,t.aptReady=o,t.initKnowledgeCenterWrapper=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=document.createElement("div");return t.innerHTML=e,t.children.length>0}function a(e,t){var n="#06f263"!==t;return!i(e)&&n}function s(e){var t=document.createElement("div");return t.innerHTML=e,1===t.children.length}function l(){var e=document.querySelector(".apt-hotspot-element"),t=document.querySelector(".apt-guide-popup");return!!e||!!t}function c(e){var t=e.positionVertical,n=e.positionHorizontal,r=e.positionLeftDelta,o=e.positionTopDelta,i="top"===t,a="left"===n;return W(t)&&a?r=0-r:i&&(o=0-o),W(t)?o+", "+r:r+", "+o}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.positionTopDelta,r=e.positionLeftDelta,o=e.positionVertical,i=e.positionHorizontal;o=o.toLowerCase(),i=i.toLowerCase(),"middle"===o&&(o="center");var a=void 0;if(W(o))a=i;else if(W(i))a=o;else{var s=i===(t?"left":"right"),l=s?"end":"start";a=o+"-"+l}return{position:a,offset:c({positionVertical:o,positionHorizontal:i,positionLeftDelta:r,positionTopDelta:n})}}function u(e,t,n){var r=e.elementSelector,o=e.id,i=r.matchCssSelector,a=r.selector,s=r.cssSelector,l=r.matchTextRule,c=r.textRule,d=r.htmlTextRule,u=d||JSON.parse(c)||{},p=u.operator,f=u.values,g={matchCssSelector:i,cssSelector:a||s,matchTextRule:l,textRuleOperator:p,textRuleValues:f},h=void 0;try{h=(0,R.elementContainsChild)(document,t)}catch(e){h=!1}h?n(t):(0,I.findInAll)(g,(0,O.getRegisteredIframes)(),function(e){var t=void 0,i=B.default.getIframeIdOfBadge(o);e&&e.iframeData?(i&&i!==e.iframeData.iframeId&&A.default.removeBadgeFromIframe((0,O.getIframeData)(i),o),A.default.sendBadgeToIframe(e.iframeData,{id:o,elementSelector:r})):e&&e.element?(t=e.element,i&&A.default.removeBadgeFromIframe(i)):(k.logger.log("Could not find target element for badge with selector "+r.cssSelector),t=void 0),n(t)})}function p(e){try{var t=e?e.trim():e;if(s(e))return t;var n=document.createElement("div");return n.innerHTML=t,n}catch(e){return k.logger.logInternalError(new Error("Badge Tooltip createElementFromHTML "+e)),""}}function f(e,t,n){function r(){var r=this;this.badgeAttr=e,this.isRendered=!1,n?(this.targetData=n,this.target=t):t?this.target=t:u(e,null,function(e){r.target=e})}function o(e){try{if(Y){var t=Y,n=t.state.isVisible;e&&!n?Y.show():!e&&n&&(Y.setProps({duration:[0,0]}),Y.hide(),Y.setProps({duration:[300,250]}))}}catch(e){k.logger.logInternalError(new Error("Error in change visibility of tooltip"+e))}}function i(e,t,n){if(!Y&&t)c(e,t,!1,n);else if(Y){var r=Y,i=r.state.isVisible;t!==i&&t&&o(!0)}}function s(e){try{if(!e)return;var t=e.backgroundColor,n=e.height,r=e.autoHeight,o=e.width,i=e.showTooltipArrow;if(Y){var a=Y,s=a.popper;s.classList.add("apt-badge-tippy"),s.setAttribute("aria-live","polite");var l=s.firstChild,c=l.querySelector(".tippy-content");if(r?c.style.height="":n&&(c.style.height=n+"px"),o&&(c.style.width=o+"px"),i){l.querySelector(".tippy-arrow").style.color=t}l.style.backgroundColor=t}}catch(e){k.logger.logInternalError(new Error("Error in update tooltip: "+e))}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments[3],i=e.positionSettings,l=e.text,c=e.textColor,u=e.showTooltipArrow;Y&&Y.state&&!Y.state.isDestroyed&&Y.destroy();var f=d(i,!0),g=f.position,h=f.offset,m=l;a(l,c)&&(m="<div style='color: "+c+"'>"+l+"</div>");var v=p(m);if(t=t||Q,v){var b={trigger:t?"manual":n?"click":"mouseenter focus",zIndex:(0,E.getNumberWithFallback)(r,M),showOnCreate:t,hideOnClick:!t,arrow:!!(0,E.isNullOrUndefined)(u)||u,theme:"badge",placement:g,offset:h,content:v,interactive:!0,allowHTML:!0,flip:!1,maxWidth:"none",sticky:!0,plugins:[y.sticky]};(0,P.useComputeStyleModifierForTooltip)(b),Y=(0,N.addTooltipToElement)(W,b)}Y&&(s(e),t&&o(!0))}function f(e){var t=this,n=d(e,!1),r=n.position,o=n.offset,i={placement:r,removeOnDestroy:!1,positionFixed:(0,x.getConfig)("badgesUseFixedPosition"),modifiers:{offset:{offset:o},flip:{enabled:!1}}};if((0,P.useComputeStyleModifier)(i),this.targetData){var a=function(n){if((0,E.isObject)(n.styles)){if(Object.keys(n.styles).forEach(function(e){var t=n.styles[e];"transform"!==e&&n.instance.popper.style.setProperty(e,t)}),t.targetData.rect){var r=new F.default,o=e.positionVertical.toLowerCase();"middle"===o&&(o="center"),r.positionElement(n.instance.popper,{isDom:!1,elementRect:t.targetData.rect},e.positionHorizontal.toLowerCase(),o,e.positionTopDelta,e.positionLeftDelta,!1,!1,!0,t.targetData.pageYOffset)}}return n};i.modifiers.applyStyle={fn:a},i.onUpdate=function(){w(t.targetData.isVisible)}}else i.onUpdate=I.bind(this);return new b.default(this.target||(0,x.getBody)(),W,i)}function g(e){var t=e.engagementTrigger,n=e.altSettings,r=e.standalone,o=n&&n.enabled,i=t===$;return(r||i)&&o}function h(){if(this.target||this.targetData){var e=this.badgeAttr,t=e.positionSettings,n=e.altSettings,r=e.standalone,o=e.engagementTrigger,i=e.customZIndex;if(K=f.apply(this,[t]),g(this.badgeAttr)){c(n,!1,r&&o===$,i)}}}function v(e,t){q(e,function(e){W||(W=document.querySelector("#"+X)),W.innerHTML=e;var n=W.firstChild,r={height:"100%",width:"100%",padding:"7%",stroke:t,boxSizing:"border-box"};Object.assign(n.style,r)})}function C(e){var t=e.customZIndex,n=e.borderColor,r=e.borderWidth,o=e.badgeHotspotSettings.spotSize,i=o+"px";return{zIndex:(0,E.getNumberWithFallback)(t,M),height:i,width:i,borderColor:n,borderWidth:r+"px"}}function w(e){try{W&&(e?(W.classList.remove("apt-badge--hidden"),H||K&&K.scheduleUpdate()):(o(!1),W.classList.add("apt-badge--hidden"))),H=e}catch(e){k.logger.log("toggleVisibility - "+e)}}function I(){var e=this;Q||u(this.badgeAttr,this.target,function(t){if(e.target=t,t){var n=(0,E.isElementVisible)(e.target,!0,!0);K.reference=e.target,e.isRendered?w.call(e,n):e.render()}else e.destroy()})}function A(){Y&&Y.popperInstance&&Y.popperInstance.scheduleUpdate()}function O(e){if(Y){return Y.state.isVisible!==e}return!0}function _(e){if(Y){var t=d(e,!0),n=t.position,r=t.offset,o=Y.props,i=o.placement,a=o.offset;return n!==i||r!==a}return!0}function D(e){if(Y){return Y.props.arrow!==e}return!0}function B(e){W.children.length>0?W.replaceChild(e,W.children[0]):W.appendChild(e)}function R(t,n){var r=V[t];if(r){var i=function(){var r=l();e.standalone||r||(e.isPreview?e.clickCallback&&e.clickCallback(e.id):((0,T.default)(n,"b",function(e){if(e.content.contentType===L.IN_APP_GUIDE&&e.content.steps&&Array.isArray(e.content.steps)){var t=m(e.content.steps,1),n=t[0];n&&"TOOLTIP"===n.type&&0===n.sequenceNumber&&n.stickToBadge&&(n.matchCssSelector=!0,n.cssSelector="#"+W.id)}}),"ONCE"===e.qualificationScopeType&&t===$&&e.clickCallback&&e.clickCallback(e.id)))};e.standalone&&(0,E.addEnterKeyDownListener)(W,function(){o(!Y.state.isVisible)}),(0,E.addEnterKeyDownListener)(W,i),(0,E.addEventListener)(W,r,i)}}function U(e){var t=e.engagementTrigger,n=e.badgeIcon,r=e.badgeIconColor,o=e.backgroundColor,i=e.backgroundFill,a=e.useImage,s=e.imageUrl,l=e.onClick,c=e.engagementId,d=C(e);if(a&&s){var u=(0,E.createElement)("img");u.src=s,d.backgroundColor="transparent",B(u)}else n?(d.backgroundColor=(0,E.hexToRgba)(o,"number"==typeof i?i/100:1),v(n,r)):k.logger.log("No image nor icon were found for badge");Object.assign(W.style,d),W.id=X,R(t,c,l),H=z}var j=this,H=G,K=void 0,W=void 0,Y=void 0,X="apt-"+e.id,J={},Q=!1;r.apply(this),this.saveChanges=function(){this.badgeAttr=Object.assign(this.badgeAttr,J)},this.createTooltip=function(){var e=this.badgeAttr,t=e.altSettings,n=e.standalone,r=e.engagementTrigger,o=e.customZIndex;c(t,!1,n&&r===$,o)},this.setEditMode=function(e){Q=e},this.clear=function(){i(this.badgeAttr.altSettings,!0,this.badgeAttr.customZIndex)},this.toggleTooltip=function(e){var t=this.badgeAttr,n=t.altSettings,r=t.customZIndex;(g(this.badgeAttr)&&e||!e)&&i(n,e,r)},this.repositionTooltip=function(){A()},this.updateTooltipContent=function(e){this.badgeAttr.altSettings.text=p(e)},this.update=function(e,t){var n=t.indexOf("all")>-1,r=t.indexOf("altSettings")>-1,a=e.altSettings;if(!Y&&a.enabled&&this.createTooltip(),Y&&(n||a&&r)){J=Object.assign(J,e);var l=J,c=l.altSettings,u=O(a.enabled),p=_(a.positionSettings),h=D(a.showTooltipArrow);if(p){var m=d(a.positionSettings,!0),v=m.position,b=m.offset;Y.setProps({placement:v,offset:b}),Y.popperInstance.scheduleUpdate()}else h?(Y.setProps({arrow:a.showTooltipArrow}),a.showTooltipArrow&&s(c)):u?o(a.enabled):Object.keys(a).length>0&&s(c)}if(n||!r)if(J=Object.assign(J,e),A(),Y&&Y.setProps({zIndex:J.customZIndex}),t.indexOf("positionSettings")>-1)f.apply(this,[J.positionSettings]);else if(t.indexOf("engagementTrigger")>-1){var y=J,E=y.altSettings,S=y.customZIndex,C=g(J);i(E,C,S),C||Y&&Y.setProps({trigger:""})}else U.apply(this,[J])},this.scheduleUpdatePopper=function(){var e=this;u(this.badgeAttr,this.target,function(t){e.target=t,t&&(K.reference=e.target),K&&K.scheduleUpdate()})},this.changePosition=function(e){if(this.target){var t=Object.assign(this.badgeAttr.positionSettings,e);f.apply(this,[t])}},this.getDomElement=function(){return W},this.destroy=function(){try{Y&&Y.state&&!Y.state.isDestroyed&&Y.destroy(),W=document.querySelector("#"+X),W&&W.parentNode.removeChild(W),K&&K.reference&&K.destroy(),this.isRendered=!1,W=null}catch(e){k.logger.logInternalError(new Error("Could not destroy badge: "+e))}},this.updateTargetData=function(e,t){j.targetData=t,j.target=e},this.render=function(e){if(this.target||this.targetData){var t=e||(0,x.getBody)();W&&this.destroy(),W=(0,E.createElement)("div","apt-badge",{}),U.apply(this,[this.badgeAttr]),t.appendChild(W),h.apply(this),this.isRendered=!0,this.badgeAttr.isViewed||(this.badgeAttr.isViewed=!0),W.setAttribute("tabindex",L.TAB_INDEX_START-1);var n=this.badgeAttr,r=n.altSettings,o=n.alternateText,i=r&&r.enabled;o?W.setAttribute("aria-label",o):i?W.setAttribute("aria-label",(0,S.stripHtml)(r.text)):W.setAttribute("aria-label","Badge"),(0,S.disableFocusOnClick)(W)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ICON_MAP=void 0;var g,h,m=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.checkStringHasWrapper=s,t.findTarget=u,t.formatContentForTooltip=p,t.Badge=f;var v=n(50),b=r(v),y=n(64),E=n(0),S=n(7),C=n(11),w=n(102),T=r(w),x=n(2),k=n(3),I=n(17),A=r(I),O=n(6),N=n(41),L=n(8),_=n(33),F=r(_),D=n(69),B=r(D),R=n(18),P=n(103),M="99998",U=function(e){return"BADGE_ICON_"+e},j=function(e){return x.staticContentHost+"/images/badge/types/"+e+".svg"},H=t.ICON_MAP=(g={},o(g,U(1),j("announce")),o(g,U(2),j("bulb")),o(g,U(3),j("cap")),o(g,U(4),j("exclam")),o(g,U(5),j("question")),o(g,U(6),j("flag")),o(g,U(7),j("guide")),o(g,U(8),j("arrow")),o(g,U(9),j("badge")),o(g,U(10),j("check")),o(g,U(11),j("cross")),o(g,U(12),j("dash")),o(g,U(13),j("feedback")),o(g,U(14),j("info")),o(g,U(15),j("nps")),o(g,U(16),j("star")),o(g,U(17),j("tooltip")),g),$="ON_CLICK",V=(h={},o(h,$,"click"),o(h,"ON_HOVER","mouseover"),h),K={},q=function(e,t){var n=K[e];if(n)return t(n);var r=H[e];C.AjaxUtil.getData(r,function(n){return K[e]=n,t(n)})},W=function(e){return"center"===e},z=!0,G=!1},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(e){if(p===clearTimeout)return clearTimeout(e);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){m&&g&&(m=!1,g.length?h=g.concat(h):v=-1,h.length&&l())}function l(){if(!m){var e=i(s);m=!0;for(var t=h.length;t;){for(g=h,h=[];++v<t;)g&&g[v].run();v=-1,t=h.length}g=null,m=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function d(){}var u,p,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(e){p=o}}();var g,h=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||m||i(l)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=d,f.addListener=d,f.once=d,f.off=d,f.removeListener=d,f.removeAllListeners=d,f.emit=d,f.prependListener=d,f.prependOnceListener=d,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){function r(t,n,r){function o(e){if(e.target){var t=e.target.closest(f);if(t){var r=t.getAttribute("data-tippy-trigger")||n.trigger||l.d.trigger;if((0,l.i)(r,d[e.type])){var o=(0,l.t)(t,m);o&&(p=p.concat(o))}}}}function i(e,t,n,r){void 0===r&&(r=!1),e.addEventListener(t,n,r),u.push({node:e,eventType:t,handler:n,options:r})}function a(e){var t=e.reference;i(t,"mouseover",o),i(t,"focusin",o),i(t,"click",o)}function s(){u.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,o=e.options;t.removeEventListener(n,r,o)}),u=[]}function c(e){var t=e.destroy;e.destroy=function(e){void 0===e&&(e=!0),e&&p.forEach(function(e){e.destroy()}),p=[],s(),t()},a(e)}void 0===r&&(r=[]),"production"!==e.env.NODE_ENV&&(0,l.e)(!(n&&n.target),["You must specity a `target` prop indicating a CSS selector string matching","the target elements that should receive a tippy."].join(" ")),r=n.plugins||r;var u=[],p=[],f=n.target,g=(0,l.r)(n,["target"]),h=(0,l._)({},g,{plugins:r,trigger:"manual"}),m=(0,l._)({},g,{plugins:r,showOnCreate:!0}),v=(0,l.t)(t,h);return(0,l.n)(v).forEach(c),v}function o(){var e=(0,l.a)();return e.className=l.B,(0,l.s)([e],"hidden"),e}function i(e,t){var n=t?e.offsetWidth:e.offsetHeight;return{size:n,x:t?n:0,y:t?0:n}}function a(e,t,n){if(n.length<2||null===e)return t;switch(e){case"top":case"bottom":var r=n[0],o=n[n.length-1],i="top"===e,a=r.top,s=o.bottom,l=i?r.left:o.left,c=i?r.right:o.right;return{top:a,bottom:s,left:l,right:c,width:c-l,height:s-a};case"left":case"right":var d=Math.min.apply(Math,n.map(function(e){return e.left})),u=Math.max.apply(Math,n.map(function(e){return e.right})),p=n.filter(function(t){return"left"===e?t.left===d:t.right===u}),f=p[0].top,g=p[p.length-1].bottom,h=d,m=u;return{top:f,bottom:g,left:h,right:m,width:m-h,height:g-f};default:return t}}function s(e,t){return!e||!t||(e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left)}Object.defineProperty(t,"__esModule",{value:!0}),t.sticky=t.inlinePositioning=t.followCursor=t.delegate=t.createSingleton=t.animateFill=t.roundArrow=t.hideAll=t.default=t.createTippyWithPlugins=void 0;var l=n(93);Object.defineProperty(t,"createTippyWithPlugins",{enumerable:!0,get:function(){return l.m}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l.t}}),Object.defineProperty(t,"hideAll",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(t,"roundArrow",{enumerable:!0,get:function(){return l.R}}),n(50);var c=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=[]),"production"!==e.env.NODE_ENV&&(0,l.e)(!Array.isArray(t),["The first argument passed to createSingleton() must be an array of tippy","instances. The passed value was",String(t)].join(" ")),r=n.plugins||r,t.forEach(function(e){e.disable()});var o,i,a=(0,l._)({},l.d,{},n).aria,s=!1,c=t.map(function(e){return e.reference}),d={fn:function(e){function n(t){if(o){var n="aria-"+o;t&&!e.props.interactive?i.setAttribute(n,e.popperChildren.tooltip.id):i.removeAttribute(n)}}return{onAfterUpdate:function(t,n){var r=n.aria;void 0!==r&&r!==a&&(s?(s=!0,e.setProps({aria:null}),s=!1):a=r)},onDestroy:function(){t.forEach(function(e){e.enable()})},onMount:function(){n(!0)},onUntrigger:function(){n(!1)},onTrigger:function(r,s){var l=s.currentTarget,d=c.indexOf(l);l!==i&&(i=l,o=a,e.state.isVisible&&n(!0),e.popperInstance.reference=l,e.setContent(t[d].props.content))}}}};return(0,l.t)((0,l.a)(),(0,l._)({},n,{plugins:[d].concat(r),aria:null,triggerTarget:c}))},d={mouseover:"mouseenter",focusin:"focus",click:"click"},u={name:"animateFill",defaultValue:!1,fn:function(t){function n(){t.popperChildren.backdrop=s}var r=t.popperChildren,i=r.tooltip,a=r.content,s=t.props.animateFill&&!l.b?o():null;return{onCreate:function(){s&&(n(),i.insertBefore(s,i.firstElementChild),i.setAttribute("data-animatefill",""),i.style.overflow="hidden",t.setProps({animation:"shift-away",arrow:!1}))},onMount:function(){if(s){var t=i.style.transitionDuration,n=Number(t.replace("ms",""));a.style.transitionDelay=Math.round(n/10)+"ms",s.style.transitionDuration=t,(0,l.s)([s],"visible"),"production"!==e.env.NODE_ENV&&((0,l.w)("absolute"!==getComputedStyle(s).position,"The `tippy.js/dist/backdrop.css` stylesheet has not been\n              imported!\n              \n              The `animateFill` plugin requires this stylesheet to work."),(0,l.w)("none"===getComputedStyle(i).transform,"The `tippy.js/animations/shift-away.css` stylesheet has not\n              been imported!\n              \n              The `animateFill` plugin requires this stylesheet to work."))}},onShow:function(){s&&(s.style.transitionDuration="0ms")},onHide:function(){s&&(0,l.s)([s],"hidden")},onAfterUpdate:function(){n()}}}},p={name:"followCursor",defaultValue:!1,fn:function(e){function t(e){Object.keys(e).forEach(function(t){C[t]=(0,l.u)(e[t],C[t])})}function n(){return"manual"===e.props.trigger.trim()}function r(){var t=!!n()||null!==E&&!(0===E.clientX&&0===E.clientY);return e.props.followCursor&&t}function o(){return l.f.isTouch||"initial"===e.props.followCursor&&e.state.isVisible}function a(){e.popperInstance&&b&&(e.popperInstance.reference=b)}function s(){if(r()||e.props.placement!==C.placement){var t=C.placement,n=t.split("-")[1];S=!0,e.setProps({placement:r()&&n?t.replace(n,"start"===n?"end":"start"):t}),S=!1}}function c(){e.popperInstance&&r()&&(o()||!0!==e.props.followCursor)&&e.popperInstance.disableEventListeners()}function d(){r()?p():a()}function u(){r()&&g(h)}function p(){y.addEventListener("mousemove",g)}function f(){y.removeEventListener("mousemove",g)}function g(t){var n=h=t,r=n.clientX,a=n.clientY;if(e.popperInstance&&e.state.currentPlacement){var s=(0,l.h)(t.target,function(e){return e===m}),c=m.getBoundingClientRect(),d=e.props.followCursor,u="horizontal"===d,p="vertical"===d,g=(0,l.i)(["top","bottom"],(0,l.j)(e.state.currentPlacement)),y=i(v,g),E=y.size,S=y.x,C=y.y;!s&&e.props.interactive||(null===b&&(b=e.popperInstance.reference),e.popperInstance.reference={referenceNode:m,clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{width:g?E:0,height:g?0:E,top:(u?c.top:a)-C,bottom:(u?c.bottom:a)+C,left:(p?c.left:r)-S,right:(p?c.right:r)+S}}},e.popperInstance.update()),o()&&f()}}var h,m=e.reference,v=e.popper,b=null,y=(0,l.g)(e.props.triggerTarget||m),E=null,S=!1,C=e.props;return{onAfterUpdate:function(e,n){S||(t(n),n.placement&&s()),n.placement&&c(),requestAnimationFrame(u)},onMount:function(){u(),c()},onShow:function(){n()&&(E={clientX:0,clientY:0},h=E,s(),d())},onTrigger:function(e,t){E||((0,l.c)(t)&&(E={clientX:t.clientX,clientY:t.clientY},h=t),s(),d())},onUntrigger:function(){e.state.isVisible||(f(),E=null)},onHidden:function(){f(),a(),E=null}}}},f={name:"inlinePositioning",defaultValue:!1,fn:function(e){function t(){return!!e.props.inlinePositioning}var n=e.reference;return{onHidden:function(){t()&&(e.popperInstance.reference=n)},onShow:function(){t()&&(e.popperInstance.reference={referenceNode:n,clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return a(e.state.currentPlacement&&(0,l.j)(e.state.currentPlacement),n.getBoundingClientRect(),(0,l.k)(n.getClientRects()))}})}}}},g={name:"sticky",defaultValue:!1,fn:function(e){function t(){return e.popperInstance?e.popperInstance.reference:o}function n(t){return!0===e.props.sticky||e.props.sticky===t}function r(){var o=n("reference")?t().getBoundingClientRect():null,c=n("popper")?i.getBoundingClientRect():null;(o&&s(a,o)||c&&s(l,c))&&e.popperInstance.update(),a=o,l=c,e.state.isMounted&&requestAnimationFrame(r)}var o=e.reference,i=e.popper,a=null,l=null;return{onMount:function(){e.props.sticky&&r()}}}};t.animateFill=u,t.createSingleton=c,t.delegate=r,t.followCursor=p,t.inlinePositioning=f,t.sticky=g}).call(t,n(63))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,N.getKcConfig)();if(t){var n=t.kcId;Q=n,s(function(){ee=!1,$.botEventEmmiter.dispatchEvent("WIDGET_LOADED",e,{kcId:n})},function(t){ee=!1,$.botEventEmmiter.dispatchEvent("WIDGET_FAILED",e,{kcId:n,code:500,message:t})})}}function i(e,t,n){var r={apiKey:A.eventTrackData.data[A.productIdParameter],aptId:e,initialConfig:t};F.KnowledgeCenterManager.initWidget(r,!1,te,n)}function a(e,t,n,r,a){var l=!1,c=Z!==t.kcId;(r||Z)&&c&&(F.KnowledgeCenterManager.clearWidgetLoadQueue(),(0,N.setKcConfig)({})),Z=t.kcId,(0,N.setKcConfig)(t),e||c?((0,N.isIframe)()?J.default.getAptrinsicId(function(e){i(I(e,1)[0].aptrinsicId,t,a)}):i(A.eventTrackData.data[A.aptrinsicIdParam],t,a),Q?(l=!0,o(a)):Q!==Z?(l=!1,F.KnowledgeCenterManager.registerAfterWidgetLoad(function(){o(a)})):ee=!1):c?(l=!0,ee=!1):(l=!0,s(function(){ee=!1,$.botEventEmmiter.dispatchEvent("WIDGET_LOADED",a,{kcId:Z})},function(e){ee=!1,$.botEventEmmiter.dispatchEvent("WIDGET_FAILED",a,{kcId:Z,code:500,message:e})})),l&&F.KnowledgeCenterManager.updateWidgetConfig()}function s(e,t){var n=A.eventTrackData.data[A.productIdParameter],r=A.eventTrackData.data[A.aptrinsicIdParam];F.KnowledgeCenterManager.fetchEntriesAndSendToWidget(n,r,e,t)}function l(){se.removeAllHandler()}function c(){Q="",F.KnowledgeCenterManager.removeWidget(Z),(0,H.removeEmbeddedListeners)(),Z="",(0,N.setKcConfig)({}),ee=!1}function d(e,t,n,r){var o=r.shouldRemoveWidget,i=r.shouldJustClean,a=r.shouldDispatchEvent;r.shouldRemoveHandlers&&se.removeAllHandler(),o?c():i&&(Z="",(0,N.setKcConfig)({}),F.KnowledgeCenterManager.cleanWidget()),ee=!1,a&&$.botEventEmmiter.dispatchEvent("WIDGET_FAILED",n,{kcId:e,code:t,message:"Could not fetch knowledge center with provided id"})}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments[4],i=O.UserData.isUser(),a=K.UUIDGenerator.generateV4Id();if(r&&ie&&ae&&($.botEventEmmiter.addListener("WIDGET_LOADED",ie,a),$.botEventEmmiter.addListener("WIDGET_FAILED",ae,a)),ee&&(B.logger.log(n+" is in progress"),d(Z,500,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!1,shouldRemoveHandlers:!1})),(0,N.getConfig)("widgetEnabled")&&i&&!(_.default.isPreview()&&_.default.getAdditionalDetails().kcId)&&!ee){var s=function(i){if(i){ne=i.kcId;var s=Object.assign({},i);if(!(0,q.validateConfigChecksum)(ne,s))return void d(ne,500,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!0,shouldRemoveHandlers:!0});T(i,e,r,a)}else t?ee=!1:(D.internalEventListener.dispatchEvent(z.BOT_IFRAME_INTERNAL_EVENTS.BOT_EMPTY_CONFIG),d(n,500,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!0,shouldRemoveHandlers:!0}));o&&o(i)},l=function(e){d(n,404,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!0,shouldRemoveHandlers:!0})};ee=!0;var c=A.eventTrackData.data[A.productIdParameter];(0,F.fetchKnowledgeCenterConfig)(c,n,s,l)}}function p(e,t,n,r){try{var o=(0,N.getKcConfig)()||{},i=o.kcId;Object.keys(o).length>0&&i?(e?F.KnowledgeCenterManager.open():F.KnowledgeCenterManager.close(r),(0,R.isFunction)(t)&&t({kcId:i})):(0,R.isFunction)(n)&&n({kcId:i,code:404,message:"Not bot was found with id provided"})}catch(e){(0,R.isFunction)(n)&&n({kcId:kcId,code:404,message:"An error occurred"}),B.logger.logInternalError(new Error("toggleKcBot - "+e))}}function f(){var e=document.querySelector("#apt-widget");return e?e&&!e.classList.contains("apt-hidden"):null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};try{var r=document.querySelector("#apt-widget"),o=f();r?(e!==o&&(e?r.classList.remove("apt-hidden"):r.classList.add("apt-hidden")),t()):n()}catch(e){n(),B.logger.log("error in togglerBotContainer "+e)}}function h(){var e=document.querySelector("#apt-widget");if(e){return!e.querySelector(".apt-widget.apt-widget-window")}return!1}function m(){clearInterval(re),re=null,clearTimeout(oe),oe=null}function v(e,t){try{m(),h()?(t(),m()):(re=setInterval(function(){h()&&(t(),m())},200),oe=setTimeout(function(){m(),d(Z,500,e,{shouldRemoveWidget:!0,shouldDispatchEvent:!0,shouldRemoveHandlers:!0}),B.logger.logInternalError(new Error("onWidgetClosed - error - could not close the widget in less than 3 seconds"))},3e3))}catch(t){m(),d(Z,500,e,{shouldRemoveWidget:!0,shouldDispatchEvent:!0,shouldRemoveHandlers:!0}),B.logger.log("onWidgetClosed - error"+t)}}function b(e,t,n,r,o){try{var i=(0,N.getConfig)("kcPositionType");(0,H.findWidgetContainer)(n.cssSelector,o,{isNewAPI:!0,positionType:i,fetchKcType:(0,N.getConfig)("fetchKcType"),kcId:t.kcId},{onClick:F.KnowledgeCenterManager.toggleBot,onDone:function(n){ne===t.kcId&&(F.KnowledgeCenterManager.updateEmbeddedMappedElement(n),F.KnowledgeCenterManager.checkIsInitialized()||F.KnowledgeCenterManager.checkIsInProgress()?F.KnowledgeCenterManager.checkIsInitialized()&&!1===f()&&(p(!1),v(o,function(){g(!0)})):a(e,t,n,r,o))},onFailed:function(){ne===t.kcId&&(r?c():(y(),D.internalEventListener.dispatchEvent("BOT_NOT_FOUND")))}})}catch(e){clearInterval(re),re=null,B.logger.log("error in updateWidget "+e)}}function y(e,t){p(!1,function(){g(!1,e,t)},t)}function E(){if("injection"===(0,N.getConfig)("kcPositionType")){var e=F.KnowledgeCenterManager.getEmbeddedMappedElement()||{element:null},t=e.element;try{!t||t&&!(0,W.elementContainsChild)((0,N.getBody)(),t)?c():g(!1)}catch(e){c()}}else y()}function S(){var e=void 0,t=void 0;this.removeAllHandler=function(){t&&(M.default.removeObserver(t),t=null),e&&D.internalEventListener.removeListener("pageview",e)},this.addHandlers=function(n,r){e=function(){(0,$.clearBotCommands)(),E(),n([],!0)},D.internalEventListener.addListener("pageview",e),t&&this.removeAllHandler(),t=M.default.addObserver(function(){return!0},n,function(e,t){return w(e)||t})}}function C(e){return"apt-widget"===e.id||1===e.nodeType&&e.querySelector("#apt-widget")}function w(e){var t=!1,n=!1;return e.some(function(e){return e.addedNodes.forEach(function(e){var t=3===e.nodeType;n||t||(n=C(e))}),n||e.removedNodes.forEach(function(e){var n=3===e.nodeType;t||n||(t=C(e))}),!n&&t})}function T(e,t,n,r){function o(){a(t,e,null,n,r)}var i=e.windowSettings.embedKCSettings.elementSelector,s=function(o,a){var s=w(o);s&&c(),(s||a)&&le(t,e,i,n,r)};if("embedded"===(0,N.getConfig)("kcDisplayType")){(0,N.isIframe)()||D.internalEventListener.dispatchEvent(z.TOP_TO_IFRAME_EVENTS.BOT_RESPONSE,e);var l=(0,N.getConfig)("kcPositionType"),d="injection"===l;Z!==e.kcId&&(ee=!1,F.KnowledgeCenterManager.cleanWidget(),d&&(Q="",F.KnowledgeCenterManager.removeWidget()));var u=F.KnowledgeCenterManager.checkIsInitialized();F.KnowledgeCenterManager.checkIsInitialized()||F.KnowledgeCenterManager.checkIsInProgress()?u&&(n?(se.removeAllHandler(),(0,H.removeEmbeddedListeners)(),x(i,o,function(){se.addHandlers(s,r)})):o()):((0,H.removeEmbeddedListeners)(),se.removeAllHandler(),x(i,o,function(){se.addHandlers(s,r)}))}else o()}function x(e,t,n){(0,V.addDOMReadyListener)(function(){(0,U.findInAll)(e,(0,j.getRegisteredIframes)(),function(e){e&&t(e),n&&n(e)})})}function k(e,t){e&&F.KnowledgeCenterManager.checkIsInitialized()&&(0,$.runBotCommands)(),ie=function(){(0,$.runBotCommands)(),ee=!1},ae=function(){ee=!1,(0,R.isFunction)(t)&&t(),se.removeAllHandler()},u(!0,!1,null,!0)}Object.defineProperty(t,"__esModule",{value:!0});var I=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.removeEmbeddedHanldlers=l,t.removeWidget=c,t.initKnowledgeCenter=u,t.toggleKcBot=p,t.toggleBotContainer=g,t.closeAndHideBot=y,t.initWidgetForAPI=k;var A=n(4),O=n(23),N=n(2),L=n(14),_=r(L),F=n(29),D=n(9),B=n(3),R=n(0),P=n(30),M=r(P),U=n(17),j=n(6),H=n(52),$=n(51),V=n(10),K=n(15),q=n(53),W=n(18),z=n(22),G=n(98),Y=r(G),X=n(47),J=r(X),Q=void 0,Z=void 0,ee=!1,te=!1,ne="",re=void 0,oe=void 0,ie=void 0,ae=void 0,se=new S,le=(0,R.debounce)(b,500);(0,Y.default)(function(){l(),c()},function(e,t){ne=e.kcId,T(e,t)},F.KnowledgeCenterManager)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,A.getKcConfig)();if(t){var n=t.kcId;q=n,a(function(){z=!1,j.botEventEmmiter.dispatchEvent("WIDGET_LOADED",e,{kcId:n})},function(t){z=!1,j.botEventEmmiter.dispatchEvent("WIDGET_FAILED",e,{kcId:n,code:500,message:t})})}}function i(e,t,n,r,i){var s=!1,l=W!==t.kcId;if((r||W)&&l&&(L.KnowledgeCenterManager.clearWidgetLoadQueue(),(0,A.setKcConfig)({})),W=t.kcId,(0,A.setKcConfig)(t),e||l){var c={apiKey:k.eventTrackData.data[k.productIdParameter],aptId:k.eventTrackData.data[k.aptrinsicIdParam],initialConfig:t};L.KnowledgeCenterManager.initWidget(c,!1,G,i),q?(s=!0,o(i)):q!==W?(s=!1,L.KnowledgeCenterManager.registerAfterWidgetLoad(function(){return o(i)})):z=!1}else l?(s=!0,z=!1):(s=!0,a(function(){z=!1,j.botEventEmmiter.dispatchEvent("WIDGET_LOADED",i,{kcId:W})},function(e){z=!1,j.botEventEmmiter.dispatchEvent("WIDGET_FAILED",i,{kcId:W,code:500,message:e})}));s&&L.KnowledgeCenterManager.updateWidgetConfig()}function a(e,t){var n=k.eventTrackData.data[k.productIdParameter],r=k.eventTrackData.data[k.aptrinsicIdParam];L.KnowledgeCenterManager.fetchEntriesAndSendToWidget(n,r,e,t)}function s(){q="",L.KnowledgeCenterManager.removeWidget(W),(0,U.removeEmbeddedListeners)(),W="",(0,A.setKcConfig)({}),z=!1}function l(e,t,n,r){var o=r.shouldRemoveWidget,i=r.shouldJustClean,a=r.shouldDispatchEvent;r.shouldRemoveHandlers&&ee.removeAllHandler(),o?s():i&&(W="",(0,A.setKcConfig)({}),L.KnowledgeCenterManager.cleanWidget()),z=!1,a&&j.botEventEmmiter.dispatchEvent("WIDGET_FAILED",n,{kcId:e,code:t,message:"Could not fetch knowledge center with provided id"})}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments[4],i=I.UserData.isUser(),a=$.UUIDGenerator.generateV4Id();if(r&&Q&&Z&&(j.botEventEmmiter.addListener("WIDGET_LOADED",Q,a),j.botEventEmmiter.addListener("WIDGET_FAILED",Z,a)),z&&(F.logger.log(n+" is in progress"),l(W,500,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!1,shouldRemoveHandlers:!1})),(0,A.getConfig)("widgetEnabled")&&i&&!(N.default.isPreview()&&N.default.getAdditionalDetails().kcId)&&!z){var s=function(i){if(i){Y=i.kcId;var s=Object.assign({},i);if(!(0,V.validateConfigChecksum)(Y,s))return void l(n,500,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!0,shouldRemoveHandlers:!0});T(i,e,r,a)}else t?z=!1:l(n,500,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!0,shouldRemoveHandlers:!0});o&&o(i)},c=function(e){l(n,404,a,{shouldRemoveWidget:!0,shouldJustClean:!1,shouldDispatchEvent:!0,shouldRemoveHandlers:!0})};z=!0;var d=k.eventTrackData.data[k.productIdParameter];(0,L.fetchKnowledgeCenterConfig)(d,n,s,c)}}function d(e,t,n){var r=n.onDone,o=n.onError,i="API"===(0,A.getConfig)("fetchKcType");z&&F.logger.log(e+" is in progress"),i&&(Q=function(e){var n=e.kcId;t&&L.KnowledgeCenterManager.open(),z=!1,r&&"function"==typeof r&&r({id:n})},Z=function(e){var t=e.kcId,n=e.code,r=e.message;z=!1,o&&"function"==typeof o&&o({id:t,code:n,message:r}),ee.removeAllHandler()},c(!0,!0,e,!0))}function u(e,t){if((0,D.isObject)(e)){var n=function(){G=!1,d(null,t,{onDone:i,onError:o})},r=e.id,o=e.onError,i=e.onDone,a=e.fetchDefault;if(r){var s=function(e){!0===a?n():"function"==typeof o&&o(e)};G=!0,d(r,t,{onDone:i,onError:s})}else!0===a&&n()}}function p(e,t,n,r){var o=(0,A.getKcConfig)()||{},i=o.kcId;Object.keys(o).length>0&&i?(e?L.KnowledgeCenterManager.open():L.KnowledgeCenterManager.close(r),"function"==typeof t&&t({kcId:i})):"function"==typeof n&&n({kcId:i,code:404,message:"Not bot was found with id provided"})}function f(){var e=document.querySelector("#apt-widget");return e?e&&!e.classList.contains("apt-hidden"):null}function g(e){try{var t=document.querySelector("#apt-widget"),n=f();t&&e!==n&&(e?t.classList.remove("apt-hidden"):t.classList.add("apt-hidden"))}catch(e){F.logger.log("error in togglerBotContainer "+e)}}function h(){var e=document.querySelector("#apt-widget");if(e){return!e.querySelector(".apt-widget.apt-widget-window")}return!1}function m(){clearInterval(X),X=null,clearTimeout(J),J=null}function v(e,t){try{m(),h()?(t(),m()):(X=setInterval(function(){h()&&(t(),m())},200),J=setTimeout(function(){m(),l(W,500,e,{shouldRemoveWidget:!0,shouldDispatchEvent:!0,shouldRemoveHandlers:!0}),F.logger.logInternalError(new Error("onWidgetClosed - error - could not close the widget in less than 3 seconds"))},3e3))}catch(t){m(),l(W,500,e,{shouldRemoveWidget:!0,shouldDispatchEvent:!0,shouldRemoveHandlers:!0}),F.logger.log("onWidgetClosed - error"+t)}}function b(e,t,n,r,o){try{var a=(0,A.getConfig)("kcPositionType");(0,U.findWidgetContainer)(n.cssSelector,o,{isNewAPI:!1,positionType:a,fetchKcType:(0,A.getConfig)("fetchKcType"),kcId:t.kcId},{onClick:L.KnowledgeCenterManager.toggleBot,onDone:function(n){Y===t.kcId&&(L.KnowledgeCenterManager.updateEmbeddedMappedElement(n),L.KnowledgeCenterManager.checkIsInitialized()||L.KnowledgeCenterManager.checkIsInProgress()||r?L.KnowledgeCenterManager.checkIsInitialized()&&!1===f()&&(p(!1),v(o,function(){g(!0)})):i(e,t,n,r,o))},onFailed:function(){Y===t.kcId&&(r?s():y())}})}catch(e){clearInterval(X),X=null,F.logger.log("error in updateWidget "+e)}}function y(){p(!1),g(!1)}function E(){if("injection"===(0,A.getConfig)("kcPositionType")){var e=L.KnowledgeCenterManager.getEmbeddedMappedElement()||{element:null},t=e.element;try{!t||t&&!(0,K.elementContainsChild)((0,A.getBody)(),t)?s():g(!1)}catch(e){s()}}else y()}function S(){var e=void 0,t=void 0;this.removeAllHandler=function(){t&&(R.default.removeObserver(t),t=null),e&&_.internalEventListener.removeListener("pageview",e)},this.addHandlers=function(n,r){e=function(){E(),n([],!0)},_.internalEventListener.addListener("pageview",e),t=R.default.addObserver(function(){return!0},n,function(e,t){return w(e)||t})}}function C(e){return"apt-widget"===e.id||1===e.nodeType&&e.querySelector("#apt-widget")}function w(e){var t=!1,n=!1;return e.some(function(e){return e.addedNodes.forEach(function(e){var t=3===e.nodeType;n||t||(n=C(e))}),n||e.removedNodes.forEach(function(e){var n=3===e.nodeType;t||n||(t=C(e))}),!n&&t})}function T(e,t,n,r){function o(){i(t,e,null,n,r)}var a=e.windowSettings.embedKCSettings.elementSelector,l=function(o,i){var l=w(o);l&&s(),(l||i)&&te(t,e,a,n,r)};if("embedded"===(0,A.getConfig)("kcDisplayType")){var c=(0,A.getConfig)("kcPositionType"),d="injection"===c;W!==e.kcId&&(z=!1,L.KnowledgeCenterManager.cleanWidget(),d&&(q="",L.KnowledgeCenterManager.removeWidget()));var u=L.KnowledgeCenterManager.checkIsInitialized();L.KnowledgeCenterManager.checkIsInitialized()||L.KnowledgeCenterManager.checkIsInProgress()?u&&n&&(ee.removeAllHandler(),(0,U.removeEmbeddedListeners)(),x(a,o,function(){ee.addHandlers(l,r)})):((0,U.removeEmbeddedListeners)(),ee.removeAllHandler(),x(a,o,function(){ee.addHandlers(l,r)}))}else o()}function x(e,t,n){(0,H.addDOMReadyListener)(function(){(0,P.findInAll)(e,(0,M.getRegisteredIframes)(),function(e){e&&t(e),n&&n(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.removeWidget=s,t.initKnowledgeCenter=c,t.fetchKcByApi=u,t.toggleKcBot=p;var k=n(4),I=n(23),A=n(2),O=n(14),N=r(O),L=n(29),_=n(9),F=n(3),D=n(0),B=n(30),R=r(B),P=n(17),M=n(6),U=n(52),j=n(74),H=n(10),$=n(15),V=n(53),K=n(18),q=void 0,W=void 0,z=!1,G=!1,Y="",X=void 0,J=void 0,Q=void 0,Z=void 0,ee=new S,te=(0,D.debounce)(b,500)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e,t,n,o,i){function a(e){var o=e.label,i=e.value,a=e.children,c={dataAtt:[{name:"data-value",value:i},{name:"data-name",value:i}]};o?c.text=o:a&&(a.setAttribute("data-value",i),a.setAttribute("data-name",i));var d=(0,r.createElement)("div","apt-dropdown-option",c,a);n.width&&(d.style.width=n.width),n.backgroundColor&&(d.style.backgroundColor=n.backgroundColor),n.color&&(d.style.color=n.color),e.selected&&s(e,!0),(0,r.addEventListener)(d,"click",function(e){var n=e.target,r=n.getAttribute("data-value");l(t.find(function(e){return e.value.toString()===r}))}),n.stopPropagation&&(0,r.addStopClickListeners)([d]),f.appendChild(d)}function s(e,t){var n=f.querySelector(".apt-dropdown-option-selected");n&&n.classList.remove("apt-dropdown-option-selected"),f.querySelectorAll(".apt-dropdown-option").forEach(function(t){t.getAttribute("data-value")===e.value&&t.classList.add("apt-dropdown-option-selected")}),u=e,g.innerHTML="";var o=e.label,i=e.children,a=void 0;a=i?i.cloneNode(!0):(0,r.createElement)("span",null,{text:o}),g.appendChild(a),!t&&c(null,!0)}function l(e){var t=u;s(e),t.value!=e.value&&o&&o(u,i)}function c(e,t){(t&&1==p||!t)&&(p=1-p,f.classList.toggle("apt-dropdown-content-show"),h.classList.toggle("apt-dropdown-show"))}var d=e,u=null,p=0,f=(0,r.createElement)("div","apt-dropdown-content"),g=(0,r.createElement)("div","apt-dropdown-label"),h=(0,r.createElement)("div","apt-dropdown",null,[g,f]);n=n||{},h.id=d,n.className&&h.classList.add(n.className),(0,r.addEventListener)(document,"click",function(e){(0,r.hasParentField)(e.target,"id",d)||c(null,!0)}),n.width&&(g.style.width=n.width,f.style.width=n.width,f.style.minWidth=n.width),n.backgroundColor&&(g.style.backgroundColor=n.backgroundColor,f.style.backgroundColor=n.backgroundColor),n.color&&(g.style.color=n.color,f.style.color=n.color),t.forEach(function(e){e&&a(e)}),!u&&s(t[0],!0),(0,r.addEventListener)(g,"click",c),n.stopPropagation&&(0,r.addStopClickListeners)([g]),this.getSelected=function(){return u},this.render=function(){return h},this.remove=function(){h.remove()},this.addOption=function(e){t.find(function(t){return t.value===e.value})||(t.push(e),a(e))},this.removeOption=function(e){t=t.filter(function(t){return t.value!==e});var n=h.querySelector('[data-value^="'+e+'"]');n&&(n.remove(),s(t[0],!0))}};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=n(2),s=window.localStorage,l=new i.LocalCache,c=function(){function e(){r(this,e)}return o(e,null,[{key:"storeBadges",value:function(e,t,n){var r=JSON.parse(s.getItem("px.badge"))||{};r.sid!==e&&(r={bgl:[]}),r.sid=e,r.bgl=n?t:r.bgl.concat(t),s.setItem("px.badge",JSON.stringify(r))}},{key:"fetchBadges",value:function(e){if(!(0,a.isIframe)()){var t=JSON.parse(s.getItem("px.badge"))||{};return t.sid===e?t.bgl:[]}}},{key:"storeBadge",value:function(e,t){var n=this.fetchBadges(e),r=t.badgeSettings.id,o=n.filter(function(e){return e.badgeSettings.id!==r});o.push(t),this.storeBadges(e,o,!0)}},{key:"clearAll",value:function(){s.removeItem("px.badge")}},{key:"getBadgesOfIframe",value:function(e){var t=l.getKey("iframeBadges");return t?t[e]?t[e]:[]:(l.setdata("iframeBadges",{}),[])}},{key:"addBadgeToIframe",value:function(t,n){e.getAllBadgesInIframes().indexOf(n)>-1&&e.removeBadgeFromIframe(n);var r=l.getKey("iframeBadges");if(r||l.setdata("iframeBadges",{}),r=l.getKey("iframeBadges"),r[t]){var o=r[t];-1===o.indexOf(n)&&o.push(n),r[t]=o}else r[t]=[n];l.setdata("iframeBadges",r)}},{key:"getIframeIdOfBadge",value:function(e){var t=l.getKey("iframeBadges"),n=void 0;if(t)for(var r=Object.keys(t),o=0;o<r.length;o+=1){var i=r[o],a=t[i];if(a.length>0){var s=a.indexOf(e);if(s>-1){n=i;break}}}return n}},{key:"removeBadgeFromIframe",value:function(e){var t=l.getKey("iframeBadges");t||l.setdata("iframeBadges",{}),t=l.getKey("iframeBadges"),Object.keys(t).forEach(function(n){var r=t[n],o=r.indexOf(e);o>-1&&r.splice(o,1),t[n]=r}),l.setdata("iframeBadges",t)}},{key:"getAllBadgesInIframes",value:function(){var e=l.getKey("iframeBadges");return(e?Object.values(e):[]).reduce(function(e,t){return e.concat(t)},[])}},{key:"setIsPreview",value:function(e){l.setdata("isPreview",e)}},{key:"getIsPreview",value:function(){return l.getKey("isPreview")}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){var t=e.radioOptions,n=e.name,r=e.selectCallback,i=null;this.getSelectedValue=function(){return i},this.render=function(){var a=[];return t&&t.forEach(function(t){var s=(0,o.createInput)("radio","",t.value,"",!1,t.selected,null,{name:n,tabIndex:t.tabIndex||-1});if(t.selected&&(i=t.value),t&&t.value||0===t.value){var l=t.children,c=t.text,d={},u=[s];c&&(d.text=c),l&&u.push(l);var p=e.childrenClassName.split(" "),f=(0,o.createElement)("label",p,d,u);(0,o.addEventListener)(f,"click",function(){i=s.value,r&&r(s.value)}),a.push(f)}}),(0,o.createElement)("div",e.className,null,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,r){var o=x[e];o||(o={},x[e]=o),o[t]=new A(t,r,n)}function a(e,t){var n=x[e];return n?n[t]:null}function s(e,t){var n=a(e,t);return n?n.handlerFunc:null}function l(e){var t=x[e];t&&Object.values(t).forEach(function(e){switch(e.type){case"CLICK":(0,v.removeEventListener)(document,"click",e.handlerFunc);break;case"PAGE":y.internalEventListener.removeListener("pageview",e.handlerFunc)}}),delete x[e];try{T.default.removeObserver(k[e])}catch(e){}delete k[e]}function c(e,t,n,r){try{(0,E.findInAll)(t.elementSelector,(0,C.getRegisteredIframes)(),function(e){e&&(e.element||e.iframeData)&&!1!==e.isVisible||(T.default.removeObserver(k[t.id]),l(t.id),r(t,n))})}catch(e){b.logger.logInternalError(e,"failure in mutation observer handler for guide tooltip on redirect"),r(t),T.default.removeObserver(k[t.id]),l(t.id)}}function d(e,t){var n=e.overlay&&e.overlay.modal,r=t.modal&&t.overlayFill>0;return n?e.overlay.fill>0:r}function u(e,t,n,r,o,i,a){try{if(!d(i,a))if("STEP"!==n||(0,v.hasParentClass)(e.target,"px-engagement-wrapper-guide")||(0,v.hasParentClass)(e.target,"apt-guide-target-block"))"ELEMENT"!==n||(0,v.hasParentClass)(e.target,"px-engagement-wrapper-guide")||(r.isDom?r.element&&!(0,v.hasElement)(r.element,e.target)&&(o(i,a),(0,v.removeEventListener)(document,"click",s(i.id,t)),l(i.id)):(I[r.iframeSource.iframeId]={handlerId:t,stepSettings:i,guideSettings:a,errorHandler:o},S.default.addOutsideEventHandler(r.iframeSource,i.elementSelector)));else{if(r.isDom&&r.element&&(0,v.hasElement)(r.element,e.target))return void setTimeout(function(){(0,v.isElementVisible)(r.element,!1,null)||(o(i,a),(0,v.removeEventListener)(document,"click",s(i.id,t)),l(i.id))},1500);o(i,a)}}catch(e){b.logger.logInternalError(e,"failed to handle tooltip action for show hide"),(0,v.removeEventListener)(document,"click",s(i.id,t)),l(i.id)}}function p(e,t,n,r){try{(0,E.findInAll)(t.elementSelector,(0,C.getRegisteredIframes)(),function(e){e&&(e.element||e.iframeData)&&!1!==e.isVisible||r(t)}),y.internalEventListener.removeListener("pageview",s(t.id,e)),l(t.id)}catch(n){b.logger.logInternalError(n,"failure in page change handler for guide tooltip on redirect"),r(t),y.internalEventListener.removeListener("pageview",s(t.id,e)),l(t.id)}}function f(e,t,n){var r=(0,v.getHandler)(!1,p,e,t,n),o=m(r,2),a=o[0],s=o[1];i(e.id,a,s),y.internalEventListener.addListener("pageview",s,"PAGE")}function g(e,t,n,r,o){var a=(0,v.getHandler)(!0,u,e,t,o,n,r),s=m(a,2),l=s[0],c=s[1];(0,v.addEventListener)(document,"click",c),i(n.id,l,c,"CLICK")}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=n(0),b=n(3),y=n(9),E=n(17),S=r(E),C=n(6),w=n(30),T=r(w),x={},k={},I={},A=function e(t,n,r){o(this,e),this.handlerId=t,this.type=n,this.handlerFunc=r},O=function(){function e(){o(this,e)}return h(e,[{key:"addNavigationHandler",value:function(e,t,n,r){if("TOOLTIP"===t.type){var o=(0,v.getHandler)(!1,c,t,n,r),i=m(o,2),a=i[1],s=T.default.addObserver(function(){return!0},a);k[t.id]=s;var l=t.navigation,d=l.nextStepTrigger,u=l.nextButtonAction;switch(d){case"NAVIGATION_CLICK":"REDIRECT"===u?(f(t,n,r),g("STEP",e,t,n,r)):"SHOW_NEXT"===u&&g("STEP",e,t,n,r);break;case"ELEMENT_CLICK":"SHOW_NEXT"===u?g("ELEMENT",e,t,n,r):"REDIRECT"===u?(g("ELEMENT",e,t,n,r),f(t,n,r)):"SHOW_ON_NEXT_PAGE"===u&&(g("ELEMENT",e,t,n,r),f(t,n,r));break;case"ELEMENT_HOVER":case"INPUT_TEXT_COMPLETION":g("ELEMENT",e,t,n,r)}}}},{key:"handleIframeExternalClick",value:function(e){var t=I[e];t&&((0,v.removeEventListener)(document,"click",s(t.stepSettings.id,t.handlerId)),l(t.stepSettings.id))}},{key:"removeAllHandlers",value:function(){try{Object.keys(x).forEach(function(e){l(e)})}catch(e){b.logger.logInternalError(e,"failed to remove all handlers")}}}]),e}(),N=new O;t.default=N},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(2),i=n(0),a=new function(){function e(e,t){e.push(t),r.logger.log(t)}function t(e,t){for(var n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}var n={A:!0,ABBR:!0,AUDIO:!0,B:!0,BIG:!0,BLOCKQUOTE:!0,BODY:!0,BR:!0,CAPTION:!0,CENTER:!0,CODE:!0,COL:!0,COLGROUP:!0,DEL:!0,DIV:!0,EM:!0,FONT:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HR:!0,I:!0,IFRAME:!0,IMG:!0,INS:!0,LABEL:!0,LI:!0,O:!0,OL:!0,P:!0,PRE:!0,S:!0,SCRIPT:!0,SMALL:!0,SOURCE:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,TABLE:!0,TBODY:!0,TD:!0,TFOOT:!0,TH:!0,THEAD:!0,TR:!0,TT:!0,U:!0,UL:!0,VIDEO:!0,META:!0},a={FORM:!0},s={accept:!0,"accept-charset":!0,accesskey:!0,action:!0,align:!0,alt:!0,allowfullscreen:!0,async:!0,autocomplete:!0,autofocus:!0,autoplay:!0,bgcolor:!0,border:!0,charset:!0,checked:!0,cite:!0,class:!0,color:!0,cols:!0,colspan:!0,content:!0,contenteditable:!0,controls:!0,coords:!0,data:!0,"data-aptr":!0,"data-apt-element":!0,datetime:!0,default:!0,defer:!0,dir:!0,dirname:!0,disabled:!0,download:!0,draggable:!0,enctype:!0,form:!0,formaction:!0,frameborder:!0,headers:!0,height:!0,hidden:!0,high:!0,href:!0,hreflang:!0,"http-equiv":!0,id:!0,ismap:!0,kind:!0,label:!0,lang:!0,list:!0,loop:!0,low:!0,max:!0,maxlength:!0,media:!0,method:!0,min:!0,multiple:!0,muted:!0,name:!0,novalidate:!0,open:!0,optimum:!0,pattern:!0,placeholder:!0,poster:!0,preload:!0,readonly:!0,rel:!0,required:!0,reversed:!0,rows:!0,rowspan:!0,sandbox:!0,scope:!0,selected:!0,shape:!0,size:!0,sizes:!0,span:!0,spellcheck:!0,src:!0,srcdoc:!0,srclang:!0,srcset:!0,start:!0,step:!0,style:!0,tabindex:!0,target:!0,title:!0,translate:!0,type:!0,usemap:!0,value:!0,width:!0,wrap:!0},l=["http:","https:","data:"],c={href:!0,action:!0,src:!0},d=["https://storage.googleapis.com/aptrinsic-cloud-public-assets/*","https://storage.googleapis.com/froala-upload-default/*","https://storage.googleapis.com/froala-upload-prod/*","https://storage.googleapis.com/froala-upload-dev/*","https://storage.googleapis.com/app-demo-public-bucket/*"];this.SanitizeHtml=function(u){function p(r){var u=void 0;if(r.nodeType===Node.TEXT_NODE)u=r.cloneNode(!0);else if(r.nodeType===Node.ELEMENT_NODE&&(n[r.tagName]||a[r.tagName])){u=g.createElement(r.tagName);for(var f=0;f<r.attributes.length;f++){var m=r.attributes[f];if(!s[m.name]||"META"===r.tagName&&"charset"!==m.name){var v="Not allowed attribute '"+m.name+"' in tag <"+r.tagName+">";e(h,v)}else if(c[m.name]){var b=(0,o.getConfig)("htmlSanitizationAllowedDomains")||[],y=b.concat(d);if(m.value.indexOf(":")>-1&&!t(m.value,l)){var E="Not allowed attribute '"+m.name+"' with value '"+m.value+"' in tag '"+r.tagName+"' - schema is not allowed";e(h,E)}else if(!(0,i.matchEither)(y,m.value)){var S="Not allowed attribute '"+m.name+"' with value '"+m.value+"' in tag '"+r.tagName+"' - domain is not allowed";e(h,S)}}}for(var C=0;C<r.childNodes.length;C++)p(r.childNodes[C])}else{var w="tag <"+r.tagName+"> is not allowed";e(h,w),u=document.createDocumentFragment()}return u}if(!(0,o.getConfig)("htmlSanitization"))return{isValid:!0};if(""===(u=u.trim()))return{isValid:!0};if("<br>"===u)return{isValid:!0};var f=document.createElement("iframe");if(void 0===f.sandbox)return r.logger.logInternalError(new Error("Browser not supporting iframe sandbox")),{isValid:!1,errors:["Browser not supporting iframe sandbox, cannot perform sanitization"]};f.sandbox="allow-same-origin",f.style.display="none",(0,o.getBody)().appendChild(f);var g=f.contentDocument||f.contentWindow.document;null==g.body&&g.write("<body></body>"),g.body.innerHTML=u;var h=[];return p(g.body),(0,o.getBody)().removeChild(f),{isValid:0===h.length,errors:h===[]?null:h}}};t.default=a},function(e,t,n){"use strict";(function(e){var t,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){function o(e,t){t?(v[0]=v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0,this.blocks=v):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function i(e,t,n){var i,s=void 0===e?"undefined":r(e);if("string"===s){var l,c=[],d=e.length,p=0;for(i=0;i<d;++i)l=e.charCodeAt(i),l<128?c[p++]=l:l<2048?(c[p++]=192|l>>6,c[p++]=128|63&l):l<55296||l>=57344?(c[p++]=224|l>>12,c[p++]=128|l>>6&63,c[p++]=128|63&l):(l=65536+((1023&l)<<10|1023&e.charCodeAt(++i)),c[p++]=240|l>>18,c[p++]=128|l>>12&63,c[p++]=128|l>>6&63,c[p++]=128|63&l);e=c}else{if("object"!==s)throw new Error(a);if(null===e)throw new Error(a);if(u&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||u&&ArrayBuffer.isView(e)))throw new Error(a)}e.length>64&&(e=new o(t,!0).update(e).array());var f=[],g=[];for(i=0;i<64;++i){var h=e[i]||0;f[i]=92^h,g[i]=54^h}o.call(this,t,n),this.update(g),this.oKeyPad=f,this.inner=!0,this.sharedMemory=n}var a="input is invalid type",s="object"===("undefined"==typeof window?"undefined":r(window)),l=s?window:{};l.JS_SHA256_NO_WINDOW&&(s=!1),!s&&"object"===("undefined"==typeof self?"undefined":r(self))&&(l=self);var c=!l.JS_SHA256_NO_COMMON_JS&&"object"===r(e)&&e.exports,d=n(167),u=!l.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,p="0123456789abcdef".split(""),f=[-2147483648,8388608,32768,128],g=[24,16,8,0],h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=["hex","array","digest","arrayBuffer"],v=[];!l.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!u||!l.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===(void 0===e?"undefined":r(e))&&e.buffer&&e.buffer.constructor===ArrayBuffer});var b=function(e,t){return function(n){return new o(t,!0).update(n)[e]()}},y=function(e){var t=b("hex",e);t.create=function(){return new o(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<m.length;++n){var r=m[n];t[r]=b(r,e)}return t},E=function(e,t){return function(n,r){return new i(n,t,!0).update(r)[e]()}},S=function(e){var t=E("hex",e);t.create=function(t){return new i(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<m.length;++n){var r=m[n];t[r]=E(r,e)}return t};o.prototype.update=function(e){if(!this.finalized){var t,n=void 0===e?"undefined":r(e);if("string"!==n){if("object"!==n)throw new Error(a);if(null===e)throw new Error(a);if(u&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||u&&ArrayBuffer.isView(e)))throw new Error(a);t=!0}for(var o,i,s=0,l=e.length,c=this.blocks;s<l;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),t)for(i=this.start;s<l&&i<64;++s)c[i>>2]|=e[s]<<g[3&i++];else for(i=this.start;s<l&&i<64;++s)o=e.charCodeAt(s),o<128?c[i>>2]|=o<<g[3&i++]:o<2048?(c[i>>2]|=(192|o>>6)<<g[3&i++],c[i>>2]|=(128|63&o)<<g[3&i++]):o<55296||o>=57344?(c[i>>2]|=(224|o>>12)<<g[3&i++],c[i>>2]|=(128|o>>6&63)<<g[3&i++],c[i>>2]|=(128|63&o)<<g[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++s)),c[i>>2]|=(240|o>>18)<<g[3&i++],c[i>>2]|=(128|o>>12&63)<<g[3&i++],c[i>>2]|=(128|o>>6&63)<<g[3&i++],c[i>>2]|=(128|63&o)<<g[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=c[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},o.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=f[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},o.prototype.hash=function(){var e,t,n,r,o,i,a,s,l,c,d,u=this.h0,p=this.h1,f=this.h2,g=this.h3,m=this.h4,v=this.h5,b=this.h6,y=this.h7,E=this.blocks;for(e=16;e<64;++e)o=E[e-15],t=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,o=E[e-2],n=(o>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,E[e]=E[e-16]+t+E[e-7]+n<<0;for(d=p&f,e=0;e<64;e+=4)this.first?(this.is224?(s=300032,o=E[0]-1413257819,y=o-150054599<<0,g=o+24177077<<0):(s=704751109,o=E[0]-210244248,y=o-1521486534<<0,g=o+143694565<<0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),s=u&p,r=s^u&f^d,a=m&v^~m&b,o=y+n+a+h[e]+E[e],i=t+r,y=g+o<<0,g=o+i<<0),t=(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10),n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),l=g&u,r=l^g&p^s,a=y&m^~y&v,o=b+n+a+h[e+1]+E[e+1],i=t+r,b=f+o<<0,f=o+i<<0,t=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),n=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),c=f&g,r=c^f&u^l,a=b&y^~b&m,o=v+n+a+h[e+2]+E[e+2],i=t+r,v=p+o<<0,p=o+i<<0,t=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),n=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),d=p&f,r=d^p&g^c,a=v&b^~v&y,o=m+n+a+h[e+3]+E[e+3],i=t+r,m=u+o<<0,u=o+i<<0;this.h0=this.h0+u<<0,this.h1=this.h1+p<<0,this.h2=this.h2+f<<0,this.h3=this.h3+g<<0,this.h4=this.h4+m<<0,this.h5=this.h5+v<<0,this.h6=this.h6+b<<0,this.h7=this.h7+y<<0},o.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,a=this.h6,s=this.h7,l=p[e>>28&15]+p[e>>24&15]+p[e>>20&15]+p[e>>16&15]+p[e>>12&15]+p[e>>8&15]+p[e>>4&15]+p[15&e]+p[t>>28&15]+p[t>>24&15]+p[t>>20&15]+p[t>>16&15]+p[t>>12&15]+p[t>>8&15]+p[t>>4&15]+p[15&t]+p[n>>28&15]+p[n>>24&15]+p[n>>20&15]+p[n>>16&15]+p[n>>12&15]+p[n>>8&15]+p[n>>4&15]+p[15&n]+p[r>>28&15]+p[r>>24&15]+p[r>>20&15]+p[r>>16&15]+p[r>>12&15]+p[r>>8&15]+p[r>>4&15]+p[15&r]+p[o>>28&15]+p[o>>24&15]+p[o>>20&15]+p[o>>16&15]+p[o>>12&15]+p[o>>8&15]+p[o>>4&15]+p[15&o]+p[i>>28&15]+p[i>>24&15]+p[i>>20&15]+p[i>>16&15]+p[i>>12&15]+p[i>>8&15]+p[i>>4&15]+p[15&i]+p[a>>28&15]+p[a>>24&15]+p[a>>20&15]+p[a>>16&15]+p[a>>12&15]+p[a>>8&15]+p[a>>4&15]+p[15&a];return this.is224||(l+=p[s>>28&15]+p[s>>24&15]+p[s>>20&15]+p[s>>16&15]+p[s>>12&15]+p[s>>8&15]+p[s>>4&15]+p[15&s]),l},o.prototype.toString=o.prototype.hex,o.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,a=this.h6,s=this.h7,l=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a];return this.is224||l.push(s>>24&255,s>>16&255,s>>8&255,255&s),l},o.prototype.array=o.prototype.digest,o.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},i.prototype=new o,i.prototype.finalize=function(){if(o.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();o.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),o.prototype.finalize.call(this)}};var C=y();C.sha256=C,C.sha224=y(!0),C.sha256.hmac=S(),C.sha224.hmac=S(!0),c?e.exports=C:(l.sha256=C.sha256,l.sha224=C.sha224,d&&void 0!==(t=function(){return C}.call(C,n,C,e))&&(e.exports=t))}()}).call(t,n(65)(e))},function(e,t,n){"use strict";function r(e,t,n){return function(r){r.listenerId===e&&(n(r),i.removeListener(t))}}Object.defineProperty(t,"__esModule",{value:!0}),t.botEventEmmiter=void 0;var o=n(9),i=t.botEventEmmiter=new function(){var e={},t={};this.dispatchEvent=function(t,n,r){n===e[t]&&o.internalEventListener.dispatchEvent(t,Object.assign({listenerId:n},r))},this.addListener=function(n,a,s){i.removeListener(n),e[n]=s;var l=r(s,n,a);t[s]=l,o.internalEventListener.addListener(n,l)},this.removeListener=function(n){var r=e[n];o.internalEventListener.removeListener(n,t[r]),e[n]=null,delete e[n]}}},function(e,t,n){"use strict";function r(e,t){return e+"?"+(0,p.convert2Parameters)((0,p.addParameters)(t,[]))}function o(e,t,n,r){try{var o=a();o.kcid=t,o.recId=n||null;var i=g.trackKcEndpoint+"/"+d.eventTrackData.data[d.productIdParameter]+"/"+t+"/track/webLink/"+e+"?"+(0,p.convert2Parameters)((0,p.addParameters)(o,[]));h.AjaxUtil.getData(i,r)}catch(n){m.logger.logInternalError(n,"Error during tracking webLink "+e+"for kc id "+t)}}function i(e,t,n,r,o,i){try{var s=a();s.kcid=r,s.catid=t,s.recId=o||null;var l=g.trackKcEndpoint+"/"+d.eventTrackData.data[d.productIdParameter]+"/"+r+"/track/article/"+e+"?"+(0,p.convert2Parameters)((0,p.addParameters)(s,[]));h.AjaxUtil.getData(l,i)}catch(t){m.logger.logInternalError(t,"Error during tracking article "+e+"for kc id "+r)}}function a(){var e={};Object.assign(e,d.eventTrackData[u.cacheGetAll]()),(0,p.addCacheBuster)(e);var t=(0,b.getGlobalContext)();t&&Object.assign(e,{gcx:JSON.stringify(t)});var n=location.protocol+"//",r=location,o=r.host,i=location.pathname,a=location.search,s=d.documentRef.title,l=location.hash,g=d.documentRef.referrer,h=g,m=(0,v.maskUrl)(n,o,i,a,l,g,s),y=c(m,7);return n=y[0],o=y[1],i=y[2],a=y[3],l=y[4],h=y[5],s=y[6],Object.assign(e,{rf:h,sc:n,ho:o,pa:decodeURIComponent(i),q:decodeURIComponent(a),ha:decodeURIComponent(l),sch:(0,f.getPageHeight)(),scw:(0,f.getPageWidth)(),pt:s,u:""+n+o+i+a+l}),e}function s(e,t){try{var n=a();n.kcid=e,n.kct=t;var r=g.trackKcEndpoint+"/"+d.eventTrackData.data[d.productIdParameter]+"/"+e+"/track/toggle?"+(0,p.convert2Parameters)((0,p.addParameters)(n,[]));h.AjaxUtil.getData(r)}catch(t){m.logger.logInternalError(t,"Error during tracking toggle widget for kc id "+e)}}function l(e,t,n){var o=n.articleId,i=n.articleUrl,s=n.articleProvider,l=n.articleTitle,c=n.recommendedId;try{var u=d.eventTrackData.data[d.productIdParameter],p=d.eventTrackData.data[d.aptrinsicIdParam],f=a(),v=g.trackKcEndpoint+"/"+u+"/"+e+"/"+g.trackWidgetExternalArticleInfix+"/"+o,b=r(v,Object.assign(f,{art:l,ai:p,arpro:s,aru:i,ari:o,recId:c}));h.AjaxUtil.getData(b)}catch(t){m.logger.logInternalError(t,"Error during tracking article "+o+"for kc id "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getUrl=r,t.trackWebLinkClick=o,t.trackArticleClick=i,t.getTrackingPayload=a,t.trackToggleWidget=s,t.trackExternalArticleClick=l;var d=n(4),u=n(5),p=n(0),f=n(10),g=n(2),h=n(11),m=n(3),v=n(21),b=n(19)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){H=e;var t=(0,O.arrayFrom)(e,function(e){var t=e.mappedElements.filter(function(e){return"TEXT_ELEMENT"===e.type&&(0,b.getConfig)("textMatchEnabled")});if(t.length<1)return null;var n=Object.assign({},e);return n.mappedElements=t,n}).filter(function(e){return null!==e}),n=(0,O.arrayFrom)(e,function(e){var t=e.mappedElements.filter(function(e){return $.indexOf(e.type)>-1});if(t.length<1)return null;var n=Object.assign({},e);return n.mappedElements=t,n}).filter(function(e){return null!==e});R.splice.apply(R,[0,R.length].concat(i(t))),P.splice.apply(P,[0,P.length].concat(i(n))),(0,b.isIframe)()||T.default.syncFeatureRules(e)}function s(e){(0,b.isIframe)()&&a(e)}function l(){return H}function c(){var e=Object.assign({},E.eventTrackData[S.cacheGetAll]());e.wsv=E.applicationVersion,(0,v.addCacheBuster)(e),y.AjaxUtil.getData(b.fetchFeatureRuleEndpoint+"?"+(0,v.convert2Parameters)((0,v.addParameters)(e,[])),a)}function d(){if(M)return JSON.parse(localStorage.getItem(V))}function u(e,t){if(M){var n=d();n&&n[e]&&n[e][t]&&(delete n[e][t],localStorage.setItem(V,JSON.stringify(n)))}}function p(e,t){if(!M)return!0;var n=d();if(!n||!n[e]||!n[e][t])return!0;var r=n[e][t].timestamp;return Date.now()-r>=U&&(u(e,t),!0)}function f(e,t){if(M){var n=d()||{};n[e]=n[e]||{},n[e][t]={timestamp:Date.now()},localStorage.setItem(V,JSON.stringify(n))}}function g(e){var t=e.scopeRules,n=e.urlLogicalOperator,r=(0,v.getPageUrl)();return"AND"===n?t.every(function(e){return(0,v.matchUrl)(e.urlScope,r,"NOT"===e.urlCondition)}):t.some(function(e){return(0,v.matchUrl)(e.urlScope,r,"NOT"===e.urlCondition)})}function h(e,t){var n=e.textElementRules;if(!(0,b.isIframe)()){if(!g(e))return!1}return n.reduce(function(n,r){if("SELECTOR_TEXT_RULE"===e.type){var o=(0,L.findInWindow)(r.cssSelector,document,!0),i=Array.prototype.slice.call(o),a=i.filter(function(e){return e===t||e.contains&&e.contains(t)});return!a||a.length<1?n:n||a.some(function(e){return(0,A.matchExpression)((0,L.getText)(e),r.textOperator,(0,v.trimString)(r.text[0]))})}return"TEXT_ONLY_RULE"===e.type?n||(0,A.matchExpression)((0,L.getText)(t),r.textOperator,(0,v.trimString)(r.text[0])):(N.logger.logInternalError(new Error("trying to run unsupported rule type "+e.type+", won't match")),!1)},!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawFeatureRules=t.loadIframeRules=void 0;var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(0),b=n(2),y=n(11),E=n(4),S=n(5),C=n(24),w=n(88),T=r(w),x=n(6),k=n(15),I=n(10),A=n(78),O=n(12),N=n(3),L=n(7),_=n(43),F=r(_),D=n(14),B=r(D),R=[],P=[],M=(0,I.localStorageEnabled)(),U=18e5,j=[],H=void 0,$=["SELECTOR_TEXT_RULE","TEXT_ONLY_RULE"],V="apt.fm",K=function(){function e(){o(this,e)}return m(e,[{key:"init",value:function(){(0,b.isIframe)()||B.default.isEditorMode()||(setInterval(c,3e5),c())}},{key:"sendRuleMatchResults",value:function(e){var t={featureMatches:e};(0,C.internalApt)("feature",t)}},{key:"matchFeatureRule",value:function(e,t){var n=e.textElementRules,r=e.scopeRules,o=e.urlLogicalOperator,i=k.UUIDGenerator.generateV4Id();(0,x.subscribe)(i,function(e,t){var n=(0,v.getPageUrl)(),i="AND"===o?r.every(function(e){return(0,v.matchUrl)(e.urlScope,n,"NOT"===e.urlCondition)}):r.some(function(e){return(0,v.matchUrl)(e.urlScope,n,"NOT"===e.urlCondition)}),a=i&&e.reduce(function(e,t){return e&&t});(0,x.decrementState)(t.callingFutureId,{id:t.rule.id,matched:a})},{rule:e,callingFutureId:t}),!(0,b.isIframe)()&&T.default.getElementText&&n.forEach(function(e){try{T.default.getElementText(e.cssSelector,i,function(t,n){t&&(0,v.isNotEmptyArr)(t)||(0,x.decrementState)(n,!1);for(var r=void 0,o=0;o<t.length;o++)if((0,v.isDefinedStr)(t[o])){r=t[o];break}if((0,v.isUndefinedStr)(r))(0,x.decrementState)(n,!1);else{var i=(0,A.matchExpression)(r,e.textOperator,e.text[0]);(0,x.decrementState)(n,i)}})}catch(e){(0,x.decrementState)(i,!1),N.logger.logInternalError(e)}})}},{key:"handleAllFeatureMatchResult",value:function(e){var t=!1,n=(0,O.arrayFrom)(e,function(e){var n=e.featureId;return(0,O.arrayFrom)(e.rulesResult,function(e){var r=e.matched;return!r&&u(n,e.ruleId),p(n,e.ruleId)||(r=!1),r&&(f(n,e.ruleId),t=!0),{id:n,feme:e.ruleId,femr:r}})});t&&this.sendRuleMatchResults([].concat.apply([],n))}},{key:"matchRules",value:function(){var e=this,t=k.UUIDGenerator.generateV4Id();(0,x.subscribe)(t,this.handleAllFeatureMatchResult.bind(this)),R.forEach(function(){return(0,x.incrementState)(t)}),R.forEach(function(n){var r=n.mappedElements;if((0,v.isNotEmptyArr)(r)){var o=k.UUIDGenerator.generateV4Id();(0,x.subscribe)(o,function(e,t){var n=(0,O.arrayFrom)(e,function(e){return{ruleId:e.id,matched:e.matched}});(0,x.decrementState)(t.matchId,{featureId:t.featureId,rulesResult:n})},{matchId:t,featureId:n.featureId}),r.forEach(function(){return(0,x.incrementState)(o)}),r.forEach(function(t){e.matchFeatureRule(t,o)})}})}},{key:"try2Match",value:function(){var e=this;if((0,b.getConfig)("textMatchEnabled")){try{j.forEach(function(e){return clearTimeout(e)})}catch(e){}for(var t=0;t<3;t++){var n=setTimeout(function(t){return function(){var t=j.indexOf(void 0);t>-1&&j.splice(t,1),e.matchRules()}}(),(0,b.getConfig)("delayClickEventTime")*(t+1));j.push(n)}}}},{key:"matchElement",value:function(e){var t=P.reduce(function(t,n){var r=n.mappedElements,o=r.filter(function(t){return h(t,e)});return o.length>0&&((0,b.isIframe)()?t.push({id:n.featureId,rules:o}):t.push({id:n.featureId,feme:o[0].id,femr:!0})),t},[]);t&&t.length>0&&((0,b.isIframe)()?F.default.textFeatureMatch([].concat.apply([],t)):this.sendRuleMatchResults([].concat.apply([],t)))}},{key:"clearAll",value:function(){localStorage.removeItem(V)}},{key:"evaluateIframeMatches",value:function(e){var t=e.reduce(function(e,t){var n=t.rules,r=n.filter(function(e){return g(e)});return r.length>0&&e.push({id:t.id,feme:r[0].id,femr:!0}),e},[]);t&&t.length>0&&this.sendRuleMatchResults([].concat.apply([],t))}}]),e}(),q=new K;t.default=q,t.loadIframeRules=s,t.getRawFeatureRules=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={markStepTracked:function(e,t){var n=sessionStorage.getItem(e)||"{}",r=JSON.parse(n);r[t]||(r[t]=!0,sessionStorage.setItem(e,JSON.stringify(r)))},wasStepTracked:function(e,t){var n=sessionStorage.getItem(e)||"{}";return!!JSON.parse(n)[t]}};t.default=r},function(e,t,n){"use strict";function r(e,t,n){var r=void 0;switch(t){case"is":r=e===n;break;case"isNot":r=e!==n;break;case"isEmpty":r=(0,o.isBlank)(e);break;case"isNotEmpty":r=!(0,o.isBlank)(e);break;case"startsWith":r=0===e.indexOf(n);break;case"notStartsWith":var i=e.indexOf(n);r=(0,o.isBlank)(e)||i<0||i>0;break;case"endsWith":r=e.indexOf(n)===e.length-n.length;break;case"contains":r=e.indexOf(n)>-1;break;case"notEndsWith":var a=e.indexOf(n);r=(0,o.isBlank)(e)||a<0||a+n.length<e.length;break;case"notContains":r=(0,o.isBlank)(e)||e.indexOf(n)<0;break;default:throw new Error("unsupported operator type "+t)}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.matchExpression=r;var o=n(0)},function(e,t,n){"use strict";function r(e){if((0,o.getConfig)("enableFullStory"))try{var t=window._fs_namespace;if(t&&(0,a.isFunction)(window[t].getCurrentSessionURL)){var n=window[t].getCurrentSessionURL(!0);n&&(e.fs=n)}}catch(e){i.logger.logInternalError(e,"Unable to FullStory session")}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.addFullStoryInfo=void 0;var o=n(2),i=n(3),a=n(0);t.addFullStoryInfo=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollEventBinder=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),a=n(0),s=n(3),l=n(18);t.ScrollEventBinder=function(){function e(){r(this,e),this.bindedElementsMap={}}return o(e,[{key:"getFollowScrollHandler",value:function(e,t,n){var r=void 0,o=void 0,i=void 0,a=e.getBoundingClientRect(),c=a.left,d=a.top;return r=e.scrollTop,o=e.scrollLeft,n||(i={}),function(e){var n=(0,l.getEventTarget)(e),a=n.getBoundingClientRect(),u=a.top,p=a.left,f=u!==d||p!==c;if(!(n&&"hidden"===n.style.visibility||f)){if(c=p,d=u,i[n]){if(r>99999||o>99999)return void s.logger.logInternalError(new Error("Warning: large values seen for lastSroll in scroll event handler "+r+"/"+o));for(var g=n.scrollTop-r,h=n.scrollLeft-o,m=Array.isArray(t)?t:[t],v=0;v<m.length;v++)m[v].style.top=parseInt(m[v].style.top)-g+"px",m[v].style.left=parseInt(m[v].style.left)-h+"px"}else i[n]=!0;r=n.scrollTop,o=n.scrollLeft,(r>99999||o>99999)&&s.logger.logInternalError(new Error("Warning: large values seen for lastSroll in scroll event handler"+r+"/"+o))}}}},{key:"clearScrollEventListenerFromParents",value:function(e){var t=this;try{this.bindedElementsMap[e]&&this.bindedElementsMap[e].elements.forEach(function(n){(0,a.removeEventListener)(n,t.bindedElementsMap[e].scrollHandler)})}catch(t){s.logger.logInternalError(t,"Error happened during clearing scroll handler of element "+e)}}},{key:"handleScrollEvent",value:function(t,n){try{for(var r=t.parentNode;r.tagName&&"BODY"!==r.tagName;){if(e.hasScrollbars(r)){var o=r;this.bindedElementsMap[t]||(this.bindedElementsMap[t]={}),this.bindedElementsMap[t].elements&&Array.isArray(this.bindedElementsMap[t].elements)||(this.bindedElementsMap[t].elements=[]),this.bindedElementsMap[t].scrollHandler||(this.bindedElementsMap[t].scrollHandler=n),this.bindedElementsMap[t].elements.push(o),(0,a.addEventListener)(o,"scroll",function(e){n(e)})}r=(0,l.getParentElement)(r)}}catch(e){s.logger.logInternalError(e,"Error during setting scroll event for element "+t)}}}],[{key:"hasScrollbars",value:function(e){var t=i.windowRef.getComputedStyle(e);return"auto"===t["overflow-x"]||"scroll"===t["overflow-x"]||"auto"===t["overflow-y"]||"scroll"===t["overflow-y"]}}]),e}()},function(e,t,n){"use strict";function r(e){var t=e&&e.labelText,n=e&&e.initialValue,r=e&&e.colorChangeCallback,i=e&&!!e.labelInline,a=!!e.disabled,s=null,l=null,c=null,d=void 0;this.disable=function(){a=!0,d.destroy(),c.classList.add("apt-input-disabled"),c.disabled=!0,l.disabled=!0},this.enable=function(){a=!1,d.create(),l.disabled=!1,c.disabled=!1,c.classList.remove("apt-input-disabled")},this.toggle=function(){a=!a,a?d.destroy():d.create(),l.disabled=a,c.disabled=a,c.classList.toggle("apt-input-disabled")},this.getValue=function(){return l.value},this.render=function(){return s=(0,o.createElement)("div",["apt-color-sample"]),l=(0,o.createInput)("text",["apt-color-input-text"]),c=(0,o.createElement)("div",["apt-setting-input","apt-color-input","apt-inline",a?"apt-input-disabled":""],void 0,[s,l]),d=new CP(l),n&&d.set(n),d.picker.style.setProperty("z-index","2147483647","important"),d.on("change",function(e){s.style.backgroundColor="#"+e,c.setAttribute("apt-color-val","#"+e),l.value="#"+e,a||r&&r("#"+e)}),(0,o.addEventListener)(l,"input",function(e){var t=e.target.value;if(/^#([a-fA-F\d]{2})([a-fA-F\d]{2})([a-fA-F\d]{2})$/.test(t)){if(d.set(t),s.style.backgroundColor=t,c.setAttribute("apt-color-val",t),a)return;r&&r(t)}}),(0,o.createElement)("div",["apt-inline","apt-input"],void 0,[(0,o.createElement)("div",["apt-setting-label",i?"apt-inline":""],{text:t}),(0,o.createElement)("div",["apt-inline"],void 0,[c])])}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){var t=void 0!==e.showErrorText&&e.showErrorText,n=void 0===e.overrideInvalidValue||e.overrideInvalidValue,r=e&&e.text,i=e&&e.unitsText,a=e&&e.additionalClassesArray||[],s=e&&e.initialValue,l=e&&e.placeholder,c=e&&!!e.disabled,d=e&&e.dataAtt,u=e&&e.changeCallback,p=e&&!!e.labelInline,f=e&&!!e.stopPropagation,g=null,h=null;(e&&e.min||0===e.min)&&(g=e.min),(e&&e.max||0===e.max)&&(h=e.max);var m=null,v=null;this.disable=function(){c=!0,m.disabled=!0,m.classList.add("apt-disabled")},this.enable=function(){c=!1,m.disabled=!1,m.classList.remove("apt-disabled")},this.toggle=function(){c=!c,m.disabled=c,m.classList.toggle("apt-disabled")},this.getValue=function(){return parseInt(m.value,10)},this.setValue=function(e){m.value=e},this.isValid=function(){return!(null!==g&&m.value<g)&&!(null!==h&&m.value>h)},this.render=function(){m=(0,o.createInput)("number",["apt-setting-input","apt-number-input",e.className],s,l,c,null,d,{min:g,max:h},null),(0,o.addEventListener)(m,"input",function(e){var r=parseInt(e.target.value,10);(g||0===g)&&r<g?(r=g,t&&(!m.classList.contains("aptr-input-error")&&m.classList.add("aptr-input-error"),v.style.display="block"),n&&(m.value=r)):(h||0===h)&&r>h?(r=h,t&&(!m.classList.contains("aptr-input-error")&&m.classList.add("aptr-input-error"),v.style.display="block"),n&&(m.value=h)):t&&(m.classList.remove("aptr-input-error"),v.style.display="none"),u&&u(r),f&&e.stopImmediatePropagation()});var b="Value must be "+(null!=g?"greater than "+g:"")+(null!=h?" and less than "+h:"");v=(0,o.createElement)("div","apt-error-message",{text:b});var y=(0,o.createElement)("div",["apt-inline","apt-input"].concat(a),void 0,[r&&(0,o.createElement)("div",["apt-setting-label",p?"apt-inline":""],{text:r}),(0,o.createElement)("div",["apt-inline"],void 0,[m,i&&(0,o.createElement)("div",["apt-setting-label","apt-unit-label"],{text:i})]),t&&v]);return f&&(0,o.addStopClickListeners)([m,y]),y}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){var t=e.radioOptions,n=!!e.optionsInline,r=e.name,i=e.selectCallback,a=e&&!!e.stopPropagation,s=null,l=e.disabled;this.getSelectedValue=function(){return s},this.render=function(){var c=[];return t&&t.forEach(function(e){var t=(0,o.createInput)("radio","",e.value,"",l,e.selected,null,{name:r});if(e.selected&&(s=e.value),e&&e.value||0===e.value){var d=e.children,u=e.text,p={},f=[t,(0,o.createElement)("span","apt-radio-override")];u&&(p.text=u),d&&f.unshift(d);var g=["apt-radio",l?"apt-disabled":"",n?"apt-inline":""],h=(0,o.createElement)("label",g,p,f);(0,o.addEventListener)(h,"click",function(){l||(s=t.value,i&&i(t.value))}),a&&(0,o.addStopClickListeners)([h]),c.push(h)}}),(0,o.createElement)("div",e.className,null,c)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=new function(){var e=new r.LocalCache;this.setLastStepWindow=function(t){e.setdata("lastWindow",t)},this.getLastStepWindow=function(){return e.getKey("lastWindow")},this.setState=function(t){e.setdata("state",t)},this.getState=function(){return e.getKey("state")},this.setContent=function(t){e.setdata("lastContent",t)},this.getContent=function(){return e.getKey("lastContent")},this.setContentWrapper=function(t){e.setdata("contentWrapper",t)},this.getContentWrapper=function(){return e.getKey("contentWrapper")},this.setIsLastStep=function(t){e.setdata("isLastStep",t)},this.isLastStep=function(){return e.getKey("isLastStep")},this.setIsFirstStep=function(t){e.setdata("isFirstStep",t)},this.isFirstStep=function(){return e.getKey("isFirstStep")},this.setEditedStepSettings=function(t){e.setdata("currentEditedStepSettings",t)},this.setBadge=function(t){e.setdata("badge",t)},this.getBadge=function(){return e.getKey("badge")},this.setStickToBadgeAttributes=function(t){e.setdata("stickToBadgeAttributes",t)},this.getStickToBadgeAttributes=function(){return e.getKey("stickToBadgeAttributes")},this.getCurrentEditedStep=function(){return e.getKey("currentEditedStepSettings")},this.setBadgeEnabled=function(t){e.setdata("badgeEnabled",t)},this.getBadgeEnabled=function(){return e.getKey("badgeEnabled")},this.setIsStickToBadge=function(t){e.setdata("isStickToBadge",isBadgeEnabled)},this.getIsStickToBadge=function(){return e.getKey("isStickToBadge")},this.deleteCurrentEditedStep=function(){e.deleteKey("currentEditedStepSettings")},this.getAppliedStepData=function(t){var n=e.getKey("appliedStepsMap");return n?n[t]:(e.setdata("appliedStepsMap",{}),{})},this.setAppliedStepData=function(t,n){e.addToMap("appliedStepsMap",t,n)},this.setTitle=function(t){e.setdata("titleHtml",t)},this.getTitle=function(){return e.getKey("titleHtml")},this.setTitleWrapper=function(t){e.setdata("titleWrapper",t)},this.getTitleWrapper=function(){return e.getKey("titleWrapper")},this.setSteps=function(t){e.setdata("steps",t)},this.getSteps=function(){return e.getKey("steps")},this.setIsPlayingGuide=function(t){e.setdata("IS_PLAYING_GUIDE",t)},this.getIsPlayingGuide=function(){return e.getKey("IS_PLAYING_GUIDE")},this.setMappedElementsChecked=function(t){e.setdata("mappedElements",t)},this.isMappedElementsChecked=function(){return e.getKey("mappedElements")},this.onChange=function(t){e.onChange(t)}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(3),i=n(23),a=n(2),s=n(24),l=n(43),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=new function(){function e(e){return void 0!==e&&null!=e}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e.indexOf(r)>-1)return!0}return!1}function n(n){if((0,a.getConfig)("enableTag")){var i=n.querySelectorAll("input[type=password]");if(e(i)&&i.length>0)return void o.logger.log("lead tracker does not collect forms with password fields");try{if(t(n.querySelectorAll("[type=submit]").item(0).textContent.toLowerCase(),["password","unsubscribe"]))return void o.logger.log("lead tracker does not collect forms with reserved words")}catch(e){o.logger.logInternalError(e)}var s={},l={},c=void 0,d=void 0,u=void 0,p=n.querySelectorAll("input");if(e(p)){for(var f=0;f<p.length;f++)c=p[f],"password"!==(u=c.getAttribute("type"))&&"button"!==u&&"submit"!==u&&(d=c.getAttribute("id")||c.getAttribute("name"))&&(l[d]=c.value)&&(0,r.isEmail)(l[d])&&(s.email=l[d]);s.formFields=l}return s}}function l(e,t){(0,a.getConfig)("enableTag")&&(i.UserData.changeUserType(i.UserData.getLeadType()),(0,s.internalApt)("lead",{fof:t,usf:{usem:e,ls:"FORM"}},function(e){i.UserData.setAptrinsicId(e.ai,!0)}))}var d=this;this.init=function(){(0,a.getConfig)("enableTag")&&(0,a.featureEnabled)("form")&&(0,r.addEventListener)(document,"submit",function(e){try{if(i.UserData.getUserType()!=i.UserData.visitorType())return;if(location.href.toLowerCase().indexOf("unsubscribe")>-1)return;var t=n(e.target);t&&t.email&&((0,a.isIframe)()?c.default.lead("FORM",t.email,void 0,t.formFields):l(t.email,t.formFields))}catch(e){o.logger.logInternalError(e)}})},this.trackLead=function(e,t){try{if(!(0,a.getConfig)("enableTag"))return;var n={};Object.assign(n,t),n.usem=e,n.ls="API",(0,a.isIframe)()?c.default.lead("API",e,t):(0,s.internalApt)("lead",{usf:n},function(e){i.UserData.setAptrinsicId(e.ai,!0)})}catch(e){o.logger.logInternalError(e)}},this.track=function(e,t,n,r){if((0,a.getConfig)("enableTag")&&!(0,a.isIframe)())switch(e){case"API":d.trackLead(t,n);break;case"FORM":l(t,r);break;default:o.logger.logInternalError(new Error("got unknown lead source: "+e))}}};t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=n(4),s=n(42),l=n(3),c=function(){function e(){r(this,e)}return o(e,null,[{key:"call",value:function(){for(var t=arguments[0],n=t.length,r=0;r<n;r++)e.callCommand(t[r])}},{key:"callCommand",value:function(e){try{if(e.length<1)throw new Error("Cannot have command with less than one arguments");if(!(0,i.getConfig)("enableTag")&&"config"!==e[0])return;var t=Array.prototype.slice.call(e),n=t[0];if("reset"!==n&&e.length<2)throw new Error("Cannot have command with less than two arguments");a.apiMethods.indexOf(n)>-1&&s.externalApi[n].apply(s.externalApi,t.slice(1))}catch(e){l.logger.logInternalError(e)}}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t,n,r,f,g){var h=o.getConfigEndpoint+"/"+t,m=i.UserData.getAptrinisId(!0);i.UserData.getUserType(!0)>0&&m&&(h+="?ai="+m),a.AjaxUtil.getData(h,function(i){var a=i.sdkConfiguration;s.logger.log("Received new configuration: \n"+JSON.stringify(a,null,2)),(0,o.overrideConfig)(a,!e),s.logger.log("Applied configuration: \n"+JSON.stringify((0,o.getConfigObj)(),null,2));var h=(0,l.detectIE)();h&&h<10&&(s.logger.logInternalError(new Error("disabling tag since this is unsupported IE version "+h)),(0,o.disableTag)()),(0,o.overrideConfig)(r,!1,!0),e&&(0,o.getConfig)("enableTag")?((0,u.loadEngagementChecksum)(),f(t,n,e)):(0,o.getConfig)("enableTag")?(g&&g(),(0,u.loadEngagementChecksum)()):c.windowRef[c.aptrinsicGlobalObjName]=p,(0,d.initKnowledgeCenterWrapper)(e,!e)},null,function(){e?((0,o.overrideConfig)((0,o.getConfigObj)(),!1),(0,o.overrideConfig)(r,!1,!0),f(t,n,e)):g&&g(),s.logger.log("Applied configuration: \n"+JSON.stringify((0,o.getConfigObj)(),null,2))})}Object.defineProperty(t,"__esModule",{value:!0}),t.getServerConfiguration=t.tagConfigKeyName=void 0;var o=n(2),i=n(23),a=n(11),s=n(3),l=n(10),c=n(4),d=n(61),u=n(25),p=function(){};t.tagConfigKeyName="tagConfig",t.getServerConfiguration=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(13),i=n(6),a=n(14),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=n(15),c=n(0),d=n(2),u=new function(){function e(e,t,n){var r=i.IframeRequest.getMasterRequst("getElementText",{cssSelector:t},n);(0,o.postRequestDown)(r,e)}function t(){return!((0,d.isIframe)()||s.default.isEditorMode())}var n=window.top;this.getElementText=function(n,o,a){if(t()){n||a(void 0,o);var s=(0,r.getElementText)(n),d=void 0;if((0,c.isDefinedStr)(s))return void a([s],o);var u=l.UUIDGenerator.generateV4Id();(0,i.subscribe)(u,function(e,t){a(e,t)},o);try{var p=(0,i.getRegisteredIframes)();if((0,c.isNotEmptyArr)(p))for(var f=0;f<p.length;f++)d=p[f],e(d,n,u),(0,i.incrementState)(u);else a(void 0,o)}catch(e){}}},this.lead=function(e,r,a,s){if(t()){var l=i.IframeRequest.getIframeRequest((0,o.getIframeId)(),"lead",{source:e,email:r,userData:a,formFields:s});(0,o.postRequest)(l,n,!0)}},this.syncFeatureRules=function(e){if(t()){var n=i.IframeRequest.getMasterRequst("registerFeatureRules",{rules:e});(0,o.propagateDown)(n,(0,i.getRegisteredIframes)())}}};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,s.findElementInWindow)(e.content.elementSelector,document),n=e.aptrinsicRequestId,r=!0,o=function e(o){r&&((0,l.hasElement)(t,o.target)||(f.default.guideExternalElementClicked(n),(0,l.removeEventListener)(document,"click",e,!1),r=!1))};(0,l.addEventListener)(document,"click",o)}function i(){var e=this,t={},n=void 0,r=!0,o=function(t){return function(){r&&(f.default.guideLinkedElementClicked(t),e.removeAllHandlers(),r=!1)}};this.addEnterKeyDownListener=function(e){var r=e.aptrinsicRequestId,i=e.content.elementSelector;n=(0,s.findElementInWindow)(i,document),(0,l.isEnterAllowedElement)(n)&&(t.keydown=function(e){-1!==[13,9].indexOf(e.keyCode)&&e.currentTarget===n&&o(r)()},(0,l.addEventListener)(n,"keydown",t.keydown))},this.addEventListener=function(e,r){var i=r.aptrinsicRequestId,a=r.content.elementSelector;n=(0,s.findElementInWindow)(a,document),"click"!==e&&"contextmenu"!==e&&"mouseover"!==e||(t[e]=o(i),(0,l.addEventListener)(n,e,t[e]))},this.removeEventListener=function(e,n){(0,l.removeEventListener)(e,n,t[n]),t[n]=null},this.removeAllHandlers=function(){n&&(e.removeEventListener(n,"click"),e.removeEventListener(n,"contextmenu"),e.removeEventListener(n,"mouseover"),e.removeEventListener(n,"keydown")),r=!0}}function a(e){if((0,d.isValidCallingDomain)(e.origin))try{var t=(0,d.parseEvent)(e);if(!t)return;if(C.indexOf(t.aptrinsicEventType)>-1){if((0,g.checkHandledRequest)(t.aptrinsicRequestId))return void c.logger.log("ignoring request that was already handled "+t.aptrinsicRequestId);switch((0,g.addHandledRequestId)(t.aptrinsicRequestId),t.aptrinsicEventType){case"redirect":m.default.getToken()||(window.location.href=(0,l.addParametersToUrl)(window.location.href,JSON.parse(t.content.params)));break;case"register":(0,g.registerIframe)(e.source,e.origin,t.aptrinsicIframeId);var n=document.getElementsByTagName("iframe");(0,d.associateChildIframes)(n);break;case"elementExist":var r=t.content,i=(0,s.findElementInWindow)(r.elementSelector,document,!0),a=null,p=0,h=((0,l.isNodeList)(i)||Array.isArray(i))&&i.length>0,v=Node.prototype.isPrototypeOf(i);h?(a=i[0],p=i.length):v&&(a=i,p=1);var y=(0,l.isElementVisible)(a,r.scrollToElement);a&&!y&&r.scrollToElement&&(0,l.scrollElementToCenter)(a,function(e){return c.logger.logInternalError(e)}),f.default.sendElementResponse(a,y,p,t.aptrinsicRequestId);break;case"getChildAssociation":f.default.associateParent(t.aptrinsicRequestId);break;case"associateParent":(0,g.decrementState)(t.aptrinsicRequestId,{iframeId:t.aptrinsicIframeId});break;case"apt-msg-get-element-location":var T=u.GuideDrawerIframe.getElementBoundingRect(t.content.elementSelector);f.default.broadcastElementRect(T,t.aptrinsicRequestId);break;case"apt_msg_get_badges_locations":var x=b.badgeIframeHelper.getBadgesWithLocations();f.default.broadcastUpBadgesLocation(x,t.aptrinsicRequestId);break;case"apt_msg_get_badges_locations_parent_iframe":var k=t.content.badges,I=t.aptrinsicIframeId,A=(0,d.fixBadgesLocations)(I,k);f.default.broadcastUpBadgesLocation(A,t.aptrinsicRequestId);break;case"apt_msg_remove_badge":var O=t.content.badgeId;O&&b.badgeIframeHelper.removeBadgeFromBadgesList(O);break;case"apt_msg_send_badge":var N=t.content.badge;N&&b.badgeIframeHelper.addBadgeToBadgesList(N);break;case"apt_msg_badge_set_observer":(0,b.addBadgeObserver)();var L=b.badgeIframeHelper.getBadgesWithLocations();L.length>0&&f.default.broadcastBadgesStatuses(L);break;case"apt_msg_badge_unset_observer":(0,b.removeBadgeObserver)();break;case"apt-msg-element-rect":var _=t.content.elementRect,F=t.aptrinsicRequestId,D=(0,g.getIframeData)(t.aptrinsicIframeId),B=D.domElement.getBoundingClientRect();_.top+=B.top,_.left+=B.left,_.bottom+=B.bottom,_.right+=B.right,f.default.broadcastElementRect(_,F);break;case"apt-msg-add-handler-show-next-step":switch(w.removeAllHandlers(),t.content.nextStepTrigger){case"ELEMENT_CLICK":w.addEventListener("click",t),w.addEventListener("contextmenu",t);break;case"ELEMENT_HOVER":w.addEventListener("mouseover",t);break;case"INPUT_TEXT_COMPLETION":w.addEnterKeyDownListener(t)}break;case"aptGuideExternalClick":o(t);break;case"apt-msg-remove-element-handlers":w.removeAllHandlers();break;case S.EVENTS.BOT:(0,E.default)(t);break;default:c.logger.logInternalError(new Error("child iframe script got unsupported event from master, data: "+JSON.stringify(t)))}}}catch(e){c.logger.logInternalError(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingRequest=void 0;var s=n(7),l=n(0),c=n(3),d=n(13),u=n(58),p=n(40),f=r(p),g=n(6),h=n(14),m=r(h),v=n(2),b=n(34),y=n(100),E=r(y),S=n(22),C=["apt-msg-get-element-location","apt-msg-add-handler-show-next-step","apt-msg-remove-element-handlers","register","getChildAssociation","apt-msg-element-rect","associateParent","elementExist","aptGuideExternalClick","redirect","apt_msg_get_badges_locations","apt_msg_badge_set_observer","apt_msg_badge_unset_observer","apt_msg_send_badge","apt_msg_remove_badge","apt_msg_get_badges_locations_parent_iframe",S.EVENTS.BOT],w=new i,T=new function(){(0,v.isIframe)()&&!m.default.isEditorMode()&&(0,l.addEventListener)(window,"message",a)};t.default=T,t.handleIncomingRequest=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){(0,d.postRequestDown)({origin:window.location.href,aptrinsicEventType:"redirect",content:{params:t}},(0,c.getIframeData)(e))}function i(e){if((0,d.isValidCallingDomain)(e.origin)){var t=(0,d.parseEvent)(e);try{if(null===t)return;if(y.indexOf(t.aptrinsicEventType)>-1){var n=t.aptrinsicRequestId+"_"+t.aptrinsicIframeId;if((0,c.checkHandledRequest)(n))return void l.logger.log("ignoring request that was already handled "+t.aptrinsicRequestId);switch((0,c.addHandledRequestId)(n),t.aptrinsicEventType){case"register":(0,c.registerIframe)(e.source,e.origin,t.aptrinsicIframeId,(0,s.getConfig)("framesetMode"));var r=document.getElementsByTagName("iframe");(0,d.associateChildIframes)(r);if(p.default.isEditorMode()){var i=p.default.getQueryParams();o(t.aptrinsicIframeId,JSON.stringify(i))}break;case"associateParent":(0,c.decrementState)(t.aptrinsicRequestId,{iframeId:t.aptrinsicIframeId});break;case"apt-msg-element-rect-parent":var a=t.content.elementRect,u=(0,c.getIframeData)(t.aptrinsicIframeId),f=(0,s.getConfig)("framesetMode")?u.frameOffset:u.domElement.getBoundingClientRect();a.top+=f.top,a.left+=f.left,a.bottom+=f.bottom,a.right+=f.right,(0,c.decrementState)(t.aptrinsicRequestId,a);break;case"apt-msg-element-clicked":(0,c.decrementState)(t.aptrinsicRequestId,{});break;case"apt_msg_get_badges_locations_response":var v=t.content.badges,E=t.aptrinsicIframeId,S=(0,d.fixBadgesLocations)(E,v);(0,c.decrementState)(t.aptrinsicRequestId,{badges:S,iframeData:(0,c.getIframeData)(E)});break;case"apt_msg_badge_post_status":(0,h.updateBadgesFromIframe)(t.aptrinsicIframeId,t.content.badges);break;case"elementExistResult":var C=t.content.exist,w=t.content.count>0?t.content.count:0;(0,c.decrementState)(t.aptrinsicRequestId,{exist:C,isVisible:t.content.isVisible,count:w,iframeData:(0,c.getIframeData)(t.aptrinsicIframeId)});break;case"apt-msg-external-element-clicked":(0,c.decrementState)(t.aptrinsicRequestId,{}),g.default.handleIframeExternalClick(t.aptrinsicIframeId);break;case m.EVENTS.BOT:(0,b.default)(t);break;default:l.logger.logInternalError(new Error("master script got unsupported event from iframe, data: "+JSON.stringify(t)))}}}catch(e){l.logger.logInternalError(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingRequest=void 0;var a=n(0),s=n(2),l=n(3),c=n(6),d=n(13),u=n(14),p=r(u),f=n(71),g=r(f),h=(n(10),n(34)),m=n(22),v=n(101),b=r(v),y=["register","apt-msg-element-rect-parent","apt-msg-element-clicked","associateParent","elementExistResult","apt-msg-external-element-clicked","apt_msg_badge_post_status","apt_msg_get_badges_locations_response",m.EVENTS.BOT],E=new function(){!(0,s.isIframe)()&&!p.default.isEditorMode()&&(0,a.addEventListener)(window,"message",i,!1)};t.default=E,t.handleIncomingRequest=i},function(e,t,n){"use strict";function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var l=i[a],c=Object.getOwnPropertyDescriptor(o,l);void 0!==c&&c.enumerable&&(n[l]=o[l])}}return n}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}e.exports={assign:r,polyfill:o}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<3;o++){var i=Number(n[o]),a=Number(r[o]);if(i>a)return 1;if(a>i)return-1;if(!isNaN(i)&&isNaN(a))return 1;if(isNaN(i)&&!isNaN(a))return-1}return 0}},function(e,t,n){"use strict";(function(e){function r(){return t._=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function o(e){e.offsetHeight}function i(e,t){e.innerHTML=t}function a(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function s(e,t){return{}.hasOwnProperty.call(e,t)}function l(e){return p(e)?[e]:f(e)?w(e):Array.isArray(e)?e:w(document.querySelectorAll(e))}function c(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function d(e,t){return e&&e.modifiers&&e.modifiers[t]}function u(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function p(e){return u(e,"Element")}function f(e){return u(e,"NodeList")}function g(e){return u(e,"MouseEvent")}function h(e,t){return"function"==typeof e?e.apply(void 0,t):e}function m(e,t,n,r){e.filter(function(e){return e.name===t})[0][n]=r}function v(){return document.createElement("div")}function b(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function y(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function E(e,t){if(0===t)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function S(e,t,n){e&&e!==t&&e.apply(void 0,n)}function C(e,t){var n=r({},e);return t.forEach(function(e){delete n[e]}),n}function w(e){return[].slice.call(e)}function T(e,t){for(;e;){if(t(e))return e;e=e.parentElement}return null}function x(e,t){return e.indexOf(t)>-1}function k(e){return e.split(/\s+/).filter(Boolean)}function I(e,t){return void 0!==e?e:t}function A(e){return[].concat(e)}function O(e){var t=A(e),n=t[0];return n?n.ownerDocument||document:document}function N(e,t){-1===e.indexOf(t)&&e.push(t)}function L(e){return"number"==typeof e?e+"px":e}function _(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function F(e){return"number"==typeof e?e:parseFloat(e)}function D(e,t){var n="string"==typeof t&&x(t,"rem"),r=e.documentElement;return r&&n?parseFloat(getComputedStyle(r).fontSize||String(16))*F(t):F(t)}function B(e,t,n){void 0===t&&(t=5);var r={top:0,right:0,bottom:0,left:0};return Object.keys(r).reduce(function(r,o){return r[o]="number"==typeof t?t:t[o],e===o&&(r[o]="number"==typeof t?t+n:t[e]+n),r},r)}function R(e){return"\n    "+e+"() was called on a"+("destroy"===e?"n already-":" ")+"destroyed instance. This is a no-op but\n    indicates a potential memory leak.\n  "}function P(e){var t=/[ \t]{2,}/g,n=/^[ \t]*/gm;return e.replace(t," ").replace(n,"").trim()}function M(e){return P("\n  %ctippy.js\n\n  %c"+P(e)+"\n\n  %c This is a development-only message. It will be removed in production.\n  ")}function U(e){return[M(e),"color: #00C584; font-size: 1.3em; font-weight: bold;","line-height: 1.5","color: #a6a095;"]}function j(e,t){if(e){var n;(n=console).warn.apply(n,U(t))}}function H(e,t){if(e){var n;(n=console).error.apply(n,U(t))}}function $(e){var t=!e,n="[object Object]"===Object.prototype.toString.call(e)&&!e.addEventListener;H(t,["tippy() was passed","`"+String(e)+"`","as its targets (first) argument. Valid types are: String, Element, Element[],","or NodeList."].join(" ")),H(n,["tippy() was passed a plain object which is no longer supported as an argument.","See: https://atomiks.github.io/tippyjs/misc/#custom-position"].join(" "))}function V(e){var t=e.plugins||[],n=t.reduce(function(t,n){var r=n.name,o=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:o),t},{});return r({},e,{},n)}function K(e,t){return(t?Object.keys(V(r({},ye,{plugins:t}))):Ee).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})}function q(e,t){var n=r({},t,{content:h(t.content,[e])},t.ignoreAttributes?{}:K(e,t.plugins));return n.interactive&&(n.aria=null),n}function W(e,t){void 0===e&&(e={}),void 0===t&&(t=[]),Object.keys(e).forEach(function(n){var r=e[n],o="popperOptions"===n&&null!==r&&"object"===(void 0===r?"undefined":ge(r))&&s(r,"placement"),i=C(ye,["animateFill","followCursor","inlinePositioning","sticky"]),a=["a11y","arrowType","showOnInit","size","target","touchHold"],l=!s(i,n)&&!x(a,n);l&&(l=0===t.filter(function(e){return e.name===n}).length),j("target"===n,["The `target` prop was removed in v5 and replaced with the delegate() addon","in order to conserve bundle size.","See: https://atomiks.github.io/tippyjs/addons/#event-delegation"].join(" ")),j("a11y"===n,["The `a11y` prop was removed in v5. Make sure the element you are giving a","tippy to is natively focusable, such as <button> or <input>, not <div>","or <span>."].join(" ")),j("showOnInit"===n,"The `showOnInit` prop was renamed to `showOnCreate` in v5."),j("arrowType"===n,["The `arrowType` prop was removed in v5 in favor of overloading the `arrow`","prop.","\n\n",'"round" string was replaced with importing the string from the package.',"\n\n","* import {roundArrow} from 'tippy.js'; (ESM version)\n","* const {roundArrow} = tippy; (IIFE CDN version)","\n\n",'Before: {arrow: true, arrowType: "round"}\n',"After: {arrow: roundArrow}`"].join(" ")),j("touchHold"===n,["The `touchHold` prop was removed in v5 in favor of overloading the `touch`","prop.","\n\n","Before: {touchHold: true}\n",'After: {touch: "hold"}'].join(" ")),j("size"===n,["The `size` prop was removed in v5. Instead, use a theme that specifies","CSS padding and font-size properties."].join(" ")),j("theme"===n&&"google"===r,'The included theme "google" was renamed to "material" in v5.'),j(o,["Specifying placement in `popperOptions` is not supported. Use the base-level","`placement` prop instead.","\n\n",'Before: {popperOptions: {placement: "bottom"}}\n','After: {placement: "bottom"}'].join(" ")),j(l,["`"+n+"`","is not a valid prop. You may have spelled it incorrectly, or if it's a","plugin, forgot to pass it in an array as props.plugins.","\n\n","In v5, the following props were turned into plugins:","\n\n","* animateFill\n","* followCursor\n","* sticky","\n\n","All props: https://atomiks.github.io/tippyjs/all-props/\n","Plugins: https://atomiks.github.io/tippyjs/plugins/"].join(" "))})}function z(){Be.isTouch||(Be.isTouch=!0,window.performance&&document.addEventListener("mousemove",G))}function G(){var e=performance.now();e-Re<20&&(Be.isTouch=!1,document.removeEventListener("mousemove",G)),Re=e}function Y(){var e=document.activeElement;if(a(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function X(){document.addEventListener("touchstart",z,r({},we,{capture:!0})),window.addEventListener("blur",Y)}function J(e){var t=e&&He&&Be.isTouch;document.body.classList[t?"add":"remove"](Te)}function Q(e){return e.split("-")[0]}function Z(e){e.setAttribute("data-inertia","")}function ee(e){e.removeAttribute("data-inertia")}function te(e){e.setAttribute("data-interactive","")}function ne(e){e.removeAttribute("data-interactive")}function re(e,t){if(p(t.content))i(e,""),e.appendChild(t.content);else if("function"!=typeof t.content){var n=t.allowHTML?"innerHTML":"textContent";e[n]=t.content}}function oe(e){return{tooltip:e.querySelector(Le),content:e.querySelector(_e),arrow:e.querySelector(Fe)||e.querySelector(De)}}function ie(e){var t=v();return!0===e?t.className=Ae:(t.className=Oe,p(e)?t.appendChild(e):i(t,e)),t}function ae(e,t){var n=v();n.className=xe,n.style.position="absolute",n.style.top="0",n.style.left="0";var r=v();r.className=ke,r.id="tippy-"+e,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1"),ce(r,"add",t.theme);var o=v();return o.className=Ie,o.setAttribute("data-state","hidden"),t.interactive&&te(r),t.arrow&&(r.setAttribute("data-arrow",""),r.appendChild(ie(t.arrow))),t.inertia&&Z(r),re(o,t),r.appendChild(o),n.appendChild(r),se(n,t,t),n}function se(e,t,n){var r=oe(e),o=r.tooltip,i=r.content,a=r.arrow;e.style.zIndex=""+n.zIndex,o.setAttribute("data-animation",n.animation),o.style.maxWidth=L(n.maxWidth),n.role?o.setAttribute("role",n.role):o.removeAttribute("role"),t.content!==n.content&&re(i,n),!t.arrow&&n.arrow?(o.appendChild(ie(n.arrow)),o.setAttribute("data-arrow","")):t.arrow&&!n.arrow?(o.removeChild(a),o.removeAttribute("data-arrow")):t.arrow!==n.arrow&&(o.removeChild(a),o.appendChild(ie(n.arrow))),!t.interactive&&n.interactive?te(o):t.interactive&&!n.interactive&&ne(o),!t.inertia&&n.inertia?Z(o):t.inertia&&!n.inertia&&ee(o),t.theme!==n.theme&&(ce(o,"remove",t.theme),ce(o,"add",n.theme))}function le(e,t,n){var r=je&&void 0!==document.body.style.webkitTransition?"webkitTransitionEnd":"transitionend";e[t+"EventListener"](r,n)}function ce(e,t,n){k(n).forEach(function(n){e.classList[t](n+"-theme")})}function de(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,o=e.tooltipRect,i=e.interactiveBorder,a={top:Math.min(t.top,o.top),right:Math.max(t.right,o.right),bottom:Math.max(t.bottom,o.bottom),left:Math.min(t.left,o.left)},s=a.top-r>i,l=r-a.bottom>i,c=a.left-n>i,d=n-a.right>i;return s||l||c||d})}function ue(t,n){function i(){var e=Qe.props.touch;return Array.isArray(e)?e:[e,0]}function a(){return"hold"===i()[0]}function l(){return Le||t}function u(e){return Qe.state.isMounted&&!Qe.state.isVisible||Be.isTouch||Ie&&"focus"===Ie.type?0:c(Qe.props.delay,e?0:1,ye.delay)}function p(e,t,n){if(void 0===n&&(n=!0),Ze.forEach(function(n){s(n,e)&&n[e].apply(n,t)}),n){var r;(r=Qe.props)[e].apply(r,t)}}function f(){var e=Qe.props.aria;if(e){var n="aria-"+e,r=Ge.id;A(Qe.props.triggerTarget||t).forEach(function(e){var t=e.getAttribute(n);if(Qe.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var o=t&&t.replace(r,"").trim();o?e.setAttribute(n,o):e.removeAttribute(n)}})}}function v(){A(Qe.props.triggerTarget||t).forEach(function(e){Qe.props.interactive?e.setAttribute("aria-expanded",Qe.state.isVisible&&e===l()?"true":"false"):e.removeAttribute("aria-expanded")})}function C(){je.body.removeEventListener("mouseleave",ce),je.removeEventListener("mousemove",Me),Ve=Ve.filter(function(e){return e!==Me})}function L(e){if(!Qe.props.interactive||!qe.contains(e.target)){if(l().contains(e.target)){if(Be.isTouch)return;if(Qe.state.isVisible&&x(Qe.props.trigger,"click"))return}!0===Qe.props.hideOnClick&&(Fe=!1,Qe.clearDelayTimeouts(),Qe.hide(),De=!0,setTimeout(function(){De=!1}),Qe.state.isMounted||P())}}function F(){je.addEventListener("mousedown",L,!0)}function P(){je.removeEventListener("mousedown",L,!0)}function M(e,t){H(e,function(){!Qe.state.isVisible&&qe.parentNode&&qe.parentNode.contains(qe)&&t()})}function U(e,t){H(e,t)}function H(e,t){function n(e){e.target===Ge&&"visibility"===e.propertyName&&(le(Ge,"remove",n),t())}if(0===e)return t();le(Ge,"remove",Oe),le(Ge,"add",n),Oe=n}function $(e,n,r){void 0===r&&(r=!1),A(Qe.props.triggerTarget||t).forEach(function(t){t.addEventListener(e,n,r),Pe.push({node:t,eventType:e,handler:n,options:r})})}function K(){a()&&($("touchstart",G,we),$("touchend",X,we)),k(Qe.props.trigger).forEach(function(e){if("manual"!==e)switch($(e,G),e){case"mouseenter":$("mouseleave",X);break;case"focus":$(Ue?"focusout":"blur",Z)}})}function z(){Pe.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,o=e.options;t.removeEventListener(n,r,o)}),Pe=[]}function G(e){var t=!1;if(Qe.state.isEnabled&&!ee(e)&&!De){if(Ie=e,Le=e.currentTarget,v(),!Qe.state.isVisible&&g(e)&&Ve.forEach(function(t){return t(e)}),"click"!==e.type||x(Qe.props.trigger,"mouseenter")&&!Fe||!1===Qe.props.hideOnClick||!Qe.state.isVisible){var n=i(),r=n[0],o=n[1];Be.isTouch&&"hold"===r&&o?Te=setTimeout(function(){ie(e)},o):ie(e)}else t=!0;"click"===e.type&&(Fe=!t),t&&ce(e)}}function Y(e){T(e.target,function(e){return e===t||e===qe})||de(w(qe.querySelectorAll(Ne)).concat(qe).map(function(e){var t=e._tippy,n=t.popperChildren.tooltip,r=t.props.interactiveBorder;return{popperRect:e.getBoundingClientRect(),tooltipRect:n.getBoundingClientRect(),interactiveBorder:r}}),e)&&(C(),ce(e))}function X(e){if(!ee(e))return Qe.props.interactive?(je.body.addEventListener("mouseleave",ce),je.addEventListener("mousemove",Me),void N(Ve,Me)):void(x(Qe.props.trigger,"click")&&Fe||ce(e))}function Z(e){e.target===l()&&(Qe.props.interactive&&e.relatedTarget&&qe.contains(e.relatedTarget)||ce(e))}function ee(e){var t="ontouchstart"in window,n=x(e.type,"touch"),r=a();return t&&Be.isTouch&&r&&!n||Be.isTouch&&!r&&n}function te(){function e(e){var t=Qe.state.currentPlacement;Qe.state.currentPlacement=e.placement,Qe.props.flip&&!Qe.props.flipOnUpdate&&(e.flipped&&(Qe.popperInstance.options.placement=e.placement),m(Qe.popperInstance.modifiers,"flip","enabled",!1)),Ge.setAttribute("data-placement",e.placement),!1!==e.attributes["x-out-of-boundaries"]?Ge.setAttribute("data-out-of-boundaries",""):Ge.removeAttribute("data-out-of-boundaries");var r=Q(e.placement),o=x(["top","bottom"],r),i=x(["bottom","right"],r);Ge.style.top="0",Ge.style.left="0",Ge.style[o?"top":"left"]=(i?1:-1)*n+"px",t&&t!==e.placement&&Qe.popperInstance.update()}var n,o=Qe.props.popperOptions,i=Qe.popperChildren.arrow,a=d(o,"flip"),s=d(o,"preventOverflow"),l=r({eventsEnabled:!1,placement:Qe.props.placement},o,{modifiers:r({},o&&o.modifiers,{tippyDistance:{enabled:!0,order:0,fn:function(e){n=D(je,Qe.props.distance);var t=Q(e.placement),r=B(t,s&&s.padding,n),o=B(t,a&&a.padding,n),i=Qe.popperInstance.modifiers;return m(i,"preventOverflow","padding",r),m(i,"flip","padding",o),e}},preventOverflow:r({boundariesElement:Qe.props.boundary},s),flip:r({enabled:Qe.props.flip,behavior:Qe.props.flipBehavior},a),arrow:r({element:i,enabled:!!i},d(o,"arrow")),offset:r({offset:Qe.props.offset},d(o,"offset"))}),onCreate:function(t){e(t),S(o&&o.onCreate,l.onCreate,[t]),ne()},onUpdate:function(t){e(t),S(o&&o.onUpdate,l.onUpdate,[t]),ne()}});Qe.popperInstance=new me.default(t,qe,l)}function ne(){0===Re?(Re++,Qe.popperInstance.update()):Ae&&1===Re&&(Re++,o(qe),Ae())}function re(){Re=0;var t,n=Qe.props.appendTo,r=l();t=Qe.props.interactive&&n===ye.appendTo||"parent"===n?r.parentNode:h(n,[r]),t.contains(qe)||t.appendChild(qe),"production"!==e.env.NODE_ENV&&j(Qe.props.interactive&&n===ye.appendTo&&r.nextElementSibling!==qe,["Interactive tippy element may not be accessible via keyboard navigation","because it is not directly after the reference element in the DOM source","order.","\n\n","Using a wrapper <div> or <span> tag around the reference element solves","this by creating a new parentNode context.","\n\n","Specifying `appendTo: document.body` silences this warning, but it","assumes you are using a focus management solution to handle keyboard","navigation.","\n\n","See: https://atomiks.github.io/tippyjs/accessibility/#interactivity"].join(" ")),m(Qe.popperInstance.modifiers,"flip","enabled",Qe.props.flip),Qe.popperInstance.enableEventListeners(),Qe.popperInstance.update()}function ie(e){Qe.clearDelayTimeouts(),Qe.popperInstance||te(),e&&p("onTrigger",[Qe,e]),F();var t=u(!0);t?Te=setTimeout(function(){Qe.show()},t):Qe.show()}function ce(e){if(Qe.clearDelayTimeouts(),p("onUntrigger",[Qe,e]),!Qe.state.isVisible)return void P();var t=u(!1);t?xe=setTimeout(function(){Qe.state.isVisible&&Qe.hide()},t):ke=requestAnimationFrame(function(){Qe.hide()})}function ue(){Qe.state.isEnabled=!0}function pe(){Qe.hide(),Qe.state.isEnabled=!1}function fe(){clearTimeout(Te),clearTimeout(xe),cancelAnimationFrame(ke)}function ge(n){if("production"!==e.env.NODE_ENV&&j(Qe.state.isDestroyed,R("setProps")),!Qe.state.isDestroyed){"production"!==e.env.NODE_ENV&&(W(n,ze),j(!!n.plugins&&(n.plugins.length!==ze.length||ze.some(function(e,t){return!n.plugins||!n.plugins[t]||e!==n.plugins[t]})),"Cannot update plugins")),p("onBeforeUpdate",[Qe,n]),z();var o=Qe.props,i=q(t,r({},Qe.props,{},n,{ignoreAttributes:!0}));if(i.ignoreAttributes=I(n.ignoreAttributes,o.ignoreAttributes),Qe.props=i,K(),o.interactiveDebounce!==i.interactiveDebounce&&(C(),Me=E(Y,i.interactiveDebounce)),se(qe,o,i),Qe.popperChildren=oe(qe),o.triggerTarget&&!i.triggerTarget?A(o.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):i.triggerTarget&&t.removeAttribute("aria-expanded"),v(),Qe.popperInstance)if(Se.some(function(e){return s(n,e)&&n[e]!==o[e]})){var a=Qe.popperInstance.reference;Qe.popperInstance.destroy(),te(),Qe.popperInstance.reference=a,Qe.state.isVisible&&Qe.popperInstance.enableEventListeners()}else Qe.popperInstance.update();p("onAfterUpdate",[Qe,n])}}function he(e){Qe.setProps({content:e})}function ve(t){void 0===t&&(t=c(Qe.props.duration,0,ye.duration)),"production"!==e.env.NODE_ENV&&j(Qe.state.isDestroyed,R("show"));var n=Qe.state.isVisible,r=Qe.state.isDestroyed,o=!Qe.state.isEnabled,i=Be.isTouch&&!Qe.props.touch;n||r||o||i||l().hasAttribute("disabled")||(Qe.popperInstance||te(),p("onShow",[Qe],!1),!1!==Qe.props.onShow(Qe)&&(F(),qe.style.visibility="visible",Qe.state.isVisible=!0,Qe.state.isMounted||b(Xe.concat(qe),0),Ae=function(){Qe.state.isVisible&&(b([qe],Qe.props.updateDuration),b(Xe,t),y(Xe,"visible"),f(),v(),N(Ke,Qe),J(!0),Qe.state.isMounted=!0,p("onMount",[Qe]),U(t,function(){Qe.state.isShown=!0,p("onShown",[Qe])}))},re()))}function be(t){void 0===t&&(t=c(Qe.props.duration,1,ye.duration)),"production"!==e.env.NODE_ENV&&j(Qe.state.isDestroyed,R("hide"));var n=!Qe.state.isVisible&&!_e,r=Qe.state.isDestroyed,o=!Qe.state.isEnabled&&!_e;n||r||o||(p("onHide",[Qe],!1),(!1!==Qe.props.onHide(Qe)||_e)&&(P(),qe.style.visibility="hidden",Qe.state.isVisible=!1,Qe.state.isShown=!1,b(Xe,t),y(Xe,"hidden"),f(),v(),M(t,function(){Qe.popperInstance.disableEventListeners(),Qe.popperInstance.options.placement=Qe.props.placement,qe.parentNode.removeChild(qe),Ke=Ke.filter(function(e){return e!==Qe}),0===Ke.length&&J(!1),Qe.state.isMounted=!1,p("onHidden",[Qe])})))}function Ee(){"production"!==e.env.NODE_ENV&&j(Qe.state.isDestroyed,R("destroy")),Qe.state.isDestroyed||(_e=!0,Qe.clearDelayTimeouts(),Qe.hide(0),z(),delete t._tippy,Qe.popperInstance&&Qe.popperInstance.destroy(),_e=!1,Qe.state.isDestroyed=!0,p("onDestroy",[Qe]))}var Ce=q(t,r({},ye,{},V(n)));if(!Ce.multiple&&t._tippy)return null;var Te,xe,ke,Ie,Ae,Oe,Le,_e=!1,Fe=!1,De=!1,Re=0,Pe=[],Me=E(Y,Ce.interactiveDebounce),je=O(Ce.triggerTarget||t),He=$e++,qe=ae(He,Ce),We=oe(qe),ze=_(Ce.plugins),Ge=We.tooltip,Ye=We.content,Xe=[Ge,Ye],Je={currentPlacement:null,isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},Qe={id:He,reference:t,popper:qe,popperChildren:We,popperInstance:null,props:Ce,state:Je,plugins:ze,clearDelayTimeouts:fe,setProps:ge,setContent:he,show:ve,hide:be,enable:ue,disable:pe,destroy:Ee};t._tippy=Qe,qe._tippy=Qe;var Ze=ze.map(function(e){return e.fn(Qe)});return K(),v(),Ce.lazy||te(),p("onCreate",[Qe]),Ce.showOnCreate&&ie(),qe.addEventListener("mouseenter",function(){Qe.props.interactive&&Qe.state.isVisible&&Qe.clearDelayTimeouts()}),qe.addEventListener("mouseleave",function(){Qe.props.interactive&&x(Qe.props.trigger,"mouseenter")&&je.addEventListener("mousemove",Me)}),Qe}function pe(t,n,o){void 0===n&&(n={}),void 0===o&&(o=[]),o=ye.plugins.concat(n.plugins||o),"production"!==e.env.NODE_ENV&&($(t),W(n,o)),X();var i=r({},n,{plugins:o}),a=l(t);if("production"!==e.env.NODE_ENV){var s=p(i.content),c=a.length>1;j(s&&c,["tippy() was passed an Element as the `content` prop, but more than one tippy","instance was created by this invocation. This means the content element will","only be appended to the last tippy instance.","\n\n","Instead, pass the .innerHTML of the element, or use a function that returns a","cloned version of the element instead.","\n\n","1) content: element.innerHTML\n","2) content: () => element.cloneNode(true)"].join(" "))}var d=a.reduce(function(e,t){var n=t&&ue(t,i);return n&&e.push(n),e},[]);return p(t)?d[0]:d}function fe(t){"production"!==e.env.NODE_ENV&&j(!0,["createTippyWithPlugins([...]) has been deprecated.","\n\n","Use tippy.setDefaultProps({plugins: [...]}) instead."].join(" "));var n=function(e,n,o){return void 0===n&&(n={}),void 0===o&&(o=[]),o=n.plugins||o,pe(e,r({},n,{plugins:[].concat(t,o)}))};return n.version=ve,n.defaultProps=ye,n.setDefaultProps=Ce,n.currentInput=Be,n}Object.defineProperty(t,"__esModule",{value:!0}),t.w=t.u=t.t=t.s=t.r=t.o=t.n=t.m=t.l=t.k=t.j=t.i=t.h=t.g=t.f=t.e=t.d=t.c=t.b=t.a=t._=t.R=t.B=void 0;var ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he=n(50),me=function(e){return e&&e.__esModule?e:{default:e}}(he),ve="5.1.3",be={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ye=r({allowHTML:!0,animation:"fade",appendTo:function(){return document.body},aria:"describedby",arrow:!0,boundary:"scrollParent",content:"",delay:0,distance:10,duration:[300,250],flip:!0,flipBehavior:"flip",flipOnUpdate:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,maxWidth:350,multiple:!1,offset:0,onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},placement:"top",plugins:[],popperOptions:{},role:"tooltip",showOnCreate:!1,theme:"",touch:!0,trigger:"mouseenter focus",triggerTarget:null,updateDuration:0,zIndex:9999},be),Ee=Object.keys(ye),Se=["arrow","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"],Ce=function(t){"production"!==e.env.NODE_ENV&&W(t,[]),Object.keys(t).forEach(function(e){ye[e]=t[e]})},we={passive:!0},Te="tippy-iOS",xe="tippy-popper",ke="tippy-tooltip",Ie="tippy-content",Ae="tippy-arrow",Oe="tippy-svg-arrow",Ne="."+xe,Le="."+ke,_e="."+Ie,Fe="."+Ae,De="."+Oe,Be={isTouch:!1},Re=0,Pe="undefined"!=typeof window&&"undefined"!=typeof document,Me=Pe?navigator.userAgent:"",Ue=/MSIE |Trident\//.test(Me),je=/UCBrowser\//.test(Me),He=Pe&&/iPhone|iPad|iPod/.test(navigator.platform),$e=1,Ve=[],Ke=[];pe.version=ve,pe.defaultProps=ye,pe.setDefaultProps=Ce,pe.currentInput=Be;var qe=function(e){var t=void 0===e?{}:e,n=t.exclude,r=t.duration;Ke.forEach(function(e){var t=!1;n&&(t=a(n)?e.reference===n:e.popper===n.popper),t||e.hide(r)})};t.B="tippy-backdrop",t.R='<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>',t._=r,t.a=v,t.b=je,t.c=g,t.d=ye,t.e=H,t.f=Be,t.g=O,t.h=T,t.i=x,t.j=Q,t.k=w,t.l=qe,t.m=fe,t.n=A,t.o=Pe,t.r=C,t.s=y,t.t=pe,t.u=I,t.w=j}).call(t,n(63))},function(e,t,n){"use strict";function r(e,t){var n=t||0,r=o;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}for(var o=[],i=0;i<256;++i)o[i]=(i+256).toString(16).substr(1);e.exports=r},function(e,t,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var o=new Uint8Array(16);e.exports=function(){return r(o),o}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t,n){"use strict";function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||i(a)}var o=n(95),i=n(94);e.exports=r},function(e,t,n){"use strict";var r,o,i,a,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){if("object"===s(t)&&void 0!==e)e.exports=n();else{o=[],r=n,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}}(function(){return function(){function e(t,n,r){function o(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof a&&a;if(!l&&c)return a(s,!0);if(i)return i(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<r.length;s++)o(r[s]);return o}return e}()({1:[function(e,t,n){function r(e){if(!e||"object"!=(void 0===e?"undefined":s(e)))return e;if("[object Date]"==Object.prototype.toString.call(e))return new Date(e.getTime());if(Array.isArray(e))return e.map(r);var t={};return Object.keys(e).forEach(function(n){t[n]=r(e[n])}),t}t.exports=r},{}],2:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var i=a[r]||a._default,s=i[0],l=i[1],c=i[2],o=t.createElement("div");for(o.innerHTML=l+e+c;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var d=t.createDocumentFragment();o.firstChild;)d.appendChild(o.removeChild(o.firstChild));return d}t.exports=r;var o,i=!1;"undefined"!=typeof document&&(o=document.createElement("div"),o.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',i=!o.getElementsByTagName("link").length,o=void 0);var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.polyline=a.ellipse=a.polygon=a.circle=a.text=a.line=a.path=a.rect=a.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(e,t,n){function r(e,t){"object"!=(void 0===t?"undefined":s(t))?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?a:l),o=e&&e.elements?e.elements:[],i=Object.create(null),u=0;u<o.length;++u){var p=o[u];if((t.disabled||!p.disabled)&&p.name&&(d.test(p.nodeName)&&!c.test(p.type))){var f=p.name,g=p.value;if("checkbox"!==p.type&&"radio"!==p.type||p.checked||(g=void 0),t.empty){if("checkbox"!==p.type||p.checked||(g=""),"radio"===p.type&&(i[p.name]||p.checked?p.checked&&(i[p.name]=!0):i[p.name]=!1),!g&&"radio"==p.type)continue}else if(!g)continue;if("select-multiple"!==p.type)n=r(n,f,g);else{g=[];for(var h=p.options,m=!1,v=0;v<h.length;++v){var b=h[v],y=t.empty&&!b.value,E=b.value||y;b.selected&&E&&(m=!0,n=t.hash&&"[]"!==f.slice(f.length-2)?r(n,f+"[]",b.value):r(n,f,b.value))}!m&&t.empty&&(n=r(n,f,""))}}}if(t.empty)for(var f in i)i[f]||(n=r(n,f,""));return n}function o(e){var t=[],n=/^([^\[\]]*)/,r=new RegExp(u),o=n.exec(e);for(o[1]&&t.push(o[1]);null!==(o=r.exec(e));)t.push(o[1]);return t}function i(e,t,n){if(0===t.length)return e=n;var r=t.shift(),o=r.match(/^\[(.+?)\]$/);if("[]"===r)return e=e||[],Array.isArray(e)?e.push(i(null,t,n)):(e._values=e._values||[],e._values.push(i(null,t,n))),e;if(o){var a=o[1],s=+a;isNaN(s)?(e=e||{},e[a]=i(e[a],t,n)):(e=e||[],e[s]=i(e[s],t,n))}else e[r]=i(e[r],t,n);return e}function a(e,t,n){if(t.match(u))i(e,o(t),n);else{var r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function l(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=encodeURIComponent(n),n=n.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}var c=/^(?:submit|button|image|reset|file)$/i,d=/^(?:input|select|textarea|keygen)/i,u=/(\[[^\[\]]*\])/g;t.exports=r},{}],4:[function(e,t,n){var r=e("domify"),o=e("form-serialize"),i=e("deep-clone-simple"),a=function(e){var t=document.createElement("form");t.classList.add("vex-dialog-form");var n=document.createElement("div");n.classList.add("vex-dialog-message"),n.appendChild(e.message instanceof window.Node?e.message:r(e.message));var o=document.createElement("div");return o.classList.add("vex-dialog-input"),o.appendChild(e.input instanceof window.Node?e.input:r(e.input)),t.appendChild(n),t.appendChild(o),t},l=function(e){var t=document.createElement("div");t.classList.add("vex-dialog-buttons");for(var n=0;n<e.length;n++){var r=e[n],o=document.createElement("button");o.type=r.type,o.textContent=r.text,o.className=r.className,o.classList.add("vex-dialog-button"),0===n?o.classList.add("vex-first"):n===e.length-1&&o.classList.add("vex-last"),function(e){o.addEventListener("click",function(t){e.click&&e.click.call(this,t)}.bind(this))}.bind(this)(r),t.appendChild(o)}return t},c=function(e){var t={name:"dialog",open:function(t){var n=Object.assign({},i(this.defaultOptions),t);n.unsafeMessage&&!n.message?n.message=n.unsafeMessage:n.message&&(n.message=e._escapeHtml(n.message));var r=n.unsafeContent=a(n),o=e.open(n);""!==n.yesText&&(n.buttons[0].text=n.yesText),""!==n.noText&&(n.buttons[1].text=n.noText);var s=n.beforeClose&&n.beforeClose.bind(o);if(o.options.beforeClose=function(){var e=!s||s();return e&&n.callback(this.value||!1),e}.bind(o),r.appendChild(l.call(o,n.buttons)),o.form=r,r.addEventListener("submit",n.onSubmit.bind(o)),n.focusFirstInput){var c=o.contentEl.querySelector("button, input, select, textarea");c&&c.focus()}return o},alert:function(e){return"string"==typeof e&&(e={message:e}),e=Object.assign({},i(this.defaultOptions),i(this.defaultAlertOptions),e),this.open(e)},confirm:function(e){if("object"!==(void 0===e?"undefined":s(e))||"function"!=typeof e.callback)throw new Error("dialog.confirm(options) requires options.callback.");return e=Object.assign({},i(this.defaultOptions),i(this.defaultConfirmOptions),e),this.open(e)},prompt:function(t){if("object"!==(void 0===t?"undefined":s(t))||"function"!=typeof t.callback)throw new Error("dialog.prompt(options) requires options.callback.");var n=Object.assign({},i(this.defaultOptions),i(this.defaultPromptOptions)),r={unsafeMessage:'<label for="vex">'+e._escapeHtml(t.label||n.label)+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+e._escapeHtml(t.placeholder||n.placeholder)+'" value="'+e._escapeHtml(t.value||n.value)+'" />'};t=Object.assign(n,r,t);var o=t.callback;return t.callback=function(e){if("object"===(void 0===e?"undefined":s(e))){var t=Object.keys(e);e=t.length?e[t[0]]:""}o(e)},this.open(t)}};return t.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary",click:function(){this.value=!0}},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(){this.value=!1,this.close()}}},t.defaultOptions={callback:function(){},afterOpen:function(){},message:"",input:"",yesText:"",noText:"",buttons:[t.buttons.YES,t.buttons.NO],showCloseButton:!1,onSubmit:function(e){return e.preventDefault(),this.options.input&&(this.value=o(this.form,{hash:!0})),this.close()},focusFirstInput:!0},t.defaultAlertOptions={buttons:[t.buttons.YES]},t.defaultPromptOptions={label:"Prompt:",placeholder:"",value:""},t.defaultConfirmOptions={},t};t.exports=c},{"deep-clone-simple":1,domify:2,"form-serialize":3}]},{},[4])(4)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(e){var t=(0,E.getIframeData)(e);f.default.removeBotFromIframe(t)}function o(t){t!==v.TOP_WINDOW_ID?r(t):e()}function i(t){!b.default.getIframeId()&&t?(b.default.setIframeId(t),f.default.sendBotFound(t),t!==v.TOP_WINDOW_ID&&e()):b.default.getIframeId()!==t&&o(t)}function a(e){b.default.getIframeId()===e&&(b.default.setIframeId(""),t(b.default.getBotConfig()))}function p(e){if(b.default.setBotConfig(e),(0,E.getRegisteredIframes)().length>0){var t=b.default.getIframeId();if(t){if(!(t===v.TOP_WINDOW_ID)){var n=(0,E.getIframeData)(t);f.default.sendBotConfigToIframe(n,e,!1)}}}}function g(){if((0,E.getRegisteredIframes)().length>0){var e=b.default.getBotConfig(),t=b.default.getIframeId();if(t){t===v.TOP_WINDOW_ID&&(b.default.setIframeId(""),f.default.sendBotConfig(e,!0))}else f.default.sendBotConfig(e,!0)}}function h(e,t,r){var o=l.eventTrackData.data[l.productIdParameter],i=l.eventTrackData.data[l.aptrinsicIdParam];n.fetchEntriesById(e,o,i,t,r)}function S(e,t){var n=(0,E.getRegisteredIframes)(),r=void 0;n.forEach(function(n){f.default.checkMappedElementIsVisible(n,e,function(e){var n=s(e,1),i=n[0],a=i.isVisible,l=i.iframeId;a&&!r&&(r=l,o(b.default.getIframeId()),b.default.setIframeId(""),f.default.sendBotConfigToIframe((0,E.getIframeData)(r),t,!0))})})}function T(e){try{var o=b.default.getIframeId(),i=b.default.getBotConfig();if(i){var a=i.windowSettings.embedKCSettings.elementSelector;a.cssSelector&&f.default.addElementClickListener(e,a.cssSelector),o||!(0,c.getConfig)("framesetMode")&&!(0,m.isElementVisible)(e.elementData)?o===v.TOP_WINDOW_ID?(0,w.findInAll)(a,null,function(e){if(e){(0,m.isElementVisible)(e.element,!0)||(n.close(),S(a,i))}}):e.iframeId!==o&&f.default.checkMappedElementIsVisible((0,E.getIframeData)(o),a,function(e){s(e,1)[0].isVisible||(0,w.findInAll)(a,null,function(e){e&&((0,m.isElementVisible)(e.element,!0)?(r(o),t(b.default.getBotConfig())):S(a,i))})}):f.default.sendBotConfigToIframe(e,i,!0)}}catch(e){y.logger.log("Embedded bot onIframeRegistered "+e)}}function x(){b.default.setIframeId(""),f.default.removeWidgetFromAllIframes()}function k(){u.internalEventListener.removeListener("WIDGET_LOADED",k),n.open()}function I(n){var r=b.default.getIframeId();if(!r||r&&r!==n)if(n===v.TOP_WINDOW_ID){var o=(0,E.getIframeData)(b.default.getIframeId());(0,c.getConfig)("framesetMode")||(0,m.isElementVisible)(o.domElement)||(b.default.setIframeId(""),u.internalEventListener.addListener("WIDGET_LOADED",k),f.default.removeWidgetFromAllIframes(),t(b.default.getBotConfig()))}else{b.default.setIframeId(""),e();var i=(0,E.getIframeData)(n);f.default.sendBotConfigToIframe(i,b.default.getBotConfig(),!0,!0)}}function A(){n.close(!0)}u.internalEventListener.addListener(d.IFRAME_TO_TOP_EVENTS.BOT_FOUND,i),u.internalEventListener.addListener(d.IFRAME_TO_TOP_EVENTS.IFRAME_CLOSED,a),u.internalEventListener.addListener(d.TOP_TO_IFRAME_EVENTS.BOT_RESPONSE,p),u.internalEventListener.addListener("BOT_NOT_FOUND",g),u.internalEventListener.addListener(d.IFRAME_TO_TOP_EVENTS.GET_BOT_CONTENT,h),u.internalEventListener.addListener(d.IFRAME_TO_TOP_EVENTS.TRACK_BOT_TOGGLE,C.trackToggleWidget),u.internalEventListener.addListener("IFRAME_REGISTERED",(0,m.debounce)(T,0)),u.internalEventListener.addListener(d.BOT_IFRAME_INTERNAL_EVENTS.BOT_EMPTY_CONFIG,x),u.internalEventListener.addListener(d.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK,I),u.internalEventListener.addListener(d.BOT_INTERNAL_EVENTS.BOT_CLICK_OUTSIDE,A)}function i(e,t,n){function r(e,t){var n=!1,r=(0,T.findInWindow)(e.cssSelector,document);r&&(n=(0,m.isElementVisible)(r,!0)),h.default.checkMappedElementIsVisibleResponse(t,n)}function o(){n.close(!0)}function i(){n.open()}function a(e){try{s=function(t){var n=document.querySelector(e);return n&&(t.target===n||n.contains(t.target))&&(t.preventDefault(),t.stopImmediatePropagation(),u.internalEventListener.dispatchEvent(d.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK,(0,S.getIframeId)())),!1},(0,m.removeEventListener)(document,"click",s,!1),(0,m.addEventListener)(document,"click",s,!1)}catch(e){y.logger.log("Embedded bot addElementClickListener "+e)}}var s=null;u.internalEventListener.addListener(d.TOP_TO_IFRAME_EVENTS.REMOVE_BOT,e),u.internalEventListener.addListener(d.BOT_IFRAME_INTERNAL_EVENTS.INIT_WIDGET_IN_IFRAME,function(e,n,r){r&&(u.internalEventListener.removeListener("WIDGET_LOADED",i),u.internalEventListener.addListener("WIDGET_LOADED",i,null,!1,!0)),t(e,n)}),u.internalEventListener.addListener(d.TOP_TO_IFRAME_EVENTS.POST_BOT_EVENT,n.postToWidget),u.internalEventListener.addListener(d.TOP_TO_IFRAME_EVENTS.SET_BOT_IS_OPEN,n.setIsOpen),u.internalEventListener.addListener(d.TOP_TO_IFRAME_EVENTS.IS_ELEMENT_VISIBLE,r),u.internalEventListener.addListener(d.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK,h.default.postClickElement),u.internalEventListener.addListener(d.BOT_INTERNAL_EVENTS.BOT_CLICK_OUTSIDE,o),u.internalEventListener.addListener(d.TOP_TO_IFRAME_EVENTS.ADD_ELEMENT_CLICK_LISTENER,a)}function a(e,t,n){try{(0,c.isIframe)()?(i(e,t,n),(0,m.addEventListener)(window,"unload",function(){h.default.postIframeClosed()})):(o(e,t,n),n&&n.handleIncomingBotEvents())}catch(e){y.logger.logInternalError(new Error("handlingEmbeddedBotIframeRequests - "+e))}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=a;var l=n(4),c=n(2),d=n(22),u=n(9),p=n(48),f=r(p),g=n(47),h=r(g),m=n(0),v=n(46),b=r(v),y=n(3),E=n(6),S=n(13),C=n(75),w=n(17),T=n(7)},function(e,t,n){"use strict";function r(e,t){return(0,o.isObject)(e)&&(0,o.isObject)(t)&&t.hasOwnProperty("id")&&t.id}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldInjectAccountId=r;var o=n(0)},function(e,t,n){"use strict";function r(e){var t=e.content;switch(t.type){case s.TOP_TO_IFRAME_EVENTS.BOT_RESPONSE:l.internalEventListener.dispatchEvent(s.BOT_IFRAME_INTERNAL_EVENTS.INIT_WIDGET_IN_IFRAME,t.botConfig,t.isInitial,t.shouldOpen);break;case s.TOP_TO_IFRAME_EVENTS.BOT_FOUND:var n=t.iframeId;(0,a.getIframeId)()!==n&&l.internalEventListener.dispatchEvent(s.TOP_TO_IFRAME_EVENTS.REMOVE_BOT);break;case s.TOP_TO_IFRAME_EVENTS.GET_APTRINSIC_ID_RESPONSE:case s.TOP_TO_IFRAME_EVENTS.GET_BOT_CONTENT_RESPONSE:(0,i.decrementState)(e.aptrinsicRequestId,t);break;case s.TOP_TO_IFRAME_EVENTS.SET_BOT_IS_OPEN:var r=t.isOpen;l.internalEventListener.dispatchEvent(s.TOP_TO_IFRAME_EVENTS.SET_BOT_IS_OPEN,r);break;case s.TOP_TO_IFRAME_EVENTS.POST_BOT_EVENT:l.internalEventListener.dispatchEvent(s.TOP_TO_IFRAME_EVENTS.POST_BOT_EVENT,t.data);break;case s.TOP_TO_IFRAME_EVENTS.REMOVE_BOT:l.internalEventListener.dispatchEvent(s.TOP_TO_IFRAME_EVENTS.REMOVE_BOT);break;case s.TOP_TO_IFRAME_EVENTS.IS_ELEMENT_VISIBLE:l.internalEventListener.dispatchEvent(s.TOP_TO_IFRAME_EVENTS.IS_ELEMENT_VISIBLE,t.cssSelector,e.aptrinsicRequestId);break;case s.TOP_TO_IFRAME_EVENTS.ADD_ELEMENT_CLICK_LISTENER:l.internalEventListener.dispatchEvent(s.TOP_TO_IFRAME_EVENTS.ADD_ELEMENT_CLICK_LISTENER,t.cssSelector);break;default:o.logger.logInternalError(new Error("child iframe script got unsupported bot event from top window, data: "+JSON.stringify(e)))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(3),i=n(6),a=n(13),s=n(22),l=n(9)},function(e,t,n){"use strict";function r(e){var t=e.content;switch(t.type){case i.IFRAME_TO_TOP_EVENTS.BOT_FOUND:a.internalEventListener.dispatchEvent(i.IFRAME_TO_TOP_EVENTS.BOT_FOUND,e.aptrinsicIframeId);break;case i.IFRAME_TO_TOP_EVENTS.IFRAME_CLOSED:a.internalEventListener.dispatchEvent(i.IFRAME_TO_TOP_EVENTS.IFRAME_CLOSED,e.aptrinsicIframeId);break;case i.IFRAME_TO_TOP_EVENTS.POST_BOT_EVENT:a.internalEventListener.dispatchEvent(i.IFRAME_TO_TOP_EVENTS.POST_BOT_EVENT,e.aptrinsicIframeId);break;case i.IFRAME_TO_TOP_EVENTS.TRACK_BOT_TOGGLE:a.internalEventListener.dispatchEvent(i.IFRAME_TO_TOP_EVENTS.TRACK_BOT_TOGGLE,t.botId,t.isOpen);break;case i.IFRAME_TO_TOP_EVENTS.IS_ELEMENT_VISIBLE_RESPONSE:(0,o.decrementState)(e.aptrinsicRequestId,t);break;case i.IFRAME_TO_TOP_EVENTS.GET_APTRINSIC_ID:var n=d.eventTrackData.data[d.aptrinsicIdParam],r=(0,o.getIframeData)(e.aptrinsicIframeId);l.default.getAptrinsicIdResponse(r,e.aptrinsicRequestId,n);break;case i.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK:a.internalEventListener.dispatchEvent(i.IFRAME_TO_TOP_EVENTS.BOT_ELEMENT_CLICK,e.aptrinsicIframeId);break;case i.IFRAME_TO_TOP_EVENTS.GET_BOT_CONTENT:var s=t.botId,u=(0,o.getIframeData)(e.aptrinsicIframeId);a.internalEventListener.dispatchEvent(i.IFRAME_TO_TOP_EVENTS.GET_BOT_CONTENT,s,function(t){l.default.getBotContentResponse(u,e.aptrinsicRequestId,t,null)},function(t){l.default.getBotContentResponse(u,e.aptrinsicRequestId,null,t)});break;default:c.logger.logInternalError(new Error("master script got unsupported bot event from top window, data: "+JSON.stringify(e)))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(6),i=n(22),a=n(9),s=n(48),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(3),d=n(4)},function(e,t,n){"use strict";function r(e,t,n){var r={};Object.assign(r,o.eventTrackData[d.cacheGetAll]()),(0,l.addCacheBuster)(r);var f=(0,u.getGlobalContext)();f&&Object.assign(r,{gcx:JSON.stringify(f)}),Object.assign(r,(0,p.getWebContext)()),r.at=t||"a";var g=i.ondemandEndpoint+"/"+o.eventTrackData.data[o.productIdParameter]+"/"+e+"?"+(0,l.convert2Parameters)((0,l.addParameters)(r,[]));try{s.AjaxUtil.getData(g,function(e){n(e),c.EngagementDrawer.draw([e])})}catch(t){a.logger.logInternalError("Error during getting on demand engagement id "+e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(4),i=n(2),a=n(3),s=n(11),l=n(0),c=n(44),d=n(5),u=n(19),p=n(21)},function(e,t,n){"use strict";function r(e){var t=(0,a.getBody)().getBoundingClientRect(),n=t.top,r=e.offsets.popper,o=r.top,i=r.left,s=o;return n>0&&(s-=n),e.styles.top="0px",e.styles.left="0px",e.styles.transform="translate("+i+"px, "+s+"px)",e.styles.willChange="transform",e}function o(e){(0,a.getConfig)("enableModalBodyScroll")||(e.modifiers.computeStyle={fn:r})}function i(e){(0,a.getConfig)("enableModalBodyScroll")||(e.popperOptions={modifiers:{}},o(e.popperOptions))}Object.defineProperty(t,"__esModule",{value:!0}),t.useComputeStyleModifier=o,t.useComputeStyleModifierForTooltip=i;var a=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(3),a=n(25),s=n(11),l=n(4),c=n(5),d=n(14),u=r(d),p=n(33),f=r(p),g=n(7),h=n(77),m=r(h),v=n(24),b=n(2),y=n(9),E=n(16),S=n(8),C=n(20),w=n(19),T=n(21),x=n(31);x.defaultOptions.className="vex-theme-os";var k=n(136),I=n(147),A=n(148),O=n(149),N=n(150),L=n(151),_=n(152),F=n(153),D=n(154),B=n(137),R=n(138),P=n(139),M=n(140),U=n(141),j=n(142),H=n(143),$=n(144),V=n(145),K=n(146),q=n(155),W=n(159),z=n(160),G=n(161),Y=n(162),X=n(163),J=n(164),Q=n(165),Z=n(166),ee=n(156),te=n(157),ne=n(158),re="div",oe=3,ie=new f.default,ae=void 0,se=function(){function e(){Ce=1,we=[],Te=[],xe=[],ke=0,Ie=[],Ae=null,Oe=null,Ne=null,Le=null,_e=!1,Fe={}}function t(e,t){if(!u.default.isEditorMode()){var n=b.trackMultiStepEndpoint,r=[];if(!0!==_e){2===t&&(_e=!0),r=(0,o.addParameters)(l.eventTrackData[c.cacheGetAll](),r),(0,o.addParameters)({ei:e.engagementId||null,ecoi:e.content.id||null,evi:e.matchEventId||null,ent:oe,ems:t||null,acci:e.accountId,exi:e.executionId,ext:e.executionTimestamp,at:e.activationType||"a",cl:e.contentLocale},r),ye&&"kc"===e.activationType&&(0,o.addParameters)(ye,r),r=(0,o.addParameters)((0,T.getWebContext)(),r);var i=(0,C.getChannel)(l.eventTrackData[c.cacheGet](l.productIdParameter)),a=(0,w.getGlobalContext)(),d=void 0;a&&(d={gcx:JSON.stringify(a)},i!==S.DESKTOP_CHANNEL&&(0,o.addParameters)(d,r)),i==S.DESKTOP_CHANNEL?(0,E.desktopTrackEngagementState)(r,d):(n+="?"+(0,o.convert2Parameters)(r),s.AjaxUtil.getData(n)),y.internalEventListener.dispatchEvent("engagementCompleted",(0,E.getExternalEvent)(e,"Completed"))}}}function n(e,t,n){if(!u.default.isEditorMode()&&!m.default.wasStepTracked(e.executionId,t)){m.default.markStepTracked(e.executionId,t);var r=b.trackStepEndpoint,i=[];i=(0,o.addParameters)(l.eventTrackData[c.cacheGetAll](),i),(0,o.addParameters)({ei:e.engagementId,ecoi:e.content.id,cosi:t,evi:e.matchEventId,cossn:n,ent:oe,acci:e.accountId,exi:e.executionId,ext:e.executionTimestamp,at:e.activationType||"a",cl:e.contentLocale},i),ye&&"kc"===e.activationType&&(0,o.addParameters)(ye,i);var a=(0,w.getGlobalContext)(),d=(0,C.getChannel)(l.eventTrackData[c.cacheGet](l.productIdParameter)),p=void 0;a&&(p={gcx:JSON.stringify(a)},d!==S.DESKTOP_CHANNEL&&(0,o.addParameters)(p,i)),i=(0,o.addParameters)((0,T.getWebContext)(),i),d==S.DESKTOP_CHANNEL?(0,E.desktopTrackStep)(i,p):(r+="?"+(0,o.convert2Parameters)(i),s.AjaxUtil.getData(r));var f=(0,E.getExternalEvent)(e,"Viewed Step");f.stepNumber=n+1,y.internalEventListener.dispatchEvent("engagementViewedStep",f)}}function r(e){e.querySelector(".aptr-snooze-container").style.display=1===Ce?"block":"none"}function d(){Ae.close()}function p(e,a,s){try{var l,c=a.content;if(e>we.length&&!c.cyclic)return void Ae.close();if(c.cyclic&&e>we.length&&(Ce=1),c.cyclic&&e<1&&(Ce=we.length),(0,E.isSnoozeButtonEnabled)(a.activationType,c.snoozeButton,a.activationTypes)&&r(s),!c.cyclic&&e==we.length&&c.carouselNavigation&&c.carouselNavigation.lastSlideSettings&&f(s,c.carouselNavigation.lastSlideSettings),!c.cyclic){s.querySelector(".aptr-nav-button.aptr-arrow-left").style.display=1==e?"none":""}if(Te)for(l=0;l<Te.length;l++)Te[l].classList.remove("aptr-slideshow-active"),Te[l].style.backgroundColor=c.carouselNavigation.backgroundColor?c.carouselNavigation.backgroundColor:"#ffffff";var d=s.querySelector(".aptr-slides-container"),u=c.carouselSlideList[Ce-1],g=Te[0].parentNode,h=parseInt(window.getComputedStyle(g).height);if(s.style.backgroundColor="transparent",(0,o.setCrossBrowserTransform)(d,"translateX("+-1*Ie[Ce-1]+"px)"),u.width>0&&(s.style.width=u.width+"px"),u.width>0&&(s.style.width=u.width+"px"),ve(we[Ce-1]),u.autoHeight){var m=window.getComputedStyle(d.children[Ce-1]),v=m.height;Fe[Ce-1]||(v=parseInt(v)+h+"px",d.children[Ce-1].style.height=v,Fe[Ce-1]=!0),d.parentNode.style.height=v,s.style.height=v}else u.height>0&&(s.style.height=u.height+"px",d.parentNode.style.height=u.height+"px");Te.length>0&&(Te[Ce-1].style.backgroundColor="transparent",Te[Ce-1].classList.add("aptr-slideshow-active"),Te[Ce-1].style.borderColor=c.carouselNavigation.backgroundColor?c.carouselNavigation.backgroundColor:"#ffffff"),n(a,u.id,u.sequence),Ce==we.length&&t(a,2),c.interval&&(c.cyclic||e<we.length)&&(Oe=setTimeout(function(){p(++Ce,a,s)},c.interval*o.MILLISEC)),(0,C.isDesktop)()&&(0,E.addLinkListener)(d.children[Ce-1],a,u.id,u.sequence,!1)}catch(e){i.logger.logInternalError(e)}}function f(e,t){var n=e.querySelector(".aptr-nav-button:not(.aptr-arrow-left)");n.style.backgroundColor=t.backgroundColor,n.removeChild(n.querySelector(".aptr-arrow-icon"));var r=(0,o.createElement)(re,[]);r.innerHTML=Se[t.checkmarkType];var i=r.firstChild;i.classList.add("aptr-arrow-icon"),i.style.stroke=t.color,i.style.fill=t.color,(0,o.appendElements)(n,[i])}function h(e,t){var n=e.querySelector(".aptr-nav-button:not(.aptr-arrow-left)");n.style.backgroundColor=t.backgroundColor,n.removeChild(n.querySelector(".aptr-arrow-icon"));var r=(0,o.createElement)(re,[]);r.innerHTML=Ee[t.arrowType];var i=r.firstChild;i.classList.add("aptr-arrow-icon"),i.style.stroke=t.color,i.style.fill=t.color,(0,o.appendElements)(n,[i])}function se(e){if(e){var t=(0,o.createElement)(re,["aptr-slides-container"]),n=ge(e.carouselSlideList);(0,o.appendElements)(t,n);var r=(0,o.createElement)(re,["aptr-arrows-container"]),i=ue(e.carouselNavigation);(0,o.appendElements)(r,i);var a=(0,o.createElement)(re,["aptr-slideshow-dots-container"]);Te=ce(e.carouselNavigation,e.carouselSlideList.length),(0,o.appendElements)(a,Te);var s=(0,o.createElement)(re,["aptr-carousel-engagement"]);return(0,o.appendElements)(s,[t,r,a]),s}}function le(e,t){if(e){var n=t.querySelector(".aptr-slides-container");if(n.style.width=ke+"px",e.borderRadius){var r=t.querySelector(".aptr-carousel-engagement");r&&(r.style.borderRadius=e.borderRadius+"px"),t.style.borderRadius=e.borderRadius+"px"}he(e.carouselSlideList,n.children)}}function ce(e,t){for(var n=[],r=0;r<t;r++){var i=(0,o.createElement)(re,["aptr-slideshow-dot"]);n.push(i)}return n}function de(e,t){for(var n=0;n<t.length;n++)t[n].style.borderColor=e.backgroundColor}function ue(e){if(!e)throw new Error("No navigation settings provided for carousel");var t=[],n=(0,o.createElement)("span",["aptr-nav-button","aptr-arrow-left"]);n.setAttribute("role","button"),n.setAttribute("aria-label","previous");var r=(0,o.createElement)(re,[]);r.innerHTML=Ee[e.arrowType];var i=r.firstChild;i.classList.add("aptr-arrow-icon"),(0,o.appendElements)(n,[i]);var a=(0,o.createElement)("span",["aptr-nav-button","aptr-arrow-right"]);a.setAttribute("role","button"),a.setAttribute("aria-label","next"),r=(0,o.createElement)(re,[]),r.innerHTML=Ee[e.arrowType];var s=r.firstChild;return s.classList.add("aptr-arrow-icon"),(0,o.appendElements)(a,[s]),t.push(n),t.push(a),t}function pe(e,t,n){fe(t,e),fe(n,e)}function fe(e,t){e.style.backgroundColor=t.backgroundColor,e.style.borderRadius=t.backgroundRadius?t.backgroundRadius+"%":"0px";var n=e.querySelector(".aptr-arrow-icon");n.style.stroke=t.color,n.style.fill=t.color}function ge(e){var t=[];if(!e.forEach)throw new Error("Cannot create slides for carousel because slides array was not sent correctly");return e.sort(function(e,t){return e.sequence-t.sequence}),e.forEach(function(e,n){Ie[n]=ke,ke+=e.width;var r=(0,o.createElement)(re,["aptr-slide"]);r.setAttribute("id","slide"+e.id),me(r),e.html&&(r.innerHTML=(0,g.addNonceToDomString)(e.html)),t.push(r)}),t}function he(e,t){e.sort(function(e,t){return e.sequence-t.sequence}),e.forEach(function(e,n){var r=t[n];e.backgroundType&&"IMAGE"===e.backgroundType?e.backgroundImage?r.style.background=e.backgroundImage:r.style.backgroundColor=(0,o.hexToRgba)("#ffffff",e.backgroundFill||0===e.backgroundFill?e.backgroundFill/100:1):r.style.backgroundColor=e.backgroundColor?(0,o.hexToRgba)(e.backgroundColor,e.backgroundFill||0===e.backgroundFill?e.backgroundFill/100:1):(0,o.hexToRgba)("#ffffff",e.backgroundFill||0===e.backgroundFill?e.backgroundFill/100:1),r.style.height=e.autoHeight?"auto":e.height+"px",r.style.width=e.width+"px"})}function me(e){e.setAttribute("aria-hidden","true")}function ve(e){e.setAttribute("aria-hidden","false")}function be(e,t,n){function r(e,t){for(var n=0;n<e.length;n+=1){e[n];t(e[n],n)}}function o(){r(e,function(e,r){if("true"===e.getAttribute("aria-hidden")&&(e.classList.remove("aptr-slide-show"),e.classList.add("aptr-slide-hide"),!n)){t.querySelector(".aptr-nav-button.aptr-arrow-left").style.display=0===r?"none":""}})}function i(){r(e,function(e){"true"!==e.getAttribute("aria-hidden")&&(e.classList.remove("aptr-slide-hide"),e.classList.add("aptr-slide-show"))})}var a=document.querySelector(".aptr-slides-container");(0,g.addTransitionEndListener)(a,o),(0,g.addTransitionStartListener)(a,i)}var ye=null,Ee={ARROW_1:k,ARROW_2:I,ARROW_3:A,ARROW_4:O,ARROW_5:N,ARROW_6:L,ARROW_7:_,ARROW_8:F,ARROW_9:D,ARROW_10:B,ARROW_11:R,ARROW_12:P,ARROW_13:M,ARROW_14:U,ARROW_15:j,ARROW_16:H,ARROW_17:$,ARROW_18:V,ARROW_19:K,EMPTY_ARROW_TYPE:k},Se={V_1:q,V_2:W,V_3:z,V_4:G,V_5:Y,V_6:X,V_7:J,V_8:Q,V_9:Z,V_10:ee,V_11:te,V_12:ne,EMPTY_LAST_SLIDE_ICON_TYPE:q},Ce=1,we=[],Te=[],xe=[],ke=0,Ie=[],Ae=null,Oe=null,Ne=null,Le=null,_e=!1,Fe={};this.drawCarousel=function(n,r,s){ye=s,e(),this.carousel=n;var l=se(n.content);Le=Le||0===Le?Le:n.content.zindex||n.content.zIndex||2147483647,Ae=x.open({appendLocation:(0,b.getConfig)("framesetMode")?"html":"body",enableModalBodyScroll:(0,b.getConfig)("enableModalBodyScroll"),closeClassName:"aptr-engagement-close-btn px-close-button",unsafeContent:l.outerHTML,showCloseButton:!0,overlayClosesOnClick:!1,afterOpen:function(){var e=this;if((0,b.getConfig)("enableModalBodyScroll")&&(0,b.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex"),this.rootEl.setAttribute("aria-live","polite"),this.contentEl.classList.add("apt-carousel-popup"),this.contentEl.setAttribute("data-apt-disable-selector",!0),this.contentEl.classList.add("px-engagement-wrapper-slider"),this.contentEl.classList.add("px-engagement-wrapper"),this.contentEl.style.zIndex=n.content.zindex||n.content.zIndex||Le,this.rootEl.style.zIndex=n.content.zindex||n.content.zIndex||Le,(0,g.addStyleTag)(this.contentEl,n.content.coreStyling,"px-engagement-wrapper",".apt-vex.vex.vex-theme-os"),(0,g.addStyleTag)(this.contentEl,n.content.engagementCoreStyling,"px-engagement-wrapper-slider",".apt-vex.vex.vex-theme-os"),(0,g.addStyleTag)(this.contentEl,n.content.overrideStyling,"px-engagement-wrapper-slider",".apt-vex.vex.vex-theme-os"),Array.isArray(n.content.carouselSlideList)&&n.content.carouselSlideList.forEach(function(t){var n=t&&t.style;n&&(0,g.addStyleTag)(e.contentEl,n,"px-engagement-wrapper-slider #slide"+t.id,".apt-vex.vex.vex-theme-os")}),this.rootEl.querySelector(".vex-overlay").style.zIndex=Le,n.content.overlayColor&&(this.rootEl.querySelector(".vex-overlay").style.background=(0,o.hexToRgba)(n.content.overlayColor,n.content.overlayFill?n.content.overlayFill/100:0)),(!n.content.overlayFill||n.content.overlayFill<1)&&this.rootEl.classList.add("apt-popup-disable-overlay"),n.borderRadius&&(this.contentEl.style.borderRadius=n.borderRadius+"px"),(0,E.isSnoozeButtonEnabled)(n.activationType,n.content.snoozeButton,n.activationTypes)){var i=this.contentEl.querySelector(".aptr-slideshow-dots-container"),a=(0,o.createElement)(re,["aptr-snooze-container"]),s=n.content.carouselSlideList[Ce-1];(0,E.createSnoozeButton)(n.content.snoozeButton,a,n,s.id,s.sequence,d),i.appendChild(a)}var c=this.contentEl.getElementsByClassName("aptr-nav-button");we=document.getElementsByClassName("aptr-slide"),Te=document.getElementsByClassName("aptr-slideshow-dot"),be(we,l,n.content.cyclic);var u=c[0],f=c[1];le(n.content,this.contentEl),pe(n.content.carouselNavigation,u,f),de(n.content.carouselNavigation,Te);var m=function(){clearTimeout(Oe);var t=Ce-1;p(--Ce,n,e.contentEl),me(we[t]),n.content.cyclic||Ce!=we.length-1||h(e.contentEl,n.content.carouselNavigation)},v=function(){clearTimeout(Oe);var t=Ce-1;p(++Ce,n,e.contentEl),me(we[t])};(0,o.addEventListener)(u,"click",m),(0,o.addEventListener)(f,"click",v),(0,g.disableFocusOnClick)(u,this.contentEl),(0,g.disableFocusOnClick)(f,this.contentEl),(0,o.addEnterKeyDownListener)(u,m),(0,o.addEnterKeyDownListener)(f,v),(0,E.removeCicularTabsWrapperListener)(ae),(0,E.checkHasOverlay)(n.content.overlayColor,n.content.overlayFill)&&(ae=(0,E.addCircularTabListener)(function(){n.content.cyclic?(0,g.focusElement)(u):1===Ce?(0,g.focusElement)(f):(0,g.focusElement)(u)})),u.setAttribute("tabindex",S.TAB_INDEX_START);var y=(0,E.setTabIndexes)(this.contentEl,S.TAB_INDEX_START+1);(0,E.addTabbableEnterListener)(),f.setAttribute("tabindex",y),p(Ce,n,this.contentEl),ie.positionElement(this.contentEl,null,"center","center"),n.content.carouselSlideList.forEach(function(t){(0,E.listenToLinksClicks)(e.rootEl.querySelector("#slide"+t.id),n,{stepId:t.id,stepName:t.name})}),(0,b.getConfig)("clientSideEngagementTracking")&&t(n,1),r&&r(n,this.contentEl),(0,E.sendDesktopResize)(this.contentEl,n)},afterClose:function(){(0,b.getBody)().classList.add("apt-vex"),_e?(0,v.internalApt)("engagementCompletedClosed"):(0,v.internalApt)("engagementDroppedClosed"),(0,E.removeCicularTabsWrapperListener)(ae),(0,a.sendEngagementClosedEvent)()},beforeClose:function(){try{(0,a.handleEngagementFinish)("IN_APP_CAROUSEL"),(0,E.removeTabbableEnterListener)()}catch(e){i.logger.logInternalError(e,"Error in before closing slider")}}})},this.close=function(){Ae&&Ae.close()},se=se.bind(this),p=p.bind(this)};t.default=se},function(e,t,n){"use strict";function r(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.htmlElements,d=e.htmlLangAddition;return l.sort(),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,htmlElements:c,htmlLangAddition:d}}function o(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.footer,d=e.buttonType,u=e.url,p=e.targetUrl,f=e.transitionType,h=e.transitionTimeout,m=e.overlayColor,v=e.overlayFill,k=e.modal,I=e.overlayPadding,A=e.steps,O=e.widgetEnabled,N=e.widgetTitle,L=e.widgetDescription,_=e.category,F=e.endButtonText,D=e.restartButtonText,B=e.nextButtonText,R=e.backButtonText,P=e.getStartedButtonText,M=e.skipButtonText,U=e.stepCounterLabelText,j=e.borderRadius,H=e.completionClosingAction,$=e.completionClosingRedirectUrl,V=e.interruptClosingAction,K=e.interruptClosingRedirectUrl,q=e.showStepCounter,W=e.skipButton,z=e.startButton;l.sort();var G=A.map(function(e){var t=g(e,b);return t.textRule=g(e.textRule,y),t.textRule&&t.textRule.values&&t.textRule.values.sort(),t.navigation=g(e.navigation,E),t.shadowSettings=g(e.shadowSettings,x),t.overlay=g(e.overlay,S),t.hotspotSettings=g(e.hotspotSettings,C),t});return G.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,footer:c,buttonType:d,url:u,targetUrl:p,transitionType:f,transitionTimeout:h,overlayColor:m,overlayFill:v,modal:k,overlayPadding:I,steps:G,widgetEnabled:O,widgetTitle:N,widgetDescription:L,category:g(_,w),endButtonText:F,restartButtonText:D,nextButtonText:B,backButtonText:R,getStartedButtonText:P,skipButtonText:M,stepCounterLabelText:U,borderRadius:j,completionClosingAction:H,completionClosingRedirectUrl:$,interruptClosingAction:V,interruptClosingRedirectUrl:K,showStepCounter:q,skipButton:g(W,T),startButton:g(z,T)}}function i(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.defaultHeight,d=e.defaultWidth,u=e.transitionType,p=e.interval,f=e.hideNavigation,b=e.cyclic,y=e.overlayColor,E=e.overlayFill,S=e.carouselNavigation,C=e.carouselSlideList,w=e.borderRadius,T=e.completionClosingAction,x=e.completionClosingRedirectUrl,k=e.interruptClosingAction,I=e.interruptClosingRedirectUrl,A=e.zIndex;l.sort();var O=g(S,h),N=g(S.lastSlideSettings,m);O.lastSlideSettings=N;var L=C.map(function(e){return g(e,v)});return L.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,defaultHeight:c,defaultWidth:d,transitionType:u,interval:p,hideNavigation:f,cyclic:b,overlayColor:y,overlayFill:E,carouselNavigation:O,carouselSlideList:L,borderRadius:w,completionClosingAction:T,completionClosingRedirectUrl:x,interruptClosingAction:k,interruptClosingRedirectUrl:I,zIndex:A}}function a(e){var t=e.id,n=e.type,r=e.sequenceNumber,o=e.height,i=e.width,a=e.overlayColor,s=e.overlayFill,l=e.verticalPosition,c=e.horizontalPosition,d=e.style,u=e.question,p=e.submitButtonTextColor,f=e.submitButtonBackgroundColor,h=e.submitButtonBorderColor,m=e.submitButtonBorderRadius,v=e.submitButtonBorderWidth,b=e.answers,y=e.maxSelectionNumber,E=e.minSelectionNumber,S=e.numberColor,C=e.numberSize,w=e.numberFontFamily,T=e.showQuestionNumber,x=e.buttonText,I=b.map(function(e){return g(e,k)});return I.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,type:n,sequenceNumber:r,height:o,width:i,overlayColor:a,overlayFill:s,verticalPosition:l,horizontalPosition:c,style:d,question:u,submitButtonTextColor:p,submitButtonBackgroundColor:f,submitButtonBorderColor:h,submitButtonBorderRadius:m,submitButtonBorderWidth:v,answers:I,maxSelectionNumber:y,minSelectionNumber:E,numberColor:S,numberSize:C,numberFontFamily:w,showQuestionNumber:T,buttonText:x}}function s(e){return{id:e.id,type:e.type,sequenceNumber:e.sequenceNumber,height:e.height,width:e.width,overlayColor:e.overlayColor,overlayFill:e.overlayFill,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,style:e.style,question:e.question,submitButtonTextColor:e.submitButtonTextColor,submitButtonBackgroundColor:e.submitButtonBackgroundColor,submitButtonBorderColor:e.submitButtonBorderColor,submitButtonBorderRadius:e.submitButtonBorderRadius,submitButtonBorderWidth:e.submitButtonBorderWidth,numberColor:e.numberColor,numberSize:e.numberSize,numberFontFamily:e.numberFontFamily,showQuestionNumber:e.showQuestionNumber,buttonText:e.buttonText,placeholderText:e.placeholderText,isCommentMandatory:e.isCommentMandatory,minCommentLength:e.minCommentLength,maxCommentLength:e.maxCommentLength}}function l(e){return{id:e.id,type:e.type,sequenceNumber:e.sequenceNumber,height:e.height,width:e.width,overlayColor:e.overlayColor,overlayFill:e.overlayFill,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,style:e.style,html:e.html,closeButtonTextColor:e.closeButtonTextColor,closeButtonBackgroundColor:e.closeButtonBackgroundColor,closeButtonBorderRadius:e.closeButtonBorderRadius,closeButtonBorderWidth:e.closeButtonBorderWidth,closeButtonBorderColor:e.closeButtonBorderColor,closeButtonBorderText:e.closeButtonBorderText,buttonText:e.buttonText}}function c(e){return{id:e.id,type:e.type,sequenceNumber:e.sequenceNumber,height:e.height,width:e.width,overlayColor:e.overlayColor,overlayFill:e.overlayFill,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,style:e.style,titleHtml:e.titleHtml,textHtml:e.textHtml,buttonsTextColor:e.buttonsTextColor,buttonsBackgroundColor:e.buttonsBackgroundColor,buttonsBorderWidth:e.buttonsBorderWidth,buttonsBorderColor:e.buttonsBorderColor,buttonsBorderRadius:e.buttonsBorderRadius,selectedButtonsBackgroundColor:e.selectedButtonsBackgroundColor,selectedButtonsTextColor:e.selectedButtonsTextColor,selectedButtonsBorderWidth:e.selectedButtonsBorderWidth,selectedButtonsBorderColor:e.selectedButtonsBorderColor,notSatisfiedHtml:e.notSatisfiedHtml,satisfiedHtml:e.satisfiedHtml,detractorsComment:e.detractorsComment,passivesComment:e.passivesComment,promotersComment:e.promotersComment,submitButtonTextColor:e.submitButtonTextColor,submitButtonBackgroundColor:e.submitButtonBackgroundColor,submitButtonBorderColor:e.submitButtonBorderColor,submitButtonBorderRadius:e.submitButtonBorderRadius,submitButtonBorderWidth:e.submitButtonBorderWidth,showDynamicComment:e.showDynamicComment,defaultComment:e.defaultComment,positiveButtonTextColor:e.positiveButtonTextColor,positiveButtonBackgroundColor:e.positiveButtonBackgroundColor,positiveButtonBorderColor:e.positiveButtonBorderColor,positiveButtonBorderWidth:e.positiveButtonBorderWidth,negativeButtonTextColor:e.negativeButtonTextColor,negativeButtonBackgroundColor:e.negativeButtonBackgroundColor,negativeButtonBorderColor:e.negativeButtonBorderColor,negativeButtonBorderWidth:e.negativeButtonBorderWidth,buttonText:e.buttonText,placeholderText:e.placeholderText,isCommentMandatory:e.isCommentMandatory,minCommentLength:e.minCommentLength,maxCommentLength:e.maxCommentLength,surveyScoreType:e.surveyScoreType,neutralButtonTextColor:e.neutralButtonTextColor,neutralButtonBackgroundColor:e.neutralButtonBackgroundColor,neutralButtonBorderColor:e.neutralButtonBorderColor,neutralButtonBorderWidth:e.neutralButtonBorderWidth}}function d(e){switch(e.type){case"CONTENT":return l(e);case"SCORE":case"BOOLEAN":return c(e);case"OPEN_TEXT":return s(e);case"MULTIPLE_CHOICE_QUESTION":return a(e);default:return e}}function u(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.borderRadius,u=e.overlayColor,p=e.overlayFill,f=e.viewType,h=e.verticalPosition,m=e.horizontalPosition,v=e.positionTopDelta,b=e.positionLeftDelta,y=e.backgroundColor,E=e.backgroundFill,S=e.height,C=e.width,w=e.showContactMeMessage,T=e.autoHeight,k=e.showShadow,I=e.showFooter,A=e.mergeFirstSteps,O=e.shadowSettings,N=e.barPosition,L=e.barOffset,_=e.contactMeMessage,F=e.footer,D=e.minCharsValidationText,B=e.maxCharsValidationText,R=e.mandatoryValidationText,P=e.maxAnswersValidationText,M=e.minAnswersValidationText,U=e.zIndex,j=e.steps;l.sort();var H=g(O,x),$=j.map(function(e){return d(e)});return $.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,borderRadius:c,overlayColor:u,overlayFill:p,viewType:f,verticalPosition:h,horizontalPosition:m,positionTopDelta:v,positionLeftDelta:b,backgroundColor:y,backgroundFill:E,height:S,width:C,showContactMeMessage:w,autoHeight:T,showShadow:k,showFooter:I,mergeFirstSteps:A,shadowSettings:H,barPosition:N,barOffset:L,contactMeMessage:_,footer:F,minCharsValidationText:D,maxCharsValidationText:B,mandatoryValidationText:R,maxAnswersValidationText:P,minAnswersValidationText:M,zIndex:U,steps:$}}function p(e,t){if(t)switch(e.contentType){case"IN_APP_DIALOG":return r(e);case"IN_APP_GUIDE":return o(e);case"IN_APP_CAROUSEL":return i(e);case"IN_APP_BOOLEAN_SURVEY":case"IN_APP_SURVEY_NPS":case"IN_APP_CES_SURVEY":case"IN_APP_MULTIPLE_QUESTION_SURVEY":case"IN_APP_RATING_SURVEY":return u(e);default:return e}else switch(e.contentType){case"IN_APP_GUIDE":return e.steps.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber}),e;case"IN_APP_CAROUSEL":return e.carouselSlideList.sort(function(e,t){return e.sequence-t.sequence}),e;case"IN_APP_BOOLEAN_SURVEY":case"IN_APP_SURVEY_NPS":case"IN_APP_CES_SURVEY":case"IN_APP_MULTIPLE_QUESTION_SURVEY":case"IN_APP_RATING_SURVEY":return e.steps.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber}),e;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var f=n(27),g=f.filterProperties,h=["arrowType","color","backgroundColor","backgroundRadius","horizontalOffset","verticalOffset","hidden","lastSlideSettings"],m=["checkmarkType","color","backgroundColor"],v=["id","name","state","sequence","backgroundType","backgroundColor","backgroundImage","backgroundFill","html","height","width","autoHeight","style"],b=["id","content","matchCssSelector","cssSelector","matchTextRule","textRule","backgroundType","backgroundColor","backgroundFill","height","width","positionHorizontal","positionVertical","positionTopDelta","positionLeftDelta","sequenceNumber","type","navigation","autoHeight","shadow","shadowSettings","overlay","hotspotSettings","showPreviousButton","autoScroll","showTitle","titleHtml","dialogViewType","barPosition","barOffset","stickToBadge","style","zIndex","repositionInterval"],y=["operator","values"],E=["labelColor","backgroundFill","backgroundColor","backgroundRadius","nextStepUrl","nextStepNewTab","nextStepTrigger","useElementListener","nextButtonAction","previousButtonAction"],S=["color","fill","modal","padding","blockElement"],C=["spotColor","spotSize","animationColor","animationDelay","animationDuration","animationCount"],w=["name"],T=["enabled","backgroundColor","backgroundFill","showBorder","borderColor","text","textColor","cornerRadius","hoverBackgroundColor","hoverBackgroundFill","hoverTextColor","hoverBorderColor"],x=["color","fill","offsetX","offsetY","blur","spread"],k=["id","text","sequenceNumber"];t.filterAndSortEngagementFieldsV1=p},function(e,t,n){"use strict";function r(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.htmlElements,d=e.htmlLangAddition;return l.sort(),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,htmlElements:c,htmlLangAddition:d}}function o(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.footer,d=e.buttonType,u=e.url,p=e.targetUrl,f=e.transitionType,g=e.transitionTimeout,h=e.overlayColor,m=e.overlayFill,b=e.modal,y=e.overlayPadding,E=e.steps,O=e.widgetEnabled,N=e.widgetTitle,L=e.widgetDescription,_=e.category,F=e.endButtonText,D=e.restartButtonText,B=e.nextButtonText,R=e.backButtonText,P=e.getStartedButtonText,M=e.skipButtonText,U=e.stepCounterLabelText,j=e.borderRadius,H=e.completionClosingAction,$=e.completionClosingRedirectUrl,V=e.interruptClosingAction,K=e.interruptClosingRedirectUrl,q=e.showStepCounter,W=e.skipButton,z=e.startButton;l.sort();var G=E.map(function(e){var t=v(e,S);return t.textRule=v(e.textRule,C),t.textRule&&t.textRule.values&&t.textRule.values.sort(),t.navigation=v(e.navigation,w),t.shadowSettings=v(e.shadowSettings,A),t.overlay=v(e.overlay,T),t.hotspotSettings=v(e.hotspotSettings,x),t});return G.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,footer:c,buttonType:d,url:u,targetUrl:p,transitionType:f,transitionTimeout:g,overlayColor:h,overlayFill:m,modal:b,overlayPadding:y,steps:G,widgetEnabled:O,widgetTitle:N,widgetDescription:L,category:v(_,k),endButtonText:F,restartButtonText:D,nextButtonText:B,backButtonText:R,getStartedButtonText:P,skipButtonText:M,stepCounterLabelText:U,borderRadius:j,completionClosingAction:H,completionClosingRedirectUrl:$,interruptClosingAction:V,interruptClosingRedirectUrl:K,showStepCounter:q,skipButton:v(W,I),startButton:v(z,I)}}function i(e){var t=e.id,n=e.contentType,r=e.deviceType,o=e.coreStyling,i=e.overrideStyling,a=e.engagementCoreStyling,s=e.defaultLanguage,l=e.deviceContentLanguagesList,c=e.defaultHeight,d=e.defaultWidth,u=e.transitionType,p=e.interval,f=e.hideNavigation,g=e.cyclic,h=e.overlayColor,m=e.overlayFill,S=e.carouselNavigation,C=e.carouselSlideList,w=e.borderRadius,T=e.completionClosingAction,x=e.completionClosingRedirectUrl,k=e.interruptClosingAction,I=e.interruptClosingRedirectUrl,A=e.zIndex;l.sort();var O=v(S,b),N=v(S.lastSlideSettings,y);O.lastSlideSettings=N;var L=C.map(function(e){return v(e,E)});return L.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,contentType:n,deviceType:r,coreStyling:o,overrideStyling:i,engagementCoreStyling:a,defaultLanguage:s,deviceContentLanguagesList:l,defaultHeight:c,defaultWidth:d,transitionType:u,interval:p,hideNavigation:f,cyclic:g,overlayColor:h,overlayFill:m,carouselNavigation:O,carouselSlideList:L,borderRadius:w,completionClosingAction:T,completionClosingRedirectUrl:x,interruptClosingAction:k,interruptClosingRedirectUrl:I,zIndex:A}}function a(e){var t=e.id,n=e.type,r=e.sequenceNumber,o=e.height,i=e.width,a=e.overlayColor,s=e.overlayFill,l=e.verticalPosition,c=e.horizontalPosition,d=e.style,u=e.surveyPageId,p=e.question,f=e.submitButtonTextColor,g=e.submitButtonBackgroundColor,h=e.submitButtonBorderColor,m=e.submitButtonBorderRadius,b=e.submitButtonBorderWidth,y=e.answers,E=e.maxSelectionNumber,S=e.minSelectionNumber,C=e.numberColor,w=e.numberSize,T=e.numberFontFamily,x=e.showQuestionNumber,k=e.buttonText,I=y.map(function(e){return v(e,O)});return I.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,type:n,sequenceNumber:r,height:o,width:i,overlayColor:a,overlayFill:s,verticalPosition:l,horizontalPosition:c,style:d,surveyPageId:u,question:p,submitButtonTextColor:f,submitButtonBackgroundColor:g,submitButtonBorderColor:h,submitButtonBorderRadius:m,submitButtonBorderWidth:b,answers:I,maxSelectionNumber:E,minSelectionNumber:S,numberColor:C,numberSize:w,numberFontFamily:T,showQuestionNumber:x,buttonText:k}}function s(e){return{id:e.id,type:e.type,sequenceNumber:e.sequenceNumber,height:e.height,width:e.width,overlayColor:e.overlayColor,overlayFill:e.overlayFill,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,style:e.style,surveyPageId:e.surveyPageId,question:e.question,submitButtonTextColor:e.submitButtonTextColor,submitButtonBackgroundColor:e.submitButtonBackgroundColor,submitButtonBorderColor:e.submitButtonBorderColor,submitButtonBorderRadius:e.submitButtonBorderRadius,submitButtonBorderWidth:e.submitButtonBorderWidth,numberColor:e.numberColor,numberSize:e.numberSize,numberFontFamily:e.numberFontFamily,showQuestionNumber:e.showQuestionNumber,buttonText:e.buttonText,placeholderText:e.placeholderText,isCommentMandatory:e.isCommentMandatory,minCommentLength:e.minCommentLength,maxCommentLength:e.maxCommentLength}}function l(e){return{id:e.id,type:e.type,sequenceNumber:e.sequenceNumber,height:e.height,width:e.width,overlayColor:e.overlayColor,overlayFill:e.overlayFill,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,style:e.style,surveyPageId:e.surveyPageId,html:e.html,closeButtonTextColor:e.closeButtonTextColor,closeButtonBackgroundColor:e.closeButtonBackgroundColor,closeButtonBorderRadius:e.closeButtonBorderRadius,closeButtonBorderWidth:e.closeButtonBorderWidth,closeButtonBorderColor:e.closeButtonBorderColor,closeButtonBorderText:e.closeButtonBorderText,buttonText:e.buttonText}}function c(e){return{id:e.id,type:e.type,sequenceNumber:e.sequenceNumber,height:e.height,width:e.width,overlayColor:e.overlayColor,overlayFill:e.overlayFill,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,style:e.style,titleHtml:e.titleHtml,textHtml:e.textHtml,buttonsTextColor:e.buttonsTextColor,buttonsBackgroundColor:e.buttonsBackgroundColor,buttonsBorderWidth:e.buttonsBorderWidth,buttonsBorderColor:e.buttonsBorderColor,buttonsBorderRadius:e.buttonsBorderRadius,selectedButtonsBackgroundColor:e.selectedButtonsBackgroundColor,selectedButtonsTextColor:e.selectedButtonsTextColor,selectedButtonsBorderWidth:e.selectedButtonsBorderWidth,selectedButtonsBorderColor:e.selectedButtonsBorderColor,notSatisfiedHtml:e.notSatisfiedHtml,satisfiedHtml:e.satisfiedHtml,detractorsComment:e.detractorsComment,passivesComment:e.passivesComment,promotersComment:e.promotersComment,submitButtonTextColor:e.submitButtonTextColor,submitButtonBackgroundColor:e.submitButtonBackgroundColor,submitButtonBorderColor:e.submitButtonBorderColor,submitButtonBorderRadius:e.submitButtonBorderRadius,submitButtonBorderWidth:e.submitButtonBorderWidth,showDynamicComment:e.showDynamicComment,defaultComment:e.defaultComment,positiveButtonTextColor:e.positiveButtonTextColor,positiveButtonBackgroundColor:e.positiveButtonBackgroundColor,positiveButtonBorderColor:e.positiveButtonBorderColor,positiveButtonBorderWidth:e.positiveButtonBorderWidth,negativeButtonTextColor:e.negativeButtonTextColor,negativeButtonBackgroundColor:e.negativeButtonBackgroundColor,negativeButtonBorderColor:e.negativeButtonBorderColor,negativeButtonBorderWidth:e.negativeButtonBorderWidth,buttonText:e.buttonText,placeholderText:e.placeholderText,isCommentMandatory:e.isCommentMandatory,minCommentLength:e.minCommentLength,maxCommentLength:e.maxCommentLength,surveyScoreType:e.surveyScoreType,neutralButtonTextColor:e.neutralButtonTextColor,neutralButtonBackgroundColor:e.neutralButtonBackgroundColor,neutralButtonBorderColor:e.neutralButtonBorderColor,neutralButtonBorderWidth:e.neutralButtonBorderWidth}}function d(e){var t=c(e),n=e.surveyPageId,r=e.minAnswer,o=e.maxAnswer,i=e.showQuestionNumber,a=e.numberColor,s=e.numberSize,l=e.numberFontFamily;return Object.assign({},t,{surveyPageId:n,minAnswer:r,maxAnswer:o,showQuestionNumber:i,numberColor:a,numberSize:s,numberFontFamily:l})}function u(e){switch(e.type){case"CONTENT":return l(e);case"SCORE":case"BOOLEAN":return c(e);case"DYNAMIC_RATING_STEP":return d(e);case"OPEN_TEXT":return s(e);case"MULTIPLE_CHOICE_QUESTION":return a(e);default:return e}}function p(e){return{enabled:e.enabled,backgroundColor:e.backgroundColor,backgroundFill:e.backgroundFill,borderColor:e.borderColor,hoverBackgroundColor:e.hoverBackgroundColor,hoverBackgroundFill:e.hoverBackgroundFill,hoverBorderColor:e.hoverBorderColor,showBorder:e.showBorder,text:e.text,textColor:e.textColor,hoverTextColor:e.hoverTextColor,cornerRadius:e.cornerRadius}}function f(e){var t=e.id,n=e.title,r=e.sequenceNumber,o=e.height,i=e.width,a=e.verticalPosition,s=e.horizontalPosition,l=e.buttonSetting,c=e.style;return{id:t,title:n,sequenceNumber:r,height:o,width:i,verticalPosition:a,horizontalPosition:s,buttonSetting:p(l),style:c}}function g(e){var t=e.id,n=e.contentType,r=e.contentSubType,o=e.deviceType,i=e.coreStyling,a=e.overrideStyling,s=e.engagementCoreStyling,l=e.defaultLanguage,c=e.deviceContentLanguagesList,d=e.borderRadius,p=e.overlayColor,g=e.overlayFill,h=e.viewType,m=e.verticalPosition,b=e.horizontalPosition,y=e.positionTopDelta,E=e.positionLeftDelta,S=e.backgroundColor,C=e.backgroundFill,w=e.height,T=e.width,x=e.showContactMeMessage,k=e.autoHeight,I=e.showShadow,O=e.showFooter,N=e.mergeFirstSteps,L=e.shadowSettings,_=e.barPosition,F=e.barOffset,D=e.contactMeMessage,B=e.footer,R=e.minCharsValidationText,P=e.maxCharsValidationText,M=e.mandatoryValidationText,U=e.maxAnswersValidationText,j=e.minAnswersValidationText,H=e.zIndex,$=e.steps,V=e.surveyPages,K=e.orientation;c.sort();var q=v(L,A),W=$.map(function(e){return u(e)});W.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0});var z=V.map(function(e){return f(e)});return z.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{id:t,contentType:n,deviceType:o,coreStyling:i,overrideStyling:a,engagementCoreStyling:s,defaultLanguage:l,deviceContentLanguagesList:c,contentSubType:r,borderRadius:d,overlayColor:p,overlayFill:g,viewType:h,verticalPosition:m,horizontalPosition:b,positionTopDelta:y,positionLeftDelta:E,backgroundColor:S,backgroundFill:C,height:w,width:T,showContactMeMessage:x,autoHeight:k,showShadow:I,showFooter:O,mergeFirstSteps:N,shadowSettings:q,barPosition:_,barOffset:F,contactMeMessage:D,footer:B,minCharsValidationText:R,maxCharsValidationText:P,mandatoryValidationText:M,maxAnswersValidationText:U,minAnswersValidationText:j,zIndex:H,steps:W,surveyPages:z,orientation:K}}function h(e){switch(e.contentType){case"IN_APP_DIALOG":return r(e);case"IN_APP_GUIDE":return o(e);case"IN_APP_CAROUSEL":return i(e);case"IN_APP_BOOLEAN_SURVEY":case"IN_APP_SURVEY_NPS":case"IN_APP_CES_SURVEY":case"IN_APP_MULTIPLE_QUESTION_SURVEY":case"IN_APP_RATING_SURVEY":return g(e);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var m=n(27),v=m.filterProperties,b=["arrowType","color","backgroundColor","backgroundRadius","horizontalOffset","verticalOffset","hidden","lastSlideSettings"],y=["checkmarkType","color","backgroundColor"],E=["id","name","state","sequence","backgroundType","backgroundColor","backgroundImage","backgroundFill","html","height","width","autoHeight","style"],S=["id","content","matchCssSelector","cssSelector","matchTextRule","textRule","backgroundType","backgroundColor","backgroundFill","height","width","positionHorizontal","positionVertical","positionTopDelta","positionLeftDelta","sequenceNumber","type","navigation","autoHeight","shadow","shadowSettings","overlay","hotspotSettings","showPreviousButton","autoScroll","showTitle","titleHtml","dialogViewType","barPosition","barOffset","stickToBadge","style","zIndex","repositionInterval"],C=["operator","values"],w=["labelColor","backgroundFill","backgroundColor","backgroundRadius","nextStepUrl","nextStepNewTab","nextStepTrigger","useElementListener","nextButtonAction","previousButtonAction"],T=["color","fill","modal","padding","blockElement"],x=["spotColor","spotSize","animationColor","animationDelay","animationDuration","animationCount"],k=["name"],I=["enabled","backgroundColor","backgroundFill","showBorder","borderColor","text","textColor","cornerRadius","hoverBackgroundColor","hoverBackgroundFill","hoverTextColor","hoverBorderColor"],A=["color","fill","offsetX","offsetY","blur","spread"],O=["id","text","sequenceNumber"];t.filterAndSortEngagementFieldsV3=h},function(e,t,n){"use strict";function r(e,t){var n=(0,o.getCachedConfig)(i.CHECKSUM_VERSION);return void 0===n||n<=2?(0,a.filterAndSortEngagementFieldsV1)(e,t):3===n?(0,s.filterAndSortEngagementFieldsV3)(e,t):(0,a.filterAndSortEngagementFieldsV1)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterAndSortEngagementFields=void 0;var o=n(2),i=n(36),a=n(105),s=n(106);t.filterAndSortEngagementFields=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(33),a=r(i),s=n(10),l=n(25),c=n(11),d=n(4),u=n(16),p=n(7),f=n(12),g=n(32),h=n(3),m=n(24),v=n(5),b=n(14),y=r(b),E=n(2),S=n(9),C=n(54),w=n(20),T=n(8),x=n(18),k=n(19),I=n(21),A=n(23),O=n(31);O.defaultOptions.className="vex-theme-os";var N="classList",L=new a.default,_=null,F=void 0,D=function(){function e(e,t,n){if(!y.default.isEditorMode()){var r=E.trackMultiStepEndpoint,i=[],a=A.UserData.getSessionId();if(!0!==D[a]){2===t&&(D[a]=!0),i=(0,o.addParameters)(d.eventTrackData[v.cacheGetAll](),i),(0,o.addParameters)({ei:e.engagementId||null,ecoi:e.content.id||null,evi:e.matchEventId||null,ent:1,ems:t||null,acci:e.accountId,exi:e.executionId,ext:e.executionTimestamp,at:e.activationType||"a",cl:e.contentLocale},i),n&&"kc"===e.activationType&&(0,o.addParameters)(n,i);var s=(0,k.getGlobalContext)(),l=(0,w.getChannel)(d.eventTrackData[v.cacheGet](d.productIdParameter)),p=void 0;s&&(p={gcx:JSON.stringify(s)},l!==T.DESKTOP_CHANNEL&&(0,o.addParameters)(p,i)),i=(0,o.addParameters)((0,I.getWebContext)(),i),l==T.DESKTOP_CHANNEL?(0,u.desktopTrackEngagementState)(i,p):(r+="?"+(0,o.convert2Parameters)(i),c.AjaxUtil.getData(r)),S.internalEventListener.dispatchEvent("engagementCompleted",(0,u.getExternalEvent)(e,"Completed"))}}}function t(e,t){(0,w.isDesktop)()&&(0,u.addLinkListener)(e,t,null,0)}function n(e,t){var n=e&&e.contentBackground;n&&(t.style.backgroundColor=e.contentBackground),n&&e.backgroundFill&&(t.style.backgroundColor=(0,o.hexToRgba)(e.contentBackground,e.backgroundFill/100),(0,o.checkDarkColor)(e.contentBackground)&&t.querySelector(".aptr-engagement-close-btn").classList.add("apt-engagement-close-btn-bright"))}function r(e,t){t.borderRadius&&"DIALOG"===t.viewType&&(e.style.borderRadius=t.borderRadius+"px")}function i(e,t){return function(){try{if(e.closingAction&&"REDIRECT"===e.closingAction&&e.closeUrl)if((0,w.isDesktop)())S.internalEventListener.dispatchEvent("engagementLinkClick",{engagementType:t.content.contentType,engagementId:t.engagementId,link:e.closeUrl,close:!0});else{var n=(0,g.resolveUrlWithPlaceholders)(document.location.href,e.closeUrl);n!==document.location.href&&(document.location.href=n)}}catch(e){h.logger.logInternalError(e,"Error in dialog close handler")}}}function a(a,d,g,v,b,S){var w=(0,o.getEscHandlerCallback)(i(a,g)),T=void 0,x=void 0,k={appendLocation:(0,E.getConfig)("framesetMode")?"html":"body",enableModalBodyScroll:(0,E.getConfig)("enableModalBodyScroll"),closeClassName:"aptr-engagement-close-btn px-close-button",unsafeContent:d.outerHTML,overlayClosesOnClick:!1,showCloseButton:!0,afterClose:function(){(0,E.getBody)().classList.remove("apt-vex"),clearTimeout(x),T&&clearTimeout(T),(0,m.internalApt)("engagementCompletedClosed"),(0,u.removeCicularTabsWrapperListener)(F),(0,l.sendEngagementClosedEvent)()},beforeClose:function(){try{(0,o.removeEventListener)(document,"keydown",w),(0,l.handleEngagementFinish)("IN_APP_DIALOG")}catch(e){h.logger.logInternalError(e,"Error before close dialog")}},afterOpen:function(){var l=this;if((0,E.getConfig)("enableModalBodyScroll")&&(0,E.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex"),this.contentEl[N].add("apt-dialog-popup"),this.contentEl[N].add("px-engagement-wrapper-dialog"),this.contentEl[N].add("px-engagement-wrapper"),(0,p.addStyleTag)(this.contentEl,g.content.coreStyling,"px-engagement-wrapper",".apt-vex.vex.vex-theme-os"),(0,p.addStyleTag)(this.contentEl,g.content.engagementCoreStyling,"px-engagement-wrapper-dialog",".apt-vex.vex.vex-theme-os"),(0,p.addStyleTag)(this.contentEl,g.content.overrideStyling,"px-engagement-wrapper-dialog",".apt-vex.vex.vex-theme-os"),this.contentEl.setAttribute("data-apt-disable-selector",!0),!a.isAutoHeight&&a.height&&(this.contentEl.style.height=a.height+"px",this.contentEl.querySelector(".apt-dialog-content-wrapper").style.height=a.height+"px"),a.zIndex>0&&(this.rootEl.style.zIndex=a.zIndex,this.overlayEl.style.zIndex=a.zIndex,this.contentEl.style.zIndex=a.zIndex),"BAR"===a.viewType){this.contentEl.style.position="fixed",this.contentEl[N].add("apt-dialog-bar"),this.contentEl.style.width=(0,s.getPageWidth)()+"px";var d=(a.barOffset||0)+"px";"TOP"===a.barPosition?this.contentEl.style.top=d:this.contentEl.style.bottom=d}else{a.width&&(this.contentEl.style.width=a.width+"px"),a.isFitToWidth&&(this.contentEl.style.height=(0,s.getPageHeight)(),this.contentEl.style.width=(0,s.getPageWidth)());var h=a.hPosition,m=a.vPosition;h||(h="center"),m&&"middle"!=m||(m="center"),this.contentEl.style.position="absolute",L.positionElement(this.contentEl,null,h,m),/^\d+$/.test(h)&&(this.contentEl.style.left=h+"px"),/^\d+$/.test(m)&&(this.contentEl.style.top=m+"px")}a.overlayColor&&(this.overlayEl.style.background=(0,o.hexToRgba)(a.overlayColor,a.overlayFill?a.overlayFill/100:0)),(!a.overlayFill||a.overlayFill<1)&&this.rootEl.classList.add("apt-popup-disable-overlay"),n(a,this.contentEl);var b=(0,f.arrayFrom)(this.contentEl.querySelectorAll("a"));if((0,o.isNotEmptyArr)(b))for(var y=0;y<b.length;y++)"_blank"!==b[y].target&&(0,o.addEventListener)(b[y],"click",function(){_.close()});var C=(0,f.arrayFrom)(this.contentEl.querySelectorAll("button")),T=S&&S.recId?S.recId:null;(0,o.isNotEmptyArr)(C)&&C.forEach(function(e){(0,o.addEventListener)(e,"click",function(){var e=(0,u.getEngagementTrackPayload)(g,"ENGAGEMENT_CLICK");e=(0,o.addParameters)({recId:T||null},e);var t=E.engagementTrackEndpoint+"?"+(0,o.convert2Parameters)(e);c.AjaxUtil.getData(t,null,null,null,!0)})}),(0,u.removeCicularTabsWrapperListener)(F),(0,u.checkHasOverlay)(a.overlayColor,a.overlayFill)&&(F=(0,u.addCircularTabListener)(function(){return(0,p.focusElement)(l.contentEl)})),(0,o.addEventListener)(document,"keydown",w),(0,o.addEventListener)(this.closeEl,"click",i(a,g)),r(this.contentEl,a),e(g,2),(0,u.listenToLinksClicks)(this.rootEl,g),v&&v(g,this.contentEl),(0,u.sendDesktopResize)(this.contentEl,g),t(this.contentEl,g)}},I=a.timeout?a.timeout*o.MILLISEC:0,A=a.delay?a.delay*o.MILLISEC:0;x=setTimeout(function(){var e={url:(0,o.getPageUrl)()};if(!1===b&&!y.default.isPreview()&&!(0,o.isBlank)(g.rules)&&!(0,C.matchMultiTypeRules)(JSON.parse(g.rules),e))return h.logger.log("did not have client side match for engagement rules "+g.rules+", current URL: "+e),void(0,l.handleEngagementFinish)("IN_APP_DIALOG");_=O.open(k),I>0&&(T=setTimeout(function(){O.close(_)},I))},A)}function b(t,r,i){var a=t.embeddedSelector,s=(0,x.findElementsInShadowDom)(a,document);if(1!==s.length)return void h.logger.log("Could not embed Dialog "+i.engagementId+". There were "+s.length+" elements with selector "+a+". Should have only 1.");var c=s[0],d=c.querySelector(".apt-dialog-content-wrapper");d&&c.removeChild(d),c.appendChild(r),!t.isAutoHeight&&t.height&&(c.style.height=t.height+"px",c.querySelector(".apt-dialog-content-wrapper").style.height=t.height+"px"),c.style.width="BAR"===t.viewType?"100%":t.width+"px",c.style.position="relative",n(t,r);var p=(0,o.createElement)("div","apt-embedded-close");(0,o.addEventListener)(p,"click",function(){c.removeChild(r),c.removeAttribute("style"),(0,l.handleEngagementFinish)("IN_APP_DIALOG")}),r.appendChild(p),e(i,2),(0,u.listenToLinksClicks)(r,i)}var D={};this.drawDialog=function(e,t,n,r){var i=e.content.htmlElements,s=e.content.settings,l=(0,o.createElement)("div","apt-dialog-content-wrapper");(0,p.isElement)(i)?(l.appendChild(i),i=l):(l.innerHTML=(0,p.addNonceToDomString)(i),i=l),(0,u.setTabIndexes)(i,T.TAB_INDEX_START),(0,u.addTabbableEnterListener)(),s.embedded?b(s,i,e):a(s,i,e,t,n,r)},this.close=function(){_&&_.close(),(0,u.removeTabbableEnterListener)()}};t.default=D},function(e,t,n){"use strict";function r(){function e(e,t,n){var r=t.backgroundColor,i=t.backgroundFill,a=t.textColor,s=t.cornerRadius,l=t.hoverBackgroundColor,c=t.hoverBackgroundFill,d=t.hoverTextColor,u=".px-step-navigation-"+n+" {",p=".px-step-navigation-"+n+":hover {";u+="background-color: "+(i>-1?(0,o.hexToRgba)(r,i/100):r)+";",p+="background-color: "+(c>-1?(0,o.hexToRgba)(l,c/100):l)+";",u+="color: "+a+";",p+="color: "+d+";",u+="border-radius: "+s+"px;",u+="}",p+="}",(0,o.addStyle)(u+p,"px-step-navigation-"+n,e)}function t(e,t,n){e.backgroundColor&&(t.style.backgroundColor=e.backgroundColor)&&(n.style.backgroundColor=e.backgroundColor),e.backgroundFill&&(t.style.backgroundColor=(0,o.hexToRgba)(e.backgroundColor,e.backgroundFill/100))&&(n.style.backgroundColor=(0,o.hexToRgba)(e.backgroundColor,e.backgroundFill/100)),e.backgroundRadius&&(t.style.borderRadius=e.backgroundRadius+"px")&&(n.style.borderRadius=e.backgroundRadius+"px"),e.labelColor&&(t.style.color=e.labelColor)&&(n.style.color=e.labelColor)}function n(e){var t=e.globalSettings,n=e.stepSettings,r=e.button;if(r)if(n&&n.shouldOverrideGlobalSettings&&n.fontSettings&&n.fontSettings.fontSize&&"0"!==n.fontSettings.fontSize)r.style.fontSize=n.fontSettings.fontSize+"px";else{var o=t&&t.fontSettings&&t.fontSettings.fontSize||14;r.style.fontSize=o+"px"}}function r(e){var t=e.globalSettings,r=e.stepSettings,i=e.button,a=e.parentElement,s=e.id,l=r.shouldOverrideGlobalSettings?r:t;null===l.backgroundFill||void 0===l.backgroundFill?i.style.backgroundColor=l.backgroundColor?l.backgroundColor:"#ffffff":i.style.backgroundColor=(0,o.hexToRgba)(l.backgroundColor?l.backgroundColor:"#ffffff",l.backgroundFill/100),i.style.color=l.textColor?l.textColor:"#000000",i.style.borderRadius=null===l.cornerRadius||void 0===l.cornerRadius?"0px":l.cornerRadius+"px",l.buttonPaddingSettings&&(null===l.buttonPaddingSettings.top&&null===l.buttonPaddingSettings.bottom&&null===l.buttonPaddingSettings.left&&null===l.buttonPaddingSettings.right||(i.style.padding=(l.buttonPaddingSettings.top||0)+"px \n                "+(l.buttonPaddingSettings.right||0)+"px \n                "+(l.buttonPaddingSettings.bottom||0)+"px \n                "+(l.buttonPaddingSettings.left||0)+"px")),i.style.border=(l.borderWidth||0)+"px solid "+(l.borderColor||"#000"),l.fontSettings&&(i.style.fontFamily="inherit"===l.fontSettings.fontFamily?"inherit":l.fontSettings.fontFamily+", Helvetica",n({globalSettings:t,stepSettings:r,button:i}),i.style.lineHeight=l.fontSettings.fontSize+"px",i.style.fontStyle=l.fontSettings.itallic?"italic":"unset",i.style.fontWeight=l.fontSettings.bold?700:"unset",i.style.textDecoration=l.fontSettings.underlined?"underline":"unset");var c=void 0;c=null===l.hoverBackgroundFill||void 0===l.hoverBackgroundFill?"unset"!==l.hoverBackgroundColor?l.hoverBackgroundColor:"":"unset"!==l.hoverBackgroundColor?(0,o.hexToRgba)(l.hoverBackgroundColor,l.hoverBackgroundFill/100):"";var d="."+s+":hover {\n            color: "+("unset"!==l.hoverTextColor?l.hoverTextColor:"")+" !important;\n            background-color: "+c+" !important;\n            border: "+(l.borderWidth||0)+"px solid "+l.hoverBorderColor+" !important;\n        }";(0,o.addStyle)(d,s,a)}var c=this;this.addSkipButton=function(t,n,r,i,a,l,c,d){if(n.enabled){var u=(0,o.createElement)("div",["px-step-navigation-button","px-step-navigation-skip"],{text:l||n.text||"Skip Tour"});u.setAttribute("tabindex",d),u.setAttribute("role","button"),e(t,n,"skip"),c(u);(t[s](".apt-step-footer-buttons")||t[s](".px-step-navigation-buttons")).appendChild(u),i&&((0,o.addEventListener)(u,"click",a),(0,o.addEnterKeyDownListener)(u,a))}},this.addSnoozeButton=function(t,n,r,i,a,s,l,c){if(n&&n.enabled){var d=(0,o.createElement)("div",["px-step-navigation-button","px-step-navigation-snooze"],{text:a||n.text||"Show me later"});c||(d.style.display="flex",d.style.alignItems="center",d.style.padding="5px"),d.setAttribute("tabindex",l),d.setAttribute("role","button"),e(t,n,"snooze"),s(d);var u=t.querySelector(".apt-step-footer-buttons")||t.querySelector(".px-step-navigation-buttons"),p=u.firstChild;u.insertBefore(d,p),r&&((0,o.addEventListener)(d,"click",i),(0,o.addEnterKeyDownListener)(d,i))}},this.toggleSnooze=function(t,n,r,o,a,s){var l=t.querySelector(".px-step-navigation-snooze");l?((0,i.applyStyle)(l,"display",n?"block":"none"),e(t,r,"snooze")):c.addSnoozeButton(t,r,!1,void 0,o,a,s)},this.toggle=function(t,n,r,o,a,l){var d=t[s](".px-step-navigation-skip");d?((0,i.applyStyle)(d,"display",n?"block":"none"),e(t,r,"skip")):c.addSkipButton(t,r,void 0,!1,void 0,o,a,l)},this.populateNavigationFlags=function(e,t){var n=!1;return(0,a.arrayFrom)(e,function(e){return"DIALOG"!==e.type||0!==e.sequenceNumber&&e.sequenceNumber!==t?e.showCounter=!0:e.showCounter=!1,!n&&l.indexOf(e.type)>-1?(n=!0,e.isFirstStepNonHotspot=!0):e.isFirstStepNonHotspot=!1,e})},this.setStepNavigationV2Style=function(e){var n=e.guideSettings,o=e.stepSettings,i=e.nextButton,a=e.prevButton,s=e.skipButtonDom,l=e.snoozeButtonDom,c=e.footerElement,d=e.stepPrevButtonStyleSettings,u=e.stepNextButtonStyleSettings,p=e.navigation,f=void 0;if(n.navigationV2){var g=void 0;o.overrideFooterSettings?(g=o.footerPaddingSettings,f=o.buttonSpace):(g=n.footerPaddingSettings,f=n.buttonSpace),r({globalSettings:n.nextButton,stepSettings:u,button:i,parentElement:c,id:"px-step-navigation-next"}),i.style.marginLeft=f+"px",s&&(r({globalSettings:n.skipButton,stepSettings:n.skipButton,button:s,parentElement:c,id:"px-step-navigation-skip"}),s.style.marginLeft=f+"px"),r({globalSettings:n.backButton,stepSettings:d,button:a,parentElement:c,id:"px-step-navigation-back"}),g&&(null===g.top&&null===g.right&&null===g.bottom&&null===g.left||(c.style.padding=(g.top||0)+"px \n                                "+(g.right||0)+"px \n                                "+(g.bottom||0)+"px \n                                "+(g.left||0)+"px"))}else t(p,a,i);l&&(r({globalSettings:n.snoozeButton,stepSettings:n.snoozeButton,button:l,parentElement:c,id:"px-step-navigation-snooze"}),void 0!==f&&null!==f&&(a.style.marginLeft=f+"px"),n.navigationV2||(l.style.padding="5px"))}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(10),a=n(12),s="querySelector",l=["DIALOG","TOOLTIP"],c=new r;t.default=c},function(e,t,n){"use strict";function r(){var e=this,t=void 0,n=void 0;this.addListener=function(r,i,s){e.removeListener(),t=function(t){s(t),e.removeListener()},(n=r)&&(n.isDom&&n.element?((0,o.addEventListener)(n.element,"click",t),(0,o.addEventListener)(n.element,"contextmenu",t)):!n.isDom&&n.iframeSource&&a.default.addElementHandler(r.iframeSource,i,"ELEMENT_CLICK",t))},this.removeListener=function(){n&&t&&(n.element&&n.isDom?((0,o.removeEventListener)(n.element,"click",t),(0,o.removeEventListener)(n.element,"contextmenu",t)):!n.isDom&&n.iframeSource&&a.default.removeElementHandlers(n.iframeSource)),n=null,t=null}}Object.defineProperty(t,"__esModule",{value:!0}),t.hotspotEventHandler=void 0;var o=n(0),i=n(17),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.hotspotEventHandler=new r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="";return t+=(e.offsetX?e.offsetX:0)+"px ",t+=(e.offsetY?e.offsetY:0)+"px ",t+=(e.blur?e.blur:0)+"px ",e.fill&&e.color&&(t+=(0,f.hexToRgba)(e.color,e.fill/100)),t}function i(e){return(0,_.disableFocusOnClick)(e,ce)}function a(e,t,n){this.id=e,this.type=t,this.step=n}function s(e,t,n,r,s){function c(e){"DIALOG"===Pe.viewType&&(e.style.borderRadius=Pe.borderRadius+"px")}function u(){var e=$e.contentEl.getBoundingClientRect();pe==e.width&&ue==e.height||("DIALOG"===Pe.viewType&&ne.positionElement($e.contentEl,null,Pe.horizontalPosition,Pe.verticalPosition,Pe.positionTopDelta,Pe.positionLeftDelta),ue=e.height,pe=e.width,P.internalEventListener.dispatchEvent("engagementResize",{engagementType:t.content.contentType,engagementId:t.engagementId,width:e.width,height:e.height}),Ve&&Ve(t,$e.contentEl))}function p(){ie.indexOf(Ue[Be].getSettings().type)>-1&&Re++,Be+=1,E(Ue,Be,Be-1)}function g(){De+=1,E(Ne,De,De-1)}function E(e,n,r){if(e[r].hide(),n>=e.length)return void $e.close();$e.contentEl.appendChild(e[n].render()),(0,M.removeCicularTabsWrapperListener)(re),(0,M.checkHasOverlay)(Pe.overlayColor,Pe.overlayFill)&&(re=(0,M.addCircularTabListener)(e[n].focus)),(0,_.focusElement)(ce),setTimeout(function(){if($e){var e=$e.contentEl.getBoundingClientRect();pe===e.width&&ue===e.height||(ue=e.height,pe=e.width,P.internalEventListener.dispatchEvent("engagementResize",{engagementType:t.content.contentType,engagementId:t.engagementId,width:e.width,height:e.height}))}})}function w(e,t){var n=o(t);e.style.setProperty("filter","drop-shadow("+n+")"),e.style.setProperty("-webkit-filter","drop-shadow("+n+")")}function x(){if(!S.default.isEditorMode()){var n=!1,r=!1,o=(0,L.arrayFrom)(Me,function(e){var t=e.step.getData();return void 0!==t.contactMeAllowed&&(n=t.contactMeAllowed),r=null!==t.selected,{stepId:e.id,score:t.selected,comment:t.comment,questionType:e.type,labels:t.labels||[]}});if(r){var i=(0,f.addParameters)(v.eventTrackData[b.cacheGetAll](),[]);t.accountId&&(i=(0,f.addParameters)({acci:t.accountId},i)),i=(0,f.addParameters)({exi:t.executionId,ext:t.executionTimestamp,at:t.activationType||"a",cl:t.contentLocale},i),i=(0,f.addParameters)((0,U.getWebContext)(),i),Ke&&"kc"===t.activationType&&(0,f.addParameters)(Ke,i),i=(0,f.addParameters)((0,R.addFullStoryInfo)([]),i);var a={ei:t.engagementId,ecoi:t.content.id,ent:t.content.contentType,contactMeAllowed:n,questions:o},s=(0,G.getGlobalContext)();s&&Object.assign(a,{gcx:s});if((0,$.getChannel)(v.eventTrackData[b.cacheGet](v.productIdParameter))==K.DESKTOP_CHANNEL){var l=(0,f.paramToObject)(i,{}),c=V.eventCache.getKey("trackingPayload");Object.assign(a,l,c||{}),m.AjaxUtil.postData(B.desktopEngagementTrackEndpoint+"/survey",a,null,null,null,!0)}else m.AjaxUtil.postData(ae+"?"+(0,f.convert2Parameters)(i),a,null,null,null,!0);je=!0,He=!0,o.forEach(function(n){return P.internalEventListener.dispatchEvent("surveyResponded",(0,M.toExternalEventSurvey)(t,"Responded",e,n))}),P.internalEventListener.dispatchEvent("engagementCompleted",(0,M.toExternalEventSurvey)(t,"Completed"))}}}function I(){p(),x(),je=!0,He=!0}function O(e,n,r){var o=!1;switch(void 0!==n.contactMeAllowed&&(o=n.contactMeAllowed),e.questionType){case"MULTIPLE_CHOICE_QUESTION":e.selectionIds=n.choices;break;case"OPEN_TEXT":e.comment=n.comment;break;case"DYNAMIC_RATING_STEP":Object.assign(e,{questionType:"SCORE",score:n.selected,comment:n.comment,labels:n.labels||[]});break;case"CONTENT":break;default:throw new Error("Survey type not supported")}var i={ei:t.engagementId,ecoi:t.content.id,ent:t.content.contentType,lastStep:r,contactMeAllowed:o};"CONTENT"!==e.questionType&&(i.questions=[e]);var a=(0,G.getGlobalContext)();return a&&Object.assign(i,{gcx:a}),i}function j(){var e=(0,f.addParameters)(v.eventTrackData[b.cacheGetAll](),[]);t.accountId&&(e=(0,f.addParameters)({acci:t.accountId},e)),e=(0,f.addParameters)((0,R.addFullStoryInfo)([]),e),e=(0,f.addParameters)({exi:t.executionId,ext:t.executionTimestamp,at:t.activationType||"a",cl:t.contentLocale},e);(0,f.addParameters)((0,U.getWebContext)(),e);return Ke&&"kc"===t.activationType&&(0,f.addParameters)(Ke,e),Object.assign(e)}function q(){var e=Me[Re],n=Me.length===Re+1;if(He=n,p(),!S.default.isEditorMode()){var r={stepId:e.id,questionType:e.type},o=e.step.getData(),i=j(),a=O(r,o,n);if((0,$.getChannel)(v.eventTrackData[b.cacheGet](v.productIdParameter))==K.DESKTOP_CHANNEL){var s=(0,f.paramToObject)(i,{}),l=V.eventCache.getKey("trackingPayload");Object.assign(a,s,l||{}),m.AjaxUtil.postData(B.desktopEngagementTrackEndpoint+"/survey/step",a,null,null,null,!0)}else m.AjaxUtil.postData(se+"?"+(0,f.convert2Parameters)(i),a,null,null,null,!0);n&&P.internalEventListener.dispatchEvent("engagementCompleted",(0,M.toExternalEventSurvey)(t,"Completed"))}}function Y(){for(var e=void 0,t=0;t<Ne.length;t++)if(e=Ne.length-1-t,!Ne[e].isContentPage())return void(Le=e)}function J(e){var n=B.trackMultiStepEndpoint;if(!0!==He){2===e&&(He=!0);var r=j();(0,f.addParameters)({ei:t.engagementId||null,ecoi:t.content.id||null,ems:e||null,evi:t.matchEventId||null,ent:fe[t.content.contentType]||null,cl:t.contentLocale},r);var o=(0,G.getGlobalContext)();o&&(0,f.addParameters)({gcx:JSON.stringify(o)},r),r=(0,f.addParameters)((0,U.getWebContext)(),r),n+="?"+(0,f.convert2Parameters)(r),m.AjaxUtil.getData(n)}}function me(e){return e.steps.reduce(function(e,t){var n=t.getSettings(),r=t.getData();return r.choices?e[n.id]=r.choices:r.selected&&(e[n.id]=[r.selected]),e},{})}function ve(){try{var e=JSON.parse(r[De].nextStepCondition),t=Ne[De];0===e.stepConditionSet.length&&e.defaultConditionAction.type===ge&&"END_SURVEY"===e.defaultConditionAction.value&&Pe.showContactMeMessage?t.setShowContactMe(Pe.showContactMeMessage):t.setShowContactMe(!1)}catch(e){F.logger.log("setShowContactMeForCurrentPage - error in parsing nextStepCondition "+e)}}function be(e){var t=Ne[e],n=t.getData(),r=n.steps,o=r[r.length-1],i=o.getStepNumber();Ne[De].updateQuestionsNumbers(i+1)}function ye(e,t){var n=(0,Z.evaluateStepConditionFilterForSurvey)(e,t),r=n.value,o=n.type,i=De;return o===he?(De=_e[r],ve(),E(Ne,De,i),be(i)):o===ge&&E(Ne,Ne.length+1,i),o}function Ee(e,t){var n=void 0;try{var r=JSON.parse(e);if(r){n=ye(r,t.isContentPage()?[]:me(t.getData()))}}catch(e){F.logger.log("Error in parsing nextStepCondition "+e)}return n}function Se(e,t,n){var r=e.getSettings();return{step:{stepId:r.id,questionType:r.type},stepData:Object.assign({},{contactMeAllowed:t.contactMeAllowed},n)}}function Ce(e){var n=t.content.surveyVersion;if(t.content.viewType===K.VIEW_TYPE_BAR)if(0===n)e.classList.add("apt-container-bar-and-combine-old");else{var r=t.content.autoHeight;e.classList.add("apt-container-bar-and-combine"),r||e.classList.add("apt-none-auto-height")}}function we(o){var i=o.querySelector(".apt-survey-footer"),a=o.querySelector(".apt-survey-step"),s=(0,f.createElement)("div",["aptr-snooze-container"]),l=n[Be];if((0,M.createSnoozeButton)(t.content.snoozeButton,s,t,l.id,l.sequenceNumber,xe),e===K.IN_APP_MULTIPLE_QUESTION_SURVEY){var c=o.querySelectorAll(".px-survey-page-footer"),d=c[c.length-1],u=r.length>0?o.querySelector(".page-submit"):o.querySelector(".apt-survey-submit");u.style.margin="unset",d.insertBefore(s,u)}else if(K.SCORE_SURVEY_TYPES.indexOf(e)>-1&&t.content.mergeFirstSteps){var p=o.querySelector(".px-submit-container"),g=o.querySelector(".apt-survey-submit");p.insertBefore(s,g)}else i?a.insertBefore(s,i):a.appendChild(s)}function Te(){var e=De,n=Ne[De],o=void 0,i=r[e].nextStepCondition;i?o=Ee(i,n):g();var a=Ne.length===De+1;if(He=a,!S.default.isEditorMode()){var s=j(),l=[],c=n.getData(),d=n.isContentPage();if(!d||o===ge){var u=d&&o===ge||Le===e;if(s=(0,f.addParameters)({lqsp:u},s),d&&o===ge){var p=Se(c.steps[0],c,{}),h=p.step,v=p.stepData,b=O(h,v,a);m.AjaxUtil.postData(B.trackSurveyCompleteEndpoint+"?"+(0,f.convert2Parameters)(s),b,null,null,null,!0)}else c.steps.forEach(function(e){var t=Se(e,c,e.getData()),n=t.step,r=t.stepData,o=O(n,r,a);l.push(o)}),m.AjaxUtil.postData(le+"?"+(0,f.convert2Parameters)(s),l,null,null,null,!0);a&&P.internalEventListener.dispatchEvent("engagementCompleted",(0,M.toExternalEventSurvey)(t,"Completed"))}}}function xe(){$e.close()}function ke(e,t){return e.sequenceNumber-t.sequenceNumber}function Ie(e,t,n,r,o){o=o||t.type;var i=H.default.SanitizeHtml(e.getHtml());if(i.isValid){if(Me.push(new a(t.id,o,e)),Ue.push(e),r)return++n}else Fe.push(i.errors);return n}r=r||[];var Ae=t.content,Oe=["IN_APP_SURVEY_NPS","IN_APP_CES_SURVEY","IN_APP_RATING_SURVEY","IN_APP_BOOLEAN_SURVEY"],Ne=[],Le=void 0,_e={},Fe=void 0,De=0,Be=0,Re=0,Pe={},Me=[],Ue=[],je=!1,He=!1,$e=null,Ve=null,Ke=s;!function(e){Object.entries(e).forEach(function(e){var t=l(e,2),n=t[0],r=t[1];oe.indexOf(n)>-1&&(Pe[n]=r)}),Pe.horizontalPosition||(Pe.horizontalPosition="center"),Pe.verticalPosition||(Pe.verticalPosition="center")}(t.content),this.render=function(o){Ve=o,n.sort(ke),r.sort(ke).forEach(function(e,t){_e[e.id]=e.sequenceNumber,e.isLast=t===r.length-1,e.showContactMeMessage=e.isLast&&Pe.showContactMeMessage,e.contactMeMessage=Pe.contactMeMessage,e.orientation=Ae.orientation,Ne.push(new X.default(e,Te,_.disableFocusOnClick))});var a=1;Fe=[];for(var s=void 0,l=0;l<n.length;l++){var g=Object.assign({},n[l]);switch(g.isLast=l===n.length-1||l===n.length-2&&"CONTENT"===n[l+1].type&&"IN_APP_MULTIPLE_QUESTION_SURVEY"!==e,g.showContactMeMessage=(g.isLast||l===n.length-2&&"CONTENT"===n[l+1].type&&"IN_APP_MULTIPLE_QUESTION_SURVEY"===e)&&Pe.showContactMeMessage,g.contactMeMessage=Pe.contactMeMessage,g.minCharsValidationText=Pe.minCharsValidationText,g.maxCharsValidationText=Pe.maxCharsValidationText,g.mandatoryValidationText=Pe.mandatoryValidationText,g.minAnswersValidationText=Pe.minAnswersValidationText,g.maxAnswersValidationText=Pe.maxAnswersValidationText,g.viewType=Pe.viewType,g.showFooter=Pe.showFooter,g.footer=Pe.footer,g.mergeFirstSteps=Pe.mergeFirstSteps,g.orientation=Ae.orientation,g.snoozeButton=Ae.snoozeButton,g.surveyType=e,g.activationType=t.activationType,g.activationTypes=t.activationTypes,n[l].type){case"CONTENT":var m=new h.default(n[l].html,g,l<n.length-1?p:xe,i);s=H.default.SanitizeHtml(m.getHtml()),s.isValid?Ue.push(m):Fe.push(s.errors);break;case"SCORE":var E=void 0;switch(e){case"IN_APP_SURVEY_NPS":g.numberOfButtons=11,g.initialButtonIndex=0,E=new d.default(g,I,i);break;case"IN_APP_CES_SURVEY":g.numberOfButtons=7,g.initialButtonIndex=1,E=new d.default(g,I,i);break;case"IN_APP_RATING_SURVEY":"SMILEY"===g.surveyScoreType?g.numberOfButtons=3:g.numberOfButtons=5,g.initialButtonIndex=1,E=new k.default(g,I,i)}Ie(E,g,a);break;case"BOOLEAN":Ie(new T.default(g,I,i),g,a,!1,"SCORE");break;case"MULTIPLE_CHOICE_QUESTION":a=Ie(new A.default(g,q,a,i),g,a,!0);break;case"OPEN_TEXT":a=Ie(new N.default(g,q,a,i),g,a,!0);break;case"DYNAMIC_RATING_STEP":a=Ie(new Q.default(g,a),g,a,!0)}}if(Fe.length>0)return{isValid:!1,errors:Fe};if(Ne.length>0){Ue.forEach(function(e){var t=e.getSettings(),n=_e[t.surveyPageId];Ne[n].addStep(e)}),Y(),Ne[Le].setShowContactMe(Pe.showContactMeMessage);for(var S=Le+1;S<Ne.length;S++)Ne[S].setShowContactMe(!1);ve()}var O={appendLocation:(0,B.getConfig)("framesetMode")?"html":"body",enableModalBodyScroll:(0,B.getConfig)("enableModalBodyScroll"),closeClassName:"aptr-engagement-close-btn px-close-button",overlayClosesOnClick:!1,showCloseButton:!0,afterOpen:function(){var n=this;(0,B.getConfig)("enableModalBodyScroll")&&(0,B.getBody)().classList.add("apt-vex"),this.rootEl[te].add("apt-vex"),this.contentEl[te].add("apt-survey-popup"),this.closeEl.setAttribute("aria-label","exit survey"),ce=this.contentEl,this.rootEl.setAttribute("data-apt-ignore-visible",!0),this.contentEl.setAttribute("data-apt-disable-selector",!0),this.rootEl[te].add("apt-popup-disable-overlay"),this.contentEl[te].add("apt-popup-content-disable-overlay"),this.contentEl[te].add("apt-engagement-wrapper-survey"),this.contentEl[te].add("apt-engagement-wrapper"),this.contentEl[te].add("px-engagement-wrapper-survey"),this.contentEl[te].add("px-engagement-wrapper"),(Pe.zIndex||Pe.zindex)&&(this.rootEl.style.zIndex=Pe.zindex||Pe.zIndex,this.contentEl.style.zIndex=Pe.zindex||Pe.zIndex,this.overlayEl.style.zIndex=Pe.zindex||Pe.zIndex),(0,_.addStyleTag)(this.contentEl,Pe.coreStyling,"px-engagement-wrapper",".apt-vex.vex.vex-theme-os"),(0,_.addStyleTag)(this.contentEl,Pe.engagementCoreStyling,"px-engagement-wrapper-survey",".apt-vex.vex.vex-theme-os"),(0,_.addStyleTag)(this.contentEl,Pe.overrideStyling,"px-engagement-wrapper-survey",".apt-vex.vex.vex-theme-os"),Array.isArray(t.content.steps)&&t.content.steps.forEach(function(e){e.style&&(0,_.addStyleTag)(n.contentEl,e.style,"px-engagement-wrapper-survey #step-"+e.id,".apt-vex.vex.vex-theme-os")}),Array.isArray(r)&&r.forEach(function(e){e.style&&(0,_.addStyleTag)(n.contentEl,e.style,"px-engagement-wrapper-survey #page-"+e.id,".apt-vex.vex.vex-theme-os")});var o="MULTIPLE_QUESTION_PER_PAGE"===Ae.contentSubType?Ne:Ue,i=o[0].render();if(this.contentEl.appendChild(i),Pe.autoHeight||(this.contentEl.style.height=Pe.height+"px"),"DIALOG"===Pe.viewType){this.contentEl.style.width=Pe.width+"px";(0,$.getChannel)(v.eventTrackData[b.cacheGet](v.productIdParameter))!=K.DESKTOP_CHANNEL?ne.positionElement(this.contentEl,null,Pe.horizontalPosition,Pe.verticalPosition,Pe.positionTopDelta,Pe.positionLeftDelta):(this.contentEl.style.top=0,this.contentEl.style.left=0)}else{this.contentEl[te].add("apt-survey-bar"),this.contentEl.style.width=(0,y.getPageWidth)(!0)+"px",this.contentEl.style.left="0px";var a=(Pe.barOffset||0)+"px";"TOP"===Pe.barPosition?this.contentEl.style.top=a:this.contentEl.style.bottom=a}K.SCORE_SURVEY_TYPES.indexOf(e)>-1&&t.content.mergeFirstSteps&&Ce(this.contentEl),(0,M.isSnoozeButtonEnabled)(t.activationType,t.content.snoozeButton,t.activationTypes)&&we(this.contentEl),this.contentEl.style.background=(0,f.hexToRgba)(Pe.backgroundColor,Pe.backgroundFill?Pe.backgroundFill/100:1),c(this.contentEl);var s=this.rootEl.querySelector(".vex-overlay");Pe.overlayFill&&Pe.overlayFill>0&&(s.style.background=(0,f.hexToRgba)(Pe.overlayColor,Pe.overlayFill?Pe.overlayFill/100:0),s.style.display="block"),Pe.showShadow&&w(this.contentEl,Pe.shadowSettings);var l=this.contentEl.querySelector(".aptr-engagement-close-btn");l&&(0,f.addEventListener)(l,"click",function(){if(-1!=Oe.indexOf(e)&&!je){null!==o[Be].getData().selected&&x()}}),l&&l.setAttribute("role","button"),(0,M.removeCicularTabsWrapperListener)(re),(0,M.checkHasOverlay)(Pe.overlayColor,Pe.overlayFill)&&(re=(0,M.addCircularTabListener)(o[0].focus)),(0,_.focusElement)(ce),W.default.removeElementListener(de),de=z.UUIDGenerator.generateV4Id(),W.default.addPXElementObserver(de,this.contentEl,u),(0,B.getConfig)("clientSideEngagementTracking")&&J(1),setTimeout(function(){var e=$e.contentEl.getBoundingClientRect();P.internalEventListener.dispatchEvent("engagementPostRender",{engagementType:t.content.contentType,engagementId:t.engagementId,width:e.width,height:e.height}),Ve&&Ve(t,$e.contentEl)},500)}};return O.beforeClose=function(){try{(0,B.getBody)().classList.remove("apt-vex"),(0,C.handleEngagementFinish)(t.content.contentType);(0,$.getChannel)(v.eventTrackData[b.cacheGet](v.productIdParameter))==K.DESKTOP_CHANNEL&&W.default.removeElementListener(de),(0,M.removeTabbableEnterListener)()}catch(e){F.logger.logInternalError(e,"Error in before close survey")}},O.afterClose=function(){try{setTimeout(function(){He?(0,D.internalApt)("engagementCompletedClosed"):(0,D.internalApt)("engagementDroppedClosed")},500)}catch(e){F.logger.logInternalError(e,"Error in after close survey")}["SURVEY_CLOSED","surveyClosed"].forEach(function(n){if(v.externalEventListeners[n])try{v.externalEventListeners[n]()}catch(e){F.logger.logInternalError(e,"Error calling "+n+" event listener")}P.internalEventListener.dispatchEvent(n,(0,M.toExternalEventSurvey)(t,"Closed",e))}),(0,M.removeCicularTabsWrapperListener)()},$e=ee.open(O),{isValid:!0,errors:[]}},this.close=function(){$e&&$e.close()}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=n(121),d=r(c),u=n(33),p=r(u),f=n(0),g=n(113),h=r(g),m=n(11),v=n(4),b=n(5),y=n(10),E=n(14),S=r(E),C=n(25),w=n(112),T=r(w),x=n(120),k=r(x),I=n(117),A=r(I),O=n(118),N=r(O),L=n(12),_=n(7),F=n(3),D=n(24),B=n(2),R=n(79),P=n(9),M=n(16),U=n(21),j=n(72),H=r(j),$=n(20),V=n(55),K=n(8),q=n(30),W=r(q),z=n(15),G=n(19),Y=n(119),X=r(Y),J=n(115),Q=r(J),Z=n(38),ee=n(31);ee.defaultOptions.className="vex-theme-os";var te="classList",ne=new p.default,re=void 0,oe=["borderRadius","overlayColor","overlayFill","viewType","verticalPosition","horizontalPosition","positionTopDelta","positionLeftDelta","backgroundColor","backgroundFill","height","width","autoHeight","showShadow","shadowSettings","barPosition","showContactMeMessage","coreStyling","overrideStyling","engagementCoreStyling","contactMeMessage","minCharsValidationText","maxCharsValidationText","mandatoryValidationText","minAnswersValidationText","maxAnswersValidationText","footer","showFooter","mergeFirstSteps","zIndex","barOffset","zindex"],ie=["SCORE","BOOLEAN","MULTIPLE_CHOICE_QUESTION","OPEN_TEXT"],ae=B.serverEndpoint+"/engagement/survey",se=B.serverEndpoint+"/engagement/survey/step",le=B.serverEndpoint+"/engagement/survey/page",ce=void 0,de=null,ue=null,pe=null,fe={IN_APP_SURVEY_NPS:4,IN_APP_CES_SURVEY:5,IN_APP_BOOLEAN_SURVEY:6,IN_APP_RATING_SURVEY:7,IN_APP_MULTIPLE_QUESTION_SURVEY:8},ge="CLOSE",he="GO_TO_STEP";t.default=s},function(e,t,n){"use strict";function r(e,t,n){function r(){return(0,i.validateComment)(e,y,E)}function l(){L.classList.remove("apt-hidden"),N.classList.remove("apt-hidden"),F.classList.add("apt-hidden"),_.classList.add("apt-hidden")}function f(e,t,n){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(t===l.from)return void(n.innerHTML=l.comment)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}function g(e){for(var t=I.getLabelElements(e),n=document.createDocumentFragment(),r=0;r<t.length;++r)n.appendChild(t[r]);(0,d.arrayFrom)(T.childNodes).forEach(function(e){return T.removeChild(e)}),T.appendChild(n),T.classList.contains("labelWrapperElement.classList")||T.classList.add("px-labels-show")}function h(t){l(),t?(N.classList.add("apt-hidden"),_.classList.remove("apt-hidden")):(L.classList.add("apt-hidden"),F.classList.remove("apt-hidden")),v=t,e.showDynamicComment&&f(e.dynamicComments,v,C),e.labelSetting&&e.labelSetting.enabled&&g(t),x.forEach(function(e){e.style.display="none"}),k.forEach(function(e){return!e.classList.contains("apt-survey-show")&&e.classList.add("apt-survey-show")}),e.mergeFirstSteps&&w.classList.remove("apt-survey-submit-disabled"),!e.mergeFirstSteps&&(0,p.isSnoozeButtonEnabled)(e.activationType,e.snoozeButton,e.activationTypes)&&(0,u.hideSnooze)()}function m(){return(0,o.isBlank)(e.buttonText)?"Submit":e.buttonText}var v=null,b=void 0,y=void 0,E=void 0,S=void 0,C=void 0,w=void 0,T=void 0,x=[],k=[],I=void 0,A=s.TAB_INDEX_START+1,O=A,N=(0,o.createElementFromString)("<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30' style='width:250px; height: 70px;'>\n        <g fill='none'  fillRule='evenodd'>\n        <g stroke="+e.positiveButtonBorderColor+" fill="+e.positiveButtonBackgroundColor+" stroke-linecap='round' stroke-linejoin='round' strokeWidth="+e.positiveButtonBorderWidth+" >\n            <path d='M13.5 9H18V18.5H13.5z' transform='translate(6 5) matrix(-1 0 0 1 31.5 0)' />\n              <path d='M12 9.928c-.15-.56-2.496-3.571-3.321-5.309-.3-.63-.58-1.276-.833-1.907-.158-.393-.269-.685-.352-.914.088-.596.058-1.257-.113-1.553C7.29.091 7.125-.003 6.947 0 6.372.011 5.79.218 5.399.764c-.535.745-.516 1.938-.02 3.457.42 1.278.532 2.378.34 3.3l-1.202-.224c-1.878-.413-2.827-.38-3.661.385-.422.389-.568.88-.495 1.39.044.304.15.557.276.761.015.023.011.053-.036.097-.103.104-.186.2-.294.37-.179.28-.293.59-.305.923-.024.52.207 1.02.65 1.483.009.062-.01.105-.046.181-.03.063-.058.133-.085.21-.066.189-.11.392-.12.606-.039.72.302 1.353.964 1.853.025.02.034.05.025.077-.015.041-.024.084-.027.127.006-.068-.004-.025-.02.063-.07.375-.05.781.135 1.177l.056.11c.357.644 1.091 1.07 2.142 1.294.794.173 4.475.079 5.737-.023.752-.06 1.465-.137 1.708-.171l.42-.05' transform='translate(6 5)' />\n        </g>\n        </g>\n    </svg>");N.setAttribute("aria-label","positive"),N.setAttribute("role","button");var L=(0,o.createElementFromString)("<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'  style='width:250px; height: 70px;'>\n        <g fill='none'  fillRule='evenodd'>\n            <g stroke="+e.negativeButtonBorderColor+" fill="+e.negativeButtonBackgroundColor+" stroke-linecap='round' stroke-linejoin='round' strokeWidth="+e.negativeButtonBorderWidth+" >\n                <path d='M0 0.5H4.5V10H0z' transform='translate(6 5) matrix(1 0 0 -1 0 10.5)' />\n              <path d='M6 9.072c.15.56 2.496 3.571 3.321 5.309.3.63.58 1.276.833 1.907.158.393.269.685.352.914-.088.596-.058 1.257.113 1.553.09.154.256.248.434.245.575-.011 1.156-.218 1.548-.764.535-.745.516-1.938.02-3.457-.42-1.278-.532-2.378-.34-3.3l1.202.224c1.878.413 2.827.38 3.661-.385.422-.389.568-.88.495-1.39-.044-.304-.15-.557-.276-.761-.015-.023-.011-.053.036-.097.103-.104.186-.2.294-.37.179-.28.293-.59.305-.923.024-.52-.207-1.02-.65-1.483-.009-.062.01-.105.046-.181.03-.063.058-.133.085-.21.066-.189.11-.392.12-.606.039-.72-.302-1.353-.964-1.853-.025-.02-.034-.05-.025-.077.015-.041.024-.084.027-.127-.006.068.004.025.02-.063.07-.375.05-.781-.135-1.177l-.056-.11c-.357-.644-1.091-1.07-2.142-1.294C13.53.423 9.849.517 8.587.619c-.752.06-1.465.137-1.708.171l-.42.05' transform='translate(6 5)' />\n            </g>\n        </g>\n    </svg>");L.setAttribute("aria-label","negative"),L.setAttribute("role","button");var _=(0,o.createElementFromString)("<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30' style='width:250px; height: 70px;'>\n        <g fill='none'  fillRule='evenodd'>\n            <g stroke="+e.selectedButtonsBorderColor+" fill="+e.selectedButtonsBackgroundColor+" stroke-linecap='round' stroke-linejoin='round' strokeWidth="+e.selectedButtonsBorderWidth+" >\n              <path d='M13.5 9H18V18.5H13.5z' transform='translate(6 5) matrix(-1 0 0 1 31.5 0)' />\n              <path d='M12 9.928c-.15-.56-2.496-3.571-3.321-5.309-.3-.63-.58-1.276-.833-1.907-.158-.393-.269-.685-.352-.914.088-.596.058-1.257-.113-1.553C7.29.091 7.125-.003 6.947 0 6.372.011 5.79.218 5.399.764c-.535.745-.516 1.938-.02 3.457.42 1.278.532 2.378.34 3.3l-1.202-.224c-1.878-.413-2.827-.38-3.661.385-.422.389-.568.88-.495 1.39.044.304.15.557.276.761.015.023.011.053-.036.097-.103.104-.186.2-.294.37-.179.28-.293.59-.305.923-.024.52.207 1.02.65 1.483.009.062-.01.105-.046.181-.03.063-.058.133-.085.21-.066.189-.11.392-.12.606-.039.72.302 1.353.964 1.853.025.02.034.05.025.077-.015.041-.024.084-.027.127.006-.068-.004-.025-.02.063-.07.375-.05.781.135 1.177l.056.11c.357.644 1.091 1.07 2.142 1.294.794.173 4.475.079 5.737-.023.752-.06 1.465-.137 1.708-.171l.42-.05' transform='translate(6 5)' />\n            </g>\n        </g>\n    </svg>");_.setAttribute("aria-label","positive selected"),_.setAttribute("role","button");var F=(0,o.createElementFromString)("<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'  style='width:250px; height: 70px;'>\n            <g fill='none'  fillRule='evenodd'>\n                <g stroke="+e.selectedButtonsBorderColor+" fill="+e.selectedButtonsBackgroundColor+" stroke-linecap='round' stroke-linejoin='round' strokeWidth="+e.selectedButtonsBorderWidth+" >\n                <path d='M0 0.5H4.5V10H0z' transform='translate(6 5) matrix(1 0 0 -1 0 10.5)' />\n              <path d='M6 9.072c.15.56 2.496 3.571 3.321 5.309.3.63.58 1.276.833 1.907.158.393.269.685.352.914-.088.596-.058 1.257.113 1.553.09.154.256.248.434.245.575-.011 1.156-.218 1.548-.764.535-.745.516-1.938.02-3.457-.42-1.278-.532-2.378-.34-3.3l1.202.224c1.878.413 2.827.38 3.661-.385.422-.389.568-.88.495-1.39-.044-.304-.15-.557-.276-.761-.015-.023-.011-.053.036-.097.103-.104.186-.2.294-.37.179-.28.293-.59.305-.923.024-.52-.207-1.02-.65-1.483-.009-.062.01-.105.046-.181.03-.063.058-.133.085-.21.066-.189.11-.392.12-.606.039-.72-.302-1.353-.964-1.853-.025-.02-.034-.05-.025-.077.015-.041.024-.084.027-.127-.006.068.004.025.02-.063.07-.375.05-.781-.135-1.177l-.056-.11c-.357-.644-1.091-1.07-2.142-1.294C13.53.423 9.849.517 8.587.619c-.752.06-1.465.137-1.708.171l-.42.05' transform='translate(6 5)' />\n                </g>\n            </g>\n        </svg>");F.setAttribute("aria-label","negative selected"),F.setAttribute("role","button"),this.getData=function(){return{selected:v,comment:y.value,contactMeAllowed:e.showContactMeMessage?S.checked:null,labels:e.labelSetting&&e.labelSetting.enabled?I.getSelectedLabels():[]}},this.hide=function(){b.style.display="none"},this.focus=function(){var e=null!=v&&L?L:b.querySelector('[tabindex="'+A+'"]');e&&(0,a.focusElement)(e)},this.render=function(){var i=(0,a.toDom)(e.titleHtml,!1),d=e.contactMeMessage||"It's okay to contact me about my feedback";(0,p.addTabbableEnterListener)(),y=(0,o.createElement)("textArea"),S=(0,o.createInput)("checkbox",void 0,!1,void 0,void 0,!1,void 0,{"aria-label":d}),E=(0,o.createElement)("div","apt-error-message",{text:"Comment can be at most 1000 characters"}),E.setAttribute("role","alert"),l();var u=(0,o.createElement)("div",["apt-contact-wrapper"],void 0,[S,(0,o.createElement)("div","apt-contact-me-text",{text:d,dataAtt:[{name:"aria-hidden",value:"true"}]})]);!e.showContactMeMessage&&(u.style.display="none"),C=e.showDynamicComment?(0,o.createElement)("div"):(0,a.toDom)(e.defaultComment);var f=(0,o.createElement)("div",["apt-survey-choices-wrapper"],null,[(0,o.createElement)("div","apt-survey-choices",null,[L,F,N,_]),(0,o.createElement)("div","apt-survey-choices-legend",null,[(0,o.createElement)("div",null,null,[(0,a.toDom)(e.notSatisfiedHtml)]),(0,o.createElement)("div",null,null,[(0,a.toDom)(e.satisfiedHtml)])])]),g=(0,o.createElement)("div",["apt-survey-comment"],null,[C]),v=(0,o.createElement)("div","apt-survey-submit-text",{text:m()});w=(0,o.createElement)("div","apt-survey-submit",null,[v]);var D=(0,o.createElement)("div","px-submit-container",null,[w]),B=e.labelSetting;B&&B.enabled&&(I=new c.default(B.ranges,B)),v.setAttribute("aria-hidden","true"),w.setAttribute("role","button"),w.setAttribute("aria-label",v.textContent),T=(0,o.createElement)("div",["px-survey-labels"]);var R=(0,o.createElement)("div","bottom-feedback-container",null,[y,E,"DIALOG"===e.viewType&&u,D]),P=(0,o.createElement)("div","apt-feedback-text-wrapper",null,[R,"BAR"===e.viewType&&(0,o.createElement)("div","",null,[u])]),M=(0,o.createElement)("div","apt-survey-feedback",null,[g,T,P]);M.setAttribute("aria-live","polite"),"BAR"===e.viewType&&(R.classList.add("bottom-feedback-container-bar"),w.classList.add("apt-survey-submit-bar")),w.style.color=e.submitButtonTextColor,w.style.backgroundColor=e.submitButtonBackgroundColor,w.style.borderWidth=e.submitButtonBorderWidth+"px",w.style.borderRadius=e.submitButtonBorderRadius+"px",w.style.borderColor=e.submitButtonBorderColor,y.placeholder=e.placeholderText||"Share your thoughts about your choice...",(0,o.addEventListener)(y,"keyup",r);var U=(0,o.createElement)("div","apt-survey-title",null,[i]),j=[U,f,M];e.showFooter&&j.push((0,a.toDom)(e.footer,!1,"apt-survey-footer")),b=(0,o.createElement)("div","apt-survey-step",null,j),b.setAttribute("id","step-"+e.id),O=A,O=(0,p.setTabIndexes)(i,O),L.setAttribute("tabindex",O),F.setAttribute("tabindex",O),O+=1,N.setAttribute("tabindex",O),_.setAttribute("tabindex",O),O+=1,O=(0,p.setTabIndexes)(C,O),I&&(O=I.setTabIndexes(O)),y.setAttribute("tabindex",O),O+=1,S.setAttribute("tabindex",O),O+=1,w.setAttribute("tabindex",e.mergeFirstSteps?s.NO_TAB_INDEX:O),O+=1;var H=function(){r()&&t()};(0,o.addEventListener)(w,"click",H),(0,o.addEnterKeyDownListener)(w,H),n(w);var $=function(){h(0)};n(S),(0,o.addEventListener)(L,"click",$),(0,o.addEnterKeyDownListener)(L,$),n(L),n(F);var V=function(){h(1)};return(0,o.addEventListener)(N,"click",V),(0,o.addEnterKeyDownListener)(N,V),n(N),n(_),!e.mergeFirstSteps&&x.push(i),!e.mergeFirstSteps&&k.push(M),e.mergeFirstSteps&&M.classList.add("apt-survey-show"),e.mergeFirstSteps&&w.classList.add("apt-survey-submit-disabled"),b},this.getSettings=function(){return e},this.getHtml=function(){return e.titleHtml+e.notSatisfiedHtml+e.satisfiedHtml+e.defaultComment}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(37),a=n(7),s=n(8),l=n(49),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=n(12),u=n(26),p=n(16);t.default=r},function(e,t,n){"use strict";function r(e,t,n,r){var l=function(){return(0,o.isBlank)(t.buttonText)?t.isLast?"Close":"Next":t.buttonText}(),c=(0,i.toDom)(e,!1,"apt-survey-title"),d=a.TAB_INDEX_START+1,u=d;u=(0,s.setTabIndexes)(c,u);var p=(0,o.createElement)("div","apt-survey-close-button",null,[(0,o.createElement)("div","apt-survey-close-text",{text:l})]);p.setAttribute("tabindex",u),p.setAttribute("role","button"),p.setAttribute("aria-label",l),p.style.color=t.closeButtonTextColor,p.style.backgroundColor=t.closeButtonBackgroundColor,p.style.borderRadius=t.closeButtonBorderRadius+"px",p.style.borderWidth=t.closeButtonBorderWidth+"px",p.style.borderColor=t.closeButtonBorderColor,(0,o.addEventListener)(p,"click",n),(0,o.addEnterKeyDownListener)(p,n),r(p);var f=(0,o.createElement)("div","apt-survey-step",null,[c,p]);f.setAttribute("id","step-"+t.id),this.render=function(){var e=f.querySelector(".apt-survey-close-button");return r(e),f},this.focus=function(){var e=f.querySelector('[tabindex="'+d+'"]');(0,i.focusElement)(e)},this.hide=function(){f.style.display="none"},this.getSettings=function(){return t},this.getHtml=function(){return e},this.isValid=function(){return!0}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(7),a=n(8),s=n(16);t.default=r},function(e,t,n){"use strict";function r(){var e=null;this.draw=function(t,n,r){var o=t.content;return e=new i.default(o.contentType,t,o.steps,o.surveyPages,r),e.render(n)},this.close=function(){e&&e.close()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(111),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(e,t){function n(){return 39*(y-b+1)-8}function r(t){t.style.borderWidth=e.buttonsBorderWidth+"px",t.style.borderRadius=e.buttonsBorderRadius+"px",t.style.borderColor=e.buttonsBorderColor,t.style.color=e.buttonsTextColor,t.style.backgroundColor=e.buttonsBackgroundColor}function l(){for(var t=[],n=b;n<=y;n+=1){var r=(0,s.createElement)("span",["apt-survey-dynamic-rating-radio-label"],{text:n});r.style.borderRadius=e.buttonsBorderRadius+"px",t.push({children:r,value:n,tabIndex:f,selected:h===n}),f+=1}return t}function p(t){return new c.default({name:"apt-trigger-radio-"+e.id,className:"apt-survey-dynamic-rating-radio-answers",childrenClassName:"apt-survey-dynamic-rating-radio px-survey-rating-button",selectCallback:function(t){m&&r(m);var n=document.querySelector('input[name="apt-trigger-radio-'+e.id+'"]:checked');n&&(m=n.parentElement,m.style.backgroundColor=e.selectedButtonsBackgroundColor,m.style.color=e.selectedButtonsTextColor,m.style.borderWidth=e.selectedButtonsBorderWidth+"px",m.style.borderColor=e.selectedButtonsBorderColor),h=t},radioOptions:t}).render()}var f=o.TAB_INDEX_START,g=void 0,h=void 0,m=void 0,v=t,b=e.minAnswer,y=e.maxAnswer;return this.isValid=function(){return!0},this.render=function(t){"number"==typeof t&&(f=t);var o=(0,a.renderSurveyTitle)(e,e.titleHtml,["apt-survey-dynamic-rating-wrapper"],["apt-survey-dynamic-rating-title"],v);f=(0,u.setTabIndexes)(o,f);var c=l(),h=p(c);(0,d.arrayFrom)(h.childNodes).forEach(r);var m=(0,s.createElement)("div","apt-survey-dynamic-rating-labels-wrapper",null,[(0,i.toDom)(e.notSatisfiedHtml,!0),(0,i.toDom)(e.satisfiedHtml,!0)]);"PORTRAIT"===e.orientation&&(m.style.maxWidth="100%",m.style.width=n()+"px");var b=(0,s.createElement)("div",["apt-survey-dynamic-rating-answers-wrapper","apt-survey-answer-wrapper","px-survey-answer-wrapper","px-survey-rating-answer-wrapper"],null,[h,m]);return g=(0,s.createElement)("div","apt-survey-dynamic-rating-step",null,[o,b]),g.setAttribute("id","step-"+e.id),g},this.focus=function(){},this.hide=function(){g.style.display="none"},this.getData=function(){return{selected:h}},this.getNextTabIndex=function(){return f},this.getSettings=function(){return e},this.getHtml=function(){return e.notSatisfiedHtml+e.satisfiedHtml+e.defaultComment},this.updateStepNumber=function(e){(0,a.updateStepNumber)(g,e),v=e},this.getStepNumber=function(){return v},this}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=n(7),a=n(26),s=n(0),l=n(70),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=n(12),u=n(16);t.default=r},function(e,t,n){"use strict";function r(e){function t(e){r.style.color=e.textColor,r.style.borderColor=e.borderColor,r.style.backgroundColor=e.fillColor}function n(){a=!a,t(a?u:d)}var r=(0,o.createElement)("div",["px-survey-label"],{text:e.text});r.style.borderRadius=e.cornerRadius+"px",r.setAttribute("role","button"),r.setAttribute("aria-label",e.text),r.setAttribute(i.PX_TABBABLE_ATTR,"true");var a=!1,s=e.textColor,l=e.borderColor,c=e.fillColor,d={textColor:s,borderColor:l,fillColor:c},u={};u.borderColor=e.selectedBorderColor,u.textColor=e.selectedTextColor,u.fillColor=e.selectedFillColor,t(d),(0,o.addEventListener)(r,"click",n),this.render=function(){return r},this.setTabIndex=function(e){r.setAttribute("tabindex",e)},this.isSelected=function(){return a},this.getText=function(){return e.text},this.getId=function(){return e.id}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(16);t.default=r},function(e,t,n){"use strict";function r(e,t,n,r){function s(e,t,n){n&&e.checked&&y.length>=n?(e.checked=!1,S.style.display="inline-block"):(S.style.display="none",C.style.display="none"),e.checked?-1===y.indexOf(t)&&y.push(t):y=y.filter(function(e){return e!==t})}function u(t){var n=new l.default({name:"apt-trigger-radio-"+e.id,className:"apt-survey-multi-choice-radio-answers",childrenClassName:"apt-survey-multi-choice-radio",selectCallback:function(e){y[0]=e},radioOptions:t.map(function(e){var t=(0,o.createElement)("div",["apt-survey-multi-choice-radio-label"]);t.innerHTML=e.text,k=(0,d.setTabIndexes)(t,k);var n={children:t,tabIndex:k,value:e.id,selected:e.id===y[0]};return k+=1,n})}).render();return k+=t.length,n}function p(e,t,n){var a=(0,o.createElement)("div",["apt-survey-multi-choice-label"],{dataAtt:[{name:"for",value:e.id},{name:"aria-hidden",value:"true"}]},(0,i.toDom)(e.text,!1,e.text.indexOf("px-multi-survey-answer")>-1?void 0:"apt-multi-survey-answer")),l=(0,o.createElement)("input","apt-survey-multi-choice-checkbox",{dataAtt:[{name:"type",value:"checkbox"},{name:"aria-label",value:a.textContent},{name:"id",value:e.id},{name:"name",value:"multi-choices-radio"}]});return(0,o.addEventListener)(l,"change",function(n){s(n.target,e.id,t)}),r(l),l.setAttribute("tabindex",k),k+=1,k=(0,d.setTabIndexes)(a,k),0===n&&(T=l),(0,o.createElement)("div","apt-survey-multi-choices-radio",null,[(0,o.createElement)("div","apt-survey-multi-choice-input-wrapper",null,[l]),a])}function f(e){var t=e.answers,n=e.maxSelectionNumber,r=e.minSelectionNumber,i=1===n&&1===r;t.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber});var a=i?u(t):t.map(function(e,t){return p(e,n,t)});return(0,o.createElement)("div",["apt-survey-multi-choices-wrapper","apt-survey-multi-choices-wrapper-"+t.length,"apt-survey-answer-wrapper","px-survey-answer-wrapper","px-survey-multi-answer-wrapper"],null,a)}function g(e){var t=e.maxAnswersValidationText?e.maxAnswersValidationText.replace("%maxSelectionNumber%",e.maxSelectionNumber):"You can only select a maximum of "+e.maxSelectionNumber+" answer(s)",n=e.minAnswersValidationText?e.minAnswersValidationText.replace("%minSelectionNumber%",e.minSelectionNumber):"Please select at least "+e.minSelectionNumber+" answer(s)";return S=(0,o.createElement)("div","apt-error-message apt-max-choices",{text:t}),C=(0,o.createElement)("div","apt-error-message apt-min-choices",{text:n}),(0,o.createElement)("div","apt-error-message-wrapper",null,[S,C])}function h(){return(0,o.isBlank)(e.buttonText)?e.isLast?"Done":"Next":e.buttonText}function m(e){var t=(0,o.createElement)("div","apt-survey-submit",{text:h()});return t.style.color=e.submitButtonTextColor,t.style.backgroundColor=e.submitButtonBackgroundColor,t.style.borderWidth=e.submitButtonBorderWidth+"px",t.style.borderRadius=e.submitButtonBorderRadius+"px",t.style.borderColor=e.submitButtonBorderColor,t.setAttribute("tabindex",k),k+=1,t.setAttribute("role","button"),t}function v(e,t){t&&y.length<t?C.style.display="inline-block":(C.style.display="none",e())}function b(e){if(e.showQuestionNumber){var t=(0,o.createElement)("div","apt-question-sequence",{text:x+"."});return t.style.fontFamily=e.numberFontFamily,t.style.fontSize=e.numberSize+"px",t.style.color=e.numberColor,t}return null}var y=[],E=void 0,S=void 0,C=void 0,w=void 0,T=void 0,x=n,k=a.TAB_INDEX_START;this.isValid=function(){var t=e.minSelectionNumber,n=t&&y.length<t;return C.style.display=n?"inline-block":"none",!n},this.render=function(n){"number"==typeof n&&(k=n);var a=(0,i.toDom)(e.question,!1),s=e.contactMeMessage||"It's okay to contact me about my feedback";a.classList.add("apt-survey-multi-title"),a.classList.add("apt-survey-title");var l=(0,o.createElement)("div",["apt-survey-multi-choices-title-wrapper","apt-survey-title-wrapper"],null,[b(e),a]);k=(0,d.setTabIndexes)(l,k);var c=f(e),u=g(e),p=m(e),h=(0,o.createElement)("div","px-survey-page-footer",null,[p]);w=(0,o.createInput)("checkbox",void 0,!1,void 0,void 0,!1,void 0,{"aria-label":s});var y=(0,o.createElement)("div",["apt-contact-wrapper"],void 0,[w,(0,o.createElement)("div","apt-contact-me-text",{text:s,dataAtt:[{name:"aria-hidden",value:"true"}]})]);!e.showContactMeMessage&&(y.style.display="none"),E=(0,o.createElement)("div","apt-survey-multi-choices-step",null,[l,c,u,y,h]),E.setAttribute("id","step-"+e.id);var S=function(){v(t,e.minSelectionNumber)};return(0,o.addEnterKeyDownListener)(p,S),(0,o.addEventListener)(p,"click",S),r(p),E},this.focus=function(){T&&(0,i.focusElement)(T)},this.hide=function(){E.style.display="none"},this.getData=function(){return{choices:y,contactMeAllowed:e.showContactMeMessage?w.checked:null}},this.getSettings=function(){return e},this.getHtml=function(){return e.answers.map(function(e){return e.text}).join("")+e.question},this.getNextTabIndex=function(){return k},this.updateStepNumber=function(e){(0,c.updateStepNumber)(E,e),x=e},this.getStepNumber=function(){return x},s=s.bind(this),v=v.bind(this)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(7),a=n(8),s=n(70),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(26),d=n(16);t.default=r},function(e,t,n){"use strict";function r(e,t,n,r){function d(){return(0,a.validateComment)(e,m,v)}function u(){return m=(0,o.createElement)("textArea"),m.setAttribute("tabindex",E),E+=1,m.placeholder=e.placeholderText||"Share your thoughts about your choice...",(0,o.addEventListener)(m,"keyup",d),v=(0,o.createElement)("div","apt-error-message",{text:"Comment can be at most 1000 characters"}),(0,o.createElement)("div","bottom-feedback-container",null,[m,v])}function p(){return(0,o.isBlank)(e.buttonText)?e.isLast?"Done":"Next":e.buttonText}function f(e){var t=(0,o.createElement)("div","apt-survey-submit",{text:p()});return t.style.color=e.submitButtonTextColor,t.style.backgroundColor=e.submitButtonBackgroundColor,t.style.borderWidth=e.submitButtonBorderWidth+"px",t.style.borderRadius=e.submitButtonBorderRadius+"px",t.style.borderColor=e.submitButtonBorderColor,t.setAttribute("tabindex",E),E+=1,t.setAttribute("role","button"),t}function g(e){if(e.showQuestionNumber){var t=(0,o.createElement)("div","apt-question-sequence",{text:S+"."});return t.style.fontFamily=e.numberFontFamily,t.style.fontSize=e.numberSize+"px",t.style.color=e.numberColor,t}return null}var h=void 0,m=void 0,v=void 0,b=void 0,y=void 0,E=s.TAB_INDEX_START,S=n;this.isValid=function(){return d()},this.render=function(n){"number"==typeof n&&(E=n);var a=(0,i.toDom)(e.question,!1),s=e.contactMeMessage||"It's okay to contact me about my feedback";a.classList.add("apt-survey-open-text-title"),a.classList.add("apt-survey-title");var l=(0,o.createElement)("div",["apt-survey-open-text-title-wrapper","apt-survey-title-wrapper"],null,[g(e),a]);E=(0,c.setTabIndexes)(l,E);var p=u();b=(0,o.createInput)("checkbox",void 0,!1,void 0,void 0,!1,void 0,{"aria-label":s,tabindex:E}),E+=1,y=f(e);var m=(0,o.createElement)("div",["apt-contact-wrapper"],void 0,[b,(0,o.createElement)("div","apt-contact-me-text",{text:s,dataAtt:[{name:"aria-hidden",value:"true"}]})]);!e.showContactMeMessage&&(m.style.display="none"),"BAR"===e.viewType&&(p.classList.add("bottom-feedback-container-bar"),y.classList.add("apt-survey-submit-bar")),"DIALOG"===e.viewType&&p.appendChild(m);var v=(0,o.createElement)("div",["apt-feedback-text-wrapper","apt-survey-answer-wrapper","px-survey-answer-wrapper","px-survey-feedback-answer-wrapper"],null,[p,"BAR"===e.viewType&&(0,o.createElement)("div","",null,[m])]);p.appendChild(y),h=(0,o.createElement)("div","apt-survey-open-text-step",null,[l,v]),h.setAttribute("id","step-"+e.id);var S=function(){d()&&t()};return(0,o.addEventListener)(y,"click",S),(0,o.addEnterKeyDownListener)(y,S),r(y),r(b),h},this.focus=function(){m&&(0,i.focusElement)(m)},this.hide=function(){h.style.display="none"},this.getData=function(){return{comment:m.value,contactMeAllowed:e.showContactMeMessage?b.checked:null}},this.getSettings=function(){return e},this.getHtml=function(){return e.question},this.getNextTabIndex=function(){return E},this.updateStepNumber=function(e){(0,l.updateStepNumber)(h,e),S=e},this.getStepNumber=function(){return S}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(7),a=n(37),s=n(8),l=n(26),c=n(16);t.default=r},function(e,t,n){"use strict";function r(e,t,n){var r=this,c=void 0,d=void 0,u=a.TAB_INDEX_START,p=[];return this.addStep=function(e){p.push(e)},this.isValid=function(){var e=!0;return p.forEach(function(t){t.isValid()||(e=!1)}),e},this.submitSurvey=function(){r.isValid()&&t()},this.render=function(){var t=(0,o.renderSurveyTitle)(e,e.title,["apt-survey-page-title-wrapper"],["apt-survey-page-title"],e.sequenceNumber+1);u=(0,s.setTabIndexes)(t,u);var a=[t];p.forEach(function(e){var t=e.render(u);t.classList.add("apt-survey-step"),a.push(t),"CONTENT"!==e.getSettings().type&&(u=e.getNextTabIndex())});var l=e.buttonSetting;l.borderRadius=l.cornerRadius;var f=(0,o.renderSubmitButton)(e.buttonSetting,0,u);f.classList.add("page-submit");var g=(0,i.createElement)("div","px-survey-page-footer",null,[f]),h=["apt-survey-page"];"PORTRAIT"===e.orientation&&h.push("apt-orientation-portrait"),d=(0,o.renderContactMeCheckBox)(e,u),u+=1;var m=(0,o.renderContactMe)(e,d);return c=(0,i.createElement)("div",h,null,a.concat([m,g])),c.setAttribute("id","page-"+e.id),(0,i.addEnterKeyDownListener)(f,r.submitSurvey.bind(r)),(0,i.addEventListener)(f,"click",r.submitSurvey.bind(r)),n(f),c},this.focus=function(){var e=c.querySelector("[tabindex]");e?(0,l.focusElement)(e):p.length>0&&p[0].focus()},this.hide=function(){c.style.display="none"},this.getData=function(){return{steps:p,contactMeAllowed:e.showContactMeMessage?d.checked:null}},this.isContentPage=function(){return 1===p.length&&p.some(function(e){return"CONTENT"===e.getSettings().type})},this.updateQuestionsNumbers=function(e){r.isContentPage()||p.forEach(function(t,n){t.updateStepNumber(e+n)})},this.setShowContactMe=function(t){e.showContactMeMessage=t},this}Object.defineProperty(t,"__esModule",{value:!0});var o=n(26),i=n(0),a=n(8),s=n(16),l=n(7);t.default=r},function(e,t,n){"use strict";function r(e,t,n){function r(e){switch(e){case 0:return"unsatisfied";case 1:return"neutral";case 2:return"satisfied"}return""}function c(e){return(e+=1)+" "+(1===e?"star":"stars")}function m(e,t,n){var o=e.getElementsByTagName("svg")[0];if(D){var i=v(n,t),a=o.querySelector("#Oval");a.style.fill=i.buttonsBackgroundColor,a.setAttribute("stroke-width",i.buttonsBorderWidth),a.setAttribute("stroke",i.buttonsBorderColor),e.setAttribute("aria-label",n+1+" "+r(n));for(var s=o.querySelectorAll("[data-border-color]"),l=0;l<s.length;l++)s[l].setAttribute("stroke",i.buttonsBorderColor),s[l].setAttribute("fill",i.buttonsBorderColor)}else o.getElementsByTagName("polygon")[0].style.fill=t.buttonsBackgroundColor,o.getElementsByTagName("path")[0].setAttribute("stroke-width",t.buttonsBorderWidth),o.getElementsByTagName("path")[0].setAttribute("stroke",t.buttonsBorderColor),o.getElementsByTagName("g")[0].style.fill=t.buttonsBorderColor,o.getElementsByTagName("g")[0].setAttribute("stroke-width",t.buttonsBorderWidth),e.setAttribute("aria-label",c(n))}function v(e,t){return{0:{buttonsBackgroundColor:t.negativeButtonBackgroundColor,buttonsBorderColor:t.negativeButtonBorderColor,buttonsBorderWidth:t.negativeButtonBorderWidth},1:{buttonsBackgroundColor:t.neutralButtonBackgroundColor,buttonsBorderColor:t.neutralButtonBorderColor,buttonsBorderWidth:t.neutralButtonBorderWidth},2:{buttonsBackgroundColor:t.positiveButtonBackgroundColor,buttonsBorderColor:t.positiveButtonBorderColor,buttonsBorderWidth:t.positiveButtonBorderWidth}}[e]}function b(t){return t-e.initialButtonIndex}function y(e){for(var t=K.getLabelElements(O()),n=document.createDocumentFragment(),r=0;r<t.length;++r)n.appendChild(t[r]);(0,u.arrayFrom)(H.childNodes).forEach(function(e){return H.removeChild(e)}),H.appendChild(n),!H.classList.contains("labelWrapperElement.classList")&&H.classList.add("px-labels-show")}function E(e,t,n){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(t>=l.from&&t<=l.to)return void(n.innerHTML=l.comment)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}function S(e){L.forEach(function(t,n){if(n===e-1){t.setAttribute("data-selected","true");var r=c(n),o=r+" "+(0===n?"is":"are")+" selected";t.setAttribute("aria-label",o)}else t.setAttribute("data-selected","false"),t.setAttribute("aria-label",c(n))})}function C(t){if(D){for(var n=1;n<L.length+1;n++)if(n!=t){var r=L[n-1];m(r,e,n-1)}}else if(null!==_&&_>t)for(var o=0;o<L.length;o++){var i=L[o];m(i,e,o)}_=t;var a=b(t);if(S(t),D){var s=L[a],l=s.getElementsByTagName("svg")[0],c=l.querySelector("#Oval");c.style.fill=e.selectedButtonsBackgroundColor,c.setAttribute("stroke-width",e.selectedButtonsBorderWidth),c.setAttribute("stroke",e.selectedButtonsBorderColor);for(var d=l.querySelectorAll("[data-border-color]"),u=0;u<d.length;u++)d[u].setAttribute("stroke",e.selectedButtonsBorderColor),d[u].setAttribute("fill",e.selectedButtonsBorderColor)}else for(var g=0;g<a+1;g++){var h=L[g],v=h.getElementsByTagName("svg")[0];v.getElementsByTagName("polygon")[0].style.fill=e.selectedButtonsBackgroundColor,v.getElementsByTagName("path")[0].setAttribute("stroke-width",e.selectedButtonsBorderWidth),v.getElementsByTagName("path")[0].setAttribute("stroke",e.selectedButtonsBorderColor),v.getElementsByTagName("g")[0].style.fill=e.selectedButtonsBorderColor,v.getElementsByTagName("g")[0].setAttribute("stroke-width",e.selectedButtonsBorderWidth)}e.showDynamicComment&&E(e.dynamicComments,D?x(a):a+1,U),e.labelSetting&&e.labelSetting.enabled&&y(t),$.forEach(function(e){return e.style.display="none"}),V.forEach(function(e){return!e.classList.contains("apt-survey-show")&&e.classList.add("apt-survey-show")}),e.mergeFirstSteps&&(j.classList.remove("apt-survey-submit-disabled"),j.setAttribute("tabindex",F)),!e.mergeFirstSteps&&(0,f.isSnoozeButtonEnabled)(e.activationType,e.snoozeButton,e.activationTypes)&&(0,p.hideSnooze)()}function w(){return(0,i.validateComment)(e,R,P)}function T(e,t,n){return function(r){e.appendChild(r),m(e,t,n)}}function x(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 5}}function k(e){switch(e){case 0:return"unsatisfied";case 1:return"neutral";case 2:return"satisfied"}}function I(e,t,r,i){var a=(0,o.createElement)("div"),s=D?(0,l.getImage)(k(r),T(a,t,r)):(0,o.createElementFromString)(h);a.setAttribute("tabindex",i),a.setAttribute("role","button"),a.setAttribute("aria-label",r),D||(a.appendChild(s),m(a,t,r));var c=function(e){return function(){C(e)}}(e);return(0,o.addEnterKeyDownListener)(a,c),(0,o.addEventListener)(a,"click",c),n(a),a}function A(){return(0,o.isBlank)(e.buttonText)?"Submit":e.buttonText}function O(){if(!D)return _;switch(_){case 1:return 1;case 2:return 3;case 3:return 5}return _}var N=a.TAB_INDEX_START+1,L=[],_=null,F=N,D=e.surveyScoreType===g,B=void 0,R=void 0,P=void 0,M=void 0,U=void 0,j=void 0,H=void 0,$=[],V=[],K=null;this.focus=function(){var e=void 0;(e=null!=_&&L.length?L[0]:B.querySelector('[tabindex="'+N+'"]'))&&(0,s.focusElement)(e)},this.render=function(){var r=(0,s.toDom)(e.titleHtml,!1);F=(0,f.setTabIndexes)(r,F),(0,f.addTabbableEnterListener)();for(var i=e.contactMeMessage||"It's okay to contact me about my feedback",l=e.initialButtonIndex;l<e.numberOfButtons+e.initialButtonIndex;l++){var c=l-e.initialButtonIndex;L.push(I(l,e,c,F)),F+=1}U=e.showDynamicComment?(0,o.createElement)("div"):(0,s.toDom)(e.defaultComment),F=(0,f.setTabIndexes)(U,F);var u=e.labelSetting;u&&u.enabled&&(K=new d.default(u.ranges,u),F=K.setTabIndexes(F)),R=(0,o.createElement)("textArea"),R.setAttribute("tabindex",F),F+=1,M=(0,o.createInput)("checkbox",void 0,!1,void 0,void 0,!1,void 0,{"aria-label":i}),M.setAttribute("tabindex",F),F+=1,P=(0,o.createElement)("div","apt-error-message",{text:"Comment can be at most 1000 characters"});var p=(0,o.createElement)("div",["apt-contact-wrapper",e.showContactMeMessage?"":"apt-hidden"],void 0,[M,(0,o.createElement)("div","apt-contact-me-text",{text:i,dataAtt:[{name:"aria-hidden",value:"true"}]})]),g=(0,o.createElement)("div",["apt-survey-choices-wrapper","apt-survey-choices-wrapper-"+e.numberOfButtons],null,[(0,o.createElement)("div","apt-survey-choices",null,L),(0,o.createElement)("div","apt-survey-choices-legend",null,[(0,o.createElement)("div",null,null,[(0,s.toDom)(e.notSatisfiedHtml)]),(0,o.createElement)("div",null,null,[(0,s.toDom)(e.satisfiedHtml)])])]),h=(0,o.createElement)("div",["apt-survey-comment"],null,[U]),m=(0,o.createElement)("div","apt-survey-submit-text",{text:A()});j=(0,o.createElement)("div","apt-survey-submit",null,[m]);var v=(0,o.createElement)("div","px-submit-container",null,[j]);m.setAttribute("aria-hidden","true"),j.setAttribute("role","button"),j.setAttribute("aria-label",m.textContent);var b=(0,o.createElement)("div","bottom-feedback-container",null,[R,P,e.showContactMeMessage?"DIALOG"===e.viewType&&p:void 0,v]),y=(0,o.createElement)("div","apt-feedback-text-wrapper",null,[b,e.showContactMeMessage?"BAR"===e.viewType&&(0,o.createElement)("div","",null,[p]):void 0]);H=(0,o.createElement)("div",["px-survey-labels"]);var E=[h,H,y],S=(0,o.createElement)("div","apt-survey-feedback",null,E);S.setAttribute("aria-live","polite"),"BAR"===e.viewType&&(b.classList.add("bottom-feedback-container-bar"),j.classList.add("apt-survey-submit-bar")),j.style.color=e.submitButtonTextColor,j.style.backgroundColor=e.submitButtonBackgroundColor,j.style.borderWidth=e.submitButtonBorderWidth+"px",j.style.borderRadius=e.submitButtonBorderRadius+"px",j.style.borderColor=e.submitButtonBorderColor,j.setAttribute("tabindex",e.mergeFirstSteps?a.NO_TAB_INDEX:F),R.placeholder=e.placeholderText||"Share your thoughts about your choice...",(0,o.addEventListener)(R,"keyup",w);var C=(0,o.createElement)("div","apt-survey-title",null,[r]),T=[C,g,S];e.showFooter&&T.push((0,s.toDom)(e.footer,!1,"apt-survey-footer")),B=(0,o.createElement)("div","apt-survey-step",null,T),B.setAttribute("id","step-"+e.id);var x=function(){w()&&t()};return(0,o.addEventListener)(j,"click",x),(0,o.addEnterKeyDownListener)(j,x),n(j),n(M),!e.mergeFirstSteps&&$.push(r),!e.mergeFirstSteps&&V.push(S),e.mergeFirstSteps&&S.classList.add("apt-survey-show"),e.mergeFirstSteps&&j.classList.add("apt-survey-submit-disabled"),B},this.hide=function(){B.style.display="none"},this.getData=function(){return{selected:O(),comment:R.value,contactMeAllowed:e.showContactMeMessage?M.checked:null,labels:e.labelSetting&&e.labelSetting.enabled?K.getSelectedLabels():[]}},this.getSettings=function(){return e},this.getHtml=function(){return e.titleHtml+e.notSatisfiedHtml+e.satisfiedHtml+e.defaultComment}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(37),a=n(8),s=n(7),l=n(135),c=n(49),d=function(e){return e&&e.__esModule?e:{default:e}}(c),u=n(12),p=n(26),f=n(16),g=(a.TAB_INDEX_START,a.TAB_INDEX_START,a.TAB_INDEX_START,"SMILEY"),h='<svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve" style="width: 40px; height: 40px;"><g id="XMLID_31_" fill="#cfd8dc" stroke-width="0.5"><g><g stroke-width="0.5"><polygon calss="apt-star-polygon" fill="#ffffff" points="61.5,25 45.1,39.6 50.2,61.5 32,49.6 13.8,61.5 18.9,39.6 2.5,25 23.9,23.4 32,2.5 40.1,23.4"></polygon></g></g><g><g><path stroke="#cfd8dc" stroke-width="0.5" d="M51.8,63.7L32,50.8L12.2,63.7l5.6-23.8L0.1,24.2l23.1-1.8L32-0.3l8.8,22.7l23.1,1.8L46.2,39.9L51.8,63.7zM32, 48.4l16.7,10.9L44,39.2l15.1-13.4l-19.7-1.5L32,5.3l-7.4,19.1L4.9,25.9L20,39.2l-4.7,20.1L32,48.4z"></path></g></g></g></svg>';t.default=r},function(e,t,n){"use strict";function r(e,t,n){function r(e,t,n){e.style.color=t.buttonsTextColor,e.style.backgroundColor=t.buttonsBackgroundColor,e.style.borderWidth=t.buttonsBorderWidth+"px",e.style.borderRadius=t.buttonsBorderRadius+"px",e.style.borderColor=t.buttonsBorderColor,e.setAttribute("aria-label",n)}function l(t){return t-e.initialButtonIndex}function f(e,t,n){var r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(t>=l.from&&t<=l.to)return void(n.innerHTML=l.comment)}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}function g(e){for(var t=L.getLabelElements(e),n=document.createDocumentFragment(),r=0;r<t.length;++r)n.appendChild(t[r]);(0,d.arrayFrom)(A.childNodes).forEach(function(e){return A.removeChild(e)}),A.appendChild(n),!A.classList.contains("labelWrapperElement.classList")&&A.classList.add("px-labels-show")}function h(t){if(null!==E){var n=l(E);r(y[n],e,n)}E=t;var o=l(t),i="IN_APP_CES_SURVEY"===e.surveyType;e.showDynamicComment&&f(e.dynamicComments,i?o+1:o,x);var a=y[o];a.style.color=e.selectedButtonsTextColor,a.style.backgroundColor=e.selectedButtonsBackgroundColor,a.style.borderWidth=e.selectedButtonsBorderWidth+"px",a.style.borderRadius=e.buttonsBorderRadius+"px",a.style.borderColor=e.selectedButtonsBorderColor,a.setAttribute("aria-label",t+" selected"),e.labelSetting&&e.labelSetting.enabled&&g(t),O.forEach(function(e){e.style.display="none"}),N.forEach(function(e){return!e.classList.contains("apt-survey-show")&&e.classList.add("apt-survey-show")}),e.mergeFirstSteps&&(k.classList.remove("apt-survey-submit-disabled"),k.setAttribute("tabindex",I)),!e.mergeFirstSteps&&(0,p.isSnoozeButtonEnabled)(e.activationType,e.snoozeButton,e.activationTypes)&&(0,u.hideSnooze)()}function m(){return(0,s.validateComment)(e,C,w)}function v(e,t,i,a){var s=(0,o.createElement)("div","apt-survey-choice",{text:e});r(s,t,i),s.setAttribute("tabindex",a),s.setAttribute("role","button"),s.setAttribute("aria-label",e);var l=function(e){return function(){h(e)}}(e);return(0,o.addEventListener)(s,"click",l),(0,o.addEnterKeyDownListener)(s,l),n(s),s}function b(){return(0,o.isBlank)(e.buttonText)?"Submit":e.buttonText}var y=[],E=null,S=void 0,C=void 0,w=void 0,T=void 0,x=void 0,k=void 0,I=void 0,A=void 0,O=[],N=[],L=void 0,_=a.TAB_INDEX_START+1,F=_;this.focus=function(){var e=null!=E&&y.length?y[0]:S.querySelector('[tabindex="'+_+'"]');e&&(0,i.focusElement)(e)},this.render=function(){var r=(0,i.toDom)(e.titleHtml);F=(0,p.setTabIndexes)(r,F),(0,p.addTabbableEnterListener)();for(var s=e.initialButtonIndex;s<e.numberOfButtons+e.initialButtonIndex;s++){var l=s-e.initialButtonIndex;y.push(v(s,e,l,F)),F+=1}C=(0,o.createElement)("textArea");var d=e.contactMeMessage||"It's okay to contact me about my feedback";T=(0,o.createInput)("checkbox",void 0,!1,void 0,void 0,!1,void 0,{"aria-label":d}),w=(0,o.createElement)("div","apt-error-message",{text:"Comment can be at most 1000 characters"});var u=(0,o.createElement)("div",["apt-contact-wrapper"],void 0,[T,(0,o.createElement)("div","apt-contact-me-text",{text:d,dataAtt:[{name:"aria-hidden",value:"true"}]})]);!e.showContactMeMessage&&(u.style.display="none"),x=e.showDynamicComment?(0,o.createElement)("div"):(0,i.toDom)(e.defaultComment),F=(0,p.setTabIndexes)(x,F);var f=(0,o.createElement)("div",["apt-survey-choices-wrapper","apt-survey-choices-wrapper-"+e.numberOfButtons],null,[(0,o.createElement)("div","apt-survey-choices",null,y),(0,o.createElement)("div",["apt-survey-choices-legend"],null,[(0,o.createElement)("div",null,null,[(0,i.toDom)(e.notSatisfiedHtml)]),(0,o.createElement)("div",null,null,[(0,i.toDom)(e.satisfiedHtml)])])]),g=(0,o.createElement)("div",["apt-survey-comment"],null,[x]),h=(0,o.createElement)("div","apt-survey-submit-text",{text:b()});k=(0,o.createElement)("div","apt-survey-submit",null,[h]);var E=(0,o.createElement)("div","px-submit-container",null,[k]);h.setAttribute("aria-hidden","true"),k.setAttribute("role","button"),k.setAttribute("aria-label",h.textContent);var _=(0,o.createElement)("div","bottom-feedback-container",null,[C,w,"DIALOG"===e.viewType&&u,E]),D=(0,o.createElement)("div","apt-feedback-text-wrapper",null,[_,"BAR"===e.viewType&&(0,o.createElement)("div","",null,[u])]);A=(0,o.createElement)("div",["px-survey-labels"]);var B=[g,A,D],R=e.labelSetting;e.labelSetting&&R.enabled&&(L=new c.default(R.ranges,R),F=L.setTabIndexes(F));var P=(0,o.createElement)("div","apt-survey-feedback",null,B);P.setAttribute("aria-live","polite"),"BAR"===e.viewType&&(_.classList.add("bottom-feedback-container-bar"),k.classList.add("apt-survey-submit-bar")),k.style.color=e.submitButtonTextColor,k.style.backgroundColor=e.submitButtonBackgroundColor,k.style.borderWidth=e.submitButtonBorderWidth+"px",k.style.borderRadius=e.submitButtonBorderRadius+"px",k.style.borderColor=e.submitButtonBorderColor,k.setAttribute("tabindex",e.mergeFirstSteps?a.NO_TAB_INDEX:I),C.placeholder=e.placeholderText||"Share your thoughts about your choice...",C.setAttribute("tabindex",F),F+=1,T.setAttribute("tabindex",F),F+=1,k.setAttribute("tabindex",e.mergeFirstSteps?a.NO_TAB_INDEX:F),I=F,F+=1,(0,o.addEventListener)(C,"keyup",m);var M=(0,o.createElement)("div","apt-survey-title",null,[(0,o.createElement)("div",null,null,[r])]),U=[M,f,P];e.showFooter&&U.push((0,i.toDom)(e.footer,!1,"apt-survey-footer")),S=(0,o.createElement)("div",["apt-survey-step"],null,U),S.setAttribute("id","step-"+e.id);var j=function(){m()&&t()};return(0,o.addEventListener)(k,"click",j),(0,o.addEnterKeyDownListener)(k,j),n(k),n(T),!e.mergeFirstSteps&&O.push(r),!e.mergeFirstSteps&&N.push(P),e.mergeFirstSteps&&P.classList.add("apt-survey-show"),e.mergeFirstSteps&&k.classList.add("apt-survey-submit-disabled"),S},this.hide=function(){S.style.display="none"},this.getData=function(){return{selected:E,comment:C.value,contactMeAllowed:e.showContactMeMessage?T.checked:null,labels:e.labelSetting&&e.labelSetting.enabled?L.getSelectedLabels():[]}},this.getSettings=function(){return e},this.getHtml=function(){return e.titleHtml+e.notSatisfiedHtml+e.satisfiedHtml+e.defaultComment}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(7),a=n(8),s=n(37),l=n(49),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=n(12),u=n(26),p=n(16);t.default=r},function(e,t,n){"use strict";function r(e){function t(){r&&(a.length>0&&/^[~+>]$/.test(a[a.length-1])&&a.push(" "),a.push(r))}var n,r,o,i,a=[],s=[0],l=0,c=/(?:[^\\]|(?:^|[^\\])(?:\\\\)+)$/,d=/^\s+$/,u=[/\s+|\/\*|["'>~+[(]/g,/\s+|\/\*|["'[\]()]/g,/\s+|\/\*|["'[\]()]/g,null,/\*\//g];for(e=e.trim();;){if(r="",o=u[s[s.length-1]],o.lastIndex=l,!(n=o.exec(e))){r=e.substr(l),t();break}if(i=l,l=o.lastIndex,i<l-n[0].length&&(r=e.substring(i,l-n[0].length)),s[s.length-1]<3){if(t(),"["===n[0])s.push(1);else if("("===n[0])s.push(2);else if(/^["']$/.test(n[0]))s.push(3),u[3]=new RegExp(n[0],"g");else if("/*"===n[0])s.push(4);else if(/^[\])]$/.test(n[0])&&s.length>0)s.pop();else if(/^(?:\s+|[~+>])$/.test(n[0])&&(a.length>0&&!d.test(a[a.length-1])&&0===s[s.length-1]&&a.push(" "),1===s[s.length-1]&&5===a.length&&"="===a[2].charAt(a[2].length-1)&&(a[4]=" "+a[4]),d.test(n[0])))continue;a.push(n[0])}else a[a.length-1]+=r,c.test(a[a.length-1])&&(4===s[s.length-1]&&(a.length<2||d.test(a[a.length-2])?a.pop():a[a.length-1]=" ",n[0]=""),s.pop()),a[a.length-1]+=n[0]}return a.join("").trim()}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSelector=r},function(e,t,n){"use strict";function r(e){return i(e,!0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}function o(e){return i(e,!1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=(0,u.normalizeSelector)(e);var o=n.querySelector(e);if(document.head.createShadowRoot||document.head.attachShadow){if(!t&&o)return o;return s(e,",").reduce(function(e,o){if(!t&&e)return e;var i=s(o.replace(/^\s+/g,"").replace(/\s*([>+~]+)\s*/g,"$1")," ").filter(function(e){return!!e}).map(function(e){return s(e,">")}),l=i.length-1,c=i[l][i[l].length-1],u=d(c,n,r),p=a(i,l,n);return t?e=e.concat(u.filter(p)):(e=u.find(p))||null},t?[]:null)}return t?n.querySelectorAll(e):o}function a(e,t,n){return function(r){for(var o=t,i=r,a=!1;i&&!l(i);){var s=!0;if(1===e[o].length)s=i.matches(e[o]);else{var d=[].concat(e[o]).reverse(),u=i,p=!0,f=!1,g=void 0;try{for(var h,m=d[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var v=h.value;if(!u||!u.matches(v)){s=!1;break}u=c(u,n)}}catch(e){f=!0,g=e}finally{try{!p&&m.return&&m.return()}finally{if(f)throw g}}}if(s&&0===o){a=!0;break}s&&o--,i=c(i,n)}return a}}function s(e,t){return e.match(/\\?.|^$/g).reduce(function(e,n){return'"'!==n||e.sQuote?"'"!==n||e.quote?e.quote||e.sQuote||n!==t?e.a[e.a.length-1]+=n:e.a.push(""):(e.sQuote^=1,e.a[e.a.length-1]+=n):(e.quote^=1,e.a[e.a.length-1]+=n),e},{a:[""]}).a}function l(e){return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE||e.nodeType===Node.DOCUMENT_NODE}function c(e,t){var n=e.parentNode;return n&&n.host&&11===n.nodeType?n.host:n===t?null:n}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[];if(n)r=n;else{var o=function e(t){for(var n=0;n<t.length;n++){var o=t[n];r.push(o),o.shadowRoot&&e(o.shadowRoot.querySelectorAll("*"))}};t.shadowRoot&&o(t.shadowRoot.querySelectorAll("*")),o(t.querySelectorAll("*"))}return e?r.filter(function(t){return t.matches(e)}):r}Object.defineProperty(t,"__esModule",{value:!0}),t.querySelectorAllDeep=r,t.querySelectorDeep=o,t.collectAllElementsDeep=d;var u=n(122)},function(e,t,n){"use strict";e.exports=window},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrationMapper=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=n(0),s=n(91),l=s.assign,c=n(92);t.IntegrationMapper=function(){function e(t,n,o){r(this,e),this.initialUserObj=t,this.initialAccountObj=n,this.integrationContext=o,this.mappedUserObj=null,this.mappedAccountObj=null}return o(e,[{key:"mapData",value:function(){var e=!1;switch(this.integrationContext.name){case"aptrinsic-segment":this._mapSegment(),e=!0;break;default:i.logger.log("Ignoring unknown integration "+this.integrationContext.name)}return e}},{key:"getUserObj",value:function(){return this.mappedUserObj}},{key:"getAccountObj",value:function(){return this.mappedAccountObj}},{key:"isSegmentGroupCall",value:function(){return"aptrinsic-segment"===this.integrationContext.name&&this.initialAccountObj&&this.initialAccountObj.anonymousId&&!(0,a.isBlank)(this.initialAccountObj.anonymousId())}},{key:"_mapSegment",value:function(){c(this.integrationContext.version,"1.0.0")>=0&&this._mapSegmentV1()}},{key:"_mapSegmentV1",value:function(){var e=this.initialUserObj.traits(),t=this.initialUserObj.address(),n=l({},this.initialUserObj.traits());if(l(n,{id:this.initialUserObj.userId(),email:this.initialUserObj.email(),firstName:this.initialUserObj.firstName(),lastName:this.initialUserObj.lastName(),gender:this.initialUserObj.gender()&&this.initialUserObj.gender().toUpperCase(),title:e.title,phone:this.initialUserObj.phone(),accountId:this.initialAccountObj.groupId()}),t&&l(n,{street:t.street,countryCode:t.country,stateCode:t.state,city:t.city,postalCode:t.postalCode}),e.company){var r=e.company;l(n,{organization:r.name,organizationIndustry:r.industry,organizationEmployees:r.employee_count&&r.employee_count.toString()})}var o=null;if(this.initialAccountObj.groupId()){var i=this.initialAccountObj.traits();o=l({},i),o.id=this.initialAccountObj.groupId(),o.street=this.initialAccountObj.street(),o.city=this.initialAccountObj.city(),o.countryCode=this.initialAccountObj.country(),o.postalCode=this.initialAccountObj.zip(),o.numberOfEmployees=parseInt(i.employees)}this.mappedUserObj=n,this.mappedAccountObj=o}}]),e}()},function(e,t,n){"use strict";function r(e){var t=e.entries;if(!t)return null;var n=(0,i.arrayFrom)(t,function(e){var t=s(e,m),n=s(t.category,v);return t.category=n,t});return n.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{entries:n}}function o(e){var t=e.kcId,n=e.subscriptionId,r=e.propertyGroupId,o=e.urlPattern,i=e.injectionType,a=e.progressBarSettings,m=e.badgeSettings,v=e.windowSettings,b=e.floatingButtonSettings,y=e.onBoardingSettings,E=e.includePatterns,S=e.excludePatterns,C=e.enableFeedback,w=e.enableOnBoarding,T=e.articleSearchEnabled,x=e.articleProvider,k=e.articleProviderDomain,I=e.environments,A=e.name,O=e.description,N=e.contextualSearchSetting,L=e.contextualSearchTerm,_=s(a,l),F=s(m,c),D=s(v,d),B=s(D.embedKCSettings,u),R=s(B.positionSettings,p),P=s(B.elementSelector,f),M=s(b,g),U=s(y,h);return B.positionSettings=R,B.elementSelector=P,D.embedKCSettings=B,{kcId:t,subscriptionId:n,propertyGroupId:r,urlPattern:o,injectionType:i,progressBarSettings:_,badgeSettings:F,windowSettings:D,floatingButtonSettings:M,onBoardingSettings:U,includePatterns:E,excludePatterns:S,enableFeedback:C,enableOnBoarding:w,articleSearchEnabled:T,articleProvider:x,articleProviderDomain:k,environments:I,name:A,description:O,contextualSearchSetting:N,contextualSearchTerm:L}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterKcContentV1=t.filterKcConfigV1=void 0;var i=n(12),a=n(27),s=a.filterProperties,l=["enabled","countArticle","barBackgroundColor","barFillColor","barHeight","barWidth","textMessage","textMessageColor","textMessageFontSize","progressValueType"],c=["enabled","backgroundColor","textColor","borderColor","fontSize","position"],d=["contentBackgroundColor","headerColor","textColor","hoverTextColor","selectedTabHighlightColor","unselectedTabColor","headerText","headerTextColor","headerIcon","headerFont","textFont","tooltipTextColor","tooltipBackgroundColor","badgeColor","badgeTextColor","newEngagementIcon","completedEngagementIcon","inProgressEngagementIcon","categoryHoverStripeColor","categoryHoverBackgroundColor","categoryHoverBackgroundFill","categoryHoverArrowColor","submitButtonColor","searchResultsTitleColor","searchResultsSummeryColor","botPosition","botPositionOffsetBottom","widgetHeight","feedbackHeaderText","docsSearchHeaderText","showSpeechBobble","showEngagementsType","showCategoryIcon","showEngagementsCompletedIndicator","showEngagementsInProgressIndicator","showEngagementsNotViewedIndicator","engagementsTypeColor","engagementsNotViewedIndicatorColor","engagementsInProgressIndicatorColor","engagementsCompletedIndicatorColor","categoryColor","embedKCSettings","showReadMore","botPositionHorizontalOffset","allowDismiss","dismissButtonColor"],u=["horizontalAlignment","verticalAlignment","positionSettings","elementSelector"],p=["positionVertical","positionHorizontal","positionTopDelta","positionLeftDelta"],f=["cssSelector","type","unique","matchCssSelector","matchTextRule","textRule"],g=["openStateColor","closedStateColor","iconCloseColor","openStateIcon","closedStateIcon","rightPadding","bottomPadding","iconOpenColor","useImage","draggable","imageUrl"],h=["autoSuggestionType","suggestionText","completionText","backgroundColor","textColor"],m=["id","kcId","propertyGroupId","entryType","linkUrl","engagementId","containingListType","title","description","sequence","absoluteTargetUrl","sdkRule","category","articleTitleHtml","articleBodyHtml","articleAuthor","articleDate","articleProvider","articlePropertyGroupId","knowledgeBaseReferenceId"],v=["id","name","subtitle","showBadge"];t.filterKcConfigV1=o,t.filterKcContentV1=r},function(e,t,n){"use strict";function r(e){var t=e.entries;if(!t)return null;var n=(0,i.arrayFrom)(t,function(e){var t=s(e,v),n=s(t.category,y);return t.category=n,t});return n.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{entries:n}}function o(e){var t=e.kcId,n=e.subscriptionId,r=e.propertyGroupId,o=e.urlPattern,i=e.injectionType,a=e.progressBarSettings,v=e.badgeSettings,y=e.tabsSettings,E=e.windowSettings,S=e.floatingButtonSettings,C=e.onBoardingSettings,w=e.includePatterns,T=e.excludePatterns,x=e.enableFeedback,k=e.enableOnBoarding,I=e.articleSearchEnabled,A=e.articleProvider,O=e.articleProviderDomain,N=e.environments,L=e.name,_=e.description,F=e.contextualSearchSetting,D=e.contextualSearchTerm,B=e.staticFields,R=s(a,l),P=s(v,c),M=s(y,d),U=s(B,b),j=s(E,u),H=s(j.embedKCSettings,p),$=s(H.positionSettings,f),V=s(H.elementSelector,g),K=s(S,h),q=s(C,m);return H.positionSettings=$,H.elementSelector=V,j.embedKCSettings=H,{kcId:t,subscriptionId:n,propertyGroupId:r,urlPattern:o,injectionType:i,progressBarSettings:R,badgeSettings:P,tabsSettings:M,windowSettings:j,floatingButtonSettings:K,onBoardingSettings:q,includePatterns:w,excludePatterns:T,enableFeedback:x,enableOnBoarding:k,articleSearchEnabled:I,articleProvider:A,articleProviderDomain:O,environments:N,name:L,description:_,contextualSearchSetting:F,contextualSearchTerm:D,staticFields:U}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterKcContentV2=t.filterKcConfigV2=void 0;var i=n(12),a=n(27),s=a.filterProperties,l=["enabled","countArticle","barBackgroundColor","barFillColor","barHeight","barWidth","categoriesSectionTitle","textMessage","textMessageColor","textMessageFontSize","progressValueType"],c=["enabled","backgroundColor","textColor","borderColor","fontSize","position"],d=["id","hideSingleTab","onboardingIcon","feedbackIcon","knowledgeBaseIcon","onboardingIconColor","feedbackIconColor","knowledgeBaseIconColor","onboardingTabIndex","feedbackTabIndex","knowledgeBaseTabIndex"],u=["contentBackgroundColor","headerColor","textColor","hoverTextColor","selectedTabHighlightColor","unselectedTabColor","headerText","headerTextColor","headerIcon","headerFont","textFont","tooltipTextColor","tooltipBackgroundColor","badgeColor","badgeTextColor","newEngagementIcon","completedEngagementIcon","inProgressEngagementIcon","categoryHoverStripeColor","categoryHoverBackgroundColor","categoryHoverBackgroundFill","categoryHoverArrowColor","submitButtonColor","searchResultsTitleColor","searchResultsSummeryColor","botPosition","botPositionOffsetBottom","widgetHeight","feedbackHeaderText","docsSearchHeaderText","showSpeechBobble","showEngagementsType","showCategoryIcon","showEngagementsCompletedIndicator","showEngagementsInProgressIndicator","showEngagementsNotViewedIndicator","engagementsTypeColor","engagementsNotViewedIndicatorColor","engagementsInProgressIndicatorColor","engagementsCompletedIndicatorColor","categoryColor","embedKCSettings","showReadMore","botPositionHorizontalOffset","allowDismiss","dismissButtonColor","enableOnboardingSearch","knowledgeBaseSearchText"],p=["horizontalAlignment","verticalAlignment","positionSettings","elementSelector"],f=["positionVertical","positionHorizontal","positionTopDelta","positionLeftDelta"],g=["cssSelector","type","unique","matchCssSelector","matchTextRule","textRule"],h=["openStateColor","closedStateColor","iconCloseColor","openStateIcon","closedStateIcon","rightPadding","bottomPadding","iconOpenColor","useImage","draggable","imageUrl"],m=["autoSuggestionType","suggestionText","completionText","backgroundColor","textColor"],v=["id","kcId","propertyGroupId","entryType","linkUrl","engagementId","containingListType","title","description","sequence","absoluteTargetUrl","sdkRule","category","articleTitleHtml","articleBodyHtml","articleAuthor","articleDate","articleProvider","articlePropertyGroupId","knowledgeBaseReferenceId"],b=["guideRedirectMessage","guideRedirectConfirmButton","guideRedirectCancelButton","feedbackDropdownIssue","feedbackDropdownFeatureRequest","feedbackDropdownGeneralFeedback","feedbackDropdownOther","feedbackSubjectPlaceholder","feedbackDescriptionPlaceholder","feedbackSubmitButtonLabel","feedbackThankYouMessage","feedbackLeaveAnotherMessage","knowledgeBaseBlankSearchMessage","knowledgeBaseNoResultMessage","knowledgeBaseInputPlaceholder","knowledgeBaseFailureMessage"],y=["id","name","subtitle","showBadge"];t.filterKcConfigV2=o,t.filterKcContentV2=r},function(e,t,n){"use strict";function r(e){var t=e.entries;if(!t)return null;var n=(0,i.arrayFrom)(t,function(e){var t=s(e,v),n=s(t.category,y);return t.category=n,t});return n.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),{entries:n}}function o(e){var t=e.kcId,n=e.subscriptionId,r=e.propertyGroupId,o=e.urlPattern,i=e.injectionType,a=e.progressBarSettings,v=e.badgeSettings,y=e.tabsSettings,E=e.windowSettings,S=e.floatingButtonSettings,C=e.onBoardingSettings,w=e.includePatterns,T=e.excludePatterns,x=e.enableFeedback,k=e.enableOnBoarding,I=e.articleSearchEnabled,A=e.articleProvider,O=e.articleProviderDomain,N=e.environments,L=e.name,_=e.description,F=e.contextualSearchSetting,D=e.contextualSearchTerm,B=e.staticFields,R=s(a,l),P=s(v,c),M=s(y,d),U=s(B,b),j=s(E,u),H=s(j.embedKCSettings,p),$=s(H.positionSettings,f),V=s(H.elementSelector,g),K=s(S,h),q=s(C,m);return H.positionSettings=$,H.elementSelector=V,j.embedKCSettings=H,{kcId:t,subscriptionId:n,propertyGroupId:r,urlPattern:o,injectionType:i,progressBarSettings:R,badgeSettings:P,tabsSettings:M,windowSettings:j,floatingButtonSettings:K,onBoardingSettings:q,includePatterns:w,excludePatterns:T,enableFeedback:x,enableOnBoarding:k,articleSearchEnabled:I,articleProvider:A,articleProviderDomain:O,environments:N,name:L,description:_,contextualSearchSetting:F,contextualSearchTerm:D,staticFields:U}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterKcContentV3=t.filterKcConfigV3=void 0;var i=n(12),a=n(27),s=a.filterProperties,l=["enabled","countArticle","barBackgroundColor","barFillColor","barHeight","barWidth","categoriesSectionTitle","textMessage","textMessageColor","textMessageFontSize","progressValueType"],c=["enabled","backgroundColor","textColor","borderColor","fontSize","position"],d=["id","hideSingleTab","onboardingIcon","feedbackIcon","knowledgeBaseIcon","onboardingIconColor","feedbackIconColor","knowledgeBaseIconColor","onboardingTabIndex","feedbackTabIndex","knowledgeBaseTabIndex"],u=["contentBackgroundColor","headerColor","textColor","hoverTextColor","selectedTabHighlightColor","unselectedTabColor","headerText","headerTextColor","headerIcon","headerFont","textFont","tooltipTextColor","tooltipBackgroundColor","badgeColor","badgeTextColor","newEngagementIcon","completedEngagementIcon","inProgressEngagementIcon","categoryHoverStripeColor","categoryHoverBackgroundColor","categoryHoverBackgroundFill","categoryHoverArrowColor","submitButtonColor","searchResultsTitleColor","searchResultsSummeryColor","botPosition","botPositionOffsetBottom","widgetHeight","feedbackHeaderText","docsSearchHeaderText","showSpeechBobble","showEngagementsType","showCategoryIcon","showEngagementsCompletedIndicator","showEngagementsInProgressIndicator","showEngagementsNotViewedIndicator","engagementsTypeColor","engagementsNotViewedIndicatorColor","engagementsInProgressIndicatorColor","engagementsCompletedIndicatorColor","categoryColor","embedKCSettings","showReadMore","botPositionHorizontalOffset","allowDismiss","dismissButtonColor","enableOnboardingSearch","knowledgeBaseSearchText"],p=["horizontalAlignment","verticalAlignment","positionSettings","elementSelector"],f=["positionVertical","positionHorizontal","positionTopDelta","positionLeftDelta"],g=["cssSelector","type","unique","matchCssSelector","matchTextRule","textRule"],h=["openStateColor","closedStateColor","iconCloseColor","openStateIcon","closedStateIcon","rightPadding","bottomPadding","iconOpenColor","useImage","draggable","imageUrl"],m=["autoSuggestionType","suggestionText","completionText","backgroundColor","textColor"],v=["id","kcId","propertyGroupId","entryType","linkUrl","engagementId","containingListType","title","description","sequence","absoluteTargetUrl","sdkRule","category","articleTitleHtml","articleBodyHtml","articleAuthor","articleDate","articleProvider","articlePropertyGroupId","knowledgeBaseReferenceId"],b=["guideRedirectMessage","guideRedirectConfirmButton","guideRedirectCancelButton","feedbackDropdownIssue","feedbackDropdownFeatureRequest","feedbackDropdownGeneralFeedback","feedbackDropdownOther","feedbackSubjectPlaceholder","feedbackDescriptionPlaceholder","feedbackSubmitButtonLabel","feedbackThankYouMessage","feedbackLeaveAnotherMessage","knowledgeBaseBlankSearchMessage","knowledgeBaseNoResultMessage","knowledgeBaseInputPlaceholder","knowledgeBaseFailureMessage"],y=["id","name","subtitle","showBadge"];t.filterKcConfigV3=o,t.filterKcContentV3=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BROWSER_DEFAULT_FONTS=["Arial","Times New Roman","Times","Courier New","Courier","Verdana","Georgia","Palatino","Garamond","Bookman","Tahoma","Trebuchet MS","Arial Black","Impact","Comic Sans MS"],t.FONTS_WEIGHTS=[400,500,600,700],t.FONTS_SUBSETS=["cyrillic-ext","greek","cyrillic"]},function(e,t,n){"use strict";function r(e){return a.logger.log("SDK Posting global context to KC"),{type:s,globalContext:e}}function o(){return a.logger.log("SDK Posting current url to KC"),{type:l,url:(0,i.getPageUrl)()}}Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalContextMessage=r,t.getUrlMessage=o;var i=n(0),a=n(3),s="APT_WIDGET_GLOBAL_CONTEXT",l="APT_WIDGET_URL"},function(e,t,n){"use strict";function r(){this.getAttribute=function(){return"url"}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);r.prototype.matchRules=function(e,t,n){return"all"===t?e.every(function(e){return(0,o.matchUrl)(e.value,n,"is"!==e.operator,"isNot"===e.operator)}):e.some(function(e){return(0,o.matchUrl)(e.value,n,"is"!==e.operator,"isNot"===e.operator)})};var i=new r;t.default=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=r},function(e,t,n){"use strict";function r(e,t,n){var r=!1;return null===e?r=t:n===l?r=t||e:n===c&&(r=t&&e),r}function o(e,t,n,r){t.push(e),n.push(null),r.push(null)}function i(e,t,n,o,i){e.pop(),"boolean"==typeof i&&(t[o]=r(t[o],i,n[o]));var a=e[e.length-1];void 0!==a&&(t[a]=r(t[a],t[o],n[a]))}function a(e,t,n,o,i,a){var s=a;return"boolean"==typeof n&&(e[o]=r(e[o],n,t[o])),t[o]=i,i===l?s+=1:i===c&&(s+=2),s}function s(e,t){var n=[],s=[],p=[];e[0]!==d&&(e=""+d+e+u);for(var f=-1,g="",h=0;h<e.length;h++){var m=e[h],v=n[n.length-1],b=m===d,y=m===u;if(b)f+=1,o(f,n,s,p),g="";else if(y)i(n,s,p,v,t[g]),g="";else if(" "===m)p[v]&&"boolean"==typeof t[g]&&(s[v]=r(s[v],t[g],p[v]),g="");else{var E=(m+e[h+1]).toUpperCase()===l,S=(m+e[h+1]+e[h+2]).toUpperCase()===c;E||S?(h=a(s,p,t[g],v,E?l:c,h),g=""):g+=m}}return s[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var l="OR",c="AND",d="(",u=")"},function(e,t,n){"use strict";function r(e){try{for(var t=window,n=e&&e.split("."),r=n&&n.pop(),o=0;o<n.length;o++)t=t[n[o]];if("function"==typeof t[r])return t[r].apply(t)}catch(e){console.error("apt. Failed to execute function. Error is",e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.executeFunctionByName=r},function(e,t,n){"use strict";function r(e,t){var n=l[e];if(n)return t(n);var r=d[e];return i.AjaxUtil.getData(r,function(n){var r=(0,s.toDom)(n,!0);return l[e]=r,t(r)}),null}Object.defineProperty(t,"__esModule",{value:!0}),t.getImage=t.IMAGE_MAP=void 0;var o=n(5),i=n(11),a=n(2),s=n(7),l=new o.LocalCache,c=function(e){return a.staticContentHost+"/images/"+e+".svg"},d=t.IMAGE_MAP={unsatisfied:c("unsatisfied"),satisfied:c("satisfied"),neutral:c("neutral")};t.getImage=r},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 1.5l12 13.125-12 13.125"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><g stroke-width="4"><path d="M13.5 5.25l9.375 9.375L13.5 24M23.25 14.5h-18"></path></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g><path d="m15,3.75l12.75,11.25l-12.75,11.25l-5.25,0l12.75,-11.25l-12.75,-11.25l5.25,0z"></path><path d="m3,13l21,0l0,3.75l-21,0l0,-3.75z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><g stroke-linecap="round" stroke-linejoin="round" stroke-width="4"><path d="M15.75 7.5l6 7.5-6 7.5M6.75 15h15"></path></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g><path d="m2.75,13.75l21,0l0,3l-21,0l0,-3z"></path><path d="m15.5,23.442l2.09,2.058l10.285,-10.125l-10.284,-10.125l-2.091,2.058l8.194,8.067l-8.194,8.067z" fill-rule="nonzero"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M19.695 16.125l-4.32 4.253 1.394 1.372L23.625 15l-6.856-6.75-1.394 1.372 4.32 4.253H7.5v2.25h12.195z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m12.06,10.304l1.47,4.386c0.059,0.17 0.059,0.45 0,0.621l-1.47,4.386c-0.174,0.518 0.046,0.707 0.491,0.422l7.475,-4.774c0.3,-0.19 0.298,-0.499 0,-0.689l-7.475,-4.774c-0.444,-0.283 -0.665,-0.096 -0.492,0.422l0.001,0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m10.05,6.097a0.664,0.664 0 0 0 -0.3,0.537c1.493,2.912 3.285,5.865 4.731,8.366l-4.64,8.043a0.662,0.662 0 0 0 0.12,0.788c0.21,0.196 0.555,0.225 0.793,0.067c4.154,-2.896 8.47,-5.765 12.185,-8.346c0.148,-0.11 0.311,-0.225 0.311,-0.553a0.656,0.656 0 0 0 -0.281,-0.533c-4.194,-2.855 -8.465,-5.794 -12.205,-8.355c-0.296,-0.166 -0.435,-0.125 -0.714,-0.014z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m25.682,16.355c0.762,-0.77 0.756,-2.02 -0.01,-2.792l-9.083,-9.116c-2.12,-2.113 -5.301,1.057 -3.181,3.17l3.963,3.95c0.66,0.658 0.437,1.19 -0.485,1.19l-10.886,0a2.247,2.247 0 0 0 -2.25,2.243a2.246,2.246 0 0 0 2.25,2.241l10.886,0c0.927,0 1.149,0.532 0.485,1.194l-3.963,3.947c-2.12,2.115 1.06,5.285 3.18,3.17l9.094,-9.197z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m27.508,15.032l-13.964,8.693l0,-6.015l-11.081,0l0,-5.45l11.08,0l0,-5.92l13.965,8.692zm1.742,0c0,-0.63 -0.33,-1.228 -0.841,-1.575l-13.964,-8.693a1.653,1.653 0 0 0 -1.742,-0.032c-0.541,0.315 -0.87,0.913 -0.87,1.575l0,4.094l-9.342,0c-0.96,0 -1.742,0.82 -1.742,1.827l0,5.449c0,1.008 0.781,1.827 1.742,1.827l9.34,0l0,4.189c0,0.662 0.331,1.26 0.87,1.575c0.541,0.315 1.202,0.315 1.743,-0.032l13.964,-8.693c0.51,-0.283 0.841,-0.881 0.841,-1.511l0.001,0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m16.616,22.44a0.591,0.591 0 0 1 -0.345,-0.533l0,-3.365l-10.331,1.423a0.625,0.625 0 0 1 -0.482,-0.14a0.591,0.591 0 0 1 -0.208,-0.447l0.003,-8.76c0,-0.17 0.077,-0.336 0.208,-0.448a0.615,0.615 0 0 1 0.482,-0.14l10.331,1.423l0,-3.362c0,-0.229 0.134,-0.435 0.345,-0.533a0.62,0.62 0 0 1 0.641,0.072l8.765,6.905a0.587,0.587 0 0 1 0,0.922l-8.77,6.908a0.597,0.597 0 0 1 -0.639,0.075zm8.066,-7.444l-7.199,-5.67l0,3.485l-11.019,-1.511l0,7.4l11.019,-1.512l0,3.488l7.2,-5.679l-0.001,-0.001z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12.5 3l9.75 11.625L12.5 26.25"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-width="4" d="M11.5 5.25l9.375 9.375L11.5 24"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m13,3.75l12.75,11.25l-12.75,11.25l-5.25,0l12.75,-11.25l-12.75,-11.25l5.25,0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M12.75 7.5l6 7.5-6 7.5"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path stroke="none" d="m10.5,23.442l2.09,2.058l10.285,-10.125l-10.284,-10.125l-2.091,2.058l8.194,8.067l-8.194,8.067z" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M12 20.378l1.394 1.372L20.25 15l-6.856-6.75L12 9.622 17.463 15z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><g stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.75 1.5l12 13.125-12 13.125M2.25 14.5h24"></path></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><g stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M3.75 14.5H24M16.5 3l9.75 11.625L16.5 26.25"></path></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 15l7 6L24 9"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g fill-rule="evenodd" fill="none"><path stroke="none" d="m0,0l30,0l0,30l-30,0l0,-30z"></path><g stroke-width="4" stroke-linejoin="round" stroke-linecap="round"><path d="m15.75,7.5l6,7.5l-6,7.5m-9,-7.5l15,0"></path></g></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="m5,21.237c0.261,-3.28 1.917,-9.413 10.625,-9.413l0,-3.204c-0.001,-0.234 0.13,-0.45 0.336,-0.555a0.602,0.602 0 0 1 0.64,0.06l8.01,6.082c0.245,0.187 0.389,0.48 0.389,0.79a0.99,0.99 0 0 1 -0.39,0.79l-7.999,6.08a0.601,0.601 0 0 1 -0.647,0.069a0.618,0.618 0 0 1 -0.34,-0.564l0,-3.204s-5.678,-1.057 -9.534,3.526a0.62,0.62 0 0 1 -0.703,0.16a0.636,0.636 0 0 1 -0.386,-0.617l-0.001,0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="m21.058,12.17l-3.12,-3.242a1.427,1.427 0 0 1 0,-2.012a1.416,1.416 0 0 1 2.005,0l5.647,5.665a1.42,1.42 0 0 1 0,1.997l-5.648,5.665a1.408,1.408 0 0 1 -1.996,0.007a1.42,1.42 0 0 1 -0.008,-2.004l3.12,-3.243l-9.822,0c-0.387,0 -0.758,0.158 -1.025,0.44a1.42,1.42 0 0 0 -0.387,1.047l0,5.594c0,0.782 -0.632,1.416 -1.412,1.416c-0.78,0 -1.411,-0.634 -1.411,-1.416l0,-5.594a4.258,4.258 0 0 1 1.214,-3.05a4.229,4.229 0 0 1 3.02,-1.27l9.823,0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="m12.986,22l-5.986,-5.621l1.513,-1.63l4.321,4.052l9.502,-10.801l1.664,1.479l-11.014,12.521z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path strok="none" d="m10.288,14.997l3.617,2.63l7.593,-9.584a1.352,1.352 0 0 1 1.838,-0.313l0.101,0.071c0.597,0.404 0.743,1.197 0.324,1.773l-8.285,12.307c-0.313,0.43 -0.623,0.58 -1.168,0.615c-0.545,0.035 -0.875,-0.16 -1.202,-0.476l-4.715,-5.197a1.256,1.256 0 0 1 0,-1.823l0.007,-0.003a1.373,1.373 0 0 1 1.89,0z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="m8.133,11.868l6.355,4.846l9.237,-10.374a1.021,1.021 0 0 1 1.431,-0.09c0.378,0.33 0.454,0.885 0.179,1.303l-10.847,16.447l-7.798,-10.752a0.997,0.997 0 0 1 0.233,-1.4c0.364,-0.26 0.856,-0.251 1.21,0.02z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M23.206 8.831A2.636 2.636 0 0 0 21.286 8c-.725 0-1.407.295-1.918.831l-6.053 6.322-2.684-2.805a2.635 2.635 0 0 0-1.919-.831c-.724 0-1.407.295-1.92.831-1.056 1.105-1.056 2.904.001 4.01l4.602 4.809a2.618 2.618 0 0 0 3.41.367c.156-.108.3-.23.428-.365l7.97-8.327A2.884 2.884 0 0 0 24 10.837a2.888 2.888 0 0 0-.794-2.006z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M19.695 16.125l-4.32 4.253 1.394 1.372L23.625 15l-6.856-6.75-1.394 1.372 4.32 4.253H7.5v2.25h12.195z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g fill="none" fill-rule="evenodd"><path stroke="none" d="M0 0h30v30H0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M17.332 8.003c.08.011.156.045.22.098l7.273 6.034c.11.091.175.232.175.38 0 .15-.065.29-.175.381l-7.273 6.034a.432.432 0 0 1-.476.052.487.487 0 0 1-.256-.43v-2.42c-.576-.025-1.863-.06-3.764.287-2.268.413-5.046 1.367-7.302 3.461a.433.433 0 0 1-.55.04.498.498 0 0 1-.182-.552c1.899-6.21 7.676-9.169 11.798-10.347V8.487c0-.14.054-.273.153-.365a.435.435 0 0 1 .359-.118v-.001z"></path></g></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="m10.05,6.097a0.664,0.664 0 0 0 -0.3,0.537c1.493,2.912 3.285,5.865 4.731,8.366l-4.64,8.043a0.662,0.662 0 0 0 0.12,0.788c0.21,0.196 0.555,0.225 0.793,0.067c4.154,-2.896 8.47,-5.765 12.185,-8.346c0.148,-0.11 0.311,-0.225 0.311,-0.553a0.656,0.656 0 0 0 -0.281,-0.533c-4.194,-2.855 -8.465,-5.794 -12.205,-8.355c-0.296,-0.166 -0.435,-0.125 -0.714,-0.014z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="m9,6.634c6.353,8.365 0.09,16.41 0.09,16.41a0.662,0.662 0 0 0 0.12,0.787c0.21,0.196 0.556,0.225 0.794,0.067c4.154,-2.896 8.47,-5.765 12.185,-8.346c0.148,-0.11 0.311,-0.225 0.311,-0.553a0.656,0.656 0 0 0 -0.281,-0.533c-4.194,-2.855 -8.465,-5.794 -12.205,-8.355c-0.296,-0.166 -0.435,-0.125 -0.714,-0.014a0.665,0.665 0 0 0 -0.3,0.537z"></path></svg>'},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){lt=!0,e[qe].remove("selected"),e[qe].add("selected")}function a(e){lt=!1,e[qe].remove("selected")}function s(){var e=void 0;ot=(0,De.setBadgeTooltipFroala)({selector:".apt-badge-tippy .tippy-tooltip .tippy-content",events:[["focus",function(){e=setInterval(function(){je.repositionTooltip()},300)}],["blur",function(){clearInterval(e)}],["contentChanged",function(){i(Qe.saveButton);var e=ot("html.get");je.updateTooltipContent(e)}]]})}function l(e){var t=Ee.default.getStickToBadgeAttributes(),n=(t.positionHorizontal,t.positionVertical,t.positionTopDelta,t.positionLeftDelta,ft.getSelectedStep());if(e){var r=(0,Ie.drawBadges)([{badgeSettings:Object.assign(Ee.default.getBadge(),{clickCallback:function(){},isPreview:!0})}],null,!0),o=J(r,1);je=o[0],setTimeout(function(){ht.showTemplate({isDom:!0,element:je.getDomElement()},n,!1)},0)}else(0,ve.findInAll)(y(n.elementSelector),(0,me.getRegisteredIframes)(),function(e){if(pt.hideAll(),e&&e.element){var t={element:e.element,isDom:!0};ht.showTemplate(t,n,!1),je.destroy()}else je.destroy(),Qe.selector.enable(),dt.enable(),(0,pe.showMessage)("warning","Tooltip does not have selectors")})}function c(e,t){var n=y(e);(0,ve.findInAll)(n,(0,me.getRegisteredIframes)(),function(e){e&&(e.iframeData?be.default.getElementLocation(e.iframeData,n,function(e){ht.showTemplate({isDom:!1,elementRect:e[0]},t)}):e.element&&ht.showTemplate({isDom:!0,element:e.element},t))})}function d(e,t){403===e?(0,pe.showMessage)("confirm","Cannot load editor data, please validate you have sufficient permissions"):401===e?Qe.exit():400===e&&(t?(0,pe.showMessage)("confirm","Invalid URL:\n"+t):(0,pe.showMessage)("error","An error occurred during save"))}function u(e){switch(e){case"BADGE":return Ve.querySelector(".apt-badge");case"HOTSPOT":return Ve.querySelector(".apt-hotspot-element");default:return Ve.querySelector(".apt-guide-popup")}}function p(e,t,n){var r=u(e);if(r){var o=$e.getComputedStyle(r,null);et={top:parseInt(o.top,10)-parseInt(t,10),left:parseInt(o.left,10)-parseInt(n,10)}}}function f(e,t,n){nt=parseInt(t,10),rt=parseInt(n,10),e=parseInt(e,10);var r=Ve.querySelector(".apt-guide-overlay-top[style]"),o=Ve.querySelector(".apt-guide-overlay-bottom[style]"),i=Ve.querySelector(".apt-guide-overlay-left[style]"),a=Ve.querySelector(".apt-guide-overlay-right[style]");if(r){var s=$e.getComputedStyle(r,null);tt.topOverlay={left:parseInt(s.left,10)+e,width:parseInt(s.width,10)-2*e,height:parseInt(s.height,10)+e}}if(o){var l=$e.getComputedStyle(o,null);tt.bottomOverlay={left:parseInt(l.left,10)+e,width:parseInt(l.width,10)-2*e,top:parseInt(l.top,10)-e}}if(i){var c=$e.getComputedStyle(i,null);tt.leftOverlay={width:parseInt(c.width,10)+e}}if(a){var d=$e.getComputedStyle(a,null);tt.rightOverlay={left:parseInt(d.left,10)-e,width:parseInt(d.width,10)+e}}}function g(e,t,n){var r=e.type;je&&je.destroy(),"DIALOG"===r?(Qe.selector.disable(),dt.disable(),ht.showTemplate(void 0,e)):"TOOLTIP"!==r&&"HOTSPOT"!==r&&"BADGE"!==e.type||(0,ve.findInAll)(y(e.elementSelector),(0,me.getRegisteredIframes)(),function(o){if(o)if(o.iframeData)be.default.selectorHighlightAll(e.elementSelector.selector,e.id,o.iframeData),be.default.isElementVisible(o.iframeData,e.elementSelector.selector,function(n){if(n[0]){var i=Ee.default.getAppliedStepData(t);(0,Q.isObjectEmpty)(i)||Object.assign(e,i),be.default.getElementLocation(o.iframeData,y(e.elementSelector),function(t){if("BADGE"===r){var n=Object.assign({},e);n.isPreview=!0,je=new ke.Badge(n,null,{rect:t[0],isVisible:!0,isExist:!0,pageYOffset:window.pageYOffset}),je.setEditMode(!0),je.render()}else ht.showTemplate({isDom:!1,elementRect:t[0]},e)})}else(0,pe.showMessage)("warning","Linked element found but is not currently visible.")});else if(o.element&&(0,Q.isElementVisible)(o.element))if(Qe.selector.highlightAll([o.element],null,{border:"apt-guide-step-highlight",icon:"apt-guide-step-icon-highlight"},{id:e.id}),(0,Q.isElementVisible)(o.element,!1)){var i=Ee.default.getAppliedStepData(t);(0,Q.isObjectEmpty)(i)||Object.assign(e,i),"BADGE"!==e.type&&ht.showTemplate({isDom:!0,element:o.element},e,n);var a=e.isLinked&&"BADGE"===e.type;if(a){Qe.selector.disable();var l=Object.assign({},e);l.isPreview=!0,je=new ke.Badge(l,o.element),je.setEditMode(!0),je.render(),s()}}else(0,pe.showMessage)("warning","Linked element found but is not currently visible.");else e.elementSelector&&e.elementSelector.selector&&(0,pe.showMessage)("warning","Step element not found!. The element selector "+e.elementSelector.selector+" was not found in "+$e.location.href+".");!e.isLinked&&Qe.selector.enable(),dt.enable()},!1,!1,e.autoScroll)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("DIALOG"===e.type)return!0;if("BADGE"===e.type){return Object.keys(e.elementSelector).reduce(function(t,n){var r=e.elementSelector[n];return r&&(t=!!r),"htmlTextRule"===n&&(!r||r.operator&&r.values||(t=!1)),t},!1)}if("TOOLTIP"===e.type||"HOTSPOT"===e.type){if(!t&&0===e.sequenceNumber&&"TOOLTIP"===e.type){var n=Ee.default.getBadgeEnabled();if(e.stickToBadge&&n)return!0}return!!e.elementSelector&&(!(e.elementSelector.matchCssSelector&&!e.elementSelector.selector)&&(!(e.elementSelector.matchTextRule&&!e.elementSelector.htmlTextRule)&&!(!e.elementSelector.matchCssSelector&&!e.elementSelector.matchTextRule)))}return!1}function m(e){vt=null;var t=ft.getSelectedStep(),n=dt.getCssSelector(),r="DIALOG"===t.type||t.elementSelector&&t.elementSelector.selector||z(t);e?(je&&je.clear(),a(Qe.saveButton),ft.selectStep(t.id,Qe,t.linked,n)):r&&i(Qe.saveButton)}function v(e,t){var n=Pe.open({appendLocation:(0,Ce.getConfig)("framesetMode")?"html":"body",unsafeContent:ft.getSelect().outerHTML,showCloseButton:!0,afterOpen:function(){(0,Ce.getBody)().classList.add("apt-vex"),this.rootEl[qe].add("apt-vex"),this.contentEl[qe].add("apt-popup"),this.contentEl[qe].add("apt-popup-step-select");var r=this.contentEl.querySelector(".aptr-step-select-container"),o=this.contentEl.querySelector(".aptr-step-dropdown-container"),i=0;(0,Q.addEventListener)(r,"click",function(){i=0===i?1:0,o.style.display=0===i?"none":"block"});for(var a=ft.getSteps(),s=this.contentEl.querySelectorAll(".aptr-step-dropdown-container > .apt-step-option"),l=0;l<s.length;l++)!function(r){(0,Q.addEventListener)(s[r],"click",function(o){return function(){ft.selectStep(o,Qe),n.close(),Qe.showLinked("DIALOG"===a[r].type?null:e,t)}}(a[r].id))}(l);var c=this.contentEl.querySelector(".vex-close");c&&(c.style.display="none"),ut.positionElement(this.contentEl,e,"left","center")||ut.positionElement(this.contentEl,e,"right","center")||ut.positionElement(this.contentEl,e,"center","top")||ut.positionElement(this.contentEl,e,"center","bottom")||ut.positionElement(this.contentEl,e,"left","top")||ut.positionElement(this.contentEl,e,"left","bottom")||ut.positionElement(this.contentEl,e,"right","top")||ut.positionElement(this.contentEl,e,"right","bottom")},afterClose:function(){(0,Ce.getBody)().classList.remove("apt-vex")}})}function b(e,t,n,r){try{if((0,Ce.isIframe)())he.default.guideElementSelected(t,n);else{if(!ft.isSelected())return void(0,pe.showMessage)("warning","Please select step first!");if((0,ve.findInAll)({matchCssSelector:!0,cssSelector:t.defaultSelector},(0,me.getRegisteredIframes)(),function(e){e&&e.length>1&&(0,pe.showMessage)("warning","There is more than one element on page with same selector")},!0,!0),t.randomDetected){var o=t.randomAlternative;(0,pe.showMessage)("confirm","Random element selector has been detected: </br>"+t.defaultSelector+"</br>Aptrinsic would like to suggest an alternative custom selector",function(){dt.overrideValue(o)},{buttonText:"View New Selector",buttonNoText:"No Thanks",contentClass:"apt-selector-message"})}if(ft.isSelected()&&"DIALOG"!==ft.getSelectedStep().type){if(r){var i={matchCssSelector:!0,cssSelector:t.defaultSelector,matchTextRule:!1};be.default.getElementLocation(r,i,function(e){Qe.showLinked({isDom:!1,elementRect:e[0]},t,n)})}else Qe.showLinked({isDom:!0,element:e},t,n);Qe.selector.disable(!0)}}}catch(e){ue.logger.logInternalError(e)}}function y(e){return e?{matchCssSelector:e.matchCssSelector,cssSelector:e.selector,matchTextRule:e.matchTextRule,textRuleOperator:e.htmlTextRule&&e.htmlTextRule.operator,textRuleValues:e.htmlTextRule&&e.htmlTextRule.values}:null}function E(e,t){var n=Object.assign({},e),r=(0,xe.resolveUrlsWithPlaceholdersInHTML)(e.html);return!t||"TOOLTIP"!==e.type||e.positionHorizontal&&e.positionVertical?(Object.assign(n,{id:e.id,content:r,elementSelector:y(e.elementSelector),backgroundColor:e.backgroundColor,height:e.height,width:e.width,positionHorizontal:e.positionHorizontal,positionVertical:e.positionVertical,positionTopDelta:e.positionTopDelta,positionLeftDelta:e.positionLeftDelta,sequenceNumber:e.sequenceNumber,showPreviousButton:e.showPreviousButton,type:e.type,total:ft.getTotalSteps(),shadow:e.shadow,autoScroll:e.autoScroll,shadowSettings:{fill:e.shadowFill,offsetX:e.shadowOffsetX,offsetY:e.shadowOffsetY,blur:e.shadowBlur,spread:e.shadowSpread,color:e.shadowColor},navigation:{backgroundColor:e.navBackgroundColor,backgroundFill:e.navBackgroundFill,backgroundRadius:e.navCornerRadius,labelColor:e.navColor,nextStepUrl:e.nextStepUrl,nextStepNewTab:e.nextStepInNewTab,useElementListener:e.addElementListener,nextButtonAction:e.nextButtonAction,nextStepTrigger:e.nextStepTrigger},overlay:{modal:e.modal,color:e.overlayColor,fill:e.overlayFill,padding:e.overlayPadding,blockElement:e.overlayBlockElement},hotspotSettings:{spotColor:e.hotspotSpotColor,spotSize:e.hotspotSpotSize,animationColor:e.hotspotAnimatedColor,animationDuration:e.hotspotAnimatedDuration,animationCount:e.hotspotAnimationCount,animationDelay:e.hotspotAnimationDelay,elementClickTrigger:e.hotspotElementClickTrigger},showTitle:e.showTitle,titleHtml:e.title}),n):((0,pe.showMessage)("warning",'Step "'+e.name+'" is not properly positioned, the guide preview will skip it until it is positioned',{messageTime:5e3}),null)}function S(e,t){try{var n={};n.guideSettings={footer:ht.getFooter(),id:e.id,buttonType:e.buttonType,borderRadius:e.borderRadius,modal:e.modal,overlayColor:e.overlayColor,overlayFill:e.overlayFill,overlayPadding:e.overlayPadding,endButtonText:e.endButtonText,restartButtonText:e.restartButtonText,getStartedButtonText:e.getStartedButtonText,preview:t,coreStyling:e.coreStyle,overrideStyling:e.subscriptionStyle,engagementCoreStyling:e.engagementCoreStyle,zIndex:2147483647,showStepCounter:e.showStepCounter,stepCounterLabelText:e.stepCounterLabel,skipButton:e.skipButton,startButton:e.startButton,snoozeButton:e.snoozeButton,activationTypes:e.activationTypes},n.guideSettings.skipButton.enabled=e.skipButton.visible,n.guideSettings.snoozeButton.enabled=e.snoozeButton.visible;for(var r=[],o=0;o<e.steps.length;o++){var i=E(e.steps[o],t);i&&r.push(i)}return n.steps=r,n}catch(e){ue.logger.logInternalError(e)}}function C(e){try{403===e?((0,pe.showMessage)("error","Cannot load guide data, check tag match the product of the guide"),Qe.exit.call(Qe)):401===e&&Qe.exit.call(Qe)}catch(e){ue.logger.logInternalError(e)}}function w(e){try{var t=e.split("-");return t.length<3?null:{groupId:t[1],propertyId:t[2]}}catch(e){ue.logger.logInternalError(e)}}function T(){Qe.selector.removeHighlighted("main",!1),be.default.guideRemoveHighlighted("main")}function x(e,t,n,r){u(ft.getSelectedStep().type)&&ht.changePosition(n,r,e,t)}function k(e,t,n,r){if("TOOLTIP"===ft.getSelectedStep().type)"none"===e.style.display&&(e.style.display="block",e.style.visibility="visible"),"none"===t.style.display&&(t.style.display="block",t.style.visibility="visible"),"none"===r.style.display&&(r.style.display="block",r.style.visibility="visible"),"none"===n.style.display&&(n.style.display="block",n.style.visibility="visible");else if("DIALOG"===ft.getSelectedStep().type){var o=Ve.querySelector(".apt-vex.apt-popup-disable-overlay .vex-overlay");"none"===o.style.display&&(o.style.display="block")}}function I(e,t,n,r,o){if("TOOLTIP"===ft.getSelectedStep().type)o?(e.style.display="block",t.style.display="block",r.style.display="block",n.style.display="block",e.style.visibility="visible",t.style.visibility="visible",r.style.visibility="visible",n.style.visibility="visible"):(e.style.display="none",t.style.display="none",r.style.display="none",n.style.display="none",e.style.visibility="hidden",t.style.visibility="hidden",r.style.visibility="hidden",n.style.visibility="hidden");else if("DIALOG"===ft.getSelectedStep().type){var i=Ve.querySelector(".apt-vex.apt-popup-disable-overlay .vex-overlay");i.style.display=o?"block":"none"}if(!o){var a=S(Qe.guide);A(a.guideSettings.overlayColor,a.guideSettings.overlayFill),N(a.guideSettings.overlayPadding)}}function A(e,t){t=parseInt(t,10);var n=(0,Q.hexToRgba)(e,t/100);if("TOOLTIP"===ft.getSelectedStep().type){var r=Ve.querySelector(".apt-guide-overlay-top[style]"),o=Ve.querySelector(".apt-guide-overlay-bottom[style]"),i=Ve.querySelector(".apt-guide-overlay-left[style]"),a=Ve.querySelector(".apt-guide-overlay-right[style]");k(r,o,i,a),r.style.background=n,o.style.background=n,i.style.background=n,a.style.background=n}else if("DIALOG"===ft.getSelectedStep().type){var s=Ve.querySelector(".apt-vex.apt-popup-disable-overlay .vex-overlay");s.style.background=n,s.style.display=t>0?"block":"none"}}function O(e){var t=null,n=null,r=null,o=null;"TOOLTIP"===ft.getSelectedStep().type&&(t=Ve.querySelector(".apt-guide-overlay-top[style]"),n=Ve.querySelector(".apt-guide-overlay-bottom[style]"),r=Ve.querySelector(".apt-guide-overlay-left[style]"),o=Ve.querySelector(".apt-guide-overlay-right[style]")),I(t,n,r,o,e)}function N(e){var t=Ve.querySelector(".apt-guide-overlay-top[style]"),n=Ve.querySelector(".apt-guide-overlay-bottom[style]"),r=Ve.querySelector(".apt-guide-overlay-left[style]"),o=Ve.querySelector(".apt-guide-overlay-right[style]");if(k(t,n,r,o),e&&tt){t&&(tt.topOverlay&&(t.style.left=tt.topOverlay.left-parseInt(e,10)+"px"),tt.topOverlay&&(t.style.width=tt.topOverlay.width+2*parseInt(e,10)+"px"),tt.topOverlay&&(t.style.height=tt.topOverlay.height-parseInt(e,10)+"px")),n&&(tt.bottomOverlay&&(n.style.left=tt.bottomOverlay.left-parseInt(e,10)+"px"),tt.bottomOverlay&&(n.style.top=tt.bottomOverlay.top+parseInt(e,10)+"px"),tt.bottomOverlay&&(n.style.width=tt.bottomOverlay.width+2*parseInt(e,10)+"px")),r&&tt.leftOverlay&&(r.style.width=tt.leftOverlay.width-parseInt(e,10)+"px"),o&&(tt.rightOverlay&&(o.style.left=tt.rightOverlay.left+parseInt(e,10)+"px"),tt.rightOverlay&&(o.style.width=tt.rightOverlay.width-parseInt(e,10)+"px"));var i=parseInt(o.style.left,10)-parseInt(t.style.left,10)-parseInt(t.style.width,10);i>0&&(t.style.width=parseInt(t.style.width,10)+i+"px",n.style.width=parseInt(n.style.width,10)+i+"px")}}function L(e,t,n,r){var o=ft.getSelectedStep(),i=o.type,a=u(i);$e.getComputedStyle(a);return ht.changePosition(e,t,n,r)}function _(e){Ve.querySelector(".apt-guide-popup>.apt-step-content.apt-sdk "+(0,ce.getSelectorByVersion)(Ve,"apt-step-footer")).querySelector(".apt-step-footer-prev").style.display=e?"block":"none"}function F(e,t){var n=Ve.querySelector(".apt-guide-popup>.apt-step-content.apt-sdk "+(0,ce.getSelectorByVersion)(Ve,"apt-step-footer"));if(n){var r=n.querySelector(".apt-step-footer-prev");e&&r&&(r.textContent=e);var o=n.querySelector(".px-step-navigation-next");t&&o&&(o.textContent=t)}}function D(e,t){var n=Ve.querySelector(".apt-guide-popup>.apt-step-content.apt-sdk "+(0,ce.getSelectorByVersion)(Ve,"apt-step-footer")),r=n.querySelector(".apt-step-footer-prev"),o=n.querySelector((0,ce.getSelectorByVersion)(Ve,"apt-step-footer-next"));n.style.display=e?"flex":"none",o.style.display=e?"block":"none",r&&(r.style.display=e&&t?"block":"none"),st&&st.toggleAppearanceSettings("overlayBlock",e)}function B(e,t,n){if(e){e&&e.repositionInterval>0&&(n.repositionInterval=e.repositionInterval),e&&(e.modal||!1===e.modal)&&(n.modal=e.modal),e&&e.name&&(n.name=e.name),e&&e.modal&&(e.overlayPadding||0===e.overlayPadding)&&(n.overlayPadding=e.overlayPadding),e&&e.modal&&e&&e.overlayColor&&(n.overlayColor=e.overlayColor),e&&e.modal&&e&&(e.overlayFill||0===e.overlayFill)&&(n.overlayFill=e.overlayFill),e&&e.modal&&(e.overlayBlockElement||0==e.overlayBlockElement)&&(n.overlayBlockElement=e.overlayBlockElement),e&&e.positionVertical&&(n.positionVertical=e.positionVertical),e&&e.positionHorizontal&&(n.positionHorizontal=e.positionHorizontal),e&&void 0!==e.positionTopDelta&&(n.positionTopDelta=e.positionTopDelta),e&&void 0!==e.positionLeftDelta&&(n.positionLeftDelta=e.positionLeftDelta),e&&e.nextStepUrl&&(n.nextStepUrl=e.nextStepUrl),e&&-1===[null,void 0].indexOf(e.showPreviousButton)&&(n.showPreviousButton=e.showPreviousButton),Ee.default.isLastStep()&&e.endButtonText&&(n.endButtonText=e.endButtonText),Ee.default.isLastStep()&&e.restartButtonText&&(n.restartButtonText=e.restartButtonText),e&&e.hotspotSpotSize&&(n.hotspotSpotSize=e.hotspotSpotSize),e&&e.hotspotSpotColor&&(n.hotspotSpotColor=e.hotspotSpotColor),e&&e.hotspotAnimatedColor&&(n.hotspotAnimatedColor=e.hotspotAnimatedColor),e&&e.hotspotAnimationDuration&&(n.hotspotAnimationDuration=e.hotspotAnimationDuration),e&&e.hotspotAnimationCount&&(n.hotspotAnimationCount=e.hotspotAnimationCount),e&&e.hotspotAnimationDelay&&(n.hotspotAnimationDelay=e.hotspotAnimationDelay),e&&e.nextButtonAction&&(n.nextButtonAction=e.nextButtonAction),e&&e.zindex&&(n.zindex=e.zindex),e&&void 0!==e.addElementListener&&(n.addElementListener=e.addElementListener),e.nextStepTrigger&&(n.nextStepTrigger=e.nextStepTrigger),!0!==e.hotspotElementClickTrigger&&!1!==e.hotspotElementClickTrigger||(n.hotspotElementClickTrigger=e.hotspotElementClickTrigger);var r=-1===[null,void 0].indexOf(e.stickToBadge);e&&r&&(n.stickToBadge=e.stickToBadge),e&&[!0,!1].indexOf(e.autoScroll)>-1&&(n.autoScroll=!!e.autoScroll),e.skipButton&&(n.skipButton=n.skipButton||{},n.skipButton.visible=e.skipButton.enabled,n.skipButton.textColor=e.skipButton.textColor,n.skipButton.backgroundColor=e.skipButton.backgroundColor,n.skipButton.backgroundFill=e.skipButton.backgroundFill,n.skipButton.borderColor=e.skipButton.borderColor,n.skipButton.cornerRadius=e.skipButton.cornerRadius,n.skipButton.hoverBackgroundColor=e.skipButton.hoverBackgroundColor,n.skipButton.hoverBackgroundFill=e.skipButton.hoverBackgroundFill,n.skipButton.hoverBorderColor=e.skipButton.hoverBorderColor,n.skipButton.hoverTextColor=e.skipButton.hoverTextColor),"BAR"===t.dialogViewType&&(n.barPosition=e.barPosition,n.barOffset=e.barOffset),n.disableTransitionEffect=e.disableTransitionEffect}}function R(e,t){return vt||(vt=Object.assign({},ft.getSelectedStep())),vt[e]=t,E(vt)}function P(e){var t=R("hotspotSpotSize",e);pt.setHotspotStyle(t)}function M(e){var t=R("zindex",e);pt.setHotspotStyle(t)}function U(e){var t=R("zIndex",e);pt.setDialogStyle(void 0,t)}function j(e){var t=R("hotspotSpotColor",e);pt.setHotspotStyle(t)}function H(e){var t=R("hotspotAnimatedColor",e);pt.setHotspotStyle(t)}function $(e){var t=R("hotspotAnimatedDuration",e);pt.setHotspotStyle(t)}function V(e){var t=R("hotspotAnimationCount",e);pt.setHotspotStyle(t)}function K(e,t){e.endButtonText=t.endButtonText,e.restartButtonText=t.restartButtonText,e.skipButton=Object.assign({},t.skipButton),e.skipButton.enabled=t.skipButton.visible}function q(e,t){var n=u(e.type);if(!n)return void(0,pe.showMessage)("warning","Cannot edit step when step is not visible");K(e,t),Ee.default.setEditedStepSettings(e);var r=Ee.default.getAppliedStepData(e.id);if(p(e.type,r&&0===(r.positionTopDelta||r.positionTopDelta)?r.positionTopDelta:e.positionTopDelta,r&&0===(r.positionLeftDelta||r.positionLeftDelta)?r.positionLeftDelta:e.positionLeftDelta),["DIALOG","TOOLTIP"].indexOf(e.type)>-1){var o=void 0,i=void 0,a=void 0;e.modal&&(o=e.overlayPadding||0===e.overlayPadding?e.overlayPadding:null,a=e.overlayFill||0===e.overlayFill?e.overlayFill:null,i=e.overlayColor),o||0===o||(o=Qe.guide.modal?Qe.guide.overlayPadding:0),a||0===a||(a=Qe.guide.modal?Qe.guide.overlayFill:0),i||(i=Qe.guide.modal?Qe.guide.overlayColor:"#696969"),r&&((r.overlayPadding||0===r.overlayPadding)&&(o=r.overlayPadding),(r.overlayFill||0===r.overlayFill)&&(a=r.overlayFill),r.overlayColor&&(i=r.overlayColor)),f(o,i,a)}var l=n.getBoundingClientRect(),c=l.left+l.width/2,d=c>=$e.innerWidth/2?"LEFT":"RIGHT";st=new Te.default({stepSettings:Object.assign(e,r),saveCallback:function(t,n){"BADGE"===n&&(je.update(t,Object.keys(t)),je.saveChanges(),s(),ht.setCurrentEditedStepId(e.id)),Ee.default.setAppliedStepData(e.id,t)},afterClose:m},ct),st.open(d)}function W(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};pt.playGuide(e,t,function(e){if(ne.default.isPreview()?exit():(n.toggleLinker(!0),r()),e){var t="Step element not found!. The element selector "+e.cssSelector;e.textRuleValues&&(t+=", or text: "+e.textRuleValues[0]),t+=" was not found in "+$e.location.href+".",(0,pe.showMessage)("warning",t)}Ee.default.setIsPlayingGuide(!1)})}function z(e){return!1}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=(0,Ie.drawBadges)([{badgeSettings:Object.assign(e,{isPreview:!0,clickCallback:function(){"ONCE"===e.qualificationScope.qualificationScopeType&&"ON_CLICK"===e.engagementTrigger&&(0,Ie.removeBadge)(e.id);var r=J(t,1),o=r[0];z(o)&&(o.elementSelector={matchCssSelector:!0,cssSelector:"#"+i.getDomElement().id,selector:"#"+i.getDomElement().id}),n()}})}],null,!0),o=J(r,1),i=o[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.GuideEditorIframe=void 0;var Y=arguments,X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),J=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Q=n(0),Z=n(7),ee=n(11),te=n(14),ne=r(te),re=n(178),oe=r(re),ie=n(201),ae=r(ie),se=n(33),le=r(se),ce=n(58),de=r(ce),ue=n(3),pe=n(35),fe=n(10),ge=n(40),he=r(ge),me=n(6),ve=n(17),be=r(ve),ye=n(84),Ee=r(ye),Se=n(56),Ce=n(2),we=n(197),Te=r(we),xe=n(32),ke=n(62),Ie=n(34),Ae=n(191),Oe=r(Ae),Ne=n(83),Le=r(Ne),_e=n(187),Fe=n(41),De=n(196),Be=n(12),Re=n(28);n(203);n(205),n(206),n(214),n(213),n(212),n(204),n(210),n(211),n(207),n(208),n(209);var Pe=n(39);Pe.defaultOptions.className="vex-theme-os";var Me=n(189),Ue=n(181);n(188);try{!function(e){localStorage.FEK="sCHCPa1XQVZFSHSa1C==";var t=document.getElementById("fr-fek");t&&t.parentNode.removeChild(t)}()}catch(e){ue.logger.logInternalError(e)}ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/font/font-awesome/4.4.0/font-awesome.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/froala_editor.pkgd.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/colors.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/froala_style.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/plugins/emoticons.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/plugins/video.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/plugins/table.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/plugins/image.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/froala/css/2.5.1/plugins/file.min.css"),ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/color-picker/color-picker.min.css"),ee.AjaxUtil.loadFile("js",Ce.staticContentHost+"/color-picker/color-picker.min.js");var je=void 0,He=void 0,$e=window,Ve=document,Ke="div",qe="classList",We='https://app-be.aptrinsic.com',ze='https://app.aptrinsic.com',Ge=We+"/editor/guide/template",Ye=We+"/api/mapping/url/successful",Xe={},Je=void 0,Qe=null,Ze=0,et=void 0,tt={},nt=void 0,rt=void 0,ot=void 0,it=void 0,at=void 0,st=void 0,lt=void 0,ct={overlayPaddingChangeCallback:N,overlayColorChangeCallback:A,overlayFillChangeCallback:A,positionTopChangeCallback:function(e,t,n,r){x(e,t,n,r)},positionLeftChangeCallback:function(e,t,n,r){x(t,e,n,r)},triggerNextStepChangeCallback:D,hotspotSpotSizeChangeCallback:P,hotspotSpotZIndexChangeCallback:M,zIndexChangeCallback:U,hotspotSpotColorChangeCallback:j,hotspotRingColorChangeCallback:H,hotspotAnimationDurationChangeCallback:$,hotspotAnimationCountChangeCallback:V,showOverlayFlagCallback:O,showPrevButtonCalback:_,updateButtonsTextCallback:F,positionChangeCallback:L,updateBadgeTooltip:function(e,t){return bt.changeTooltipPosition(e,t)},stickToBadgeCallback:function(e){return l(e)},skipCallback:function(e,t){(0,Q.isObject)(e)&&e.hasOwnProperty("enableSkip")&&pt.toggleSkip(e.enableSkip,t,t.text)},positionBarDialog:function(e,t){ht.changeBarPosition(e,t)}},dt=new ae.default({afterClose:function(e,t){if(e){i(Qe.saveButton);var n=ft.getSelectedStep();n.linked?(Qe.selector.removeAllHighlighted(),be.default.selectorRemoveAllHighlighted()):(Qe.selector.removeHighlighted("main"),be.default.guideRemoveHighlighted("main")),t.selector&&(null===n.elementSelector&&(n.elementSelector={}),n.elementSelector.selector=t.selector,ft.highlightSteps(!0)),c(t,n)}}}),ut=new le.default((0,Ce.isIframe)()||(0,Ce.getConfig)("dockMapper")?0:109),pt=new de.default(ut,2147483646),ft=new function(){var e=this;try{var t=function(){l=0,f.style.display="none"},n=function(e,t){var n=e.type,o=e.sequenceNumber,i=(0,Q.createElement)(Ke,["apt-step-option"]),a=(0,Q.createElement)("img",["apt-step-option-img"]);if(a.src=r(n),i.appendChild(a),i.appendChild((0,Q.createElement)("span",["apt-step-option-text"],{text:e.name})),t){var s="BADGE"===n?"":o+1;i.appendChild((0,Q.createElement)(Ke,["apt-step-option-index"],{text:s}))}return"TOOLTIP"!==n&&"HOTSPOT"!==n&&"BADGE"!==n||i.appendChild((0,Q.createElement)("span",["apt-step-option-linkage",h(e)?"apt-step-option-linked":"apt-step-option-unlinked"])),i},r=function(e){var t=function(e){return Ce.staticContentHost+"/images/"+e+".svg"};switch(e){case"TOOLTIP":return t("tooltip-1");case"DIALOG":return t("dialog-1");case"HOTSPOT":return t("goal-1");case"BADGE":return t("badge/badge");default:return""}},o=function(e,t,r,o){var i=Xe[e],s=Object.values(Xe);"BADGE"===s[0].type&&s.shift();var l=s.length-1==i.sequenceNumber;Ee.default.setIsLastStep(l),Ee.default.setIsFirstStep(0===i.sequenceNumber);var c=Ve.querySelector(".apt-remove-step-icon"),d=Ve.querySelector(".apt-clone-step-icon"),f=Ve.querySelector(".apt-guide-icon-order"),h=Ve.querySelector(".apt-edit-icon");if(c.classList.remove("enabled"),d.classList.remove("enabled"),f.classList.remove("enabled"),h.classList.remove("enabled"),i){u=e,p.firstChild.remove();var m=n(i,!1),v=p.querySelector(".aptr-step-dropdown-container");"BADGE"!==i.type&&(c.classList.add("enabled"),d.classList.add("enabled")),f.classList.add("enabled"),h.classList.add("enabled"),"DIALOG"!==i.type&&i.isLinked?t.unlinkButton[qe].add("selected"):t.unlinkButton[qe].remove("selected"),p.insertBefore(m,v),ht.close(),g(i,e,r),a(i,o),lt=!1}},i=function(e,t,n,r){try{if(ne.default.isPreview())return;ht.getCurrentEditedStepId()||lt?(0,pe.showMessage)("confirm","Any unsaved work on the current step will be lost. Are you sure you want to continue?",function(){o(e,t,n,r)}):o(e,t,n,r)}catch(e){ue.logger.logInternalError(e)}},a=function(e,t){dt.resetValue();var n=e.elementSelector;if(n&&("TOOLTIP"===e.type||"HOTSPOT"===e.type||"BADGE"===e.type)&&(e.isLinked&&n&&(n.matchCssSelector&&n.selector||n.matchTextRule&&n.htmlTextRule)&&n.type||t)){var r=n.selector||t.selector,o=n.type||t.type;dt.setValue({matchCssSelector:n.matchCssSelector,cssSelector:r,type:o,matchTextRule:n.matchTextRule,elementText:n.htmlTextRule?n.htmlTextRule.values:void 0,textOperator:n.htmlTextRule?n.htmlTextRule.operator:void 0})}},s=0,l=0,c=0,d=[],u=null,p=(0,Q.createElement)("div",["aptr-step-select-container"],{text:"Select Step..."}),f=(0,Q.createElement)(Ke,["aptr-step-dropdown-container"]);p.appendChild(f),(0,Q.addEventListener)(p,"click",function(e){l=0===l?1:0,f.style.display=0===l?"none":"block",e.target===p&&e.stopImmediatePropagation()}),(0,Q.addEventListener)(p,"mousedown",function(e){e.stopImmediatePropagation()}),(0,Q.addEventListener)(p,"mouseup",function(e){e.stopImmediatePropagation()}),(0,Q.addEventListener)(Ve,"click",function(e){for(var n=e.target,r=!1;n&&!(0,Q.isRootNode)(n);)(n.classList.contains("aptr-step-dropdown-container")||n.classList.contains("aptr-step-select-container"))&&(r=!0),n=n.parentNode;!r&&t()}),this.selectStep=function(e,t,n,r){i(e,t,n,r)},this.resetSelect=function(){u=null,p.firstChild.remove(),p.insertBefore((0,Q.createElement)("text",void 0,"Select Step..."),f)},this.getSelect=function(){return p},this.getSteps=function(){return d},this.getStepByType=function(e){return d.slice().reverse().find(function(t){return t.type===e})},this.addSteps=function(e,t){try{var r=e.steps,o=e.badgeSettings;Ee.default.setSteps(r);var a=He,l=(0,Ce.getConfig)("enableBadge")&&a.includes("BADGE")&&o;if(Ee.default.setBadgeEnabled(l),l){je&&je.destroy();var u=Object.assign(o,{name:"Badge",type:"BADGE",standalone:e.standaloneBadge});Ee.default.setBadge(u),r.length>0&&"BADGE"!==r[0].type?r.unshift(u):r[0]=u}if(Qe.selector.removeHighlighted(null,!0),be.default.guideRemoveHighlighted(null,!0),f.innerHTML="",r){r.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber}),d=r,s=0,c=0,Ee.default.setIsLastStep(!1),Ee.default.setIsFirstStep(!1),Xe={};var p=(0,Q.createElement)(Ke,["apt-step-option"]);p.appendChild((0,Q.createElement)("span",["apt-step-option-text","apt-step-none"],{text:"Clear selected step"})),f.appendChild(p),(0,Q.addEventListener)(p,"click",function(e){ft.resetSelect(),ht.close(),dt.resetValue(),Qe.selector.disable(),e.stopImmediatePropagation()});for(var g=0;g<r.length;g++)!function(e){var t=r[e],o=n(t,!0);"BADGE"===t.type&&r.length>1&&o.classList.add("apt-step-option-badge");var a=h(t);t.isLinked=a,(0,Q.addEventListener)(o,"click",function(e){i(t.id,Qe),e.stopImmediatePropagation()}),(0,Q.addEventListener)(o,"mousedown",function(e){e.stopImmediatePropagation()}),(0,Q.addEventListener)(o,"mouseup",function(e){e.stopImmediatePropagation()}),a&&c++,f.appendChild(o),Xe[t.id]=t}(g);s++,Qe.setShowed(c),t&&i(t,Qe),Ee.default.setSteps(r)}}catch(e){ue.logger.logInternalError(e)}},this.getIndex=function(){try{return s}catch(e){ue.logger.logInternalError(e)}},this.getViewIndex=function(){try{return s+1}catch(e){ue.logger.logInternalError(e)}},this.getSelected=function(){try{return u}catch(e){ue.logger.logInternalError(e)}},this.getSelectedName=function(){try{return null==u?"":Xe[u].name}catch(e){ue.logger.logInternalError(e)}},this.getStepName=function(e){try{return void 0===Xe[e]?"":Xe[e].name}catch(e){ue.logger.logInternalError(e)}},this.getSelectedStep=function(){try{return null!==u?Xe[u]:null}catch(e){ue.logger.logInternalError(e)}},this.isSelected=function(){return null!==u},this.getTotalLinked=function(){return c},this.getTotalSteps=function(){return d.length},this.highlightSteps=function(t){var n=e.getSelectedStep();if(!n||n.linked)for(var r=0;r<d.length;r++)!function(e){var r=d[e];r.isLinked&&r.elementSelector&&r.elementSelector.selector&&(0,ve.findInAll)(y(r.elementSelector),(0,me.getRegisteredIframes)(),function(e){e?e.iframeData?(be.default.selectorHighlightAll(r.elementSelector.selector,r.id,e.iframeData),t&&r===n&&be.default.getElementLocation(e.iframeData,y(r.elementSelector),function(e){ht.showTemplate({isDom:!1,elementRect:e[0]},n,!0)})):e.element&&(0,Q.isElementVisible)(e.element)&&(Qe.selector.highlightAll([e.element],null,{border:"apt-guide-step-highlight",icon:"apt-guide-step-icon-highlight"},{id:r.id}),t&&r===n&&ht.showTemplate({isDom:!0,element:e.element},n,!0)):t&&r===n&&(ht.close(),(0,pe.showMessage)("warning","Cannot find element on page for selector: "+r.elementSelector.selector))})}(r);else n.elementSelector&&(0,ve.findInAll)(y(n.elementSelector),(0,me.getRegisteredIframes)(),function(e){e&&(e.iframeData?(be.default.selectorHighlightElement(n.elementSelector.cssSelector,"main",e.iframeData),be.default.getElementLocation(e.iframeData,y(n.elementSelector),function(e){ht.showTemplate({isDom:!1,elementRect:e[0]},n)})):e.element&&(Qe.selector.highlightElement(e.element,"main"),ht.showTemplate({isDom:!0,element:e.element},n,!0)))})}}catch(e){ue.logger.logInternalError(e)}},gt=new function(){try{var e=null,t=(0,Q.createElement)(Ke,["apt-step-select-popup-container"]),n=(0,Q.createElement)(Ke,["aptr-step-select-container"]),r=(0,Q.createElement)("select",["aptr-step-select-styled"]),o=(0,Q.createElement)(Ke,["aptr-step-new","apt-step-new-green"],{text:"New"});n.appendChild(r),(0,Q.appendElements)(t,[n,o]);var i=(0,Q.createElement)(Ke,["apt-step-new-popup-container"]),a=(0,Q.createElement)(Ke,["apt-step-new-popup-title"]),s=(0,Q.createInputConfig)("text",{classes:"apt-step-new-popup-input",value:"New Step",otherAtt:{autofocus:""}}),l=(0,Q.createElement)(Ke,["apt-step-popup-type-container"]),c=(0,Q.createElement)(Ke,["apt-step-popup-radio-container"]),d=(0,Q.createElement)(Ke,["apt-step-popup-radio-container"]),u=(0,Q.createElement)(Ke,["apt-step-popup-radio-container"]),p=(0,Q.createElement)(Ke,["apt-step-popup-type"]),f=(0,Q.createElement)(Ke,["apt-step-popup-type"]),g=(0,Q.createElement)(Ke,["apt-step-popup-type"]),h=(0,Q.createElement)(Ke,["apt-step-new-popup-footer"]),m=(0,Q.createElement)(Ke,["aptr-popup-button cancel"],{text:"Cancel"}),v=(0,Q.createElement)(Ke,["aptr-popup-button create"],{text:"Create"});a=(0,Q.appendElements)(a,[s]),h=(0,Q.appendElements)(h,[m,v]),c=(0,Q.appendElements)(c,[(0,Q.createInput)("radio",["apt-step-type"],"DIALOG"),(0,Q.createElement)(Ke,["apt-step-type-radio"]),(0,Q.createElement)("label",void 0,{text:"Dialog"})]),d=(0,Q.appendElements)(d,[(0,Q.createInput)("radio",["apt-step-type","selected"],"TOOLTIP"),(0,Q.createElement)(Ke,["apt-step-type-radio","apt-step-type-radio-selected"]),(0,Q.createElement)("label",void 0,{text:"Tooltip"})]),u=(0,Q.appendElements)(u,[(0,Q.createInput)("radio",["apt-step-type"],"HOTSPOT"),(0,Q.createElement)(Ke,["apt-step-type-radio"]),(0,Q.createElement)("label",void 0,{text:"Hotspot"})]),f=(0,Q.appendElements)(f,[c]),p=(0,Q.appendElements)(p,[d]),g=(0,Q.appendElements)(g,[u]);var b=(0,Q.createElement)("div",["apt-step-type-icon-container"]);l=(0,Q.appendElements)(l,[p,f,g]),i=(0,Q.appendElements)(i,[a,b,l,h]);var y=function(){try{e&&e.close()}catch(e){ue.logger.logInternalError(e)}},E=function(){try{var t=e.contentEl.querySelector(".apt-step-new-popup-input"),n=t.value,r=e.contentEl.querySelector(".apt-step-type.selected").value;if(t.classList.remove("apt-invalid"),!n)return void t.classList.add("apt-invalid");var o=ft.getStepByType(r),i=o?Object.assign({},{height:o.height,width:o.width,autoHeight:o.autoHeight,backgroundColor:o.backgroundColor,backgroundFill:o.backgroundFill,navColor:o.navColor,navBackgroundColor:o.navBackgroundColor,navBackgroundFill:o.navBackgroundFill,navCornerRadius:o.navCornerRadius,shadow:o.shadow,shadowColor:o.shadowColor,shadowFill:o.shadowFill,shadowOffsetX:o.shadowOffsetX,shadowOffsetY:o.shadowOffsetY,shadowBlur:o.shadowBlur,shadowSpread:o.shadowSpread,modal:o.modal,overlayFill:o.overlayFill,overlayColor:o.overlayColor,overlayPadding:o.overlayPadding,overlayBlockElement:o.overlayBlockElement,disableTransitionEffect:o.disableTransitionEffect,hotspotSpotColor:o.hotspotSpotColor,hotspotSpotSize:o.hotspotSpotSize,zindex:o.zindex,hotspotAnimatedColor:o.hotspotAnimatedColor,hotspotAnimationDelay:o.hotspotAnimationDelay,hotspotAnimatedDuration:o.hotspotAnimatedDuration,hotspotAnimationCount:o.hotspotAnimationCount,autoScroll:o.autoScroll,borderRadius:Qe.guide.borderRadius}):{},a=Qe.guide.steps.length,s="BADGE"!==Qe.guide.steps[0].type?a:a-1;Object.assign(i,{name:n,type:r,sequenceNumber:s}),ee.AjaxUtil.postData(We+"/editor/"+Qe.contentGroupId+"/guide/"+Qe.guideId+"/step",i,Qe.getAuthorizationHeader(),function(e){(0,pe.showMessage)("success","Created step "+n+" successfully"),e.steps.sort(function(e,t){return e.sequenceNumber-t.sequenceNumber}),ft.addSteps(e,e.steps[e.steps.length-1].id),Qe.updateGuide(e),y()},function(){(0,pe.showMessage)("error","Error happened during the creation of new step")},!0)}catch(e){ue.logger.logInternalError(e)}},S=function(e,t){var n=t.querySelector(".apt-step-type-icon-container");switch(n.classList.remove("apt-tooltip-step"),n.classList.remove("apt-dialog-step"),n.classList.remove("apt-hotspot-step"),e){case"TOOLTIP":n.classList.add("apt-tooltip-step");break;case"HOTSPOT":n.classList.add("apt-hotspot-step");break;case"DIALOG":n.classList.add("apt-dialog-step");break;default:n.classList.add("apt-tooltip-step")}};this.open=function(){try{y(),e=Pe.open({unsafeContent:i.outerHTML,appendLocation:(0,Ce.getConfig)("framesetMode")?"html":"body",showCloseButton:!1,afterOpen:function(){try{this.rootEl[qe].add("aptr-guide-step-popup"),this.rootEl[qe].add("apt-vex"),this.contentEl[qe].add("apt-new-step-popup"),this.contentEl[qe].add("apt-popup"),this.contentEl[qe].add("apt-vex");for(var t=this.contentEl.querySelector(".cancel"),n=this.contentEl.querySelector(".create"),r=this.contentEl.querySelectorAll(".apt-step-type"),o=0;o<r.length;o++)(0,Q.addEventListener)(r[o],"click",function(t){try{for(var n=e.contentEl.querySelectorAll("input.apt-step-type"),r=0;r<n.length;r++)n[r].nextSibling[qe].remove("apt-step-type-radio-selected"),n[r][qe].remove("selected");t.target[qe].add("selected"),t.target.nextSibling[qe].add("apt-step-type-radio-selected"),S(t.target.value,e.contentEl)}catch(e){ue.logger.logInternalError(e)}});S("TOOLTIP",this.contentEl),(0,Q.addEventListener)(t,"click",function(){y()}),(0,Q.addEventListener)(n,"click",E)}catch(e){ue.logger.logInternalError(e)}}})}catch(e){ue.logger.logInternalError(e)}}}catch(e){ue.logger.logInternalError(e)}},ht=new function(){var e=this,t=null,n=null,r=null,o=null,a=null;this.resetEditedStep=function(){a=null},this.getCurrentEditedStepId=function(){return a},this.setCurrentEditedStepId=function(e){a=e},this.hasOpenStep=function(){return null!==r},this.getElement=function(){return r},this.changeStepElementTarget=function(e,t,n,r,o){pt.changePosition(e,t,n,r,o)},this.init=function(){ee.AjaxUtil.getData(Ge,function(e){var r=(0,Q.createElement)(Ke);e.content&&(r.innerHTML=e.content,t=r.firstChild),e.footer&&(r.innerHTML=e.footer,n=r.firstChild)},Qe.getAuthorizationHeader(),C,!0)},this.showTemplate=function(l,c){try{e.resetEditedStep(),r=l;var d=t,u=c&&["DIALOG","TOOLTIP"].indexOf(c.type)>-1;if(u){if(Ee.default.setContent(c.html),d=(0,Q.createElement)(Ke,"apt-step-wrapper",{dataAtt:[{name:"data-aptr",value:"step-wrapper"}]}),d.innerHTML=c.html,"TOOLTIP"===c.type){var p=d.querySelector(".px-tooltip-content-wrapper");p?(d=p,d.setAttribute("data-aptr","step-wrapper"),Ee.default.setContentWrapper(p)):Ee.default.setContentWrapper(void 0)}else if("DIALOG"===c.type){var f=d.querySelector(".px-dialog-wrapper");f?(d=f,d.setAttribute("data-aptr","step-wrapper"),Ee.default.setContentWrapper(f)):Ee.default.setContentWrapper(void 0)}}else Ee.default.setContent(""),Ee.default.setContentWrapper(void 0);(0,Ce.isIframe)()?be.default.setSelectorState(!1):Qe.selector.disable();var g=S(Qe.guide,!1),h=Qe.guide.footerHtml||n,m=E(c);if(m.title){var v=(0,Z.toDom)(m.title,!0);v.setAttribute("data-aptr","title-wrapper"),m.titleHtml=v,Ee.default.setTitleWrapper(m.titleHtml),Ee.default.setTitle(m.titleHtml.innerHTML)}else Ee.default.setTitle(""),Ee.default.setTitleWrapper(void 0);if("BADGE"===c.type){je&&je.destroy();var b=Object.assign({},c);b.isPreview=!0,je=l.isDom?new ke.Badge(b,l.element):new ke.Badge(b,(0,Ce.getBody)(),{isVisible:!0,isExist:!0,rect:l.elementRect,pageYOffset:window.pageYOffset}),je.setEditMode(!0),je.render(),s(),Qe.selector.disable()}m.showOverlay=!0,pt.showStep(l,h,d,g.guideSettings,m,null,function(){if(u){Qe.selector.removeHighlighted("main"),be.default.guideRemoveHighlighted("main"),o=Re("[data-aptr='step-wrapper']").froalaEditor("html.get");var e=Re("[data-aptr='title-wrapper']").froalaEditor("html.get");Ee.default.setContent(o),Ee.default.setTitle(e),r=null,it&&it.froalaEditor("destroy"),at&&at.froalaEditor("destroy"),it=at=null}Ee.default.getState()&&c&&["HOTSPOT","TOOLTIP"].indexOf(c.type)>-1&&!Ee.default.getIsPlayingGuide()&&Qe.selector.enable()},void 0,g.steps.filter(function(e){return"BADGE"!==e.type}),!0,function(e){if(e){Ee.default.setAppliedStepData(c.id,{positionVertical:e[1],positionHorizontal:e[0]});var t="TOOLTIP"===c.type;t&&c.elementSelector&&(c.positionHorizontal&&e[0]!==c.positionHorizontal||c.positionVertical&&e[1]!==c.positionVertical)?(0,pe.showMessage)("confirm","The tooltip's original positioning doesn't fit the current resolution,\n triggering responsive-repositioning. Please save the step to apply the changes",function(){i(Qe.saveButton)}):!(t&&c.elementSelector&&c.elementSelector.selector)||c.positionHorizontal&&c.positionVertical||(0,pe.showMessage)("confirm","The tooltip was not positioned but is linked to an element, triggering responsive-repositioning. Please save the step to apply the changes",function(){i(Qe.saveButton)})}if(u&&!Ee.default.isMappedElementsChecked()){var n=["bold","italic","underline","strikeThrough","color","emoticons","-","paragraphFormat","align","formatOL","formatUL","indent","outdent","fontFamily","fontSize","-","insertImage","insertLink","insertFile","insertVideo","undo","redo"],r=["bold","italic","underline","strikeThrough","color","emoticons","-","paragraphFormat","align","formatOL","formatUL","indent","outdent","fontFamily","fontSize","-","undo","redo"];Re.FroalaEditor.ICON_TEMPLATES={font_awesome:'<i class="fa-aptrinsic fa-aptrinsic-[NAME]" aria-hidden="true"></i>',font_awesome_5:'<i class="fas fa-[FA5NAME]" aria-hidden="true"></i>',font_awesome_5s:'<i class="far fa-[FA5NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'};var o=(0,Ce.getConfig)("framesetMode")?"html":null;it=Re("[data-aptr='step-wrapper']").froalaEditor({toolbarInline:!0,requestHeaders:Qe.getAuthorizationHeader(),imageUploadURL:We+"/upload/froala/upload_image",zIndex:2147483647,toolbarContainer:o,toolbarButtons:n,toolbarButtonsMD:n,toolbarButtonsSM:n,toolbarButtonsXS:n,fontFamilySelection:!0,linkConvertEmailAddress:!1,fontFamily:{"Roboto,sans-serif":"Roboto",RobotoSlab:"RobotoSlab","Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","'Times New Roman',Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontSizeSelection:!0,imageOutputSize:!0,enter:Re.FroalaEditor.ENTER_DIV}),Re.FE.LinkProtocols=["http","https"],at=Re("[data-aptr='title-wrapper']").froalaEditor({toolbarInline:!0,zIndex:2147483647,toolbarContainer:o,toolbarButtons:r,toolbarButtonsMD:r,toolbarButtonsSM:r,toolbarButtonsXS:r,fontFamilySelection:!0,fontFamily:{"Roboto,sans-serif":"Roboto",RobotoSlab:"RobotoSlab","Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","'Times New Roman',Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontSizeSelection:!0}),Re(".fr-toolbar.fr-inline").get(0)[qe].add("apt"),Re("[data-aptr='step-wrapper'], [data-aptr='title-wrapper']").on("froalaEditor.contentChanged",function(){i(Qe.saveButton),a=ft.getSelected()})}})}catch(e){ue.logger.logInternalError(e)}},this.getCurrentStepContent=function(){return o},this.changePosition=function(e,t,n,o){try{var i=pt.changePosition(r,t,e,n,o);return i||!1}catch(e){ue.logger.logInternalError(e)}},this.changeBarPosition=function(e,t){pt.changeBarPosition(e,t)},this.close=function(){try{pt.hideAll(),!(0,Ce.isIframe)()&&be.default.guideHideSteps()}catch(e){ue.logger.logInternalError(e)}},this.getFooter=function(){return n},this.getFooterStr=function(){return n.outerHTML}},mt=new function(){function e(){for(var e in this.sequenceMap)({}).hasOwnProperty.call(Xe,e)&&(Xe[e].sequenceNumber=this.sequenceMap[e])}function t(e){var t=this.sequenceMap;e.forEach(function(n,r){n.querySelector(".apt-step-index").innerHTML=r+1+"/"+e.length,t[n.getAttribute("sid")]=r})}function n(){this.sequenceMap={};var e=[];for(var t in Xe)if({}.hasOwnProperty.call(Xe,t)){var n=Xe[t];"BADGE"!==n.type&&(this.sequenceMap[t]=n.sequenceNumber,e.push(o(n,n.sequenceNumber)))}(0,Q.appendElements)(this.dialogBody,e)}function r(e){switch(e){case"DIALOG":return"apt-bullet-dialog";case"TOOLTIP":return"apt-bullet-tooltip";case"HOTSPOT":return"apt-bullet-hotspot";default:return"apt-bullet-dialog"}}function o(e,t){var n=(0,Q.createElement)(Ke,["apt-step-bullet"]);n.setAttribute("sid",e.id);var o=(0,Q.createElement)(Ke,["apt-step-bullet-content",r(e.type)],{text:e.name}),i=(0,Q.createElement)("span",["apt-step-index"],{text:t+1+"/"+Object.values(Xe).length});return(0,Q.appendElements)(o,[i]),(0,Q.appendElements)(n,[o]),n}var i=(0,Q.createElement)(Ke,["apt-reorderer-dialog"]),a=(0,Q.createElement)(Ke,["apt-reorderer","apt-selector-header"]),s=(0,Q.createElement)(Ke,["apt-reorderer-title"],{text:"Reorder steps"}),l=(0,Q.createElement)(Ke,["apt-reorderer","apt-button","apt-save-button","selected"],{text:"Save"}),c=(0,Q.createElement)(Ke,["apt-reorderer","apt-button","apt-cancel-button","selected","apt-selector-button"],{text:"Cancel"}),d=(0,Q.createElement)(Ke,["apt-dialog-body"]),u=(0,Q.createElement)(Ke,["apt-reorder-header-buttons"]);(0,Q.appendElements)(u,[c,l]),(0,Q.appendElements)(a,[s,u]),(0,Q.appendElements)(i,[a,d]),this.dialogContent=i,this.dialogBody=d,this.sequenceMap={},this.open=function(){(0,Q.removeChildren)(this.dialogBody),n.call(this);var r=Pe.open({appendLocation:(0,Ce.getConfig)("framesetMode")?"html":"body",unsafeContent:this.dialogContent.outerHTML,showCloseButton:!1,afterOpen:function(){(0,Ce.getBody)().classList.add("apt-vex"),this.rootEl[qe].add("apt-vex"),this.rootEl[qe].add("aptr-selector-popup"),this.contentEl[qe].add("apt-reorderer-dialog");var n=this.contentEl.querySelector(".apt-dialog-body");(0,Q.addEventListener)(this.contentEl.querySelector(".apt-cancel-button"),"click",function(){r.close()}),(0,Q.addEventListener)(this.contentEl.querySelector(".apt-save-button"),"click",function(){e.call(mt);var t=ne.default.getAdditionalDetails().groupId,n=ne.default.getAdditionalDetails().guideId;ee.AjaxUtil.putData(We+"/editor/"+t+"/guide/"+n+"/steps/reorder",Object.keys(Xe).map(function(e){var t=Xe[e];if("BADGE"!==t.type)return t}).filter(function(e){return void 0!==e}),Qe.getAuthorizationHeader(),function(e){(0,pe.showMessage)("success","Steps reordered successfully!"),ft.addSteps(e),Qe.updateGuide(e),r.close()},function(){(0,pe.showMessage)("error","Something went wrong. Could not reorder steps.")},!0)}),Me.create(n,{animation:200,ghostClass:"apt-reorder-placeholder",onEnd:function(e){t.call(mt,(0,Be.arrayFrom)(e.to.children))}})},afterClose:function(){(0,Ce.getBody)().classList.remove("apt-vex")}})}},vt=null,bt={changeTooltipPosition:function(e,t){return je.update(e,t),!0}},yt=function(){function e(){o(this,e)}return X(e,[{key:"init",value:function(e){var t=this;try{if(ee.AjaxUtil.loadFile("css",Ce.staticContentHost+"/editor.css?a="+e),!(0,Ce.isIframe)()){var n=this,r=w(e);null!=r&&(this.propertyData=r);var o=ne.default.getAdditionalDetails();if(!o.guideId||!o.groupId)return void ue.logger.logInternalError(new Error("cannot create guide linker without guide id"));if(this.guideId=o.guideId,this.contentGroupId=o.groupId,this.engagementId=o.engagementId,2!=this.propertyData.propertyId)return void(0,pe.showMessage)("error",'Tag setup error: the tag installed in this page is the website tag and not the product tag. Please see the setup instructions: <a href="https://docs.aptrinsic.com/">docs.aptrinsic.com</a>',function(){n.exit()},{autoHideFalse:!0});ee.AjaxUtil.postData(We+"/editor/"+this.engagementId+"/valid/association",{propertyGroupId:this.propertyData.groupId,propertyId:this.propertyData.propertyId},this.getAuthorizationHeader(),function(e){!1===e&&(0,pe.showMessage)("error","The guide engagement is not associate with this product, please use a valid product. Returning to engagement editor",function(){n.exit.apply(n)},{autoHideFalse:!0})},C,!0)}(0,fe.addDOMReadyListener)(function(){t.selector=new oe.default,(0,Ce.isIframe)()?(history.replaceState("",Ve.title,ne.default.cleanEngagementData()),he.default.getMapperState(function(e){t.selector.initSelector({selectedCallback:b,iconClicked:t.selectorIconClickedCallback,disabled:ne.default.isPreview()},e[0].state&&e[0].isStepSelected)})):(t.render(),ee.AjaxUtil.postData(Ye,{url:$e.location.href},t.getAuthorizationHeader(),function(){ue.logger.log("url "+$e.location.href+" was reported as successful link")},d,!0),t.selector.initSelector({selectedCallback:b,iconClicked:t.selectorIconClickedCallback,disabled:ne.default.isPreview()},!1))})}catch(e){ue.logger.logInternalError(e)}}},{key:"selectorIconClickedCallback",value:function(e,t){(0,Ce.isIframe)()?he.default.selectorIconClicked(e,t):"deleted"===e&&t?(0,pe.showMessage)("confirm",'Do you want to unlink step "'+ft.getStepName(t.id)+'"?',function(){Qe.unlinkStep(t.id)}):"highlight"!==e&&t||T()}},{key:"render",value:function(){var e=this;try{var t=(0,Q.createElement)(Ke,["aptr-mapper-bar"]),n=(0,Q.createElement)(Ke,["aptr-mapping-bar"]),r=(0,Q.createElement)(Ke,["aptr-inner-bar","aptr-flex-right"]),o=(0,Q.createElement)(Ke,["aptr-right-bar","aptr-flex-right"]),i=(0,Q.createElement)(Ke,["aptr-exit"],{text:"Exit"}),a=(0,Q.createElement)(Ke,["aptr-mapping-toggle","aptr-mapping-on"],{text:"Mapping",dataAtt:[{name:"data-state",value:!0}]}),s=(0,Q.createElement)(Ke,["aptr-linked-show"]),l=(0,Q.createElement)("label",void 0,{text:"Show Mapped (0)"}),c=(0,Q.createInput)("checkbox",["aptr-checkbox-styled"]),d=(0,Q.createElement)(Ke,["aptr-mapping-keybind-label"],{text:"ctrl + alt/option + m"}),p=(0,Q.createElement)(Ke,["apt-guide-icon","apt-guide-icon-preview"],{},[(0,Q.createElement)("img",["apt-order-icon-img"],{src:Ce.staticContentHost+"/images/preview-green.svg"}),(0,Q.createElement)("span",null,{text:"Preview"})]),f=(0,Q.createElement)(Ke,["aptr-mapper-setting-bar"]),g=(0,Q.createElement)(Ke,["aptr-mapping-bar-right"]),m=(0,Q.createElement)(Ke,["aptr-mapping-bar-left"]),v=(0,Q.createElement)(Ke,["apt-button","apt-save-button"],{text:"Save"}),b=(0,Q.createElement)(Ke,["apt-button","apt-save-button"],{text:"Unlink"}),E=(0,Q.createElement)(Ke,["apt-guide-icon","apt-guide-icon-order"],{},[(0,Q.createElement)("img",["apt-order-icon-img"],{src:Ce.staticContentHost+"/images/reorder-1.svg"}),(0,Q.createElement)("span",null,{text:"Sort"})]),w=(0,Q.createElement)(Ke,["apt-guide-icon","apt-edit-icon"]),T=(0,Q.createElement)(Ke,["aptr-step-new"],{text:"+ New"}),x=(0,Q.createElement)(Ke,["apt-guide-icon","apt-remove-step-icon"]),k=(0,Q.createElement)(Ke,["apt-guide-icon","apt-clone-step-icon"],{}),I=(0,Q.createElement)("a",null,{href:"https://support.gainsight.com/PX/User_Engagements/How_to_Build_Gainsight_PX_In-App_'Guide'_Engagement",blank:!0},[(0,Q.createElement)(Ke,"aptr-mapper-help")]),A=(0,Q.createElement)("span",["aptr-docking-icon"]),O=(0,Q.createElement)(Ke,["aptr-docking-toggle-container"],{},[(0,Q.createElement)(Ke,["apt-divider"]),A]);this.lowerBar=f,Ee.default.onChange(function(e){c.checked=e.mappedElements}),(0,Q.appendElements)(a,[d]),(0,Q.appendElements)(o,[s,(0,Q.createElement)("div",["apt-divider"]),E,(0,Q.createElement)("div",["apt-divider"]),p,(0,Q.createElement)("div",["apt-divider"]),(0,Q.createElement)(Ke,["aptr-mapping-toggle-text"],{text:"Navigation"}),a,i]);var N=[(0,Q.createElement)(Ke,"aptr-mapper-icon-wrapper",null,[(0,Q.createElement)(Ke,["aptr-mapper-icon"],{text:"Guide Mapper"}),I]),r];if((0,Ce.getConfig)("dockMapper")){ut.setDefaultTopOffset(0),t.classList.add("aptr-mapper-docked");var L=$e.sessionStorage.getItem("aptMapperDockingPosition");L=L||"bottom",this.toggleDocking(t,L),N.splice(1,0,O),(0,Q.addEventListener)(A,"click",function(){e.toggleDocking(t)})}(0,Q.appendElements)(r,[o]),(0,Q.appendElements)(n,N),(0,Q.appendElements)(s,[c,l]),(0,Q.appendElements)(m,[(0,Q.createElement)("text",void 0,"Steps"),ft.getSelect(),T,x,k,w,dt.getSelectionInput()]),(0,Q.appendElements)(g,[(0,Q.createElement)(Ke,["apt-divider"]),b,v]),(0,Q.appendElements)(f,[m,g]),t=(0,Q.appendElements)(t,[n,f]),(0,Q.addEventListener)(i,"click",this.exit.bind(this)),(0,Q.addEventListener)(v,"click",this.linkStep.bind(this)),(0,Q.addEventListener)(b,"click",function(){var t=ft.getSelectedStep();if(t&&["TOOLTIP","HOTSPOT","BADGE"].indexOf(t.type)>-1&&t.isLinked){var n=z(t),r=h(t,!0);n&&!r?(0,pe.showMessage)("warning","This tooltip is not associated to element. To disassociate the tooltip from badge, please change it in the settings.",function(){},{messageTime:5e3}):(0,pe.showMessage)("confirm",'Do you want to unlink step "'+t.name+'"?',function(){"BADGE"===t.type?e.unlinkBadge(t):e.unlinkStep(t.id)})}});for(var _=["dblclick","mousedown","mouseover","mouseout","mouseup","mouseenter","mouseleave","keydown","keypress","keyup","blur"],F=0;F<_.length;F++)(0,Q.addEventListener)(a,_[F],function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1});(0,Q.addEventListener)(a,"click",this.toggleLinker.bind(this)),(0,Q.addEventListener)(p,"click",this.previewGuide.bind(this)),(0,Q.addEventListener)(c,"change",function(){var t=!Ee.default.isMappedElementsChecked();if(Ee.default.setMappedElementsChecked(t),pt.hideAll(),t){ht.resetEditedStep(),it&&it.froalaEditor("destroy"),at&&at.froalaEditor("destroy"),it=at=null,ht.close(),Qe.selector.disable();var n=S(e.guide,!1);pt.showAll(n.steps,n.guideSettings)}}),(0,Q.addEventListener)(E,"click",function(){mt.open()}),(0,Q.addEventListener)(T,"click",function(){if(Array.isArray(Qe.guide.deviceContentLanguages)&&Qe.guide.deviceContentLanguages.length>1)return void(0,pe.showMessage)("confirm","Opppsss, the engagement cannot be modified once it is translated. If required create another engagement and use the Recently used tab option to select the original");gt.open()}),(0,Q.addEventListener)(x,"click",function(){var e=ft.getSelectedStep(),t=ft.getSteps(),n=Object.assign([],t),r=n&&n[0],o=r&&"BADGE"===r.type?r:null;o&&n.shift();var i=1===He.length&&He.indexOf("BADGE")>-1,a=o&&o.altSettings&&o.altSettings.enabled;if(e&&"BADGE"!==e.type){var s=1===n.length;return i&&!a&&s?void(0,pe.showMessage)("error","Badge with linked guide must have at least one step"):s&&!i?void(0,pe.showMessage)("error","You can't delete last step of guide"):void(0,pe.showMessage)("confirm","Are you sure you want to delete "+e.name+"?",function(t){ee.AjaxUtil.deleteData(We+"/api/content/"+Qe.contentGroupId+"/guide/"+Qe.guideId+"/step/"+e.id,null,Qe.getAuthorizationHeader(),function(t){(0,pe.showMessage)("success","Step "+e.name+" was deleted"),ft.resetSelect(),ht.close(),dt.resetValue(),ft.addSteps(t),Qe.updateGuide(t)},function(){(0,pe.showMessage)("error","Error happened during delete")},!0)})}}),(0,Q.addEventListener)(k,"click",function(){var e=ft.getSelectedStep();e&&ee.AjaxUtil.postData(We+"/api/content/"+Qe.contentGroupId+"/guide/"+Qe.guideId+"/step/"+e.id+"/clone",null,Qe.getAuthorizationHeader(),function(t){(0,pe.showMessage)("success","Step "+e.name+" was cloned"),t.sequenceNumber=e.sequenceNumber+1,Qe.guide.steps.forEach(function(t){t.sequenceNumber>e.sequenceNumber&&t.sequenceNumber++}),Qe.guide.steps.push(t),ft.addSteps(Qe.guide,e.id)})}),this.showLabel=l,this.toggleButton=a,this.saveButton=v,this.unlinkButton=b;var D=(0,Q.getQueryParam)("aptShowGuide")||$e.sessionStorage.getItem("apt.guideId");!ne.default.isPreview()&&D&&Qe.toggleLinker(!1,null,!0);var B=(0,Ce.getBody)();!ne.default.isPreview()&&(0,Q.appendElements)(B,[t]);var R=[[x,{content:"Delete",appendTo:B}],[k,{content:"Clone",appendTo:B}],[w,{content:"Edit",appendTo:B}],[E,{content:"Sort",appendTo:B}],[p,{content:"Preview",appendTo:B}],[I,{content:"Learn about in-app engagement",appendTo:B}]];(0,Fe.addTooltipToElements)(R),(0,Q.addEventListener)(w,"mousedown",function(e){e.stopImmediatePropagation()}),(0,Q.addEventListener)(w,"mouseup",function(e){e.stopImmediatePropagation()}),(0,Q.addEventListener)(w,"click",function(e){var t=ft.getSelectedStep();if(!t)return void(0,pe.showMessage)("warning","Please select a step");var n=u(t.type);return t||n?t&&["HOTSPOT","TOOLTIP"].indexOf(t.type)>-1&&!n&&!t.isLinked?void(0,pe.showMessage)("warning","Please link the step first"):(!n&&["DIALOG","TOOLTIP"].indexOf(t.type)>-1&&(t.elementSelector&&t.isLinked?(0,ve.findInAll)(y(t.elementSelector),(0,me.getRegisteredIframes)(),function(e){e&&(e.iframeData?be.default.getElementLocation(e.iframeData,y(t.elementSelector),function(e){ht.showTemplate({isDom:!1,elementRect:e[0]},t)}):e.element&&ht.showTemplate({isDom:!0,element:e.element},t))}):ht.showTemplate(void 0,t)),Qe.selector.disable(),q(t,Qe.guide),void e.stopImmediatePropagation()):void(0,pe.showMessage)("warning","Please select a step")}),(0,Q.addEventListener)(window,"hashchange",function(){var e=(0,Q.getQueryParam)("aptShowGuide")||$e.sessionStorage.getItem("apt.guideId");Ze=Date.now(),Je=setInterval(function(){if(Date.now()-Ze>=6e3)return void clearInterval(Je);ne.default.isPreview()||(0,Ce.getConfig)("dockMapper")||!ne.default.isPreview()&&(0,Q.pushElements)(e?59:109),Qe.selector.removeAllHighlighted(),be.default.selectorRemoveAllHighlighted(),!e&&!P&&ft.highlightSteps(!1)},1e3)}),setTimeout(function(){(0,Z.observeDOM)(B,function(e){var t=!1,n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if("childList"===s.type&&s.addedNodes.length>0){var l=!0,c=!1,d=void 0;try{for(var u,p=s.addedNodes[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value;if(-1===["style","script"].indexOf(f.nodeName.toLowerCase())&&f.classList&&!(0,Be.arrayFrom)(f.classList).some(function(e){return e.startsWith("apt")||"tippy-popper"===e})){t=!0;break}}}catch(e){c=!0,d=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw d}}}if(t)break}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}if(t){var g=(0,Q.getQueryParam)("aptShowGuide")||$e.sessionStorage.getItem("apt.guideId");ne.default.isPreview()||(0,Ce.getConfig)("dockMapper")||(0,Q.pushElements)(g||!1===Ee.default.getState()?59:109,!0)}})},6e3);var P="true"===(0,Q.getQueryParam)("aptPreview");(0,fe.addDOMReadyListener)(function(){var t=e.playGuide.bind(e),n=(0,Q.getQueryParam)("aptShowGuide")||$e.sessionStorage.getItem("apt.guideId"),r=(0,Q.removeFromQueryParam)("aptShowGuide");Ze=Date.now(),Je=setInterval(function(){if(Date.now()-Ze>=6e3)return void clearInterval(Je);ne.default.isPreview()||(0,Ce.getConfig)("dockMapper")||(0,Q.pushElements)(n?59:109),Qe.selector.removeAllHighlighted(),be.default.selectorRemoveAllHighlighted(),!n&&!P&&ft.highlightSteps(!1)},1e3),ee.AjaxUtil.getData(We+"/editor/"+e.contentGroupId+"/guide/"+e.guideId+"?engagementId="+e.engagementId,function(e){if(He=e.activationTypes,ft.addSteps(e),window.onresize=function(){Qe.selector.removeAllHighlighted(),be.default.selectorRemoveAllHighlighted(),e.steps.filter(function(e){return("TOOLTIP"===e.type||"HOTSPOT"===e.type)&&e.isLinked}).forEach(function(e){var t=e.elementSelector&&e.elementSelector.selector;(0,ve.findInAll)(y(t),(0,me.getRegisteredIframes)(),function(t){t&&(t.iframeData?be.default.selectorHighlightAll(e.elementSelector.selector,e.id,t.iframeData):t.element&&(0,Q.isElementVisible)(t.element)&&Qe.selector.highlightAll([t.element],null,{border:"apt-guide-step-highlight",icon:"apt-guide-step-icon-highlight"},{id:e.id}))})})},Qe.updateGuide(e),n&&(r===sessionStorage.getItem("aptCurrentGuideUrl")||$e.sessionStorage.getItem("apt.stepId"))){!ne.default.isPreview()&&Qe.toggleLinker(!1);S(Qe.guide);history.replaceState("",Ve.title,r);var o=$e.sessionStorage.getItem("aptGuideSelectedLanguage");t(Qe.guide,o,n)}else Ee.default.setState(!0),be.default.updateState(!0)},e.getAuthorizationHeader(),C,!0)}),Ue.bindGlobal("ctrl+alt+m",function(e){return Qe.toggleLinker.call(Qe,e),!1}),history.replaceState("",Ve.title,ne.default.cleanEngagementData())}catch(e){ue.logger.logInternalError(e)}}},{key:"playGuide",value:function(e,t,n){var r=S(e,!0);t&&this.translateGuide(r,t),pt.hideAll();var o=W.bind(this),i=r.steps,a=r.guideSettings,s=ft.getSelectedStep();s&&"BADGE"!==s.type&&(a.startStepId=s.id);var l=i,c=J(l,1),d=c[0],u="BADGE"===d.type,p=u&&d.linked;if(u)if(i=i.slice(1,i.length),i=i.map(function(e){return e.total-=1,e}),p&&!n){je&&je.destroy();var f=r.steps[0],g=f.elementSelector,h=g.matchCssSelector,m=g.cssSelector,v=g.matchTextRule,b=g.textRuleOperator,y=g.textRuleValues;f.elementSelector={matchCssSelector:h,cssSelector:m,matchTextRule:v,htmlTextRule:{operator:b,values:y}};var E=Object.assign({},f,{standalone:e.standaloneBadge});(0,Ie.setBadgeObserverForRegisteredIframes)(),G(E,i,function(){!e.standaloneBadge&&o(i,a,function(){(0,Ie.removeBadge)(f.id),(0,Ie.unsetBadgeObserverForRegisteredIframes)(),document.querySelectorAll("div.tippy-popper.apt-badge-tippy").forEach(function(e){e.parentNode.removeChild(e)})})})}else o(i,a);else o(i,a)}},{key:"openLanguagesDialog",value:function(){var e=this,t=this.guide,n=t.guideLanguages,r=t.defaultLang;n=n||[],n=n.map(function(e){return e.lang}),n.unshift(r),n=n.map(function(e){var t=e.split("-"),n=J(t,2),r=n[0],o=n[1];return{key:e,country:_e.countries[o]&&_e.countries[o].name,language:_e.languagesAll[r].name,flag:_e.countries[o]&&(0,_e.getEmojiFlag)(o)}});var o=new Le.default({name:"apt-trigger-radio",className:"apt-languages-list",radioOptions:n.map(function(e){return{children:(0,Q.createElement)("div","apt-language",{},[e.country&&(0,Q.createElement)("span","apt-language-code",{text:e.key}),e.country&&(0,Q.createElement)("span","apt-language-flag",{text:e.flag}),(0,Q.createElement)("span","apt-language-text",{},[(0,Q.createElement)("b","",{text:e.language}),e.country&&(0,Q.createElement)("span","apt-language-text-seperator",{text:"-"}),e.country&&document.createTextNode(e.country)])]),value:e.key,selected:e.key===r}})});new Oe.default({classIcon:"apt-languages-icon",header:"Select Language",className:"apt-languages-dialog",children:o.render(),height:"200px",width:"400px",saveCallback:function(){var t=o.getSelectedValue();$e.sessionStorage.setItem("aptGuideSelectedLanguage",t),e.previewGuideByLanguage.apply(e,[e.guide,t])}}).render()}},{key:"translateGuide",value:function(e,t){var n=this.guide.guideLanguages.find(function(e){return e.lang===t}),r=this.guide.deviceContentLanguages.find(function(e){return e.lang===t});if(r){var o=r.badgeTooltip,i=J(e.steps,1),a=i[0];"BADGE"===a.type&&(a.altSettings.text=o)}if(n){var s=n.backButtonText,l=n.endButtonText,c=n.getStartedButtonText,d=n.restartButtonText,u=n.nextButtonText,p=n.skipGuideButtonText,f=n.stepCounterLabelText,g=e.guideSettings=Object.assign(e.guideSettings,{endButtonText:l,backButtonText:s,getStartedButtonText:c,restartButtonText:d,nextButtonText:u,skipButtonText:p,stepCounterLabelText:f,snoozeButtonText:r?r.snoozeText:"Show me later"});g.badgeTooltip;e.steps.forEach(function(e,n){if(e.guideLangSteps){var r=e.guideLangSteps.find(function(n){return n.lang===t&&n.guideStepId===e.id});if(r){var o=r.html,i=r.title,a=r.backButtonText,s=r.nextButtonText;e.content&&o&&(e.content=o),e.titleHtml&&i&&(e.titleHtml=i),e.backButton&&a&&(e.backButton.text=a),e.nextButton&&s&&(e.nextButton.text=s)}}})}}},{key:"previewGuideByLanguage",value:function(e,t){try{ne.default.isPreview()||(Qe.selector.removeAllHighlighted(),be.default.selectorRemoveAllHighlighted(),this.toggleLinker(!1)),$e.sessionStorage.removeItem("apt.stepId"),$e.sessionStorage.removeItem("apt.prevStepMap");try{clearInterval(Je)}catch(e){}this.playGuide(e,t)}catch(e){ue.logger.logInternalError(e)}}},{key:"previewGuide",value:function(){Ee.default.setIsPlayingGuide(!0),Ee.default.setMappedElementsChecked(!1),this.guide.guideLanguages&&this.guide.guideLanguages.length>0?this.openLanguagesDialog():($e.sessionStorage.removeItem("aptGuideSelectedLanguage"),this.previewGuideByLanguage(this.guide))}},{key:"exit",value:function(){var e=this;try{if(ht.getCurrentEditedStepId()||lt)return void(0,pe.showMessage)("confirm","Any unsaved work on the current step will be lost. Are you sure you want to continue?",function(){ne.default.exit(),$e.location=ze+"/engagement"+("/"+e.engagementId+"/content"||"")},{showCancel:!0});ne.default.exit(),$e.location=ze+"/engagement"+("/"+this.engagementId+"/content"||"")}catch(e){ue.logger.logInternalError(e)}}},{key:"toggleLinker",value:function(e,t,n){try{e.stopImmediatePropagation&&e.stopImmediatePropagation();var r=!0;if((0,Ce.isIframe)())e.target||void 0===e||(r=!0===e&&e);else{e&&Ee.default.setIsPlayingGuide(!1);var o=Ee.default.getState(),i="flex",a=109;e.target||void 0===e||(o=!0!==e),o?(!n&&this.selector.disable(),be.default.setSelectorState(!1),r=!1,Ee.default.setState(r),this.toggleButton[qe].remove("aptr-mapping-on"),this.toggleButton[qe].add("aptr-mapping-off"),i="none",a=59,ht.close()):(this.toggleButton[qe].remove("aptr-mapping-off"),this.toggleButton[qe].add("aptr-mapping-on"),pt.close(!0),(ft.isSelected()||t)&&(this.selector.enable(),be.default.setSelectorState(!0)),ft.isSelected()&&ft.selectStep(ft.getSelected(),Qe)),this.lowerBar.style.display=i,(0,Ce.getConfig)("dockMapper")||(0,Q.pushElements)(a),pt.setDefaultPaddingTop(a),r&&(Qe.selector.removeAllHighlighted(),be.default.selectorRemoveAllHighlighted(),ft.highlightSteps(!1))}Ee.default.setState(r),!(0,Ce.isIframe)()&&be.default.updateState(r,ft.isSelected())}catch(e){ue.logger.logInternalError(e)}}},{key:"toggleDocking",value:function(e,t){void 0===t&&(t=e.classList.contains("aptr-mapper-bottom")?"top":"bottom"),"bottom"===t?e.classList.add("aptr-mapper-bottom"):e.classList.remove("aptr-mapper-bottom"),$e.sessionStorage.setItem("aptMapperDockingPosition",t)}},{key:"getAuthorizationHeader",value:function(){try{return{Authorization:"Bearer "+ne.default.getToken()}}catch(e){ue.logger.logInternalError(e)}}},{key:"handleLinkFail",value:function(e){401===e?this.exit():403===e?((0,pe.showMessage)("error","Please validate the Aptrinsic api key match the product of the guide"),this.exit()):(0,pe.showMessage)("error","failed to link element, please try again later")}},{key:"unlinkBadge",value:function(e){var t={htmlTextRule:{},matchCssSelector:null,matchTextRule:null,selector:null,type:null,unique:null},n={positionHorizontal:"RIGHT",positionLeftDelta:0,positionTopDelta:0,positionVertical:"CENTER"};e.elementSelector=t,e.positionSettings=n,e.isLinked=!1,e.linked=!1,this.updateBadge(e,function(t){Qe.unlinkButton[qe].remove("selected"),dt.resetValue(),ft.addSteps(t,e.id),Qe.updateGuide(t),je.destroy(),Ee.default.setAppliedStepData(e.id,e)})}},{key:"linkBadge",value:function(e){e.isLinked=!0,e.linked=!0;var t=ot("html.get");Array.isArray(t)||(e.altSettings.text=t),this.updateBadge(e,function(t){lt=!1,ht.resetEditedStep(),(0,pe.showMessage)("success","Linked element to step "+ft.getSelectedName()),ft.addSteps(t),Qe.updateGuide(t),ft.resetSelect(),dt.resetValue(),Qe.setShowed(ft.getTotalLinked()),Qe.saveButton[qe].remove("selected"),je.destroy(),Ee.default.setAppliedStepData(e.id,e)})}},{key:"updateBadge",value:function(e,t){try{ee.AjaxUtil.postData(We+"/api/badge/"+e.id,e,this.getAuthorizationHeader(),function(n){var r=Object.assign({},Qe.guide,{badgeSettings:e});t(r)},this.handleUnlinkFailed.bind(this),!0)}catch(e){ue.logger.logInternalError(e)}}},{key:"linkStep",value:function(){var e=ft.getSelectedStep();if(null===e)return void(0,pe.showMessage)("warning","Please select step before linking element");var t=null;["TOOLTIP","HOTSPOT","BADGE"].indexOf(e.type)>-1&&(t=dt.getCssSelector(),t.unique||(0,pe.showMessage)("warning","There is more than one element on page with same selector"));var n=Ee.default.getAppliedStepData(e.id);if("BADGE"===e.type)return e.elementSelector=t,e.elementSelector.type=e.elementSelector.type.toUpperCase(),n instanceof Object&&delete n.elementSelector,void this.linkBadge(Object.assign({},e,n));var r=n&&n.positionVertical||e.positionVertical,o=n&&n.positionHorizontal||e.positionHorizontal;if(!r||!o)return void(0,pe.showMessage)("warning","You cannot save step without position");var i=We+"/editor/"+this.contentGroupId+"/guide/"+this.guideId+"/step/"+e.id+"/link",a=Re("[data-aptr='step-wrapper']").froalaEditor("html.get"),s=!Array.isArray(a)||a.length>0?a:Ee.default.getContent(),l=s;!(0,Q.isBlank)(s)&&Ee.default.getContentWrapper()&&(l=Ee.default.getContentWrapper(),l.innerHTML=s,l=l.outerHTML);var c=Re("[data-aptr='title-wrapper']").froalaEditor("html.get"),d=!Array.isArray(a)||c.length>0?c:Ee.default.getTitle(),u=Ee.default.getTitleWrapper()||"";(0,Q.isBlank)(d)&&!(0,Z.isElement)(u)||(u.innerHTML=d,u=u.outerHTML);var p=Object.assign({},e);Object.assign(p,{html:l,sequenceNumber:e.sequenceNumber,elementSelector:t,positionVertical:r,positionHorizontal:o,footerHtml:Qe.guide.footerHtml||ht.getFooterStr(),stepType:e.type,modal:e.modal,titleHtml:u,coreStyling:Qe.guide.coreStyle,overrideStyling:Qe.guide.subscriptionStyle,engagementCoreStyling:Qe.guide.engagementCoreStyle}),B(n,e,p),ee.AjaxUtil.postData(i,p,this.getAuthorizationHeader(),function(e){lt=!1,(0,pe.showMessage)("success","Linked element to step "+ft.getSelectedName()),ht.resetEditedStep(),ht.close(),ft.addSteps(e),Qe.updateGuide(e),ft.resetSelect(),dt.resetValue(),Qe.setShowed(ft.getTotalLinked()),Qe.saveButton[qe].remove("selected"),Qe.unlinkButton[qe].remove("selected"),Qe.selector.disable(),be.default.setSelectorState(!1)},this.handleLinkFail.bind(this),!0)}},{key:"setShowed",value:function(e){var t=e||0;void 0!==this.showLabel&&(this.showLabel.innerHTML="",this.showLabel.appendChild((0,Q.createElement)("text",void 0,"Show Mapped ("+t+")")))}},{key:"handleUnlinkFailed",value:function(e){401===e?this.exit():403===e?((0,pe.showMessage)("error","Please validate the Aptrinsic api key match the product of the guide"),this.exit()):(0,pe.showMessage)("error","failed to unlink an element, please try again later")}},{key:"unlinkStep",value:function(e){try{var t=We+"/editor/"+this.contentGroupId+"/guide/"+this.guideId+"/step/"+e+"/unlink";ee.AjaxUtil.postData(t,null,this.getAuthorizationHeader(),function(t){(0,pe.showMessage)("success","Unlinked element to step "+ft.getSelectedName()),Qe.unlinkButton[qe].remove("selected"),dt.resetValue(),ft.addSteps(t,e),Qe.updateGuide(t),ht.close()},this.handleUnlinkFailed.bind(this),!0)}catch(e){ue.logger.logInternalError(e)}}},{key:"showLinked",value:function(e,t,n){try{dt.setValue({matchCssSelector:!0,cssSelector:t,type:void 0,matchTextRule:!1,elementText:n,textOperator:void 0});var r=ft.getSelectedStep();Object.assign(r,Ee.default.getAppliedStepData(r.id)),ht.showTemplate(e,r),this.linkState=0,i(this.saveButton)}catch(e){ue.logger.logInternalError(e)}}},{key:"showUnlinked",value:function(e){try{ft.select(e.id),dt.setValue({matchCssSelector:!0,cssSelector:e.elementSelector.selector,type:void 0,matchTextRule:!1,elementText:void 0,textOperator:void 0}),(0,ve.findInAll)(y(e.elementSelector),(0,me.getRegisteredIframes)(),function(t){t&&(t.iframeData?be.default.getElementLocation(t.iframeData,y(selectedStep.elementSelector),function(t){ht.showTemplate({isDom:!1,elementRect:t[0]},e)}):t.element&&ht.showTemplate({isDom:!0,element:t.element},e))}),this.linkState=1,this.saveButton[qe].remove("apt-step-save-ready"),this.saveButton[qe].add("apt-step-save-ready")}catch(e){ue.logger.logInternalError(e)}}},{key:"updateGuide",value:function(e){this.guide=e}},{key:"setConfig",value:function(e){(0,Ce.overrideConfig)(e,!0)}}]),e}(),Et=function(){function e(){o(this,e)}return X(e,null,[{key:"call",value:function(){try{for(var t=arguments[0],n=0;n<t.length;n++)e.callCommand(t[n])}catch(e){ue.logger.logInternalError(e)}}},{key:"callCommand",value:function(e){try{if(e.length<2)return void ue.logger.logInternalError(new Error("Cannot have command with less than two arguments"));var t=Array.prototype.slice.call(e),n=t[0];Qe[n].apply(Qe,t.slice(1))}catch(e){ue.logger.logInternalError(e)}}}]),e}();if(ne.default.isEditorMode()&&"2"===ne.default.getType()){Qe=new yt,ht.init();var St=ne.default.getQueue();Et.call(St),ne.default.replaceCall(function(){Et.call([Y])})}var Ct=new function(){this.elementSelected=function(e,t,n){b(null,e,t,n)},this.getGuide=function(){return Qe.guide},this.changeSelectorState=function(e){e?Qe.selector.enable():Qe.selector.disable()},this.disableSelector=function(){Qe.selector.disable()},this.removeHighlighted=function(){},this.changePosition=function(e,t,n){positionSelector.changePosition(e,t,n)},this.changeLastContent=function(e){Ee.default.setContent(e)},this.selectorIconClicked=function(e,t){Qe.selectorIconClickedCallback(e,t)},this.getState=function(){return Ee.default.getState()},this.isStepSelected=function(){return null!=ft.getSelected()}},wt=new function(){function e(e){Qe.selector.isInitialized||Qe.selector.initSelector({selectedCallback:b,iconClicked:Qe.selectorIconClickedCallback,disabled:ne.default.isPreview()},e)}this.updateGuide=function(e){e&&(Qe.updateGuide(e),ft.addSteps(e))},this.changePosition=function(e,t){ht.changePosition(t,e)},this.showStepPopup=function(e){v(void 0,e)},this.updateState=function(e,t){Qe.toggleLinker(e,t)},this.changeSelectorState=function(t){e(!t),t?Qe.selector.enable():Qe.selector.disable()},this.hideAll=function(){pt.hideAll()},this.stepSelected=function(t,n){if((0,Ce.isIframe)()){var r=Xe[t];if(r){var o=(0,Z.findInWindow)(r.elementSelector.selector,Ve);o&&(0,Q.isElementVisible)(o)&&(Qe.selector.highlightAll([data.element],null,{border:"apt-guide-step-highlight",icon:"apt-guide-step-icon-highlight"},{id:r.id}),e(r.isLinked),!r.isLinked&&Qe.selector.enable(),(0,Q.isElementVisible)(o)?((0,Q.isObjectEmpty)(n)||Object.assign(r,n),ht.showTemplate(o,r)):he.default.guideElementNotVisible(r.elementSelector.selector))}}},this.removeHighlighted=function(e,t){Qe.selector.removeHighlighted(e,t)},this.highlightElement=function(e,t){var n=Ve.querySelector(e);Qe.selector.highlightElement(n,t)},this.highlightAll=function(e,t){var n=Ve.querySelector(e);(0,Q.isElementVisible)(n)&&Qe.selector.highlightAll([n],null,{border:"apt-guide-step-highlight",icon:"apt-guide-step-icon-highlight"},{id:t})},this.removeAllHighlighted=function(){Qe.selector.removeAllHighlighted()},this.isElementVisible=function(e){return(0,Q.isElementVisible)((0,Z.findInWindow)(e,Ve),!1)},this.getAlternateSelector=function(e){return(0,Se.getElementSelectorAlternative)((0,Z.findInWindow)(e,Ve))},this.getDifferentSelector=function(e,t){return(0,Se.getDifferentSelectors)((0,Z.findInWindow)(e,Ve))}};t.default=Ct,t.GuideEditorIframe=wt},function(e,t,n){"use strict";function r(e,t){var n=0,r=(0,i.default)(".//*["+a+"]");switch(t){case"is":n=(0,i.default)(".//*["+a+'="'+e+'"]');break;case"isNot":n=r-(0,i.default)(".//*["+a+'="'+e+'"]');break;case"contains":n=(0,i.default)(".//*[contains("+a+',"'+e+'")]');break;case"startsWith":n=(0,i.default)(".//*[starts-with("+a+',"'+e+'")]');break;case"endsWith":n=(0,i.default)(".//*[substring(text(), string-length("+a+') - string-length("'+e+'") + 1) = "'+e+'"]');break;case"notContains":n=r-(0,i.default)(".//*[contains"+a+',"'+e+'")]');break;case"notStartsWith":n=r-(0,i.default)(".//*[starts-with("+a+',"'+e+'")]');break;case"notEndsWith":n=r-(0,i.default)(".//*[substring("+a+', string-length(text()) - string-length("'+e+'") + 1) = "'+e+'"]');break;case"isNotEmpty":n=r}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(172),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a="normalize-space(text())"},function(e,t,n){"use strict";/*! https://mths.be/cssesc v1.0.1 by @mathias */
var r={},o=r.hasOwnProperty,i=function(e,t){if(!e)return t;var n={};for(var r in t)n[r]=o.call(e,r)?e[r]:t[r];return n},a=/[ -,\.\/;-@\[-\^`\{-~]/,s=/[ -,\.\/;-@\[\]\^`\{-~]/,l=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,c=function e(t,n){n=i(n,e.options),"single"!=n.quotes&&"double"!=n.quotes&&(n.quotes="single");for(var r="double"==n.quotes?'"':"'",o=n.isIdentifier,c=t.charAt(0),d="",u=0,p=t.length;u<p;){var f=t.charAt(u++),g=f.charCodeAt(),h=void 0;if(g<32||g>126){if(g>=55296&&g<=56319&&u<p){var m=t.charCodeAt(u++);56320==(64512&m)?g=((1023&g)<<10)+(1023&m)+65536:u--}h="\\"+g.toString(16).toUpperCase()+" "}else h=n.escapeEverything?a.test(f)?"\\"+f:"\\"+g.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B:]/.test(f)?o||":"!=f?"\\"+g.toString(16).toUpperCase()+" ":f:"\\"==f||!o&&('"'==f&&r==f||"'"==f&&r==f)||o&&s.test(f)?"\\"+f:f;d+=h}return o&&(/^_/.test(d)?d="\\_"+d.slice(1):/^-[-\d]/.test(d)?d="\\-"+d.slice(1):/\d/.test(c)&&(d="\\3"+c+" "+d.slice(1))),d=d.replace(l,function(e,t,n){return t&&t.length%2?e:(t||"")+n}),!o&&n.wrap?r+d+r:d};c.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},c.version="1.0.1",e.exports=c},function(e,t,n){"use strict";var r=function(){var e,t,n;return e=function(e){var n,r,o,i,a=[];for(n=e.split(","),o=0,i=n.length;o<i;o+=1)r=n[o],r.length>0&&a.push(t(r));return a},t=function(e){var t,n=e,r={a:0,b:0,c:0},o=[],i=/(\[[^\]]+\])/g,a=/(#[^\#\s\+>~\.\[:]+)/g,s=/(\.[^\s\+>~\.\[:]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,d=/(:[^\s\+>~\.\[:]+)/g,u=/([^\s\+>~\.\[:]+)/g;return t=function(t,i){var a,s,l,c,d,u;if(t.test(n))for(a=n.match(t),s=0,l=a.length;s<l;s+=1)r[i]+=1,c=a[s],d=n.indexOf(c),u=c.length,o.push({selector:e.substr(d,u),type:i,index:d,length:u}),n=n.replace(c,Array(u+1).join(" "))},function(){var e=function(e){var t,r,o,i;if(e.test(n))for(t=n.match(e),r=0,o=t.length;r<o;r+=1)i=t[r],n=n.replace(i,Array(i.length+1).join("A"))},t=/\\[0-9A-Fa-f]{6}\s?/g,r=/\\[0-9A-Fa-f]{1,5}\s/g,o=/\\./g;e(t),e(r),e(o)}(),function(){var e=/:not\(([^\)]*)\)/g;e.test(n)&&(n=n.replace(e,"     $1 "))}(),function(){var e,t,r,o,i=/{[^]*/gm;if(i.test(n))for(e=n.match(i),t=0,r=e.length;t<r;t+=1)o=e[t],n=n.replace(o,Array(o.length+1).join(" "))}(),t(i,"b"),t(a,"a"),t(s,"b"),t(l,"c"),t(c,"b"),t(d,"b"),n=n.replace(/[\*\s\+>~]/g," "),n=n.replace(/[#\.]/g," "),t(u,"c"),o.sort(function(e,t){return e.index-t.index}),{selector:e,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:o}},n=function(e,n){var r,o,i;if("string"==typeof e){if(-1!==e.indexOf(","))throw"Invalid CSS selector";r=t(e).specificityArray}else{if(!Array.isArray(e))throw"Invalid CSS selector or specificity array";if(4!==e.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";r=e}if("string"==typeof n){if(-1!==n.indexOf(","))throw"Invalid CSS selector";o=t(n).specificityArray}else{if(!Array.isArray(n))throw"Invalid CSS selector or specificity array";if(4!==n.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";o=n}for(i=0;i<4;i+=1){if(r[i]<o[i])return-1;if(r[i]>o[i])return 1}return 0},{calculate:e,compare:n}}();t.calculate=r.calculate,t.compare=r.compare},function(e,t,n){"use strict";function r(e){try{var t=document.evaluate(e,document.body,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);return t?t.snapshotLength:0}catch(e){return 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){if((0,i.isIframe)()){var r=window.top,s=(0,l.default)(t,n),c=a.IframeRequest.getIframeRequest((0,o.getIframeId)(),"TEXT_MATCH_COUNTER_RESULT",{counter:s},e);(0,o.postRequest)(c,r,!0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(13),i=n(2),a=n(6),s=n(169),l=function(e){return e&&e.__esModule?e:{default:e}}(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.className,n=e.onChange,r=e.options,o=e.selected,i=e.disabled,a=new m.default({name:"apt-trigger-radio",className:t,selectCallback:n,disabled:i,radioOptions:r.map(function(e){return{text:e.label,value:e.key,selected:e.key===o}})});this.render=function(){return a.render()}}function i(e){function t(){var e=r,t=e.badgeIcon;return Object.keys(x.ICON_MAP).map(function(e){var n=(0,a.createElement)("img","icon"),r=x.ICON_MAP[e];return n.src=r,n.style.width="100%",n.style.height="100%",{value:e,children:n,selected:e===t}})}function n(){var n=r,i=n.badgeIconColor,m=n.backgroundColor,v=n.badgeHotspotSettings.spotSize,y=n.useImage,S=n.imageUrl,w=n.borderColor,T=n.borderWidth,x=n.backgroundFill,I=n.engagementTrigger,A=n.qualificationScope.qualificationScopeType;c=new b.default({text:"Image url is invalid"}),S?u(S,y):c.hide();var O="ONCE"===A,N=new o({className:"apt-triggers",selected:I,disabled:O,onChange:function(e){return f({engagementTrigger:e})},options:[{key:"ON_CLICK",label:"Click"},{key:"ON_HOVER",label:"Hover"}]}),L=(0,a.createElement)("div","apt-badge-triggers",void 0,[k("Trigger Types"),N.render()]),_=t(),F=new C.default("Icon",_,{className:"apt-badge-icon-dropdown",width:"40px"},function(e){var t=e.value;f({badgeIcon:t})}),D=new g.default({labelText:"Background Color",initialValue:m,disabled:y,colorChangeCallback:function(e){return f({backgroundColor:e})}}),B=new d.default({text:"Fill",unitsText:"%",labelInline:!1,initialValue:x,changeCallback:function(e){f({backgroundFill:e})}}),R=new g.default({labelText:"Icon Color",initialValue:i,disabled:y,colorChangeCallback:function(e){return f({badgeIconColor:e})}}),P=new d.default({text:"Size",unitsText:"px",labelInline:!1,initialValue:v,changeCallback:function(t){var n=Object.assign({},e.badge.badgeHotspotSettings,{spotSize:t});f({badgeHotspotSettings:n})}}),M=new l.default({hasLine:!0,labelText:"Use Image",checkCallback:function(e){e?(R.disable(),D.disable(),U.enable(),s?c.hide():c.show()):(R.enable(),D.enable(),U.disable()),f({useImage:e})},checked:y}),U=new p.default({text:"Image Url",labelInline:!0,initialValue:S,disabled:!y,changeCallback:h}),j=(0,a.createElement)("div","apt-inline apt-image-url-section",null,[U.render(),c.render()]),H=new g.default({labelText:"Border Color",initialValue:w,colorChangeCallback:function(e){return f({borderColor:e})}}),$=new d.default({text:"Border Width",unitsText:"px",labelInline:!1,initialValue:T,changeCallback:function(e){f({borderWidth:e})}});return(0,a.createElement)("div","apt-badge-settings",null,[new E.default({labelText:"Icon Settings"}).render(),(0,a.createElement)("div","apt-badge-settings-section",null,[F.render(),D.render(),B.render(),R.render(),P.render(),H.render(),$.render(),M.render(),j,L])])}var r=e.badge,i=void 0,s=!0,c=void 0,u=function(e,t,n){t?(i||(i=new Image),i.src=e,i.onerror=function(){c&&c.show(),s=!1,n&&n(!1)},i.onload=function(){s=!0,c&&c.hide(),n&&n(!0)}):(s=!0,n&&n(!0),c&&c.hide())},f=function(t){var n=e.update;r=Object.assign({},r,t),n(r,Object.keys(t))},h=(0,a.debounce)(function(e){u(e,r.useImage,function(t){t&&f({imageUrl:e})})},300);this.getValues=function(){return r},this.render=function(){var t=e.badge,r=t.customZIndex,o=t.positionSettings,i=new d.default({text:"Z Index",unitsText:"px",labelInline:!0,initialValue:(0,a.getNumberWithFallback)(r,99998),max:2147483647,min:-2147483647,changeCallback:function(e){f({customZIndex:e})}}),s=n(),l=new T.default({positionSettings:o,update:function(e){return f({positionSettings:e})}});return(0,a.createElement)("div","apt-alt-settings",null,[s,l.render(),i.render()])},this.getData=function(){return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(0),s=n(59),l=r(s),c=n(82),d=r(c),u=n(177),p=r(u),f=n(81),g=r(f),h=n(83),m=r(h),v=n(192),b=r(v),y=n(60),E=r(y),S=n(68),C=r(S),w=n(176),T=r(w),x=n(62),k=function(e){return(0,a.createElement)("div",["apt-setting-label"],{text:e})}},function(e,t,n){"use strict";function r(e){function t(e,t){return s[e].replace("center","middle")+" "+l[t]}function n(e,t){return f&&f.find(function(n){return n[0]===e&&n[1]===t})}function r(e){c.forEach(function(t){return t.forEach(function(t){t&&t.disable&&t.enable&&(e?t.disable():t.enable())})})}var i=[[1,1,1],[1,1,1],[1,1,1]],s=["top","center","bottom"],l=["left","center","right"],c=[],d=null,u=null,p=e&&e.checkCallback,f=e&&e.disabledIndex,g=e&&e.value,h=g,m=function(e,t){for(var r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++)r===e&&o===t||n(r,o)||c[r][o].setChecked(!1)};this.getValue=function(){return h},this.disable=function(){return r(!0)},this.enable=function(){return r(!1)},this.render=function(){var e=(0,o.createElement)("div","apt-position-grid"),r=(0,o.createElement)("div");d=(0,o.createElement)("div","",{text:g.length>=2?g[0].toLowerCase().replace("center","middle")+" "+g[1].toLowerCase():"not selected..."}),u=(0,o.createElement)("div","apt-position-error");for(var f=void 0,v=0;v<i.length;v++){c[v]=[];for(var b=(0,o.createElement)("div"),y=0;y<i[v].length;y++)!function(e){var r=null;n(v,e)||(r=new a.default({checkCallback:function(e,n){return function(){if(!r.getChecked())return void r.setChecked(!0);f&&clearTimeout(f);var o=void 0;if(p&&(o=p(s[e],l[n])),!o)return r.setChecked(!1),u.innerText="There is not enough space for step in "+t(e,n),void(f=setTimeout(function(){u.innerText=""},4e3));u.innerText="",d.innerText=t(e,n),m(e,n),h=[s[e],l[n]]}}(v,e),stopPropagation:!0,checked:g&&g.length>=2&&g[0].toLowerCase()===s[v]&&g[1].toLowerCase()===l[e]})),(0,o.appendElements)(b,[(0,o.createElement)("div","apt-inline",null,[r?r.render():(0,o.createElement)("div","apt-inline apt-blank")])]),c[v].push(r)}(y);(0,o.appendElements)(r,[b])}return(0,o.appendElements)(e,[r,d,u]),e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),i=n(59),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){[r,o,a].forEach(function(t){e?t.disable():t.enable()})}var n=e.positionSettings,r=void 0,o=void 0,a=void 0,l=function(t){var r=e.update;n=Object.assign({},n,t),r(n)};this.disable=function(){t(!0)},this.enable=function(){t(!1)},this.render=function(){var t=e.positionSettings,n=t.positionTopDelta,d=t.positionLeftDelta,p=t.positionVertical,f=t.positionHorizontal,g=function(e){return e=e.toLowerCase(),"middle"===e&&(e="center"),e},h=g(p),m=g(f);r=new c.default({text:"Top",unitsText:"px",labelInline:!0,initialValue:n,changeCallback:function(e){return l({positionTopDelta:e})}}),o=new c.default({text:"Left",unitsText:"px",labelInline:!0,initialValue:d,changeCallback:function(e){return l({positionLeftDelta:e})}}),a=new s.default({disabledIndex:[[1,1]],value:[h,m],checkCallback:function(e,t){return l({positionVertical:e,positionHorizontal:t}),!0}});var v=new u.default({labelText:"Position"}).render(),b=(0,i.createElement)("div","apt-position-cnt",null,[(0,i.createElement)("div","apt-top-left-cnt apt-inline",null,[(0,i.createElement)("div","",null,[r.render()]),(0,i.createElement)("div","",null,[o.render()])]),(0,i.createElement)("div","apt-inline apt-position-grid-cnt",null,[a.render()])]);return(0,i.createElement)("div","apt-position-cnt-wrapper",null,[v,b])},this.getValues=function(){return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(0),a=n(175),s=r(a),l=n(82),c=r(l),d=n(60),u=r(d)},function(e,t,n){"use strict";function r(e){var t=e&&e.text,n=e&&e.additionalClassesArray||[],r=e&&e.initialValue,i=e&&e.placeholder,a=e&&!!e.disabled,s=e&&e.dataAtt,l=e&&e.changeCallback,c=e&&!!e.labelInline,d=null;this.disable=function(){a=!0,d.disabled=!0,d.classList.add("apt-disabled")},this.enable=function(){a=!1,d.disabled=!1,d.classList.remove("apt-disabled")},this.getValue=function(){return d.value},this.setValue=function(e){d.value=e},this.render=function(){return d=(0,o.createInput)("text",["apt-setting-input","apt-text-input"],r,i,a,null,s),(0,o.addEventListener)(d,"input",function(e){var t=e.target.value;d.value=t,l&&l(t)}),(0,o.createElement)("div",["apt-inline","apt-text"].concat(n),void 0,[t&&(0,o.createElement)("div",["apt-setting-label",c?"apt-inline":""],{text:t}),(0,o.createElement)("div",["apt-inline"],void 0,[d])])}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=(0,p.getDifferentSelectors)(e),n="",r=(0,g.checkIsRandomIdSelector)(t.defaultSelector);return r&&(n=(0,p.getElementSelectorAlternative)(e)),t.randomDetected=r,t.randomAlternative=n,t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=n(3),l=n(80),c=n(2),d=n(17),u=function(e){return e&&e.__esModule?e:{default:e}}(d),p=n(56),f=n(7),g=n(57),h=n(18),m=n(10),v=["BODY","HTML"],b={"px-sidebar":!0,"px-bottom-bar":!0,"px-editor-minimize":!0,"px-bottom-bar-wrapper":!0},y=function(){function e(){r(this,e),this.top=null,this.bottom=null,this.left=null,this.right=null,this.highlightedMap={},this.elementHighlightedMap={},this.elementBorderMap={},this.highlightedElements=[],this.scrollBinder=new l.ScrollEventBinder}return i(e,[{key:"isValidElement",value:function(e){var t=e;try{if(v.indexOf(e.nodeName.toUpperCase())>-1)return!1;if(b[t.id])return!1;for(;t&&t.nodeName&&-1===["body","frameset","#document"].indexOf(t.nodeName.toLowerCase());){for(var n=0;n<t.classList.length;n++){if(t.classList[n].startsWith("apt-")||t.classList[n].startsWith("aptr-"))return!1;if("true"===t.getAttribute("data-apt-disable-selector"))return!1}t=(0,h.getParentNode)(t)}}catch(e){return s.logger.logInternalError(e,"failed to check if valid element for element selector"),!1}return!(v.indexOf(e.tagName)>-1||(0,a.isString)(e.className)&&e.className.indexOf("selector")>-1)}},{key:"initSelector",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(this.iconClick=e.iconClicked,this.selectValidator=e.selectValidator,this.selectedCallback=e.selectedCallback,this.disabled=e.disabled),this.top=document.createElement("div"),this.bottom=document.createElement("div"),this.left=document.createElement("div"),this.right=document.createElement("div"),this.top.className="apt-guide-selector-top",this.bottom.className="apt-guide-selector-bottom",this.left.className="apt-guide-selector-left",this.right.className="apt-guide-selector-right";var r=(0,c.getBody)();r.appendChild(this.top),r.appendChild(this.bottom),r.appendChild(this.left),r.appendChild(this.right),this.isInitialized=!0,(0,a.addEventListener)(document,"mousemove",this.mouseMoved.bind(this));var i=["dblclick","mousedown","mouseover","mouseout","mouseup","mouseenter","mouseleave","keydown","keypress","keyup","blur"];(0,c.getConfig)("usePointerEvent")&&(i=i.concat((0,m.getPointerDownEventName)(),(0,m.getPointerDownEventName)()));for(var s=0;s<i.length;s++)(0,a.addEventListener)(document,i[s],function(e){if(!t.disabled&&t.isValidElement((0,h.getEventTarget)(e)))return e.preventDefault(),e.stopImmediatePropagation(),!1});(0,a.addEventListener)(document,"click",function(e){if(!t.disabled){var n=(0,h.getEventTarget)(e);if(t.isValidElement(n)&&(!t.selectValidator||t.selectValidator())){e.preventDefault(),e.stopImmediatePropagation(),t.removeHighlighted("main",!1);var r=o(n);t.highlightElement(n,"main"),t.selectedCallback(n,r,(0,f.getText)(n))}}}),n||this.disable()}},{key:"mouseMoved",value:function(e){if(!this.disabled){var t=(0,h.getEventTarget)(e);if(this.isValidElement(t)&&!(this.highlightedElements.indexOf(t)>-1)){var n=t.getBoundingClientRect(),r=n.height,o=n.width;this.top.style.left=n.left-4+"px",this.top.style.top=n.top-4+"px",this.top.style.width=o+5+"px",this.bottom.style.top=n.top+r+1+"px",this.bottom.style.left=n.left-3+"px",this.bottom.style.width=o+5+"px",this.left.style.left=n.left-5+"px",this.left.style.top=n.top-4+"px",this.left.style.height=r+8+"px",this.right.style.left=n.left+o+1+"px",this.right.style.top=n.top-4+"px",this.right.style.height=r+8+"px"}}}},{key:"highlightElement",value:function(e,t,n,r){if(!this.disabled){var o=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div");o.className="apt-guide-highlighted-top",i.className="apt-guide-highlighted-bottom",s.className="apt-guide-highlighted-left",l.className="apt-guide-highlighted-right",d.className="apt-guide-highlight-icon",n&&(n.border&&(o.classList.add(n.border),i.classList.add(n.border),s.classList.add(n.border),l.classList.add(n.border)),n.icon&&d.classList.add(n.icon));var u=this.highlightedMap[t];void 0===u&&(u=[],this.highlightedMap[t]=u),u.push(o,i,s,l,d);var p=this.elementHighlightedMap[t];void 0===p&&(p=[],this.elementHighlightedMap[t]=p),p.push(e),this.highlightedElements.push(e),this.elementBorderMap[e]={borders:[o,i,l,s],icon:d,data:r},this.elementBorderMap[e].hoverListener=this.highlightedHover.bind(this),this.elementBorderMap[e].leaveListener=this.highlightedLeave.bind(this),(0,a.addEventListener)(e,"mouseover",this.elementBorderMap[e].hoverListener),(0,a.addEventListener)(e,"mouseleave",this.elementBorderMap[e].leaveListener),(0,a.addEventListener)(d,"mouseover",this.iconHovered.bind(this)),(0,a.addEventListener)(d,"mouseleave",this.iconLeave.bind(this)),this.iconClick&&(0,a.addEventListener)(d,"click",this.iconClicked.bind(this));var f=e.getBoundingClientRect(),g=f.height,h=f.width;o.style.left=f.left-4+"px",o.style.top=f.top+window.scrollY-4+"px",o.style.width=h+5+"px",i.style.top=f.top+window.scrollY+g+1+"px",i.style.left=f.left-3+"px",i.style.width=h+5+"px",s.style.left=f.left-5+"px",s.style.top=f.top+window.scrollY-4+"px",s.style.height=g+8+"px",l.style.left=f.left+h+1+"px",l.style.top=f.top+window.scrollY-4+"px",l.style.height=g+8+"px",d.style.left=f.left-2+"px",d.style.top=f.top+window.scrollY-1+"px";var m=(0,c.getBody)();m.appendChild(o),m.appendChild(i),m.appendChild(s),m.appendChild(l),m.appendChild(d);var v=this.scrollBinder.getFollowScrollHandler(e,[o,i,l,s,d]);this.scrollBinder.handleScrollEvent(e,v)}}},{key:"highlightedHover",value:function(e){try{var t=(0,h.getEventTarget)(e),n=this.elementBorderMap[t];if(n&&n.borders)for(var r=0;r<n.borders.length;r++)n.borders[r].classList.add("apt-highlight-over");n&&n.icon&&n.icon.classList.add("apt-highlight-icon-over")}catch(e){s.logger.logInternalError(e)}}},{key:"highlightedLeave",value:function(e){try{var t=(0,h.getEventTarget)(e),n=this.elementBorderMap[t];if(n&&n.borders)for(var r=0;r<n.borders.length;r++)n.borders[r].classList.remove("apt-highlight-over");n&&n.icon&&n.icon.classList.remove("apt-highlight-icon-over")}catch(e){s.logger.logInternalError(e)}}},{key:"iconHovered",value:function(e){try{var t=(0,h.getEventTarget)(e),n=void 0;for(var r in this.elementBorderMap)if(this.elementBorderMap.hasOwnProperty(r)&&(n=this.elementBorderMap[r],n.icon===t)){for(var o=0;o<n.borders.length;o++)n.borders[o].classList.add("apt-highlighted-delete");t.classList.add("apt-highlighted-icon-delete")}}catch(e){s.logger.logInternalError(e)}}},{key:"iconLeave",value:function(e){try{var t=(0,h.getEventTarget)(e),n=void 0;for(var r in this.elementBorderMap)if(this.elementBorderMap.hasOwnProperty(r)&&(n=this.elementBorderMap[r],n.icon===t)){for(var o=0;o<n.borders.length;o++)n.borders[o].classList.remove("apt-highlighted-delete");t.classList.remove("apt-highlighted-icon-delete")}}catch(e){s.logger.logInternalError(e)}}},{key:"iconClicked",value:function(e){try{var t=(0,h.getEventTarget)(e),n=t.classList.contains("apt-highlighted-icon-delete"),r=void 0;for(var o in this.elementBorderMap)this.elementBorderMap.hasOwnProperty(o)&&(r=this.elementBorderMap[o],r.icon===t&&this.iconClick&&this.iconClick(n?"deleted":"highlight",r.data))}catch(e){s.logger.logInternalError(e)}}},{key:"highlightAll",value:function(e,t,n,r){try{if(this.disabled)return;for(var o=void 0!==t&&null!==t?t:"common",i=0;i<e.length;i++)this.highlightedElements.indexOf(e[i])>-1||this.highlightElement(e[i],o,n,r)}catch(e){s.logger.logInternalError(e)}}},{key:"removeHighlighted",value:function(e,t){try{var n=void 0!==e&&null!==e?e:"common",r=this.highlightedMap[n],o=this.elementHighlightedMap[n],i=(0,c.getBody)();if(void 0!==r&&void 0!==o){for(var l=r.length-1;l>=0;l--)i.contains(r[l])&&i.removeChild(r[l]),this.highlightedMap[n]&&this.highlightedMap[n].pop();for(var d=0;d<o.length;d++){if(o[d]){var u=this.highlightedElements.indexOf(o[d]);this.elementBorderMap[o[d]]&&(0,a.removeEventListener)(o[d],"mouseover",this.elementBorderMap[o[d]].hoverListener),this.elementBorderMap[o[d]]&&(0,a.removeEventListener)(o[d],"mouseleave",this.elementBorderMap[o[d]].leaveListener),u>-1&&(this.scrollBinder.clearScrollEventListenerFromParents(this.highlightedElements[u]),this.highlightedElements.splice(u,1))}delete this.elementBorderMap[o[d]]}delete this.elementHighlightedMap[n]}if(t){var p=this.highlightedMap.main,f=this.elementHighlightedMap.main;if(void 0!==p){for(var g=0;g<p.length;g++)try{i.removeChild(p[g])}catch(e){}if(p.splice(0,p.length),void 0!==f)for(var h=0;h<f.length;h++){var m=this.highlightedElements.indexOf(f[h]);f[h]&&(0,a.removeEventListener)(f[h],"mouseover",this.highlightedHover.bind(this)),f[h]&&(0,a.removeEventListener)(f[h],"mouseleave",this.highlightedLeave.bind(this)),m>-1&&this.highlightedElements.splice(m,1),delete this.elementBorderMap[f[h]]}}}}catch(e){s.logger.logInternalError(e)}}},{key:"removeAllHighlighted",value:function(){for(var e in this.elementHighlightedMap)this.elementHighlightedMap.hasOwnProperty(e)&&this.removeHighlighted(e,!0)}},{key:"disable",value:function(e){this.disabled=!0,this.top.style.display="none",this.bottom.style.display="none",this.right.style.display="none",this.left.style.display="none",e||(this.removeAllHighlighted(),!(0,c.isIframe)()&&u.default.setSelectorState(!1))}},{key:"enable",value:function(){this.disabled=!1,this.top.style.display="block",this.bottom.style.display="block",this.right.style.display="block",this.left.style.display="block",!(0,c.isIframe)()&&u.default.setSelectorState(!0)}}]),e}();t.default=y},function(e,t,n){"use strict";function r(){var e=d.documentRef.querySelector(".selector-info");e&&(0,l.addTooltipToElement)(e,{placement:"right",content:"Learn more"})}function o(e){var t=e.color,n=e.className,r=(0,s.createElement)("img");r.src=c.staticContentHost+"/images/question-mark/"+u[t];var o=(0,s.createElement)("a","selector-info "+n,{href:"https://support.gainsight.com/PX/Instrument_Your_Product/Advanced_Instrumentation"},[r]);return o.target="_blank",o.style.borderColor=p[t],o}function i(){var e=(0,s.createElement)("span","apt-selector-errors");return e.innerText="CSS selector is invalid",e}function a(e){var t=d.documentRef.querySelector(".apt-selector-errors");t&&(e?t.classList.add("show"):t.classList.remove("show"))}Object.defineProperty(t,"__esModule",{value:!0}),t.addTooltipToMoreInfo=r,t.renderMoreInfo=o,t.renderSelectorError=i,t.toggleSelectorError=a;var s=n(0),l=n(41),c=n(2),d=n(4),u={green:"question-mark-green.svg",smoke:"question-mark-smoke.svg"},p={green:"#0F87EC",smoke:"#d7d6d7"}},function(e,t,n){"use strict";function r(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return e.tagName.toLowerCase();var n={root:document.body,className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t,n){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,atMostOptimizeIterations:1e4};N=x({},n,t);var r=o(e,A.All,function(){return o(e,A.Two,function(){return o(e,A.One)})});if(r){var i=E(S(r,e));return i.length>0&&(r=i[0]),a(r)}throw new Error("Selector was not found.")}function o(e,t,n){for(var r=null,o=[],a=e,s=0;a&&a!==N.root.parentElement;){if("break"===function(){var e=v(c(a))||v.apply(void 0,d(a))||v.apply(void 0,u(a))||v(p(a))||[f()],l=g(a);if(t===A.All)l&&(e=e.concat(e.filter(m).map(function(e){return h(e,l)})));else if(t===A.Two)e=e.slice(0,1),l&&(e=e.concat(e.filter(m).map(function(e){return h(e,l)})));else if(t===A.One){var b=(e=e.slice(0,1))[0];l&&m(b)&&(e=[h(b,l)])}for(var y=0,E=e;y<E.length;y++){var b=E[y];b.level=s}if(o.push(e),o.length>=N.seedMinLength&&(r=i(o,n)))return"break";a=(0,T.getParentElement)(a),s++}())break}return r||(r=i(o,n)),r}function i(e,t){var n=E(y(e));if(n.length>N.threshold)return t?t():null;for(var r=0,o=n;r<o.length;r++){var i=o[r];if(l(i))return i}return null}function a(e){for(var t=e[0],n=t.name,r=1;r<e.length;r++){var o=e[r].level||0;n=t.level===o-1?e[r].name+" > "+n:e[r].name+" "+n,t=e[r]}return n}function s(e){return e.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function l(e){switch((0,T.findElementsInShadowDom)(a(e),document).length){case 0:throw new Error("Can't select any node with this selector: "+a(e));case 1:return!0;default:return!1}}function c(e){return""!==e.id?{name:"#"+O(e.id,{isIdentifier:!0}),penalty:0}:null}function d(e){return Array.from(e.attributes).filter(function(t){return N.attr(t.name,t.value,e)}).map(function(e){return{name:"["+O(e.name,{isIdentifier:!0})+'="'+O(e.value)+'"]',penalty:.5}})}function u(e){return(0,w.arrayFrom)(e.classList).filter(N.className).map(function(e){return{name:"."+O(e,{isIdentifier:!0}),penalty:1}})}function p(e){var t=e.tagName.toLowerCase();return N.tagName(t)?{name:t,penalty:2}:null}function f(){return{name:"*",penalty:3}}function g(e){var t=(0,T.getParentNode)(e);if(!t)return null;var n=t.firstChild;if(!n)return null;for(var r=0;;){if(n.nodeType===Node.ELEMENT_NODE&&r++,n===e||!n.nextSibling)break;n=n.nextSibling}return r}function h(e,t){return{name:e.name+":nth-child("+t+")",penalty:e.penalty+1}}function m(e){return"html"!==e.name&&!e.name.startsWith("#")}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(b);return n.length>0?n:null}function b(e){return null!==e&&void 0!==e}function y(e,t){void 0===t&&(t=[]);var n,r,o;return k(this,function(i){switch(i.label){case 0:if(!(e.length>0))return[3,5];n=0,r=e[0],i.label=1;case 1:return n<r.length?(o=r[n],[5,I(y(e.slice(1,e.length),t.concat(o)))]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[3,7];case 5:return[4,t];case 6:i.sent(),i.label=7;case 7:return[2]}})}function E(e){return(0,w.arrayFrom)(e).sort(function(e,t){return s(e)-s(t)})}function S(e,t){var n,r;return k(this,function(o){switch(o.label){case 0:if(!(e.length>2&&e.length>N.optimizedMinLength))return[3,5];n=1,o.label=1;case 1:return n<e.length-1?(r=e.slice(),r.splice(n,1),l(r)&&C(r,t)?[4,r]:[3,4]):[3,5];case 2:return o.sent(),[5,I(S(r,t))];case 3:o.sent(),o.label=4;case 4:return n++,[3,1];case 5:return[2]}})}function C(e,t){return(0,T.findSingleElementInShadowDom)(a(e),document)===t}var w=n(12),T=n(18),x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},k=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,i=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(c>N.atMostOptimizeIterations){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],i=0}finally{o=a=0,c++}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=0;return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},I=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var A,O=n(170);!function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"}(A||(A={}));var N;t.default=r},function(e,t,n){"use strict";var r;!function(o,i,a){function s(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function l(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return S[e.which]?S[e.which]:C[e.which]?C[e.which]:String.fromCharCode(e.which).toLowerCase()}function c(e,t){return e.sort().join(",")===t.sort().join(",")}function d(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function u(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function p(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function g(){if(!E){E={};for(var e in S)e>95&&e<112||S.hasOwnProperty(e)&&(E[S[e]]=e)}return E}function h(e,t,n){return n||(n=g()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function m(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function v(e,t){var n,r,o,i=[];for(n=m(e),o=0;o<n.length;++o)r=n[o],T[r]&&(r=T[r]),t&&"keypress"!=t&&w[r]&&(r=w[r],i.push("shift")),f(r)&&i.push(r);return t=h(r,i,t),{key:r,modifiers:i,action:t}}function b(e,t){return null!==e&&e!==i&&(e===t||b(e.parentNode,t))}function y(e){function t(e){e=e||{};var t,n=!1;for(t in E)e[t]?n=!0:E[t]=0;n||(w=!1)}function n(e,t,n,r,o,i){var a,s,l=[],d=n.type;if(!m._callbacks[e])return[];for("keyup"==d&&f(e)&&(t=[e]),a=0;a<m._callbacks[e].length;++a)if(s=m._callbacks[e][a],(r||!s.seq||E[s.seq]==s.level)&&d==s.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||c(t,s.modifiers))){var u=!r&&s.combo==o,p=r&&s.seq==r&&s.level==i;(u||p)&&m._callbacks[e].splice(a,1),l.push(s)}return l}function r(e,t,n,r){m.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(u(t),p(t))}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=l(e);if(t)return"keyup"==e.type&&S===t?void(S=!1):void m.handleKey(t,d(e),e)}function a(){clearTimeout(b),b=setTimeout(t,1e3)}function g(e,n,o,i){function s(n){r(o,n,e),"keyup"!==i&&(S=l(n)),setTimeout(t,10)}E[e]=0;for(var c=0;c<n.length;++c){var d=c+1===n.length,u=d?s:function(t){return function(){w=t,++E[e],a()}}(i||v(n[c+1]).action);h(n[c],u,i,e,c)}}function h(e,t,r,o,i){m._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var a,s=e.split(" ");if(s.length>1)return void g(e,s,t,r);a=v(e,r),m._callbacks[a.key]=m._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},o,e,i),m._callbacks[a.key][o?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e})}var m=this;if(e=e||i,!(m instanceof y))return new y(e);m.target=e,m._callbacks={},m._directMap={};var b,E={},S=!1,C=!1,w=!1;m._handleKey=function(e,o,i){var a,s=n(e,o,i),l={},c=0,d=!1;for(a=0;a<s.length;++a)s[a].seq&&(c=Math.max(c,s[a].level));for(a=0;a<s.length;++a)if(s[a].seq){if(s[a].level!=c)continue;d=!0,l[s[a].seq]=1,r(s[a].callback,i,s[a].combo,s[a].seq)}else d||r(s[a].callback,i,s[a].combo);var u="keypress"==i.type&&C;i.type!=w||f(e)||u||t(l),C=d&&"keydown"==i.type},m._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)h(e[r],t,n)},s(e,"keypress",o),s(e,"keydown",o),s(e,"keyup",o)}if(o){for(var E,S={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},C={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},T={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x=1;x<20;++x)S[111+x]="f"+x;for(x=0;x<=9;++x)S[x+96]=x.toString();y.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},y.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},y.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},y.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},y.prototype.stopCallback=function(e,t){var n=this;if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(b(t,n.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var r=e.composedPath()[0];r!==e.target&&(t=r)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},y.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},y.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(S[t]=e[t]);E=null},y.init=function(){var e=y(i);for(var t in e)"_"!==t.charAt(0)&&(y[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},y.init(),o.Mousetrap=y,void 0!==e&&e.exports&&(e.exports=y),void 0!==(r=function(){return y}.call(t,n,t,e))&&(e.exports=r)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(){function e(){r(this,e)}return o(e,[{key:"render",value:function(){var e=(0,i.createElement)("div",["apt-selector-counter-text"]);return this.selectorCounterValElement=(0,i.createElement)("span",[]),(0,i.appendElements)(e,[(0,i.createElement)("span",[],{text:"Number of matched elements: "}),this.selectorCounterValElement]),e}},{key:"updateCounter",value:function(e){this.selectorCounterValElement&&(this.selectorCounterValElement.innerHTML="",1==e?(this.selectorCounterValElement.classList.remove("apt-selector-count-val-red"),this.selectorCounterValElement.classList.add("apt-selector-count-val-green")):(this.selectorCounterValElement.classList.add("apt-selector-count-val-red"),this.selectorCounterValElement.classList.remove("apt-selector-count-val-green")),this.selectorCounterValElement.appendChild(document.createTextNode(e)))}}]),e}();t.default=a},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if((0,c.isValidCallingDomain)(e.origin)){try{var t=(0,c.parseEvent)(e);if(t&&b.indexOf(t.aptrinsicEventType)>-1)switch(t.aptrinsicEventType){case"guide":var n=t.content;switch(n.type){case"update":case"get":l.GuideEditorIframe.updateGuide(n.guide);break;case"hideAll":l.GuideEditorIframe.hideAll();break;case"guideRemoveHighlighted":l.GuideEditorIframe.removeHighlighted(n.tag,n.removeAll);break;case"stepSelected":l.GuideEditorIframe.stepSelected(n.stepId,n.settingsData);break;case"changePosition":break;case"showStepPopup":l.GuideEditorIframe.showStepPopup(n.cssSelector);break;case"updateState":l.GuideEditorIframe.updateState(n.state,n.enableSelector);break;case"updateSelectorState":l.GuideEditorIframe.changeSelectorState(n.state);break;case"setSelectorStateForEditorV2":h.internalEventListener.dispatchEvent("editorV2setSelectorState",n.isMapperEnabled);break;case"highlightElement":l.GuideEditorIframe.highlightElement(n.cssSelector,n.tag);break;case"highlightAll":l.GuideEditorIframe.highlightAll(n.cssSelector,n.stepId);break;case"removeAllHighlighted":l.GuideEditorIframe.removeAllHighlighted();break;case"isElementVisible":var r=l.GuideEditorIframe.isElementVisible(n.cssSelector);u.default.isElementVisibleResponse(t.aptrinsicRequestId,r);break;case"editorV2StateResponse":(0,g.decrementState)(t.aptrinsicRequestId,n);break;case"stateResponse":(0,g.decrementState)(t.aptrinsicRequestId,{state:n.state,isStepSelected:n.isStepSelected});break;case"getAlternateSelector":var o=l.GuideEditorIframe.getAlternateSelector(n.cssSelector);u.default.getAlternateSelectorResponse(t.aptrinsicRequestId,o);break;case"getDifferentSelector":var i=l.GuideEditorIframe.getDifferentSelector(n.cssSelector,n.selectorType);u.default.postDifferentSelectorResponse(t.aptrinsicRequestId,i)}break;case"event_mapper_highlight_elements":case"element_selector_enable":break;case"TEXT_MATCH_COUNTER_REQUEST":var a=t.content,d=a.text,p=a.operator;(0,v.default)(t.aptrinsicRequestId,d,p);break;default:s.logger.logInternalError(new Error("child iframe script got unsupported event from master, data: "+JSON.stringify(t)))}}catch(e){s.logger.logInternalError(e)}f.handleIncomingRequest(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingRequest=void 0;var i=n(2),a=n(0),s=n(3),l=n(168),c=n(13),d=n(40),u=r(d),p=n(89),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),g=n(6),h=n(9),m=n(173),v=r(m),b=["element_selector_enable","event_mapper_highlight_elements","guide","TEXT_MATCH_COUNTER_REQUEST"],y=new function(){(0,i.isIframe)()&&(0,a.addEventListener)(window,"message",o)};t.default=y,t.handleIncomingRequest=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if((0,d.isValidCallingDomain)(e.origin)){var t=(0,d.parseEvent)(e);try{if(null===t)return;if(v.indexOf(t.aptrinsicEventType)>-1)switch(t.aptrinsicEventType){case"guide":var n=t.content;switch(n.type){case"get":var r=c.default.getGuide(),o=new s.IframeRequest(void 0,"guide",{type:"get",guide:r});(0,d.postRequestDown)(o,(0,s.getIframeData)(t.aptrinsicIframeId));break;case"elementSelectedForEditorV2":m.internalEventListener.dispatchEvent("elementSelectedForEditorV2",n.cssSelector,n.elementText,(0,s.getIframeData)(t.aptrinsicIframeId));break;case"elementSelected":c.default.elementSelected(n.cssSelector,n.elementSelected,(0,s.getIframeData)(t.aptrinsicIframeId));break;case"changePosition":c.default.changePosition(n.verticalPosition,n.horizontalPosition,n.positionDialog);break;case"updateLastContent":c.default.changeLastContent(n.content);break;case"updateSelectorState":c.default.changeSelectorState(n.state),(0,d.propagateDown)(t,(0,s.getRegisteredIframes)());break;case"iconClicked":c.default.selectorIconClicked(n.state,n.extraData);break;case"isElementVisibleResponse":(0,s.decrementState)(t.aptrinsicRequestId,n.isVisible);break;case"getState":var i=c.default.getState(),l=c.default.isStepSelected();g.default.sendStateResponse((0,s.getIframeData)(t.aptrinsicIframeId),t.aptrinsicRequestId,i,l);break;case"getMapperStateForEditorV2":var u=window.getEditorState("isPreview"),f=window.getEditorState("isMapperEnabled");g.default.sendEditorV2StateResponse((0,s.getIframeData)(t.aptrinsicIframeId),t.aptrinsicRequestId,f,u);break;case"alternateSelectorResponse":(0,s.decrementState)(t.aptrinsicRequestId,n.alternateSelector);break;case"differentSelectorResponse":(0,s.decrementState)(t.aptrinsicRequestId,n.selectors)}break;case"apt-log":var h="aptrinsic web sdk error: "+t.content.message+"\n"+t.content.extraMessage+"\n at: "+t.content.stackTrace;a.logger.reportToServer(h);break;case"TEXT_MATCH_COUNTER_RESULT":var b=t.content.counter;(0,s.decrementState)(t.aptrinsicRequestId,{counter:b,iframeData:(0,s.getIframeData)(t.aptrinsicIframeId)});break;default:a.logger.logInternalError(new Error("master script got unsupported event from iframe, data: "+JSON.stringify(t)))}}catch(e){a.logger.logInternalError(e)}p.handleIncomingRequest(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingRequest=void 0;var i=n(0),a=n(3),s=n(6),l=n(168),c=r(l),d=n(13),u=n(90),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),f=n(17),g=r(f),h=n(2),m=n(9),v=["element_selector_document_click","selector_selected","guide","apt-log","TEXT_MATCH_COUNTER_RESULT"],b=new function(){!(0,h.isIframe)()&&(0,i.addEventListener)(window,"message",o,!1)};t.default=b,t.handleIncomingRequest=o},,function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! countries-list v2.6.1 by Annexare | MIT */
!function(r,s){"object"==a(t)&&void 0!==e?e.exports=s():(o=s,void 0!==(i="function"==typeof o?o.call(t,n,t,e):o)&&(e.exports=i))}(0,function(){function e(e){throw new RangeError(f[e])}function t(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);var o=function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(p,".")).split("."),t).join(".");return r+o}function n(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}var o={AF:"Africa",AN:"Antarctica",AS:"Asia",EU:"Europe",NA:"North America",OC:"Oceania",SA:"South America"},i={AD:{name:"Andorra",native:"Andorra",phone:"376",continent:"EU",capital:"Andorra la Vella",currency:"EUR",languages:["ca"],emoji:"",emojiU:"U+1F1E6 U+1F1E9"},AE:{name:"United Arab Emirates",native:"   ",phone:"971",continent:"AS",capital:"Abu Dhabi",currency:"AED",languages:["ar"],emoji:"",emojiU:"U+1F1E6 U+1F1EA"},AF:{name:"Afghanistan",native:"",phone:"93",continent:"AS",capital:"Kabul",currency:"AFN",languages:["ps","uz","tk"],emoji:"",emojiU:"U+1F1E6 U+1F1EB"},AG:{name:"Antigua and Barbuda",native:"Antigua and Barbuda",phone:"1268",continent:"NA",capital:"Saint John's",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1E6 U+1F1EC"},AI:{name:"Anguilla",native:"Anguilla",phone:"1264",continent:"NA",capital:"The Valley",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1E6 U+1F1EE"},AL:{name:"Albania",native:"Shqipria",phone:"355",continent:"EU",capital:"Tirana",currency:"ALL",languages:["sq"],emoji:"",emojiU:"U+1F1E6 U+1F1F1"},AM:{name:"Armenia",native:"",phone:"374",continent:"AS",capital:"Yerevan",currency:"AMD",languages:["hy","ru"],emoji:"",emojiU:"U+1F1E6 U+1F1F2"},AO:{name:"Angola",native:"Angola",phone:"244",continent:"AF",capital:"Luanda",currency:"AOA",languages:["pt"],emoji:"",emojiU:"U+1F1E6 U+1F1F4"},AQ:{name:"Antarctica",native:"Antarctica",phone:"672",continent:"AN",capital:"",currency:"",languages:[],emoji:"",emojiU:"U+1F1E6 U+1F1F6"},AR:{name:"Argentina",native:"Argentina",phone:"54",continent:"SA",capital:"Buenos Aires",currency:"ARS",languages:["es","gn"],emoji:"",emojiU:"U+1F1E6 U+1F1F7"},AS:{name:"American Samoa",native:"American Samoa",phone:"1684",continent:"OC",capital:"Pago Pago",currency:"USD",languages:["en","sm"],emoji:"",emojiU:"U+1F1E6 U+1F1F8"},AT:{name:"Austria",native:"sterreich",phone:"43",continent:"EU",capital:"Vienna",currency:"EUR",languages:["de"],emoji:"",emojiU:"U+1F1E6 U+1F1F9"},AU:{name:"Australia",native:"Australia",phone:"61",continent:"OC",capital:"Canberra",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1E6 U+1F1FA"},AW:{name:"Aruba",native:"Aruba",phone:"297",continent:"NA",capital:"Oranjestad",currency:"AWG",languages:["nl","pa"],emoji:"",emojiU:"U+1F1E6 U+1F1FC"},AX:{name:"land",native:"land",phone:"358",continent:"EU",capital:"Mariehamn",currency:"EUR",languages:["sv"],emoji:"",emojiU:"U+1F1E6 U+1F1FD"},AZ:{name:"Azerbaijan",native:"Azrbaycan",phone:"994",continent:"AS",capital:"Baku",currency:"AZN",languages:["az"],emoji:"",emojiU:"U+1F1E6 U+1F1FF"},BA:{name:"Bosnia and Herzegovina",native:"Bosna i Hercegovina",phone:"387",continent:"EU",capital:"Sarajevo",currency:"BAM",languages:["bs","hr","sr"],emoji:"",emojiU:"U+1F1E7 U+1F1E6"},BB:{name:"Barbados",native:"Barbados",phone:"1246",continent:"NA",capital:"Bridgetown",currency:"BBD",languages:["en"],emoji:"",emojiU:"U+1F1E7 U+1F1E7"},BD:{name:"Bangladesh",native:"Bangladesh",phone:"880",continent:"AS",capital:"Dhaka",currency:"BDT",languages:["bn"],emoji:"",emojiU:"U+1F1E7 U+1F1E9"},BE:{name:"Belgium",native:"Belgi",phone:"32",continent:"EU",capital:"Brussels",currency:"EUR",languages:["nl","fr","de"],emoji:"",emojiU:"U+1F1E7 U+1F1EA"},BF:{name:"Burkina Faso",native:"Burkina Faso",phone:"226",continent:"AF",capital:"Ouagadougou",currency:"XOF",languages:["fr","ff"],emoji:"",emojiU:"U+1F1E7 U+1F1EB"},BG:{name:"Bulgaria",native:"",phone:"359",continent:"EU",capital:"Sofia",currency:"BGN",languages:["bg"],emoji:"",emojiU:"U+1F1E7 U+1F1EC"},BH:{name:"Bahrain",native:"",phone:"973",continent:"AS",capital:"Manama",currency:"BHD",languages:["ar"],emoji:"",emojiU:"U+1F1E7 U+1F1ED"},BI:{name:"Burundi",native:"Burundi",phone:"257",continent:"AF",capital:"Bujumbura",currency:"BIF",languages:["fr","rn"],emoji:"",emojiU:"U+1F1E7 U+1F1EE"},BJ:{name:"Benin",native:"Bnin",phone:"229",continent:"AF",capital:"Porto-Novo",currency:"XOF",languages:["fr"],emoji:"",emojiU:"U+1F1E7 U+1F1EF"},BL:{name:"Saint Barthlemy",native:"Saint-Barthlemy",phone:"590",continent:"NA",capital:"Gustavia",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1E7 U+1F1F1"},BM:{name:"Bermuda",native:"Bermuda",phone:"1441",continent:"NA",capital:"Hamilton",currency:"BMD",languages:["en"],emoji:"",emojiU:"U+1F1E7 U+1F1F2"},BN:{name:"Brunei",native:"Negara Brunei Darussalam",phone:"673",continent:"AS",capital:"Bandar Seri Begawan",currency:"BND",languages:["ms"],emoji:"",emojiU:"U+1F1E7 U+1F1F3"},BO:{name:"Bolivia",native:"Bolivia",phone:"591",continent:"SA",capital:"Sucre",currency:"BOB,BOV",languages:["es","ay","qu"],emoji:"",emojiU:"U+1F1E7 U+1F1F4"},BQ:{name:"Bonaire",native:"Bonaire",phone:"5997",continent:"NA",capital:"Kralendijk",currency:"USD",languages:["nl"],emoji:"",emojiU:"U+1F1E7 U+1F1F6"},BR:{name:"Brazil",native:"Brasil",phone:"55",continent:"SA",capital:"Braslia",currency:"BRL",languages:["pt"],emoji:"",emojiU:"U+1F1E7 U+1F1F7"},BS:{name:"Bahamas",native:"Bahamas",phone:"1242",continent:"NA",capital:"Nassau",currency:"BSD",languages:["en"],emoji:"",emojiU:"U+1F1E7 U+1F1F8"},BT:{name:"Bhutan",native:"brug-yul",phone:"975",continent:"AS",capital:"Thimphu",currency:"BTN,INR",languages:["dz"],emoji:"",emojiU:"U+1F1E7 U+1F1F9"},BV:{name:"Bouvet Island",native:"Bouvetya",phone:"47",continent:"AN",capital:"",currency:"NOK",languages:["no","nb","nn"],emoji:"",emojiU:"U+1F1E7 U+1F1FB"},BW:{name:"Botswana",native:"Botswana",phone:"267",continent:"AF",capital:"Gaborone",currency:"BWP",languages:["en","tn"],emoji:"",emojiU:"U+1F1E7 U+1F1FC"},BY:{name:"Belarus",native:"",phone:"375",continent:"EU",capital:"Minsk",currency:"BYN",languages:["be","ru"],emoji:"",emojiU:"U+1F1E7 U+1F1FE"},BZ:{name:"Belize",native:"Belize",phone:"501",continent:"NA",capital:"Belmopan",currency:"BZD",languages:["en","es"],emoji:"",emojiU:"U+1F1E7 U+1F1FF"},CA:{name:"Canada",native:"Canada",phone:"1",continent:"NA",capital:"Ottawa",currency:"CAD",languages:["en","fr"],emoji:"",emojiU:"U+1F1E8 U+1F1E6"},CC:{name:"Cocos [Keeling] Islands",native:"Cocos (Keeling) Islands",phone:"61",continent:"AS",capital:"West Island",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1E8 U+1F1E8"},CD:{name:"Democratic Republic of the Congo",native:"Rpublique dmocratique du Congo",phone:"243",continent:"AF",capital:"Kinshasa",currency:"CDF",languages:["fr","ln","kg","sw","lu"],emoji:"",emojiU:"U+1F1E8 U+1F1E9"},CF:{name:"Central African Republic",native:"Kdrsse t Bafrka",phone:"236",continent:"AF",capital:"Bangui",currency:"XAF",languages:["fr","sg"],emoji:"",emojiU:"U+1F1E8 U+1F1EB"},CG:{name:"Republic of the Congo",native:"Rpublique du Congo",phone:"242",continent:"AF",capital:"Brazzaville",currency:"XAF",languages:["fr","ln"],emoji:"",emojiU:"U+1F1E8 U+1F1EC"},CH:{name:"Switzerland",native:"Schweiz",phone:"41",continent:"EU",capital:"Bern",currency:"CHE,CHF,CHW",languages:["de","fr","it"],emoji:"",emojiU:"U+1F1E8 U+1F1ED"},CI:{name:"Ivory Coast",native:"Cte d'Ivoire",phone:"225",continent:"AF",capital:"Yamoussoukro",currency:"XOF",languages:["fr"],emoji:"",emojiU:"U+1F1E8 U+1F1EE"},CK:{name:"Cook Islands",native:"Cook Islands",phone:"682",continent:"OC",capital:"Avarua",currency:"NZD",languages:["en"],emoji:"",emojiU:"U+1F1E8 U+1F1F0"},CL:{name:"Chile",native:"Chile",phone:"56",continent:"SA",capital:"Santiago",currency:"CLF,CLP",languages:["es"],emoji:"",emojiU:"U+1F1E8 U+1F1F1"},CM:{name:"Cameroon",native:"Cameroon",phone:"237",continent:"AF",capital:"Yaound",currency:"XAF",languages:["en","fr"],emoji:"",emojiU:"U+1F1E8 U+1F1F2"},CN:{name:"China",native:"",phone:"86",continent:"AS",capital:"Beijing",currency:"CNY",languages:["zh"],emoji:"",emojiU:"U+1F1E8 U+1F1F3"},CO:{name:"Colombia",native:"Colombia",phone:"57",continent:"SA",capital:"Bogot",currency:"COP",languages:["es"],emoji:"",emojiU:"U+1F1E8 U+1F1F4"},CR:{name:"Costa Rica",native:"Costa Rica",phone:"506",continent:"NA",capital:"San Jos",currency:"CRC",languages:["es"],emoji:"",emojiU:"U+1F1E8 U+1F1F7"},CU:{name:"Cuba",native:"Cuba",phone:"53",continent:"NA",capital:"Havana",currency:"CUC,CUP",languages:["es"],emoji:"",emojiU:"U+1F1E8 U+1F1FA"},CV:{name:"Cape Verde",native:"Cabo Verde",phone:"238",continent:"AF",capital:"Praia",currency:"CVE",languages:["pt"],emoji:"",emojiU:"U+1F1E8 U+1F1FB"},CW:{name:"Curacao",native:"Curaao",phone:"5999",continent:"NA",capital:"Willemstad",currency:"ANG",languages:["nl","pa","en"],emoji:"",emojiU:"U+1F1E8 U+1F1FC"},CX:{name:"Christmas Island",native:"Christmas Island",phone:"61",continent:"AS",capital:"Flying Fish Cove",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1E8 U+1F1FD"},CY:{name:"Cyprus",native:"",phone:"357",continent:"EU",capital:"Nicosia",currency:"EUR",languages:["el","tr","hy"],emoji:"",emojiU:"U+1F1E8 U+1F1FE"},CZ:{name:"Czech Republic",native:"esk republika",phone:"420",continent:"EU",capital:"Prague",currency:"CZK",languages:["cs","sk"],emoji:"",emojiU:"U+1F1E8 U+1F1FF"},DE:{name:"Germany",native:"Deutschland",phone:"49",continent:"EU",capital:"Berlin",currency:"EUR",languages:["de"],emoji:"",emojiU:"U+1F1E9 U+1F1EA"},DJ:{name:"Djibouti",native:"Djibouti",phone:"253",continent:"AF",capital:"Djibouti",currency:"DJF",languages:["fr","ar"],emoji:"",emojiU:"U+1F1E9 U+1F1EF"},DK:{name:"Denmark",native:"Danmark",phone:"45",continent:"EU",capital:"Copenhagen",currency:"DKK",languages:["da"],emoji:"",emojiU:"U+1F1E9 U+1F1F0"},DM:{name:"Dominica",native:"Dominica",phone:"1767",continent:"NA",capital:"Roseau",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1E9 U+1F1F2"},DO:{name:"Dominican Republic",native:"Repblica Dominicana",phone:"1809,1829,1849",continent:"NA",capital:"Santo Domingo",currency:"DOP",languages:["es"],emoji:"",emojiU:"U+1F1E9 U+1F1F4"},DZ:{name:"Algeria",native:"",phone:"213",continent:"AF",capital:"Algiers",currency:"DZD",languages:["ar"],emoji:"",emojiU:"U+1F1E9 U+1F1FF"},EC:{name:"Ecuador",native:"Ecuador",phone:"593",continent:"SA",capital:"Quito",currency:"USD",languages:["es"],emoji:"",emojiU:"U+1F1EA U+1F1E8"},EE:{name:"Estonia",native:"Eesti",phone:"372",continent:"EU",capital:"Tallinn",currency:"EUR",languages:["et"],emoji:"",emojiU:"U+1F1EA U+1F1EA"},EG:{name:"Egypt",native:"",phone:"20",continent:"AF",capital:"Cairo",currency:"EGP",languages:["ar"],emoji:"",emojiU:"U+1F1EA U+1F1EC"},EH:{name:"Western Sahara",native:" ",phone:"212",continent:"AF",capital:"El Aain",currency:"MAD,DZD,MRU",languages:["es"],emoji:"",emojiU:"U+1F1EA U+1F1ED"},ER:{name:"Eritrea",native:"",phone:"291",continent:"AF",capital:"Asmara",currency:"ERN",languages:["ti","ar","en"],emoji:"",emojiU:"U+1F1EA U+1F1F7"},ES:{name:"Spain",native:"Espaa",phone:"34",continent:"EU",capital:"Madrid",currency:"EUR",languages:["es","eu","ca","gl","oc"],emoji:"",emojiU:"U+1F1EA U+1F1F8"},ET:{name:"Ethiopia",native:"",phone:"251",continent:"AF",capital:"Addis Ababa",currency:"ETB",languages:["am"],emoji:"",emojiU:"U+1F1EA U+1F1F9"},FI:{name:"Finland",native:"Suomi",phone:"358",continent:"EU",capital:"Helsinki",currency:"EUR",languages:["fi","sv"],emoji:"",emojiU:"U+1F1EB U+1F1EE"},FJ:{name:"Fiji",native:"Fiji",phone:"679",continent:"OC",capital:"Suva",currency:"FJD",languages:["en","fj","hi","ur"],emoji:"",emojiU:"U+1F1EB U+1F1EF"},FK:{name:"Falkland Islands",native:"Falkland Islands",phone:"500",continent:"SA",capital:"Stanley",currency:"FKP",languages:["en"],emoji:"",emojiU:"U+1F1EB U+1F1F0"},FM:{name:"Micronesia",native:"Micronesia",phone:"691",continent:"OC",capital:"Palikir",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1EB U+1F1F2"},FO:{name:"Faroe Islands",native:"Froyar",phone:"298",continent:"EU",capital:"Trshavn",currency:"DKK",languages:["fo"],emoji:"",emojiU:"U+1F1EB U+1F1F4"},FR:{name:"France",native:"France",phone:"33",continent:"EU",capital:"Paris",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1EB U+1F1F7"},GA:{name:"Gabon",native:"Gabon",phone:"241",continent:"AF",capital:"Libreville",currency:"XAF",languages:["fr"],emoji:"",emojiU:"U+1F1EC U+1F1E6"},GB:{name:"United Kingdom",native:"United Kingdom",phone:"44",continent:"EU",capital:"London",currency:"GBP",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1E7"},GD:{name:"Grenada",native:"Grenada",phone:"1473",continent:"NA",capital:"St. George's",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1E9"},GE:{name:"Georgia",native:"",phone:"995",continent:"AS",capital:"Tbilisi",currency:"GEL",languages:["ka"],emoji:"",emojiU:"U+1F1EC U+1F1EA"},GF:{name:"French Guiana",native:"Guyane franaise",phone:"594",continent:"SA",capital:"Cayenne",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1EC U+1F1EB"},GG:{name:"Guernsey",native:"Guernsey",phone:"44",continent:"EU",capital:"St. Peter Port",currency:"GBP",languages:["en","fr"],emoji:"",emojiU:"U+1F1EC U+1F1EC"},GH:{name:"Ghana",native:"Ghana",phone:"233",continent:"AF",capital:"Accra",currency:"GHS",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1ED"},GI:{name:"Gibraltar",native:"Gibraltar",phone:"350",continent:"EU",capital:"Gibraltar",currency:"GIP",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1EE"},GL:{name:"Greenland",native:"Kalaallit Nunaat",phone:"299",continent:"NA",capital:"Nuuk",currency:"DKK",languages:["kl"],emoji:"",emojiU:"U+1F1EC U+1F1F1"},GM:{name:"Gambia",native:"Gambia",phone:"220",continent:"AF",capital:"Banjul",currency:"GMD",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1F2"},GN:{name:"Guinea",native:"Guine",phone:"224",continent:"AF",capital:"Conakry",currency:"GNF",languages:["fr","ff"],emoji:"",emojiU:"U+1F1EC U+1F1F3"},GP:{name:"Guadeloupe",native:"Guadeloupe",phone:"590",continent:"NA",capital:"Basse-Terre",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1EC U+1F1F5"},GQ:{name:"Equatorial Guinea",native:"Guinea Ecuatorial",phone:"240",continent:"AF",capital:"Malabo",currency:"XAF",languages:["es","fr"],emoji:"",emojiU:"U+1F1EC U+1F1F6"},GR:{name:"Greece",native:"",phone:"30",continent:"EU",capital:"Athens",currency:"EUR",languages:["el"],emoji:"",emojiU:"U+1F1EC U+1F1F7"},GS:{name:"South Georgia and the South Sandwich Islands",native:"South Georgia",phone:"500",continent:"AN",capital:"King Edward Point",currency:"GBP",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1F8"},GT:{name:"Guatemala",native:"Guatemala",phone:"502",continent:"NA",capital:"Guatemala City",currency:"GTQ",languages:["es"],emoji:"",emojiU:"U+1F1EC U+1F1F9"},GU:{name:"Guam",native:"Guam",phone:"1671",continent:"OC",capital:"Hagta",currency:"USD",languages:["en","ch","es"],emoji:"",emojiU:"U+1F1EC U+1F1FA"},GW:{name:"Guinea-Bissau",native:"Guin-Bissau",phone:"245",continent:"AF",capital:"Bissau",currency:"XOF",languages:["pt"],emoji:"",emojiU:"U+1F1EC U+1F1FC"},GY:{name:"Guyana",native:"Guyana",phone:"592",continent:"SA",capital:"Georgetown",currency:"GYD",languages:["en"],emoji:"",emojiU:"U+1F1EC U+1F1FE"},HK:{name:"Hong Kong",native:"",phone:"852",continent:"AS",capital:"City of Victoria",currency:"HKD",languages:["zh","en"],emoji:"",emojiU:"U+1F1ED U+1F1F0"},HM:{name:"Heard Island and McDonald Islands",native:"Heard Island and McDonald Islands",phone:"61",continent:"AN",capital:"",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1ED U+1F1F2"},HN:{name:"Honduras",native:"Honduras",phone:"504",continent:"NA",capital:"Tegucigalpa",currency:"HNL",languages:["es"],emoji:"",emojiU:"U+1F1ED U+1F1F3"},HR:{name:"Croatia",native:"Hrvatska",phone:"385",continent:"EU",capital:"Zagreb",currency:"HRK",languages:["hr"],emoji:"",emojiU:"U+1F1ED U+1F1F7"},HT:{name:"Haiti",native:"Hati",phone:"509",continent:"NA",capital:"Port-au-Prince",currency:"HTG,USD",languages:["fr","ht"],emoji:"",emojiU:"U+1F1ED U+1F1F9"},HU:{name:"Hungary",native:"Magyarorszg",phone:"36",continent:"EU",capital:"Budapest",currency:"HUF",languages:["hu"],emoji:"",emojiU:"U+1F1ED U+1F1FA"},ID:{name:"Indonesia",native:"Indonesia",phone:"62",continent:"AS",capital:"Jakarta",currency:"IDR",languages:["id"],emoji:"",emojiU:"U+1F1EE U+1F1E9"},IE:{name:"Ireland",native:"ire",phone:"353",continent:"EU",capital:"Dublin",currency:"EUR",languages:["ga","en"],emoji:"",emojiU:"U+1F1EE U+1F1EA"},IL:{name:"Israel",native:"",phone:"972",continent:"AS",capital:"Jerusalem",currency:"ILS",languages:["he","ar"],emoji:"",emojiU:"U+1F1EE U+1F1F1"},IM:{name:"Isle of Man",native:"Isle of Man",phone:"44",continent:"EU",capital:"Douglas",currency:"GBP",languages:["en","gv"],emoji:"",emojiU:"U+1F1EE U+1F1F2"},IN:{name:"India",native:"",phone:"91",continent:"AS",capital:"New Delhi",currency:"INR",languages:["hi","en"],emoji:"",emojiU:"U+1F1EE U+1F1F3"},IO:{name:"British Indian Ocean Territory",native:"British Indian Ocean Territory",phone:"246",continent:"AS",capital:"Diego Garcia",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1EE U+1F1F4"},IQ:{name:"Iraq",native:"",phone:"964",continent:"AS",capital:"Baghdad",currency:"IQD",languages:["ar","ku"],emoji:"",emojiU:"U+1F1EE U+1F1F6"},IR:{name:"Iran",native:"",phone:"98",continent:"AS",capital:"Tehran",currency:"IRR",languages:["fa"],emoji:"",emojiU:"U+1F1EE U+1F1F7"},IS:{name:"Iceland",native:"sland",phone:"354",continent:"EU",capital:"Reykjavik",currency:"ISK",languages:["is"],emoji:"",emojiU:"U+1F1EE U+1F1F8"},IT:{name:"Italy",native:"Italia",phone:"39",continent:"EU",capital:"Rome",currency:"EUR",languages:["it"],emoji:"",emojiU:"U+1F1EE U+1F1F9"},JE:{name:"Jersey",native:"Jersey",phone:"44",continent:"EU",capital:"Saint Helier",currency:"GBP",languages:["en","fr"],emoji:"",emojiU:"U+1F1EF U+1F1EA"},JM:{name:"Jamaica",native:"Jamaica",phone:"1876",continent:"NA",capital:"Kingston",currency:"JMD",languages:["en"],emoji:"",emojiU:"U+1F1EF U+1F1F2"},JO:{name:"Jordan",native:"",phone:"962",continent:"AS",capital:"Amman",currency:"JOD",languages:["ar"],emoji:"",emojiU:"U+1F1EF U+1F1F4"},JP:{name:"Japan",native:"",phone:"81",continent:"AS",capital:"Tokyo",currency:"JPY",languages:["ja"],emoji:"",emojiU:"U+1F1EF U+1F1F5"},KE:{name:"Kenya",native:"Kenya",phone:"254",continent:"AF",capital:"Nairobi",currency:"KES",languages:["en","sw"],emoji:"",emojiU:"U+1F1F0 U+1F1EA"},KG:{name:"Kyrgyzstan",native:"",phone:"996",continent:"AS",capital:"Bishkek",currency:"KGS",languages:["ky","ru"],emoji:"",emojiU:"U+1F1F0 U+1F1EC"},KH:{name:"Cambodia",native:"Kmpcha",phone:"855",continent:"AS",capital:"Phnom Penh",currency:"KHR",languages:["km"],emoji:"",emojiU:"U+1F1F0 U+1F1ED"},KI:{name:"Kiribati",native:"Kiribati",phone:"686",continent:"OC",capital:"South Tarawa",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1F0 U+1F1EE"},KM:{name:"Comoros",native:"Komori",phone:"269",continent:"AF",capital:"Moroni",currency:"KMF",languages:["ar","fr"],emoji:"",emojiU:"U+1F1F0 U+1F1F2"},KN:{name:"Saint Kitts and Nevis",native:"Saint Kitts and Nevis",phone:"1869",continent:"NA",capital:"Basseterre",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1F0 U+1F1F3"},KP:{name:"North Korea",native:"",phone:"850",continent:"AS",capital:"Pyongyang",currency:"KPW",languages:["ko"],emoji:"",emojiU:"U+1F1F0 U+1F1F5"},KR:{name:"South Korea",native:"",phone:"82",continent:"AS",capital:"Seoul",currency:"KRW",languages:["ko"],emoji:"",emojiU:"U+1F1F0 U+1F1F7"},KW:{name:"Kuwait",native:"",phone:"965",continent:"AS",capital:"Kuwait City",currency:"KWD",languages:["ar"],emoji:"",emojiU:"U+1F1F0 U+1F1FC"},KY:{name:"Cayman Islands",native:"Cayman Islands",phone:"1345",continent:"NA",capital:"George Town",currency:"KYD",languages:["en"],emoji:"",emojiU:"U+1F1F0 U+1F1FE"},KZ:{name:"Kazakhstan",native:"",phone:"76,77",continent:"AS",capital:"Astana",currency:"KZT",languages:["kk","ru"],emoji:"",emojiU:"U+1F1F0 U+1F1FF"},LA:{name:"Laos",native:"",phone:"856",continent:"AS",capital:"Vientiane",currency:"LAK",languages:["lo"],emoji:"",emojiU:"U+1F1F1 U+1F1E6"},LB:{name:"Lebanon",native:"",phone:"961",continent:"AS",capital:"Beirut",currency:"LBP",languages:["ar","fr"],emoji:"",emojiU:"U+1F1F1 U+1F1E7"},LC:{name:"Saint Lucia",native:"Saint Lucia",phone:"1758",continent:"NA",capital:"Castries",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1F1 U+1F1E8"},LI:{name:"Liechtenstein",native:"Liechtenstein",phone:"423",continent:"EU",capital:"Vaduz",currency:"CHF",languages:["de"],emoji:"",emojiU:"U+1F1F1 U+1F1EE"},LK:{name:"Sri Lanka",native:"r lakva",phone:"94",continent:"AS",capital:"Colombo",currency:"LKR",languages:["si","ta"],emoji:"",emojiU:"U+1F1F1 U+1F1F0"},LR:{name:"Liberia",native:"Liberia",phone:"231",continent:"AF",capital:"Monrovia",currency:"LRD",languages:["en"],emoji:"",emojiU:"U+1F1F1 U+1F1F7"},LS:{name:"Lesotho",native:"Lesotho",phone:"266",continent:"AF",capital:"Maseru",currency:"LSL,ZAR",languages:["en","st"],emoji:"",emojiU:"U+1F1F1 U+1F1F8"},LT:{name:"Lithuania",native:"Lietuva",phone:"370",continent:"EU",capital:"Vilnius",currency:"EUR",languages:["lt"],emoji:"",emojiU:"U+1F1F1 U+1F1F9"},LU:{name:"Luxembourg",native:"Luxembourg",phone:"352",continent:"EU",capital:"Luxembourg",currency:"EUR",languages:["fr","de","lb"],emoji:"",emojiU:"U+1F1F1 U+1F1FA"},LV:{name:"Latvia",native:"Latvija",phone:"371",continent:"EU",capital:"Riga",currency:"EUR",languages:["lv"],emoji:"",emojiU:"U+1F1F1 U+1F1FB"},LY:{name:"Libya",native:"",phone:"218",continent:"AF",capital:"Tripoli",currency:"LYD",languages:["ar"],emoji:"",emojiU:"U+1F1F1 U+1F1FE"},MA:{name:"Morocco",native:"",phone:"212",continent:"AF",capital:"Rabat",currency:"MAD",languages:["ar"],emoji:"",emojiU:"U+1F1F2 U+1F1E6"},MC:{name:"Monaco",native:"Monaco",phone:"377",continent:"EU",capital:"Monaco",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1F2 U+1F1E8"},MD:{name:"Moldova",native:"Moldova",phone:"373",continent:"EU",capital:"Chiinu",currency:"MDL",languages:["ro"],emoji:"",emojiU:"U+1F1F2 U+1F1E9"},ME:{name:"Montenegro",native:" ",phone:"382",continent:"EU",capital:"Podgorica",currency:"EUR",languages:["sr","bs","sq","hr"],emoji:"",emojiU:"U+1F1F2 U+1F1EA"},MF:{name:"Saint Martin",native:"Saint-Martin",phone:"590",continent:"NA",capital:"Marigot",currency:"EUR",languages:["en","fr","nl"],emoji:"",emojiU:"U+1F1F2 U+1F1EB"},MG:{name:"Madagascar",native:"Madagasikara",phone:"261",continent:"AF",capital:"Antananarivo",currency:"MGA",languages:["fr","mg"],emoji:"",emojiU:"U+1F1F2 U+1F1EC"},MH:{name:"Marshall Islands",native:"Maje",phone:"692",continent:"OC",capital:"Majuro",currency:"USD",languages:["en","mh"],emoji:"",emojiU:"U+1F1F2 U+1F1ED"},MK:{name:"North Macedonia",native:" ",phone:"389",continent:"EU",capital:"Skopje",currency:"MKD",languages:["mk"],emoji:"",emojiU:"U+1F1F2 U+1F1F0"},ML:{name:"Mali",native:"Mali",phone:"223",continent:"AF",capital:"Bamako",currency:"XOF",languages:["fr"],emoji:"",emojiU:"U+1F1F2 U+1F1F1"},MM:{name:"Myanmar [Burma]",native:"",phone:"95",continent:"AS",capital:"Naypyidaw",currency:"MMK",languages:["my"],emoji:"",emojiU:"U+1F1F2 U+1F1F2"},MN:{name:"Mongolia",native:" ",phone:"976",continent:"AS",capital:"Ulan Bator",currency:"MNT",languages:["mn"],emoji:"",emojiU:"U+1F1F2 U+1F1F3"},MO:{name:"Macao",native:"",phone:"853",continent:"AS",capital:"",currency:"MOP",languages:["zh","pt"],emoji:"",emojiU:"U+1F1F2 U+1F1F4"},MP:{name:"Northern Mariana Islands",native:"Northern Mariana Islands",phone:"1670",continent:"OC",capital:"Saipan",currency:"USD",languages:["en","ch"],emoji:"",emojiU:"U+1F1F2 U+1F1F5"},MQ:{name:"Martinique",native:"Martinique",phone:"596",continent:"NA",capital:"Fort-de-France",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1F2 U+1F1F6"},MR:{name:"Mauritania",native:"",phone:"222",continent:"AF",capital:"Nouakchott",currency:"MRU",languages:["ar"],emoji:"",emojiU:"U+1F1F2 U+1F1F7"},MS:{name:"Montserrat",native:"Montserrat",phone:"1664",continent:"NA",capital:"Plymouth",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1F2 U+1F1F8"},MT:{name:"Malta",native:"Malta",phone:"356",continent:"EU",capital:"Valletta",currency:"EUR",languages:["mt","en"],emoji:"",emojiU:"U+1F1F2 U+1F1F9"},MU:{name:"Mauritius",native:"Maurice",phone:"230",continent:"AF",capital:"Port Louis",currency:"MUR",languages:["en"],emoji:"",emojiU:"U+1F1F2 U+1F1FA"},MV:{name:"Maldives",native:"Maldives",phone:"960",continent:"AS",capital:"Mal",currency:"MVR",languages:["dv"],emoji:"",emojiU:"U+1F1F2 U+1F1FB"},MW:{name:"Malawi",native:"Malawi",phone:"265",continent:"AF",capital:"Lilongwe",currency:"MWK",languages:["en","ny"],emoji:"",emojiU:"U+1F1F2 U+1F1FC"},MX:{name:"Mexico",native:"Mxico",phone:"52",continent:"NA",capital:"Mexico City",currency:"MXN",languages:["es"],emoji:"",emojiU:"U+1F1F2 U+1F1FD"},MY:{name:"Malaysia",native:"Malaysia",phone:"60",continent:"AS",capital:"Kuala Lumpur",currency:"MYR",languages:["ms"],emoji:"",emojiU:"U+1F1F2 U+1F1FE"},MZ:{name:"Mozambique",native:"Moambique",phone:"258",continent:"AF",capital:"Maputo",currency:"MZN",languages:["pt"],emoji:"",emojiU:"U+1F1F2 U+1F1FF"},NA:{name:"Namibia",native:"Namibia",phone:"264",continent:"AF",capital:"Windhoek",currency:"NAD,ZAR",languages:["en","af"],emoji:"",emojiU:"U+1F1F3 U+1F1E6"},NC:{name:"New Caledonia",native:"Nouvelle-Caldonie",phone:"687",continent:"OC",capital:"Nouma",currency:"XPF",languages:["fr"],emoji:"",emojiU:"U+1F1F3 U+1F1E8"},NE:{name:"Niger",native:"Niger",phone:"227",continent:"AF",capital:"Niamey",currency:"XOF",languages:["fr"],emoji:"",emojiU:"U+1F1F3 U+1F1EA"},NF:{name:"Norfolk Island",native:"Norfolk Island",phone:"672",continent:"OC",capital:"Kingston",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1F3 U+1F1EB"},NG:{name:"Nigeria",native:"Nigeria",phone:"234",continent:"AF",capital:"Abuja",currency:"NGN",languages:["en"],emoji:"",emojiU:"U+1F1F3 U+1F1EC"},NI:{name:"Nicaragua",native:"Nicaragua",phone:"505",continent:"NA",capital:"Managua",currency:"NIO",languages:["es"],emoji:"",emojiU:"U+1F1F3 U+1F1EE"},NL:{name:"Netherlands",native:"Nederland",phone:"31",continent:"EU",capital:"Amsterdam",currency:"EUR",languages:["nl"],emoji:"",emojiU:"U+1F1F3 U+1F1F1"},NO:{name:"Norway",native:"Norge",phone:"47",continent:"EU",capital:"Oslo",currency:"NOK",languages:["no","nb","nn"],emoji:"",emojiU:"U+1F1F3 U+1F1F4"},NP:{name:"Nepal",native:"",phone:"977",continent:"AS",capital:"Kathmandu",currency:"NPR",languages:["ne"],emoji:"",emojiU:"U+1F1F3 U+1F1F5"},NR:{name:"Nauru",native:"Nauru",phone:"674",continent:"OC",capital:"Yaren",currency:"AUD",languages:["en","na"],emoji:"",emojiU:"U+1F1F3 U+1F1F7"},NU:{name:"Niue",native:"Niu",phone:"683",continent:"OC",capital:"Alofi",currency:"NZD",languages:["en"],emoji:"",emojiU:"U+1F1F3 U+1F1FA"},NZ:{name:"New Zealand",native:"New Zealand",phone:"64",continent:"OC",capital:"Wellington",currency:"NZD",languages:["en","mi"],emoji:"",emojiU:"U+1F1F3 U+1F1FF"},OM:{name:"Oman",native:"",phone:"968",continent:"AS",capital:"Muscat",currency:"OMR",languages:["ar"],emoji:"",emojiU:"U+1F1F4 U+1F1F2"},PA:{name:"Panama",native:"Panam",phone:"507",continent:"NA",capital:"Panama City",currency:"PAB,USD",languages:["es"],emoji:"",emojiU:"U+1F1F5 U+1F1E6"},PE:{name:"Peru",native:"Per",phone:"51",continent:"SA",capital:"Lima",currency:"PEN",languages:["es"],emoji:"",emojiU:"U+1F1F5 U+1F1EA"},PF:{name:"French Polynesia",native:"Polynsie franaise",phone:"689",continent:"OC",capital:"Papeet",currency:"XPF",languages:["fr"],emoji:"",emojiU:"U+1F1F5 U+1F1EB"},PG:{name:"Papua New Guinea",native:"Papua Niugini",phone:"675",continent:"OC",capital:"Port Moresby",currency:"PGK",languages:["en"],emoji:"",emojiU:"U+1F1F5 U+1F1EC"},PH:{name:"Philippines",native:"Pilipinas",phone:"63",continent:"AS",capital:"Manila",currency:"PHP",languages:["en"],emoji:"",emojiU:"U+1F1F5 U+1F1ED"},PK:{name:"Pakistan",native:"Pakistan",phone:"92",continent:"AS",capital:"Islamabad",currency:"PKR",languages:["en","ur"],emoji:"",emojiU:"U+1F1F5 U+1F1F0"},PL:{name:"Poland",native:"Polska",phone:"48",continent:"EU",capital:"Warsaw",currency:"PLN",languages:["pl"],emoji:"",emojiU:"U+1F1F5 U+1F1F1"},PM:{name:"Saint Pierre and Miquelon",native:"Saint-Pierre-et-Miquelon",phone:"508",continent:"NA",capital:"Saint-Pierre",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1F5 U+1F1F2"},PN:{name:"Pitcairn Islands",native:"Pitcairn Islands",phone:"64",continent:"OC",capital:"Adamstown",currency:"NZD",languages:["en"],emoji:"",emojiU:"U+1F1F5 U+1F1F3"},PR:{name:"Puerto Rico",native:"Puerto Rico",phone:"1787,1939",continent:"NA",capital:"San Juan",currency:"USD",languages:["es","en"],emoji:"",emojiU:"U+1F1F5 U+1F1F7"},PS:{name:"Palestine",native:"",phone:"970",continent:"AS",capital:"Ramallah",currency:"ILS",languages:["ar"],emoji:"",emojiU:"U+1F1F5 U+1F1F8"},PT:{name:"Portugal",native:"Portugal",phone:"351",continent:"EU",capital:"Lisbon",currency:"EUR",languages:["pt"],emoji:"",emojiU:"U+1F1F5 U+1F1F9"},PW:{name:"Palau",native:"Palau",phone:"680",continent:"OC",capital:"Ngerulmud",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1F5 U+1F1FC"},PY:{name:"Paraguay",native:"Paraguay",phone:"595",continent:"SA",capital:"Asuncin",currency:"PYG",languages:["es","gn"],emoji:"",emojiU:"U+1F1F5 U+1F1FE"},QA:{name:"Qatar",native:"",phone:"974",continent:"AS",capital:"Doha",currency:"QAR",languages:["ar"],emoji:"",emojiU:"U+1F1F6 U+1F1E6"},RE:{name:"Runion",native:"La Runion",phone:"262",continent:"AF",capital:"Saint-Denis",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1F7 U+1F1EA"},RO:{name:"Romania",native:"Romnia",phone:"40",continent:"EU",capital:"Bucharest",currency:"RON",languages:["ro"],emoji:"",emojiU:"U+1F1F7 U+1F1F4"},RS:{name:"Serbia",native:"",phone:"381",continent:"EU",capital:"Belgrade",currency:"RSD",languages:["sr"],emoji:"",emojiU:"U+1F1F7 U+1F1F8"},RU:{name:"Russia",native:"",phone:"7",continent:"EU",capital:"Moscow",currency:"RUB",languages:["ru"],emoji:"",emojiU:"U+1F1F7 U+1F1FA"},RW:{name:"Rwanda",native:"Rwanda",phone:"250",continent:"AF",capital:"Kigali",currency:"RWF",languages:["rw","en","fr"],emoji:"",emojiU:"U+1F1F7 U+1F1FC"},SA:{name:"Saudi Arabia",native:" ",phone:"966",continent:"AS",capital:"Riyadh",currency:"SAR",languages:["ar"],emoji:"",emojiU:"U+1F1F8 U+1F1E6"},SB:{name:"Solomon Islands",native:"Solomon Islands",phone:"677",continent:"OC",capital:"Honiara",currency:"SBD",languages:["en"],emoji:"",emojiU:"U+1F1F8 U+1F1E7"},SC:{name:"Seychelles",native:"Seychelles",phone:"248",continent:"AF",capital:"Victoria",currency:"SCR",languages:["fr","en"],emoji:"",emojiU:"U+1F1F8 U+1F1E8"},SD:{name:"Sudan",native:"",phone:"249",continent:"AF",capital:"Khartoum",currency:"SDG",languages:["ar","en"],emoji:"",emojiU:"U+1F1F8 U+1F1E9"},SE:{name:"Sweden",native:"Sverige",phone:"46",continent:"EU",capital:"Stockholm",currency:"SEK",languages:["sv"],emoji:"",emojiU:"U+1F1F8 U+1F1EA"},SG:{name:"Singapore",native:"Singapore",phone:"65",continent:"AS",capital:"Singapore",currency:"SGD",languages:["en","ms","ta","zh"],emoji:"",emojiU:"U+1F1F8 U+1F1EC"},SH:{name:"Saint Helena",native:"Saint Helena",phone:"290",continent:"AF",capital:"Jamestown",currency:"SHP",languages:["en"],emoji:"",emojiU:"U+1F1F8 U+1F1ED"},SI:{name:"Slovenia",native:"Slovenija",phone:"386",continent:"EU",capital:"Ljubljana",currency:"EUR",languages:["sl"],emoji:"",emojiU:"U+1F1F8 U+1F1EE"},SJ:{name:"Svalbard and Jan Mayen",native:"Svalbard og Jan Mayen",phone:"4779",continent:"EU",capital:"Longyearbyen",currency:"NOK",languages:["no"],emoji:"",emojiU:"U+1F1F8 U+1F1EF"},SK:{name:"Slovakia",native:"Slovensko",phone:"421",continent:"EU",capital:"Bratislava",currency:"EUR",languages:["sk"],emoji:"",emojiU:"U+1F1F8 U+1F1F0"},SL:{name:"Sierra Leone",native:"Sierra Leone",phone:"232",continent:"AF",capital:"Freetown",currency:"SLL",languages:["en"],emoji:"",emojiU:"U+1F1F8 U+1F1F1"},SM:{name:"San Marino",native:"San Marino",phone:"378",continent:"EU",capital:"City of San Marino",currency:"EUR",languages:["it"],emoji:"",emojiU:"U+1F1F8 U+1F1F2"},SN:{name:"Senegal",native:"Sngal",phone:"221",continent:"AF",capital:"Dakar",currency:"XOF",languages:["fr"],emoji:"",emojiU:"U+1F1F8 U+1F1F3"},SO:{name:"Somalia",native:"Soomaaliya",phone:"252",continent:"AF",capital:"Mogadishu",currency:"SOS",languages:["so","ar"],emoji:"",emojiU:"U+1F1F8 U+1F1F4"},SR:{name:"Suriname",native:"Suriname",phone:"597",continent:"SA",capital:"Paramaribo",currency:"SRD",languages:["nl"],emoji:"",emojiU:"U+1F1F8 U+1F1F7"},SS:{name:"South Sudan",native:"South Sudan",phone:"211",continent:"AF",capital:"Juba",currency:"SSP",languages:["en"],emoji:"",emojiU:"U+1F1F8 U+1F1F8"},ST:{name:"So Tom and Prncipe",native:"So Tom e Prncipe",phone:"239",continent:"AF",capital:"So Tom",currency:"STN",languages:["pt"],emoji:"",emojiU:"U+1F1F8 U+1F1F9"},SV:{name:"El Salvador",native:"El Salvador",phone:"503",continent:"NA",capital:"San Salvador",currency:"SVC,USD",languages:["es"],emoji:"",emojiU:"U+1F1F8 U+1F1FB"},SX:{name:"Sint Maarten",native:"Sint Maarten",phone:"1721",continent:"NA",capital:"Philipsburg",currency:"ANG",languages:["nl","en"],emoji:"",emojiU:"U+1F1F8 U+1F1FD"},SY:{name:"Syria",native:"",phone:"963",continent:"AS",capital:"Damascus",currency:"SYP",languages:["ar"],emoji:"",emojiU:"U+1F1F8 U+1F1FE"},SZ:{name:"Swaziland",native:"Swaziland",phone:"268",continent:"AF",capital:"Lobamba",currency:"SZL",languages:["en","ss"],emoji:"",emojiU:"U+1F1F8 U+1F1FF"},TC:{name:"Turks and Caicos Islands",native:"Turks and Caicos Islands",phone:"1649",continent:"NA",capital:"Cockburn Town",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1F9 U+1F1E8"},TD:{name:"Chad",native:"Tchad",phone:"235",continent:"AF",capital:"N'Djamena",currency:"XAF",languages:["fr","ar"],emoji:"",emojiU:"U+1F1F9 U+1F1E9"},TF:{name:"French Southern Territories",native:"Territoire des Terres australes et antarctiques fr",phone:"262",continent:"AN",capital:"Port-aux-Franais",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1F9 U+1F1EB"},TG:{name:"Togo",native:"Togo",phone:"228",continent:"AF",capital:"Lom",currency:"XOF",languages:["fr"],emoji:"",emojiU:"U+1F1F9 U+1F1EC"},TH:{name:"Thailand",native:"",phone:"66",continent:"AS",capital:"Bangkok",currency:"THB",languages:["th"],emoji:"",emojiU:"U+1F1F9 U+1F1ED"},TJ:{name:"Tajikistan",native:"",phone:"992",continent:"AS",capital:"Dushanbe",currency:"TJS",languages:["tg","ru"],emoji:"",emojiU:"U+1F1F9 U+1F1EF"},TK:{name:"Tokelau",native:"Tokelau",phone:"690",continent:"OC",capital:"Fakaofo",currency:"NZD",languages:["en"],emoji:"",emojiU:"U+1F1F9 U+1F1F0"},TL:{name:"East Timor",native:"Timor-Leste",phone:"670",continent:"OC",capital:"Dili",currency:"USD",languages:["pt"],emoji:"",emojiU:"U+1F1F9 U+1F1F1"},TM:{name:"Turkmenistan",native:"Trkmenistan",phone:"993",continent:"AS",capital:"Ashgabat",currency:"TMT",languages:["tk","ru"],emoji:"",emojiU:"U+1F1F9 U+1F1F2"},TN:{name:"Tunisia",native:"",phone:"216",continent:"AF",capital:"Tunis",currency:"TND",languages:["ar"],emoji:"",emojiU:"U+1F1F9 U+1F1F3"},TO:{name:"Tonga",native:"Tonga",phone:"676",continent:"OC",capital:"Nuku'alofa",currency:"TOP",languages:["en","to"],emoji:"",emojiU:"U+1F1F9 U+1F1F4"},TR:{name:"Turkey",native:"Trkiye",phone:"90",continent:"AS",capital:"Ankara",currency:"TRY",languages:["tr"],emoji:"",emojiU:"U+1F1F9 U+1F1F7"},TT:{name:"Trinidad and Tobago",native:"Trinidad and Tobago",phone:"1868",continent:"NA",capital:"Port of Spain",currency:"TTD",languages:["en"],emoji:"",emojiU:"U+1F1F9 U+1F1F9"},TV:{name:"Tuvalu",native:"Tuvalu",phone:"688",continent:"OC",capital:"Funafuti",currency:"AUD",languages:["en"],emoji:"",emojiU:"U+1F1F9 U+1F1FB"},TW:{name:"Taiwan",native:"",phone:"886",continent:"AS",capital:"Taipei",currency:"TWD",languages:["zh"],emoji:"",emojiU:"U+1F1F9 U+1F1FC"},TZ:{name:"Tanzania",native:"Tanzania",phone:"255",continent:"AF",capital:"Dodoma",currency:"TZS",languages:["sw","en"],emoji:"",emojiU:"U+1F1F9 U+1F1FF"},UA:{name:"Ukraine",native:"",phone:"380",continent:"EU",capital:"Kyiv",currency:"UAH",languages:["uk"],emoji:"",emojiU:"U+1F1FA U+1F1E6"},UG:{name:"Uganda",native:"Uganda",phone:"256",continent:"AF",capital:"Kampala",currency:"UGX",languages:["en","sw"],emoji:"",emojiU:"U+1F1FA U+1F1EC"},UM:{name:"U.S. Minor Outlying Islands",native:"United States Minor Outlying Islands",phone:"1",continent:"OC",capital:"",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1FA U+1F1F2"},US:{name:"United States",native:"United States",phone:"1",continent:"NA",capital:"Washington D.C.",currency:"USD,USN,USS",languages:["en"],emoji:"",emojiU:"U+1F1FA U+1F1F8"},UY:{name:"Uruguay",native:"Uruguay",phone:"598",continent:"SA",capital:"Montevideo",currency:"UYI,UYU",languages:["es"],emoji:"",emojiU:"U+1F1FA U+1F1FE"},UZ:{name:"Uzbekistan",native:"Ozbekiston",phone:"998",continent:"AS",capital:"Tashkent",currency:"UZS",languages:["uz","ru"],emoji:"",emojiU:"U+1F1FA U+1F1FF"},VA:{name:"Vatican City",native:"Vaticano",phone:"379",continent:"EU",capital:"Vatican City",currency:"EUR",languages:["it","la"],emoji:"",emojiU:"U+1F1FB U+1F1E6"},VC:{name:"Saint Vincent and the Grenadines",native:"Saint Vincent and the Grenadines",phone:"1784",continent:"NA",capital:"Kingstown",currency:"XCD",languages:["en"],emoji:"",emojiU:"U+1F1FB U+1F1E8"},VE:{name:"Venezuela",native:"Venezuela",phone:"58",continent:"SA",capital:"Caracas",currency:"VES",languages:["es"],emoji:"",emojiU:"U+1F1FB U+1F1EA"},VG:{name:"British Virgin Islands",native:"British Virgin Islands",phone:"1284",continent:"NA",capital:"Road Town",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1FB U+1F1EC"},VI:{name:"U.S. Virgin Islands",native:"United States Virgin Islands",phone:"1340",continent:"NA",capital:"Charlotte Amalie",currency:"USD",languages:["en"],emoji:"",emojiU:"U+1F1FB U+1F1EE"},VN:{name:"Vietnam",native:"Vit Nam",phone:"84",continent:"AS",capital:"Hanoi",currency:"VND",languages:["vi"],emoji:"",emojiU:"U+1F1FB U+1F1F3"},VU:{name:"Vanuatu",native:"Vanuatu",phone:"678",continent:"OC",capital:"Port Vila",currency:"VUV",languages:["bi","en","fr"],emoji:"",emojiU:"U+1F1FB U+1F1FA"},WF:{name:"Wallis and Futuna",native:"Wallis et Futuna",phone:"681",continent:"OC",capital:"Mata-Utu",currency:"XPF",languages:["fr"],emoji:"",emojiU:"U+1F1FC U+1F1EB"},WS:{name:"Samoa",native:"Samoa",phone:"685",continent:"OC",capital:"Apia",currency:"WST",languages:["sm","en"],emoji:"",emojiU:"U+1F1FC U+1F1F8"},XK:{name:"Kosovo",native:"Republika e Kosovs",phone:"377,381,383,386",continent:"EU",capital:"Pristina",currency:"EUR",languages:["sq","sr"],emoji:"",emojiU:"U+1F1FD U+1F1F0"},YE:{name:"Yemen",native:"",phone:"967",continent:"AS",capital:"Sana'a",currency:"YER",languages:["ar"],emoji:"",emojiU:"U+1F1FE U+1F1EA"},YT:{name:"Mayotte",native:"Mayotte",phone:"262",continent:"AF",capital:"Mamoudzou",currency:"EUR",languages:["fr"],emoji:"",emojiU:"U+1F1FE U+1F1F9"},ZA:{name:"South Africa",native:"South Africa",phone:"27",continent:"AF",capital:"Pretoria",currency:"ZAR",languages:["af","en","nr","st","ss","tn","ts","ve","xh","zu"],emoji:"",emojiU:"U+1F1FF U+1F1E6"},ZM:{name:"Zambia",native:"Zambia",phone:"260",continent:"AF",capital:"Lusaka",currency:"ZMW",languages:["en"],emoji:"",emojiU:"U+1F1FF U+1F1F2"},ZW:{name:"Zimbabwe",native:"Zimbabwe",phone:"263",continent:"AF",capital:"Harare",currency:"USD,ZAR,BWP,GBP,AUD,CNY,INR,JPY",languages:["en","sn","nd"],emoji:"",emojiU:"U+1F1FF U+1F1FC"}},a={af:{name:"Afrikaans",native:"Afrikaans"},am:{name:"Amharic",native:""},ar:{name:"Arabic",native:"",rtl:1},ay:{name:"Aymara",native:"Aymar"},az:{name:"Azerbaijani",native:"Azrbaycanca / "},be:{name:"Belarusian",native:""},bg:{name:"Bulgarian",native:""},bi:{name:"Bislama",native:"Bislama"},bn:{name:"Bengali",native:""},bs:{name:"Bosnian",native:"Bosanski"},ca:{name:"Catalan",native:"Catal"},ch:{name:"Chamorro",native:"Chamoru"},cs:{name:"Czech",native:"etina"},da:{name:"Danish",native:"Dansk"},de:{name:"German",native:"Deutsch"},dv:{name:"Divehi",native:"",rtl:1},dz:{name:"Dzongkha",native:""},el:{name:"Greek",native:""},en:{name:"English",native:"English"},es:{name:"Spanish",native:"Espaol"},et:{name:"Estonian",native:"Eesti"},eu:{name:"Basque",native:"Euskara"},fa:{name:"Persian",native:"",rtl:1},ff:{name:"Peul",native:"Fulfulde"},fi:{name:"Finnish",native:"Suomi"},fj:{name:"Fijian",native:"Na Vosa Vakaviti"},fo:{name:"Faroese",native:"Froyskt"},fr:{name:"French",native:"Franais"},ga:{name:"Irish",native:"Gaeilge"},gl:{name:"Galician",native:"Galego"},gn:{name:"Guarani",native:"Avae'"},gv:{name:"Manx",native:"Gaelg"},he:{name:"Hebrew",native:"",rtl:1},hi:{name:"Hindi",native:""},hr:{name:"Croatian",native:"Hrvatski"},ht:{name:"Haitian",native:"Kryol ayisyen"},hu:{name:"Hungarian",native:"Magyar"},hy:{name:"Armenian",native:""},id:{name:"Indonesian",native:"Bahasa Indonesia"},is:{name:"Icelandic",native:"slenska"},it:{name:"Italian",native:"Italiano"},ja:{name:"Japanese",native:""},ka:{name:"Georgian",native:""},kg:{name:"Kongo",native:"KiKongo"},kk:{name:"Kazakh",native:""},kl:{name:"Greenlandic",native:"Kalaallisut"},km:{name:"Cambodian",native:""},ko:{name:"Korean",native:""},ku:{name:"Kurdish",native:"Kurd / ",rtl:1},ky:{name:"Kyrgyz",native:""},la:{name:"Latin",native:"Latina"},lb:{name:"Luxembourgish",native:"Ltzebuergesch"},ln:{name:"Lingala",native:"Lingla"},lo:{name:"Laotian",native:" / Pha xa lao"},lt:{name:"Lithuanian",native:"Lietuvi"},lu:{name:"Luba-Katanga",native:"Tshiluba"},lv:{name:"Latvian",native:"Latvieu"},mg:{name:"Malagasy",native:"Malagasy"},mh:{name:"Marshallese",native:"Kajin Majel / Ebon"},mi:{name:"Maori",native:"Mori"},mk:{name:"Macedonian",native:""},mn:{name:"Mongolian",native:""},ms:{name:"Malay",native:"Bahasa Melayu"},mt:{name:"Maltese",native:"bil-Malti"},my:{name:"Burmese",native:""},na:{name:"Nauruan",native:"Dorerin Naoero"},nb:{name:"Norwegian Bokml",native:"Norsk bokml"},nd:{name:"North Ndebele",native:"Sindebele"},ne:{name:"Nepali",native:""},nl:{name:"Dutch",native:"Nederlands"},nn:{name:"Norwegian Nynorsk",native:"Norsk nynorsk"},no:{name:"Norwegian",native:"Norsk"},nr:{name:"South Ndebele",native:"isiNdebele"},ny:{name:"Chichewa",native:"Chi-Chewa"},oc:{name:"Occitan",native:"Occitan"},pa:{name:"Panjabi / Punjabi",native:" /  / "},pl:{name:"Polish",native:"Polski"},ps:{name:"Pashto",native:"",rtl:1},pt:{name:"Portuguese",native:"Portugus"},qu:{name:"Quechua",native:"Runa Simi"},rn:{name:"Kirundi",native:"Kirundi"},ro:{name:"Romanian",native:"Romn"},ru:{name:"Russian",native:""},rw:{name:"Rwandi",native:"Kinyarwandi"},sg:{name:"Sango",native:"Sng"},si:{name:"Sinhalese",native:""},sk:{name:"Slovak",native:"Slovenina"},sl:{name:"Slovenian",native:"Slovenina"},sm:{name:"Samoan",native:"Gagana Samoa"},sn:{name:"Shona",native:"chiShona"},so:{name:"Somalia",native:"Soomaaliga"},sq:{name:"Albanian",native:"Shqip"},sr:{name:"Serbian",native:""},ss:{name:"Swati",native:"SiSwati"},st:{name:"Southern Sotho",native:"Sesotho"},sv:{name:"Swedish",native:"Svenska"},sw:{name:"Swahili",native:"Kiswahili"},ta:{name:"Tamil",native:""},tg:{name:"Tajik",native:""},th:{name:"Thai",native:" / Phasa Thai"},ti:{name:"Tigrinya",native:""},tk:{name:"Turkmen",native:" / "},tn:{name:"Tswana",native:"Setswana"},to:{name:"Tonga",native:"Lea Faka-Tonga"},tr:{name:"Turkish",native:"Trke"},ts:{name:"Tsonga",native:"Xitsonga"},uk:{name:"Ukrainian",native:""},ur:{name:"Urdu",native:"",rtl:1},uz:{name:"Uzbek",native:""},ve:{name:"Venda",native:"Tshivena"},vi:{name:"Vietnamese",native:"Ting Vit"},xh:{name:"Xhosa",native:"isiXhosa"},zh:{name:"Chinese",native:""},zu:{name:"Zulu",native:"isiZulu"}},s={aa:{name:"Afar",native:"Afar"},ab:{name:"Abkhazian",native:""},af:{name:"Afrikaans",native:"Afrikaans"},ak:{name:"Akan",native:"Akana"},am:{name:"Amharic",native:""},an:{name:"Aragonese",native:"Aragons"},ar:{name:"Arabic",native:"",rtl:1},as:{name:"Assamese",native:""},av:{name:"Avar",native:""},ay:{name:"Aymara",native:"Aymar"},az:{name:"Azerbaijani",native:"Azrbaycanca / "},ba:{name:"Bashkir",native:""},be:{name:"Belarusian",native:""},bg:{name:"Bulgarian",native:""},bh:{name:"Bihari",native:""},bi:{name:"Bislama",native:"Bislama"},bm:{name:"Bambara",native:"Bamanankan"},bn:{name:"Bengali",native:""},bo:{name:"Tibetan",native:" / Bod skad"},br:{name:"Breton",native:"Brezhoneg"},bs:{name:"Bosnian",native:"Bosanski"},ca:{name:"Catalan",native:"Catal"},ce:{name:"Chechen",native:""},ch:{name:"Chamorro",native:"Chamoru"},co:{name:"Corsican",native:"Corsu"},cr:{name:"Cree",native:"Nehiyaw"},cs:{name:"Czech",native:"etina"},cu:{name:"Old Church Slavonic / Old Bulgarian",native:" / slovnsk"},cv:{name:"Chuvash",native:""},cy:{name:"Welsh",native:"Cymraeg"},da:{name:"Danish",native:"Dansk"},de:{name:"German",native:"Deutsch"},dv:{name:"Divehi",native:"",rtl:1},dz:{name:"Dzongkha",native:""},ee:{name:"Ewe",native:""},el:{name:"Greek",native:""},en:{name:"English",native:"English"},eo:{name:"Esperanto",native:"Esperanto"},es:{name:"Spanish",native:"Espaol"},et:{name:"Estonian",native:"Eesti"},eu:{name:"Basque",native:"Euskara"},fa:{name:"Persian",native:"",rtl:1},ff:{name:"Peul",native:"Fulfulde"},fi:{name:"Finnish",native:"Suomi"},fj:{name:"Fijian",native:"Na Vosa Vakaviti"},fo:{name:"Faroese",native:"Froyskt"},fr:{name:"French",native:"Franais"},fy:{name:"West Frisian",native:"Frysk"},ga:{name:"Irish",native:"Gaeilge"},gd:{name:"Scottish Gaelic",native:"Gidhlig"},gl:{name:"Galician",native:"Galego"},gn:{name:"Guarani",native:"Avae'"},gu:{name:"Gujarati",native:""},gv:{name:"Manx",native:"Gaelg"},ha:{name:"Hausa",native:"",rtl:1},he:{name:"Hebrew",native:"",rtl:1},hi:{name:"Hindi",native:""},ho:{name:"Hiri Motu",native:"Hiri Motu"},hr:{name:"Croatian",native:"Hrvatski"},ht:{name:"Haitian",native:"Kryol ayisyen"},hu:{name:"Hungarian",native:"Magyar"},hy:{name:"Armenian",native:""},hz:{name:"Herero",native:"Otsiherero"},ia:{name:"Interlingua",native:"Interlingua"},id:{name:"Indonesian",native:"Bahasa Indonesia"},ie:{name:"Interlingue",native:"Interlingue"},ig:{name:"Igbo",native:"Igbo"},ii:{name:"Sichuan Yi",native:" / "},ik:{name:"Inupiak",native:"Iupiak"},io:{name:"Ido",native:"Ido"},is:{name:"Icelandic",native:"slenska"},it:{name:"Italian",native:"Italiano"},iu:{name:"Inuktitut",native:""},ja:{name:"Japanese",native:""},jv:{name:"Javanese",native:"Basa Jawa"},ka:{name:"Georgian",native:""},kg:{name:"Kongo",native:"KiKongo"},ki:{name:"Kikuyu",native:"Gky"},kj:{name:"Kuanyama",native:"Kuanyama"},kk:{name:"Kazakh",native:""},kl:{name:"Greenlandic",native:"Kalaallisut"},km:{name:"Cambodian",native:""},kn:{name:"Kannada",native:""},ko:{name:"Korean",native:""},kr:{name:"Kanuri",native:"Kanuri"},ks:{name:"Kashmiri",native:" / ",rtl:1},ku:{name:"Kurdish",native:"Kurd / ",rtl:1},kv:{name:"Komi",native:""},kw:{name:"Cornish",native:"Kernewek"},ky:{name:"Kyrgyz",native:""},la:{name:"Latin",native:"Latina"},lb:{name:"Luxembourgish",native:"Ltzebuergesch"},lg:{name:"Ganda",native:"Luganda"},li:{name:"Limburgian",native:"Limburgs"},ln:{name:"Lingala",native:"Lingla"},lo:{name:"Laotian",native:" / Pha xa lao"},lt:{name:"Lithuanian",native:"Lietuvi"},lu:{name:"Luba-Katanga",native:"Tshiluba"},lv:{name:"Latvian",native:"Latvieu"},mg:{name:"Malagasy",native:"Malagasy"},mh:{name:"Marshallese",native:"Kajin Majel / Ebon"},mi:{name:"Maori",native:"Mori"},mk:{name:"Macedonian",native:""},ml:{name:"Malayalam",native:""},mn:{name:"Mongolian",native:""},mo:{name:"Moldovan",native:"Moldoveneasc"},mr:{name:"Marathi",native:""},ms:{name:"Malay",native:"Bahasa Melayu"},mt:{name:"Maltese",native:"bil-Malti"},my:{name:"Burmese",native:""},na:{name:"Nauruan",native:"Dorerin Naoero"},nb:{name:"Norwegian Bokml",native:"Norsk bokml"},nd:{name:"North Ndebele",native:"Sindebele"},ne:{name:"Nepali",native:""},ng:{name:"Ndonga",native:"Oshiwambo"},nl:{name:"Dutch",native:"Nederlands"},nn:{name:"Norwegian Nynorsk",native:"Norsk nynorsk"},no:{name:"Norwegian",native:"Norsk"},nr:{name:"South Ndebele",native:"isiNdebele"},nv:{name:"Navajo",native:"Din bizaad"},ny:{name:"Chichewa",native:"Chi-Chewa"},oc:{name:"Occitan",native:"Occitan"},oj:{name:"Ojibwa",native:" / Anishinaabemowin"},om:{name:"Oromo",native:"Oromoo"},or:{name:"Oriya",native:""},os:{name:"Ossetian / Ossetic",native:""},pa:{name:"Panjabi / Punjabi",native:" /  / "},pi:{name:"Pali",native:"Pli / "},pl:{name:"Polish",native:"Polski"},ps:{name:"Pashto",native:"",rtl:1},pt:{name:"Portuguese",native:"Portugus"},qu:{name:"Quechua",native:"Runa Simi"},rm:{name:"Raeto Romance",native:"Rumantsch"},rn:{name:"Kirundi",native:"Kirundi"},ro:{name:"Romanian",native:"Romn"},ru:{name:"Russian",native:""},rw:{name:"Rwandi",native:"Kinyarwandi"},sa:{name:"Sanskrit",native:""},sc:{name:"Sardinian",native:"Sardu"},sd:{name:"Sindhi",native:""},se:{name:"Northern Sami",native:"Smegiella"},sg:{name:"Sango",native:"Sng"},sh:{name:"Serbo-Croatian",native:"Srpskohrvatski / "},si:{name:"Sinhalese",native:""},sk:{name:"Slovak",native:"Slovenina"},sl:{name:"Slovenian",native:"Slovenina"},sm:{name:"Samoan",native:"Gagana Samoa"},sn:{name:"Shona",native:"chiShona"},so:{name:"Somalia",native:"Soomaaliga"},sq:{name:"Albanian",native:"Shqip"},sr:{name:"Serbian",native:""},ss:{name:"Swati",native:"SiSwati"},st:{name:"Southern Sotho",native:"Sesotho"},su:{name:"Sundanese",native:"Basa Sunda"},sv:{name:"Swedish",native:"Svenska"},sw:{name:"Swahili",native:"Kiswahili"},ta:{name:"Tamil",native:""},te:{name:"Telugu",native:""},tg:{name:"Tajik",native:""},th:{name:"Thai",native:" / Phasa Thai"},ti:{name:"Tigrinya",native:""},tk:{name:"Turkmen",native:" / "},tl:{name:"Tagalog / Filipino",native:"Tagalog"},tn:{name:"Tswana",native:"Setswana"},to:{name:"Tonga",native:"Lea Faka-Tonga"},tr:{name:"Turkish",native:"Trke"},ts:{name:"Tsonga",native:"Xitsonga"},tt:{name:"Tatar",native:"Tatara"},tw:{name:"Twi",native:"Twi"},ty:{name:"Tahitian",native:"Reo M`ohi"},ug:{name:"Uyghur",native:"Uyurq / "},uk:{name:"Ukrainian",native:""},ur:{name:"Urdu",native:"",rtl:1},uz:{name:"Uzbek",native:""},ve:{name:"Venda",native:"Tshivena"},vi:{name:"Vietnamese",native:"Ting Vit"},vo:{name:"Volapk",native:"Volapk"},wa:{name:"Walloon",native:"Walon"},wo:{name:"Wolof",native:"Wollof"},xh:{name:"Xhosa",native:"isiXhosa"},yi:{name:"Yiddish",native:"",rtl:1},yo:{name:"Yoruba",native:"Yorb"},za:{name:"Zhuang",native:"Cuengh / T / "},zh:{name:"Chinese",native:""},zu:{name:"Zulu",native:"isiZulu"}},l=2147483647,c=36,d=/^xn--/,u=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,h=String.fromCharCode,m=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},v=function(e,t,n){var r=0;for(e=n?g(e/700):e>>1,e+=g(e/t);e>455;r+=c)e=g(e/35);return g(r+36*e/(e+38))},b=function(t){var n=[],r=t.length,o=0,i=128,a=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var d=0;d<s;++d)t.charCodeAt(d)>=128&&e("not-basic"),n.push(t.charCodeAt(d));for(var u=s>0?s+1:0;u<r;){for(var p=o,f=1,h=c;;h+=c){u>=r&&e("invalid-input");var m=(S=t.charCodeAt(u++))-48<10?S-22:S-65<26?S-65:S-97<26?S-97:c;(m>=c||m>g((l-o)/f))&&e("overflow"),o+=m*f;var b=h<=a?1:h>=a+26?26:h-a;if(m<b)break;var y=c-b;f>g(l/y)&&e("overflow"),f*=y}var E=n.length+1;a=v(o-p,E,0==p),g(o/E)>l-i&&e("overflow"),i+=g(o/E),o%=E,n.splice(o++,0,i)}var S;return String.fromCodePoint.apply(String,n)},y=function(t){var r=[],o=(t=n(t)).length,i=128,a=0,s=72,d=!0,u=!1,p=void 0;try{for(var f,b=t[Symbol.iterator]();!(d=(f=b.next()).done);d=!0){var y=f.value;y<128&&r.push(h(y))}}catch(e){u=!0,p=e}finally{try{!d&&b.return&&b.return()}finally{if(u)throw p}}var E=r.length,S=E;for(E&&r.push("-");S<o;){var C=l,w=!0,T=!1,x=void 0;try{for(var k,I=t[Symbol.iterator]();!(w=(k=I.next()).done);w=!0){var A=k.value;A>=i&&A<C&&(C=A)}}catch(e){T=!0,x=e}finally{try{!w&&I.return&&I.return()}finally{if(T)throw x}}var O=S+1;C-i>g((l-a)/O)&&e("overflow"),a+=(C-i)*O,i=C;var N=!0,L=!1,_=void 0;try{for(var F,D=t[Symbol.iterator]();!(N=(F=D.next()).done);N=!0){var B=F.value;if(B<i&&++a>l&&e("overflow"),B==i){for(var R=a,P=c;;P+=c){var M=P<=s?1:P>=s+26?26:P-s;if(R<M)break;var U=R-M,j=c-M;r.push(h(m(M+U%j,0))),R=g(U/j)}r.push(h(m(R,0))),s=v(a,O,S==E),a=0,++S}}}catch(e){L=!0,_=e}finally{try{!N&&D.return&&D.return()}finally{if(L)throw _}}++a,++i}return r.join("")},E={version:"2.1.0",ucs2:{decode:n,encode:function(e){return String.fromCodePoint.apply(String,r(e))}},decode:b,encode:y,toASCII:function(e){return t(e,function(e){return u.test(e)?"xn--"+y(e):e})},toUnicode:function(e){return t(e,function(e){return d.test(e)?b(e.slice(4).toLowerCase()):e})}},S=E.ucs2,C=S.decode,w=S.encode,T=127462-"A".charCodeAt(0),x=/^[A-Z]{2}$/;return{continents:o,countries:i,languages:a,languagesAll:s,getEmojiFlag:function(e){return x.test(e)?w(e.split("").map(function(e){return T+e.charCodeAt(0)})):""},getUnicode:function(e){return C(e).map(function(e){return"U+"+Number(e).toString(16).toUpperCase()}).join(" ")}}})},function(e,t,n){"use strict";!function(e){if(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,r,o,i){var a=this;return!!a.paused||!t[o]&&!t[i]&&n.call(a,e,r,o)},e.prototype.bindGlobal=function(e,n,r){if(this.bind(e,n,r),e instanceof Array)for(var o=0;o<e.length;o++)t[e[o]]=!0;else t[e]=!0},e.init()}}("undefined"!=typeof Mousetrap?Mousetrap:void 0)},function(e,t,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(i){r=i,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(function(){function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=E({},t),e[W]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var r in n)!(r in t)&&(t[r]=n[r]);se(t);for(var o in this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Z,a(e,"mousedown",this._onTapStart),a(e,"touchstart",this._onTapStart),a(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(a(e,"dragover",this),a(e,"dragenter",this)),ie.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),k&&k.state!==t&&(c(k,"display",t?"none":""),t||k.state&&(e.options.group.revertClone?(I.insertBefore(k,A),e._animate(w,k)):I.insertBefore(k,w)),k.state=t)}function n(e,t,n){if(e){n=n||G;do{if(">*"===t&&e.parentNode===n||b(e,t))return e}while(e=r(e))}return null}function r(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function o(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function a(e,t,n){e.addEventListener(t,n,Q)}function s(e,t,n){e.removeEventListener(t,n,Q)}function l(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(K," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(K," ")}}function c(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return G.defaultView&&G.defaultView.getComputedStyle?n=G.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function d(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function u(e,t,n,r,o,i,a){e=e||t[W];var s=G.createEvent("Event"),l=e.options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=o||t,s.item=r||t,s.clone=k,s.oldIndex=i,s.newIndex=a,t.dispatchEvent(s),l[c]&&l[c].call(e,s)}function p(e,t,n,r,o,i,a,s){var l,c,d=e[W],u=d.options.onMove;return l=G.createEvent("Event"),l.initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=o||t,l.relatedRect=i||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),u&&(c=u.call(d,l,a)),c}function f(e){e.draggable=!1}function g(){te=!1}function h(e,t){var n=e.lastElementChild,r=n.getBoundingClientRect();return t.clientY-(r.top+r.height)>5||t.clientX-(r.left+r.width)>5}function m(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function v(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!b(e,t)||n++;return n}function b(e,t){if(e){t=t.split(".");var n=t.shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(r)||[]).length!=t.length)}return!1}function y(e,t){var n,r;return function(){void 0===n&&(n=arguments,r=this,setTimeout(function(){1===n.length?e.call(r,n[0]):e.apply(r,n),n=void 0},t))}}function E(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function S(e){return X?X(e).clone(!0)[0]:J&&J.dom?J.dom(e).cloneNode(!0):e.cloneNode(!0)}function C(e){for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&oe.push(r)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var w,T,x,k,I,A,O,N,L,_,F,D,B,R,P,M,U,j,H,$,V={},K=/\s+/g,q=/left|right|inline/,W="Sortable"+(new Date).getTime(),z=window,G=z.document,Y=z.parseInt,X=z.jQuery||z.Zepto,J=z.Polymer,Q=!1,Z=!!("draggable"in G.createElement("div")),ee=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=G.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),te=!1,ne=Math.abs,re=Math.min,oe=[],ie=[],ae=y(function(e,t,n){if(n&&t.scroll){var r,o,i,a,s,l,c=n[W],d=t.scrollSensitivity,u=t.scrollSpeed,p=e.clientX,f=e.clientY,g=window.innerWidth,h=window.innerHeight;if(L!==n&&(N=t.scroll,L=n,_=t.scrollFn,!0===N)){N=n;do{if(N.offsetWidth<N.scrollWidth||N.offsetHeight<N.scrollHeight)break}while(N=N.parentNode)}N&&(r=N,o=N.getBoundingClientRect(),i=(ne(o.right-p)<=d)-(ne(o.left-p)<=d),a=(ne(o.bottom-f)<=d)-(ne(o.top-f)<=d)),i||a||(i=(g-p<=d)-(p<=d),a=(h-f<=d)-(f<=d),(i||a)&&(r=z)),V.vx===i&&V.vy===a&&V.el===r||(V.el=r,V.vx=i,V.vy=a,clearInterval(V.pid),r&&(V.pid=setInterval(function(){if(l=a?a*u:0,s=i?i*u:0,"function"==typeof _)return _.call(c,s,l,e);r===z?z.scrollTo(z.pageXOffset+s,z.pageYOffset+l):(r.scrollTop+=l,r.scrollLeft+=s)},24)))}},30),se=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,r){var o=r.options.group.name;return t?e:e&&(e.join?e.indexOf(o)>-1:o==e)}}var n={},r=e.group;r&&"object"==(void 0===r?"undefined":i(r))||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n};e.prototype={constructor:e,_onTapStart:function(e){var t,r=this,o=this.el,i=this.options,a=i.preventOnFilter,s=e.type,l=e.touches&&e.touches[0],c=(l||e).target,d=e.target.shadowRoot&&e.path[0]||c,p=i.filter;if(C(o),!w&&!("mousedown"===s&&0!==e.button||i.disabled)&&(c=n(c,i.draggable,o))&&O!==c){if(t=v(c,i.draggable),"function"==typeof p){if(p.call(this,e,c,this))return u(r,d,"filter",c,o,t),void(a&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=n(d,e.trim(),o))return u(r,e,"filter",c,o,t),!0})))return void(a&&e.preventDefault());i.handle&&!n(d,i.handle,o)||this._prepareDragStart(e,l,c,t)}},_prepareDragStart:function(e,t,n,r){var o,i=this,s=i.el,c=i.options,p=s.ownerDocument;n&&!w&&n.parentNode===s&&(j=e,I=s,w=n,T=w.parentNode,A=w.nextSibling,O=n,M=c.group,R=r,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,w.style["will-change"]="transform",o=function(){i._disableDelayedDrag(),w.draggable=i.nativeDraggable,l(w,c.chosenClass,!0),i._triggerDragStart(e,t),u(i,I,"choose",w,I,R)},c.ignore.split(",").forEach(function(e){d(w,e.trim(),f)}),a(p,"mouseup",i._onDrop),a(p,"touchend",i._onDrop),a(p,"touchcancel",i._onDrop),a(p,"pointercancel",i._onDrop),a(p,"selectstart",i),c.delay?(a(p,"mouseup",i._disableDelayedDrag),a(p,"touchend",i._disableDelayedDrag),a(p,"touchcancel",i._disableDelayedDrag),a(p,"mousemove",i._disableDelayedDrag),a(p,"touchmove",i._disableDelayedDrag),a(p,"pointermove",i._disableDelayedDrag),i._dragStartTimer=setTimeout(o,c.delay)):o())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),s(e,"mouseup",this._disableDelayedDrag),s(e,"touchend",this._disableDelayedDrag),s(e,"touchcancel",this._disableDelayedDrag),s(e,"mousemove",this._disableDelayedDrag),s(e,"touchmove",this._disableDelayedDrag),s(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),t?(j={target:w,clientX:t.clientX,clientY:t.clientY},this._onDragStart(j,"touch")):this.nativeDraggable?(a(w,"dragend",this),a(I,"dragstart",this._onDragStart)):this._onDragStart(j,!0);try{G.selection?setTimeout(function(){G.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(I&&w){var t=this.options;l(w,t.ghostClass,!0),l(w,t.dragClass,!1),e.active=this,u(this,I,"start",w,I,R)}else this._nulling()},_emulateDragOver:function(){if(H){if(this._lastX===H.clientX&&this._lastY===H.clientY)return;this._lastX=H.clientX,this._lastY=H.clientY,ee||c(x,"display","none");var e=G.elementFromPoint(H.clientX,H.clientY),t=e,n=ie.length;if(t)do{if(t[W]){for(;n--;)ie[n]({clientX:H.clientX,clientY:H.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);ee||c(x,"display","")}},_onTouchMove:function(t){if(j){var n=this.options,r=n.fallbackTolerance,o=n.fallbackOffset,i=t.touches?t.touches[0]:t,a=i.clientX-j.clientX+o.x,s=i.clientY-j.clientY+o.y,l=t.touches?"translate3d("+a+"px,"+s+"px,0)":"translate("+a+"px,"+s+"px)";if(!e.active){if(r&&re(ne(i.clientX-this._lastX),ne(i.clientY-this._lastY))<r)return;this._dragStarted()}this._appendGhost(),$=!0,H=i,c(x,"webkitTransform",l),c(x,"mozTransform",l),c(x,"msTransform",l),c(x,"transform",l),t.preventDefault()}},_appendGhost:function(){if(!x){var e,t=w.getBoundingClientRect(),n=c(w),r=this.options;x=w.cloneNode(!0),l(x,r.ghostClass,!1),l(x,r.fallbackClass,!0),l(x,r.dragClass,!0),c(x,"top",t.top-Y(n.marginTop,10)),c(x,"left",t.left-Y(n.marginLeft,10)),c(x,"width",t.width),c(x,"height",t.height),c(x,"opacity","0.8"),c(x,"position","fixed"),c(x,"zIndex","100000"),c(x,"pointerEvents","none"),r.fallbackOnBody&&G.body.appendChild(x)||I.appendChild(x),e=x.getBoundingClientRect(),c(x,"width",2*t.width-e.width),c(x,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,r=this.options;this._offUpEvents(),M.checkPull(this,this,w,e)&&(k=S(w),k.draggable=!1,k.style["will-change"]="",c(k,"display","none"),l(k,this.options.chosenClass,!1),I.insertBefore(k,w),u(this,I,"clone",w)),l(w,r.dragClass,!0),t?("touch"===t?(a(G,"touchmove",this._onTouchMove),a(G,"touchend",this._onDrop),a(G,"touchcancel",this._onDrop),a(G,"pointermove",this._onTouchMove),a(G,"pointerup",this._onDrop)):(a(G,"mousemove",this._onTouchMove),a(G,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",r.setData&&r.setData.call(this,n,w)),a(G,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(r){var o,i,a,s,l=this.el,d=this.options,u=d.group,f=e.active,m=M===u,v=!1,b=d.sort;if(void 0!==r.preventDefault&&(r.preventDefault(),!d.dragoverBubble&&r.stopPropagation()),!w.animated&&($=!0,f&&!d.disabled&&(m?b||(s=!I.contains(w)):U===this||(f.lastPullMode=M.checkPull(this,f,w,r))&&u.checkPut(this,f,w,r))&&(void 0===r.rootEl||r.rootEl===this.el))){if(ae(r,d,this.el),te)return;if(o=n(r.target,d.draggable,l),i=w.getBoundingClientRect(),U!==this&&(U=this,v=!0),s)return t(f,!0),T=I,void(k||A?I.insertBefore(w,k||A):b||I.appendChild(w));if(0===l.children.length||l.children[0]===x||l===r.target&&h(l,r)){if(0!==l.children.length&&l.children[0]!==x&&l===r.target&&(o=l.lastElementChild),o){if(o.animated)return;a=o.getBoundingClientRect()}t(f,m),!1!==p(I,l,w,i,o,a,r)&&(w.contains(l)||(l.appendChild(w),T=l),this._animate(i,w),o&&this._animate(a,o))}else if(o&&!o.animated&&o!==w&&void 0!==o.parentNode[W]){F!==o&&(F=o,D=c(o),B=c(o.parentNode)),a=o.getBoundingClientRect();var y=a.right-a.left,E=a.bottom-a.top,S=q.test(D.cssFloat+D.display)||"flex"==B.display&&0===B["flex-direction"].indexOf("row"),C=o.offsetWidth>w.offsetWidth,O=o.offsetHeight>w.offsetHeight,N=(S?(r.clientX-a.left)/y:(r.clientY-a.top)/E)>.5,L=o.nextElementSibling,_=!1;if(S){var R=w.offsetTop,P=o.offsetTop;_=R===P?o.previousElementSibling===w&&!C||N&&C:o.previousElementSibling===w||w.previousElementSibling===o?(r.clientY-a.top)/E>.5:P>R}else v||(_=L!==w&&!O||N&&O);var j=p(I,l,w,i,o,a,r,_);!1!==j&&(1!==j&&-1!==j||(_=1===j),te=!0,setTimeout(g,30),t(f,m),w.contains(l)||(_&&!L?l.appendChild(w):o.parentNode.insertBefore(w,_?L:o)),T=w.parentNode,this._animate(i,w),this._animate(a,o))}}},_animate:function(e,t){var n=this.options.animation;if(n){var r=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),c(t,"transition","none"),c(t,"transform","translate3d("+(e.left-r.left)+"px,"+(e.top-r.top)+"px,0)"),t.offsetWidth,c(t,"transition","all "+n+"ms"),c(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){c(t,"transition",""),c(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;s(G,"touchmove",this._onTouchMove),s(G,"pointermove",this._onTouchMove),s(e,"mouseup",this._onDrop),s(e,"touchend",this._onDrop),s(e,"pointerup",this._onDrop),s(e,"touchcancel",this._onDrop),s(e,"pointercancel",this._onDrop),s(e,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;clearInterval(this._loopId),clearInterval(V.pid),clearTimeout(this._dragStartTimer),s(G,"mousemove",this._onTouchMove),this.nativeDraggable&&(s(G,"drop",this),s(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&($&&(t.preventDefault(),!r.dropBubble&&t.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),I!==T&&"clone"===e.active.lastPullMode||k&&k.parentNode&&k.parentNode.removeChild(k),w&&(this.nativeDraggable&&s(w,"dragend",this),f(w),w.style["will-change"]="",l(w,this.options.ghostClass,!1),l(w,this.options.chosenClass,!1),u(this,I,"unchoose",w,I,R),I!==T?(P=v(w,r.draggable))>=0&&(u(null,T,"add",w,I,R,P),u(this,I,"remove",w,I,R,P),u(null,T,"sort",w,I,R,P),u(this,I,"sort",w,I,R,P)):w.nextSibling!==A&&(P=v(w,r.draggable))>=0&&(u(this,I,"update",w,I,R,P),u(this,I,"sort",w,I,R,P)),e.active&&(null!=P&&-1!==P||(P=R),u(this,I,"end",w,I,R,P),this.save()))),this._nulling()},_nulling:function(){I=w=T=x=A=k=O=N=L=j=H=$=P=F=D=U=M=e.active=null,oe.forEach(function(e){e.checked=!0}),oe.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":w&&(this._onDragOver(e),o(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,o=0,i=r.length,a=this.options;o<i;o++)e=r[o],n(e,a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||m(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,o){var i=r.children[o];n(i,this.options.draggable,r)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&se(n)},destroy:function(){var e=this.el;e[W]=null,s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),s(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(s(e,"dragover",this),s(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),ie.splice(ie.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},a(G,"touchmove",function(t){e.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Q={capture:!1,passive:!1}}}))}catch(e){}return e.utils={on:a,off:s,css:c,find:d,is:function(e,t){return!!n(e,t,e)},extend:E,throttle:y,closest:n,toggleClass:l,clone:S,index:v},e.create=function(t,n){return new e(t,n)},e.version="1.6.0",e})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.altSettings,n=void 0,r=void 0,o=void 0,a=function(n){var r=e.update;t=Object.assign({},t,n),r(t)};this.disable=function(e){[n,r].forEach(function(t){t&&t.disable&&t.enable&&(e?t.disable():t.enable())})},this.render=function(){var t=e.altSettings,l=t.positionSettings,d=t.backgroundColor,p=(t.textColor,t.text,t.showTooltipArrow),g=e.disabled;n=new s.default({disabled:g,labelText:"Background Color",initialValue:d,colorChangeCallback:function(e){return a({backgroundColor:e})}}),r=new u.default({disabled:g,positionSettings:l,update:function(e){return a({positionSettings:e})}}),o=new f.default({disabled:g,labelText:"Show pointer",checked:p,checkCallback:function(e){return a({showTooltipArrow:e})}});var h=new c.default({labelText:"Tooltip Settings"}),m="apt-alt-settings";return e.className&&(m+=" "+e.className),(0,i.createElement)("div",m,null,[h.render(),(0,i.createElement)("div","apt-alt-settings-section",null,[n.render(),(0,i.createElement)("div","apt-inline",null,[o.render()]),r.render()])])},this.getData=function(){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(0),a=n(81),s=r(a),l=n(60),c=r(l),d=n(176),u=r(d),p=n(59),f=r(p)},function(e,t,n){"use strict";function r(e){function t(e,t){function n(e){e=e||window.event,e.target.classList.add("dragging"),l=e.clientX,c=e.clientY,(0,a.addEventListener)(document,"mouseup",o),(0,a.addEventListener)(document,"mousemove",r)}function r(t){t=t||window.event,i=l-t.clientX,s=c-t.clientY,l=t.clientX,c=t.clientY,e.style.top=e.offsetTop-s+"px",e.style.left=e.offsetLeft-i+"px"}function o(e){e.target.classList.remove("dragging"),(0,a.removeEventListener)(document,"mouseup",o),(0,a.removeEventListener)(document,"mousemove",r)}var i=0,s=0,l=0,c=0;t?(0,a.addEventListener)(t,"mousedown",n):(0,a.addEventListener)(e,"mousedown",n)}function n(){u=(0,a.createElement)("div",["apt-action-button","apt-editor-dialog-main-button","apt-guide-settings-save-btn"],{text:"Apply"}),p=(0,a.createElement)(l,["apt-action-button","apt-guide-settings-cancel-btn"],{text:"Cancel"});var e=(0,a.createElement)(l,["apt-editor-dialog-header","apt-drag-point"],void 0,[(0,a.createElement)(l,["apt-editor-dialog-title",x],{text:T}),u,p]),n=(0,a.createElement)(l,["apt-dialog-content"],{},g);(0,a.appendElements)(this.contentEl,[e,n]),f=!1,(0,a.addEventListener)(p,"click",function(){f=!0,c()}),(0,a.addEventListener)(u,"click",function(){v(),c()}),t(this.contentEl,T)}function r(){if(h&&h(),(0,s.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex"),this.contentEl.classList.add("apt-dialog"),this.contentEl.classList.add(k),this.contentEl.classList.add("apt-popup"),this.contentEl.style.height=S,this.contentEl.style.width=y,this.rootEl.querySelector(".vex-overlay").remove(),this.rootEl.style.zIndex=2147483647,n.call(this),w&&["RIGHT","LEFT","CENTER"].indexOf(w)>-1)switch(w){case"RIGHT":this.contentEl.style.left=window.innerWidth-this.contentEl.clientWidth-20+"px";break;case"LEFT":this.contentEl.style.left="20px";break;case"CENTER":Object.assign(this.contentEl.style,{margin:"0 auto",top:"160px",bottom:0,left:0,right:0})}}function o(){m&&m(f)}function c(){d.close()}var d=void 0,u=void 0,p=void 0,f=void 0,g=e.children,h=e.openCallback,m=e.closeCallback,v=e.saveCallback,b=e.width,y=void 0===b?"400px":b,E=e.height,S=void 0===E?"400px":E,C=e.position,w=void 0===C?"CENTER":C,T=e.header,x=e.classIcon,k=e.className;this.render=function(){d=i.default.open({appendLocation:(0,s.getConfig)("framesetMode")?"html":"body",showCloseButton:!1,afterOpen:r,afterClose:o})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(39),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(0),s=n(2);i.default.defaultOptions.className="vex-theme-os";var l="div"},function(e,t,n){"use strict";function r(e){var t=e.text,n=(0,o.createElement)("span","apt-error",{text:t});this.show=function(){n.classList.remove("hide")},this.hide=function(){n.classList.add("hide")},this.render=function(){return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(){var t=e.settings,n=t.enabled,r=t.hoverBackgroundColor,o=t.hoverBackgroundFill,i=(t.hoverBorderColor,t.hoverTextColor),a=e.disabled,c=e.onChange;l=new s.default({disabled:a||!n,labelText:"Background Color",initialValue:r,colorChangeCallback:function(e){return c({enableSkip:h.getChecked()})}}),d=new s.default({disabled:a||!n,labelText:"Text Color",initialValue:i,colorChangeCallback:function(e){return c({enableSkip:h.getChecked()})}}),g=new u.default({text:"Fill",unitsText:"%",min:0,max:100,labelInline:!1,initialValue:o||0,changeCallback:c,disabled:a||!n})}var n=!1,r=e.settings,o=void 0,a=void 0,l=void 0,d=void 0,p=void 0,g=void 0,h=void 0;this.disable=function(e){[o,positionSettingsSection].forEach(function(t){t&&t.disable&&t.enable&&(e?t.disable():t.enable())})},this.render=function(){var r=e.settings,m=r.enabled,v=r.textColor,b=r.backgroundColor,y=r.backgroundFill,E=(r.borderColor,r.cornerRadius,e.disabled),S=e.onChange;t(),o=new s.default({disabled:E||!m,labelText:"Background Color",initialValue:b,colorChangeCallback:function(e){return S({enableSkip:h.getChecked()})}}),a=new s.default({disabled:E||!m,labelText:"Text Color",initialValue:v,colorChangeCallback:function(e){return S({enableSkip:h.getChecked()})}});var C=new c.default({labelText:"Skip Button"}),w="apt-alt-settings";e.className&&(w+=" "+e.className),p=new u.default({text:"Fill",unitsText:"%",min:0,max:100,labelInline:!1,initialValue:y||0,changeCallback:function(e){return S({enableSkip:h.getChecked()})},disabled:E||!m}),h=new f.default({hasLine:!0,labelText:'Show "Skip" button',checkCallback:function(e){o.toggle(),a.toggle(),l.toggle(),d.toggle(),p.toggle(),g.toggle(),S({enableSkip:e})},checked:m,disabled:E});var T=(0,i.createElement)("div",w,null,[C.render(),(0,i.createElement)("div","apt-alt-settings-section",null,[h.render(),(0,i.createElement)("div",null,null,[o.render(),p.render()]),(0,i.createElement)("div",null,null,[a.render()]),(0,i.createElement)("div","apt-step-button-hover",{text:"Hover"}),(0,i.createElement)("div",null,null,[l.render(),g.render()]),(0,i.createElement)("div",null,null,[d.render()])])]);return n=!0,T},this.getData=function(){return Object.assign(r,{enabled:h.getChecked(),textColor:a.getValue(),backgroundColor:o.getValue(),backgroundFill:p.getValue(),hoverBackgroundColor:l.getValue(),hoverBackgroundFill:g.getValue(),hoverTextColor:d.getValue()})},this.isRendered=function(){return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(0),a=n(81),s=r(a),l=n(60),c=r(l),d=n(82),u=r(d),p=n(59),f=r(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e,t,n){function o(e){var t=(0,r.createElement)("div","apt-dropdown-option",{text:e.label,dataAtt:[{name:"data-value",value:e.value},{name:"data-name",value:e.label}]});return n.width&&(t.style.width=n.width),n.backgroundColor&&(t.style.backgroundColor=n.backgroundColor),n.color&&(t.style.color=n.color),e.selected&&i(e,!0),(0,r.addEventListener)(t,"click",function(e){var t=e.target;a({label:t.getAttribute("data-name"),value:t.getAttribute("data-value")})}),t}function i(e,t){var o=g.querySelector(".apt-dropdown-option-selected");o&&o.classList.remove("apt-dropdown-option-selected"),g.querySelectorAll(".apt-dropdown-option").forEach(function(t){t.getAttribute("data-value")===e.value&&t.classList.add("apt-dropdown-option-selected")}),u=e,h.innerHTML="",h.appendChild((0,r.createElement)("span",null,{text:e.label})),!t&&s(null,!0),n.onChange&&n.onChange(u)}function a(e){var t=u;i(e),t.value!=e.value&&n.selectedHandler&&n.selectedHandler(u,n.selectedHandlerData)}function s(e,t){if(!f){(t&&1==p||!t)&&(p=1-p,g.classList.toggle("apt-dropdown-content-show"),v.classList.toggle("apt-dropdown-show"),m.classList.toggle("apt-dropdown-content-show"))}}function l(){f=!0,h.classList.add("apt-disabled")}function c(){f=!1,h.classList.remove("apt-disabled")}var d=e,u=null,p=0,f=!1,g=(0,r.createElement)("div","apt-dropdown-content"),h=(0,r.createElement)("div","apt-dropdown-label"),m=(0,r.createInput)("text","apt-dropdown-entry-input",null,"New label..."),v=(0,r.createElement)("div","apt-dropdown",null,[h,m,g]);n=n||{},v.id=d,n.className&&v.classList.add(n.className),f=n.disabled||f,(0,r.addEventListener)(document,"click",function(e){(0,r.hasParentField)(e.target,"id",d)||s(null,!0)}),n.width&&(m.style.width=g.style.width=h.style.width=n.width),n.backgroundColor&&(m.style.backgroundColor=g.style.backgroundColor=h.style.backgroundColor=n.backgroundColor),n.color&&(m.style.color=h.style.color=g.style.color=n.color),t.forEach(function(e){var t=o(e);g.appendChild(t)}),!u&&i(t[0],!0),(0,r.addEventListener)(h,"click",s),(0,r.addEventListener)(m,"keyup",function(e){if(13==e.keyCode){var t={label:m.value,value:m.value},n=o(t);g.appendChild(n),i(t)}}),f&&l(),this.getSelected=function(){return u},this.getSelectedValue=function(){return u?u.value:null},this.render=function(){return v},this.remove=function(){v.remove()},this.enable=function(){c()},this.disable=function(){l()},this.select=function(e){g.querySelectorAll(".apt-dropdown-option").forEach(function(t){t.getAttribute("data-value")===e&&i({label:t.getAttribute("data-name"),value:t.getAttribute("data-value")})})}};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=function(){function e(t){r(this,e),this.tabsMap={},this.tabContentParent=t.tabContentParent,this.stopPropagation=t&&!!t.stopPropagation}return o(e,[{key:"addTab",value:function(e,t,n,r){this.tabsMap[e]={id:e,title:t,titleClasses:n,content:r}}},{key:"render",value:function(){var e=this;this.tabsContainer=(0,i.createElement)("div",["apt-component-tabs"]);var t=[];for(var n in this.tabsMap){var r=this.tabsMap[n],o=(0,i.createElement)("div",["apt-component-tab"]),a=(0,i.createElement)("label",r.titleClasses,{text:r.title,dataAtt:[{name:"data-name",value:r.id}]}),s=(0,i.createInput)("radio",void 0,void 0,void 0,!1,!1,{name:r.id});(0,i.appendElements)(o,[s,a]),t.push(o),(0,i.addEventListener)(a,"click",function(t){var n=t.target.getAttribute("data-name");e.setTab(n)}),this.stopPropagation&&(0,i.addStopClickListeners)([a])}return(0,i.appendElements)(this.tabsContainer,t),t[0]&&t[0].click(),this.tabsContainer}},{key:"setTab",value:function(e){var t=this.tabsMap[e],n=this.tabsContainer.querySelector("input[checked=true]"),r=this.tabsContainer.querySelector("input[data-name="+e+"]");n&&n.removeAttribute("checked"),r&&r.setAttribute("checked",!0),this.tabContentParent.innerHTML="",(0,i.appendElements)(this.tabContentParent,[t.content])}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){var t=e.selector,n=e.config,r=e.events,a=(l[t],i(t)),c=function(e){return a.froalaEditor(e)};return s.enter=i.FroalaEditor.ENTER_DIV,c(Object.assign({},s,n)),l[t]=!0,r.forEach(function(e){var t=o(e,2),n=t[0],r=t[1];a.on("froalaEditor."+n,r)}),c}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.setBadgeTooltipFroala=r;var i=n(28),a=["bold","italic","underline","strikeThrough","color","emoticons","-","paragraphFormat","align","formatOL","formatUL","indent","outdent","fontFamily","fontSize","-","insertImage","insertLink","insertFile","insertVideo","undo","redo"],s={zIndex:2147483647,toolbarInline:!0,toolbarButtons:a,toolbarButtonsMD:a,toolbarButtonsSM:a,toolbarButtonsXS:a,fontFamilySelection:!0,fontFamily:{"Roboto,sans-serif":"Roboto","Roboto Slab":"Roboto Slab","Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","'Times New Roman',Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontSizeSelection:!0,imageOutputSize:!0},l={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.engagementTrigger,n=e.altSettings,r=e.standalone,o=n&&n.enabled,i=n&&n.text,a="ON_CLICK"===t;return!(i&&(r||a)&&o)}function i(e,t){function n(){if(f=new s.default({tabContentParent:_,stopPropagation:!0}),"BADGE"===A){var e=g.default.getCurrentEditedStep();x=new b.default({disabled:o(e),className:"apt-badge-settings",altSettings:Object.assign({},e.altSettings),update:function(e){return t.updateBadgeTooltip({altSettings:e},"altSettings")}}),T=new m.default({badge:Object.assign({},e),update:function(e,n){t.updateBadgeTooltip(e,n),o(e)?x.disable(!0):x.disable(!1)}}),x=new b.default({className:"apt-badge-settings",altSettings:Object.assign({},e.altSettings),update:function(e){return t.updateBadgeTooltip({altSettings:e},"altSettings")}});var n=N[0],r=N[1];f.addTab(n.key,n.label,"",T.render()),f.addTab(r.key,r.label,"",x.render())}else{var i=O[0],a=O[1],l={hasNavigation:"NAVIGATION_CLICK"===I.nextStepTrigger,isBarView:"BAR"===I.dialogViewType};C=new d.default(A,t,l),f.addTab(i.key,i.label,"",C.render()),w=new p.default(A,t),f.addTab(a.key,a.label,"",w.render())}return f}function r(){h=(0,l.createElement)("div",["apt-action-button","apt-editor-dialog-main-button","apt-guide-settings-save-btn"],{text:"Apply"}),v=(0,l.createElement)("div",["apt-action-button","apt-guide-settings-cancel-btn"],{text:"Cancel"});var e=(0,l.createElement)("div",["apt-editor-dialog-header","apt-drag-point"],void 0,[(0,l.createElement)("div",["apt-editor-dialog-title","apt-edit-settings-icon"],{text:"Step Settings"}),h,v]);(0,l.appendElements)(this.contentEl,[e,n().render(),_]),F=!1,(0,l.addEventListener)(v,"click",function(){F=!0,D()}),(0,l.addEventListener)(h,"click",function(){var e=void 0,t=!0;if("BADGE"===A){var n=Object.assign({},T.getData()),r=Object.assign({},x.getData());e=Object.assign({},n,{altSettings:r})}else{t=C.isValid();var o=C.getData(),i=w.getData();e=Object.assign({},o,i)}t&&(u(e,A),D())}),(0,l.addStopClickListeners)([h,v]),(0,l.makeDraggable)(this.contentEl,e)}var i=this;if(!e||!e.saveCallback)throw new Error("cannot initialize without save callback");if(!e||!e.stepSettings)throw new Error("cannot initialize without step settings");var a=e&&e.afterOpen?e.afterOpen:null,c=e&&e.afterClose?e.afterClose:null,u=e&&e.saveCallback,f=void 0,h=void 0,v=void 0,C=null,w=null,T=null,x=null,k=g.default.getCurrentEditedStep(),I=Object.assign(k,g.default.getAppliedStepData(k.id)),A=I.type,O=[{key:"SETTINGS",label:"Settings"},{key:"NAVIGATION",label:"Navigation"}],N=[{key:"BADGE_SETTINGS",label:"Badge settings"},{key:"BADGE_TOOLTIP_SETTINGS",label:"Tooltip settings"}],L="BADGE"===A?N[0].key:O[0].key,_=(0,l.createElement)(S,["aptr-settings-dialog-content"]);this.dialogContent=_;var F=void 0,D=function(){i.dialog.close(),C&&C.close()},B=function(){return i.dialog&&i.dialog.isOpen},R=function(e){i.dialog=void 0,B()||(i.dialog=E.open({appendLocation:(0,y.getConfig)("framesetMode")?"html":"body",enableModalBodyScroll:(0,y.getConfig)("enableModalBodyScroll"),showCloseButton:!1,afterOpen:function(){if(a&&a(),(0,y.getBody)().classList.add("apt-vex"),this.rootEl.classList.add("apt-vex"),this.contentEl.classList.add("apt-guide-settings-dialog"),this.contentEl.classList.add("apt-popup"),this.rootEl.querySelector(".vex-overlay").remove(),this.rootEl.style.zIndex=2147483647,r.call(this),f.setTab(L),e&&["RIGHT","LEFT"].indexOf(e)>-1)switch(e){case"RIGHT":this.contentEl.style.left=window.innerWidth-this.contentEl.clientWidth-20+"px";break;case"LEFT":this.contentEl.style.left="20px"}},afterClose:function(){c&&c(F)}}))};this.open=function(e){R(e)},this.toggleAppearanceSettings=function(e,t){C.toggleSettings(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(195),s=r(a),l=n(0),c=n(198),d=r(c),u=n(199),p=r(u),f=n(84),g=r(f),h=n(174),m=r(h),v=n(190),b=r(v),y=n(2),E=n(31);E.defaultOptions.className="vex-theme-os";var S="div"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(){return arguments&&[].slice.call(arguments).indexOf(u)>-1}function o(){H=new x.default({name:"apt-trigger-radio",radioOptions:[{text:"Top",value:"TOP",selected:"TOP"===q.barPosition},{text:"Bottom",value:"BOTTOM",selected:"BOTTOM"===q.barPosition}],selectCallback:function(e){return K&&K.positionBarDialog(e,$.getValue())},stopPropagation:!0}),$=new d.default({text:"Bar Offset",labelInline:!0,initialValue:q.barOffset||0,changeCallback:function(e){return K&&K.positionBarDialog(H.getSelectedValue(),e)},stopPropagation:!0});var e=(0,a.createElement)("div","apt-position-cnt",null,[(0,a.createElement)("div","apt-top-left-cnt apt-inline",null,[(0,a.createElement)("div","",null,[$.render()])]),(0,a.createElement)("div","apt-inline apt-position-grid-cnt",null,[H.render()])]);return[s(),e]}function s(){return new p.default({labelText:"Position"}).render()}var c=this,u=e,f=null,h=null,v=null,y=null,C=null,T=null,k=null,I=null,A=null,O=null,N=null,L=null,_=null,F=null,D=null,B=null,R=!1,P=null,M=!0,U=null,j=null,H=null,$=null,V=null,K=t,q=m.default.getCurrentEditedStep(),W=function(e){e?(h.enable(),v.enable(),r("TOOLTIP")&&(y.enable(),M&&C.enable())):(r("TOOLTIP")&&(y.disable(),M&&C.disable()),v.disable(),h.disable()),K&&K.showOverlayFlagCallback(e),e&&K&&K.overlayColorChangeCallback(h.getValue(),v.getValue())},z=function(e){K&&K.overlayColorChangeCallback(e,v.getValue())},G=function(e){K&&K.overlayFillChangeCallback(h.getValue(),e)},Y=function(e){K&&K.stickToBadgeCallback(e)},X=function(e){K&&K.overlayPaddingChangeCallback(e)},J=function(e){K&&K.hotspotSpotColorChangeCallback(e)},Q=function(e){K&&K.hotspotRingColorChangeCallback(e)},Z=function(e){K&&K.hotspotSpotSizeChangeCallback(e)},ee=function(e){K&&K.hotspotSpotZIndexChangeCallback(e)},te=function(e){K&&K.zIndexChangeCallback(e)},ne=function(e){K&&K.hotspotAnimationDurationChangeCallback(e)},re=function(e){K&&K.hotspotAnimationCountChangeCallback(e)},oe=function(e){K&&K.positionTopChangeCallback(e,F.getValue(),D.getValue()[0],D.getValue()[1])},ie=function(e){K&&K.positionLeftChangeCallback(e,_.getValue(),D.getValue()[0],D.getValue()[1])},ae=function(e,t){if(K){return K.positionChangeCallback(e,t,_.getValue(),F.getValue())}return!1},se=function(e,t){return K&&K.updateBadgeTooltip(e,t),!1};this.getData=function(){if(r("BADGE")){return B.getValues()}return R?{name:j&&j.getValue(),modal:r("TOOLTIP","DIALOG")?f.getChecked():null,overlayColor:r("TOOLTIP","DIALOG")?h.getValue():null,overlayFill:r("TOOLTIP","DIALOG")?v.getValue():null,overlayPadding:r("TOOLTIP")?y.getValue():null,overlayBlockElement:r("TOOLTIP")?C.getChecked():null,hotspotSpotColor:r("HOTSPOT")?T.getValue():null,hotspotAnimatedColor:r("HOTSPOT")?k.getValue():null,hotspotSpotSize:r("HOTSPOT")?I.getValue():null,zindex:r("HOTSPOT","TOOLTIP")?A.getValue():null,hotspotAnimationDuration:r("HOTSPOT")?O.getValue():null,hotspotAnimationDelay:r("HOTSPOT")?N.getValue():null,hotspotAnimationCount:r("HOTSPOT")?L.getValue():null,positionTopDelta:"DIALOG"===q.dialogViewType?_.getValue():null,positionLeftDelta:"DIALOG"===q.dialogViewType?F.getValue():null,positionVertical:"DIALOG"===q.dialogViewType?D.getValue()[0]:null,positionHorizontal:"DIALOG"===q.dialogViewType?D.getValue()[1]:null,stickToBadge:null,repositionInterval:r("TOOLTIP","HOTSPOT")?U.getValue():null,barPosition:null!==H?H.getSelectedValue():null,barOffset:null!==$?$.getValue():null,disableTransitionEffect:V&&V.getChecked()}:{}},this.getPositionSettingsContainer=function(){var e=q.positionVertical,t=q.positionHorizontal,n=q.positionTopDelta,o=q.positionLeftDelta;_=new d.default({text:"Top",unitsText:"px",labelInline:!0,initialValue:n,changeCallback:oe,stopPropagation:!0}),F=new d.default({text:"Left",unitsText:"px",labelInline:!0,initialValue:o,changeCallback:ie,stopPropagation:!0}),D=new b.default({disabledIndex:r("TOOLTIP","HOTSPOT","BADGE")&&[[1,1]],value:[e,t],checkCallback:ae}),A=new d.default({text:"z-index",labelInline:!0,initialValue:q.zindex,changeCallback:r("HOTSPOT")?ee:te});var i=[(0,a.createElement)("div","",null,[_.render()]),(0,a.createElement)("div","",null,[F.render()])];return r("HOTSPOT","TOOLTIP")&&i.push((0,a.createElement)("div","",null,[A.render()])),[s(),(0,a.createElement)("div","apt-position-cnt",null,[(0,a.createElement)("div","apt-top-left-cnt apt-inline",null,i),(0,a.createElement)("div","apt-inline apt-position-grid-cnt",null,[D.render()])])]},this.renderStickToBadge=function(){var e=m.default.getBadge(),t=e&&e.qualificationScope&&e.qualificationScope.qualificationScopeType;return P=new g.default({disabled:"ONCE"===t,hasLine:!0,labelText:"Associate tooltip to Badge",checkCallback:Y,checked:q.stickToBadge}),P.render()},this.close=function(){r("TOOLTIP","DIALOG")&&h&&h.disable(),r("HOTSPOT")&&T&&T.disable(),r("HOTSPOT")&&k&&k.disable()},this.isValid=function(){return!(r("TOOLTIP","HOTSPOT")&&!U.isValid())},this.toggleSettings=function(e,t){switch(e){case"overlayBlock":M=t,t&&f.getChecked()?C.enable():C.disable()}},this.render=function(){f=new g.default({hasLine:!0,labelText:"Override existing",checkCallback:W,checked:q.modal,stopPropagation:!0}),h=new l.default({labelText:"Color",labelInline:!0,colorChangeCallback:z,initialValue:q.overlayColor?q.overlayColor:"#696969",disabled:!q.modal}),v=new d.default({text:"Fill",unitsText:"%",min:0,max:100,labelInline:!0,initialValue:q.overlayFill?q.overlayFill:0,disabled:!q.modal,changeCallback:G,stopPropagation:!0}),y=new d.default({text:"Padding",unitsText:"px",min:0,labelInline:!0,initialValue:q.overlayPadding?q.overlayPadding:0,disabled:!q.modal,changeCallback:X,stopPropagation:!0}),C=new g.default({hasLine:!0,labelText:"Block highlight",checked:q.overlayBlockElement,stopPropagation:!0,disabled:!n.hasNavigation||!q.modal}),M=n.hasNavigation,T=new l.default({labelText:"Spot Color",initialValue:q.hotspotSpotColor,colorChangeCallback:J}),k=new l.default({labelText:"Ring Color",initialValue:q.hotspotAnimatedColor,colorChangeCallback:Q}),I=new d.default({text:"Spot Size",unitsText:"px",min:1,initialValue:q.hotspotSpotSize,changeCallback:Z}),O=new d.default({text:"Animation Duration",unitsText:"ms",min:0,initialValue:q.hotspotAnimatedDuration,changeCallback:ne}),N=new d.default({text:"Animation Delay",unitsText:"ms",initialValue:q.hotspotAnimationDelay,min:0}),L=new d.default({text:"Animation Count",unitsText:"times",min:1,placeholder:"Infinite",additionalClassesArray:["apt-hotspot-animation-count"],initialValue:q.hotspotAnimationCount,changeCallback:re}),U=new d.default({text:"Reposition interval",min:100,max:2e4,labelInline:!0,initialValue:q.repositionInterval>99?q.repositionInterval:1e3,stopPropagation:!0,showErrorText:!0,overrideInvalidValue:!1});var e=void 0,t=void 0;if(r("DIALOG","TOOLTIP","HOTSPOT"))if("DIALOG"===u&&n.isBarView){var s=o(),m=i(s,2);e=m[0],t=m[1]}else{var b=c.getPositionSettingsContainer(),x=i(b,2);e=x[0],t=x[1]}else r("BADGE")&&(B=new E.default({badge:Object.assign({},q),update:se}));j=new w.default({initialValue:q.name}),V=new g.default({hasLine:!0,labelText:"Disable Transition Effect",checked:q.disableTransitionEffect,stopPropagation:!0});var A=(0,a.createElement)("div","",null,[new p.default({labelText:"Step Name"}).render(),j.render(),r("TOOLTIP","DIALOG")&&(0,a.createElement)("div","",null,[new p.default({labelText:"Overlay"}).render(),f.render(),h.render(),v.render(),r("TOOLTIP")&&y.render(),r("TOOLTIP")&&C.render(),r("DIALOG")&&V.render(),e,t,r("TOOLTIP")&&U.render(),!1]),r("BADGE")&&(0,a.createElement)("div","",null,[B.render()]),r("HOTSPOT")&&(0,a.createElement)("div","",null,[new p.default({labelText:"Hotspot"}).render(),(0,a.createElement)("div","",null,[I.render(),T.render(),k.render()]),new p.default({labelText:"Animation"}).render(),(0,a.createElement)("div","",null,[O.render(),L.render(),N.render()]),e,t,U.render()])]);return r("TOOLTIP")&&(0,S.addTooltipToElements)([[C.getElement(),{content:"Using this option will block the user clicks on the highlighted element"}]]),R=!0,A}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=o;var a=n(0),s=n(81),l=r(s),c=n(82),d=r(c),u=n(60),p=r(u),f=n(59),g=r(f),h=n(84),m=r(h),v=n(175),b=r(v),y=n(174),E=r(y),S=n(41),C=n(177),w=r(C),T=n(83),x=r(T)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function n(){return arguments&&[].slice.call(arguments).indexOf(S)>-1}function r(e){return["ELEMENT_CLICK","ELEMENT_HOVER","INPUT_TEXT_COMPLETION"].indexOf(e)>-1}function o(e){switch(e){case"HOTSPOT":return"Hotspot";case"TOOLTIP":return"Tooltip";case"DIALOG":return"Dialog"}}function a(e){var t=F.getData();C&&C.skipCallback&&C.skipCallback(e,t)}function l(e,t){if(!e)return t?"apt-trigger-target-el":"apt-trigger-next";switch(e){case g:return"apt-trigger-next";case m:return"apt-trigger-target-el";case b:return"apt-trigger-target-hover";case p:return"apt-trigger-input";default:return"apt-trigger-next"}}var d=this,p="INPUT_TEXT_COMPLETION",g="NAVIGATION_CLICK",m="ELEMENT_CLICK",b="ELEMENT_HOVER",S=e,C=t,w=null,T=null,x=null,k=null,I=null,A=null,O=null,N=void 0,L=null,_=null,F=null,D=null,B=h.default.isLastStep(),R=(h.default.isFirstStep(),null),P=!1,M=null,U=h.default.getCurrentEditedStep(),j=h.default.getSteps(),H=j.find(function(e){return"DIALOG"===e.type||"TOOLTIP"===e.type}),$=H&&H.sequenceNumber,V=$===U.sequenceNumber,K=!1,q=function(e){I.style.display="SHOW_NEXT"===e?"none":"","SHOW_ON_NEXT_PAGE"===e&&w.getSelectedValue()===m?I.value&&""!==I.value||(I.value="*"):w.getSelectedValue()&&"*"===I.value&&(I.value="")},W=function(e){switch(e){case g:N.classList.remove("apt-trigger-target-el"),N.classList.remove("apt-trigger-input"),N.classList.remove("apt-trigger-target-hover"),N.classList.add("apt-trigger-next"),D.innerText="When the navigation element is clicked",U.sequenceNumber>0&&(x.style.display="block"),k.addOption({label:"The guide will automatically redirect the page to",value:"REDIRECT",selected:"REDIRECT"===U.nextButtonAction}),k.removeOption("SHOW_ON_NEXT_PAGE"),B&&(R.style.display="block"),q(k.getSelected().value),B&&(D.style.display="none",M.style.display="none");break;case m:N.classList.remove("apt-trigger-next"),N.classList.remove("apt-trigger-input"),N.classList.remove("apt-trigger-target-hover"),N.classList.add("apt-trigger-target-el"),D.innerText="When the target element is clicked",x.style.display="none",k.addOption({label:"The guide will automatically redirect the page to",value:"REDIRECT",selected:"REDIRECT"===U.nextButtonAction}),k.addOption({label:"The application will redirect the page to",value:"SHOW_ON_NEXT_PAGE",selected:"SHOW_ON_NEXT_PAGE"===U.nextButtonAction}),R&&(R.style.display="none"),B&&(D.style.display="",M.style.display="");break;case b:N.classList.remove("apt-trigger-next"),N.classList.remove("apt-trigger-target-el"),N.classList.remove("apt-trigger-input"),N.classList.add("apt-trigger-target-hover"),k.removeOption("REDIRECT"),k.removeOption("SHOW_ON_NEXT_PAGE"),q(k.getSelected().value);break;case p:N.classList.remove("apt-trigger-next"),N.classList.remove("apt-trigger-target-el"),N.classList.remove("apt-trigger-target-hover"),N.classList.add("apt-trigger-input"),k.removeOption("REDIRECT"),k.removeOption("SHOW_ON_NEXT_PAGE"),q(k.getSelected().value)}C&&C.triggerNextStepChangeCallback(e===g,T.getChecked())},z=function(e){B&&n("TOOLTIP","DIALOG")&&(e?O.enable():O.disable()),C&&C.showPrevButtonCalback(e)};this.getData=function(){var e=F&&F.isRendered()?F.getData():null,t=K?Object.assign({addElementListener:n("TOOLTIP")&&w.getSelectedValue()===m,showPreviousButton:n("TOOLTIP","DIALOG")&&T.getChecked(),nextButtonAction:k.getSelected().value,nextStepUrl:I.value,autoScroll:n("TOOLTIP","HOTSPOT")&&L.getChecked(),restartButtonText:B&&n("TOOLTIP","DIALOG")?O.getSelectedValue():null,endButtonText:B&&n("TOOLTIP","DIALOG")?A.getSelectedValue():null,hotspotElementClickTrigger:n("HOTSPOT")?_.getChecked():null}):{};return n("DIALOG","TOOLTIP")&&e&&(t.skipButton=e),n("TOOLTIP")&&(t.nextStepTrigger=w.getSelectedValue()),t},this.onChangeButtonText=function(){P&&C.updateButtonsTextCallback(O&&O.getSelectedValue(),A&&A.getSelectedValue())},this.render=function(){var t="Step "+(U.sequenceNumber+1);0===U.sequenceNumber?t="First Step":h.default.isLastStep()&&(t="Last Step");var S=new s.default({labelText:t,hasLine:!0,secondaryText:o(e)});P=n("TOOLTIP","DIALOG")&&B,w=new u.default({name:"apt-trigger-radio",radioOptions:[{text:"Use navigation bar",value:g,selected:!U.nextStepTrigger||U.nextStepTrigger===g},{text:"Click on target element",value:m,selected:U.nextStepTrigger===m},{text:"Hover on target element",value:b,selected:U.nextStepTrigger===b},{text:"Text entry submission",value:p,selected:U.nextStepTrigger===p}],selectCallback:W,stopPropagation:!0}),N=(0,i.createElement)("div","apt-inline apt-trigger-icon "+l(U.nextStepTrigger,U.addElementListener)),T=new v.default({labelText:B?'Show "Restart" button':'Show "Previous" Button',checked:U.showPreviousButton,checkCallback:z,stopPropagation:!0}),x=T.render();new s.default({labelText:"Last Step"});D=(0,i.createElement)("div"),"HOTSPOT"===e?D.innerText="When the hotspot is clicked":r(U.nextStepTrigger)&&U.addElementListener?(r(U.nextStepTrigger)||U.addElementListener)&&(D.innerText="When the target element is clicked"):D.innerText="When the navigation element is clicked",k=new c.default("clickNextDropdown",[{label:"Look for next element",value:"SHOW_NEXT",selected:"SHOW_NEXT"===U.nextButtonAction},{label:"The guide will automatically redirect the page to",value:"REDIRECT",selected:"REDIRECT"===U.nextButtonAction}],{width:"350px",stopPropagation:!0},function(e){q(e.value)}),M=k.render(),I=(0,i.createInput)("text","apt-setting-input apt-next-step-url-input",U.nextStepUrl,"Set target URL for multi-page application");var C=["End Tour","OK","Got It","Close"],j=!1,H=(0,E.arrayFrom)(C,function(e){return U.endButtonText===e&&(j=!0),{label:e,value:e,selected:e===U.endButtonText}});!j&&U.endButtonText&&H.unshift({label:U.endButtonText,value:U.endButtonText}),A=new f.default("exitButtonTextDropdown",H,{className:"apt-guide-settings",width:"230px",onChange:d.onChangeButtonText});var $=["Start Over"],G=!1,Y=(0,E.arrayFrom)($,function(e){return U.restartButtonText===e&&(G=!0),{label:e,value:e,selected:e===U.restartButtonText}});!G&&U.restartButtonText&&Y.unshift({label:U.restartButtonText,value:U.restartButtonText}),O=new f.default("restartButtonTextDropdown",Y,{className:"apt-guide-settings",width:"230px",disabled:!U.showPreviousButton,onChange:d.onChangeButtonText}),L=new v.default({labelText:"Auto scroll to this step",checked:U.autoScroll,stopPropagation:!0}),F=new y.default({settings:Object.assign({},U.skipButton),disabled:!V,onChange:a}),R=P&&(0,i.createElement)("div","",null,[(0,i.createElement)("div","apt-inline",null,[(0,i.createElement)("div","",{text:"Exit Button"}),A.render()]),(0,i.createElement)("div","apt-inline",null,[(0,i.createElement)("div","",{text:"Restart Button"}),O.render()])]),_=new v.default({labelText:"Allow click on mapped element",checked:U.hotspotElementClickTrigger,stopPropagation:!0}),n("TOOLTIP")&&W(U.nextStepTrigger?U.nextStepTrigger:U.addElementListener?m:g),q(U.nextButtonAction),x.style.display=r(U.nextStepTrigger)||U.addElementListener||0===U.sequenceNumber?"none":"block";var X=(0,i.createElement)("div","",null,[S.render(),n("TOOLTIP")&&(0,i.createElement)("div","",null,[N,(0,i.createElement)("div","apt-inline",null,[w.render()])]),(0,i.createElement)("div","",null,[(0,i.createElement)("div","apt-inline",null,[D,(0,i.createElement)("div","apt-inline",null,[M])]),(0,i.createElement)("div","apt-inline",null,[I])]),n("TOOLTIP","DIALOG")&&x,P&&R,n("TOOLTIP","HOTSPOT")&&L.render(),n("HOTSPOT")&&_.render(),n("TOOLTIP","DIALOG")&&V&&F.render()]);return K=!0,X}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(0),a=n(60),s=r(a),l=n(68),c=r(l),d=n(83),u=r(d),p=n(194),f=r(p),g=n(84),h=r(g),m=n(59),v=r(m),b=n(193),y=r(b),E=n(12)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){(0,a.setSelectorStrengthLabel)(h.documentRef.querySelector(".apt-selector-strength-val"),e)}function i(e){function t(){return F||!H.value||H.value===S?{}:{matchCssSelector:V.checked,selector:H.value,type:H[x]("data-type"),unique:document[C](H.value).length<2,matchTextRule:K.checked,htmlTextRule:{operator:q.getSelected().value,values:[W.value]}}}function n(e){return R.dialog.contentEl[w]('label[data-type="'+e+'"]')[w]("input[type=text]").value}function r(e,t,n){!function(t){e[w](".apt-smart-selector-container")[C](".apt-selector-input").forEach(function(e){var n=e.querySelector('[name="apt-smart-selector"]'),r="CUSTOM"===e.getAttribute("data-type"),o=e.querySelector(".apt-selector-text");n.disabled=t,r&&(o.disabled=t),t?e.classList.add("apt-disabled"):e.classList.remove("apt-disabled")})}(!t),function(t){var n=e[w](".apt-selector-text-rule"),r=n[w](".apt-text-rule-operator"),o=n[w](".apt-text-rule-text");t?(r.classList.add("apt-disabled"),o.classList.add("apt-disabled")):(r.classList.remove("apt-disabled"),o.classList.remove("apt-disabled"))}(!n)}function i(e){if(e.length>600)return(0,l.showMessage)("error","Css selector length must be less than 600, please provide custom selector"),!1;try{h.documentRef[C](e)}catch(e){return(0,b.toggleSelectorError)(!0),!1}return(0,b.toggleSelectorError)(!1),!0}function d(e,t){if(!F&&H.value!==S)if(e.trim()){try{h.documentRef[C](e)}catch(e){return U.updateCounter(0),t(0)}var n={matchCssSelector:V.checked,cssSelector:e,type:H[x]("data-type"),matchTextRule:K.checked,textRuleOperator:q.getSelected().value,textRuleValues:[W.value]};(0,p.findInAll)(n,(0,f.getRegisteredIframes)(),function(e){var n=0;if(e){var r=e;n=Array.isArray(e)?e.reduce(function(e,t){return e+t.count},0):r.count,U.updateCounter(n)}U.updateCounter(n),t(n)},!0,!0)}else U.updateCounter(0),t(0)}function m(e,t,n){var r=R.dialog.contentEl[w](".apt-selector-parent"),o=R.dialog.contentEl[w](".apt-selector-attribute"),i=R.dialog.contentEl[w](".apt-selector-nth");R.dialog.contentEl[w](".apt-selector-default")[w](".apt-selector-text").value=e.defaultSelector||H.value,r[w](".apt-selector-text").value=e.parent,e.attribute&&(o[w](".apt-selector-text").value=e.attribute),e.nthchild&&(i[w](".apt-selector-text").value=e.nthchild),R.dialog.contentEl[w]("input[data-type='"+t+"']").checked=!0,R.dialog.contentEl[w]("label[data-type='"+t+"']")[w]("input[type=text]").value=H.value,U.updateCounter(n)}var N=this,L=e&&e.afterOpen?e.afterOpen:null,_=e&&e.afterClose?e.afterClose:null,F=!1,D=!1,B=null,R=this,P=void 0,M=null,U=new v.default,j=(0,a.createElement)(A,["aptr-item-selector"],{text:"Selector"}),H=(0,a.createInput)("text",["aptr-item-selector-input"],void 0,"Not Selected...",!1,!1,{type:"DEFAULT"}),$=new s.SelectorStrengthManager,V=(0,a.createInput)("checkbox"),K=(0,a.createInput)("checkbox"),q=new u.default("operator1",(0,g.arrayFrom)(Object.entries(O).map(function(e){return{label:e[1].toUpperCase(),value:e[0]}})),{className:"apt-text-rule-operator",width:"135px"}),W=(0,a.createInput)("text","apt-text-rule-text");j=(0,a.appendElements)(j,[H]);var z=(0,a.createElement)(A,["aptr-guide-selector-dialog-content"]),G=(0,a.createElement)(A,["aptr-guide-selector-tabs"]),Y=(0,a.createElement)(A,["apt-guide-selector-header","apt-drag-point"]),X=(0,a.createElement)(A,["apt-guide-selector-title"],null,[(0,a.createElement)("span","",{text:"Selector editor"}),(0,b.renderMoreInfo)({color:"smoke",className:"guide-mapper"})]),J=(0,a.createElement)(A,["apt-button","apt-save-button","selected"],{text:"Apply"}),Q=(0,a.createElement)(A,["apt-button","apt-cancel-button","selected","apt-guide-selector-button"],{text:"Cancel"}),Z=(0,a.createElement)(A,["apt-selector-strength","apt-selector-strength-text"]),ee=(0,a.createElement)("span",["apt-selector-strength-val"]),te=(0,a.createElement)("div","apt-smart-selector-container",void 0,[(0,a.createElement)("div","apt-match-selector-checkbox",void 0,[V,(0,a.createElement)("div",void 0,{text:"Match CSS Selector"})]),(0,a.createElement)("label","apt-selector-input apt-selector-default",{text:"Default",dataAtt:[{name:"data-type",value:"DEFAULT"}]},[(0,a.createInputConfig)("radio",{dataAtt:{type:"DEFAULT"},otherAtt:{name:"apt-smart-selector"}}),(0,a.createElement)("span","apt-selector-type"),(0,a.createInputConfig)("text",{classes:"apt-selector-text",disabled:!0})]),(0,a.createElement)("label","apt-selector-input apt-selector-parent",{text:"Parent",dataAtt:[{name:"data-type",value:"PARENT"}]},[(0,a.createInputConfig)("radio",{dataAtt:{type:"PARENT"},otherAtt:{name:"apt-smart-selector"}}),(0,a.createElement)("span","apt-selector-type"),(0,a.createInputConfig)("text",{classes:"apt-selector-text",disabled:!0})]),(0,a.createElement)("label","apt-selector-input apt-selector-attribute",{text:"Attribute",dataAtt:[{name:"data-type",value:"ATTRIBUTE"}]},[(0,a.createInputConfig)("radio",{dataAtt:{type:"ATTRIBUTE"},otherAtt:{name:"apt-smart-selector"}}),(0,a.createElement)("span","apt-selector-type"),(0,a.createInputConfig)("text",{classes:"apt-selector-text",disabled:!0})]),(0,a.createElement)("label","apt-selector-input apt-selector-nth",{text:"Nth Child",dataAtt:[{name:"data-type",value:"NTH_CHILD"}]},[(0,a.createInputConfig)("radio",{dataAtt:{type:"NTH_CHILD"},otherAtt:{name:"apt-smart-selector"}}),(0,a.createElement)("span","apt-selector-type"),(0,a.createInputConfig)("text",{classes:"apt-selector-text",disabled:!0})]),(0,a.createElement)("label","apt-selector-input apt-selector-custom",{text:"Custom",dataAtt:[{name:"data-type",value:"CUSTOM"}]},[(0,a.createInputConfig)("radio",{dataAtt:{type:"CUSTOM"},otherAtt:{name:"apt-smart-selector"}}),(0,a.createElement)("span","apt-selector-type"),(0,a.createInputConfig)("text",{classes:"apt-selector-text"})]),(0,b.renderSelectorError)(),(0,a.createElement)("div","apt-match-selector-checkbox",void 0,[K,(0,a.createElement)("div",void 0,{text:"Match Text"})]),(0,a.createElement)("div","apt-selector-text-rule",void 0,[(0,a.createElement)("div",void 0,{text:"Element Text"}),q.render(),W])]);(0,a.appendElements)(Z,[(0,a.createElement)("span",void 0,{text:"Selector strength: "}),ee]),(0,a.appendElements)(Y,[X,Q,J]),(0,a.appendElements)(G,[te,Z,(0,a.createElement)("textarea",["apt-textarea","apt-hidden"],{rows:10,cols:50})]),(0,a.appendElements)(z,[Y,G]),this.dialogContent=z,this.checkedTab="DEFAULT";var ne=function(){N.dialog.close()},re=function(){var e=R.dialog.contentEl[w](".apt-smart-selector-container"),t=e[w]("input[type=radio]:checked"),r=t.getAttribute("data-type"),o=n(r);i(o)&&(H.value=o,H[T]("data-type",r),!H[I].contains("aptr-item-selector-input-edited")&&H[I].add("aptr-item-selector-input-edited"),V.checked=R.dialog.contentEl[C]('.apt-match-selector-checkbox > input[type="checkbox"]')[0].checked,K.checked=R.dialog.contentEl[C]('.apt-match-selector-checkbox > input[type="checkbox"]')[1].checked,W.value=R.dialog.contentEl[w](".apt-text-rule-text").value,D=!0,N.dialog.close())},oe=function(){return N.dialog&&N.dialog.isOpen},ie=function(e){R.checkedTab=e;var t=R.dialog.contentEl[w]("input[checked=true]"),n=R.dialog.contentEl[w]("input[data-name="+e+"]");t&&t.removeAttribute("checked"),n&&n[T]("checked",!0);var r={matchCssSelector:!0,cssSelector:H.value};(0,p.findInAll)(r,(0,f.getRegisteredIframes)(),function(t){var n=0;if(t){var r=t;Array.isArray(t)&&(r=t[0],n=t.reduce(function(e,t){return e+t.count},0));var i=function(t,n){M=t,m(t,e,n)};if(r.iframeData)(0,c.iframeGetDifferentSelectors)(r.iframeData,H.value,N.type,function(e){i(e[0],n)});else if(r.element){var a=M||(0,c.getDifferentSelectors)(r.element);i(a,r.count)}}else H.value&&e&&(R.dialog.contentEl[w]("input[data-type='"+e+"']").checked=!0,R.dialog.contentEl[w]("label[data-type='"+e+"']")[w]("input[type=text]").value=H.value);B=$.checkSelectorStrength(H.value,n),o(B)},!0,!0)},ae=function(e){F||(e instanceof MouseEvent&&(e=void 0),H.blur(),oe()||(N.dialog=E.open({appendLocation:(0,y.getConfig)("framesetMode")?"html":"body",unsafeContent:N.dialogContent.outerHTML,showCloseButton:!1,afterOpen:function(){var t=this;L&&L(),D=!1,(0,y.getBody)().classList.add("apt-vex"),this.rootEl[I].add("apt-vex"),this.contentEl.setAttribute("data-apt-disable-selector",!0),this.rootEl[I].add("aptr-selector-dialog"),this.contentEl[I].add("aptr-selector-popup"),this.contentEl[I].add("aptr-feature-selector-dialog"),this.contentEl.style.left=window.innerWidth-window.innerWidth/2-350+"px";var n=this.contentEl[w](".aptr-guide-selector-tabs");n&&(0,a.appendElements)(n,[U.render()]);var i=this.contentEl[C]('.apt-match-selector-checkbox > input[type="checkbox"]')[0];i.checked=V.checked;var s=this.contentEl[C]('.apt-match-selector-checkbox > input[type="checkbox"]')[1];s.checked=K.checked;var c=function(){return r(t.contentEl,i.checked,s.checked)};(0,a.addEventListener)(i,"change",function(){if(!s.checked&&!i.checked)return(0,l.showMessage)("warning","You must select at least one selector type"),i.checked=!0,!1;c()}),(0,a.addEventListener)(s,"change",function(){if(!s.checked&&!i.checked)return(0,l.showMessage)("warning","You must select at least one selector type"),s.checked=!0,!1;c()});var p=this.contentEl[w](".apt-text-rule-text");p.value=W.value,q=new u.default("operator1",(0,g.arrayFrom)(Object.entries(O).map(function(e){return{label:e[0].toUpperCase(),value:e[1],selected:e[1]===P}})),{className:"apt-text-rule-operator",width:"135px"});var f=this.contentEl[w](".apt-selector-text-rule");f.removeChild(this.contentEl[w](".apt-dropdown.apt-text-rule-operator")),f.insertBefore(q.render(),p),H.value=e||H.value,R.checkedTab=e?"CUSTOM":H[x]("data-type");var m=this.contentEl[w](".apt-save-button"),v=this.contentEl[w](".apt-cancel-button");(0,a.addEventListener)(m,k,re.bind(R)),(0,a.addEventListener)(v,k,ne.bind(R));var E=this.contentEl[w]('.apt-selector-input[data-type="CUSTOM"] > .apt-selector-text'),S=function(e){var t=e.target.parentNode[w]('input[type="radio"]');t.checked||(t.checked=!0,ie("CUSTOM"))},T=(0,a.debounce)(function(e){if(e.target.parentNode[w]('input[type="radio"]').checked){var t=E.value;d(t,function(e){var n=0===e?"":t;B=$.checkSelectorStrength(n,e),o(B)})}},300);E&&(0,a.addEventListener)(E,"keyup",T),E&&(0,a.addEventListener)(E,"keyup",S),this.contentEl[C](".apt-selector-input > input[type=radio]").forEach(function(e){return(0,a.addEventListener)(e,"change",function(e){var t=e.target.parentNode[w](".apt-selector-text").value;R.dialog.contentEl[w](".apt-smart-selector-container")[C](".apt-selector-input").forEach(function(t){var n=t.getAttribute("data-type");n!==e.target.getAttribute("data-type")&&"CUSTOM"!==n?t[w](".apt-selector-text").classList.add("apt-disabled"):t[w](".apt-selector-text").classList.remove("apt-disabled")}),d(t,function(e){(0,a.setSelectorStrengthLabel)(h.documentRef.querySelector(".apt-selector-strength-val"),$.checkSelectorStrength(t,e))})})}),c(),(0,b.addTooltipToMoreInfo)(),(0,a.makeDraggable)(this.contentEl,this.contentEl.querySelector(".apt-drag-point"))},afterClose:function(){(0,y.getBody)().classList.add("apt-vex"),_&&_(D,t.call(this))}}),ie(R.checkedTab)))},se=function(e){return["DEFAULT","PARENT","CUSTOM","ATTRIBUTE","CLASS","NTH_CHILD"].indexOf(e)>-1};(0,a.addEventListener)(H,"click",ae.bind(this)),this.setValue=function(e){var t=e.matchCssSelector,n=e.cssSelector,r=e.type,o=e.matchTextRule,i=e.elementText,s=e.textOperator;(0,a.isObject)(n)&&(M=n),V.checked=t,K.checked=o,P=s,""===e||n&&n.defaultSelector&&""===n.defaultSelector?H.value="Not Selected...":H.value="string"==typeof n||n instanceof String?n:n.defaultSelector,""!==i&&(0,a.isBlank)(i)?Array.isArray(i)&&(W.value=i.join(",")):W.value=i,se(r)&&H[T]("data-type",r)},this.resetValue=function(){H.value="Not Selected...",H[T]("data-type","DEFAULT"),V.checked=!1,K.checked=!1,P=void 0,W.value="",M=null},this.getSelectionInput=function(){return j},this.getCssSelector=function(){return t()},this.disable=function(){N.setValue(""),j.querySelector(".aptr-item-selector-input").setAttribute("disabled",""),F=!0},this.enable=function(){j.querySelector(".aptr-item-selector-input").removeAttribute("disabled"),F=!1},this.isDisabled=function(){return F},this.overrideValue=function(e){ae(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(0),s=n(57),l=n(35),c=n(56),d=n(68),u=r(d),p=n(17),f=n(6),g=n(12),h=n(4),m=n(182),v=r(m),b=n(179),y=n(2),E=n(39);E.defaultOptions.className="vex-theme-os";var S="Not Selected...",C="querySelectorAll",w="querySelector",T="setAttribute",x="getAttribute",k="click",I="classList",A="div",O={is:"is","is not":"isNot","is empty":"isEmpty","is not empty":"isNotEmpty","starts with":"startsWith","not starts with":"notStartsWith","ends with":"endsWith","not ends with":"notEndsWith",contains:"contains","not contains":"notContains"}},,function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(28),i=function(e){return e&&e.__esModule?e:{default:e}}(o);/*!
 * froala_editor v2.6.2 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2017 Froala Labs
 */
!function(e){!function(e){var t=function t(n,o){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==(void 0===o?"undefined":r(o))&&o));var i=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[i]=e.FE.OPTS_MAPPING[i]||this.id,this.sid=e.FE.OPTS_MAPPING[i],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var a=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("touchstart.init",function(){e(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){e(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",e.proxy(function(t){if("touchend"==t.type&&!this.$el.data("touched"))return!0;if(1===t.which||!t.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==t.type&&this.image&&t.originalEvent&&t.originalEvent.target&&e(t.originalEvent.target).is("img")&&setTimeout(e.proxy(function(){this.image.edit(e(t.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this))):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(a),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.6.2",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName");this.$oel.closest("label").length;var n=e.proxy(function(){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.el=this.$el.get(0),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),r=e.proxy(function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,e.proxy(function(){this.events.trigger("form.reset")},this)),n()},this),o=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),i=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),a=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?a():"TEXTAREA"==t?r():"A"==t?o():"IMG"==t?i():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,a()):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var n in this.shared)this.shared.hasOwnProperty(n)&&(this.shared[n],e.FE.SHARED[this.sid][n]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);if("string"==typeof n){var a=[];return this.each(function(){var t=e(this),r=t.data("froala.editor");if(r){var i,s;if(n.indexOf(".")>0&&r[n.split(".")[0]]?(r[n.split(".")[0]]&&(i=r[n.split(".")[0]]),s=n.split(".")[1]):(i=r,s=n.split(".")[0]),!i[s])return e.error("Method "+n+" does not exist in Froala Editor.");var l=i[s].apply(r,o.slice(1));void 0===l?a.push(this):0===a.length&&a.push(l)}}),1==a.length?a[0]:a}if("object"==(void 0===n?"undefined":r(n))||!n)return this.each(function(){e(this).data("froala.editor")||new t(this,n)})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3,e.FE.MODULES.helpers=function(t){function n(){var e,t,n=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))),n}function o(){var e={},t=n();if(t>0)e.msie=!0;else{var r=navigator.userAgent.toLowerCase(),o=/(edge)[ \/]([\w.]+)/.exec(r)||/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[],i={browser:o[1]||"",version:o[2]||"0"};o[1]&&(e[i.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function i(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!l()}function a(){return/(Android)/g.test(navigator.userAgent)&&!l()}function s(){return/(Blackberry)/g.test(navigator.userAgent)}function l(){return/(Windows Phone)/gi.test(navigator.userAgent)}function c(){return a()||i()||s()}function d(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function u(e){return parseInt(e,10)||0}function p(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body:first"),n=u(t.css("margin-left"));return t.remove(),n}function f(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function g(e){return!!/^(https?:|ftps?:|)\/\//i.test(e)&&(e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),/(http|ftp|https):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#-_{}])?/gi.test(e))}function h(e){if(/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(e))return e;if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!g(e)&&!g("http:"+e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}");return e}function m(e){return e&&!e.propertyIsEnumerable("length")&&"object"==(void 0===e?"undefined":r(e))&&"number"==typeof e.length}function v(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(e){return null}}function b(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function y(n){var r=(n.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(r)<0){if(!x){var o=e('<div dir="'+("rtl"==t.opts.direction?"rtl":"auto")+'" style="text-align: '+t.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body:first").append(o);var i=o.find("#s1").get(0).getBoundingClientRect().left,a=o.find("#s2").get(0).getBoundingClientRect().left;o.remove(),x=i<a?"left":"right"}r=x}return r}function E(){return null==k&&(k=navigator.platform.toUpperCase().indexOf("MAC")>=0),k}function S(){function e(e,t){var o=e[t];e[t]=function(e){var t,i=!1,a=!1;if(e&&e.match(r)){e=e.replace(r,""),this.parentNode||(n.appendChild(this),a=!0);var s=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),i=!0),t=o.call(s,"#"+this.id+" "+e),i&&(this.id=""),a&&n.removeChild(this),t}return o.call(this,e)}}var n=t.o_doc.createElement("div");try{n.querySelectorAll(":scope *")}catch(t){var r=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll"),e(HTMLElement.prototype,"querySelector"),e(HTMLElement.prototype,"querySelectorAll")}}function C(){return t.o_win.pageYOffset?t.o_win.pageYOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollTop?t.o_doc.documentElement.scrollTop:t.o_doc.body.scrollTop?t.o_doc.body.scrollTop:0}function w(){return t.o_win.pageXOffset?t.o_win.pageXOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollLeft?t.o_doc.documentElement.scrollLeft:t.o_doc.body.scrollLeft?t.o_doc.body.scrollLeft:0}function T(){t.browser=o(),S()}var x,k=null;return{_init:T,isIOS:i,isMac:E,isAndroid:a,isBlackberry:s,isWindowsPhone:l,isMobile:c,requestAnimationFrame:d,getPX:u,screenSize:p,isTouch:f,sanitizeURL:h,isArray:m,RGBToHex:v,HEXtoRGB:b,isURL:g,getAlignment:y,scrollTop:C,scrollLeft:w}},e.FE.MODULES.events=function(t){function n(e,t,n){b(e,t,n)}function r(){n(t.$el,"cut copy paste beforepaste",function(e){S(e.type,[e])})}function o(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){S(e.type,[e])}),v("mousedown",function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()})}function i(){n(t.$el,"keydown keypress keyup input",function(e){S(e.type,[e])})}function a(){n(t.$win,t._mousedown,function(e){S("window.mousedown",[e]),f()}),n(t.$win,t._mouseup,function(e){S("window.mouseup",[e])}),n(t.$win,"cut copy keydown keyup touchmove touchend",function(e){S("window."+e.type,[e])})}function s(){n(t.$doc,"dragend drop",function(e){S("document."+e.type,[e])})}function l(n){if(void 0===n&&(n=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&n){var r=t.$win.scrollTop();return t.browser.msie&&t.$box&&t.$box.css("position","fixed"),t.browser.msie&&t.$wp&&t.$wp.css("overflow","visible"),t.$el.focus(),t.browser.msie&&t.$box&&t.$box.css("position",""),t.browser.msie&&t.$wp&&t.$wp.css("overflow","auto"),r!=t.$win.scrollTop()&&t.$win.scrollTop(r),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;if(t.selection.info(t.el).atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var o=t.markers.insert();if(o&&!t.node.blockParent(o)){e(o).remove();var i=t.$el.find(t.html.blockTagsQuery()).get(0);i&&(e(i).prepend(e.FE.MARKERS),t.selection.restore())}else o&&e(o).remove()}}function c(){n(t.$el,"focus",function(e){h()&&(l(!1),!1===A&&S(e.type,[e]))}),n(t.$el,"blur",function(e){h()&&!0===A&&(S(e.type,[e]),f())}),v("focus",function(){A=!0}),v("blur",function(){A=!1})}function d(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function u(n){var r=e(n.currentTarget);return t.edit.isDisabled()||t.node.hasClass(r.get(0),"fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which||(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===r.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),r.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[r]))}function p(n,r){var o=e(n.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(o.get(0),"fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!t.node.hasClass(o.get(0),"fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!t.node.hasClass(o.get(0),"fr-selected"))return t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),o.data("dragging")||o.attr("disabled"))return o.removeData("dragging"),!1;var i=o.data("timeout");i&&(clearTimeout(i),o.removeData("timeout")),r.apply(t,[n])}else o.data("timeout")||o.data("timeout",setTimeout(function(){o.data("dragging",!0)},100))}function f(){k=!0}function g(){k=!1}function h(){return k}function m(e,n,r){b(e,t._mousedown,n,function(e){t.edit.isDisabled()||u(e)},!0),b(e,t._mouseup+" "+t._move,n,function(e){t.edit.isDisabled()||p(e,r)},!0),b(e,"mousedown click mouseup",n,function(e){t.edit.isDisabled()||e.stopPropagation()},!0),v("window.mouseup",function(){t.edit.isDisabled()||(e.find(n).removeClass("fr-selected"),f())})}function v(e,n,r){var o=e.split(" ");if(o.length>1){for(var i=0;i<o.length;i++)v(o[i],n,r);return!0}void 0===r&&(r=!1);var a;a=0!==e.indexOf("shared.")?I[e]=I[e]||[]:t.shared._events[e]=t.shared._events[e]||[],r?a.unshift(n):a.push(n)}function b(e,n,r,o,i){"function"==typeof r&&(i=o,o=r,r=!1);var a=i?t.shared.$_events:O,s=i?t.sid:t.id;r?e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,r,o):e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,o),a.indexOf(e.get(0))<0&&a.push(e.get(0))}function y(t,n){for(var r=0;r<t.length;r++)e(t[r]).off(".ed"+n)}function E(){y(O,t.id),O=[],0===t.shared.count&&(y(t.shared.$_events,t.sid),t.shared.$_events=null)}function S(n,r,o){if(!t.edit.isDisabled()||o){var i;if(0!==n.indexOf("shared."))i=I[n];else{if(t.shared.count>0)return!1;i=t.shared._events[n]}var a;if(i)for(var s=0;s<i.length;s++)if(!1===(a=i[s].apply(t,r)))return!1;return!1!==(a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],r||[])))&&a}}function C(n,r,o){if(!t.edit.isDisabled()||o){var i;if(0!==n.indexOf("shared."))i=I[n];else{if(t.shared.count>0)return!1;i=t.shared._events[n]}var a;if(i)for(var s=0;s<i.length;s++)void 0!==(a=i[s].apply(t,[r]))&&(r=a);return a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[r])),void 0!==a&&(r=a),r}}function w(){for(var e in I)I.hasOwnProperty(e)&&delete I[e]}function T(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}function x(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},d(),o(),a(),s(),i(),c(),f(),r(),v("destroy",w),v("shared.destroy",T)}var k,I={},A=!1,O=[];return{_init:x,on:v,trigger:S,bindClick:m,disableBlur:g,enableBlur:f,blurActive:h,focus:l,chainTrigger:C,$on:b,$off:E}},e.FE.MODULES.node=function(t){function n(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function r(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function o(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&"a"==e.tagName.toLowerCase()}function i(o,i){if(!o)return!0;if(o.querySelector("table"))return!1;var a=n(o);1==a.length&&r(a[0])&&(a=n(a[0]));for(var s=!1,l=0;l<a.length;l++){var c=a[l];if(!(i&&t.node.hasClass(c,"fr-marker")||c.nodeType==Node.TEXT_NODE&&0===c.textContent.length)){if("BR"!=c.tagName&&(c.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(s)return!1;"BR"==c.tagName&&(s=!0)}}return!(o.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-o.querySelectorAll("br").length||o.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||o.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||o.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function a(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(e=e.parentNode,r(e))return e;return null}function s(n,o,i){if(void 0===o&&(o=[]),void 0===i&&(i=!0),o.push(t.el),o.indexOf(n.parentNode)>=0||n.parentNode&&t.node.hasClass(n.parentNode,"fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&i)return null;for(;o.indexOf(n.parentNode)<0&&n.parentNode&&!t.node.hasClass(n.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!i)&&(!r(n)||!r(n.parentNode)||!i);)n=n.parentNode;return n}function l(e){var t={},n=e.attributes;if(n)for(var r=0;r<n.length;r++){var o=n[r];t[o.nodeName]=o.value}return t}function c(e){for(var t="",n=l(e),r=Object.keys(n).sort(),o=0;o<r.length;o++){var i=r[o],a=n[i];a.indexOf("'")<0&&a.indexOf('"')>=0?t+=" "+i+"='"+a+"'":a.indexOf('"')>=0&&a.indexOf("'")>=0?(a=a.replace(/"/g,"&quot;"),t+=" "+i+'="'+a+'"'):t+=" "+i+'="'+a+'"'}return t}function d(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var r=t[n];e.removeAttribute(r.nodeName)}}function u(e){return"<"+e.tagName.toLowerCase()+c(e)+">"}function p(e){return"</"+e.tagName.toLowerCase()+">"}function f(e,n){void 0===n&&(n=!0);for(var r=e.previousSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.previousSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&f(r)}function g(e,n){void 0===n&&(n=!0);for(var r=e.nextSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.nextSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&g(r)}function h(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function m(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0}function v(e){return e===t.el}function b(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0}function y(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(v(e)||e.type||e.href||~e.tabIndex)}function E(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function S(t,n){return t instanceof e&&(t=t.get(0)),t&&t.classList&&t.classList.contains(n)}function C(e){return t.browser.msie?e:{acceptNode:e}}return{isBlock:r,isEmpty:i,blockParent:a,deepestParent:s,rawAttributes:l,attributes:c,clearAttributes:d,openTagString:u,closeTagString:p,isFirstSibling:f,isLastSibling:g,isList:m,isLink:o,isElement:v,contents:n,isVoid:h,hasFocus:y,isEditable:E,isDeletable:b,hasClass:S,filter:C}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(n,r){return e('<span class="fr-marker" data-id="'+r+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function r(r,o,i){var a,s,l;try{var c=r.cloneRange();if(c.collapse(o),c.insertNode(n(o,i)),!0===o)for(a=t.$el.find('span.fr-marker[data-type="true"][data-id="'+i+'"]').get(0),l=a.nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=a.nextSibling;if(!0===o&&!r.collapsed){for(;!t.node.isElement(a.parentNode)&&!l;)e(a.parentNode).after(a),l=a.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){s=[l];do{l=s[0],s=t.node.contents(l)}while(s[0]&&t.node.isBlock(s[0]));e(l).prepend(e(a))}}if(!1===o&&!r.collapsed){if(a=t.$el.find('span.fr-marker[data-type="false"][data-id="'+i+'"]').get(0),(l=a.previousSibling)&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){s=[l];do{l=s[s.length-1],s=t.node.contents(l)}while(s[s.length-1]&&t.node.isBlock(s[s.length-1]));e(l).append(e(a))}a.parentNode&&["TD","TH"].indexOf(a.parentNode.tagName)>=0&&a.parentNode.previousSibling&&!a.previousSibling&&e(a.parentNode.previousSibling).append(a)}var d=t.$el.find('span.fr-marker[data-type="'+o+'"][data-id="'+i+'"]').get(0);return d&&(d.style.display="none"),d}catch(e){return null}}function o(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),r=n.commonAncestorContainer;if(r!=t.el&&0===t.$el.find(r).length)return null;var o=n.cloneRange(),i=n.cloneRange();o.collapse(!0);var a=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(o.insertNode(a),a=t.$el.find("span.fr-marker").get(0)){for(var s=a.nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)e(s).remove(),s=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(i),a}return null}catch(e){}}function i(){t.selection.isCollapsed()||t.selection.remove();var n=t.$el.find(".fr-marker").get(0);if(null==n&&(n=o()),null==n)return null;var r=t.node.deepestParent(n);if(r||(r=t.node.blockParent(n))&&"LI"!=r.tagName&&(r=null),r)if(t.node.isBlock(r)&&t.node.isEmpty(r))"LI"!=r.tagName||r.parentNode.firstElementChild!=r||t.node.isEmpty(r.parentNode)?e(r).replaceWith('<span class="fr-marker"></span>'):e(r).append('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(n,r))e(r).before('<span class="fr-marker"></span>'),e(n).remove();else if(t.cursor.isAtEnd(n,r))e(r).after('<span class="fr-marker"></span>'),e(n).remove();else{var i=n,a="",s="";do{i=i.parentNode,a+=t.node.closeTagString(i),s=t.node.openTagString(i)+s}while(i!=r);e(n).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);l=l.replace(/<span id="fr-break"><\/span>/g,a+'<span class="fr-marker"></span>'+s),e(r).replaceWith(l)}return t.$el.find(".fr-marker").get(0)}function a(e){var n=e.clientX,r=e.clientY;s();var i,a=null;if(void 0!==t.doc.caretPositionFromPoint?(i=t.doc.caretPositionFromPoint(n,r),a=t.doc.createRange(),a.setStart(i.offsetNode,i.offset),a.setEnd(i.offsetNode,i.offset)):void 0!==t.doc.caretRangeFromPoint&&(i=t.doc.caretRangeFromPoint(n,r),a=t.doc.createRange(),a.setStart(i.startContainer,i.startOffset),a.setEnd(i.startContainer,i.startOffset)),null!==a&&void 0!==t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(a)}else if(void 0!==t.doc.body.createTextRange)try{a=t.doc.body.createTextRange(),a.moveToPoint(n,r);var c=a.duplicate();c.moveToPoint(n,r),a.setEndPoint("EndToEnd",c),a.select()}catch(e){return!1}o()}function s(){t.$el.find(".fr-marker").remove()}return{place:r,insert:o,split:i,insertAtPoint:a,remove:s}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function r(){return t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function o(e){var n=r(),o=[];if(n&&n.getRangeAt&&n.rangeCount){o=[];for(var i=0;i<n.rangeCount;i++)o.push(n.getRangeAt(i))}else o=t.doc.createRange?[t.doc.createRange()]:[];return void 0!==e?o[e]:o}function i(){var e=r();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(e){}}function a(){var i=r();try{if(i.rangeCount){var a,s=o(0),l=s.startContainer;if(l.nodeType==Node.TEXT_NODE&&s.startOffset==(l.textContent||"").length&&l.nextSibling&&(l=l.nextSibling),l.nodeType==Node.ELEMENT_NODE){var c=!1;if(l.childNodes.length>0&&l.childNodes[s.startOffset]){for(a=l.childNodes[s.startOffset];a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.nextSibling;if(a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0),!c&&l.childNodes.length>1&&s.startOffset>0&&l.childNodes[s.startOffset-1]){for(a=l.childNodes[s.startOffset-1];a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.nextSibling;a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0)}}else!s.collapsed&&l.nextSibling&&l.nextSibling.nodeType==Node.ELEMENT_NODE&&(a=l.nextSibling)&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0);!c&&l.childNodes.length>0&&e(l.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(l.childNodes[0].tagName)<0&&(l=l.childNodes[0])}for(;l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var d=l;d&&"HTML"!=d.tagName;){if(d==t.el)return l;d=e(d).parent()[0]}}}catch(e){}return t.el}function s(){var i=r();try{if(i.rangeCount){var a,s=o(0),l=s.endContainer;if(l.nodeType==Node.ELEMENT_NODE){var c=!1;l.childNodes.length>0&&l.childNodes[s.endOffset]&&e(l.childNodes[s.endOffset]).text()===n()?(l=l.childNodes[s.endOffset],c=!0):!s.collapsed&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE?(a=l.previousSibling)&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0):!s.collapsed&&l.childNodes.length>0&&l.childNodes[s.endOffset]&&(a=l.childNodes[s.endOffset].previousSibling,a.nodeType==Node.ELEMENT_NODE&&a&&a.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=a,c=!0)),!c&&l.childNodes.length>0&&e(l.childNodes[l.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(l.childNodes[l.childNodes.length-1].tagName)<0&&(l=l.childNodes[l.childNodes.length-1])}for(l.nodeType==Node.TEXT_NODE&&0===s.endOffset&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE&&(l=l.previousSibling);l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var d=l;d&&"HTML"!=d.tagName;){if(d==t.el)return l;d=e(d).parent()[0]}}}catch(e){}return t.el}function l(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function c(){var n,i=[],a=r();if(E()&&a.rangeCount){var s=o();for(n=0;n<s.length;n++){var c,d=s[n],u=l(d.startContainer,d.startOffset),p=l(d.endContainer,d.endOffset);t.node.isBlock(u)&&i.indexOf(u)<0&&i.push(u),(c=t.node.blockParent(u))&&i.indexOf(c)<0&&i.push(c);for(var f=[],g=u;g!==p&&g!==t.el;)f.indexOf(g)<0&&g.children&&g.children.length?(f.push(g),g=g.children[0]):g.nextSibling?g=g.nextSibling:g.parentNode&&(g=g.parentNode,f.push(g)),t.node.isBlock(g)&&f.indexOf(g)<0&&i.indexOf(g)<0&&(g!==p||d.endOffset>0)&&i.push(g);t.node.isBlock(p)&&i.indexOf(p)<0&&d.endOffset>0&&i.push(p),(c=t.node.blockParent(p))&&i.indexOf(c)<0&&i.push(c)}}for(n=i.length-1;n>0;n--)e(i[n]).find(i).length&&("LI"!=i[n].tagName||1==i[n].children.length&&i.indexOf(i[n].children[0])>=0)&&i.splice(n,1);return i}function d(){if(t.$wp){t.markers.remove();var n,r,i=o(),a=[];for(r=0;r<i.length;r++)if(i[r].startContainer!==t.doc||t.browser.msie){n=i[r];var s=n.collapsed,l=t.markers.place(n,!0,r),c=t.markers.place(n,!1,r);void 0!==l&&l||!s||(e(".fr-marker").remove(),t.selection.setAtEnd(t.el)),t.el.normalize(),t.browser.safari&&!s&&(n=t.doc.createRange(),n.setStartAfter(l),n.setEndBefore(c),a.push(n))}if(t.browser.safari&&a.length)for(t.selection.clear(),r=0;r<a.length;r++)t.selection.get().addRange(a[r])}}function u(){var n,o=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===o.length)return!1;if(t.browser.msie||t.browser.edge)for(n=0;n<o.length;n++)o[n].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),i();var a=r();for(n=0;n<o.length;n++){var s=e(o[n]).data("id"),l=o[n],c=t.doc.createRange(),d=t.$el.find('.fr-marker[data-type="false"][data-id="'+s+'"]');(t.browser.msie||t.browser.edge)&&d.css("display","inline-block");var u=null;if(d.length>0){d=d[0];try{for(var f,g=!1,h=l.nextSibling;h&&h.nodeType==Node.TEXT_NODE&&0===h.textContent.length;)f=h,h=h.nextSibling,e(f).remove();for(var m=d.nextSibling;m&&m.nodeType==Node.TEXT_NODE&&0===m.textContent.length;)f=m,m=m.nextSibling,e(f).remove();if(l.nextSibling==d||d.nextSibling==l){for(var v=l.nextSibling==d?l:d,b=v==l?d:l,y=v.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0===y.length;)f=y,y=y.previousSibling,e(f).remove();if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var E=b.nextSibling;E&&E.nodeType==Node.TEXT_NODE&&0===E.length;)f=E,E=E.nextSibling,e(f).remove();if(E&&E.nodeType==Node.TEXT_NODE)for(;E&&E.nextSibling&&E.nextSibling.nodeType==Node.TEXT_NODE;)E.nextSibling.textContent=E.textContent+E.nextSibling.textContent,E=E.nextSibling,e(E.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),E&&(t.node.isVoid(E)||t.node.isBlock(E))&&(E=null),y&&E&&y.nodeType==Node.TEXT_NODE&&E.nodeType==Node.TEXT_NODE){e(l).remove(),e(d).remove();var S=y.textContent.length;y.textContent=y.textContent+E.textContent,e(E).remove(),t.spaces.normalize(y),c.setStart(y,S),c.setEnd(y,S),g=!0}else!y&&E&&E.nodeType==Node.TEXT_NODE?(e(l).remove(),e(d).remove(),t.spaces.normalize(E),u=e(t.doc.createTextNode("")),e(E).before(u),c.setStart(E,0),c.setEnd(E,0),g=!0):!E&&y&&y.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(d).remove(),t.spaces.normalize(y),u=e(t.doc.createTextNode("")),e(y).after(u),c.setStart(y,y.textContent.length),c.setEnd(y,y.textContent.length),g=!0)}if(!g){var C,w;(t.browser.chrome||t.browser.edge)&&l.nextSibling==d?(C=p(d,c,!0)||c.setStartAfter(d),w=p(l,c,!1)||c.setEndBefore(l)):(l.previousSibling==d&&(l=d,d=l.nextSibling),d.nextSibling&&"BR"===d.nextSibling.tagName||!d.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",d.style.display="inline",u=e(t.doc.createTextNode(""))),C=p(l,c,!0)||e(l).before(u)&&c.setStartBefore(l),w=p(d,c,!1)||e(d).after(u)&&c.setEndAfter(d)),"function"==typeof C&&C(),"function"==typeof w&&w()}}catch(e){}}u&&u.remove();try{a.addRange(c)}catch(e){}}t.markers.remove()}function p(n,r,o){var i,a=n.previousSibling,s=n.nextSibling;return a&&s&&a.nodeType==Node.TEXT_NODE&&s.nodeType==Node.TEXT_NODE?(i=a.textContent.length,o?(s.textContent=a.textContent+s.textContent,e(a).remove(),e(n).remove(),t.spaces.normalize(s),function(){r.setStart(s,i)}):(a.textContent=a.textContent+s.textContent,e(s).remove(),e(n).remove(),t.spaces.normalize(a),function(){r.setEnd(a,i)})):a&&!s&&a.nodeType==Node.TEXT_NODE?(i=a.textContent.length,o?(t.spaces.normalize(a),function(){r.setStart(a,i)}):(t.spaces.normalize(a),function(){r.setEnd(a,i)})):!(!s||a||s.nodeType!=Node.TEXT_NODE)&&(o?(t.spaces.normalize(s),function(){r.setStart(s,0)}):(t.spaces.normalize(s),function(){r.setEnd(s,0)}))}function f(){return!0}function g(){for(var e=o(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function h(e){var n,r,o=!1,i=!1;if(t.win.getSelection){var a=t.win.getSelection();a.rangeCount&&(n=a.getRangeAt(0),r=n.cloneRange(),r.selectNodeContents(e),r.setEnd(n.startContainer,n.startOffset),o=""===r.toString(),r.selectNodeContents(e),r.setStart(n.endContainer,n.endOffset),i=""===r.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&(n=t.doc.selection.createRange(),r=n.duplicate(),r.moveToElementText(e),r.setEndPoint("EndToStart",n),o=""===r.text,r.moveToElementText(e),r.setEndPoint("StartToEnd",n),i=""===r.text);return{atStart:o,atEnd:i}}function m(){if(g())return!1;t.$el.find("td, th, img, br:not(:last)").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,r=h(t.el);return r.atStart&&r.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n}function v(n,r){void 0===r&&(r=!0);var o=e(n).html();o&&o.replace(/\u200b/g,"").length!=o.length&&e(n).html(o.replace(/\u200b/g,""));for(var i=t.node.contents(n),a=0;a<i.length;a++)i[a].nodeType!=Node.ELEMENT_NODE?e(i[a]).remove():(v(i[a],0===a),0===a&&(r=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):r&&e(n).attr("data-first",!0)}function b(){return 0===e(this).find("fr-inner").length}function y(n,r){var o=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&t.node.hasClass(o[0],"fr-marker")&&n.attr("data-del-cell",!0);for(var i=0;i<o.length;i++){var a=o[i];t.node.hasClass(a,"fr-marker")?r=(r+1)%2:r?e(a).find(".fr-marker").length>0?r=y(e(a),r):["TD","TH"].indexOf(a.tagName)<0&&!t.node.hasClass(a,"fr-inner")?!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0?e(a).remove():v(a):t.node.hasClass(a,"fr-inner")?0===e(a).find(".fr-inner").length?e(a).html("<br>"):e(a).find(".fr-inner").filter(b).html("<br>"):(e(a).empty(),e(a).attr("data-del-cell",!0)):e(a).find(".fr-marker").length>0&&(r=y(e(a),r))}return r}function E(){try{if(!t.$wp)return!1;for(var e=o(0),n=e.commonAncestorContainer;n&&!t.node.isElement(n);)n=n.parentNode;return!!t.node.isElement(n)}catch(e){return!1}}function S(){if(g())return!0;var n;d();var r=t.$el.find('.fr-marker[data-type="true"]');for(n=0;n<r.length;n++)for(var o=r[n];!function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var r=n;n=n.previousSibling,e(r).remove()}return n}(o)&&!t.node.isBlock(o.parentNode)&&!t.$el.is(o.parentNode);)e(o.parentNode).before(o);var i=t.$el.find('.fr-marker[data-type="false"]');for(n=0;n<i.length;n++){for(var a=i[n];!function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var r=n;n=n.nextSibling,e(r).remove()}return n}(a)&&!t.node.isBlock(a.parentNode)&&!t.$el.is(a.parentNode);)e(a.parentNode).after(a);a.parentNode&&t.node.isBlock(a.parentNode)&&t.node.isEmpty(a.parentNode)&&!t.$el.is(a.parentNode)&&t.opts.keepFormatOnDelete&&e(a.parentNode).after(a)}if(f()){y(t.$el,0);var s=t.$el.find('[data-first="true"]');if(s.length)t.$el.find(".fr-marker").remove(),s.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),s.attr("data-text")&&s.replaceWith(s.html());else for(t.$el.find("table").filter(function(){return e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell"),r=t.$el.find('.fr-marker[data-type="true"]'),n=0;n<r.length;n++){var l=r[n],c=l.nextSibling,p=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(l).data("id")+'"]').get(0);if(p){if(l&&(!c||c!=p)){var h=t.node.blockParent(l),m=t.node.blockParent(p),v=!1,b=!1;if(h&&["UL","OL"].indexOf(h.tagName)>=0&&(h=null,v=!0),m&&["UL","OL"].indexOf(m.tagName)>=0&&(m=null,b=!0),e(l).after(p),h!=m)if(null!=h||v)if(null!=m||b||0!==e(h).parentsUntil(t.$el,"table").length)h&&m&&0===e(h).parentsUntil(t.$el,"table").length&&0===e(m).parentsUntil(t.$el,"table").length&&(e(h).append(e(m).html()),e(m).remove());else{for(c=h;!c.nextSibling&&c.parentNode!=t.el;)c=c.parentNode;for(c=c.nextSibling;c&&"BR"!=c.tagName;){var E=c.nextSibling;e(h).append(c),c=E}c&&"BR"==c.tagName&&e(c).remove()}else{var S=t.node.deepestParent(l);S?(e(S).after(e(m).html()),e(m).remove()):0===e(m).parentsUntil(t.$el,"table").length&&(e(l).next().after(e(m).html()),e(m).remove())}}}else p=e(l).clone().attr("data-type",!1),e(l).after(p)}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var C=t.$el.find(".fr-marker:last").get(0),w=t.$el.find(".fr-marker:first").get(0);void 0!==C&&void 0!==w&&!C.nextSibling&&w.previousSibling&&"BR"==w.previousSibling.tagName&&t.node.isElement(C.parentNode)&&t.node.isElement(w.parentNode)&&t.$el.append("<br>"),u()}function C(n,r){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var o=n.firstChild;o&&(t.node.isBlock(o)||r&&!t.node.isVoid(o)&&o.nodeType==Node.ELEMENT_NODE);)n=o,o=o.firstChild;n.innerHTML=e.FE.MARKERS+n.innerHTML}function w(n,r){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var o=n.lastChild;o&&(t.node.isBlock(o)||r&&!t.node.isVoid(o)&&o.nodeType==Node.ELEMENT_NODE);)n=o,o=o.lastChild;n.innerHTML=n.innerHTML+e.FE.MARKERS}function T(n,r){void 0===r&&(r=!0);for(var o=n.previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.previousSibling;return o?(t.node.isBlock(o)?w(o):"BR"==o.tagName?e(o).before(e.FE.MARKERS):e(o).after(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?C(n):e(n).before(e.FE.MARKERS),!0)}function x(n,r){void 0===r&&(r=!0);for(var o=n.nextSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.nextSibling;return o?(t.node.isBlock(o)?C(o):e(o).before(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?w(n):e(n).after(e.FE.MARKERS),!0)}return{text:n,get:r,ranges:o,clear:i,element:a,endElement:s,save:d,restore:u,isCollapsed:g,isFull:m,inEditor:E,remove:S,blocks:c,info:h,setAtEnd:w,setAtStart:C,setBefore:T,setAfter:x,rangeElement:l}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function n(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var r,o=t.node.contents(e),i=[];for(r=0;r<o.length;r++)o[r].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(o[r])?o[r].nodeType==Node.TEXT_NODE&&(o[r].textContent=o[r].textContent.replace(/\u200b/g,"")):o[r].textContent.replace(/\u200b/g,"").length!=o[r].textContent.length&&n(o[r]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),o=t.node.contents(e),i=e.querySelectorAll(".fr-marker"),o.length-i.length==0)){for(r=0;r<o.length;r++)if((o[r].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(r=0;r<i.length;r++)e.parentNode.insertBefore(i[r].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function r(e,n){if(e.nodeType==Node.COMMENT_NODE)return"\x3c!--"+e.nodeValue+"--\x3e";if(e.nodeType==Node.TEXT_NODE)return n?e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","NOSCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var o=document.createElement("div"),i=e.cloneNode(!0);return o.appendChild(i),o.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");var a=e.childNodes;if(0===a.length)return e.outerHTML;for(var s="",l=0;l<a.length;l++)"PRE"==e.tagName&&(n=!0),s+=r(a[l],n);return t.node.openTagString(e)+s+t.node.closeTagString(e)}function o(e){return P=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return P.push(e),"[FROALA.EDITOR.SCRIPT "+(P.length-1)+"]"}),e=e.replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,function(e){return P.push(e),"[FROALA.EDITOR.NOSCRIPT "+(P.length-1)+"]"}),e=e.replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,function(e){return P.push(e),"[FROALA.EDITOR.IFRAME "+(P.length-1)+"]"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function i(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":P[parseInt(n,10)]}),e=e.replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("noscript")>=0?"":P[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}),e=e.replace(/\[FROALA\.EDITOR\.IFRAME ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("iframe")>=0?"":P[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}),e=e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function a(e){var t=e.replace(/;;/gi,";");return t=t.replace(/^;/gi,""),";"!=t.charAt(t.length)&&(t+=";"),t}function s(e){var n;for(n in e)if(e.hasOwnProperty(n)){var r=n.match(B),o=null;"style"==n&&t.opts.htmlAllowedStyleProps.length&&(o=e[n].match(R)),r&&o?e[n]=a(o.join(";")):r&&("style"!=n||o)||delete e[n]}for(var i="",s=Object.keys(e).sort(),l=0;l<s.length;l++)n=s[l],e[n].indexOf('"')<0?i+=" "+n+'="'+e[n]+'"':i+=" "+n+"='"+e[n]+"'";return i}function l(e,n,r){if(t.opts.fullPage){var o=t.html.extractDoctype(r),i=s(t.html.extractNodeAttrs(r,"html"));return n=null==n?t.html.extractNode(r,"head")||"<title></title>":n,o+"<html"+i+"><head"+s(t.html.extractNodeAttrs(r,"head"))+">"+n+"</head><body"+s(t.html.extractNodeAttrs(r,"body"))+">"+e+"</body></html>"}return e}function c(n,o){var i,a=e("<div>"+n+"</div>"),s="";if(a){var l=t.node.contents(a.get(0));for(i=0;i<l.length;i++)o(l[i]);for(l=t.node.contents(a.get(0)),i=0;i<l.length;i++)s+=r(l[i])}return s}function d(e,n,r){e=o(e);var a=e,s=null;return t.opts.fullPage&&(a=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e),r&&(s=t.html.extractNode(e,"head")||"")),a=c(a,n),s&&(s=c(s,n)),i(l(a,s,e))}function u(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)}function p(){var n=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){var r=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),r=!0);for(var o=0;o<n.length;o++)""===t.node.attributes(n[o])&&e(n[o]).replaceWith("<"+e.FE.HTML5Map[n[o].tagName]+">"+n[o].innerHTML+"</"+e.FE.HTML5Map[n[o].tagName]+">");r&&t.selection.restore()}}function f(e){var n=t.doc.createElement("DIV");return n.innerHTML=e,n.textContent}function g(n){if("SPAN"==n.tagName&&(n.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==n.tagName&&m(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-fr-src")&&n.setAttribute("data-fr-src",t.helpers.sanitizeURL(f(n.getAttribute("data-fr-src")))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(f(n.getAttribute("href")))),n.getAttribute("src")&&n.setAttribute("src",t.helpers.sanitizeURL(f(n.getAttribute("src")))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-fr-src")&&0===n.getAttribute("data-fr-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var r=e.FE.HTML5Map[n.tagName],o="<"+r+">"+n.innerHTML+"</"+r+">";n.insertAdjacentHTML("beforebegin",o),n=n.previousSibling,n.parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(D))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(F))"svg"===n.tagName?n.parentNode.removeChild(n):t.browser.safari&&"path"==n.tagName&&n.parentNode&&"svg"==n.parentNode.tagName||(n.outerHTML=n.innerHTML);else{var i=n.attributes;if(i)for(var s=i.length-1;s>=0;s--){var l=i[s],c=l.nodeName.match(B),d=null;"style"==l.nodeName&&t.opts.htmlAllowedStyleProps.length&&(d=l.value.match(R)),c&&d?l.value=a(d.join(";")):c&&("style"!=l.nodeName||d)||n.removeAttribute(l.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function h(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&h(n[r]);g(e)}function m(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function v(n,r,o,i){void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===i&&(i=!1),n=n.replace(/<br> */g,"<br>");var a,s=e.merge([],t.opts.htmlAllowedTags);for(a=0;a<r.length;a++)s.indexOf(r[a])>=0&&s.splice(s.indexOf(r[a]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(a=0;a<o.length;a++)l.indexOf(o[a])>=0&&l.splice(l.indexOf(o[a]),1);return l.push("data-fr-.*"),l.push("fr-.*"),F=new RegExp("^"+s.join("$|^")+"$","gi"),B=new RegExp("^"+l.join("$|^")+"$","gi"),D=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),R=t.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+t.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,n=d(n,h,!0)}function b(){for(var n=t.el.querySelectorAll("blockquote + blockquote"),r=0;r<n.length;r++){var o=n[r];t.node.attributes(o)==t.node.attributes(o.previousSibling)&&(e(o).prev().append(e(o).html()),e(o).remove())}}function y(){for(var e=t.el.querySelectorAll("tr"),n=0;n<e.length;n++){for(var r=e[n].children,o=!0,i=0;i<r.length;i++)if("TH"!=r[i].tagName){o=!1;break}if(!1!==o&&0!==r.length){for(var a=e[n];a&&"TABLE"!=a.tagName&&"THEAD"!=a.tagName;)a=a.parentNode;var s=a;"THEAD"!=s.tagName&&(s=t.doc.createElement("THEAD"),a.insertBefore(s,a.firstChild)),s.appendChild(e[n])}}}function E(){var n=t.html.defaultTag();if(n)for(var r=t.el.querySelectorAll("td > "+n+", th > "+n),o=0;o<r.length;o++)""===t.node.attributes(r[o])&&e(r[o]).replaceWith(r[o].innerHTML+"<br>")}function S(){y(),E()}function C(){var e=[];do{if(e.length){var n=e[0],r=t.doc.createElement("ul");n.parentNode.insertBefore(r,n);do{var o=n;n=n.nextSibling,r.appendChild(o)}while(n&&"LI"==n.tagName)}e=[];for(var i=t.el.querySelectorAll("li"),a=0;a<i.length;a++)(function(e){return!t.node.isList(e.parentNode)})(i[a])&&e.push(i[a])}while(e.length>0)}function w(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var r=e[n];if(t.node.isList(r.previousSibling)&&t.node.openTagString(r)==t.node.openTagString(r.previousSibling)){for(var o=t.node.contents(r),i=0;i<o.length;i++)r.previousSibling.appendChild(o[i]);r.parentNode.removeChild(r)}}}function T(){var e,n;do{n=!1;var r=t.el.querySelectorAll("li:empty");for(e=0;e<r.length;e++)r[e].parentNode.removeChild(r[e]);var o=t.el.querySelectorAll("ul, ol");for(e=0;e<o.length;e++)!function(e){e.querySelector("LI")||(n=!0,e.parentNode.removeChild(e))}(o[e])}while(!0===n)}function x(){for(var n=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),r=0;r<n.length;r++){var o=n[r],i=o.previousSibling;i&&("LI"==i.tagName?i.appendChild(o):e(o).wrap("<li></li>"))}}function k(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var o=n[r];if(o.nextSibling){var i=o.nextSibling,a=e("<li>");e(o.parentNode).after(a);do{var s=i;i=i.nextSibling,a.append(s)}while(i)}}}function I(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var o=n[r];if(t.node.isFirstSibling(o))e(o).before("<br/>");else if(o.previousSibling&&"BR"==o.previousSibling.tagName){for(var i=o.previousSibling.previousSibling;i&&t.node.hasClass(i,"fr-marker");)i=i.previousSibling;i&&"BR"!=i.tagName&&e(o.previousSibling).remove()}}}function A(){for(var n=t.el.querySelectorAll("li:empty"),r=0;r<n.length;r++)e(n[r]).remove()}function O(){for(var n=t.el.querySelectorAll("ul, ol"),r=0;r<n.length;r++)for(var o=t.node.contents(n[r]),i=null,a=o.length-1;a>=0;a--)"LI"!=o[a].tagName?(i||(i=e("<li>"),i.insertBefore(o[a])),i.prepend(o[a])):i=null}function N(){if(t.html.defaultTag())for(var n=t.el.querySelectorAll("li > "+t.html.defaultTag()),r=n.length-1;r>=0;r--){var o=n[r];o.previousSibling&&!t.node.isEmpty(o)&&e("<br>").insertAfter(o.previousSibling),o.outerHTML=o.innerHTML}}function L(){C(),w(),T(),x(),k(),I(),O(),A(),N()}function _(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var F,D,B,R,P=[];return{_init:_,html:v,toHTML5:p,tables:S,lists:L,quotes:b,invisibleSpaces:u,exec:d}},e.FE.MODULES.spaces=function(t){function n(n,r){var o=n.previousSibling,i=n.nextSibling,a=n.textContent,s=n.parentNode;if(!t.html.isPreformatted(s)){r&&(a=a.replace(/[\f\n\r\t\v ]{2,}/g," "),i&&"BR"!==i.tagName&&!t.node.isBlock(i)||!t.node.isBlock(s)&&!t.node.isLink(s)||(a=a.replace(/[\f\n\r\t\v ]{1,}$/g,"")),o&&"BR"!==o.tagName&&!t.node.isBlock(o)||!t.node.isBlock(s)&&!t.node.isLink(s)||(a=a.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===a&&(o&&o.nodeType!=Node.TEXT_NODE||i&&i.nodeType!=Node.TEXT_NODE)&&(a="")),a=a.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",c=0;c<a.length;c++)32!=a.charCodeAt(c)||0!==c&&32!=l.charCodeAt(c-1)?l+=a[c]:l+=e.FE.UNICODE_NBSP;(!i&&t.node.isBlock(n.parentNode)||i&&t.node.isBlock(i)||i&&i.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(i)&&"block"==t.win.getComputedStyle(i).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!o||t.node.isVoid(o)||t.node.isBlock(o)||(l=l.replace(/^\u00A0([^ $])/," $1"),1!==l.length||160!==l.charCodeAt(0)||!i||t.node.isVoid(i)||t.node.isBlock(i)||(l=" ")),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=l&&(n.textContent=l)}}function r(e,r){if(void 0!==e&&e||(e=t.el),void 0===r&&(r=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)n(e,r);else if(e.nodeType==Node.ELEMENT_NODE)for(var o=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){for(var n=e.parentNode;n&&n!==t.el;){if("STYLE"==n.tagName||"IFRAME"==n.tagName)return!1;if("PRE"===n.tagName)return!1;n=n.parentNode}return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")}),!1);o.nextNode();)n(o.currentNode,r)}function o(){for(var e=[],n=t.el.querySelectorAll(".fr-marker"),o=0;o<n.length;o++){var i=null;i=t.node.blockParent(n[o])||n[o];for(var a=i.nextSibling,s=i.previousSibling;a&&"BR"==a.tagName;)a=a.nextSibling;for(;s&&"BR"==s.tagName;)s=s.previousSibling;i&&e.indexOf(i)<0&&e.push(i),s&&e.indexOf(s)<0&&e.push(s),a&&e.indexOf(a)<0&&e.push(a)}for(var l=0;l<e.length;l++)r(e[l])}return{normalize:r,normalizeAroundCursor:o}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function r(e){return-1!=["PRE","SCRIPT"].indexOf(e.tagName)}function o(n){var r,o=[],i=[];if(n){var s=t.el.querySelectorAll(".fr-marker");for(r=0;r<s.length;r++){var l=t.node.blockParent(s[r])||s[r];if(l){var c=l.nextSibling,d=l.previousSibling;l&&i.indexOf(l)<0&&t.node.isBlock(l)&&i.push(l),d&&t.node.isBlock(d)&&i.indexOf(d)<0&&i.push(d),c&&t.node.isBlock(c)&&i.indexOf(c)<0&&i.push(c)}}}else i=t.el.querySelectorAll(a());var u=a();for(u+=","+e.FE.VOID_ELEMENTS.join(","),u+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",r=i.length-1;r>=0;r--)if(!(i[r].textContent&&i[r].textContent.replace(/\u200B|\n/g,"").length>0||i[r].querySelectorAll(u).length>0)){for(var p=t.node.contents(i[r]),f=!1,g=0;g<p.length;g++)if(p[g].nodeType!=Node.COMMENT_NODE&&p[g].textContent&&p[g].textContent.replace(/\u200B|\n/g,"").length>0){f=!0;break}f||o.push(i[r])}return o}function i(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function a(){return e.FE.BLOCK_TAGS.join(", ")}function s(n){var r=e.merge([],e.FE.VOID_ELEMENTS);r=e.merge(r,t.opts.htmlAllowedEmptyTags),void 0===n&&(r=e.merge(r,e.FE.BLOCK_TAGS));var o,i;o=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)");do{i=!1;for(var a=0;a<o.length;a++)0!==o[a].attributes.length&&void 0===o[a].getAttribute("href")||(o[a].parentNode.removeChild(o[a]),i=!0);o=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)")}while(o.length&&i)}function l(e,r){var o=n();if(r&&(o="div"),o){for(var i=t.doc.createDocumentFragment(),a=null,s=!1,l=e.firstChild;l;){var c=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))a=null,i.appendChild(l);else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)a=null,i.appendChild(l);else if("BR"==l.tagName)null==a?(a=t.doc.createElement(o),r&&a.setAttribute("class","fr-temp-div"),a.setAttribute("data-empty",!0),a.appendChild(l),i.appendChild(a)):!1===s&&(a.appendChild(t.doc.createElement("br")),r&&a.setAttribute("class","fr-temp-div"),a.setAttribute("data-empty",!0)),a=null;else{var d=l.textContent;l.nodeType==Node.TEXT_NODE&&0===d.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==a&&(a=t.doc.createElement(o),r&&a.setAttribute("class","fr-temp-div"),i.appendChild(a),s=!1),a.appendChild(l),s||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===d.replace(/ /g,"").length||(s=!0))}l=c}e.innerHTML="",e.appendChild(i)}}function c(e,t){for(var n=0;n<e.length;n++)l(e[n],t)}function d(e,n,r,o){if(!t.$wp)return!1;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1);var i=t.$wp.scrollTop();l(t.el,e),o&&c(t.el.querySelectorAll(".fr-inner"),e),n&&c(t.el.querySelectorAll("td, th"),e),r&&c(t.el.querySelectorAll("blockquote"),e),i!=t.$wp.scrollTop()&&t.$wp.scrollTop(i)}function u(){t.$el.find("div.fr-temp-div").each(function(){e(this).attr("data-empty")||["LI","TD","TH"].indexOf(this.parentNode.tagName)>=0||t.node.isBlock(this.nextSibling)&&!e(this.nextSibling).hasClass("fr-temp-div")?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""===e(this).attr("class")}).removeAttr("class")}function p(n){for(var r=o(n),i=0;i<r.length;i++){var a=r[i];"false"===a.getAttribute("contenteditable")||a.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(a)||"TABLE"!=a.tagName&&"TBODY"!=a.tagName&&"TR"!=a.tagName&&a.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var s=t.node.contents(t.el);s.length&&s[s.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}}function f(){return t.$el.get(0).querySelectorAll(a())}function g(e){if(void 0===e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);n.nextNode();){var o=n.currentNode;if(!r(o.parentNode)){var i=t.node.isBlock(o.parentNode)||t.node.isElement(o.parentNode),a=o.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(i){var s=o.previousSibling,l=o.nextSibling;s&&l&&" "==a?a=t.node.isBlock(s)&&t.node.isBlock(l)?"":"\n":(s||(a=a.replace(/^ */,"")),l||(a=a.replace(/ *$/,"")))}o.textContent=a}}}function h(e,t,n){var r=new RegExp(t,"gi"),o=r.exec(e);return o?o[n]:null}function m(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function v(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function b(n,r){var o=n.parentNode;if(o&&(t.node.isBlock(o)||t.node.isElement(o))&&["TD","TH"].indexOf(o.tagName)<0){for(var i=n.previousSibling,a=n.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.replace(/\n|\r/g,"").length;)i=i.previousSibling;i&&o&&"BR"!=i.tagName&&!t.node.isBlock(i)&&!a&&o.textContent.replace(/\u200B/g,"").length>0&&i.textContent.length>0&&!t.node.hasClass(i,"fr-marker")&&(t.el==o&&!a&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(r&&t.selection.save(),n.parentNode.removeChild(n),r&&t.selection.restore()))}else!o||t.node.isBlock(o)||t.node.isElement(o)||n.previousSibling||n.nextSibling||b(n.parentNode,r)}function y(){var e,n,r=t.selection.element();e=t.node.isBlock(r)?r:t.node.blockParent(r);var o=[];if(e){var i=e.nextSibling,a=e.previousSibling;e&&o.indexOf(e)<0&&o.push(e),a&&t.node.isBlock(a)&&o.indexOf(a)<0&&o.push(a),i&&t.node.isBlock(i)&&o.indexOf(i)<0&&o.push(i)}var s=[];for(n=0;n<o.length;n++)for(var l=o[n].querySelectorAll("br"),c=0;c<l.length;c++)s.indexOf(l[c])<0&&s.push(l[c]);if(r.parentNode==t.el){var d=t.el.children;for(n=0;n<d.length;n++)"BR"==d[n].tagName&&s.indexOf(d[n])<0&&s.push(d[n])}return s}function E(e,n){var r,o=null;if(e)for(o=y(),r=0;r<o.length;r++)b(o[r],n);else for(o=t.el.getElementsByTagName("br"),r=0;r<o.length;r++)b(o[r],n)}function S(){t.opts.htmlUntouched||(s(),d()),g(),t.opts.htmlUntouched||(t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs()),t.selection.restore(),C(),t.placeholder.refresh()}function C(){t.core.isEmpty()&&(null!=n()?t.el.querySelector(a())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function w(e,t){return h(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function T(n,r){var o=e("<div "+(h(n,"<"+r+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(o.get(0))}function x(e){return h(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function k(e,n){t.opts.htmlExecuteScripts?e.html(n):e.get(0).innerHTML=n}function I(n){var r=t.clean.html(n||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var o=w(r,"body")||(r.indexOf("<body")>=0?"":r),i=T(r,"body"),a=w(r,"head")||"<title></title>",s=T(r,"head"),l=e("<div>").append(a).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)}).end().html().trim();a=e("<div>").append(a).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"\x3c!--"+this.nodeValue+"--\x3e":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""}).toArray().join("");var c=x(r),d=T(r,"html");k(t.$el,l+"\n"+o),t.node.clearAttributes(t.el),t.$el.attr(i),t.$el.addClass("fr-view"),t.$el.attr("spellcheck",t.opts.spellcheck),t.$el.attr("dir",t.opts.direction),k(t.$head,a),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(s),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(d),t.iframe_document.doctype.parentNode.replaceChild(m(c,t.iframe_document),t.iframe_document.doctype)}else k(t.$el,r);var u=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),S(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),u&&t.edit.off(),t.events.trigger("html.set")}function A(e){var t=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,r=/(\.[^\s\+>~\.\[:]+)/g,o=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,i=/(:[\w-]+\([^\)]*\))/gi,a=/(:[^\s\+>~\.\[:]+)/g,s=/([^\s\+>~\.\[:]+)/g;!function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}();var l=100*(e.match(t)||[]).length+10*(e.match(n)||[]).length+10*(e.match(r)||[]).length+10*(e.match(i)||[]).length+10*(e.match(a)||[]).length+(e.match(o)||[]).length;return e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),l+=(e.match(s)||[]).length}function O(e){if(t.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""===e.getAttribute("class")&&e.removeAttribute("class"),e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll('[class=""]'),r=0;r<n.length;r++)n[r].removeAttribute("class")}function N(e,t){return e[3]-t[3]}function L(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var r="";t.events.trigger("html.beforeGet");var o,i,a=[],s={},l=[];if(!t.opts.useClasses&&!n){var c=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(o=0;o<t.doc.styleSheets.length;o++){var d,u=0;try{d=t.doc.styleSheets[o].cssRules,t.doc.styleSheets[o].ownerNode&&"STYLE"==t.doc.styleSheets[o].ownerNode.nodeType&&(u=1)}catch(e){}if(d)for(var p=0,f=d.length;p<f;p++)if(d[p].selectorText&&d[p].style.cssText.length>0){var g,h=d[p].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{g=t.el.querySelectorAll(h)}catch(e){g=[]}for(i=0;i<g.length;i++){!g[i].getAttribute("fr-original-style")&&g[i].getAttribute("style")?(g[i].setAttribute("fr-original-style",g[i].getAttribute("style")),a.push(g[i])):g[i].getAttribute("fr-original-style")||a.push(g[i]),s[g[i]]||(s[g[i]]={});for(var m=1e3*u+A(d[p].selectorText),b=d[p].style.cssText.split(";"),y=0;y<b.length;y++){var E=b[y].trim().split(":")[0];E.match(c)||(s[g[i]][E]||(s[g[i]][E]=0,(g[i].getAttribute("fr-original-style")||"").indexOf(E+":")>=0&&(s[g[i]][E]=1e4)),m>=s[g[i]][E]&&(s[g[i]][E]=m,b[y].trim().length&&l.push([g[i],E.trim(),b[y].trim().split(":")[1].trim(),m])))}}}}for(l.sort(N),o=0;o<l.length;o++){var S=l[o];S[0].style[S[1]]=S[2]}for(o=0;o<a.length;o++)if(a[o].getAttribute("class")&&(a[o].setAttribute("fr-original-class",a[o].getAttribute("class")),a[o].removeAttribute("class")),(a[o].getAttribute("fr-original-style")||"").trim().length>0){var C=a[o].getAttribute("fr-original-style").split(";");for(i=0;i<C.length;i++)C[i].indexOf(":")>0&&(a[o].style[C[i].split(":")[0].trim()]=C[i].split(":")[1].trim())}}if(t.core.isEmpty()?t.opts.fullPage&&(r=v(t.iframe_document),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):(void 0===e&&(e=!1),t.opts.fullPage?(r=v(t.iframe_document),t.$el.removeClass("fr-view"),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>",t.$el.addClass("fr-view")):r=t.$el.html()),!t.opts.useClasses&&!n)for(o=0;o<a.length;o++)a[o].getAttribute("fr-original-class")&&(a[o].setAttribute("class",a[o].getAttribute("fr-original-class")),a[o].removeAttribute("fr-original-class")),a[o].getAttribute("fr-original-style")?(a[o].setAttribute("style",a[o].getAttribute("fr-original-style")),a[o].removeAttribute("fr-original-style")):a[o].removeAttribute("style");t.opts.fullPage&&(r=r.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),r=r.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),r=r.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),r=r.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(r=r.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(r=r.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),r=t.clean.invisibleSpaces(r),r=t.clean.exec(r,O);var w=t.events.chainTrigger("html.get",r);return"string"==typeof w&&(r=w),r=r.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function _(){var n="";if(void 0!==t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var r=t.selection.ranges(),o=0;o<r.length;o++){var i=document.createElement("div");i.appendChild(r[o].cloneContents());var a=i.children;if(a.length){var s=a[a.length-1];("P"==s.tagName&&t.opts.enter==e.FroalaEditor.ENTER_P||"DIV"==s.tagName&&t.opts.enter==e.FroalaEditor.ENTER_DIV)&&t.node.isEmpty(s)&&i.removeChild(s)}(function(n,r){for(;r&&(r.nodeType==Node.TEXT_NODE||!t.node.isBlock(r))&&!t.node.isElement(r);)r&&r.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(r)+t.node.closeTagString(r)),r=r.parentNode;r&&n.innerHTML==r.innerHTML&&(n.innerHTML=r.outerHTML)})(i,function(){var n,r=null;return t.win.getSelection?(n=t.win.getSelection())&&n.rangeCount&&(r=n.getRangeAt(0).commonAncestorContainer,r.nodeType!=Node.ELEMENT_NODE&&(r=r.parentNode)):(n=t.doc.selection)&&"Control"!=n.type&&(r=n.createRange().parentElement()),null!=r&&(e.inArray(t.el,e(r).parents())>=0||r==t.el)?r:null}()),e(i).find(".fr-element").length>0&&(i=t.el),n+=i.innerHTML}}else void 0!==t.doc.selection&&"Text"==t.doc.selection.type&&(n=t.doc.selection.createRange().htmlText);return n}function F(e){var n=t.doc.createElement("div");return n.innerHTML=e,null!==n.querySelector(a())}function D(e){var n=t.doc.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function B(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function R(n,r,o){t.selection.isCollapsed()||t.selection.remove();var i;if(i=r?n:t.clean.html(n),i=i.replace(/\r|\n/g," "),n.indexOf('class="fr-marker"')<0&&(i=D(i)),t.core.isEmpty()&&!t.opts.keepFormatOnDelete)t.el.innerHTML=i;else{var a=t.markers.insert();if(a){t.node.isLastSibling(a)&&e(a).parent().hasClass("fr-deletable")&&e(a).insertAfter(e(a).parent());var s=t.node.blockParent(a);if((F(i)||o)&&(t.node.deepestParent(a)||s&&"LI"==s.tagName)){if(!(a=t.markers.split()))return!1;a.outerHTML=i}else a.outerHTML=i}else t.el.innerHTML=t.el.innerHTML+i}S(),t.events.trigger("html.inserted")}function P(n){var r=null;if(void 0===n&&(r=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var o=r?(r.textContent.match(/\u200B/g)||[]).length-r.querySelectorAll(".fr-marker").length:0;if((t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length==o)return!1;var i,a;do{a=!1,i=t.el.querySelectorAll("*:not(.fr-marker)");for(var s=0;s<i.length;s++){var l=i[s];if(r!=l){var c=l.textContent;0===l.children.length&&1===c.length&&8203==c.charCodeAt(0)&&(e(l).remove(),a=!0)}}}while(a)}function M(){if(t.$wp){var e=function(){P(),t.placeholder&&setTimeout(t.placeholder.refresh,0)};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",C)}}return{defaultTag:n,isPreformatted:r,emptyBlocks:o,emptyBlockTagsQuery:i,blockTagsQuery:a,fillEmptyBlocks:p,cleanEmptyTags:s,cleanWhiteTags:P,cleanBlankSpaces:g,blocks:f,getDoctype:v,set:I,get:L,getSelected:_,insert:R,wrap:d,unwrap:u,escapeEntities:B,checkIfEmpty:C,extractNode:w,extractNodeAttrs:T,extractDoctype:x,cleanBRs:E,_init:M}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css("overflow","auto"),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function r(){if(!e.$wp)return!1;n(),e.$iframe&&(e.events.on("keyup keydown",function(){setTimeout(t,0)},!0),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t))}return{_init:r,syncIframe:t,refresh:n}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){function n(e){return o&&o.translation[e]?o.translation[e]:e}function r(){e.FE.LANGUAGE&&(o=e.FE.LANGUAGE[t.opts.language]),o&&o.direction&&(t.opts.direction=o.direction)}var o;return{_init:r,translate:n}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.placeholder=function(t){function n(){t.$placeholder||a();var n=0,r=0,o=0,i=0,s=0,l=0,c=t.node.contents(t.el),d=e(t.selection.element()).css("text-align");if(c.length&&c[0].nodeType==Node.ELEMENT_NODE){var u=e(c[0]);!t.opts.toolbarInline&&t.ready&&(n=t.helpers.getPX(u.css("margin-top")),i=t.helpers.getPX(u.css("padding-top")),r=t.helpers.getPX(u.css("margin-left")),o=t.helpers.getPX(u.css("margin-right")),s=t.helpers.getPX(u.css("padding-left")),l=t.helpers.getPX(u.css("padding-right"))),t.$placeholder.css("font-size",u.css("font-size")),t.$placeholder.css("line-height",u.css("line-height"))}else t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"));t.$wp.addClass("show-placeholder"),t.$placeholder.css({marginTop:Math.max(t.helpers.getPX(t.$el.css("margin-top")),n),paddingTop:Math.max(t.helpers.getPX(t.$el.css("padding-top")),i),paddingLeft:Math.max(t.helpers.getPX(t.$el.css("padding-left")),s),marginLeft:Math.max(t.helpers.getPX(t.$el.css("margin-left")),r),paddingRight:Math.max(t.helpers.getPX(t.$el.css("padding-right")),l),marginRight:Math.max(t.helpers.getPX(t.$el.css("margin-right")),o),textAlign:d}).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||"")),t.$placeholder.html(t.$placeholder.text().replace(/\n/g,"<br>"))}function r(){t.$wp.removeClass("show-placeholder")}function o(){return!t.$wp||t.node.hasClass(t.$wp.get(0),"show-placeholder")}function i(){if(!t.$wp)return!1;t.core.isEmpty()?n():r()}function a(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}function s(){if(!t.$wp)return!1;t.events.on("init input keydown keyup contentChanged initialized",i)}return{_init:s,show:n,hide:r,refresh:i,isVisible:o}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(e){}}function n(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),a=!1}function r(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),a=!0}function o(){return a}function i(){e.events.on("focus",function(){o()?e.edit.off():e.edit.on()})}var a=!1;return{_init:i,on:n,off:r,disableDesign:t,isDisabled:o}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function n(n){if(t.opts.iframe){t.$head.find("style[data-fr-style], link[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+n+"</style>");for(var r=0;r<t.opts.iframeStyleFiles.length;r++){var o=e('<link data-fr-style="true" rel="stylesheet" href="'+t.opts.iframeStyleFiles[r]+'">');o.get(0).addEventListener("load",t.size.syncIframe),t.$head.append(o)}}}function r(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function o(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),r(),t.opts.iframe){t.$iframe.addClass("fr-iframe"),t.$el.addClass("fr-view");for(var e=0;e<t.o_doc.styleSheets.length;e++){var n;try{n=t.o_doc.styleSheets[e].cssRules}catch(e){}if(n)for(var o=0,i=n.length;o<i;o++)!n[o].selectorText||0!==n[o].selectorText.indexOf(".fr-view")&&0!==n[o].selectorText.indexOf(".fr-element")||n[o].style.cssText.length>0&&(0===n[o].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-view/g,"body")+"{"+n[o].style.cssText+"}":t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-element/g,"body")+"{"+n[o].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"),t.opts.tabIndex=t.opts.tabIndex||t.$oel.attr("tabIndex"),t.opts.tabIndex&&t.$el.attr("tabIndex",t.opts.tabIndex)}function i(){return t.node.isEmpty(t.el)}function a(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}function s(e,n){var r=new XMLHttpRequest;r.open(n,e,!0),t.opts.requestWithCredentials&&(r.withCredentials=!0);for(var o in t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,t.opts.requestHeaders[o]);return r}function l(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function c(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0}function d(e){if(!e)return!1;var n=e.data("instance");return!!n&&n.id==t.id}function u(){if(e.FE.INSTANCES.push(t),a(),t.$wp){o(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",function(e){if(2==e.button)return!1});try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",function(){t.$oel.val(t.html.get())}),t.events.on("form.submit",function(){t.$oel.val(t.html.get())}),t.events.on("form.reset",function(){t.html.set(t._original_html)}),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()}),t.events.trigger("init")}return{_init:u,destroy:l,isEmpty:i,getXHR:s,injectStyle:n,hasFocus:c,sameInstance:d}},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function r(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function o(o){var i,a=n(o),s=a.nextSibling,l=a.previousSibling,c=t.html.defaultTag();if(t.node.isEmpty(a,!0)&&s){for(var d="",u="",p=o.parentNode;!t.node.isList(p)&&p.parentNode&&"LI"!==p.parentNode.tagName;)d=t.node.openTagString(p)+d,u+=t.node.closeTagString(p),p=p.parentNode;d=t.node.openTagString(p)+d,u+=t.node.closeTagString(p);var f="";for(f=p.parentNode&&"LI"==p.parentNode.tagName?u+"<li>"+e.FE.MARKERS+"<br>"+d:c?u+"<"+c+">"+e.FE.MARKERS+"<br></"+c+">"+d:u+e.FE.MARKERS+"<br>"+d,e(a).html('<span id="fr-break"></span>');["UL","OL"].indexOf(p.tagName)<0||p.parentNode&&"LI"===p.parentNode.tagName;)p=p.parentNode;var g=t.node.openTagString(p)+e(p).html()+t.node.closeTagString(p);g=g.replace(/<span id="fr-break"><\/span>/g,f),e(p).replaceWith(g),t.$el.find("li:empty").remove()}else if(l&&s||!t.node.isEmpty(a,!0)){for(var h="<br>",m=o.parentNode;m&&"LI"!=m.tagName;)h=t.node.openTagString(m)+h+t.node.closeTagString(m),m=m.parentNode;e(a).before("<li>"+h+"</li>"),e(o).remove()}else l?(i=r(a),i.parentNode&&"LI"==i.parentNode.tagName?e(i.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(i).after("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(i).after(e.FE.MARKERS+"<br>"),e(a).remove()):(i=r(a),i.parentNode&&"LI"==i.parentNode.tagName?s?e(i.parentNode).before(t.node.openTagString(a)+e.FE.MARKERS+"<br></li>"):e(i.parentNode).after(t.node.openTagString(a)+e.FE.MARKERS+"<br></li>"):c?e(i).before("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(i).before(e.FE.MARKERS+"<br>"),e(a).remove())}function i(r){for(var o=n(r),i="",a=r,s="",l="";a!=o;){a=a.parentNode;var c="A"==a.tagName&&t.cursor.isAtEnd(r,a)?"fr-to-remove":"";s=t.node.openTagString(e(a).clone().addClass(c).get(0))+s,l=t.node.closeTagString(a)+l}i=l+i+s+e.FE.MARKERS,e(r).replaceWith('<span id="fr-break"></span>');var d=t.node.openTagString(o)+e(o).html()+t.node.closeTagString(o);d=d.replace(/<span id="fr-break"><\/span>/g,i),e(o).replaceWith(d)}function a(r){for(var o=n(r),i=e.FE.MARKERS,a="",s=r,l=!1;s!=o;){s=s.parentNode;var c="A"==s.tagName&&t.cursor.isAtEnd(r,s)?"fr-to-remove":"";l||s==o||t.node.isBlock(s)||(l=!0,a+=e.FE.INVISIBLE_SPACE),a=t.node.openTagString(e(s).clone().addClass(c).get(0))+a,i+=t.node.closeTagString(s)}var d=a+i;e(r).remove(),e(o).after(d)}function s(o){var i=n(o),a=i.previousSibling;if(a){a=e(a).find(t.html.blockTagsQuery()).get(-1)||a,e(o).replaceWith(e.FE.MARKERS);var s=t.node.contents(a);s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(i).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==i&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,c=t.node.contents(i)[0];c&&!t.node.isList(c);)l=c.nextSibling,e(a).append(c),c=l;for(a=i.previousSibling;c;)l=c.nextSibling,e(a).append(c),c=l;e(i).remove()}else{var d=r(i);if(e(o).replaceWith(e.FE.MARKERS),d.parentNode&&"LI"==d.parentNode.tagName){var u=d.previousSibling;t.node.isBlock(u)?(e(i).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==i&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(u).append(e(i).html())):e(d).before(e(i).html())}else{var p=t.html.defaultTag();p&&0===e(i).find(t.html.blockTagsQuery()).length?e(d).before("<"+p+">"+e(i).html()+"</"+p+">"):(e(d).before(e(i).html()),t.html.wrap())}e(i).remove(),0===e(d).find("li").length&&e(d).remove()}}function l(r){var o,i=n(r),a=i.nextSibling;if(a){o=t.node.contents(a),o.length&&"BR"==o[0].tagName&&e(o[0]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var s,l=r,c=t.node.contents(a)[0];c&&!t.node.isList(c);)s=c.nextSibling,e(l).after(c),l=c,c=s;for(;c;)s=c.nextSibling,e(i).append(c),c=s;e(r).replaceWith(e.FE.MARKERS),e(a).remove()}else{for(var d=i;!d.nextSibling&&d!=t.el;)d=d.parentNode;if(d==t.el)return!1;if(d=d.nextSibling,t.node.isBlock(d))e.FE.NO_DELETE_TAGS.indexOf(d.tagName)<0&&(e(r).replaceWith(e.FE.MARKERS),o=t.node.contents(i),o.length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),e(i).append(e(d).html()),e(d).remove());else for(o=t.node.contents(i),o.length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),e(r).replaceWith(e.FE.MARKERS);d&&!t.node.isBlock(d)&&"BR"!=d.tagName;)e(i).append(e(d)),d=d.nextSibling}}return{_startEnter:o,_middleEnter:i,_endEnter:a,_backspace:s,_del:l}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?n(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&n(e.parentNode)))}function r(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?r(e.previousSibling):!e.previousSibling&&r(e.parentNode)))}function o(e,n){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?o(e.previousSibling,n):!e.previousSibling&&(e.parentNode==n||o(e.parentNode,n)))}function i(e,n){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?i(e.nextSibling,n):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==n||i(e.parentNode,n)))}function a(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function s(e,t){var n=new RegExp("(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])"+(t?"":"$"),"i"),r=e.match(n);return r?r[0].length:1}function l(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,o=t.node.deepestParent(n,[],!r);if(o&&"BLOCKQUOTE"==o.tagName){var i=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);i&&i.previousSibling&&(o=i)}if(null!==o){var a,s=o.previousSibling;if(t.node.isBlock(o)&&t.node.isEditable(o)&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(s))if(t.node.isBlock(s))if(t.node.isEmpty(s)&&!t.node.isList(s))e(s).remove(),e(n).after(t.opts.keepFormatOnDelete?e.FE.INVISIBLE_SPACE:"");else{if(t.node.isList(s)&&(s=e(s).find("li:last").get(0)),a=t.node.contents(s),a.length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),"BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=o.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[a.length-1]);)s=a[a.length-1],a=t.node.contents(s);else if("BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==o.tagName)for(a=t.node.contents(o);a.length&&t.node.isBlock(a[0]);)o=a[0],a=t.node.contents(o);t.node.isEmpty(o)?(e(n).remove(),t.selection.setAtEnd(s,t.opts.keepFormatOnDelete)):(e(n).replaceWith(e.FE.MARKERS),e(s).append(o.innerHTML)),e(o).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==o.tagName&&s.nodeType==Node.ELEMENT_NODE?e(s).remove():(e(s).after(t.node.isEmpty(o)?"":e(o).html()),e(o).remove(),"BR"==s.tagName&&e(s).remove())}}function c(n){for(var r=n;!r.previousSibling;)if(r=r.parentNode,t.node.isElement(r))return!1;r=r.previousSibling;var o;if(!t.node.isBlock(r)&&t.node.isEditable(r)){for(o=t.node.contents(r);r.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(r)&&o.length&&t.node.isEditable(r);)r=o[o.length-1],o=t.node.contents(r);if(r.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;var i=r.textContent,a=i.length;t.opts.tabSpaces&&i.length>=t.opts.tabSpaces&&0===i.substr(i.length-t.opts.tabSpaces,i.length-1).replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(a=i.length-t.opts.tabSpaces),r.textContent=i.substring(0,a-s(i));var l=i.length!=r.textContent.length;0===r.textContent.length?l&&t.opts.keepFormatOnDelete?e(r).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):(2!=r.parentNode.childNodes.length||r.parentNode!=n.parentNode)&&1!=r.parentNode.childNodes.length||t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode)?(e(r).after(e.FE.MARKERS),t.node.isElement(r.parentNode)&&!n.nextSibling&&r.previousSibling&&"BR"==r.previousSibling.tagName&&e(n).after("<br>"),r.parentNode.removeChild(r)):(e(r.parentNode).after(e.FE.MARKERS),e(r.parentNode).remove()):e(r).after(e.FE.MARKERS)}else t.node.isDeletable(r)?(e(r).after(e.FE.MARKERS),e(r).remove()):n.nextSibling&&"BR"==n.nextSibling.tagName&&t.node.isVoid(r)&&"BR"!=r.tagName?(e(n.nextSibling).remove(),e(n).replaceWith(e.FE.MARKERS)):!1!==t.events.trigger("node.remove",[e(r)])&&(e(r).after(e.FE.MARKERS),e(r).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0&&(t.node.isEditable(r)||t.node.isDeletable(r)))if(t.node.isDeletable(r))e(n).replaceWith(e.FE.MARKERS),e(r).remove();else if(t.node.isEmpty(r)&&!t.node.isList(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(r)&&(r=e(r).find("li:last").get(0)),o=t.node.contents(r),o&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),o=t.node.contents(r);o&&t.node.isBlock(o[o.length-1]);)r=o[o.length-1],o=t.node.contents(r);e(r).append(e.FE.MARKERS);for(var c=n;!c.previousSibling;)c=c.parentNode;for(;c&&"BR"!==c.tagName&&!t.node.isBlock(c);){var d=c;c=c.nextSibling,e(r).append(d)}c&&"BR"==c.tagName&&e(c).remove(),e(n).remove()}else n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove()}function d(){var i=!1,d=t.markers.insert();if(!d)return!0;for(var u=d.parentNode;u&&!t.node.isElement(u);){if("false"===u.getAttribute("contenteditable"))return e(d).replaceWith(e.FE.MARKERS),t.selection.restore(),!1;if("true"===u.getAttribute("contenteditable"))break;u=u.parentNode}t.el.normalize();var p=d.previousSibling;if(p){var f=p.textContent;f&&f.length&&8203==f.charCodeAt(f.length-1)&&(1==f.length?e(p).remove():p.textContent=p.textContent.substr(0,f.length-s(f)))}return n(d)?i=c(d):r(d)?a(d)&&o(d,e(d).parents("li:first").get(0))?t.cursorLists._backspace(d):l(d):i=c(d),e(d).remove(),g(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore(),i}function u(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,o=t.node.deepestParent(n,[],!r);if(o&&"BLOCKQUOTE"==o.tagName){var i=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);i&&i.nextSibling&&(o=i)}if(null!==o){var a,s=o.nextSibling;if(t.node.isBlock(o)&&(t.node.isEditable(o)||t.node.isDeletable(o))&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(s)&&t.node.isEditable(s))if(t.node.isList(s))if(t.node.isEmpty(o,!0))e(o).remove(),e(s).find("li:first").prepend(e.FE.MARKERS);else{var l=e(s).find("li:first");"BLOCKQUOTE"==o.tagName&&(a=t.node.contents(o),a.length&&t.node.isBlock(a[a.length-1])&&(o=a[a.length-1])),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(o).append(t.node.contents(l.get(0))),l.remove(),0===e(s).find("li").length&&e(s).remove())}else{if(a=t.node.contents(s),a.length&&"BR"==a[0].tagName&&e(a[0]).remove(),"BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==o.tagName)for(a=t.node.contents(o);a.length&&t.node.isBlock(a[a.length-1]);)o=a[a.length-1],a=t.node.contents(o);else if("BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=o.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[0]);)s=a[0],a=t.node.contents(s);e(n).replaceWith(e.FE.MARKERS),e(o).append(s.innerHTML),e(s).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);s&&"BR"!==s.tagName&&!t.node.isBlock(s)&&t.node.isEditable(s);){var c=s;s=s.nextSibling,e(o).append(c)}s&&"BR"==s.tagName&&t.node.isEditable(s)&&e(s).remove()}}}function p(r){for(var o=r;!o.nextSibling;)if(o=o.parentNode,t.node.isElement(o))return!1;if(o=o.nextSibling,"BR"==o.tagName&&t.node.isEditable(o))if(o.nextSibling){if(t.node.isBlock(o.nextSibling)&&t.node.isEditable(o.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(o.nextSibling.tagName)<0))return void e(o).remove();o=o.nextSibling,e(o.previousSibling).remove()}}else if(n(o)){if(a(r))t.cursorLists._del(r);else{var i=t.node.deepestParent(o);i&&((!t.node.isEmpty(t.node.blockParent(o))||(t.node.blockParent(o).nextSibling&&e.FE.NO_DELETE_TAGS.indexOf(t.node.blockParent(o).nextSibling.tagName))<0)&&e(o).remove(),u(r))}return}var l;if(!t.node.isBlock(o)&&t.node.isEditable(o)){for(l=t.node.contents(o);o.nodeType!=Node.TEXT_NODE&&l.length&&!t.node.isDeletable(o)&&t.node.isEditable(o);)o=l[0],l=t.node.contents(o);o.nodeType==Node.TEXT_NODE?(e(o).before(e.FE.MARKERS),o.textContent.length&&(o.textContent=o.textContent.substring(s(o.textContent,!0),o.textContent.length))):t.node.isDeletable(o)?(e(o).before(e.FE.MARKERS),e(o).remove()):!1!==t.events.trigger("node.remove",[e(o)])&&(e(o).before(e.FE.MARKERS),e(o).remove()),e(r).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(o.tagName)<0&&(t.node.isEditable(o)||t.node.isDeletable(o)))if(t.node.isDeletable(o))e(r).replaceWith(e.FE.MARKERS),e(o).remove();else if(t.node.isList(o))r.previousSibling?(e(o).find("li:first").prepend(r),t.cursorLists._backspace(r)):(e(o).find("li:first").prepend(e.FE.MARKERS),e(r).remove());else if(l=t.node.contents(o),l&&"BR"==l[0].tagName&&e(l[0]).remove(),l&&"BLOCKQUOTE"==o.tagName){var c=l[0];for(e(r).before(e.FE.MARKERS);c&&"BR"!=c.tagName;){var d=c;c=c.nextSibling,e(r).before(d)}c&&"BR"==c.tagName&&e(c).remove()}else e(r).after(e(o).html()).after(e.FE.MARKERS),e(o).remove()}function f(){var o=t.markers.insert();if(!o)return!1;if(t.el.normalize(),n(o))if(a(o))if(0===e(o).parents("li:first").find("ul, ol").length)t.cursorLists._del(o);else{var i=e(o).parents("li:first").find("ul:first, ol:first").find("li:first");i=i.find(t.html.blockTagsQuery()).get(-1)||i,i.prepend(o),t.cursorLists._backspace(o)}else u(o);else p((r(o),o));e(o).remove(),g(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}function g(){for(var e=t.el.querySelectorAll("blockquote:empty"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function h(){t.$el.find(".fr-to-remove").each(function(){for(var n=t.node.contents(this),r=0;r<n.length;r++)n[r].nodeType==Node.TEXT_NODE&&(n[r].textContent=n[r].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function m(n,r,o){var a,s=t.node.deepestParent(n,[],!o);if(s&&"BLOCKQUOTE"==s.tagName)return i(n,s)?(a=t.html.defaultTag(),a?e(s).after("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(s).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(b(n,r,o),!1);if(null==s)a=t.html.defaultTag(),a&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):!n.previousSibling||e(n.previousSibling).is("br")||n.nextSibling?e(n).replaceWith("<br>"+e.FE.MARKERS):e(n).replaceWith("<br>"+e.FE.MARKERS+"<br>");else{var l=n,c="";t.node.isBlock(s)&&!r||(c="<br/>");var d="",u="";a=t.html.defaultTag();var p="",f="";a&&t.node.isBlock(s)&&(p="<"+a+">",f="</"+a+">",s.tagName==a.toUpperCase()&&(p=t.node.openTagString(e(s).clone().removeAttr("id").get(0))));do{if(l=l.parentNode,!r||l!=s||r&&!t.node.isBlock(s))if(d+=t.node.closeTagString(l),l==s&&t.node.isBlock(s))u=p+u;else{var g="A"==l.tagName&&i(n,l)?"fr-to-remove":"";u=t.node.openTagString(e(l).clone().addClass(g).get(0))+u}}while(l!=s);c=d+c+u+(n.parentNode==s&&t.node.isBlock(s)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(s)&&!e(s).find("*:last").is("br")&&e(s).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),s.nextSibling&&!t.node.isBlock(s.nextSibling)||t.node.isBlock(s)||e(s).after("<br>");var h;h=!r&&t.node.isBlock(s)?t.node.openTagString(s)+e(s).html()+f:t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s),h=h.replace(/<span id="fr-break"><\/span>/g,c),e(s).replaceWith(h)}}function v(n,r,a){var s,l=t.node.deepestParent(n,[],!a);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(n),v(n,r,a);if(l&&"BLOCKQUOTE"==l.tagName){if(o(n,l))return s=t.html.defaultTag(),s?e(l).before("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(l).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1;i(n,l)?m(n,r,!0):b(n,r,!0)}if(null==l)s=t.html.defaultTag(),s&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(r)e(n).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return m(n,r,a);e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function b(n,r,a){var s=t.node.deepestParent(n,[],!a);if(null==s)t.html.defaultTag()&&n.parentNode===t.el?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(n.nextSibling&&!t.node.isBlock(n.nextSibling)||e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,c="";"PRE"==s.tagName&&(r=!0),t.node.isBlock(s)&&!r||(c="<br>");var d="",u="";do{var p=l;if(l=l.parentNode,"BLOCKQUOTE"==s.tagName&&t.node.isEmpty(p)&&!t.node.hasClass(p,"fr-marker")&&e(p).find(n).length>0&&e(p).after(n),("BLOCKQUOTE"!=s.tagName||!i(n,l)&&!o(n,l))&&(!r||l!=s||r&&!t.node.isBlock(s))){d+=t.node.closeTagString(l);var f="A"==l.tagName&&i(n,l)?"fr-to-remove":"";u=t.node.openTagString(e(l).clone().addClass(f).removeAttr("id").get(0))+u}}while(l!=s);var g=s==n.parentNode&&t.node.isBlock(s)||n.nextSibling;if("BLOCKQUOTE"==s.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var h=t.html.defaultTag();c=d+c+(h?"<"+h+">":"")+e.FE.MARKERS+"<br>"+(h?"</"+h+">":"")+u}else c=d+c+u+(g?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var m=t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s);m=m.replace(/<span id="fr-break"><\/span>/g,c),e(s).replaceWith(m)}}function y(o){var i=t.markers.insert();if(!i)return!0;t.el.normalize();var s=!1;e(i).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(o=!1,s=!0),e(i).parentsUntil(t.$el,"TD, TH").length&&(s=!1),n(i)?!a(i)||o||s?m(i,o,s):t.cursorLists._endEnter(i):r(i)?!a(i)||o||s?v(i,o,s):t.cursorLists._startEnter(i):!a(i)||o||s?b(i,o,s):t.cursorLists._middleEnter(i),h(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}return{enter:y,backspace:d,del:f,isAtEnd:i,isAtStart:o}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function n(e){N=null,t.opts.multiLine?t.helpers.isIOS()?N=t.snapshot.get():(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function r(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function o(){setTimeout(function(){t.events.disableBlur(),t.events.focus()},0)}function i(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),k=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(),k=!1),t.placeholder.refresh()}function a(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function s(n){var r=t.selection.element();if(!t.helpers.isMobile()&&(t.browser.mozilla||r&&"A"==r.tagName)){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var o=t.markers.insert();if(o){var i=o.previousSibling;!o.nextSibling&&o.parentNode&&"A"==o.parentNode.tagName?(o.parentNode.insertAdjacentHTML("afterend","&nbsp;"+e.FE.MARKERS),o.parentNode.removeChild(o)):(i&&i.nodeType==Node.TEXT_NODE&&1==i.textContent.length&&160==i.textContent.charCodeAt(0)?i.textContent=i.textContent+" ":o.insertAdjacentHTML("beforebegin","&nbsp;"),o.outerHTML=e.FE.MARKERS),t.selection.restore()}}}function l(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!O){var e=t.selection.ranges(0),n=e.startContainer,r=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&r<=n.textContent.length&&r>0&&32==n.textContent.charCodeAt(r-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function c(){t.selection.isFull()&&setTimeout(function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function d(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var n="",r=0;r<t.opts.tabSpaces;r++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh(),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function u(){O=!1}function p(){return O}function f(l){t.events.disableBlur(),k=!0;var c=l.which;if(16===c)return!0;if(229===c)return O=!0,!0;O=!1;var u=E(c)&&!b(l),p=c==e.FE.KEYCODE.BACKSPACE||c==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||p&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(u||p)){var f=t.html.defaultTag();if(f?t.$el.html("<"+f+">"+e.FE.MARKERS+"<br/></"+f+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!E(c))return l.preventDefault(),!0}c==e.FE.KEYCODE.ENTER?l.shiftKey?r(l):n(l):c===e.FE.KEYCODE.BACKSPACE&&(l.metaKey||l.ctrlKey)?o():c!=e.FE.KEYCODE.BACKSPACE||b(l)||l.altKey?c!=e.FE.KEYCODE.DELETE||b(l)||l.altKey?c==e.FE.KEYCODE.SPACE?s(l):c==e.FE.KEYCODE.TAB?d(l):b(l)||!E(l.which)||t.selection.isCollapsed()||l.ctrlKey||t.selection.remove():t.placeholder.isVisible()?(l.preventDefault(),l.stopPropagation()):a(l):t.placeholder.isVisible()?(l.preventDefault(),l.stopPropagation()):i(l),t.events.enableBlur()}function g(e){for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);n.nextNode();){var r=n.currentNode;r.textContent=r.textContent.replace(/\u200B/gi,"")}}function h(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-t.helpers.scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+t.helpers.scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(n+=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top,n-=t.helpers.scrollTop()),n+=t.opts.toolbarStickyOffset,n>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.toolbarBottom||(n-=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top,n-=t.helpers.scrollTop()),n<t.$tb.height()+20&&n>=0&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.$tb.height()-20))}function m(){var n=t.selection.element(),r=t.node.blockParent(n);if(r&&"DIV"==r.tagName&&t.selection.info(r).atStart){var o=t.html.defaultTag();r.previousSibling&&"DIV"!=r.previousSibling.tagName&&o&&"div"!=o&&(t.selection.save(),e(r).replaceWith("<"+o+">"+r.innerHTML+"</"+o+">"),t.selection.restore())}}function v(n){if(t.helpers.isIOS()&&n&&n.which==e.FE.KEYCODE.ENTER&&N&&(t.snapshot.restore(N),t.cursor.enter()),t.helpers.isAndroid&&t.browser.mozilla)return!0;if(O)return!1;if(!t.selection.isCollapsed())return!0;if(n&&(n.which===e.FE.KEYCODE.META||n.which==e.FE.KEYCODE.CTRL))return!0;if(n&&y(n.which))return!0;n&&n.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&m(),n&&(n.which==e.FE.KEYCODE.ENTER||n.which==e.FE.KEYCODE.BACKSPACE||n.which>=37&&n.which<=40&&!t.browser.msie)&&(n.which==e.FE.KEYCODE.BACKSPACE&&k||h()),t.html.cleanBRs(!0,!0);var r=t.selection.element();(function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)})(r)&&!t.node.hasClass(r,"fr-marker")&&"IFRAME"!=r.tagName&&function(e){var n=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!t.helpers.isIOS()||0===((e.textContent||"").match(n)||[]).length}(r)&&(t.selection.save(),g(r),t.selection.restore())}function b(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function y(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function E(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function S(n){var r=n.which;if(b(n)||r>=37&&r<=40||!E(r)&&r!=e.FE.KEYCODE.DELETE&&r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.ENTER&&229!=r)return!0;I||(A=t.snapshot.get(),t.undo.canDo()||t.undo.saveStep()),clearTimeout(I),I=setTimeout(function(){I=null,t.undo.saveStep()},Math.max(250,t.opts.typingTimer))}function C(e){var n=e.which;if(b(e)||n>=37&&n<=40)return!0;A&&I&&(t.undo.saveStep(A),A=null)}function w(){I&&(clearTimeout(I),t.undo.saveStep(),A=null)}function T(t){var n=t.which;return b(t)||n==e.FE.KEYCODE.F5}function x(){if(t.events.on("keydown",S),t.events.on("input",l),t.events.on("keyup input",C),t.events.on("keypress",u),t.events.on("keydown",f),t.events.on("keyup",v),t.events.on("html.inserted",v),t.events.on("cut",c),!t.browser.edge&&t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){O=!0}),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){O=!1,v()})}catch(e){}}var k,I,A,O=!1,N=null;return{_init:x,ctrlKey:b,isCharacter:E,isArrow:y,forceUndo:w,isIME:p,isBrowserAction:T}},e.FE.MODULES.accessibility=function(t){function n(e){e&&e.length&&(e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",function(){var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.blurActive()&&n.events.trigger("blur"),n.events.enableBlur()},!0),e.data("blur-event-set",!0)),(e.parents(".fr-toolbar, .fr-popup").data("instance")||t).events.disableBlur(),e.focus(),t.shared.$f_el=e)}function r(e,t){var r=t?"last":"first",o=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[r]();if(o.length)return n(o),!0}function o(e){return e.is("input, textarea")&&a(),t.events.disableBlur(),e.focus(),!0}function i(e,n){var r=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(n?":last":":first");if(r.length)return o(r);if(t.shared.with_kb){var i=e.find(".fr-active-item:visible:first");if(i.length)return o(i);var a=e.find("[tabIndex]:visible:first");if(a.length)return o(a)}}function a(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function s(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function l(e){var n=e.children().not(".fr-buttons");n.data("mouseenter-event-set")||(t.events.$on(n,"mouseenter","[tabIndex]",function(r){var o=e.data("instance")||t;if(!L)return r.stopPropagation(),void r.preventDefault();var i=n.find(":focus:first");i.length&&!i.is("input, button, textarea")&&(o.events.disableBlur(),i.blur(),o.events.disableBlur(),o.events.focus())}),n.data("mouseenter-event-set",!0)),!i(n)&&t.shared.with_kb&&r(e.find(".fr-buttons"))}function c(e){t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),t.shared.with_kb?e.find(".fr-command[tabIndex], [tabIndex]").first().focus():e.find("[tabIndex]:first").focus()}function d(){var e=t.popups.areVisible();if(e){var n=e.find(".fr-buttons");return n.find("button:focus, .fr-group span:focus").length?!r(e.data("instance").$tb):!r(n)}return!r(t.$tb)}function u(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function p(o,a,s){if(t.shared.$f_el){var l=u();l&&(t.button.click(l),t.shared.$f_el=l);var c=o.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),d=c.index(t.shared.$f_el);if(0===d&&!s||d==c.length-1&&s){var p;a&&(o.parent().is(".fr-popup")&&(p=!i(o.parent().children().not(".fr-buttons"),!s)),!1===p&&(t.shared.$f_el=null)),a&&!1===p||r(o,!s)}else n(e(c.get(d+(s?1:-1))));return!1}}function f(e,t){return p(e,t,!0)}function g(e,t){return p(e,t)}function h(e){if(t.shared.$f_el){var r;if(t.shared.$f_el.is(".fr-dropdown.fr-active"))return r=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),n(r),!1;if(t.shared.$f_el.is("a.fr-command"))return r=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first(),r.length||(r=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),n(r),!1}}function m(){return t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?b():h(!0)}function v(){return h()}function b(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus());var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),x(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var n=t.popups.areVisible(t);n&&n.data("popup-button",t.shared.$f_el)}else if(t.shared.$f_el.attr("data-modal")){var r=t.modals.areVisible(t);r&&r.data("modal-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function y(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),!1!==t.events.trigger("toolbar.focusEditor")&&(t.events.disableBlur(),t.events.focus())}function E(e){if(t.shared.$f_el){var r=u();return r?(t.button.click(r),n(r)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(e.parent().find(".fr-back:visible:first")),x(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(s(t),t.shared.$f_el=null,!1!==t.events.trigger("toolbar.esc")&&(t.popups.hide(e.parent()),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),x(e.parent()))):y()),!1}}function S(n,r){var o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,i=n.which,a=!1;return i!=e.FE.KEYCODE.TAB||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.ARROW_RIGHT||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.TAB||o||!n.shiftKey||n.altKey?i!=e.FE.KEYCODE.ARROW_LEFT||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.ARROW_UP||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.ARROW_DOWN||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.ENTER||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.ESC||o||n.shiftKey||n.altKey?i!=e.FE.KEYCODE.F10||o||n.shiftKey||!n.altKey||(a=d()):a=E(r):a=b():a=m():a=v():a=g(r):a=g(r,!0):a=f(r):a=f(r,!0),t.shared.$f_el||void 0!==a||(a=!0),!a&&t.keys.isBrowserAction(n)&&(a=!0),!!a||(n.preventDefault(),n.stopPropagation(),!1)}function C(n){n&&n.length&&(t.events.$on(n,"keydown",function(r){if(!e(r.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var o=n.parents(".fr-popup").data("instance")||n.data("instance")||t;t.shared.with_kb=!0;var i=o.accessibility.exec(r,n);return t.shared.with_kb=!1,i},!0),t.events.$on(n,"mouseenter","[tabIndex]",function(r){var o=n.parents(".fr-popup").data("instance")||n.data("instance")||t;if(!L)return r.stopPropagation(),void r.preventDefault();var i=e(r.currentTarget);o.shared.$f_el&&o.shared.$f_el.not(i)&&o.accessibility.focusEditor()},!0))}function w(e){var n=t.popups.get(e),r=T(e);C(n.find(".fr-buttons")),t.events.$on(n,"mouseenter","tabIndex",r._tiMouseenter,!0),t.events.$on(n.children().not(".fr-buttons"),"keydown","[tabIndex]",r._tiKeydown,!0),t.popups.onHide(e,function(){s(n.data("instance")||t)}),t.popups.onShow(e,function(){L=!1,setTimeout(function(){L=!0},0)})}function T(n){var o=t.popups.get(n);return{_tiKeydown:function(a){var l=o.data("instance")||t;if(!1===l.events.trigger("popup.tab",[a]))return!1;var c=a.which,d=o.find(":focus:first");if(e.FE.KEYCODE.TAB==c){a.preventDefault();var u=o.children().not(".fr-buttons"),p=u.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),f=p.indexOf(this)+(a.shiftKey?-1:1);if(0<=f&&f<p.length)return l.events.disableBlur(),e(p[f]).focus(),a.stopPropagation(),!1;var g=o.find(".fr-buttons");if(g.length&&r(g,!!a.shiftKey))return a.stopPropagation(),!1;if(i(u))return a.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=c)return e.FE.KEYCODE.ESC==c?(a.preventDefault(),a.stopPropagation(),s(l),l.popups.isVisible(n)&&o.find(".fr-back:visible").length?(l.opts.toolbarInline&&(l.events.disableBlur(),l.events.focus()),l.button.exec(o.find(".fr-back:visible:first")),x(o)):l.popups.isVisible(n)&&o.find(".fr-dismiss:visible").length?l.button.exec(o.find(".fr-dismiss:visible:first")):(l.popups.hide(n),l.opts.toolbarInline&&l.toolbar.showInline(null,!0),x(o)),!1):e.FE.KEYCODE.SPACE==c&&(d.is(".fr-submit")||d.is(".fr-dismiss"))?(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(d),!0):l.keys.isBrowserAction(a)?void a.stopPropagation():d.is("input[type=text], textarea")?void a.stopPropagation():e.FE.KEYCODE.SPACE==c&&(d.is(".fr-link-attr")||d.is("input[type=file]"))?void a.stopPropagation():(a.stopPropagation(),a.preventDefault(),!1);var h=null;o.find(".fr-submit:visible").length>0?h=o.find(".fr-submit:visible:first"):o.find(".fr-dismiss:visible").length&&(h=o.find(".fr-dismiss:visible:first")),h&&(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(h))}},_tiMouseenter:function(){A(o.data("instance")||t)}}}function x(e){var t=e.data("popup-button");t&&setTimeout(function(){n(t),e.data("popup-button",null)},0)}function k(e){var t=e.data("modal-button");t&&setTimeout(function(){n(t),e.data("modal-button",null)},0)}function I(){return null!=t.shared.$f_el}function A(e){var n=t.popups.areVisible(e);n&&n.data("popup-button",null)}function O(n){var r=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if(n.which==e.FE.KEYCODE.F10&&!r&&!n.shiftKey&&n.altKey){t.shared.with_kb=!0;var o=t.popups.areVisible(t),a=!1;return o&&(a=i(o.children().not(".fr-buttons"))),a||d(),t.shared.with_kb=!1,n.preventDefault(),n.stopPropagation(),!1}return!0}function N(){t.$wp?t.events.on("keydown",O,!0):t.events.$on(t.$win,"keydown",O,!0),t.events.on("mousedown",function(e){A(t),t.shared.$f_el&&(s(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)},!0),t.events.on("blur",function(){t.shared.$f_el=null,A(t)},!0)}var L=!0;return{_init:N,registerPopup:w,registerToolbar:C,focusToolbarElement:n,focusToolbar:r,focusContent:i,focusPopup:l,focusModal:c,focusEditor:y,focusPopupButton:x,focusModalButton:k,hasFocus:I,exec:S,saveSelection:a,restoreSelection:s}},e.FE.MODULES.format=function(t){function n(e,t){var n="<"+e;for(var r in t)t.hasOwnProperty(r)&&(n+=" "+r+'="'+t[r]+'"');return n+=">"}function r(e){return"</"+e+">"}function o(e,t){var n=e;for(var r in t)t.hasOwnProperty(r)&&(n+="id"==r?"#"+t[r]:"class"==r?"."+t[r]:"["+r+'="'+t[r]+'"]');return n}function i(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function a(r,o,i){if(r){if(t.node.isBlock(r))return a(r.firstChild,o,i),!1;for(var s=e(n(o,i)).insertBefore(r),l=r;l&&!e(l).is(".fr-marker")&&0===e(l).find(".fr-marker").length&&"UL"!=l.tagName&&"OL"!=l.tagName;){var c=l;l=l.nextSibling,s.append(c)}if(l)(e(l).find(".fr-marker").length||"UL"==l.tagName||"OL"==l.tagName)&&a(l.firstChild,o,i);else{for(var d=s.get(0).parentNode;d&&!d.nextSibling&&!t.node.isElement(d);)d=d.parentNode;if(d){var u=d.nextSibling;u&&(t.node.isBlock(u)?a(u.firstChild,o,i):a(u,o,i))}}s.is(":empty")&&s.remove()}}function s(s,l){var c;if(void 0===l&&(l={}),l.style&&delete l.style,t.selection.isCollapsed())t.markers.insert(),t.$el.find(".fr-marker").replaceWith(n(s,l)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+r(s)),t.selection.restore();else{t.selection.save(),a(t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,s,l);var d;do{for(d=t.$el.find(o(s,l)+" > "+o(s,l)),c=0;c<d.length;c++)d[c].outerHTML=d[c].innerHTML}while(d.length);t.el.normalize();var u=t.el.querySelectorAll(".fr-marker");for(c=0;c<u.length;c++){var p=e(u[c]);!0===p.data("type")?i(p.get(0).nextSibling,o(s,l))&&p.next().prepend(p):i(p.get(0).previousSibling,o(s,l))&&p.prev().append(p)}t.selection.restore()}}function l(e,n,r,a){if(!a){var s=!1;if(!0===e.data("type"))for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().before(e),s=!0;else if(!1===e.data("type"))for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().after(e),s=!0;if(s)return!0}if(e.parents(n).length||void 0===n){var l="",c="",d=e.parent();if(d.is(t.$el)||t.node.isBlock(d.get(0)))return!1;for(;!t.node.isBlock(d.parent().get(0))&&(void 0===n||void 0!==n&&!i(d.get(0),o(n,r)));)l+=t.node.closeTagString(d.get(0)),c=t.node.openTagString(d.get(0))+c,d=d.parent();var u=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var p=d.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(d.get(0))+c+u+l+t.node.openTagString(d.get(0))+c);return d.replaceWith(t.node.openTagString(d.get(0))+p+t.node.closeTagString(d.get(0))),!0}return!1}function c(n,r,a,s){for(var l=t.node.contents(n.get(0)),d=0;d<l.length;d++){var u=l[d];if(t.node.hasClass(u,"fr-marker"))r=(r+1)%2;else if(r)if(e(u).find(".fr-marker").length>0)r=c(e(u),r,a,s);else{for(var p=e(u).find(a||"*"),f=p.length-1;f>=0;f--){var g=p[f];t.node.isBlock(g)||t.node.isVoid(g)||void 0!==a&&!i(g,o(a,s))||(g.outerHTML=g.innerHTML)}void 0===a&&u.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(u)&&!t.node.isBlock(u)||i(u,o(a,s))?e(u).replaceWith(u.innerHTML):void 0===a&&u.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(u)&&t.node.clearAttributes(u)}else e(u).find(".fr-marker").length>0&&(r=c(e(u),r,a,s))}return r}function d(n,r){void 0===r&&(r={}),r.style&&delete r.style;var o=t.selection.isCollapsed();t.selection.save();for(var i=!0;i;){i=!1;for(var a=t.$el.find(".fr-marker"),s=0;s<a.length;s++){var d=e(a[s]),u=null;if(d.attr("data-cloned")||o||(u=d.clone().removeClass("fr-marker").addClass("fr-clone"),!0===d.data("type")?d.attr("data-cloned",!0).after(u):d.attr("data-cloned",!0).before(u)),l(d,n,r,o)){i=!0;break}}}c(t.$el,0,n,r),o||(t.$el.find(".fr-marker").remove(),t.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),o&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function u(e,t){m(e,t)?d(e,t):s(e,t)}function p(t,n){var r=e(t);r.css(n,""),""===r.attr("style")&&r.replaceWith(r.html())}function f(t,n){return 0===e(t).attr("style").indexOf(n+":")||e(t).attr("style").indexOf(";"+n+":")>=0||e(t).attr("style").indexOf("; "+n+":")>=0}function g(n,r){var o,i;if(t.selection.isCollapsed()){t.markers.insert(),i=t.$el.find(".fr-marker");var s=i.parent();if(t.node.openTagString(s.get(0))=='<span style="'+n+": "+s.css(n)+';">'){if(t.node.isEmpty(s.get(0)))s.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var c={};c[n]=r,l(i,"span",c,!0),i=t.$el.find(".fr-marker"),i.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}t.html.cleanEmptyTags()}else t.node.isEmpty(s.get(0))&&s.is("span")?(i.replaceWith(e.FE.MARKERS),s.css(n,r)):i.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{if(t.selection.save(),null==r||"color"==n&&t.$el.find(".fr-marker").parents("u, a").length>0){var d=t.$el.find(".fr-marker");for(o=0;o<d.length;o++)if(i=e(d[o]),!0===i.data("type"))for(;t.node.isFirstSibling(i.get(0))&&!i.parent().is(t.$el)&&!t.node.isElement(i.parent().get(0))&&!t.node.isBlock(i.parent().get(0));)i.parent().before(i);else for(;t.node.isLastSibling(i.get(0))&&!i.parent().is(t.$el)&&!t.node.isElement(i.parent().get(0))&&!t.node.isBlock(i.parent().get(0));)i.parent().after(i)}var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,g={class:"fr-unprocessed"};for(r&&(g.style=n+": "+r+";"),a(u,"span",g),t.$el.find(".fr-marker + .fr-unprocessed").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-unprocessed + .fr-marker").each(function(){e(this).prev().append(this)});t.$el.find("span.fr-unprocessed").length>0;){var h=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(h.parent().get(0).normalize(),h.parent().is("span")&&1==h.parent().get(0).childNodes.length){h.parent().css(n,r);var m=h;h=h.parent(),m.replaceWith(m.html())}var v=h.find("span");for(o=v.length-1;o>=0;o--)p(v[o],n);var b=h.parentsUntil(t.$el,"span[style]"),y=[];for(o=b.length-1;o>=0;o--)f(b[o],n)||y.push(b[o]);if(b=b.not(y),b.length){var E="",S="",C="",w="",T=h.get(0);do{T=T.parentNode,e(T).addClass("fr-split"),E+=t.node.closeTagString(T),S=t.node.openTagString(e(T).clone().addClass("fr-split").get(0))+S,b.get(0)!=T&&(C+=t.node.closeTagString(T),w=t.node.openTagString(e(T).clone().addClass("fr-split").get(0))+w)}while(b.get(0)!=T);var x=E+t.node.openTagString(e(b.get(0)).clone().css(n,r||"").get(0))+w+h.css(n,"").get(0).outerHTML+C+"</span>"+S;h.replaceWith('<span id="fr-break"></span>');var k=b.get(0).outerHTML;e(b.get(0)).replaceWith(k.replace(/<span id="fr-break"><\/span>/g,x))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||e(this).replaceWith(this.innerHTML)}),t.el.normalize();var I=t.$el.find("span[style] + span[style]");for(o=0;o<I.length;o++){var A=e(I[o]),O=e(I[o]).prev();A.get(0).previousSibling==O.get(0)&&t.node.openTagString(A.get(0))==t.node.openTagString(O.get(0))&&(A.prepend(O.html()),O.remove())}t.$el.find("span[style] span[style]").each(function(){if(e(this).attr("style").indexOf("font-size")>=0){var t=e(this).parents("span[style]");t.attr("style").indexOf("background-color")>=0&&(e(this).attr("style",e(this).attr("style")+";"+t.attr("style")),l(e(this),"span[style]",{},!1))}}),t.el.normalize(),t.selection.restore()}}function h(e){g(e,null)}function m(e,n){void 0===n&&(n={}),n.style&&delete n.style;var r=t.selection.ranges(0),a=r.startContainer;if(a.nodeType==Node.ELEMENT_NODE&&a.childNodes.length>0&&a.childNodes[r.startOffset]&&(a=a.childNodes[r.startOffset]),!r.collapsed&&a.nodeType==Node.TEXT_NODE&&r.startOffset==(a.textContent||"").length){for(;!t.node.isBlock(a.parentNode)&&!a.nextSibling;)a=a.parentNode;a.nextSibling&&(a=a.nextSibling)}for(var s=a;s&&s.nodeType==Node.ELEMENT_NODE&&!i(s,o(e,n));)s=s.firstChild;if(s&&s.nodeType==Node.ELEMENT_NODE&&i(s,o(e,n)))return!0;var l=a;for(l&&l.nodeType!=Node.ELEMENT_NODE&&(l=l.parentNode);l&&l.nodeType==Node.ELEMENT_NODE&&l!=t.el&&!i(l,o(e,n));)l=l.parentNode;return!(!l||l.nodeType!=Node.ELEMENT_NODE||l==t.el||!i(l,o(e,n)))}return{is:m,toggle:u,apply:s,remove:d,applyStyle:g,removeStyle:h}},e.extend(e.FE.DEFAULTS,{indentMargin:20}),e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(e){return t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">"),e}function r(n,r){if(!1!==t.events.trigger("commands.before",e.merge([n],r||[]))){var o=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||s[n],i=!0,a=!1;e.FE.COMMANDS[n]&&(void 0!==e.FE.COMMANDS[n].focus&&(i=e.FE.COMMANDS[n].focus),void 0!==e.FE.COMMANDS[n].accessibilityFocus&&(a=e.FE.COMMANDS[n].accessibilityFocus)),(!t.core.hasFocus()&&i&&!t.popups.areVisible()||!t.core.hasFocus()&&a&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),o&&o.apply(t,e.merge([n],r||[])),t.events.trigger("commands.after",e.merge([n],r||[])),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&t.undo.saveStep()}}function o(e,n){t.format.toggle(n)}function i(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),o=0;o<r.length;o++)if("LI"!=r[o].tagName&&"LI"!=r[o].parentNode.tagName){var i=e(r[o]),a="rtl"==t.opts.direction||"rtl"==i.css("direction")?"margin-right":"margin-left",s=t.helpers.getPX(i.css(a));i.css(a,Math.max(s+n*t.opts.indentMargin,0)||""),i.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function a(){t.events.on("keydown",function(e){var n=t.selection.element();if(n&&"HR"==n.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1}),t.events.on("keyup",function(n){var r=t.selection.element();if(r&&"HR"==r.tagName)if(n.which==e.FE.KEYCODE.ARROW_LEFT||n.which==e.FE.KEYCODE.ARROW_UP){if(r.previousSibling)return t.node.isBlock(r.previousSibling)?t.selection.setAtEnd(r.previousSibling):e(r).before(e.FE.MARKERS),t.selection.restore(),!1}else if((n.which==e.FE.KEYCODE.ARROW_RIGHT||n.which==e.FE.KEYCODE.ARROW_DOWN)&&r.nextSibling)return t.node.isBlock(r.nextSibling)?t.selection.setAtStart(r.nextSibling):e(r).after(e.FE.MARKERS),t.selection.restore(),!1}),t.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),t.events.on("mouseup",function(){var n=t.selection.element();n==t.selection.endElement()&&n&&"HR"==n.tagName&&(n.nextSibling&&(t.node.isBlock(n.nextSibling)?t.selection.setAtStart(n.nextSibling):e(n).after(e.FE.MARKERS)),t.selection.restore())})}var s={bold:function(){o("bold","strong")},subscript:function(){t.format.is("sup")&&t.format.remove("sup"),o("subscript","sub")},superscript:function(){t.format.is("sub")&&t.format.remove("sub"),o("superscript","sup")},italic:function(){o("italic","em")},strikeThrough:function(){o("strikeThrough","s")},underline:function(){o("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){i(1)},outdent:function(){i(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove();var r="";t.core.isEmpty()&&(r="<br>",r=n(r)),t.html.insert('<hr id="fr-just">'+r);var o=t.$el.find("hr#fr-just");o.removeAttr("id");var i;o.prev().is("hr")?i=t.selection.setAfter(o.get(0),!1):o.next().is("hr")?i=t.selection.setBefore(o.get(0),!1):t.selection.setAfter(o.get(0),!1)||t.selection.setBefore(o.get(0),!1),i||void 0===i||(r=e.FE.MARKERS+"<br>",r=n(r),o.after(r)),t.selection.restore()},clearFormatting:function(){t.format.remove()},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},l={};for(var c in s)s.hasOwnProperty(c)&&(l[c]=function(e){return function(){r(e)}}(c));return e.extend(l,{exec:r,_init:a})},e.FE.MODULES.data=function(e){function t(e){return e}function n(e){if(!e)return e;for(var n="",i=t("charCodeAt"),a=t("fromCharCode"),s=u.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=r(++s),d=e[i](l),p="";/[0-9-]/.test(e[l+1]);)p+=e[++l];p=parseInt(p,10)||0,d=o(d,c,p),d^=s-1&31,n+=String[a](d)}return n}function r(e){for(var t=e.toString(),n=0,r=0;r<t.length;r++)n+=parseInt(t.charAt(r),10);return n>10?n%9+1:n}function o(e,t,n){for(var r=Math.abs(n);r-- >0;)e-=t;return n<0&&(e+=123),e}function i(e){return!(!e||"none"!=e.css("display")||(e.remove(),0))}function a(){return i(c)||i(d)}function s(){if(!e.$box)return!1;e.$box.append(f(t(f("noLD2laB-7NB1C1ebcvH-9SB3a1C6QC2D4A-9d1E2B2B4xgAE4B2G2I1C3A3B2qMF1DE1fkxfcC-11C-9g1G2E4XC9a1E5A3G-10mvrioCC3AA1KA1qJ-7NB2MA6sxeqVA6TD6e2D4B-9rYA2a1A4bCD3vwC-7EC10D3E2lNC1KD1QB9SB6UE5TE4YF3YA5c1A3d1B3kGE2gFA5A2D2ch1KI1IB1thyH5wvVC11UB6c1F4wwwXA7gmnfB2jgB1A7nd1e1IC2NG4H1A9bjvnbC-8PG3mlazD4dH-9HI2qAA2jGC2IA1dajajFD5SG4J4c1qttyB-9wg1B2b2A6b1C3EG3B2I2rCD4E1B1LG1oaMA3RE7abC-8C-7aVA4C5B5F-11e1D3I3a5A8hmmnogH2IB5A2nhkgiA4TH4VC7yxdblH-8YC6D6C4xC3yqJJ2C-21spB-11fMF1KF1IC2USC4PG4TE3RD6ZF5XE3UE3uefaFE4D2G2AE1HA2JD1zzzQE3SD9vgqF4ua3B13XA4C5gd1E3E2A14ridsldcCA7MC5ghwE-11ZH5f1D3a1D8bwxmkzi1A7IB3KvpB-8rwMD3IE1GG-10bgqwxewvWE4H3VbD-16qC-11qc1E2TwEA6A3aCE4A1A4lOD3JC1iVA3RA13c2D8olqf1G3A32B17==")))),c=e.$box.find("> div:last"),d=c.find("> a"),"rtl"==e.opts.direction&&c.css("left","auto").css("right",0)}function l(){var n=localStorage&&localStorage.FEK||e.opts.key||[""];"string"==typeof n&&(n=[n]),e.ul=!0;for(var r=0;r<n.length;r++){var o=f(n[r])||"";if(!(o!==f(t(f("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&o.indexOf(p,o.length-p.length)<0&&[f("9qqG-7amjlwq=="),f("KA3B3C2A6D1D5H5H1A3=="),f("QzbzvxyB2yA-9m=="),f("ji1kacwmgG5bc=="),f("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(p)<0)){e.ul=!1;break}}!0===e.ul&&s(),e.events.on("contentChanged",function(){!0===e.ul&&a()&&s()}),e.events.on("destroy",function(){c&&c.length&&c.remove()},!0)}var c,d,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",p=function(){for(var e=0,t=document.domain,n=t.split("."),r="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(r+"="+r);)t=n.slice(-1-++e).join("."),document.cookie=r+"="+r+";domain="+t+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),f=t(n);return{_init:l}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function n(e,n){t.win.localStorage.setItem("fr-copied-html",e),t.win.localStorage.setItem("fr-copied-text",n)}function r(r){var o=t.html.getSelected();n(o,e("<div>").html(o).text()),"cut"==r.type&&(t.undo.saveStep(),setTimeout(function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()},0))}function o(e){if(E)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===t.events.trigger("paste.before",[e]))return e.preventDefault(),!1;if(h=t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",r=e.clipboardData.types;if(t.helpers.isArray(r))for(var o=0;o<r.length;o++)n+=r[o]+";";else n=r;if(m="",v=e.clipboardData.getData("text/rtf"),/text\/html/.test(n)?m=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?m=v:/text\/plain/.test(n)&&!this.browser.mozilla&&(m=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==m)return c(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;m=null}return a(),!1}function i(n){if(n.originalEvent&&(n=n.originalEvent),n&&n.dataTransfer&&n.dataTransfer.getData){var r="",o=n.dataTransfer.types;if(t.helpers.isArray(o))for(var i=0;i<o.length;i++)r+=o[i]+";";else r=o;if(m="",v=n.dataTransfer.getData("text/rtf"),/text\/html/.test(r)?m=n.dataTransfer.getData("text/html"):/text\/rtf/.test(r)&&t.browser.safari?m=v:/text\/plain/.test(r)&&!this.browser.mozilla&&(m=t.html.escapeEntities(n.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==m){if(!1!==t.markers.insertAtPoint(n)){var a=t.el.querySelector(".fr-marker");return e(a).replaceWith(e.FE.MARKERS),c(),n.preventDefault&&(n.stopPropagation(),n.preventDefault()),!1}}else m=null}}function a(){t.selection.save(),t.events.disableBlur(),m=null,b?b.html(""):(b=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabIndex="-1"></div>'),t.$sc.after(b),t.events.on("destroy",function(){b.remove()})),b.focus(),t.win.setTimeout(c,1)}function s(e){var n;e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),e=e.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),e=e.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),e=e.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),e=e.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var r=["style","script","applet","embed","noframes","noscript"];for(n=0;n<r.length;n++){var o=new RegExp("<"+r[n]+".*?"+r[n]+"(.*?)>","gi");e=e.replace(o,"")}e=e.replace(/&nbsp;/gi," "),e=e.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),e=e.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var i;do{i=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")}while(e!=i);e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),e=e.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),e=e.replace(/<a>(.[^<]+)<\/a>/gi,"$1"),e=e.replace(/<br> */g,"<br>");var a=t.o_doc.createElement("div");a.innerHTML=e;var s=a.querySelectorAll("li[data-indent]");for(n=0;n<s.length;n++){var l=s[n],c=l.previousElementSibling;if(c&&"LI"==c.tagName){var d=c.querySelector(":scope > ul, :scope > ol");d||(d=document.createElement("ul"),c.appendChild(d)),d.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(a),e=a.innerHTML}function l(e){var n,r=null,o=t.doc.createElement("div");o.innerHTML=e;var i=o.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(n=0;n<i.length;n++)r=i[n],r.outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+r.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">";for(i=o.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")"),n=i.length-1;n>=0;n--)r=i[n],r.outerHTML=r.innerHTML;return function e(n){for(var r=t.node.contents(n),o=0;o<r.length;o++)r[o].nodeType!=Node.TEXT_NODE&&r[o].nodeType!=Node.ELEMENT_NODE?r[o].parentNode.removeChild(r[o]):e(r[o])}(o),o.innerHTML}function c(){t.keys.forceUndo(),y=t.snapshot.get(),null===m&&(m=b.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var e=m.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),n=t.events.chainTrigger("paste.beforeCleanup",m);n&&"string"==typeof n&&(m=n),(!e||e&&!1!==t.events.trigger("paste.wordPaste",[m]))&&d(m,e)}function d(n,r,o){var i,a=null,c=null;n.toLowerCase().indexOf("<body")>=0&&(n=n.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1"),n=n.replace(/([^>])\n([^<])/g,"$1 $2"));var d=!1;if(n.indexOf('id="docs-internal-guid')>=0&&(n=n.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1"),d=!0),!r){var p=t.opts.htmlAllowedStyleProps;t.opts.htmlAllowedStyleProps=t.opts.pasteAllowedStyleProps,t.opts.htmlAllowComments=!1,n=t.clean.html(n,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowedStyleProps=p,t.opts.htmlAllowComments=!0,n=f(n),n=n.replace(/\r|\n|\t/g,"");var g=t.doc.createElement("div");g.innerHTML=n;var h=t.win.localStorage.getItem("fr-copied-html"),m=t.win.localStorage.getItem("fr-copied-text");m&&g.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==m.replace(/(\u00A0)/gi," ").replace(/(\r|\n)+([ ]+[\r\n]+)*/gi," ")&&(n=h),n=n.replace(/^ */g,"").replace(/ *$/g,"")}!r||t.wordPaste&&o||(n=n.replace(/^\n*/g,"").replace(/^ /g,""),0===n.indexOf("<colgroup>")&&(n="<table>"+n+"</table>"),n=s(n),n=f(n)),t.opts.pastePlain&&(n=l(n));var v=t.events.chainTrigger("paste.afterCleanup",n);if("string"==typeof v&&(n=v),""!==n){var b=t.o_doc.createElement("div");b.innerHTML=n,t.spaces.normalize(b);var E=b.getElementsByTagName("span");for(i=E.length-1;i>=0;i--){var S=E[i];0===S.attributes.length&&(S.outerHTML=S.innerHTML)}var C=t.selection.element(),w=!1;if(C&&e(C).parentsUntil(t.el,"ul, ol").length&&(w=!0),w){var T=b.children;1==T.length&&["OL","UL"].indexOf(T[0].tagName)>=0&&(T[0].outerHTML=T[0].innerHTML)}if(!d){var x=b.getElementsByTagName("br");for(i=x.length-1;i>=0;i--){var k=x[i];t.node.isBlock(k.previousSibling)&&k.parentNode.removeChild(k)}}if(t.opts.enter==e.FE.ENTER_BR)for(a=b.querySelectorAll("p, div"),i=a.length-1;i>=0;i--)c=a[i],0===c.attributes.length&&(c.outerHTML=c.innerHTML+(c.nextSibling&&!t.node.isEmpty(c)?"<br>":""));else if(t.opts.enter==e.FE.ENTER_DIV)for(a=b.getElementsByTagName("p"),i=a.length-1;i>=0;i--)c=a[i],c.outerHTML="<div>"+c.innerHTML+"</div>";n=b.innerHTML,t.html.insert(n,!0)}u(),t.undo.saveStep(y),t.undo.saveStep()}function u(){t.events.trigger("paste.after")}function p(){return v}function f(e){var n,r=t.o_doc.createElement("div");r.innerHTML=e;for(var o=r.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");o.length;){for(n=0;n<o.length;n++)o[n].parentNode.removeChild(o[n]);o=r.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var i=r.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])");i.length;){var a=i[i.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())a.querySelector(t.html.blockTagsQuery())?a.outerHTML=a.innerHTML:a.outerHTML="<"+t.html.defaultTag()+">"+a.innerHTML+"</"+t.html.defaultTag()+">";else{var s=a.querySelectorAll("*");!s.length||"BR"!==s[s.length-1].tagName&&0===a.innerText.length?a.outerHTML=a.innerHTML+"<br>":a.outerHTML=a.innerHTML}i=r.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")}for(i=r.querySelectorAll("div:not([style])");i.length;){for(n=0;n<i.length;n++){var l=i[n],c=l.innerHTML.replace(/\u0009/gi,"").trim();l.outerHTML=c}i=r.querySelectorAll("div:not([style])")}return r.innerHTML}function g(){t.events.on("copy",r),t.events.on("cut",r),t.events.on("paste",o),t.events.on("drop",i),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){E=!1},50),E=!0)},!0),t.events.on("beforepaste",o))}var h,m,v,b,y,E=!1;return{_init:g,removeEmptyTags:f,getRtfClipboard:p,saveCopiedText:n,clean:d}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,n,r,o,i,a){e.FE.SHORTCUTS_MAP[(i?"^":"")+(a?"@":"")+t]={cmd:n,val:r,letter:o,shift:i,option:a},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){function n(n){if(!t.opts.shortcutsHint)return null;if(!i){i={};for(var r in e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(r)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[r].cmd)>=0&&(i[e.FE.SHORTCUTS_MAP[r].cmd+"."+(e.FE.SHORTCUTS_MAP[r].val||"")]={shift:e.FE.SHORTCUTS_MAP[r].shift,option:e.FE.SHORTCUTS_MAP[r].option,letter:e.FE.SHORTCUTS_MAP[r].letter})}var o=i[n];return o?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(o.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(o.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+o.letter:null}function r(n){if(!t.core.hasFocus())return!0;var r=n.which,o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if("keyup"==n.type&&a&&r!=e.FE.KEYCODE.META)return a=!1,!1;"keydown"==n.type&&(a=!1);var i=(n.shiftKey?"^":"")+(n.altKey?"@":"")+r;if(o&&e.FE.SHORTCUTS_MAP[i]){var s=e.FE.SHORTCUTS_MAP[i].cmd;if(s&&t.opts.shortcutsEnabled.indexOf(s)>=0){var l,c=e.FE.SHORTCUTS_MAP[i].val;if(s&&!c?l=t.$tb.find('.fr-command[data-cmd="'+s+'"]'):s&&c&&(l=t.$tb.find('.fr-command[data-cmd="'+s+'"][data-param1="'+c+'"]')),l.length)return n.preventDefault(),n.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&(t.button.exec(l),a=!0),!1;if(s&&t.commands[s])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&(t.commands[s](),a=!0),!1}}}function o(){t.events.on("keydown",r,!0),t.events.on("keyup",r,!0)}var i=null,a=!1;return{_init:o,get:n}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,r=null,o=0;o<t.length;o++){if(r){var i=t[o].nodeType===Node.TEXT_NODE&&""===t[o].textContent,a=r.nodeType===Node.TEXT_NODE&&t[o].nodeType===Node.TEXT_NODE;i||a||n++}if(t[o]==e)return n;r=t[o]}}function n(n){var r=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)r.push(t(n)),n=n.parentNode;return r.reverse()}function r(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function o(e){return{scLoc:n(e.startContainer),scOffset:r(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:r(e.endContainer,e.endOffset)}}function i(){var t={};if(e.events.trigger("snapshot.before"),t.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),r=0;r<n.length;r++)t.ranges.push(o(n[r]));return e.events.trigger("snapshot.after"),t}function a(t){for(var n=e.el,r=0;r<t.length;r++)n=n.childNodes[t[r]];return n}function s(t,n){try{var r=a(n.scLoc),o=n.scOffset,i=a(n.ecLoc),s=n.ecOffset,l=e.doc.createRange();l.setStart(r,o),l.setEnd(i,s),t.addRange(l)}catch(e){}}function l(t){e.$el.html()!=t.html&&e.$el.html(t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var r=0;r<t.ranges.length;r++)s(n,t.ranges[r])}function c(t,n){return t.html==n.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges))}return{get:i,restore:l,equal:c}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which;e.keys.ctrlKey(t)&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){return!(0===e.undo_stack.length||e.undo_index<=1)}function r(){return e.undo_index!=e.undo_stack.length}function o(t){if(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))return!1;void 0===t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(i(),e.undo_stack.push(t),e.undo_index++,t.html!=u&&(e.events.trigger("contentChanged"),u=t.html))):(i(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++))}function i(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function a(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),u=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function s(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),u=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function c(){e.undo_stack=[]}function d(){l(),e.events.on("initialized",function(){u=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),e.events.on("blur",function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()}),e.events.on("keydown",t),e.events.on("destroy",c)}var u=null;return{_init:d,run:a,redo:s,canDo:n,canRedo:r,dropRedo:i,reset:l,saveStep:o}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(){function t(t){var n=null,r=e.FE.ICONS[t];if(void 0!==r){var o=r.template||e.FE.ICON_DEFAULT_TEMPLATE;o&&(o=e.FE.ICON_TEMPLATES[o])&&(n=o.replace(/\[([a-zA-Z]*)\]/g,function(e,n){return"NAME"==n?r[n]||t:r[n]}))}return n||t}function n(t){var n=e.FE.ICONS[t],r=e.FE.ICON_DEFAULT_TEMPLATE;return void 0!==n?r=n.template||e.FE.ICON_DEFAULT_TEMPLATE:r}return{create:t,getTemplate:n}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function r(n,r){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||i(),n.removeAttr("title"),t.$tooltip.text(t.language.translate(n.data("title"))),t.$tooltip.addClass("fr-visible");var o=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;o<0&&(o=0),o+t.$tooltip.outerWidth()>e(t.o_win).width()&&(o=e(t.o_win).width()-t.$tooltip.outerWidth()),void 0===r&&(r=t.opts.toolbarBottom);var a=r?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",o),t.$tooltip.css("top",Math.ceil(a)),"static"!=e(t.o_doc).find("body:first").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body:first").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body:first").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}function o(o,i,a){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(o,"mouseenter",i,function(n){t.node.hasClass(n.currentTarget,"fr-disabled")||t.edit.isDisabled()||r(e(n.currentTarget),a)},!0),t.events.$on(o,"mouseleave "+t._mousedown+" "+t._mouseup,i,function(){n()},!0))}function i(){t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body:first").append(t.$tooltip)),t.events.on("shared.destroy",function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null},!0))}return{hide:n,to:r,bind:o}},e.FE.MODULES.button=function(t){function n(t,n,r){for(var o=e(),i=0;i<t.length;i++){var a=e(t[i]);if(a.is(n)&&(o=o.add(a)),r&&a.is(".fr-dropdown")){var s=a.next().find(n);o=o.add(s)}}return o}function r(r,o){var i,a=e();if(!r)return a;a=a.add(n(S,r,o)),a=a.add(n(C,r,o));for(i in t.shared.popups)if(t.shared.popups.hasOwnProperty(i)){var s=t.shared.popups[i],l=s.children().find(r);a=a.add(l)}for(i in t.shared.modals)if(t.shared.modals.hasOwnProperty(i)){var c=t.shared.modals[i],d=c.$modal.find(r);a=a.add(d)}return a}function o(n){var o=n.next(),i=t.node.hasClass(n.get(0),"fr-active"),a=r(".fr-dropdown.fr-active").not(n),s=n.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(s.helpers.isIOS()&&!s.el.querySelector(".fr-marker")&&(s.selection.save(),s.selection.clear(),s.selection.restore()),!i){var l=n.data("cmd");o.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[l]&&e.FE.COMMANDS[l].refreshOnShow&&e.FE.COMMANDS[l].refreshOnShow.apply(s,[n,o]),o.css("left",n.offset().left-n.parent().offset().left-("rtl"==t.opts.direction?o.width()-n.outerWidth():0)),t.opts.toolbarBottom?o.css("bottom",t.$tb.height()-n.position().top):o.css("top",n.position().top+n.outerHeight())}n.addClass("fr-blink").toggleClass("fr-active"),n.hasClass("fr-active")?(o.attr("aria-hidden",!1),n.attr("aria-expanded",!0)):(o.attr("aria-hidden",!0),n.attr("aria-expanded",!1)),setTimeout(function(){n.removeClass("fr-blink")},300),o.css("margin-left",""),o.offset().left+o.outerWidth()>t.$sc.offset().left+t.$sc.width()&&o.css("margin-left",-(o.offset().left+o.outerWidth()-t.$sc.offset().left-t.$sc.width())),a.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),a.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==n.parents(".fr-popup").length||t.opts.toolbarInline||(t.node.hasClass(n.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var c=o.find("a.fr-command.fr-active:first");t.helpers.isMobile()||(c.length?t.accessibility.focusToolbarElement(c):t.accessibility.focusToolbarElement(n))}function i(e){e.addClass("fr-blink"),setTimeout(function(){e.removeClass("fr-blink")},500);for(var t=e.data("cmd"),n=[];void 0!==e.data("param"+(n.length+1));)n.push(e.data("param"+(n.length+1)));var o=r(".fr-dropdown.fr-active");o.length&&(o.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),e.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(t,n)}function a(e){i(e)}function s(n){var r=n.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==n.parents(".fr-popup").length||n.data("popup")||r.popups.hideAll(),r.popups.areVisible()&&!r.popups.areVisible(r)){for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=r&&e.FE.INSTANCES[i].popups&&e.FE.INSTANCES[i].popups.areVisible()&&e.FE.INSTANCES[i].$el.find(".fr-marker").remove();r.popups.hideAll()}t.node.hasClass(n.get(0),"fr-dropdown")?o(n):(a(n),e.FE.COMMANDS[n.data("cmd")]&&!1!==e.FE.COMMANDS[n.data("cmd")].refreshAfterCallback&&r.button.bulkRefresh())}function l(t){s(e(t.currentTarget))}function c(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function d(e){e.preventDefault(),e.stopPropagation()}function u(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function p(n,r){t.events.bindClick(n,".fr-command:not(.fr-disabled)",l),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",d,!0),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",u,!0);var o=n.get(0).ownerDocument,i="defaultView"in o?o.defaultView:o.parentWindow,a=function(r){(!r||r.type==t._mouseup&&r.target!=e("html").get(0)||"keydown"==r.type&&(t.keys.isCharacter(r.which)&&!t.keys.ctrlKey(r)||r.which==e.FE.KEYCODE.ESC))&&c(n)};t.events.$on(e(i),t._mouseup+" resize keydown",a,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,a,!0),t.node.hasClass(n.get(0),"fr-popup")?e.merge(C,n.find(".fr-btn").toArray()):e.merge(S,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",r)}function f(e,n){var r="";if(n.html)"function"==typeof n.html?r+=n.html.call(t):r+=n.html;else{var o=n.options;"function"==typeof o&&(o=o()),r+='<ul class="fr-dropdown-list" role="presentation">';for(var i in o)if(o.hasOwnProperty(i)){var a=t.shortcuts.get(e+"."+i);a=a?'<span class="fr-shortcut">'+a+"</span>":"",r+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+i+'" title="'+o[i]+'">'+t.language.translate(o[i])+"</a></li>"}r+="</ul>"}return r}function g(e,n,r){if(t.helpers.isMobile()&&!1===n.showOnMobile)return"";var o=n.displaySelection;"function"==typeof o&&(o=o(t));var i;if(o){var a="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;i='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+(a||t.language.translate(n.title))+"</span>"}else i=t.icon.create(n.icon||e),i+='<span class="fr-sr-only">'+(t.language.translate(n.title)||"")+"</span>";var s=n.popup?' data-popup="true"':"",l=n.modal?' data-modal="true"':"",c=t.shortcuts.get(e+".");c=c?" ("+c+")":"";var d=e+"-"+t.id,u="dropdown-menu-"+d,p='<button id="'+d+'"type="button" tabIndex="-1" role="button"'+(n.toggle?' aria-pressed="false"':"")+("dropdown"==n.type?' aria-controls="'+u+'" aria-expanded="false" aria-haspopup="true"':"")+(n.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(n.title)||"")+c+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+" fr-btn-"+t.icon.getTemplate(n.icon)+(n.displaySelection?" fr-selection":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(r?"":" fr-hidden")+'" data-cmd="'+e+'"'+s+l+">"+i+"</button>";if("dropdown"==n.type){var g='<div id="'+u+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+d+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';g+=f(e,n),g+="</div></div></div>",p+=g}return p}function h(n,r){for(var o="",i=0;i<n.length;i++){var a=n[i],s=e.FE.COMMANDS[a];if(!(s&&void 0!==s.plugin&&t.opts.pluginsEnabled.indexOf(s.plugin)<0))if(s){var l=void 0===r||r.indexOf(a)>=0;o+=g(a,s,l)}else"|"==a?o+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==a&&(o+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return o}function m(n){var r,o=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,i=n.data("cmd");t.node.hasClass(n.get(0),"fr-dropdown")?r=n.next():(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)),e.FE.COMMANDS[i]&&e.FE.COMMANDS[i].refresh?e.FE.COMMANDS[i].refresh.apply(o,[n,r]):t.refresh[i]&&o.refresh[i](n,r)}function v(n){var r=t.$tb?t.$tb.data("instance")||t:t;if(!1===t.events.trigger("buttons.refresh"))return!0;setTimeout(function(){for(var o=r.selection.inEditor()&&r.core.hasFocus(),i=0;i<n.length;i++){var a=e(n[i]),s=a.data("cmd");0===a.parents(".fr-popup").length?o||e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].forcedRefresh?r.button.refresh(a):t.node.hasClass(a.get(0),"fr-dropdown")||(a.removeClass("fr-active"),a.attr("aria-pressed")&&a.attr("aria-pressed",!1)):a.parents(".fr-popup").is(":visible")&&r.button.refresh(a)}},0)}function b(){v(S),v(C)}function y(){S=[],C=[]}function E(){t.opts.toolbarInline?t.events.on("toolbar.show",b):(t.events.on("mouseup",b),t.events.on("keyup",b),t.events.on("blur",b),t.events.on("focus",b),t.events.on("contentChanged",b),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",b)),t.events.on("shared.destroy",y)}var S=[];(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),S=t.shared.buttons);var C=[];return t.shared.popup_buttons||(t.shared.popup_buttons=[]),C=t.shared.popup_buttons,{_init:E,buildList:h,bindCommands:p,refresh:m,bulkRefresh:b,exec:i,click:s,hideActiveDropdowns:c,getButtons:r}},e.FE.MODULES.modals=function(t){function n(e){return f[e]}function r(n,r){var o='<div tabIndex="-1" class="fr-modal'+(t.opts.theme?" "+t.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">';return o+='<div class="fr-modal-head">'+n+'<i title="'+t.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',o+='<div tabIndex="-1" class="fr-modal-body">'+r+"</div>",o+="</div></div>",e(o)}function o(n,o,i){if(t.shared.$overlay||(t.shared.$overlay=e('<div class="fr-overlay">').appendTo("body:first")),p=t.shared.$overlay,t.opts.theme&&p.addClass(t.opts.theme+"-theme"),!f[n]){var a=r(o,i);f[n]={$modal:a,$head:a.find(".fr-modal-head"),$body:a.find(".fr-modal-body")},t.helpers.isMobile()||a.addClass("fr-desktop"),a.appendTo("body:first"),t.events.bindClick(a,"i.fr-modal-close",function(){s(n)}),f[n].$body.css("margin-top",f[n].$head.outerHeight()),t.events.$on(a,"keydown",function(r){var o=r.which;return o==e.FE.KEYCODE.ESC?(s(n),t.accessibility.focusModalButton(a),!1):!(!e(r.currentTarget).is("input[type=text], textarea")&&o!=e.FE.KEYCODE.ARROW_UP&&o!=e.FE.KEYCODE.ARROW_DOWN&&!t.keys.isBrowserAction(r)&&(r.preventDefault(),r.stopPropagation(),1))},!0),s(n,!0)}return f[n]}function i(){for(var e in f){var t=f[e];t&&t.$modal&&t.$modal.removeData().remove()}p&&p.removeData().remove(),f={}}function a(n){if(f[n]){var r=f[n].$modal;r.data("instance",t),r.show(),p.show(),e(t.o_doc).find("body:first").addClass("prevent-scroll"),t.helpers.isMobile()&&e(t.o_doc).find("body:first").addClass("fr-mobile"),r.addClass("fr-active"),t.accessibility.focusModal(r)}}function s(n,r){if(f[n]){var o=f[n].$modal,i=o.data("instance")||t;i.events.enableBlur(),o.hide(),p.hide(),e(i.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),o.removeClass("fr-active"),r||(t.accessibility.restoreSelection(i),t.events.trigger("modals.hide"))}}function l(n){if(f[n]){var r=f[n],o=r.$modal,i=r.$body,a=e(t.o_win).height(),s=o.find(".fr-modal-wrapper"),l=s.outerHeight(!0),c=s.height()-(i.outerHeight(!0)-i.height()),d=a-l+c,u=i.get(0).scrollHeight,p="auto";u>d&&(p=d),i.height(p)}}function c(e){var n;if("string"==typeof e){if(!f[e])return;n=f[e].$modal}else n=e;return n&&t.node.hasClass(n,"fr-active")&&t.core.sameInstance(n)||!1}function d(e){for(var t in f)if(f.hasOwnProperty(t)&&c(t)&&(void 0===e||f[t].$modal.data("instance")==e))return f[t].$modal;return!1}function u(){t.events.on("shared.destroy",i,!0)}t.shared.modals||(t.shared.modals={});var p,f=t.shared.modals;return{_init:u,get:n,create:o,show:a,hide:s,resize:l,isVisible:c,areVisible:d}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){function n(e,n){n.is(":visible")||(n=t.$sc),n.is(w[e].data("container"))||(w[e].data("container",n),n.append(w[e]))}function r(e,r,o,s){if(a()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus(),t.events.enableBlur()),p([e]),!w[e])return!1;var l=t.button.getButtons(".fr-dropdown.fr-active");l.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),l.next().attr("aria-hidden",!0),w[e].data("instance",t),t.$tb&&t.$tb.data("instance",t);var c=w[e].outerWidth(),d=i(e);w[e].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var u=w[e].data("container");t.opts.toolbarInline&&u&&t.$tb&&u.get(0)==t.$tb.get(0)&&(n(e,t.$sc),o=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top")),r=t.$tb.offset().left+t.$tb.outerWidth()/2+(parseFloat(t.$tb.find(".fr-arrow").css("margin-left"))||0)+t.$tb.find(".fr-arrow").outerWidth()/2,t.node.hasClass(t.$tb.get(0),"fr-above")&&o&&(o+=t.$tb.outerHeight()),s=0),u=w[e].data("container"),!t.opts.iframe||s||d||(r&&(r-=t.$iframe.offset().left),o&&(o-=t.$iframe.offset().top)),u.is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):w[e].css("zIndex",(t.opts.zIndex||1)+4),r&&(r-=c/2),t.opts.toolbarBottom&&u&&t.$tb&&u.get(0)==t.$tb.get(0)&&(w[e].addClass("fr-above"),o&&(o-=w[e].outerHeight())),w[e].removeClass("fr-active"),t.position.at(r,o,w[e],s||0),w[e].addClass("fr-active"),d||t.accessibility.focusPopup(w[e]),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+e),b(e)._repositionPopup(),g()}function o(e,n){t.events.on("popups.show."+e,n)}function i(e){return w[e]&&t.node.hasClass(w[e],"fr-active")&&t.core.sameInstance(w[e])||!1}function a(e){for(var t in w)if(w.hasOwnProperty(t)&&i(t)&&(void 0===e||w[t].data("instance")==e))return w[t];return!1}function s(e){var n=null;(n="string"!=typeof e?e:w[e])&&t.node.hasClass(n,"fr-active")&&(n.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),n.find("input, textarea, button").filter(":focus").blur(),n.find("input, textarea").attr("disabled","disabled"))}function l(e,n){t.events.on("popups.hide."+e,n)}function c(e){var n=w[e];return n&&!n.data("inst"+t.id)&&y(b(e),e),n}function d(e,n){t.events.on("popups.refresh."+e,n)}function u(n){w[n].data("instance",t),t.events.trigger("popups.refresh."+n);for(var r=w[n].find(".fr-command"),o=0;o<r.length;o++){var i=e(r[o]);0===i.parents(".fr-dropdown-menu").length&&t.button.refresh(i)}}function p(e){void 0===e&&(e=[]);for(var t in w)w.hasOwnProperty(t)&&e.indexOf(t)<0&&s(t)}function f(){t.shared.exit_flag=!0}function g(){t.shared.exit_flag=!1}function h(){return t.shared.exit_flag}function m(n,r){var o=e.FE.POPUP_TEMPLATES[n];"function"==typeof o&&(o=o.apply(t));for(var i in r)r.hasOwnProperty(i)&&(o=o.replace("[_"+i.toUpperCase()+"_]",r[i]));return o}function v(n,r){var o=m(n,r),i=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+o+"</div>");t.opts.theme&&i.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&i.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),i.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var a=e("body:first");return a.append(i),i.data("container",a),w[n]=i,t.button.bindCommands(i,!1),i}function b(n){var r=w[n];return{_windowResize:function(){var e=r.data("instance")||t;!e.helpers.isMobile()&&r.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(n){var o=r.data("instance")||t,i=e(n.currentTarget);if(i.is("input:file")&&i.closest(".fr-layer").addClass("fr-input-focus"),n.preventDefault(),n.stopPropagation(),setTimeout(function(){o.events.enableBlur()},0),o.helpers.isMobile()){var a=e(o.o_win).scrollTop();setTimeout(function(){e(o.o_win).scrollTop(a)},0)}},_inputBlur:function(n){var o=r.data("instance")||t,i=e(n.currentTarget);i.is("input:file")&&i.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(o.events.blurActive()&&o.events.trigger("blur"),o.events.enableBlur())},_editorKeydown:function(o){var a=r.data("instance")||t;a.keys.ctrlKey(o)||o.which==e.FE.KEYCODE.ALT||o.which==e.FE.KEYCODE.ESC||(i(n)&&r.find(".fr-back:visible").length?a.button.exec(r.find(".fr-back:visible:first")):o.which!=e.FE.KEYCODE.ALT&&a.popups.hide(n))},_preventFocus:function(n){var o=r.data("instance")||t,i=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null;"mouseup"==n.type||e(i).is(":focus")||o.events.disableBlur(),"mouseup"!=n.type||e(i).hasClass("fr-command")||e(i).parents(".fr-command").length>0||t.button.hideActiveDropdowns(r),(t.browser.safari||t.browser.mozilla)&&"mousedown"==n.type&&e(i).is("input[type=file]")&&o.events.disableBlur();var a="input, textarea, button, select, label, .fr-command";if(i&&!e(i).is(a)&&0===e(i).parents(a).length)return n.stopPropagation(),!1;i&&e(i).is(a)&&n.stopPropagation(),g()},_editorMouseup:function(){r.is(":visible")&&h()&&r.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(r))return!0;var o=r.data("instance")||t;r.is(":visible")&&h()&&(e.stopPropagation(),o.markers.remove(),o.popups.hide(n),g())},_windowKeydown:function(o){if(!t.core.sameInstance(r))return!0;var i=r.data("instance")||t,a=o.which;if(e.FE.KEYCODE.ESC==a){if(i.popups.isVisible(n)&&i.opts.toolbarInline)return o.stopPropagation(),i.popups.isVisible(n)&&(r.find(".fr-back:visible").length?(i.button.exec(r.find(".fr-back:visible:first")),i.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?i.button.exec(r.find(".fr-dismiss:visible:first")):(i.popups.hide(n),i.toolbar.showInline(null,!0),i.accessibility.FocusPopupButton(r))),!1;if(i.popups.isVisible(n))return r.find(".fr-back:visible").length?(i.button.exec(r.find(".fr-back:visible:first")),i.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?i.button.exec(r.find(".fr-dismiss:visible:first")):(i.popups.hide(n),i.accessibility.focusPopupButton(r)),!1}},_doPlaceholder:function(){0===e(this).next().length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!==e(this).val())},_repositionPopup:function(){if(!t.opts.height&&!t.opts.heightMax||t.opts.toolbarInline)return!0;if(t.$wp&&i(n)&&r.parent().get(0)==t.$sc.get(0)){var e=r.offset().top-t.$wp.offset().top,o=t.$wp.outerHeight();t.node.hasClass(r.get(0),"fr-above")&&(e+=r.outerHeight()),e>o||e<0?r.addClass("fr-hidden"):r.removeClass("fr-hidden")}}}}function y(e,n){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",function(){a()&&t.markers.remove(),p()}),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+n,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),w[n].data("inst"+t.id,!0),t.events.on("destroy",function(){t.core.sameInstance(w[n])&&w[n].removeClass("fr-active").appendTo("body:first")},!0)}function E(n,r){var o=v(n,r),i=b(n);return y(i,n),t.events.$on(o,"mousedown mouseup touchstart touchend touch","*",i._preventFocus,!0),t.events.$on(o,"focus","input, textarea, button, select",i._inputFocus,!0),t.events.$on(o,"blur","input, textarea, button, select",i._inputBlur,!0),t.accessibility.registerPopup(n),t.events.$on(o,"keydown keyup change input","input, textarea",i._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(o,"touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})},!0),t.events.$on(e(t.o_win),"resize",i._windowResize,!0),o}function S(){for(var e in w)if(w.hasOwnProperty(e)){var t=w[e];t&&(t.html("").removeData().remove(),w[e]=null)}w=[]}function C(){t.events.on("shared.destroy",S,!0),t.events.on("window.mousedown",f),t.events.on("window.touchmove",g),t.events.on("mousedown",function(e){a()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),f(),t.events.disableBlur())})}t.shared.popups||(t.shared.popups={});var w=t.shared.popups;return t.shared.exit_flag=!1,{_init:C,create:E,get:c,show:r,hide:s,onHide:l,hideAll:p,setContainer:n,refresh:u,onRefresh:d,onShow:o,isVisible:i,areVisible:a}},e.FE.MODULES.position=function(t){function n(){var e=t.selection.ranges(0),n=e.getBoundingClientRect();if(0===n.top&&0===n.left&&0===n.width||0===n.height){var r=!1;0===t.$el.find(".fr-marker").length&&(t.selection.save(),r=!0);var o=t.$el.find(".fr-marker:first");o.css("display","inline"),o.css("line-height","");var i=o.offset(),a=o.outerHeight();o.css("display","none"),o.css("line-height",0),n={},n.left=i.left,n.width=0,n.height=a,n.top=i.top-(t.helpers.isMobile()?0:t.helpers.scrollTop()),n.right=1,n.bottom=1,n.ok=!0,r&&t.selection.restore()}return n}function r(e,n,r){var o=e.outerHeight(!0);if(!t.helpers.isMobile()&&t.$tb&&e.parent().get(0)!=t.$tb.get(0)){var i=e.parent().offset().top,a=n-o-(r||0);e.parent().get(0)==t.$sc.get(0)&&(i-=e.parent().position().top);var s=t.$sc.get(0).scrollHeight;i+n+o>t.$sc.offset().top+s&&e.parent().offset().top+a>0?(n=a,e.addClass("fr-above")):e.removeClass("fr-above")}return n}function o(e,n){var r=e.outerWidth(!0);return e.parent().offset().left+n+r>t.$sc.get(0).clientWidth-t.$sc.position().left-10&&(n=t.$sc.get(0).clientWidth-e.parent().offset().left-r-10),n<0&&(n=10),n}function i(e){var r=n();e.css({top:0,left:0});var o=r.top+r.height,i=r.left+r.width/2-e.get(0).offsetWidth/2+t.helpers.scrollLeft();t.opts.iframe||(o+=t.helpers.scrollTop()),a(i,o,e,r.height)}function a(e,n,i,a){var s=i.data("container");!s||"BODY"===s.get(0).tagName&&"static"==s.css("position")||(e&&(e-=s.offset().left),n&&(n-=s.offset().top),"BODY"!=s.get(0).tagName?(e&&(e+=s.get(0).scrollLeft),n&&(n+=s.get(0).scrollTop)):"absolute"==s.css("position")&&(e&&(e+=s.position().left),n&&(n+=s.position().top))),t.opts.iframe&&s&&t.$tb&&s.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var l=o(i,e);if(e){i.css("left",l);var c=i.data("fr-arrow");c||(c=i.find(".fr-arrow"),i.data("fr-arrow",c)),c.data("margin-left")||c.data("margin-left",t.helpers.getPX(c.css("margin-left"))),c.css("margin-left",e-l+c.data("margin-left"))}n&&i.css("top",r(i,n,a))}function s(n){var r=e(n),o=r.is(".fr-sticky-on"),i=r.data("sticky-top"),a=r.data("sticky-scheduled");if(void 0===i){r.data("sticky-top",0);var s=e('<div class="fr-sticky-dummy" style="height: '+r.outerHeight()+'px;"></div>');t.$box.prepend(s)}else t.$box.find(".fr-sticky-dummy").css("height",r.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=t.helpers.scrollTop(),c=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());c!=i&&c!=a&&(clearTimeout(r.data("sticky-timeout")),r.data("sticky-scheduled",c),r.outerHeight()<l-t.$tb.parent().offset().top&&r.addClass("fr-opacity-0"),r.data("sticky-timeout",setTimeout(function(){var e=t.helpers.scrollTop(),n=Math.min(Math.max(e-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());n>0&&"BODY"==t.$tb.parent().get(0).tagName&&(n+=t.$tb.parent().position().top),n!=i&&(r.css("top",Math.max(n,0)),r.data("sticky-top",n),r.data("sticky-scheduled",n)),r.removeClass("fr-opacity-0")},100))),o||(r.css("top","0"),r.width(t.$tb.parent().width()),r.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(n).css("sticky-timeout")),r.css("top","0"),r.css("position",""),r.width(""),r.data("sticky-top",0),r.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function l(n){if(n.offsetWidth){var r,o,i=e(n),a=i.outerHeight(),s=i.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),c=0,d=0;"body"!==t.opts.scrollableContainer&&(c=t.$sc.offset().top,d=e(t.o_win).outerHeight()-c-l);var u="body"==t.opts.scrollableContainer?t.helpers.scrollTop():c,p=i.is(".fr-sticky-on");i.data("sticky-parent")||i.data("sticky-parent",i.parent());var f=i.data("sticky-parent"),g=f.offset().top,h=f.outerHeight();if(i.data("sticky-offset")||(i.data("sticky-offset",!0),i.after('<div class="fr-sticky-dummy" style="height: '+a+'px;"></div>')),!s){var m="auto"!==i.css("top")||"auto"!==i.css("bottom");m||i.css("position","fixed"),s={top:t.node.hasClass(i.get(0),"fr-top"),bottom:t.node.hasClass(i.get(0),"fr-bottom")},m||i.css("position",""),i.data("sticky-position",s),i.data("top",t.node.hasClass(i.get(0),"fr-top")?i.css("top"):"auto"),i.data("bottom",t.node.hasClass(i.get(0),"fr-bottom")?i.css("bottom"):"auto")}r=t.helpers.getPX(i.data("top")),o=t.helpers.getPX(i.data("bottom"));var v=s.top&&function(){return g<u+r&&g+h-a>=u+r}(),b=s.bottom&&function(){return g+a<u+l-o&&g+h>u+l-o}();v||b?(i.css("width",f.width()+"px"),p||(i.addClass("fr-sticky-on"),i.removeClass("fr-sticky-off"),i.css("top")&&("auto"!=i.data("top")?i.css("top",t.helpers.getPX(i.data("top"))+c):i.data("top","auto")),i.css("bottom")&&("auto"!=i.data("bottom")?i.css("bottom",t.helpers.getPX(i.data("bottom"))+d):i.css("bottom","auto")))):t.node.hasClass(i.get(0),"fr-sticky-off")||(i.width(""),i.removeClass("fr-sticky-on"),i.addClass("fr-sticky-off"),i.css("top")&&"auto"!=i.data("top")&&s.top&&i.css("top",0),i.css("bottom")&&"auto"!=i.data("bottom")&&s.bottom&&i.css("bottom",0))}}function c(){var e=document.createElement("test"),n=e.style;return n.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==n.position.indexOf("sticky")&&!t.helpers.isIOS()&&!t.helpers.isAndroid()&&!t.browser.chrome}function d(){if(!c())if(t._stickyElements=[],t.helpers.isIOS()){(function e(){t.helpers.requestAnimationFrame()(e);for(var n=0;n<t._stickyElements.length;n++)s(t._stickyElements[n])})(),t.events.$on(e(t.o_win),"scroll",function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var r=e(t._stickyElements[n]),o=r.parent(),i=t.helpers.scrollTop();r.outerHeight()<i-o.offset().top&&(r.addClass("fr-opacity-0"),r.data("sticky-top",-1),r.data("sticky-scheduled",-1))}},!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",u,!0),t.events.$on(e(t.o_win),"resize",u,!0),t.events.on("initialized",u),t.events.on("focus",u),t.events.$on(e(t.o_win),"resize","textarea",u,!0);t.events.on("destroy",function(){t._stickyElements=[]})}function u(){if(t._stickyElements)for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])}function p(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),c()||(e.removeClass("fr-sticky"),t._stickyElements.push(e.get(0)))}function f(){d()}return{_init:f,forSelection:i,addSticky:p,refresh:u,at:a,getBoundingRect:n}},e.FE.MODULES.refresh=function(t){function n(e){a(e,!t.undo.canDo())}function r(e){a(e,!t.undo.canRedo())}function o(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var n=t.selection.blocks(),r=0;r<n.length;r++){for(var o=n[r].previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.previousSibling;if("LI"!=n[r].tagName||o)return a(e,!1),!0;a(e,!0)}}function i(n){if(t.node.hasClass(n.get(0),"fr-no-refresh"))return!1;for(var r=t.selection.blocks(),o=0;o<r.length;o++){var i="rtl"==t.opts.direction||"rtl"==e(r[o]).css("direction")?"margin-right":"margin-left";if("LI"==r[o].tagName||"LI"==r[o].parentNode.tagName)return a(n,!1),!0;if(t.helpers.getPX(e(r[o]).css(i))>0)return a(n,!1),!0}a(n,!0)}function a(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:n,redo:r,outdent:i,indent:o}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(e){function t(){var t='<div id="fr-text-edit-'+e.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+e.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+e.language.translate("Update")+"</button></div></div>",n={edit:t};e.popups.create("text.edit",n)}function n(){var t,n=e.popups.get("text.edit");t="INPUT"===e.$el.prop("tagName")?e.$el.attr("placeholder"):e.$el.text(),n.find("input").val(t).trigger("change"),e.popups.setContainer("text.edit",e.$sc),e.popups.show("text.edit",e.$el.offset().left+e.$el.outerWidth()/2,e.$el.offset().top+e.$el.outerHeight(),e.$el.outerHeight())}function r(){e.events.$on(e.$el,e._mouseup,function(){setTimeout(function(){n()},10)})}function o(){var t=e.popups.get("text.edit"),n=t.find("input").val();0===n.length&&(n=e.opts.placeholderText),"INPUT"===e.$el.prop("tagName")?e.$el.attr("placeholder",n):e.$el.text(n),e.events.trigger("contentChanged"),e.popups.hide("text.edit")}function i(){e.opts.editInPopup&&(t(),r())}return{_init:i,update:o}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function r(){var r=e.merge([],o());n(r,t.opts.toolbarButtonsXS||[]),n(r,t.opts.toolbarButtonsSM||[]),n(r,t.opts.toolbarButtonsMD||[]),n(r,t.opts.toolbarButtons);for(var i=r.length-1;i>=0;i--)"-"!=r[i]&&"|"!=r[i]&&r.indexOf(r[i])<i&&r.splice(i,1);var a=t.button.buildList(r,o());t.$tb.append(a),t.button.bindCommands(t.$tb)}function o(){var e=t.helpers.screenSize();return S[e]}function i(){var e=o();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var r=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),i=null;t.node.hasClass(r.next().get(0),"fr-dropdown-menu")&&(i=r.next()),r.removeClass("fr-hidden").appendTo(t.$tb),i&&i.appendTo(t.$tb)}}function a(){t.events.$on(e(t.o_win),"resize",i),t.events.$on(e(t.o_win),"orientationchange",i)}function s(n,r){setTimeout(function(){if((!n||n.which!=e.FE.KEYCODE.ESC)&&t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection||!t.selection.isCollapsed()&&!t.keys.isIME()||r)){if(t.$tb.data("instance",t),!1===t.events.trigger("toolbar.show",[n]))return!1;t.$tb.show(),t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.opts.zIndex>1?t.$tb.css("z-index",t.opts.zIndex+1):t.$tb.css("z-index",null)}},0)}function l(){if(t.button.getButtons(".fr-dropdown.fr-active").next().find(t.o_doc.activeElement).length)return!0;!1!==t.events.trigger("toolbar.hide")&&t.$tb.hide()}function c(){if(!1===t.events.trigger("toolbar.show"))return!1;t.$tb.show()}function d(n){clearTimeout(C),n&&n.which==e.FE.KEYCODE.ESC||(C=setTimeout(s,t.opts.typingTimer))}function u(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",s),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",s),t.browser.mozilla&&setInterval(s,200)):t.events.on("window.keyup",d),t.events.on("keydown",function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()}),t.events.on("keydown",function(t){if(t.which==e.FE.KEYCODE.ALT)return t.stopPropagation(),!1},!0),t.events.$on(t.$wp,"scroll.toolbar",s),t.events.on("commands.after",s),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",d),t.events.$on(t.$doc,"orientationchange",s))}function p(){t.opts.toolbarInline?(t.$sc.append(t.$tb),t.$tb.data("container",t.$sc),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),u(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function f(){t.$tb.html("").removeData().remove(),t.$tb=null}function g(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function h(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(u(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):p(),y=t.$tb.get(0).ownerDocument,E="defaultView"in y?y.defaultView:y.parentWindow,r(),a(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,function(e){var n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(n&&"INPUT"!=n.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}function m(){if(t.$sc=e(t.opts.scrollableContainer).first(),!t.$wp)return!1;t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&u()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),h(),t.$tb.data("instance",t)),t.opts.toolbarInline?t.$box.addClass("fr-inline"):t.$box.addClass("fr-basic"),t.events.on("focus",function(){t.$tb.data("instance",t)},!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,u()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,h())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),h(),t.$tb.data("instance",t)),t.events.on("destroy",g,!0),t.events.on(t.opts.toolbarInline||t.opts.toolbarContainer?"shared.destroy":"destroy",f,!0)}function v(){!w&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),w=!0)}function b(){w&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),w=!1),t.button.bulkRefresh()}var y,E,S=[];S[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,S[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,S[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,S[e.FE.LG]=t.opts.toolbarButtons;var C=null,w=!1;return{_init:m,hide:l,show:c,showInline:s,disable:v,enable:b}}}(i.default)}()},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.FE.PLUGINS.align=function(t){function n(n){var r=t.selection.element();if(e(r).parents(".fr-img-caption").length)e(r).css("text-align",n);else{t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var o=t.selection.blocks(),i=0;i<o.length;i++)t.helpers.getAlignment(e(o[i].parentNode))==n?e(o[i]).css("text-align","").removeClass("fr-temp-div"):e(o[i]).css("text-align",n).removeClass("fr-temp-div"),""===e(o[i]).attr("class")&&e(o[i]).removeAttr("class"),""===e(o[i]).attr("style")&&e(o[i]).removeAttr("style");t.selection.save(),t.html.unwrap(),t.selection.restore()}}function r(n){var r=t.selection.blocks();if(r.length){var o=t.helpers.getAlignment(e(r[0]));n.find("> *:first").replaceWith(t.icon.create("align-"+o))}}function o(n,r){var o=t.selection.blocks();if(o.length){var i=t.helpers.getAlignment(e(o[0]));r.find('a.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:n,refresh:r,refreshOnShow:o}},e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.align.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),n=t.popups.get("colors.picker");if(n||(n=o()),!n.hasClass("fr-active"))if(t.popups.setContainer("colors.picker",t.$tb),l(n.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("colors.picker")}function r(){t.popups.hide("colors.picker")}function o(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons)),e+=i()+"</div>";var n="";t.opts.colorsHEXInput&&(n='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer-'+t.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-color-hex-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="customColor" tabIndex="2" role="button">'+t.language.translate("OK")+"</button></div></div>");var r={buttons:e,text_colors:a("text"),background_colors:a("background"),custom_color:n},o=t.popups.create("colors.picker",r);return s(o),o}function i(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=t.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",(e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==t.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>")+"</div>"}function a(e){for(var n="text"==e?t.opts.colorsText:t.opts.colorsBackground,r='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',o=0;o<n.length;o++)0!==o&&o%t.opts.colorsStep==0&&(r+="<br>"),r+="REMOVE"!=n[o]?'<span class="fr-command fr-select-color" style="background: '+n[o]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+n[o]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+n[o]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("remove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return r+"</div>"}function s(n){t.events.on("popup.tab",function(r){var o=e(r.currentTarget);if(!t.popups.isVisible("colors.picker")||!o.is("span"))return!0;var i=r.which,a=!0;if(e.FE.KEYCODE.TAB==i){var s=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==i||e.FE.KEYCODE.ARROW_DOWN==i||e.FE.KEYCODE.ARROW_LEFT==i||e.FE.KEYCODE.ARROW_RIGHT==i){if(o.is("span.fr-select-color")){var l=o.parent().find("span.fr-select-color"),c=l.index(o),d=t.opts.colorsStep,u=Math.floor(l.length/d),p=c%d,f=Math.floor(c/d),g=f*d+p,h=u*d;e.FE.KEYCODE.ARROW_UP==i?g=((g-d)%h+h)%h:e.FE.KEYCODE.ARROW_DOWN==i?g=(g+d)%h:e.FE.KEYCODE.ARROW_LEFT==i?g=((g-1)%h+h)%h:e.FE.KEYCODE.ARROW_RIGHT==i&&(g=(g+1)%h);var m=e(l.get(g));t.events.disableBlur(),m.focus(),a=!1}}else e.FE.KEYCODE.ENTER==i&&(t.button.exec(o),a=!1);return!1===a&&(r.preventDefault(),r.stopPropagation()),a},!0)}function l(n){var r,o=t.popups.get("colors.picker"),i=e(t.selection.element());r="background"==n?"background-color":"color";var a=o.find(".fr-"+n+"-color .fr-select-color");for(a.find(".fr-selected-color").remove(),a.removeClass("fr-active-item"),a.not('[data-param1="REMOVE"]').attr("aria-selected",!1);i.get(0)!=t.el;){if("transparent"!=i.css(r)&&"rgba(0, 0, 0, 0)"!=i.css(r)){var s=o.find(".fr-"+n+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(i.css(r))+'"]');s.append('<span class="fr-selected-color" aria-hidden="true"></span>'),s.addClass("fr-active-item").attr("aria-selected",!0);break}i=i.parent()}var l=o.find(".fr-color-hex-layer input");l.length&&l.val(t.helpers.RGBToHex(i.css(r))).trigger("change")}function c(e,n){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+n+"-color").addClass("fr-selected-set"),l(n)),t.accessibility.focusPopup(e.parents(".fr-popup"))}function d(e){"REMOVE"!=e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),r()}function u(e){"REMOVE"!=e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),r()}function p(){t.popups.hide("colors.picker"),t.toolbar.showInline()}function f(){var e=t.popups.get("colors.picker"),n=e.find(".fr-color-hex-layer input");if(n.length){var r=n.val();"background"==e.find(".fr-selected-tab").attr("data-param1")?d(r):u(r)}}return{showColorsPopup:n,hideColorsPopup:r,changeSet:c,background:d,customColor:f,text:u,back:p}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.FE.RegisterCommand("customColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor()}}),e.FE.DefineIcon("remove",{NAME:"eraser"})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.FE.PLUGINS.emoticons=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="emoticons"]'),n=t.popups.get("emoticons");if(n||(n=o()),!n.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("emoticons",r,i,e.outerHeight())}}function r(){t.popups.hide("emoticons")}function o(){var e="";t.opts.toolbarInline&&t.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+t.button.buildList(t.opts.emoticonsButtons)+"</div>");var n={buttons:e,emoticons:a()},r=t.popups.create("emoticons",n);return t.tooltip.bind(r,".fr-emoticon"),s(r),r}function i(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),n=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(n&&t.node.hasClass(n,"fr-emoticon"))return n;var r=t.selection.ranges(0),o=r.startContainer;if(o.nodeType==Node.ELEMENT_NODE&&o.childNodes.length>0&&r.startOffset>0){var i=o.childNodes[r.startOffset-1];if(t.node.hasClass(i,"fr-emoticon"))return i}return!1}function a(){for(var e='<div style="text-align: center">',n=0;n<t.opts.emoticonsSet.length;n++)0!==n&&n%t.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+t.language.translate(t.opts.emoticonsSet[n].desc)+'" role="button" data-param1="'+t.opts.emoticonsSet[n].code+'">'+(t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+t.opts.emoticonsSet[n].code+'.svg"/>':"&#x"+t.opts.emoticonsSet[n].code+";")+'<span class="fr-sr-only">'+t.language.translate(t.opts.emoticonsSet[n].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return t.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+="</div>"}function s(n){t.events.on("popup.tab",function(r){var o=e(r.currentTarget);if(!t.popups.isVisible("emoticons")||!o.is("span, a"))return!0;var i,a,s,l=r.which;if(e.FE.KEYCODE.TAB==l){if(o.is("span.fr-emoticon")&&r.shiftKey||o.is("a")&&!r.shiftKey){var c=n.find(".fr-buttons");i=!t.accessibility.focusToolbar(c,!!r.shiftKey)}if(!1!==i){var d=n.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");o.is("span.fr-emoticon")&&(d=d.not("span.fr-emoticon:not(:focus)")),a=d.index(o),a=r.shiftKey?((a-1)%d.length+d.length)%d.length:(a+1)%d.length,s=d.get(a),t.events.disableBlur(),s.focus(),i=!1}}else if(e.FE.KEYCODE.ARROW_UP==l||e.FE.KEYCODE.ARROW_DOWN==l||e.FE.KEYCODE.ARROW_LEFT==l||e.FE.KEYCODE.ARROW_RIGHT==l){if(o.is("span.fr-emoticon")){var u=o.parent().find("span.fr-emoticon");a=u.index(o);var p=t.opts.emoticonsStep,f=Math.floor(u.length/p),g=a%p,h=Math.floor(a/p),m=h*p+g,v=f*p;e.FE.KEYCODE.ARROW_UP==l?m=((m-p)%v+v)%v:e.FE.KEYCODE.ARROW_DOWN==l?m=(m+p)%v:e.FE.KEYCODE.ARROW_LEFT==l?m=((m-1)%v+v)%v:e.FE.KEYCODE.ARROW_RIGHT==l&&(m=(m+1)%v),s=e(u.get(m)),t.events.disableBlur(),s.focus(),i=!1}}else e.FE.KEYCODE.ENTER==l&&(o.is("a")?o[0].click():t.button.exec(o),i=!1);return!1===i&&(r.preventDefault(),r.stopPropagation()),i},!0)}function l(n,r){var o=i(),a=t.selection.ranges(0);o?(0===a.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):a.startOffset>0&&t.selection.element()===o&&a.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore(),t.html.insert('<span class="fr-emoticon fr-deletable'+(r?" fr-emoticon-img":"")+'"'+(r?' style="background: url('+r+');"':"")+">"+(r?"&nbsp;":n)+"</span>&nbsp;"+e.FE.MARKERS,!0)):t.html.insert('<span class="fr-emoticon fr-deletable'+(r?" fr-emoticon-img":"")+'"'+(r?' style="background: url('+r+');"':"")+">"+(r?"&nbsp;":n)+"</span>&nbsp;",!0)}function c(){t.popups.hide("emoticons"),t.toolbar.showInline()}function d(){var n=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),n=0;n<e.length;n++)e[n].className+=" fr-deletable"};n(),t.events.on("html.set",n),t.events.on("keydown",function(n){if(t.keys.isCharacter(n.which)&&t.selection.inEditor()){var r=t.selection.ranges(0),o=i();t.node.hasClass(o,"fr-emoticon-img")&&o&&(0===r.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore())}}),t.events.on("keyup",function(n){for(var r=t.el.querySelectorAll(".fr-emoticon"),o=0;o<r.length;o++)void 0!==r[o].textContent&&0===r[o].textContent.replace(/\u200B/gi,"").length&&e(r[o]).remove();if(!(n.which>=e.FE.KEYCODE.ARROW_LEFT&&n.which<=e.FE.KEYCODE.ARROW_DOWN)){var a=i();t.node.hasClass(a,"fr-emoticon-img")&&(e(a).append(e.FE.MARKERS),t.selection.restore())}})}return{_init:d,insert:l,showEmoticonsPopup:n,hideEmoticonsPopup:r,back:c}},e.FE.DefineIcon("emoticons",{NAME:"smile-o",FA5NAME:"smile"}),e.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),e.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),e.extend(e.FE.DEFAULTS,{fileUpload:!0,fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.FE.PLUGINS.file=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),n=t.popups.get("file.insert");if(n||(n=b()),o(),!n.hasClass("fr-active"))if(t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("file.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("file.insert")}function r(){var e=t.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),i(t.language.translate("Uploading"),0)}function o(e){var n=t.popups.get("file.insert");n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-file-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function i(e,n){var r=t.popups.get("file.insert");if(r){var o=r.find(".fr-file-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function a(e){r();var n=t.popups.get("file.insert"),o=n.find(".fr-file-progress-bar-layer");o.addClass("fr-error");var i=o.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function s(e,n,r){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(n=t.selection.text()),t.html.insert('<a href="'+e+'" target="_blank" id="fr-inserted-file" class="fr-file">'+n+"</a>");var o=t.$el.find("#fr-inserted-file");o.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),w(),t.events.trigger("file.inserted",[o,r])}function l(e){try{if(!1===t.events.trigger("file.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(f(x,e),!1)}catch(t){return f(I,e),!1}}function c(n){try{var r=e(n).find("Location").text(),o=e(n).find("Key").text();return!1===t.events.trigger("file.uploadedToS3",[r,o,n],!0)?(t.edit.on(),!1):r}catch(e){return f(I,n),!1}}function d(e){var n=this.status,r=this.response,o=this.responseXML,i=this.responseText;try{if(t.opts.fileUploadToS3)if(201==n){var a=c(o);a&&s(a,e,r||o)}else f(I,r||o);else if(n>=200&&300>n){var d=l(i);d&&s(d.link,e,r||i)}else f(k,r||i)}catch(e){f(I,r||i)}}function u(){f(I,this.response||this.responseText||this.responseXML)}function p(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;i(t.language.translate("Uploading"),n)}}function f(e,n){t.edit.on(),a(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:N[e]},n])}function g(){t.edit.on(),o(!0)}function h(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("file.beforeUpload",[e]))return!1;var n=e[0];if(n.size>t.opts.fileMaxSize)return f(A),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(n.type.replace(/file\//g,""))<0)return f(O),!1;var o;if(t.drag_support.formdata&&(o=t.drag_support.formdata?new FormData:null),o){var i;if(!1!==t.opts.fileUploadToS3){o.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),o.append("success_action_status","201"),o.append("X-Requested-With","xhr"),o.append("Content-Type",n.type);for(i in t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(i)&&o.append(i,t.opts.fileUploadToS3.params[i])}for(i in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(i)&&o.append(i,t.opts.fileUploadParams[i]);o.append(t.opts.fileUploadParam,n);var a=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(a=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var s=t.core.getXHR(a,t.opts.fileUploadMethod);s.onload=function(){d.call(s,n.name)},s.onerror=u,s.upload.onprogress=p,s.onabort=g,r();var l=t.popups.get("file.insert");l&&l.off("abortUpload").on("abortUpload",function(){4!=s.readyState&&s.abort()}),s.send(o)}}}function m(n){t.events.$on(n,"dragover dragenter",".fr-file-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(n,"dragleave dragend",".fr-file-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(n,"drop",".fr-file-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var o=r.originalEvent.dataTransfer;if(o&&o.files){(n.data("instance")||t).file.upload(o.files)}},!0),t.helpers.isIOS()&&t.events.$on(n,"touchstart",'.fr-file-upload-layer input[type="file"]',function(){e(this).trigger("click")}),t.events.$on(n,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){(n.data("instance")||t).file.upload(this.files)}e(this).val("")},!0)}function v(){o()}function b(e){if(e)return t.popups.onHide("file.insert",v),!0;var n="";t.opts.fileUpload||t.opts.fileInsertButtons.splice(t.opts.fileInsertButtons.indexOf("fileUpload"),1),n='<div class="fr-buttons">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>";var r="";t.opts.fileUpload&&(r='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>');var o={buttons:n,upload_layer:r,progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},i=t.popups.create("file.insert",o);return m(i),i}function y(e){t.node.hasClass(e,"fr-file")}function E(n){var o=n.originalEvent.dataTransfer;if(o&&o.files&&o.files.length){var i=o.files[0];if(i&&void 0!==i.type){if(i.type.indexOf("image")<0){if(!t.opts.fileUpload)return n.preventDefault(),n.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var a=t.popups.get("file.insert");return a||(a=b()),t.popups.setContainer("file.insert",t.$sc),t.popups.show("file.insert",n.originalEvent.pageX,n.originalEvent.pageY),r(),h(o.files),n.preventDefault(),n.stopPropagation(),!1}}else i.type.indexOf("image")<0&&(n.preventDefault(),n.stopPropagation())}}function S(){t.events.on("drop",E),t.events.$on(t.$win,"keydown",function(n){var r=n.which,o=t.popups.get("file.insert");o&&r==e.FE.KEYCODE.ESC&&o.trigger("abortUpload")}),t.events.on("destroy",function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")})}function C(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()}function w(){var e,n=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),r=[];for(e=0;e<n.length;e++)r.push(n[e].getAttribute("href"));if(L)for(e=0;e<L.length;e++)r.indexOf(L[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[L[e]]);L=n}function T(){S(),t.events.on("link.beforeRemove",y),t.$wp&&(w(),t.events.on("contentChanged",w)),b(!0)}var x=2,k=3,I=4,A=5,O=6,N={};N[1]="File cannot be loaded from the passed link.",N[x]="No link in upload response.",N[k]="Error during file upload.",N[I]="Parsing response failed.",N[A]="File is too large.",N[O]="File file type is invalid.",N[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var L;return{_init:T,showInsertPopup:n,upload:h,insert:s,back:C,hideProgressBar:o}},e.FE.DefineIcon("insertFile",{NAME:"file-o",FA5NAME:"file"}),e.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function n(e){t.format.applyStyle("font-family",e)}function r(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+a()+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),r=t.find(".fr-active").parent();r.length?n.parent().scrollTop(r.offset().top-n.offset().top-(n.parent().outerHeight()/2-r.outerHeight()/2)):n.parent().scrollTop(0)}function o(t){var n=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(n,function(e){return e.length>0})}function i(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n].toLowerCase()==t[r].toLowerCase())return[n,r];return null}function a(){var n=e(t.selection.element()).css("font-family"),r=o(n),a=[];for(var s in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(s)){var l=o(s),c=i(r,l);c&&a.push([s,c])}return 0===a.length?null:(a.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),a[0][0])}function s(n){if(t.opts.fontFamilySelection){var r=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");n.find("> span").text(t.opts.fontFamily[a()]||r[0]||t.language.translate(t.opts.fontFamilyDefaultSelection))}}return{apply:n,refreshOnShow:r,refresh:s}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+="</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){function n(e){t.format.applyStyle("font-size",e)}function r(n,r){var o=e(t.selection.element()).css("font-size");r.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),r.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0);var i=r.find(".fr-dropdown-list"),a=r.find(".fr-active").parent();a.length?i.parent().scrollTop(a.offset().top-i.offset().top-(i.parent().outerHeight()/2-a.outerHeight()/2)):i.parent().scrollTop(0)}function o(n){if(t.opts.fontSizeSelection){var r=t.helpers.getPX(e(t.selection.element()).css("font-size"));n.find("> span").text(r)}}return{apply:n,refreshOnShow:r,refresh:o}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,n=0;n<t.length;n++){var r=t[n];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+r+'px" title="'+r+'">'+r+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"})})},function(e,t,n){"use strict";var r,o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:"https://i.froala.com/upload",imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(t){function n(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val(""),Le&&n.val(Le.attr("src")),n.trigger("change")}function r(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),n=t.popups.get("image.insert");if(n||(n=j()),E(),!n.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",r,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("image.insert")}function o(){var e=t.popups.get("image.edit");if(e||(e=b()),e){var n=Ie();Oe()&&(n=n.find(".fr-img-wrap")),t.popups.setContainer("image.edit",t.$sc),t.popups.refresh("image.edit");var r=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.edit",r,o,n.outerHeight())}}function i(){E()}function s(e){e.parents(".fr-img-caption").length>0&&(e=e.parents(".fr-img-caption:first")),e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+ve(e)[0]),e.addClass("fr-di"+be(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function l(e){e.parents(".fr-img-caption").length>0&&(e=e.parents(".fr-img-caption:first")),he(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":ve(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function c(){for(var n="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),r=0;r<n.length;r++){var o=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?((t.opts.imageDefaultAlign||t.opts.imageDefaultDisplay)&&s(o),t.opts.imageTextNear||(o.parents(".fr-img-caption").length>0?o.parents(".fr-img-caption:first").removeClass("fr-dii").addClass("fr-dib"):o.removeClass("fr-dii").addClass("fr-dib"))):t.opts.htmlUntouched||t.opts.useClasses||(t.opts.imageDefaultAlign||t.opts.imageDefaultDisplay)&&l(o),t.opts.iframe&&o.on("load",t.size.syncIframe)}}function d(n){void 0===n&&(n=!0);var r,o=Array.prototype.slice.call(t.el.querySelectorAll("img")),i=[];for(r=0;r<o.length;r++)if(i.push(o[r].getAttribute("src")),e(o[r]).toggleClass("fr-draggable",t.opts.imageMove),""===o[r].getAttribute("class")&&o[r].removeAttribute("class"),""===o[r].getAttribute("style")&&o[r].removeAttribute("style"),o[r].parentNode&&o[r].parentNode.parentNode&&t.node.hasClass(o[r].parentNode.parentNode,"fr-img-caption")){var a=o[r].parentNode.parentNode;t.browser.mozilla||a.setAttribute("contenteditable",!1),a.setAttribute("draggable",!1),a.classList.add("fr-draggable");var s=o[r].nextSibling;s&&s.setAttribute("contenteditable",!0)}if(Ke)for(r=0;r<Ke.length;r++)i.indexOf(Ke[r].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Ke[r])]);if(Ke&&n){var l=[];for(r=0;r<Ke.length;r++)l.push(Ke[r].getAttribute("src"));for(r=0;r<o.length;r++)l.indexOf(o[r].getAttribute("src"))<0&&t.events.trigger("image.loaded",[e(o[r])])}Ke=o}function u(){if(_e||Z(),!Le)return!1;var e=t.$wp||t.$sc;e.append(_e),_e.data("instance",t);var n=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),r=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);r-=t.helpers.getPX(e.css("border-left-width")),n-=t.helpers.getPX(e.css("border-top-width")),t.$el.is("img")&&t.$sc.is("body")&&(n=0,r=0);var o=Ie();Oe()&&(o=o.find(".fr-img-wrap")),_e.css("top",(t.opts.iframe?o.offset().top:o.offset().top+n)-1).css("left",(t.opts.iframe?o.offset().left:o.offset().left+r)-1).css("width",o.get(0).getBoundingClientRect().width).css("height",o.get(0).getBoundingClientRect().height).addClass("fr-active")}function p(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function f(e){Oe()?Le.parents(".fr-img-caption").css("width",e):Le.css("width",e)}function g(n){if(!t.core.sameInstance(_e))return!0;if(n.preventDefault(),n.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep();var r=n.pageX||n.originalEvent.touches[0].pageX;if("mousedown"==n.type){var o=t.$oel.get(0),i=o.ownerDocument,a=i.defaultView||i.parentWindow,s=!1;try{s=a.location!=a.parent.location&&!(a.$&&a.$.FE)}catch(e){}s&&a.frameElement&&(r+=t.helpers.getPX(e(a.frameElement).offset().left)+a.frameElement.clientLeft)}Fe=e(this),Fe.data("start-x",r),Fe.data("start-width",Le.width()),Fe.data("start-height",Le.height());var l=Le.width();if(t.opts.imageResizeWithPercent){var c=Le.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;l=(l/e(c).outerWidth()*100).toFixed(2)+"%"}f(l),De.show(),t.popups.hideAll(),fe()}function h(n){if(!t.core.sameInstance(_e))return!0;var r;if(Fe&&Le){if(n.preventDefault(),t.$el.find("img.fr-error").left)return!1;var o=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null);if(!o)return!1;var i=Fe.data("start-x"),a=o-i,s=Fe.data("start-width");if((Fe.hasClass("fr-hnw")||Fe.hasClass("fr-hsw"))&&(a=0-a),t.opts.imageResizeWithPercent){var l=Le.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;s=((s+a)/e(l).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(s=Math.round(s)),f(s+"%"),r=Oe()?(t.helpers.getPX(Le.parents(".fr-img-caption").css("width"))/e(l).outerWidth()*100).toFixed(2):(t.helpers.getPX(Le.css("width"))/e(l).outerWidth()*100).toFixed(2),r===s||t.opts.imageRoundPercent||f(r+"%"),Le.css("height","").removeAttr("height")}else s+a>=t.opts.imageMinWidth&&(f(s+a),r=Oe()?t.helpers.getPX(Le.parents(".fr-img-caption").css("width")):t.helpers.getPX(Le.css("width"))),r!==s+a&&f(r),((Le.attr("style")||"").match(/(^height:)|(; *height:)/)||Le.attr("height"))&&(Le.css("height",Fe.data("start-height")*Le.width()/Fe.data("start-width")),Le.removeAttr("height"));u(),t.events.trigger("image.resize",[ke()])}}function m(e){if(!t.core.sameInstance(_e))return!0;if(Fe&&Le){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;Fe=null,De.hide(),u(),o(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[ke()])}}function v(e,n,r){t.edit.on(),Le&&Le.addClass("fr-error"),C(t.language.translate("Something went wrong. Please try again.")),!Le&&r&&ee(r),t.events.trigger("image.error",[{code:e,message:Ve[e]},n,r])}function b(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Le&&t.popups.isVisible("image.edit")&&(t.events.disableBlur(),T(Le))}),!0;var n="";if(t.opts.imageEditButtons.length>0){n+='<div class="fr-buttons">',n+=t.button.buildList(t.opts.imageEditButtons),n+="</div>";var r={buttons:n};return t.popups.create("image.edit",r)}return!1}function y(e){var n=t.popups.get("image.insert");if(n||(n=j()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),Le){var r=Ie();t.popups.setContainer("image.insert",t.$sc);var o=r.offset().left+r.width()/2,i=r.offset().top+r.height();t.popups.show("image.insert",o,i,r.outerHeight())}void 0===e&&S(t.language.translate("Uploading"),0)}function E(e){var n=t.popups.get("image.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&Le){var r=Le;ue(!0),t.selection.setAfter(r.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function S(e,n){var r=t.popups.get("image.insert");if(r){var o=r.find(".fr-image-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function C(e){y();var n=t.popups.get("image.insert"),r=n.find(".fr-image-progress-bar-layer");r.addClass("fr-error");var o=r.find("h3");o.text(e),t.events.disableBlur(),o.focus()}function w(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");if(n.val().length>0){y(),S(t.language.translate("Loading image"));var r=n.val();if(t.opts.imageUploadRemoteUrls&&t.opts.imageCORSProxy&&t.opts.imageUpload){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){200==this.status?B([new Blob([this.response],{type:this.response.type||"image/png"})],Le):v(Re)},o.onerror=function(){k(r,!0,[],Le)},o.open("GET",t.opts.imageCORSProxy+"/"+r,!0),o.send()}else k(r,!0,[],Le);n.val(""),n.blur()}}function T(e){de.call(e.get(0))}function x(){var n=e(this);t.popups.hide("image.insert"),n.removeClass("fr-uploading"),n.next().is("br")&&n.next().remove(),T(n),t.events.trigger("image.loaded",[n])}function k(e,n,r,o,i){t.edit.off(),S(t.language.translate("Loading image")),n&&(e=t.helpers.sanitizeURL(e));var a=new Image;a.onload=function(){var n,a;if(o){t.undo.canDo()||o.hasClass("fr-uploading")||t.undo.saveStep();var s=o.data("fr-old-src");o.data("fr-image-pasted")&&(s=null),t.$wp?(n=o.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted"),n.off("load"),s&&o.attr("src",s),o.replaceWith(n)):n=o;for(var l=n.get(0).attributes,c=0;c<l.length;c++){var u=l[c];0===u.nodeName.indexOf("data-")&&n.removeAttr(u.nodeName)}if(void 0!==r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&n.attr("data-"+a,r[a]);n.on("load",x),n.attr("src",e),t.edit.on(),d(!1),t.undo.saveStep(),t.events.disableBlur(),t.$el.blur(),t.events.trigger(s?"image.replaced":"image.inserted",[n,i])}else n=_(e,r,x),d(!1),t.undo.saveStep(),t.$el.blur(),t.events.trigger("image.inserted",[n,i])},a.onerror=function(){v(Re)},y(t.language.translate("Loading image")),a.src=e}function I(e){try{if(!1===t.events.trigger("image.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(v(Pe,e),!1)}catch(t){return v(Ue,e),!1}}function A(n){try{var r=e(n).find("Location").text(),o=e(n).find("Key").text();return!1===t.events.trigger("image.uploadedToS3",[r,o,n],!0)?(t.edit.on(),!1):r}catch(e){return v(Ue,n),!1}}function O(e){S(t.language.translate("Loading image"));var n=this.status,r=this.response,o=this.responseXML,i=this.responseText;try{if(t.opts.imageUploadToS3)if(201==n){var a=A(o);a&&k(a,!1,[],e,r||o)}else v(Ue,r||o,e);else if(n>=200&&300>n){var s=I(i);s&&k(s.link,!1,s,e,r||i)}else v(Me,r||i,e)}catch(t){v(Ue,r||i,e)}}function N(){v(Ue,this.response||this.responseText||this.responseXML)}function L(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;S(t.language.translate("Uploading"),n)}}function _(n,r,o){var i,a="";if(r&&void 0!==r)for(i in r)r.hasOwnProperty(i)&&"link"!=i&&(a+=" data-"+i+'="'+r[i]+'"');var s=t.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+n+'"'+a+(s?' style="width: '+s+';"':"")+">");he(l,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),l.on("load",o),l.on("error",function(){e(this).addClass("fr-error"),v($e)}),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert(),t.html.wrap();var c=t.$el.find(".fr-marker");return c.length?(c.parent().is("hr")&&c.parent().after(c),t.node.isLastSibling(c)&&c.parent().hasClass("fr-deletable")&&c.insertAfter(c.parent()),c.replaceWith(l)):t.$el.append(l),t.selection.clear(),l}function F(){t.edit.on(),E(!0)}function D(n,r,o,i){function a(){var o=e(this);o.off("load"),o.addClass("fr-uploading"),o.next().is("br")&&o.next().remove(),t.placeholder.refresh(),T(o),u(),y(),t.edit.off(),n.onload=function(){O.call(n,o)},n.onerror=N,n.upload.onprogress=L,n.onabort=F,o.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(r)}var s,l=new FileReader;l.addEventListener("load",function(){var e=l.result;if(l.result.indexOf("svg+xml")<0){for(var n=atob(l.result.split(",")[1]),r=[],o=0;o<n.length;o++)r.push(n.charCodeAt(o));e=window.URL.createObjectURL(new Blob([new Uint8Array(r)],{type:"image/jpeg"}))}i?(i.on("load",a),i.one("error",function(){i.off("load"),i.attr("src",i.data("fr-old-src")),v($e)}),t.edit.on(),t.undo.saveStep(),i.data("fr-old-src",i.attr("src")),i.attr("src",e)):s=_(e,null,a)},!1),l.readAsDataURL(o)}function B(e,n){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("image.beforeUpload",[e,n]))return!1;var r=e[0];if(r.name||(r.name=(new Date).getTime()+".jpg"),r.size>t.opts.imageMaxSize)return v(je),!1;if(t.opts.imageAllowedTypes.indexOf(r.type.replace(/image\//g,""))<0)return v(He),!1;var o;if(t.drag_support.formdata&&(o=t.drag_support.formdata?new FormData:null),o){var i;if(!1!==t.opts.imageUploadToS3){o.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(r.name||"untitled")),o.append("success_action_status","201"),o.append("X-Requested-With","xhr"),o.append("Content-Type",r.type);for(i in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(i)&&o.append(i,t.opts.imageUploadToS3.params[i])}for(i in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(i)&&o.append(i,t.opts.imageUploadParams[i]);o.append(t.opts.imageUploadParam,r,r.name);var a=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(a=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket);D(t.core.getXHR(a,t.opts.imageUploadMethod),o,r,n||Le)}}}function R(n){t.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(n,"drop",".fr-image-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var o=r.originalEvent.dataTransfer;if(o&&o.files){var i=n.data("instance")||t;i.events.disableBlur(),i.image.upload(o.files),i.events.enableBlur()}},!0),t.helpers.isIOS()&&t.events.$on(n,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){e(this).trigger("click")},!0),t.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.image.upload(this.files,Le)}e(this).val("")},!0)}function P(e){return e.is("img")&&e.parents(".fr-img-caption").length>0?e.parents(".fr-img-caption"):void 0}function M(n){var r=n.originalEvent.dataTransfer;if(r&&r.files&&r.files.length){var o=r.files[0];if(o&&o.type&&-1!==o.type.indexOf("image")&&t.opts.imageAllowedTypes.indexOf(o.type.replace(/image\//g,""))>=0){if(!t.opts.imageUpload)return n.preventDefault(),n.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),0===t.$el.find(".fr-marker").length&&t.selection.setAtEnd(t.el),t.popups.hideAll();var i=t.popups.get("image.insert");i||(i=j()),t.popups.setContainer("image.insert",t.$sc);var a=n.originalEvent.pageX,s=n.originalEvent.pageY;return t.opts.iframe&&(s+=t.$iframe.offset().top,a+=t.$iframe.offset().left),t.popups.show("image.insert",a,s),y(),t.opts.imageAllowedTypes.indexOf(o.type.replace(/image\//g,""))>=0?(ue(!0),B(r.files)):v(He),n.preventDefault(),n.stopPropagation(),!1}}}function U(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")||(t.helpers.isMobile()||t.selection.clear(),Be=!0,t.popups.areVisible()&&t.events.disableBlur(),t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||"touchstart"==n.type||n.preventDefault(),void n.stopPropagation())}),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")||void(Be&&(Be=!1,n.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur())))}),t.events.on("keyup",function(n){if(n.shiftKey&&""===t.selection.text().replace(/\n/g,"")&&t.keys.isArrow(n.which)){var r=t.selection.element(),o=t.selection.endElement();r&&"IMG"==r.tagName?T(e(r)):o&&"IMG"==o.tagName&&T(e(o))}},!0),t.events.on("drop",M),t.events.on("element.beforeDrop",P),t.events.on("mousedown window.mousedown",pe),t.events.on("window.touchmove",fe),t.events.on("mouseup window.mouseup",function(){return Le?(ue(),!1):void fe()}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&ue()}),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Be=!1,ue(!0)}),t.events.on("modals.hide",function(){Le&&(Te(),t.selection.clear())})}function j(e){if(e)return t.popups.onRefresh("image.insert",n),t.popups.onHide("image.insert",i),!0;var r,o="";t.opts.imageUpload||t.opts.imageInsertButtons.splice(t.opts.imageInsertButtons.indexOf("imageUpload"),1),t.opts.imageInsertButtons.length>1&&(o='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var a=t.opts.imageInsertButtons.indexOf("imageUpload"),s=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";a>=0&&(r=" fr-active",s>=0&&a>s&&(r=""),l='<div class="fr-image-upload-layer'+r+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var c="";s>=0&&(r=" fr-active",a>=0&&s>a&&(r=""),c='<div class="fr-image-by-url-layer'+r+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d={buttons:o,upload_layer:l,by_url_layer:c,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},u=t.popups.create("image.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Le&&t.popups.isVisible("image.insert")&&we()}),R(u),u}function H(){if(Le){t.popups.get("image.alt").find("input").val(Le.attr("alt")||"").trigger("change")}}function $(){var e=t.popups.get("image.alt");e||(e=V()),E(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",t.$sc);var n=Ie();Oe()&&(n=n.find(".fr-img-wrap"));var r=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.alt",r,o,n.outerHeight())}function V(e){if(e)return t.popups.onRefresh("image.alt",H),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>";var r="";r='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,alt_layer:r},i=t.popups.create("image.alt",o);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){Le&&t.popups.isVisible("image.alt")&&$()}),i}function K(e){if(Le){var n=t.popups.get("image.alt");Le.attr("alt",e||n.find("input").val()||""),n.find("input:focus").blur(),T(Le)}}function q(){if(Le){var e=t.popups.get("image.size");e.find('input[name="width"]').val(Le.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Le.get(0).style.height).trigger("change")}}function W(){var e=t.popups.get("image.size");e||(e=z()),E(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",t.$sc);var n=Ie();Oe()&&(n=n.find(".fr-img-wrap"));var r=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.size",r,o,n.outerHeight())}function z(e){if(e)return t.popups.onRefresh("image.size",q),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>";var r="";r='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,size_layer:r},i=t.popups.create("image.size",o);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){Le&&t.popups.isVisible("image.size")&&W()}),i}function G(e,n){if(Le){var r=t.popups.get("image.size");e=e||r.find('input[name="width"]').val()||"",n=n||r.find('input[name="height"]').val()||"";var o=/^[\d]+((px)|%)*$/g;Le.removeAttr("width").removeAttr("height"),e.match(o)?Le.css("width",e):Le.css("width",""),n.match(o)?Le.css("height",n):Le.css("height",""),Oe()&&(Le.parent().removeAttr("width").removeAttr("height"),e.match(o)?Le.parent().css("width",e):Le.parent().css("width",""),n.match(o)?Le.parent().css("height",n):Le.parent().css("height","")),r.find("input:focus").blur(),T(Le)}}function Y(e){var n,r,o=t.popups.get("image.insert");if(Le||t.opts.toolbarInline){if(Le){var i=Ie();Oe()&&(i=i.find(".fr-img-wrap")),r=i.offset().top+i.outerHeight(),n=i.offset().left+i.outerWidth()/2}}else{var a=t.$tb.find('.fr-command[data-cmd="insertImage"]');n=a.offset().left+a.outerWidth()/2,r=a.offset().top+(t.opts.toolbarBottom?10:a.outerHeight()-10)}!Le&&t.opts.toolbarInline&&(r=o.offset().top-t.helpers.getPX(o.css("margin-top")),o.hasClass("fr-above")&&(r+=o.outerHeight())),o.find(".fr-layer").removeClass("fr-active"),o.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",n,r,Le?Le.outerHeight():0),t.accessibility.focusPopup(o)}function X(e){t.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function J(e){t.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function Q(e,t,n,r){return e.pageX=t,g.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),h.call(this,e),m.call(this,e),++r}function Z(){var n;if(t.shared.$image_resizer?(_e=t.shared.$image_resizer,De=t.shared.$img_overlay,t.events.on("destroy",function(){_e.removeClass("fr-active").appendTo(e("body:first"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),_e=t.shared.$image_resizer,t.events.$on(_e,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&(_e.append(p("nw")+p("ne")+p("sw")+p("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),De=t.shared.$img_overlay,n=_e.get(0).ownerDocument,e(n).find("body:first").append(De))),t.events.on("shared.destroy",function(){_e.html("").removeData().remove(),_e=null,t.opts.imageResize&&(De.remove(),De=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){Le&&!Le.hasClass("fr-uploading")?ue(!0):Le&&(u(),we(),y(!1))}),t.opts.imageResize){n=_e.get(0).ownerDocument,t.events.$on(_e,t._mousedown,".fr-handler",g),t.events.$on(e(n),t._mousemove,h),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,m),t.events.$on(De,"mouseleave",m);var r=1,o=null,i=0;t.events.on("keydown",function(n){if(Le){var a=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,s=n.which;(s!==o||n.timeStamp-i>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?r=Q.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey?r=Q.call(this,n,2,-1,r):t.keys.ctrlKey(n)||s!=e.FE.KEYCODE.ENTER||(Le.before("<br>"),T(Le)),o=s,i=n.timeStamp}},!0),t.events.on("keyup",function(){r=1})}}function ee(n){(n=n||Ie())&&!1!==t.events.trigger("image.beforeRemove",[n])&&(t.popups.hideAll(),Te(),ue(!0),t.undo.canDo()||t.undo.saveStep(),n.get(0)==t.el?n.removeAttr("src"):("A"==n.get(0).parentNode.tagName?(t.selection.setBefore(n.get(0).parentNode)||t.selection.setAfter(n.get(0).parentNode)||n.parent().after(e.FE.MARKERS),e(n.get(0).parentNode).remove()):(t.selection.setBefore(n.get(0))||t.selection.setAfter(n.get(0))||n.after(e.FE.MARKERS),n.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function te(n){var r=n.which;if(Le&&(r==e.FE.KEYCODE.BACKSPACE||r==e.FE.KEYCODE.DELETE))return n.preventDefault(),n.stopPropagation(),ee(),!1;if(Le&&r==e.FE.KEYCODE.ESC){var o=Le;return ue(!0),t.selection.setAfter(o.get(0)),t.selection.restore(),n.preventDefault(),!1}if(Le&&(r==e.FE.KEYCODE.ARROW_LEFT||r==e.FE.KEYCODE.ARROW_RIGHT)){var i=Le.get(0);return ue(!0),r==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(i):t.selection.setAfter(i),t.selection.restore(),n.preventDefault(),!1}return Le&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),n.stopPropagation(),!1):void 0}function ne(e){if(e&&"IMG"==e.tagName){if(t.node.hasClass(e,"fr-uploading")||t.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):t.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable"),e.parentNode&&e.parentNode.parentNode&&t.node.hasClass(e.parentNode.parentNode,"fr-img-caption")){var n=e.parentNode.parentNode;n.removeAttribute("contenteditable"),n.removeAttribute("draggable"),n.classList.remove("fr-draggable");var r=e.nextSibling;r&&r.removeAttribute("contenteditable")}}else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var o=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<o.length;i++)ne(o[i])}function re(){if(U(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',de),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(){qe=!1}),t.events.$on(t.$el,"touchmove",function(){qe=!0})),t.$wp?(t.events.on("window.keydown keydown",te,!0),t.events.on("keyup",function(t){return(!Le||t.which!=e.FE.KEYCODE.ENTER)&&void 0},!0)):t.events.$on(t.$win,"keydown",te),t.events.on("toolbar.esc",function(){if(Le){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=Le;ue(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}},!0),t.events.on("toolbar.focusEditor",function(){return!Le&&void 0},!0),t.events.on("window.cut window.copy",function(n){if(Le&&t.popups.isVisible("image.edit")&&!t.popups.get("image.edit").find(":focus").length){var r=Ie();Oe()?(r.before(e.FE.START_MARKER),r.after(e.FE.END_MARKER),t.selection.restore(),t.paste.saveCopiedText(r.get(0).outerHTML,r.text())):(Te(),t.paste.saveCopiedText(Le.get(0).outerHTML,Le.attr("alt"))),"copy"==n.type?setTimeout(function(){T(Le)}):(ue(!0),t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0))}},!0),t.browser.msie&&t.events.on("keydown",function(n){if(!t.selection.isCollapsed()||!Le)return!0;var r=n.which;r==e.FE.KEYCODE.C&&t.keys.ctrlKey(n)?t.events.trigger("window.copy"):r==e.FE.KEYCODE.X&&t.keys.ctrlKey(n)&&t.events.trigger("window.cut")}),t.events.$on(e(t.o_win),"keydown",function(t){var n=t.which;return Le&&n==e.FE.KEYCODE.BACKSPACE?(t.preventDefault(),!1):void 0}),t.events.$on(t.$win,"keydown",function(t){var n=t.which;Le&&Le.hasClass("fr-uploading")&&n==e.FE.KEYCODE.ESC&&Le.trigger("abortUpload")}),t.events.on("destroy",function(){Le&&Le.hasClass("fr-uploading")&&Le.trigger("abortUpload")}),t.events.on("paste.before",le),t.events.on("paste.beforeCleanup",ce),t.events.on("paste.after",ie),t.events.on("html.set",c),t.events.on("html.inserted",c),c(),t.events.on("destroy",function(){Ke=[]}),t.events.on("html.processGet",ne),t.opts.imageOutputSize){var n;t.events.on("html.beforeGet",function(){n=t.el.querySelectorAll("img");for(var r=0;r<n.length;r++){var o=n[r].style.width||e(n[r]).width(),i=n[r].style.height||e(n[r]).height();o&&n[r].setAttribute("width",(""+o).replace(/px/,"")),i&&n[r].setAttribute("height",(""+i).replace(/px/,""))}})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(d(),t.events.on("contentChanged",d)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){Le&&T(Le)},100)}),b(!0),j(!0),z(!0),V(!0),t.events.on("node.remove",function(e){return"IMG"==e.get(0).tagName?(ee(e),!1):void 0})}function oe(n){if(!1===t.events.trigger("image.beforePasteUpload",[n]))return!1;Le=e(n),u(),o(),we(),y();for(var r=atob(e(n).attr("src").split(",")[1]),i=[],a=0;a<r.length;a++)i.push(r.charCodeAt(a));B([new Blob([new Uint8Array(i)],{type:"image/jpeg"})],Le)}function ie(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(n,r){if(t.opts.imagePasteProcess){var o=t.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=t.opts.imageResizeWithPercent?"%":"px"),e(r).css("width",o).removeClass("fr-dii fr-dib fr-fir fr-fil"),he(e(r),t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign)}if(0===r.src.indexOf("data:"))oe(r);else if(0===r.src.indexOf("blob:")||0===r.src.indexOf("http")&&t.opts.imageUploadRemoteUrls&&t.opts.imageCORSProxy){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e=t.o_doc.createElement("CANVAS"),n=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,n.drawImage(this,0,0),r.src=e.toDataURL("image/png"),oe(r)},i.src=(0===r.src.indexOf("blob:")?"":t.opts.imageCORSProxy+"/")+r.src}else 0!==r.src.indexOf("http")||0===r.src.indexOf("https://mail.google.com/mail")?(t.selection.save(),e(r).remove(),t.selection.restore()):e(r).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function ae(e){var n=e.target.result,r=t.opts.imageDefaultWidth;r&&"auto"!=r&&(r+=t.opts.imageResizeWithPercent?"%":"px"),t.undo.saveStep(),t.html.insert('<img data-fr-image-pasted="true" src="'+n+'"'+(r?' style="width: '+r+';"':"")+">");var o=t.$el.find('img[data-fr-image-pasted="true"]');o&&he(o,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),t.events.trigger("paste.after")}function se(e){var t=new FileReader;t.onload=ae,t.readAsDataURL(e)}function le(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var n=0;n<e.clipboardData.items.length&&!(t=e.clipboardData.items[n].getAsFile());n++);if(t)return se(t),!1}}function ce(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function de(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(n&&"touchend"==n.type&&qe)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=t&&e.FE.INSTANCES[r].events.trigger("image.hideResizer");t.toolbar.disable(),n&&(n.stopPropagation(),n.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),Le=e(this),t.browser.msie||Te(),u(),o(),t.browser.msie||t.selection.clear(),t.helpers.isIOS()&&(t.events.disableBlur(),t.$el.blur()),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function ue(e){Le&&(ge()||!0===e)&&(t.toolbar.enable(),_e.removeClass("fr-active"),t.popups.hide("image.edit"),Le=null,fe(),Fe=null,De&&De.hide())}function pe(){We=!0}function fe(){We=!1}function ge(){return We}function he(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),r&&e.addClass("fr-fi"+r[0]),n&&e.addClass("fr-di"+n[0])):"inline"==n?(e.css({display:"inline-block",verticalAlign:"bottom",margin:t.opts.imageDefaultMargin}),"center"==r?e.css({float:"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*t.opts.imageDefaultMargin+"px)",textAlign:"center"}):"left"==r?e.css({float:"left",marginLeft:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)",textAlign:"left"}):e.css({float:"right",marginRight:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)",textAlign:"right"})):"block"==n&&(e.css({display:"block",float:"none",verticalAlign:"top",margin:t.opts.imageDefaultMargin+"px auto",textAlign:"center"}),"left"==r?e.css({marginLeft:0,textAlign:"left"}):"right"==r&&e.css({marginRight:0,textAlign:"right"}))}function me(e){var n=Ie();n.removeClass("fr-fir fr-fil"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?n.addClass("fr-fil"):"right"==e&&n.addClass("fr-fir"):he(n,be(),e),Te(),u(),o(),t.selection.clear()}function ve(e){if(void 0===e&&(e=Ie()),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function be(e){void 0===e&&(e=Ie());var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ye(e){Le&&e.find("> *:first").replaceWith(t.icon.create("image-align-"+ve()))}function Ee(e,t){Le&&t.find('.fr-command[data-param1="'+ve()+'"]').addClass("fr-active").attr("aria-selected",!0)}function Se(e){var n=Ie();n.removeClass("fr-dii fr-dib"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?n.addClass("fr-dii"):"block"==e&&n.addClass("fr-dib"):he(n,e,ve()),Te(),u(),o(),t.selection.clear()}function Ce(e,t){Le&&t.find('.fr-command[data-param1="'+be()+'"]').addClass("fr-active").attr("aria-selected",!0)}function we(){var e=t.popups.get("image.insert");e||(e=j()),t.popups.isVisible("image.insert")||(E(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$sc));var n=Ie();Oe()&&(n=n.find(".fr-img-wrap"));var r=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("image.insert",r,o,n.outerHeight(!0))}function Te(){if(Le){t.events.disableBlur(),t.selection.clear();var e=t.doc.createRange();e.selectNode(Le.get(0));t.selection.get().addRange(e),t.events.enableBlur()}}function xe(){Le?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),T(Le)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function ke(){return Le}function Ie(){return Oe()?Le.parents(".fr-img-caption:first"):Le}function Ae(e,n,r){if(void 0===n&&(n=t.opts.imageStyles),void 0===r&&(r=t.opts.imageMultipleStyles),!Le)return!1;var o=Ie();if(!r){var i=Object.keys(n);i.splice(i.indexOf(e),1),o.removeClass(i.join(" "))}"object"==a(n[e])?(o.removeAttr("style"),o.css(n[e].style)):o.toggleClass(e),T(Le)}function Oe(){return!!Le&&Le.parents(".fr-img-caption").length>0}function Ne(){var n;Le&&!Oe()?(n=Le,Le.parent().is("a")&&(n=Le.parent()),n.wrap("<span "+(t.browser.mozilla?"":'contenteditable="false"')+'class="fr-img-caption '+Le.attr("class")+'" style="'+(Le.attr("style")?Le.attr("style")+" ":"")+"width: "+Le.width()+'px;" draggable="false"></span>'),n.wrap('<span class="fr-img-wrap"></span>'),n.after('<span class="fr-inner" contenteditable="true">'+e.FE.START_MARKER+"Image caption"+e.FE.END_MARKER+"</span>"),Le.removeAttr("class").removeAttr("style").removeAttr("width"),ue(!0),t.selection.restore()):(n=Ie(),Le.insertAfter(n),Le.attr("class",n.attr("class").replace("fr-img-caption","")).attr("style",n.attr("style")),n.remove(),T(Le))}var Le,_e,Fe,De,Be=!1,Re=1,Pe=2,Me=3,Ue=4,je=5,He=6,$e=8,Ve={};Ve[Re]="Image cannot be loaded from the passed link.",Ve[Pe]="No link in upload response.",Ve[Me]="Error during file upload.",Ve[Ue]="Parsing response failed.",Ve[je]="File is too large.",Ve[He]="Image file type is invalid.",Ve[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",Ve[$e]="Image file is corrupted.";var Ke,qe,We=!1;return{_init:re,showInsertPopup:r,showLayer:Y,refreshUploadButton:X,refreshByURLButton:J,upload:B,insertByURL:w,align:me,refreshAlign:ye,refreshAlignOnShow:Ee,display:Se,refreshDisplayOnShow:Ce,replace:we,back:xe,get:ke,getEl:Ie,insert:k,showProgressBar:y,remove:ee,hideProgressBar:E,applyStyle:Ae,showAltPopup:$,showSizePopup:W,setAlt:K,setSize:G,toggleCaption:Ne,hasCaption:Oe,exitEdit:ue,edit:T}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.imageAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("image-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange",FA5NAME:"exchange-alt"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==(void 0===r?"undefined":a(r))&&(r=r.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(r)+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,n){var r=this.image.getEl();r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),e.FE.DefineIcon("imageCaption",{NAME:"commenting",FA5NAME:"comment-alt"}),e.FE.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass("fr-active",this.image.hasCaption())}})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkNoOpener:!0,linkNoReferrer:!0,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var r=t.selection.ranges(0).commonAncestorContainer;try{r&&(r.contains&&r.contains(t.el)||!t.el.contains(r)||t.el==r)&&(r=null)}catch(e){r=null}if(r&&"A"===r.tagName)return r;var o=t.selection.element(),i=t.selection.endElement();"A"==o.tagName||t.node.isElement(o)||(o=e(o).parentsUntil(t.$el,"a:first").get(0)),"A"==i.tagName||t.node.isElement(i)||(i=e(i).parentsUntil(t.$el,"a:first").get(0));try{i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null)}catch(e){i=null}try{o&&(o.contains&&o.contains(t.el)||!t.el.contains(o)||t.el==o)&&(o=null)}catch(e){o=null}return i&&i==o&&"A"==i.tagName?(t.browser.msie||t.helpers.isMobile())&&(t.selection.info(o).atEnd||t.selection.info(o).atStart)?null:o:null}return"A"==t.el.tagName?t.el:n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function r(){var e=t.image?t.image.get():null,n=[];if(e)"A"==e.get(0).parentNode.tagName&&n.push(e.get(0).parentNode);else{var r,o,i,a;if(t.win.getSelection){var s=t.win.getSelection();if(s.getRangeAt&&s.rangeCount){a=t.doc.createRange();for(var l=0;l<s.rangeCount;++l)if(r=s.getRangeAt(l),o=r.commonAncestorContainer,o&&1!=o.nodeType&&(o=o.parentNode),o&&"a"==o.nodeName.toLowerCase())n.push(o);else{i=o.getElementsByTagName("a");for(var c=0;c<i.length;++c)a.selectNodeContents(i[c]),a.compareBoundaryPoints(r.END_TO_START,r)<1&&a.compareBoundaryPoints(r.START_TO_END,r)>-1&&n.push(i[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if(r=t.doc.selection.createRange(),o=r.parentElement(),"a"==o.nodeName.toLowerCase())n.push(o);else{i=o.getElementsByTagName("a"),a=t.doc.body.createTextRange();for(var d=0;d<i.length;++d)a.moveToElementText(i[d]),a.compareEndPoints("StartToEnd",r)>-1&&a.compareEndPoints("EndToStart",r)<1&&n.push(i[d])}}return n}function o(r){if(t.core.hasFocus()){if(a(),r&&"keyup"===r.type&&(r.altKey||r.which==e.FE.KEYCODE.ALT))return!0;setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var o=n(),a=t.image?t.image.get():null;if(o&&!a){if(t.image){var s=t.node.contents(o);if(1==s.length&&"IMG"==s[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(o).before(e.FE.MARKERS):e(o).after(e.FE.MARKERS),t.selection.restore(),!1}}r&&r.stopPropagation(),i(o)}}},t.helpers.isIOS()?100:0)}}function i(n){var r=t.popups.get("link.edit");r||(r=s());var o=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var i=o.offset().left+e(n).outerWidth()/2,a=o.offset().top+o.outerHeight();t.popups.show("link.edit",i,a,o.outerHeight())}function a(){t.popups.hide("link.edit")}function s(){var e="";t.opts.linkEditButtons.length>=1&&("A"==t.el.tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var r={buttons:e},o=t.popups.create("link.edit",r);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&i(n())}),o}function l(){}function c(){var r=t.popups.get("link.insert"),o=n();if(o){var i,a,s=e(o),l=r.find('input.fr-link-attr[type="text"]'),c=r.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<l.length;i++)a=e(l[i]),a.val(s.attr(a.attr("name")||""));for(c.prop("checked",!1),i=0;i<c.length;i++)a=e(c[i]),s.attr(a.attr("name"))==a.data("checked")&&a.prop("checked",!0);r.find('input.fr-link-attr[type="text"][name="text"]').val(s.text())}else r.find('input.fr-link-attr[type="text"]').val(""),r.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),r.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());r.find("input.fr-link-attr").trigger("change"),(t.image?t.image.get():null)?r.find('.fr-link-attr[name="text"]').parent().hide():r.find('.fr-link-attr[name="text"]').parent().show()}function d(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=u()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("link.insert",r,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")}function u(e){if(e)return t.popups.onRefresh("link.insert",c),t.popups.onHide("link.insert",l),!0;var r="";t.opts.linkInsertButtons.length>=1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var o="",i=0;o='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',o+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="'+t.language.translate("URL")+'" tabIndex="'+ ++i+'"></div>',t.opts.linkText&&(o+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++i+'"></div>');for(var a in t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(a)){var s=t.opts.linkAttributes[a];o+='<div class="fr-input-line"><input name="'+a+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(s)+'" tabIndex="'+ ++i+'"></div>'}t.opts.linkAlwaysBlank||(o+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++i+'"><span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg></span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>"),o+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++i+'" type="button">'+t.language.translate("Insert")+"</button></div></div>";var d={buttons:r,input_layer:o},u=t.popups.create("link.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){(t.image?t.image.get():null)&&t.popups.isVisible("link.insert")&&E(),n&&t.popups.isVisible("link.insert")&&b()}),u}function p(){var r=n(),o=t.image?t.image.get():null;return!1!==t.events.trigger("link.beforeRemove",[r])&&void(o&&r?(o.unwrap(),t.image.edit(o)):r&&(t.selection.save(),e(r).replaceWith(e(r).html()),t.selection.restore(),a()))}function f(){t.events.on("keyup",function(t){t.which!=e.FE.KEYCODE.ESC&&o(t)}),t.events.on("window.mouseup",o),t.events.$on(t.$el,"click","a",function(e){t.edit.isDisabled()&&e.preventDefault()}),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",o),u(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){return t.popups.isVisible("link.edit")?(t.events.disableBlur(),t.events.focus(),!1):void 0},!0)}function g(n){var r,o,i=t.opts.linkList[n],a=t.popups.get("link.insert"),s=a.find('input.fr-link-attr[type="text"]'),l=a.find('input.fr-link-attr[type="checkbox"]');for(o=0;o<s.length;o++)r=e(s[o]),i[r.attr("name")]?r.val(i[r.attr("name")]):"text"!=r.attr("name")&&r.val("");for(o=0;o<l.length;o++)r=e(l[o]),r.prop("checked",r.data("checked")==i[r.attr("name")]);t.accessibility.focusPopup(a)}function h(){var n,r,o=t.popups.get("link.insert"),i=o.find('input.fr-link-attr[type="text"]'),a=o.find('input.fr-link-attr[type="checkbox"]'),s=(i.filter('[name="href"]').val()||"").trim(),l=i.filter('[name="text"]').val(),c={};for(r=0;r<i.length;r++)n=e(i[r]),["href","text"].indexOf(n.attr("name"))<0&&(c[n.attr("name")]=n.val());for(r=0;r<a.length;r++)n=e(a[r]),n.is(":checked")?c[n.attr("name")]=n.data("checked"):c[n.attr("name")]=n.data("unchecked")||null;var d=t.helpers.scrollTop();v(s,l,c),e(t.o_win).scrollTop(d)}function m(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var r=e(n.pop());r.removeClass("fr-unprocessed");var o=t.node.deepestParent(r.get(0));if(o){var i=r.get(0),a="",s="";do{i=i.parentNode,t.node.isBlock(i)||(a+=t.node.closeTagString(i),s=t.node.openTagString(i)+s)}while(i!=o);var l=t.node.openTagString(r.get(0))+r.html()+t.node.closeTagString(r.get(0));r.replaceWith('<span id="fr-break"></span>');var c=o.outerHTML;c=c.replace(/<span id="fr-break"><\/span>/g,a+l+s),o.outerHTML=c}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.html.cleanEmptyTags(),t.selection.restore()}}function v(i,a,s){if(void 0===s&&(s={}),!1===t.events.trigger("link.beforeInsert",[i,a,s]))return!1;var l=t.image?t.image.get():null;l||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var c=i;t.opts.linkConvertEmailAddress&&t.helpers.isEmail(i)&&!/^mailto:.*/i.test(i)&&(i="mailto:"+i);var d=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===t.opts.linkAutoPrefix||new RegExp("^("+e.FE.LinkProtocols.join("|")+"):.","i").test(i)||/^data:image.*/i.test(i)||/^(https?:|ftps?:|file:|)\/\//i.test(i)||d.test(i)||["/","{","[","#","(","."].indexOf((i||"")[0])<0&&(i=t.opts.linkAutoPrefix+t.helpers.sanitizeURL(i)),i=t.helpers.sanitizeURL(i),t.opts.linkAlwaysBlank&&(s.target="_blank"),t.opts.linkAlwaysNoFollow&&(s.rel="nofollow"),"_blank"==s.target?(t.opts.linkNoOpener&&(s.rel?s.rel+=" noopener":s.rel="noopener"),t.opts.linkNoReferrer&&(s.rel?s.rel+=" noreferrer":s.rel="noreferrer")):null==s.target&&(s.rel?s.rel=s.rel.replace(/noopener/,"").replace(/noreferrer/,""):s.rel=null),a=a||"",i===t.opts.linkAutoPrefix){return t.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[c]),!1}var u,p=n();if(p){if(u=e(p),u.attr("href",i),a.length>0&&u.text()!=a&&!l){for(var f=u.get(0);1===f.childNodes.length&&f.childNodes[0].nodeType==Node.ELEMENT_NODE;)f=f.childNodes[0];e(f).text(a)}l||u.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),u.attr(s),l||t.selection.restore()}else{l?l.wrap('<a href="'+i+'"></a>'):(t.format.remove("a"),t.selection.isCollapsed()?(a=0===a.length?c:a,t.html.insert('<a href="'+i+'">'+e.FE.START_MARKER+a.replace(/&/g,"&amp;")+e.FE.END_MARKER+"</a>"),t.selection.restore()):a.length>0&&a!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+i+'">'+e.FE.START_MARKER+a.replace(/&/g,"&amp;")+e.FE.END_MARKER+"</a>"),t.selection.restore()):(m(),t.format.apply("a",{href:i})));for(var g=r(),h=0;h<g.length;h++)u=e(g[h]),u.attr(s),u.removeAttr("_moz_dirty");1==g.length&&t.$wp&&!l&&(e(g[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}if(l){var v=t.popups.get("link.insert");v&&v.find("input:focus").blur(),t.image.edit(l)}else o()}function b(){a();var r=n();if(r){var o=t.popups.get("link.insert");o||(o=u()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var i=(t.image?t.image.get():null)||e(r),s=i.offset().left+i.outerWidth()/2,l=i.offset().top+i.outerHeight();t.popups.show("link.insert",s,l,i.outerHeight())}}function y(){(t.image?t.image.get():null)?t.image.back():(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),n()&&t.$wp?(t.selection.restore(),a(),o()):"A"==t.el.tagName?(t.$el.focus(),o()):(t.popups.hide("link.insert"),t.toolbar.showInline()))}function E(){var e=t.image?t.image.getEl():null;if(e){var n=t.popups.get("link.insert");t.image.hasCaption()&&(e=e.find(".fr-img-wrap")),n||(n=u()),c(!0),t.popups.setContainer("link.insert",t.$sc);var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+e.outerHeight();t.popups.show("link.insert",r,o,e.outerHeight())}}function S(r,i,a){void 0===a&&(a=t.opts.linkMultipleStyles),void 0===i&&(i=t.opts.linkStyles);var s=n();if(!s)return!1;if(!a){var l=Object.keys(i);l.splice(l.indexOf(r),1),e(s).removeClass(l.join(" "))}e(s).toggleClass(r),o()}return{_init:f,remove:p,showInsertPopup:d,usePredefined:g,insertCallback:h,insert:v,update:b,get:n,allSelected:r,back:y,imageLink:E,applyStyle:S}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"insertLink",null,"K"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link",FA5NAME:"external-link-alt"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&(this.o_win.open(e.href,"_blank","noopener"),this.popups.hide("link.edit"))},plugin:"link"}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();(this.image?this.image.get():null)||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)},plugin:"link"}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))},plugin:"link"}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?(t=e.prev(),t.hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):(t=e.prev(),t.hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))},plugin:"link"}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var r=this.link.get();if(r){var o=e(r);n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=o.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1,paragraphDefaultSelection:"Paragraph Format"}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,r){var o=t.html.defaultTag();if(r&&r.toLowerCase()!=o)if(n.find("ul, ol").length>0){var i=e("<"+r+">");n.prepend(i);for(var a=t.node.contents(n.get(0))[0];a&&["UL","OL"].indexOf(a.tagName)<0;){var s=a.nextSibling;i.append(a),a=s}}else n.html("<"+r+">"+n.html()+"</"+r+">")}function r(n,r){var o=t.html.defaultTag();r&&r.toLowerCase()!=o||(r='div class="fr-temp-div"'),n.replaceWith(e("<"+r+">").html(n.html()))}function o(n,r){var o=t.html.defaultTag();r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),r.toLowerCase()==o?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+r+">").html(n.html()))}function i(n,r){r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+r+" "+t.node.attributes(n.get(0))+">").html(n.html()).removeAttr("data-empty"))}function a(a){"N"==a&&(a=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!t.opts.paragraphFormat.BLOCKQUOTE,!0,!0),t.selection.restore();var s=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<s.length;l++)if(s[l].tagName!=a&&!t.node.isList(s[l])){var c=e(s[l]);"LI"==s[l].tagName?n(c,a):"LI"==s[l].parentNode.tagName&&s[l]?r(c,a):["TD","TH"].indexOf(s[l].parentNode.tagName)>=0?o(c,a):i(c,a)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function s(e,n){var r=t.selection.blocks();if(r.length){var o=r[0],i="N",a=t.html.defaultTag();o.tagName.toLowerCase()!=a&&o!=t.el&&(i=o.tagName),n.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}else n.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function l(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var r=n[0],o="N",i=t.html.defaultTag();r.tagName.toLowerCase()!=i&&r!=t.el&&(o=r.tagName),["LI","TD","TH"].indexOf(o)>=0&&(o="N"),e.find("> span").text(t.language.translate(t.opts.paragraphFormat[o]))}else e.find("> span").text(t.language.translate(t.opts.paragraphFormat.N))}}return{apply:a,refreshOnShow:s,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:function(e){return e.language.translate(e.opts.paragraphDefaultSelection)},displaySelectionWidth:125,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var r=this.shortcuts.get("paragraphFormat."+n);r=r?'<span class="fr-shortcut">'+r+"</span>":"",e+='<li role="presentation"><'+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=a()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",r,o,e.outerHeight())}}function r(){var e=B();if(e){var n=t.popups.get("table.edit");if(n||(n=d()),n){t.popups.setContainer("table.edit",t.$sc);var r=V(e),o=(r.left+r.right)/2,i=r.bottom;t.popups.show("table.edit",o,i,r.bottom-r.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore())}}}function o(){var e=B();if(e){var n=t.popups.get("table.colors");n||(n=u()),t.popups.setContainer("table.colors",t.$sc);var r=V(e),o=(r.left+r.right)/2,i=r.bottom;h(),t.popups.show("table.colors",o,i,r.bottom-r.top)}}function i(){0===ye().length&&t.toolbar.enable()}function a(n){if(n)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var r="";t.opts.tableInsertButtons.length>0&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var o={buttons:r,rows_columns:l()},i=t.popups.create("table.insert",o);return t.events.$on(i,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(t){s(e(t.currentTarget))},!0),c(i),i}function s(e){var n=e.data("row"),r=e.data("col"),o=e.parent();o.siblings(".fr-table-size-info").html(n+" &times; "+r),o.find("> span").removeClass("hover fr-active-item");for(var i=1;i<=t.opts.tableInsertMaxSize;i++)for(var a=0;a<=t.opts.tableInsertMaxSize;a++){var s=o.find('> span[data-row="'+i+'"][data-col="'+a+'"]');n>=i&&r>=a?s.addClass("hover"):n+1>=i||2>=i&&!t.helpers.isMobile()?s.css("display","inline-block"):i>2&&!t.helpers.isMobile()&&s.css("display","none")}e.addClass("fr-active-item")}function l(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var r=1;r<=t.opts.tableInsertMaxSize;r++){var o="inline-block";n>2&&!t.helpers.isMobile()&&(o="none");var i="fr-table-cell ";1==n&&1==r&&(i+=" hover"),e+='<span class="fr-command '+i+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+n+'" data-col="'+r+'" data-param1="'+n+'" data-param2="'+r+'" style="display: '+o+';" role="button"><span></span><span class="fr-sr-only">'+n+" &times; "+r+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+="</div></div>"}function c(n){t.events.$on(n,"focus","[tabIndex]",function(t){s(e(t.currentTarget))}),t.events.on("popup.tab",function(n){var r=e(n.currentTarget);if(!t.popups.isVisible("table.insert")||!r.is("span, a"))return!0;var o,i=n.which;if(e.FE.KEYCODE.ARROW_UP==i||e.FE.KEYCODE.ARROW_DOWN==i||e.FE.KEYCODE.ARROW_LEFT==i||e.FE.KEYCODE.ARROW_RIGHT==i){if(r.is("span.fr-table-cell")){var a=r.parent().find("span.fr-table-cell"),l=a.index(r),c=t.opts.tableInsertMaxSize,d=l%c,u=Math.floor(l/c);e.FE.KEYCODE.ARROW_UP==i?u=Math.max(0,u-1):e.FE.KEYCODE.ARROW_DOWN==i?u=Math.min(t.opts.tableInsertMaxSize-1,u+1):e.FE.KEYCODE.ARROW_LEFT==i?d=Math.max(0,d-1):e.FE.KEYCODE.ARROW_RIGHT==i&&(d=Math.min(t.opts.tableInsertMaxSize-1,d+1));var p=u*c+d,f=e(a.get(p));s(f),t.events.disableBlur(),f.focus(),o=!1}}else e.FE.KEYCODE.ENTER==i&&(t.button.exec(r),o=!1);return!1===o&&(n.preventDefault(),n.stopPropagation()),o},!0)}function d(e){if(e)return t.popups.onHide("table.edit",i),!0;var n="";if(t.opts.tableEditButtons.length>0){n='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>";var o={buttons:n},a=t.popups.create("table.edit",o);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&r()}),a}return!1}function u(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n="";t.opts.colorsHEXInput&&(n='<div class="fr-table-colors-hex-layer fr-active fr-layer" id="fr-table-colors-hex-layer-'+t.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-table-colors-hex-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="tableCellBackgroundCustomColor" tabIndex="2" role="button">'+t.language.translate("OK")+"</button></div></div>");var r={buttons:e,colors:p(),custom_color:n},i=t.popups.create("table.colors",r);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&o()}),g(i),i}function p(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep==0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[n]?'<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[n]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("tableColorRemove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+="</div>"}function f(){var e=t.popups.get("table.colors"),n=e.find(".fr-table-colors-hex-layer input");n.length&&L(n.val())}function g(n){t.events.on("popup.tab",function(r){var o=e(r.currentTarget);if(!t.popups.isVisible("table.colors")||!o.is("span"))return!0;var i=r.which,a=!0;if(e.FE.KEYCODE.TAB==i){var s=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==i||e.FE.KEYCODE.ARROW_DOWN==i||e.FE.KEYCODE.ARROW_LEFT==i||e.FE.KEYCODE.ARROW_RIGHT==i){var l=o.parent().find("span.fr-command"),c=l.index(o),d=t.opts.colorsStep,u=Math.floor(l.length/d),p=c%d,f=Math.floor(c/d),g=f*d+p,h=u*d;e.FE.KEYCODE.ARROW_UP==i?g=((g-d)%h+h)%h:e.FE.KEYCODE.ARROW_DOWN==i?g=(g+d)%h:e.FE.KEYCODE.ARROW_LEFT==i?g=((g-1)%h+h)%h:e.FE.KEYCODE.ARROW_RIGHT==i&&(g=(g+1)%h);var m=e(l.get(g));t.events.disableBlur(),m.focus(),a=!1}else e.FE.KEYCODE.ENTER==i&&(t.button.exec(o),a=!1);return!1===a&&(r.preventDefault(),r.stopPropagation()),a},!0)}function h(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first"),r=t.helpers.RGBToHex(n.css("background-color")),o=e.find(".fr-table-colors-hex-layer input");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+r+'"]').addClass("fr-selected-color fr-active-item"),o.val(r).trigger("change")}function m(n,r){var o,i,a='<table style="width: 100%;" class="fr-inserted-table"><tbody>',s=100/r;for(o=0;n>o;o++){for(a+="<tr>",i=0;r>i;i++)a+='<td style="width: '+s.toFixed(4)+'%;">',0===o&&0===i&&(a+=e.FE.MARKERS),a+="<br></td>";a+="</tr>"}a+="</tbody></table>",t.html.insert(a),t.selection.restore();var l=t.$el.find(".fr-inserted-table");l.removeClass("fr-inserted-table"),t.events.trigger("table.inserted",[l.get(0)])}function v(){if(ye().length>0){var e=Ee();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function b(){var t=Ee();if(t.length>0&&0===t.find("th").length){var n,o="<thead><tr>",i=0;for(t.find("tr:first > td").each(function(){var t=e(this);i+=parseInt(t.attr("colspan"),10)||1}),n=0;i>n;n++)o+="<th><br></th>";o+="</tr></thead>",t.prepend(o),r()}}function y(){var e=Ee(),n=e.find("thead");if(n.length>0)if(0===e.find("tbody tr").length)v();else if(n.remove(),ye().length>0)r();else{t.popups.hide("table.edit");var o=e.find("tbody tr:first td:first").get(0);o&&(t.selection.setAtEnd(o),t.selection.restore())}}function E(n){var o=Ee();if(o.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==n)return;var i,a,s,l=B(),c=H(l);a="above"==n?c.min_i:c.max_i;var d="<tr>";for(i=0;i<l[a].length;i++)if("below"==n&&a<l.length-1&&l[a][i]==l[a+1][i]||"above"==n&&a>0&&l[a][i]==l[a-1][i]){if(0===i||i>0&&l[a][i]!=l[a][i-1]){var u=e(l[a][i]);u.attr("rowspan",parseInt(u.attr("rowspan"),10)+1)}}else d+="<td><br></td>";d+="</tr>",s=e(t.$el.find("th.fr-selected-cell").length>0&&"below"==n?o.find("tbody").not(o.find("table tbody")):o.find("tr").not(o.find("table tr")).get(a)),"below"==n?"TBODY"==s.prop("tagName")?s.prepend(d):s.after(d):"above"==n&&(s.before(d),t.popups.isVisible("table.edit")&&r())}}function S(){var n=Ee();if(n.length>0){var r,o,i,a=B(),s=H(a);if(0===s.min_i&&s.max_i==a.length-1)v();else{for(r=s.max_i;r>=s.min_i;r--){for(i=e(n.find("tr").not(n.find("table tr")).get(r)),o=0;o<a[r].length;o++)if(0===o||a[r][o]!=a[r][o-1]){var l=e(a[r][o]);if(parseInt(l.attr("rowspan"),10)>1){var c=parseInt(l.attr("rowspan"),10)-1;1==c?l.removeAttr("rowspan"):l.attr("rowspan",c)}if(r<a.length-1&&a[r][o]==a[r+1][o]&&(0===r||a[r][o]!=a[r-1][o])){for(var d=a[r][o],u=o;u>0&&a[r][u]==a[r][u-1];)u--;0===u?e(n.find("tr").not(n.find("table tr")).get(r+1)).prepend(d):e(a[r+1][u-1]).after(d)}}var p=i.parent();i.remove(),0===p.find("tr").length&&p.remove(),a=B(n)}I(0,a.length-1,0,a[0].length-1,n),s.min_i>0?t.selection.setAtEnd(a[s.min_i-1][0]):t.selection.setAtEnd(a[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function C(n){var o=Ee();if(o.length>0){var i,a=B(),s=H(a);i="before"==n?s.min_j:s.max_j;var l,c=100/a[0].length,d=100/(a[0].length+1);o.find("th, td").each(function(){l=e(this),l.data("old-width",l.outerWidth()/o.outerWidth()*100)}),o.find("tr").not(o.find("table tr")).each(function(t){for(var r,o=e(this),s=0,l=0;i>s-1;){if(!(r=o.find("> th, > td").get(l))){r=null;break}r==a[t][s]?(s+=parseInt(e(r).attr("colspan"),10)||1,l++):(s+=parseInt(e(a[t][s]).attr("colspan"),10)||1,"after"==n&&(r=0===l?-1:o.find("> th, > td").get(l-1)))}var u=e(r);if("after"==n&&s-1>i||"before"==n&&i>0&&a[t][i]==a[t][i-1]){if(0===t||t>0&&a[t][i]!=a[t-1][i]){var p=parseInt(u.attr("colspan"),10)+1;u.attr("colspan",p),u.css("width",(u.data("old-width")*d/c+d).toFixed(4)+"%"),u.removeData("old-width")}}else{var f;f=o.find("th").length>0?'<th style="width: '+d.toFixed(4)+'%;"><br></th>':'<td style="width: '+d.toFixed(4)+'%;"><br></td>',-1==r?o.prepend(f):null==r?o.append(f):"before"==n?u.before(f):"after"==n&&u.after(f)}}),o.find("th, td").each(function(){l=e(this),l.data("old-width")&&(l.css("width",(l.data("old-width")*d/c).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&r()}}function w(){var n=Ee();if(n.length>0){var r,o,i,a=B(),s=H(a);if(0===s.min_j&&s.max_j==a[0].length-1)v();else{var l=100/a[0].length,c=100/(a[0].length-s.max_j+s.min_j-1);for(n.find("th, td").each(function(){i=e(this),i.hasClass("fr-selected-cell")||i.data("old-width",i.outerWidth()/n.outerWidth()*100)}),o=s.max_j;o>=s.min_j;o--)for(r=0;r<a.length;r++)if(0===r||a[r][o]!=a[r-1][o])if(i=e(a[r][o]),(parseInt(i.attr("colspan"),10)||1)>1){var d=parseInt(i.attr("colspan"),10)-1;1==d?i.removeAttr("colspan"):i.attr("colspan",d),i.css("width",((i.data("old-width")-ue(o,a))*c/l).toFixed(4)+"%"),i.removeData("old-width")}else{var u=e(i.parent().get(0));i.remove(),0===u.find("> th, > td").length&&(0===u.prev().length||0===u.next().length||u.prev().find("> th[rowspan], > td[rowspan]").length<u.prev().find("> th, > td").length)&&u.remove()}I(0,a.length-1,0,a[0].length-1,n),s.min_j>0?t.selection.setAtEnd(a[s.min_i][s.min_j-1]):t.selection.setAtEnd(a[s.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each(function(){i=e(this),i.data("old-width")&&(i.css("width",(i.data("old-width")*c/l).toFixed(4)+"%"),i.removeData("old-width"))})}}}function T(e,t,n){var r,o,i,a,s,l=0,c=B(n);if((t=Math.min(t,c[0].length-1))>e)for(o=e;t>=o;o++)if(!(o>e&&c[0][o]==c[0][o-1])&&(a=Math.min(parseInt(c[0][o].getAttribute("colspan"),10)||1,t-e+1))>1&&c[0][o]==c[0][o+1])for(l=a-1,r=1;r<c.length;r++)if(c[r][o]!=c[r-1][o]){for(i=o;o+a>i;i++)if((s=parseInt(c[r][i].getAttribute("colspan"),10)||1)>1&&c[r][i]==c[r][i+1])l=Math.min(l,s-1),i+=l;else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&k(c,l,"colspan",0,c.length-1,e,t)}function x(e,t,n){var r,o,i,a,s,l=0,c=B(n);if((t=Math.min(t,c.length-1))>e)for(r=e;t>=r;r++)if(!(r>e&&c[r][0]==c[r-1][0])&&(a=Math.min(parseInt(c[r][0].getAttribute("rowspan"),10)||1,t-e+1))>1&&c[r][0]==c[r+1][0])for(l=a-1,o=1;o<c[0].length;o++)if(c[r][o]!=c[r][o-1]){for(i=r;r+a>i;i++)if((s=parseInt(c[i][o].getAttribute("rowspan"),10)||1)>1&&c[i][o]==c[i+1][o])l=Math.min(l,s-1),i+=l;else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&k(c,l,"rowspan",e,t,0,c[0].length-1)}function k(e,t,n,r,o,i,a){var s,l,c;for(s=r;o>=s;s++)for(l=i;a>=l;l++)s>r&&e[s][l]==e[s-1][l]||l>i&&e[s][l]==e[s][l-1]||(c=parseInt(e[s][l].getAttribute(n),10)||1)>1&&(c-t>1?e[s][l].setAttribute(n,c-t):e[s][l].removeAttribute(n))}function I(e,t,n,r,o){x(e,t,o),T(n,r,o)}function A(){if(ye().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){M();var n,o,i=B(),a=H(i),s=t.$el.find(".fr-selected-cell"),l=e(s[0]),c=l.parent(),d=c.find(".fr-selected-cell"),u=l.closest("table"),p=l.html(),f=0;for(n=0;n<d.length;n++)f+=e(d[n]).outerWidth();for(l.css("width",(f/u.outerWidth()*100).toFixed(4)+"%"),a.min_j<a.max_j&&l.attr("colspan",a.max_j-a.min_j+1),a.min_i<a.max_i&&l.attr("rowspan",a.max_i-a.min_i+1),n=1;n<s.length;n++)o=e(s[n]),"<br>"!=o.html()&&""!==o.html()&&(p+="<br>"+o.html()),o.remove();l.html(p),t.selection.setAtEnd(l.get(0)),t.selection.restore(),t.toolbar.enable(),x(a.min_i,a.max_i,u);var g=u.find("tr:empty");for(n=g.length-1;n>=0;n--)e(g[n]).remove();T(a.min_j,a.max_j,u),r()}}function O(){if(1==ye().length){var n=t.$el.find(".fr-selected-cell"),r=n.parent(),o=n.closest("table"),i=parseInt(n.attr("rowspan"),10),a=B(),s=R(n.get(0),a),l=n.clone().html("<br>");if(i>1){var c=Math.ceil(i/2);c>1?n.attr("rowspan",c):n.removeAttr("rowspan"),i-c>1?l.attr("rowspan",i-c):l.removeAttr("rowspan");for(var d=s.row+c,u=0===s.col?s.col:s.col-1;u>=0&&(a[d][u]==a[d][u-1]||d>0&&a[d][u]==a[d-1][u]);)u--;-1==u?e(o.find("tr").not(o.find("table tr")).get(d)).prepend(l):e(a[d][u]).after(l)}else{var p,f=e("<tr>").append(l);for(p=0;p<a[0].length;p++)if(0===p||a[s.row][p]!=a[s.row][p-1]){var g=e(a[s.row][p]);g.is(n)||g.attr("rowspan",(parseInt(g.attr("rowspan"),10)||1)+1)}r.after(f)}U(),t.popups.hide("table.edit")}}function N(){if(1==ye().length){var n=t.$el.find(".fr-selected-cell"),r=parseInt(n.attr("colspan"),10)||1,o=n.parent().outerWidth(),i=n.outerWidth(),a=n.clone().html("<br>"),s=B(),l=R(n.get(0),s);if(r>1){var c=Math.ceil(r/2);i=pe(l.col,l.col+c-1,s)/o*100;var d=pe(l.col+c,l.col+r-1,s)/o*100;c>1?n.attr("colspan",c):n.removeAttr("colspan"),r-c>1?a.attr("colspan",r-c):a.removeAttr("colspan"),n.css("width",i.toFixed(4)+"%"),a.css("width",d.toFixed(4)+"%")}else{var u;for(u=0;u<s.length;u++)if(0===u||s[u][l.col]!=s[u-1][l.col]){var p=e(s[u][l.col]);if(!p.is(n)){var f=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",f)}}i=i/o*100/2,n.css("width",i.toFixed(4)+"%"),a.css("width",i.toFixed(4)+"%")}n.after(a),U(),t.popups.hide("table.edit")}}function L(e){var n=t.$el.find(".fr-selected-cell");"REMOVE"!=e?n.css("background-color",t.helpers.HEXtoRGB(e)):n.css("background-color",""),r()}function _(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function F(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function D(e,t,n,r){if(t.length>0){if(!n){var o=Object.keys(r);o.splice(o.indexOf(e),1),t.removeClass(o.join(" "))}t.toggleClass(e)}}function B(t){t=t||null;var n=[];return null==t&&ye().length>0&&(t=Ee()),t&&t.find("tr").not(t.find("table tr")).each(function(t,r){var o=e(r),i=0;o.find("> th, > td").each(function(r,o){for(var a=e(o),s=parseInt(a.attr("colspan"),10)||1,l=parseInt(a.attr("rowspan"),10)||1,c=t;t+l>c;c++)for(var d=i;i+s>d;d++)n[c]||(n[c]=[]),n[c][d]?i++:n[c][d]=o;i+=s})}),n}function R(e,t){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)if(t[n][r]==e)return{row:n,col:r}}function P(e,t,n){for(var r=e+1,o=t+1;r<n.length;){if(n[r][t]!=n[e][t]){r--;break}r++}for(r==n.length&&r--;o<n[e].length;){if(n[e][o]!=n[e][t]){o--;break}o++}return o==n[e].length&&o--,{row:r,col:o}}function M(){t.el.querySelector(".fr-cell-fixed")&&t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")&&t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function U(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")}),M()}function j(){t.events.disableBlur(),t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur(),t.events.enableBlur()}function H(e){var n=t.$el.find(".fr-selected-cell");if(n.length>0){var r,o=e.length,i=0,a=e[0].length,s=0;for(r=0;r<n.length;r++){var l=R(n[r],e),c=P(l.row,l.col,e);o=Math.min(l.row,o),i=Math.max(c.row,i),a=Math.min(l.col,a),s=Math.max(c.col,s)}return{min_i:o,max_i:i,min_j:a,max_j:s}}return null}function $(t,n,r,o,i){var a,s,l,c,d=t,u=n,p=r,f=o;for(a=d;u>=a;a++)((parseInt(e(i[a][p]).attr("rowspan"),10)||1)>1||(parseInt(e(i[a][p]).attr("colspan"),10)||1)>1)&&(l=R(i[a][p],i),c=P(l.row,l.col,i),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),f=Math.max(c.col,f)),((parseInt(e(i[a][f]).attr("rowspan"),10)||1)>1||(parseInt(e(i[a][f]).attr("colspan"),10)||1)>1)&&(l=R(i[a][f],i),c=P(l.row,l.col,i),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),f=Math.max(c.col,f));for(s=p;f>=s;s++)((parseInt(e(i[d][s]).attr("rowspan"),10)||1)>1||(parseInt(e(i[d][s]).attr("colspan"),10)||1)>1)&&(l=R(i[d][s],i),c=P(l.row,l.col,i),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),f=Math.max(c.col,f)),((parseInt(e(i[u][s]).attr("rowspan"),10)||1)>1||(parseInt(e(i[u][s]).attr("colspan"),10)||1)>1)&&(l=R(i[u][s],i),c=P(l.row,l.col,i),d=Math.min(l.row,d),u=Math.max(c.row,u),p=Math.min(l.col,p),f=Math.max(c.col,f));return d==t&&u==n&&p==r&&f==o?{min_i:t,max_i:n,min_j:r,max_j:o}:$(d,u,p,f,i)}function V(t){var n=H(t),r=e(t[n.min_i][n.min_j]),o=e(t[n.min_i][n.max_j]),i=e(t[n.max_i][n.min_j]);return{left:r.offset().left,right:o.offset().left+o.outerWidth(),top:r.offset().top,bottom:i.offset().top+i.outerHeight()}}function K(n,r){if(e(n).is(r))U(),t.edit.on(),e(n).addClass("fr-selected-cell");else{j(),t.edit.off();var o=B(),i=R(n,o),a=R(r,o),s=$(Math.min(i.row,a.row),Math.max(i.row,a.row),Math.min(i.col,a.col),Math.max(i.col,a.col),o);U(),n.classList.add("fr-cell-fixed"),r.classList.add("fr-cell-handler");for(var l=s.min_i;l<=s.max_i;l++)for(var c=s.min_j;c<=s.max_j;c++)e(o[l][c]).addClass("fr-selected-cell")}}function q(n){var r=null,o=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?r=n.target:o.closest("td").length>0?r=o.closest("td").get(0):o.closest("th").length>0&&(r=o.closest("th").get(0)),0===t.$el.find(r).length?null:r}function W(){U(),t.popups.hide("table.edit")}function z(n){var r=q(n);if("false"==e(r).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(ye().length>0&&!r&&W(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)(3==n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&r&&W();else if(Ie=!0,r){ye().length>0&&!n.shiftKey&&W(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),ke=!0;var o=r.tagName.toLowerCase();n.shiftKey&&t.$el.find(o+".fr-selected-cell").length>0?e(t.$el.find(o+".fr-selected-cell").closest("table")).is(e(r).closest("table"))?K(Ae,r):j():((t.keys.ctrlKey(n)||n.shiftKey)&&(ye().length>1||0===e(r).find(t.selection.element()).length&&!e(r).is(t.selection.element()))&&j(),Ae=r,K(Ae,Ae))}}function G(n){if(ke||t.$tb.is(n.target)||t.$tb.is(e(n.target).closest(t.$tb.get(0)))||(ye().length>0&&t.toolbar.enable(),U()),!(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)){if(Ie=!1,ke){ke=!1;q(n)||1!=ye().length?ye().length>0&&(t.selection.isCollapsed()?r():U()):U()}if(Ne){Ne=!1,Te.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var o=parseFloat(Te.css("left"))+t.opts.tableResizerOffset+t.$wp.offset().left;t.opts.iframe&&(o-=t.$iframe.offset().left),Te.data("release-position",o),Te.removeData("max-left"),Te.removeData("max-right"),de(),ne()}}}function Y(n){if(!0===ke){if(e(n.currentTarget).closest("table").is(Ee())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void K(Ae,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void K(Ae,n.currentTarget)}j()}}function X(n,r){for(var o=n;o&&"TABLE"!=o.tagName&&o.parentNode!=t.el;)o=o.parentNode;if(o&&"TABLE"==o.tagName){var i=B(e(o));"up"==r?Q(R(n,i),o,i):"down"==r&&Z(R(n,i),o,i)}}function J(e,n,r,o){for(var i,a=n;a!=t.el&&"TD"!=a.tagName&&"TH"!=a.tagName&&("up"==o?i=a.previousElementSibling:"down"==o&&(i=a.nextElementSibling),!i);)a=a.parentNode;"TD"==a.tagName||"TH"==a.tagName?X(a,o):i&&("up"==o&&t.selection.setAtEnd(i),"down"==o&&t.selection.setAtStart(i))}function Q(e,n,r){e.row>0?t.selection.setAtEnd(r[e.row-1][e.col]):J(e,n,r,"up")}function Z(e,n,r){var o=parseInt(r[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<r.length-o?t.selection.setAtStart(r[e.row+o][e.col]):J(e,n,r,"down")}function ee(n){var r=n.which,o=t.selection.blocks();if(o.length&&(o=o[0],"TD"==o.tagName||"TH"==o.tagName)){for(var i=o;i&&"TABLE"!=i.tagName&&i.parentNode!=t.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName&&(e.FE.KEYCODE.ARROW_LEFT==r||e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_RIGHT==r||e.FE.KEYCODE.ARROW_DOWN==r)&&(ye().length>0&&W(),t.browser.webkit&&(e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_DOWN==r))){var a=t.selection.ranges(0).startContainer;if(a.nodeType==Node.TEXT_NODE&&(e.FE.KEYCODE.ARROW_UP==r&&a.previousSibling||e.FE.KEYCODE.ARROW_DOWN==r&&a.nextSibling))return;n.preventDefault(),n.stopPropagation();var s=B(e(i)),l=R(o,s);return e.FE.KEYCODE.ARROW_UP==r?Q(l,i,s):e.FE.KEYCODE.ARROW_DOWN==r&&Z(l,i,s),t.selection.restore(),!1}}}function te(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),Te=t.shared.$table_resizer,t.events.$on(Te,"mousedown",function(e){return!t.core.sameInstance(Te)||(ye().length>0&&W(),1==e.which?(t.selection.save(),Ne=!0,Te.addClass("fr-moving"),j(),t.edit.off(),Te.find("div").css("opacity",1),!1):void 0)}),t.events.$on(Te,"mousemove",function(e){return!t.core.sameInstance(Te)||void(Ne&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),fe(e)))}),t.events.on("shared.destroy",function(){Te.html("").removeData().remove(),Te=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Te.hide().appendTo(e("body:first"))},!0)}function ne(){Te&&(Te.find("div").css("opacity",0),Te.css("top",0),Te.css("left",0),Te.css("height",0),Te.find("div").css("height",0),Te.hide())}function re(){xe&&xe.removeClass("fr-visible").css("left","-9999px")}function oe(n,r){var o=e(r),i=o.closest("table"),a=i.parent();if(r&&"TD"!=r.tagName&&"TH"!=r.tagName&&(o.closest("td").length>0?r=o.closest("td"):o.closest("th").length>0&&(r=o.closest("th"))),!r||"TD"!=r.tagName&&"TH"!=r.tagName)Te&&o.get(0)!=Te.get(0)&&o.parent().get(0)!=Te.get(0)&&t.core.sameInstance(Te)&&ne();else{if(o=e(r),0===t.$el.find(o).length)return!1;var s=o.offset().left-1,l=s+o.outerWidth();if(Math.abs(n.pageX-s)<=t.opts.tableResizerOffset||Math.abs(l-n.pageX)<=t.opts.tableResizerOffset){var c,d,u,p,f,g=B(i),h=R(r,g),m=P(h.row,h.col,g),v=i.offset().top,b=i.outerHeight()-1;"rtl"!=t.opts.direction?n.pageX-s<=t.opts.tableResizerOffset?(u=s,h.col>0?(p=s-ue(h.col-1,g)+t.opts.tableResizingLimit,f=s+ue(h.col,g)-t.opts.tableResizingLimit,c=h.col-1,d=h.col):(c=null,d=0,p=i.offset().left-1-parseInt(i.css("margin-left"),10),f=i.offset().left-1+i.width()-g[0].length*t.opts.tableResizingLimit)):l-n.pageX<=t.opts.tableResizerOffset&&(u=l,m.col<g[m.row].length&&g[m.row][m.col+1]?(p=l-ue(m.col,g)+t.opts.tableResizingLimit,f=l+ue(m.col+1,g)-t.opts.tableResizingLimit,c=m.col,d=m.col+1):(c=m.col,d=null,p=i.offset().left-1+g[0].length*t.opts.tableResizingLimit,f=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):l-n.pageX<=t.opts.tableResizerOffset?(u=l,h.col>0?(p=l-ue(h.col,g)+t.opts.tableResizingLimit,f=l+ue(h.col-1,g)-t.opts.tableResizingLimit,c=h.col,d=h.col-1):(c=null,d=0,p=i.offset().left+g[0].length*t.opts.tableResizingLimit,f=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):n.pageX-s<=t.opts.tableResizerOffset&&(u=s,m.col<g[m.row].length&&g[m.row][m.col+1]?(p=s-ue(m.col+1,g)+t.opts.tableResizingLimit,f=s+ue(m.col,g)-t.opts.tableResizingLimit,c=m.col+1,d=m.col):(c=m.col,d=null,p=a.offset().left+parseFloat(a.css("padding-left")),f=i.offset().left-1+i.width()-g[0].length*t.opts.tableResizingLimit)),Te||te(),Te.data("table",i),Te.data("first",c),Te.data("second",d),Te.data("instance",t),t.$wp.append(Te);var y=u-t.win.pageXOffset-t.opts.tableResizerOffset-t.$wp.offset().left,E=v-t.$wp.offset().top+t.$wp.scrollTop();t.opts.iframe&&(y+=t.$iframe.offset().left,E+=t.$iframe.offset().top,p+=t.$iframe.offset().left,f+=t.$iframe.offset().left),Te.data("max-left",p),Te.data("max-right",f),Te.data("origin",u-t.win.pageXOffset),Te.css("top",E),Te.css("left",y),Te.css("height",b),Te.find("div").css("height",b),Te.css("padding-left",t.opts.tableResizerOffset),Te.css("padding-right",t.opts.tableResizerOffset),Te.show()}else t.core.sameInstance(Te)&&ne()}}function ie(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;xe||me(),t.$box.append(xe),xe.data("instance",t);var o=e(r),i=o.find("tr:first"),a=n.pageX,s=0,l=0;t.opts.iframe&&(s+=t.$iframe.offset().left-t.helpers.scrollLeft(),l+=t.$iframe.offset().top-t.helpers.scrollTop());var c;i.find("th, td").each(function(){var n=e(this);return n.offset().left<=a&&a<n.offset().left+n.outerWidth()/2?(c=parseInt(xe.find("a").css("width"),10),xe.css("top",l+n.offset().top-t.$box.offset().top-t.win.pageYOffset-c-5),xe.css("left",s+n.offset().left-t.$box.offset().left-t.win.pageXOffset-c/2),xe.data("selected-cell",n),xe.data("position","before"),xe.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=a&&a<n.offset().left+n.outerWidth()?(c=parseInt(xe.find("a").css("width"),10),xe.css("top",l+n.offset().top-t.$box.offset().top-t.win.pageYOffset-c-5),xe.css("left",s+n.offset().left-t.$box.offset().left+n.outerWidth()-t.win.pageXOffset-c/2),xe.data("selected-cell",n),xe.data("position","after"),xe.addClass("fr-visible"),!1):void 0})}function ae(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;xe||me(),t.$box.append(xe),xe.data("instance",t);var o=e(r),i=n.pageY,a=0,s=0;t.opts.iframe&&(a+=t.$iframe.offset().left-t.helpers.scrollLeft(),s+=t.$iframe.offset().top-t.helpers.scrollTop());var l;o.find("tr").each(function(){var n=e(this);return n.offset().top<=i&&i<n.offset().top+n.outerHeight()/2?(l=parseInt(xe.find("a").css("width"),10),xe.css("top",s+n.offset().top-t.$box.offset().top-t.win.pageYOffset-l/2),xe.css("left",a+n.offset().left-t.$box.offset().left-t.win.pageXOffset-l-5),xe.data("selected-cell",n.find("td:first")),xe.data("position","above"),xe.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=i&&i<n.offset().top+n.outerHeight()?(l=parseInt(xe.find("a").css("width"),10),xe.css("top",s+n.offset().top-t.$box.offset().top+n.outerHeight()-t.win.pageYOffset-l/2),xe.css("left",a+n.offset().left-t.$box.offset().left-t.win.pageXOffset-l-5),xe.data("selected-cell",n.find("td:first")),xe.data("position","below"),xe.addClass("fr-visible"),!1):void 0})}function se(n,r){if(0===ye().length){var o,i,a;if(r&&("HTML"==r.tagName||"BODY"==r.tagName||t.node.isElement(r)))for(o=1;o<=t.opts.tableInsertHelperOffset;o++){if(i=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+o),e(i).hasClass("fr-tooltip"))return!0;if(i&&("TH"==i.tagName||"TD"==i.tagName||"TABLE"==i.tagName)&&(e(i).parents(".fr-wrapper").length||t.opts.iframe))return ie(n,e(i).closest("table")),!0;if(a=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+o,n.pageY-t.win.pageYOffset),e(a).hasClass("fr-tooltip"))return!0;if(a&&("TH"==a.tagName||"TD"==a.tagName||"TABLE"==a.tagName)&&(e(a).parents(".fr-wrapper").length||t.opts.iframe))return ae(n,e(a).closest("table")),!0}t.core.sameInstance(xe)&&re()}}function le(e){Oe=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&oe(e,n),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||se(e,n)}function ce(){if(Ne){var e=Te.data("table"),n=e.offset().top-t.win.pageYOffset;t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),Te.css("top",n)}}function de(){var n=Te.data("origin"),r=Te.data("release-position");if(n!==r){var o=Te.data("first"),i=Te.data("second"),a=Te.data("table"),s=a.outerWidth();if(t.undo.canDo()||t.undo.saveStep(),null!==o&&null!==i){var l,c,d,u=B(a),p=[],f=[],g=[],h=[];for(l=0;l<u.length;l++)c=e(u[l][o]),d=e(u[l][i]),p[l]=c.outerWidth(),g[l]=d.outerWidth(),f[l]=p[l]/s*100,h[l]=g[l]/s*100;for(l=0;l<u.length;l++){c=e(u[l][o]),d=e(u[l][i]);var m=(f[l]*(p[l]+r-n)/p[l]).toFixed(4);c.css("width",m+"%"),d.css("width",(f[l]+h[l]-m).toFixed(4)+"%")}}else{var v,b=a.parent(),y=s/b.width()*100,E=(parseInt(a.css("margin-left"),10)||0)/b.width()*100,S=(parseInt(a.css("margin-right"),10)||0)/b.width()*100;"rtl"==t.opts.direction&&0===i||"rtl"!=t.opts.direction&&0!==i?(v=(s+r-n)/s*y,a.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(E).toFixed(4)+"%)")):("rtl"==t.opts.direction&&0!==i||"rtl"!=t.opts.direction&&0===i)&&(v=(s-r+n)/s*y,a.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(S).toFixed(4)+"%)")),a.css("width",Math.round(v).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep()}Te.removeData("origin"),Te.removeData("release-position"),Te.removeData("first"),Te.removeData("second"),Te.removeData("table")}function ue(t,n){var r,o=e(n[0][t]).outerWidth();for(r=1;r<n.length;r++)o=Math.min(o,e(n[r][t]).outerWidth());return o}function pe(e,t,n){var r,o=0;for(r=e;t>=r;r++)o+=ue(r,n);return o}function fe(e){if(ye().length>1&&Ie&&j(),!1===Ie&&!1===ke&&!1===Ne)Oe&&clearTimeout(Oe),(!t.edit.isDisabled()||t.popups.isVisible("table.edit"))&&(Oe=setTimeout(le,30,e));else if(Ne){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var r=Te.data("max-left"),o=Te.data("max-right");n>=r&&o>=n?Te.css("left",n-t.opts.tableResizerOffset-t.$wp.offset().left):r>n&&parseFloat(Te.css("left"),10)>r-t.opts.tableResizerOffset?Te.css("left",r-t.opts.tableResizerOffset-t.$wp.offset().left):n>o&&parseFloat(Te.css("left"),10)<o-t.opts.tableResizerOffset&&Te.css("left",o-t.opts.tableResizerOffset-t.$wp.offset().left)}else Ie&&re()}function ge(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function he(n){if(n.which==e.FE.KEYCODE.TAB){var r;if(ye().length>0)r=t.$el.find(".fr-selected-cell:last");else{var o=t.selection.element();"TD"==o.tagName||"TH"==o.tagName?r=e(o):o!=t.el&&(e(o).parentsUntil(t.$el,"td").length>0?r=e(o).parents("td:first"):e(o).parentsUntil(t.$el,"th").length>0&&(r=e(o).parents("th:first")))}if(r)return n.preventDefault(),!!(e(t.selection.element()).parents("ol, ul").length>0&&(e(t.selection.element()).parents("li").prev().length>0||e(t.selection.element()).is("li")&&e(t.selection.element()).prev().length>0))||(W(),n.shiftKey?r.prev().length>0?ge(r.prev()):r.closest("tr").length>0&&r.closest("tr").prev().length>0?ge(r.closest("tr").prev().find("td:last")):r.closest("tbody").length>0&&r.closest("table").find("thead tr").length>0&&ge(r.closest("table").find("thead tr th:last")):r.next().length>0?ge(r.next()):r.closest("tr").length>0&&r.closest("tr").next().length>0?ge(r.closest("tr").next().find("td:first")):r.closest("thead").length>0&&r.closest("table").find("tbody tr").length>0?ge(r.closest("table").find("tbody tr td:first")):(r.addClass("fr-selected-cell"),E("below"),U(),ge(r.closest("tr").next().find("td:first"))),t.selection.restore(),!1)}}function me(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=xe.data("selected-cell"),n=xe.data("position"),r=xe.data("instance")||t;"before"==n?(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"after"==n?(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"above"==n?(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell"),t.undo.saveStep()):"below"==n&&(t.undo.saveStep(),e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell"),t.undo.saveStep()),re()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){re()},!0),t.events.$on(t.$wp,"scroll",function(){re()},!0)),xe=t.shared.$ti_helper,t.events.on("destroy",function(){xe=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function ve(){Ae=null,clearTimeout(Oe)}function be(){ye().length>0?r():(t.popups.hide("table.insert"),t.toolbar.showInline())}function ye(){return t.el.querySelectorAll(".fr-selected-cell")}function Ee(){var n=ye();if(n.length){for(var r=n[0];r&&"TABLE"!=r.tagName&&r.parentNode!=t.el;)r=r.parentNode;return e(r&&"TABLE"==r.tagName?r:[])}return e([])}function Se(n){if(n.altKey&&n.which==e.FE.KEYCODE.SPACE){var o,i=t.selection.element();if("TD"==i.tagName||"TH"==i.tagName?o=i:e(i).closest("td").length>0?o=e(i).closest("td").get(0):e(i).closest("th").length>0&&(o=e(i).closest("th").get(0)),o)return n.preventDefault(),K(o,o),r(),!1}}function Ce(n){var r=ye();if(r.length>0){var o,i,a=B(),s=n.which;1==r.length?(o=r[0],i=o):(o=t.el.querySelector(".fr-cell-fixed"),i=t.el.querySelector(".fr-cell-handler"));var l=R(i,a);if(e.FE.KEYCODE.ARROW_RIGHT==s){if(l.col<a[0].length-1)return K(o,a[l.row][l.col+1]),!1}else if(e.FE.KEYCODE.ARROW_DOWN==s){if(l.row<a.length-1)return K(o,a[l.row+1][l.col]),!1}else if(e.FE.KEYCODE.ARROW_LEFT==s){if(l.col>0)return K(o,a[l.row][l.col-1]),!1}else if(e.FE.KEYCODE.ARROW_UP==s&&l.row>0)return K(o,a[l.row-1][l.col]),!1}}function we(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){Ie=!1,ke=!1,Ne=!1,t.events.$on(t.$el,"mousedown",z),t.popups.onShow("image.edit",function(){U(),Ie=!1,ke=!1}),t.popups.onShow("link.edit",function(){U(),Ie=!1,ke=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&U()}),t.events.$on(t.$el,"mouseenter","th, td",Y),t.events.$on(t.$win,"mouseup",G),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",G),t.events.$on(t.$win,"mousemove",fe),t.events.$on(e(t.o_win),"scroll",ce),t.events.on("contentChanged",function(){ye().length>0&&(r(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),ye().length>0&&r()}))}),t.events.$on(e(t.o_win),"resize",function(){U()}),t.events.on("toolbar.esc",function(){return ye().length>0?(t.events.disableBlur(),t.events.focus(),!1):void 0},!0),t.events.$on(e(t.o_win),"keydown",function(){Ie&&ke&&(Ie=!1,ke=!1,t.$el.removeClass("fr-no-selection"),t.edit.on(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore(),U())}),t.events.$on(t.$el,"keydown",function(e){e.shiftKey?!1===Ce(e)&&setTimeout(function(){r()},0):ee(e)}),t.events.on("keydown",function(n){if(!1===he(n))return!1;var r=ye();if(r.length>0){if(r.length>0&&t.keys.ctrlKey(n)&&n.which==e.FE.KEYCODE.A)return U(),t.popups.isVisible("table.edit")&&t.popups.hide("table.edit"),r=[],!0;if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return U(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),r=[],!1;if(r.length>1&&(n.which==e.FE.KEYCODE.BACKSPACE||n.which==e.FE.KEYCODE.DELETE)){t.undo.saveStep();for(var o=0;o<r.length;o++)e(r[o]).html("<br>"),o==r.length-1&&e(r[o]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),r=[],!1}if(r.length>1&&n.which!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n))return n.preventDefault(),r=[],!1}else if(r=[],!1===Se(n))return!1},!0);var n=[];t.events.on("html.beforeGet",function(){n=ye();for(var e=0;e<n.length;e++)n[e].className=(n[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].className=(n[e].className?n[e].className.trim()+" ":"")+"fr-selected-cell";n=[]}),a(!0),d(!0)}t.events.on("destroy",ve)}var Te,xe,ke,Ie,Ae,Oe,Ne;return{_init:we,insert:m,remove:v,insertRow:E,deleteRow:S,insertColumn:C,deleteColumn:w,mergeCells:A,splitCellVertically:N,splitCellHorizontally:O,addHeader:b,removeHeader:y,setBackground:L,showInsertPopup:n,showEditPopup:r,showColorsPopup:o,back:be,verticalAlign:_,horizontalAlign:F,applyStyle:D,selectedTable:Ee,selectedCells:ye,customColor:f}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header",FA5NAME:"heading"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableRows.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableColumns.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o",FA5NAME:"square"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCells.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell").closest("table");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v",FA5NAME:"arrows-alt-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+r.toLowerCase()+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(r)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell:first");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.RegisterCommand("tableCellBackgroundCustomColor",{title:"OK",undo:!0,callback:function(){this.table.customColor()}}),e.FE.DefineIcon("tableColorRemove",{NAME:"eraser"})})},function(e,t,n){"use strict";var r,o,i;"function"==typeof Symbol&&Symbol.iterator;/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(a){o=[n(28)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function n(){var e=t.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var n=e.find(".fr-video-embed-layer textarea");n.val("").trigger("change"),n=e.find(".fr-video-upload-layer input"),n.val("").trigger("change")}function r(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),n=t.popups.get("video.insert");if(n||(n=i()),g(),!n.hasClass("fr-active"))if(t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",r,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("video.insert")}function o(){var e=t.popups.get("video.edit");if(e||(e=q()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var n=ve.find("iframe, embed, video"),r=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("video.edit",r,o,n.outerHeight())}}function i(e){if(e)return t.popups.onRefresh("video.insert",n),t.popups.onHide("image.insert",oe),!0;var r="";t.opts.videoUpload||t.opts.videoInsertButtons.splice(t.opts.videoInsertButtons.indexOf("videoUpload"),1),t.opts.videoInsertButtons.length>1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var o,i="",a=t.opts.videoInsertButtons.indexOf("videoUpload"),s=t.opts.videoInsertButtons.indexOf("videoByURL"),l=t.opts.videoInsertButtons.indexOf("videoEmbed");s>=0&&(o=" fr-active",(s>a&&a>=0||s>l&&l>=0)&&(o=""),i='<div class="fr-video-by-url-layer fr-layer'+o+'" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var c="";l>=0&&(o=" fr-active",(l>a&&a>=0||l>s&&s>=0)&&(o=""),c='<div class="fr-video-embed-layer fr-layer'+o+'" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d="";a>=0&&(o=" fr-active",(a>l&&l>=0||a>s&&s>=0)&&(o=""),d='<div class="fr-video-upload-layer fr-layer'+o+'" id="fr-video-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop video")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+t.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+t.id+'" role="button"></div></div>');var u={buttons:r,by_url_layer:i,embed_layer:c,upload_layer:d,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},p=t.popups.create("video.insert",u);return $(p),p}function a(e){var n,r,o=t.popups.get("video.insert");if(!ve&&!t.opts.toolbarInline){var i=t.$tb.find('.fr-command[data-cmd="insertVideo"]');n=i.offset().left+i.outerWidth()/2,r=i.offset().top+(t.opts.toolbarBottom?10:i.outerHeight()-10)}t.opts.toolbarInline&&(r=o.offset().top-t.helpers.getPX(o.css("margin-top")),o.hasClass("fr-above")&&(r+=o.outerHeight())),o.find(".fr-layer").removeClass("fr-active"),o.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",n,r,0),t.accessibility.focusPopup(o)}function s(e){t.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function l(e){t.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function c(e){t.popups.get("video.insert").find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function d(e){t.events.focus(!0),t.selection.restore();var n=!1;ve&&(re(),n=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var r=t.$el.find(".fr-jiv");r.removeClass("fr-jiv"),ie(r,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),r.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(n?"video.replaced":"video.inserted",[r])}function u(){var n=e(this);t.popups.hide("video.insert"),n.removeClass("fr-uploading"),n.parent().next().is("br")&&n.parent().next().remove(),y(n.parent()),t.events.trigger("video.loaded",[n.parent()])}function p(e,n,r,o,i){t.edit.off(),h("Loading video"),n&&(e=t.helpers.sanitizeURL(e));f("Loading video"),function(){var n,a;if(o){t.undo.canDo()||o.find("video").hasClass("fr-uploading")||t.undo.saveStep();var s=o.find("video").data("fr-old-src"),l=o.data("fr-replaced");o.data("fr-replaced",!1),t.$wp?(n=o.clone(),n.find("video").removeData("fr-old-src").removeClass("fr-uploading"),n.find("video").off("canplay"),s&&o.find("video").attr("src",s),o.replaceWith(n)):n=o;for(var c=n.find("video").get(0).attributes,d=0;d<c.length;d++){var p=c[d];0===p.nodeName.indexOf("data-")&&n.find("video").removeAttr(p.nodeName)}if(void 0!==r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&n.find("video").attr("data-"+a,r[a]);n.find("video").on("canplay",u),n.find("video").attr("src",e),t.edit.on(),F(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(l?"video.replaced":"video.inserted",[n,i])}else n=k(e,r,u),F(),t.undo.saveStep(),t.events.trigger("video.inserted",[n,i])}()}function f(e){var n=t.popups.get("video.insert");if(n||(n=i()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),ve){var r=ve.find("video");t.popups.setContainer("video.insert",t.$sc);var o=r.offset().left+r.width()/2,a=r.offset().top+r.height();t.popups.show("video.insert",o,a,r.outerHeight())}void 0===e&&h(t.language.translate("Uploading"),0)}function g(e){var n=t.popups.get("video.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&ve){var r=ve;R(!0),t.selection.setAfter(r.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function h(e,n){var r=t.popups.get("video.insert");if(r){var o=r.find(".fr-video-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function m(e){f();var n=t.popups.get("video.insert"),r=n.find(".fr-video-progress-bar-layer");r.addClass("fr-error");var o=r.find("h3");o.text(e),t.events.disableBlur(),o.focus()}function v(n){if(void 0===n){n=(t.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"").trim()}var r=null;if(/^http/.test(n)||(n="https://"+n),t.helpers.isURL(n))for(var o=0;o<e.FE.VIDEO_PROVIDERS.length;o++){var i=e.FE.VIDEO_PROVIDERS[o];if(i.test_regex.test(n)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(i.provider)){r=n.replace(i.url_regex,i.url_text),r=i.html.replace(/\{url\}/,r);break}}r?d(r):t.events.trigger("video.linkError",[n])}function b(n){if(void 0===n){n=t.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""}0!==n.length&&e.FE.VIDEO_EMBED_REGEX.test(n)?d(n):t.events.trigger("video.codeError",[n])}function y(e){B.call(e.get(0))}function E(e){try{if(!1===t.events.trigger("video.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(K(be,e),!1)}catch(t){return K(Ee,e),!1}}function S(n){try{var r=e(n).find("Location").text(),o=e(n).find("Key").text();return!1===t.events.trigger("video.uploadedToS3",[r,o,n],!0)?(t.edit.on(),!1):r}catch(e){return K(Ee,n),!1}}function C(e){h("Loading video");var n=this.status,r=this.response,o=this.responseXML,i=this.responseText;try{if(t.opts.videoUploadToS3)if(201==n){var a=S(o);a&&p(a,!1,[],e,r||o)}else K(Ee,r||o);else if(n>=200&&300>n){var s=E(i);s&&p(s.link,!1,s,e,r||i)}else K(ye,r||i)}catch(e){K(Ee,r||i)}}function w(){K(Ee,this.response||this.responseText||this.responseXML)}function T(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;h(t.language.translate("Uploading"),n)}}function x(){t.edit.on(),g(!0)}function k(n,r,o){var i,a="";if(r&&void 0!==r)for(i in r)r.hasOwnProperty(i)&&"link"!=i&&(a+=" data-"+i+'="'+r[i]+'"');var s=t.opts.videoDefaultWidth;s&&"auto"!=s&&(s+="px");var l=e('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'"><video src="'+n+'" '+a+(s?' style="width: '+s+';" ':"")+" controls>"+t.language.translate("Your browser does not support HTML5 video.")+"</video></span>");l.toggleClass("fr-draggable",t.opts.videoMove),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert(),t.html.wrap();var c=t.$el.find(".fr-marker");return t.node.isLastSibling(c)&&c.parent().hasClass("fr-deletable")&&c.insertAfter(c.parent()),c.replaceWith(l),t.selection.clear(),l.find("video").get(0).readyState>l.find("video").get(0).HAVE_FUTURE_DATA||t.helpers.isIOS()?o.call(l.find("video").get(0)):l.find("video").on("canplaythrough load",o),l}function I(n){if(!t.core.sameInstance(me))return!0;n.preventDefault(),n.stopPropagation();var r=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null),o=n.pageY||(n.originalEvent.touches?n.originalEvent.touches[0].pageY:null);if(!r||!o)return!1;if("mousedown"==n.type){var i=t.$oel.get(0),a=i.ownerDocument,s=a.defaultView||a.parentWindow,l=!1;try{l=s.location!=s.parent.location&&!(s.$&&s.$.FE)}catch(e){}l&&s.frameElement&&(r+=t.helpers.getPX(e(s.frameElement).offset().left)+s.frameElement.clientLeft,o=n.clientY+t.helpers.getPX(e(s.frameElement).offset().top)+s.frameElement.clientTop)}t.undo.canDo()||t.undo.saveStep(),he=e(this),he.data("start-x",r),he.data("start-y",o),ge.show(),t.popups.hideAll(),M()}function A(e){if(!t.core.sameInstance(me))return!0;if(he){e.preventDefault();var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),r=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!n||!r)return!1;var o=he.data("start-x"),i=he.data("start-y");he.data("start-x",n),he.data("start-y",r);var a=n-o,s=r-i,l=ve.find("iframe, embed, video"),c=l.width(),d=l.height();(he.hasClass("fr-hnw")||he.hasClass("fr-hsw"))&&(a=0-a),(he.hasClass("fr-hnw")||he.hasClass("fr-hne"))&&(s=0-s),l.css("width",c+a),l.css("height",d+s),l.removeAttr("width"),l.removeAttr("height"),D()}}function O(e){return!t.core.sameInstance(me)||void(he&&ve&&(e&&e.stopPropagation(),he=null,ge.hide(),D(),o(),t.undo.saveStep()))}function N(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function L(e,t,n,r){return e.pageX=t,e.pageY=t,I.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),e.pageY=e.pageY+n*Math.floor(Math.pow(1.1,r)),A.call(this,e),O.call(this,e),++r}function _(){var n;if(t.shared.$video_resizer?(me=t.shared.$video_resizer,ge=t.shared.$vid_overlay,t.events.on("destroy",function(){me.removeClass("fr-active").appendTo(e("body:first"))},!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),me=t.shared.$video_resizer,t.events.$on(me,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(me.append(N("nw")+N("ne")+N("sw")+N("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),ge=t.shared.$vid_overlay,n=me.get(0).ownerDocument,e(n).find("body:first").append(ge))),t.events.on("shared.destroy",function(){me.html("").removeData().remove(),me=null,t.opts.videoResize&&(ge.remove(),ge=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",function(){R(!0)}),t.opts.videoResize){n=me.get(0).ownerDocument,t.events.$on(me,t._mousedown,".fr-handler",I),t.events.$on(e(n),t._mousemove,A),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,O),t.events.$on(ge,"mouseleave",O);var r=1,o=null,i=0;t.events.on("keydown",function(n){if(ve){var a=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,s=n.which;(s!==o||n.timeStamp-i>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?r=L.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey&&(r=L.call(this,n,2,-1,r)),o=s,i=n.timeStamp}}),t.events.on("keyup",function(){r=1})}}function F(){var n,r=Array.prototype.slice.call(t.el.querySelectorAll("video, .fr-video > *")),o=[];for(n=0;n<r.length;n++)o.push(r[n].getAttribute("src")),e(r[n]).toggleClass("fr-draggable",t.opts.videoMove),""===r[n].getAttribute("class")&&r[n].removeAttribute("class"),""===r[n].getAttribute("style")&&r[n].removeAttribute("style");if(Te)for(n=0;n<Te.length;n++)o.indexOf(Te[n].getAttribute("src"))<0&&t.events.trigger("video.removed",[e(Te[n])]);Te=r}function D(){me||_(),(t.$wp||t.$sc).append(me),me.data("instance",t);var e=ve.find("iframe, embed, video");me.css("top",(t.opts.iframe?e.offset().top-1:e.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?e.offset().left-1:e.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",e.get(0).getBoundingClientRect().width).css("height",e.get(0).getBoundingClientRect().height).addClass("fr-active")}function B(n){if(n&&"touchend"==n.type&&xe)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=t&&e.FE.INSTANCES[r].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.$el.find(".fr-video.fr-active").removeClass("fr-active"),ve=e(this),ve.addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),de(),D(),o(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function R(e){ve&&(U()||!0===e)&&(me.removeClass("fr-active"),t.toolbar.enable(),ve.removeClass("fr-active"),ve=null,M())}function P(){t.shared.vid_exit_flag=!0}function M(){t.shared.vid_exit_flag=!1}function U(){return t.shared.vid_exit_flag}function j(n){var r=n.originalEvent.dataTransfer;if(r&&r.files&&r.files.length){var o=r.files[0];if(o&&o.type&&-1!==o.type.indexOf("video")){if(!t.opts.videoUpload)return n.preventDefault(),n.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var a=t.popups.get("video.insert");return a||(a=i()),t.popups.setContainer("video.insert",t.$sc),t.popups.show("video.insert",n.originalEvent.pageX,n.originalEvent.pageY),f(),t.opts.videoAllowedTypes.indexOf(o.type.replace(/video\//g,""))>=0?H(r.files):K(Ce),n.preventDefault(),n.stopPropagation(),!1}}}function H(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("video.beforeUpload",[e]))return!1;var n=e[0];if(n.size>t.opts.videoMaxSize)return K(Se),!1;if(t.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))<0)return K(Ce),!1;var r;if(t.drag_support.formdata&&(r=t.drag_support.formdata?new FormData:null),r){var o;if(!1!==t.opts.videoUploadToS3){r.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",n.type);for(o in t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(o)&&r.append(o,t.opts.videoUploadToS3.params[o])}for(o in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(o)&&r.append(o,t.opts.videoUploadParams[o]);r.append(t.opts.videoUploadParam,n);var i=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(i=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://"+t.opts.videoUploadToS3.region+".amazonaws.com/"+t.opts.videoUploadToS3.bucket);var a=t.core.getXHR(i,t.opts.videoUploadMethod);a.onload=function(){C.call(a,ve)},a.onerror=w,a.upload.onprogress=T,a.onabort=x,f(),t.events.disableBlur(),t.edit.off(),t.events.enableBlur();var s=t.popups.get("video.insert");s&&s.off("abortUpload").on("abortUpload",function(){4!=a.readyState&&a.abort()}),a.send(r)}}}function $(n){t.events.$on(n,"dragover dragenter",".fr-video-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(n,"dragleave dragend",".fr-video-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(n,"drop",".fr-video-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var o=r.originalEvent.dataTransfer;if(o&&o.files){var i=n.data("instance")||t;i.events.disableBlur(),i.video.upload(o.files),i.events.enableBlur()}},!0),t.helpers.isIOS()&&t.events.$on(n,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){e(this).trigger("click")},!0),t.events.$on(n,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.video.upload(this.files)}e(this).val("")},!0)}function V(){t.events.on("drop",j,!0),t.events.on("mousedown window.mousedown",P),t.events.on("window.touchmove",M),t.events.on("mouseup window.mouseup",R),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&R()}),t.events.on("video.hideResizer commands.undo commands.redo element.dropped",function(){R(!0)})}function K(e,n){t.edit.on(),ve&&ve.find("video").addClass("fr-error"),m(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:we[e]},n])}function q(){var e="";if(t.opts.videoEditButtons.length>0){e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons),e+="</div>";var n={buttons:e},r=t.popups.create("video.edit",n);return t.events.$on(t.$wp,"scroll.video-edit",function(){ve&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),y(ve))}),r}return!1}function W(){if(ve){var e=t.popups.get("video.size"),n=ve.find("iframe, embed, video");e.find('input[name="width"]').val(n.get(0).style.width||n.attr("width")).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height||n.attr("height")).trigger("change")}}function z(){var e=t.popups.get("video.size");e||(e=G()),g(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var n=ve.find("iframe, embed, video"),r=n.offset().left+n.width()/2,o=n.offset().top+n.height();t.popups.show("video.size",r,o,n.height())}function G(e){if(e)return t.popups.onRefresh("video.size",W),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>";var r="";r='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,size_layer:r},i=t.popups.create("video.size",o);return t.events.$on(t.$wp,"scroll",function(){ve&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),y(ve))}),i}function Y(e){if(void 0===e&&(e=ve),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function X(e){ve.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?ve.addClass("fr-fvl"):"right"==e&&ve.addClass("fr-fvr"):ie(ve,Z(),e),de(),D(),o(),t.selection.clear()}function J(e){return!!ve&&void e.find("> *:first").replaceWith(t.icon.create("video-align-"+Y()))}function Q(e,t){ve&&t.find('.fr-command[data-param1="'+Y()+'"]').addClass("fr-active").attr("aria-selected",!0)}function Z(e){void 0===e&&(e=ve);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ee(e){ve.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?ve.addClass("fr-dvi"):"block"==e&&ve.addClass("fr-dvb"):ie(ve,e,Y()),de(),D(),o(),t.selection.clear()}function te(e,t){ve&&t.find('.fr-command[data-param1="'+Z()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ne(){var e=t.popups.get("video.insert");e||(e=i()),t.popups.isVisible("video.insert")||(g(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var n=ve.offset().left+ve.width()/2,r=ve.offset().top+ve.height();t.popups.show("video.insert",n,r,ve.outerHeight())}function re(){if(ve&&!1!==t.events.trigger("video.beforeRemove",[ve])){var e=ve;t.popups.hideAll(),R(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function oe(){g()}function ie(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+r[0]+" fr-dv"+n[0])):"inline"==n?(e.css({display:"inline-block"}),"center"==r?e.css({float:"none"}):"left"==r?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==r?e.css({textAlign:"left"}):"right"==r?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function ae(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fv"+Y(e)[0]),e.addClass("fr-dv"+Z(e)[0]))}function se(e){ie(e,e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":Y(e)),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function le(){t.$el.find("video").filter(function(){return 0===e(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var n=e(this).attr("src"),r=0;r<e.FE.VIDEO_PROVIDERS.length;r++){var o=e.FE.VIDEO_PROVIDERS[r];if(o.test_regex.test(n)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(o.provider))return!0}return!1}).map(function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var n=t.$el.find("span.fr-video, video"),r=0;r<n.length;r++){var o=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?(ae(o),t.opts.videoTextNear||o.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||se(o)}n.toggleClass("fr-draggable",t.opts.videoMove)}function ce(){V(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){xe=!1}),t.events.$on(t.$el,"touchmove",function(){xe=!0})),t.events.on("html.set",le),le(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),t.events.$on(t.$el,"click touchend","span.fr-video",function(t){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")||void B.call(this,t)}),t.events.on("keydown",function(n){var r=n.which;return!ve||r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.DELETE?ve&&r==e.FE.KEYCODE.ESC?(R(!0),n.preventDefault(),!1):ve&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),re(),t.undo.saveStep(),!1)},!0),t.events.on("toolbar.esc",function(){return ve?(t.events.disableBlur(),t.events.focus(),!1):void 0},!0),t.events.on("toolbar.focusEditor",function(){return!ve&&void 0},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),t.$wp&&(F(),t.events.on("contentChanged",F)),i(!0),G(!0)}function de(){if(ve){t.selection.clear();var e=t.doc.createRange();e.selectNode(ve.get(0));t.selection.get().addRange(e)}}function ue(){ve?(t.events.disableBlur(),ve.trigger("click")):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())}function pe(e,n){if(ve){var r=t.popups.get("video.size"),o=ve.find("iframe, embed, video");o.css("width",e||r.find('input[name="width"]').val()),o.css("height",n||r.find('input[name="height"]').val()),o.get(0).style.width&&o.removeAttr("width"),o.get(0).style.height&&o.removeAttr("height"),r.find("input:focus").blur(),setTimeout(function(){ve.trigger("click")},t.helpers.isAndroid()?50:0)}}function fe(){return ve}var ge,he,me,ve,be=2,ye=3,Ee=4,Se=5,Ce=6,we={};we[1]="Video cannot be loaded from the passed link.",we[be]="No link in upload response.",we[ye]="Error during file upload.",we[Ee]="Parsing response failed.",we[Se]="File is too large.",we[Ce]="Video file type is invalid.",we[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Te,xe;return t.shared.vid_exit_flag=!1,{_init:ce,showInsertPopup:r,showLayer:a,refreshByURLButton:s,refreshEmbedButton:l,refreshUploadButton:c,upload:H,insertByURL:v,insertEmbed:b,insert:d,align:X,refreshAlign:J,refreshAlignOnShow:Q,display:ee,refreshDisplayOnShow:te,remove:re,hideProgressBar:g,showSizePopup:z,replace:ne,back:ue,setSize:pe,get:fe}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera",FA5NAME:"camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.DefineIcon("videoUpload",{NAME:"upload"}),e.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("video-align",{NAME:"align-left"}),e.FE.DefineIcon("video-align-left",{NAME:"align-left"}),e.FE.DefineIcon("video-align-right",{NAME:"align-right"}),e.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.videoAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("video-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoReplace",{NAME:"exchange"}),e.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(168),n(184),e.exports=n(185)}]);