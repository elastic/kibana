# PERCENTILE

The PERCENTILE function returns the value at which a specified percentage of observed values occur. For example, the 95th percentile is the value greater than 95% of the observed values, and the 50th percentile is the median.

## Syntax

`PERCENTILE(number, percentile)`

### Parameters

#### number

The column or expression containing the numeric values for which you want to calculate the percentile.

#### percentile

The percentile to calculate, expressed as a number (for example, 50 for the median, 99 for the 99th percentile).

## Examples

The following query calculates the 0th, 50th, and 99th percentiles for the `salary` column in the `employees` dataset. This means it finds the minimum salary (0th percentile), the median salary (50th percentile), and the value below which 99% of salaries fall (99th percentile).

```esql
FROM employees
| STATS p0 = PERCENTILE(salary,  0)
     , p50 = PERCENTILE(salary, 50)
     , p99 = PERCENTILE(salary, 99)
```

This query calculates the 80th percentile of the maximum salary change per employee. It first finds the maximum salary change for each employee (if there are multiple values), and then determines the value below which 80% of these maximum changes fall.

```esql
FROM employees
| STATS p80_max_salary_change = PERCENTILE(MV_MAX(salary_change), 80)
```

## Limitations

- The PERCENTILE function uses the TDigest algorithm, which provides approximate results, especially for large datasets.
- Accuracy is higher for extreme percentiles (such as 99%) and for small datasets.
- As the number of values increases, the function trades accuracy for memory efficiency, and the exact error depends on the data distribution and volume.
- The function is non-deterministic, meaning repeated queries on the same data may yield slightly different results.