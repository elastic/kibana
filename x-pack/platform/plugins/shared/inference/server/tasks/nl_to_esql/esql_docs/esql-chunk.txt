# CHUNK

The CHUNK function splits a text field into smaller chunks using a sentence-based chunking strategy. It can be used on fields from the text family, such as text and semantic_text. You can specify the number of chunks returned and the length of the sentences used to create the chunks.

## Syntax

`CHUNK(field, chunking_settings, separator_group, overlap, sentence_overlap, strategy, max_chunk_size, separators)`

### Parameters

#### field

The input to chunk.

#### chunking_settings

Options to customize chunking behavior. Defaults to `{"strategy":"sentence","max_chunk_size":300,"sentence_overlap":0}`.

#### separator_group

Optional.

A predefined list of separators based on the selected text type. Values can be `markdown` or `plaintext`. Only applicable to the `recursive` chunking strategy. When using the `recursive` chunking strategy, one of `separators` or `separator_group` must be specified.

#### overlap

Optional.

The number of overlapping words for chunks. Applicable only to the `word` chunking strategy. This value cannot be higher than half the `max_chunk_size` value.

#### sentence_overlap

Optional.

The number of overlapping sentences for chunks. Applicable only for the `sentence` chunking strategy. It can be either `1` or `0`.

#### strategy

Optional.

The chunking strategy to use. Default value is `sentence`.

#### max_chunk_size

Optional.

The maximum size of a chunk in words. This value cannot be lower than `20` (for `sentence` strategy) or `10` (for `word` or `recursive` strategies). This value should not exceed the window size for any associated models using the output of this function.

#### separators

Optional.

A list of strings used as possible split points when chunking text. Each string can be a plain string or a regular expression (regex) pattern. The system tries each separator in order to split the text, starting from the first item in the list. After splitting, it attempts to recombine smaller pieces into larger chunks that stay within the `max_chunk_size` limit, to reduce the total number of chunks generated. Only applicable to the `recursive` chunking strategy. When using the `recursive` chunking strategy, one of `separators` or `separator_group` must be specified.

## Examples

The following query demonstrates how to split a long sentence into smaller chunks, each containing up to 10 words, with an overlap of 1 word between consecutive chunks. This is useful for breaking down lengthy text into manageable pieces for further processing or analysis.

```esql
ROW result = CHUNK("It was the best of times