# TOP_SNIPPETS

The TOP_SNIPPETS function extracts the best matching snippets for a given query string from a text field. It works with fields from the text family, such as text and semantic_text, and allows you to control the number and length of the returned snippets.

## Syntax

`TOP_SNIPPETS(field, query, options, num_words, num_snippets)`

### Parameters

#### field

The input field to extract snippets from.

#### query

The input text containing only query terms for snippet extraction. Lucene query syntax, operators, and wildcards are not allowed.

#### options

(Optional) Additional options for TOP_SNIPPETS as function named parameters.

#### num_words

The maximum number of words to return in each snippet. This helps control inference costs by limiting the size of tokens per snippet.

#### num_snippets

The maximum number of matching snippets to return.

## Examples

Extracts the most relevant snippets from the `description` field in the `books` index that match the term "Tolkien".

```esql
FROM books
| EVAL snippets = TOP_SNIPPETS(description, "Tolkien")
```

Filters books with "Return" in the title, then extracts up to 3 snippets of up to 25 words each from the `description` field that match the term "Tolkien".

```esql
FROM books
| WHERE MATCH(title, "Return")
| EVAL snippets = TOP_SNIPPETS(description, "Tolkien", { "num_snippets": 3, "num_words": 25 })
```