# GEOSPATIAL PREDICATES

Geospatial predicates are functions used to perform spatial operations and comparisons between geometric objects, such as points, shapes, and geo-grids. These commands allow you to compute distances, check for intersections, containment, and spatial relationships between geometries.

## Syntax

`ST_DISTANCE(geomA, geomB)`

`ST_INTERSECTS(geomA, geomB)`

`ST_DISJOINT(geomA, geomB)`

`ST_CONTAINS(geomA, geomB)`

`ST_WITHIN(geomA, geomB)`

### Parameters

#### geomA

Expression representing a geometry. Supported types include `geo_point`, `cartesian_point`, `geo_shape`, `cartesian_shape`, or geo-grid values such as `geohash`, `geotile`, `geohex` (for ST_INTERSECTS and ST_DISJOINT). If `null`, the function returns `null`.

#### geomB

Expression representing a geometry. Supported types include `geo_point`, `cartesian_point`, `geo_shape`, `cartesian_shape`, or geo-grid values such as `geohash`, `geotile`, `geohex` (for ST_INTERSECTS and ST_DISJOINT). If `null`, the function returns `null`. The coordinate system of `geomB` must match that of `geomA`; mixing `geo_*` and `cartesian_*` types is not allowed.

## Examples

The following examples demonstrate how to use geospatial predicates in ES|QL queries:

**Calculate the distance between two locations:**  
This query retrieves information about the airport with the abbreviation "CPH", calculates the distance between its location and the city location, and displays the abbreviation, name, locations, and the computed distance.

```esql
FROM airports
| WHERE abbrev == "CPH"
| EVAL distance = ST_DISTANCE(location, city_location)
| KEEP abbrev, name, location, city_location, distance
```

**Check if an airport location intersects with a polygon:**  
This query filters airports whose location intersects with a specified polygon, returning only those airports that are located within or touch the polygon area.

```esql
FROM airports
| WHERE ST_INTERSECTS(location, TO_GEOSHAPE("POLYGON((42 14, 43 14, 43 15, 42 15, 42 14))"))
```

**Determine if a city boundary is disjoint from a polygon:**  
This query selects airport city boundaries that do not overlap or touch the specified polygon, and displays relevant details for those cities.

```esql
FROM airport_city_boundaries
| WHERE ST_DISJOINT(city_boundary, TO_GEOSHAPE("POLYGON((-10 -60, 120 -60, 120 60, -10 60, -10 -60))"))
| KEEP abbrev, airport, region, city, city_location
```

**Check if a city boundary contains a polygon:**  
This query finds airport city boundaries that completely contain the specified polygon, and returns details about those cities.

```esql
FROM airport_city_boundaries
| WHERE ST_CONTAINS(city_boundary, TO_GEOSHAPE("POLYGON((109.35 18.3, 109.45 18.3, 109.45 18.4, 109.35 18.4, 109.35 18.3))"))
| KEEP abbrev, airport, region, city, city_location
```

**Check if a city boundary is within a polygon:**  
This query selects airport city boundaries that are entirely located within the specified polygon, and displays their details.

```esql
FROM airport_city_boundaries
| WHERE ST_WITHIN(city_boundary, TO_GEOSHAPE("POLYGON((109.1 18.15, 109.6 18.15, 109.6 18.65, 109.1 18.65, 109.1 18.15))"))
| KEEP abbrev, airport, region, city, city_location
```