# COUNT_DISTINCT

The COUNT_DISTINCT function returns the approximate number of distinct values in a column or expression. It uses a configurable precision threshold to balance memory usage and accuracy, making it suitable for high-cardinality datasets. Counts are approximate and based on the HyperLogLog++ algorithm, which provides fixed memory usage and excellent accuracy for low-cardinality sets.

## Syntax

`COUNT_DISTINCT(field, precision)`

### Parameters

#### field

Column or literal for which to count the number of distinct values.

#### precision

Optional. Precision threshold that controls the trade-off between memory usage and accuracy. The maximum supported value is 40000; values above this are treated as 40000. The default value is 3000.

## Examples

Calculates the approximate number of unique values in the `ip0` and `ip1` columns from the `hosts` dataset.

```esql
FROM hosts
| STATS COUNT_DISTINCT(ip0), COUNT_DISTINCT(ip1)
```

Calculates the approximate number of unique values in `ip0` and `ip1` columns using custom precision thresholds.

```esql
FROM hosts
| STATS COUNT_DISTINCT(ip0, 80000), COUNT_DISTINCT(ip1, 5)
```

Counts the number of distinct words after splitting the `words` string by semicolons.

```esql
ROW words="foo;bar;baz;qux;quux;foo"
| STATS distinct_word_count = COUNT_DISTINCT(SPLIT(words, ";"))
```

## Limitations

- Counts are approximate and not exact.
- The maximum supported precision threshold is 40000; higher values are treated as 40000.
- Accuracy depends on the dataset and the configured precision threshold. For low thresholds, the error remains low (1-6%) even when counting millions of items.