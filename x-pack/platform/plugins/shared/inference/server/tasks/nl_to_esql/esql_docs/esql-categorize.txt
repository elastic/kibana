# CATEGORIZE

The CATEGORIZE function groups text messages into categories based on similar formatting and content.

## Syntax

`CATEGORIZE(field, options, output_format, similarity_threshold, analyzer)`

### Parameters

#### field

Expression to categorize.

#### options

(Optional) Additional options for categorization, provided as function named parameters.

#### output_format

The output format of the categories. This is a keyword parameter and defaults to regex.

#### similarity_threshold

The minimum percentage of token weight that must match for text to be added to a category bucket. Must be an integer between 1 and 100. Higher values create narrower categories and increase memory usage. Defaults to 70.

#### analyzer

Analyzer used to convert the field into tokens for text categorization.

## Examples

The following query groups log messages from the `sample_data` source into categories based on their content, and then counts how many messages fall into each category. This helps to identify common patterns or types of log messages in your data.

```esql
FROM sample_data
| STATS count=COUNT() BY category=CATEGORIZE(message)
```

This example groups log messages into categories and counts the number of messages in each category.

## Limitations

- Cannot be used within other expressions.
- Cannot be used more than once in the groupings.
- Cannot be used or referenced within aggregate functions and must be the first grouping.