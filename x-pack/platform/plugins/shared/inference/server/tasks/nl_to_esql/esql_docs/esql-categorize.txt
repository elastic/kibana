# CATEGORIZE

The CATEGORIZE function groups text messages into categories based on similar formatting and content. It is useful for identifying patterns or commonalities in text fields, such as log messages.

## Syntax

`CATEGORIZE(field, options, output_format, similarity_threshold, analyzer)`

### Parameters

#### field

The expression or column containing the text values to categorize.

#### options

(Optional) Additional options for categorization, provided as function named parameters.

#### output_format

(keyword) Specifies the output format of the categories. Defaults to regex.

#### similarity_threshold

(integer) The minimum percentage of token weight that must match for text to be added to a category bucket. Must be between 1 and 100. Higher values create narrower, more specific categories and increase memory usage. Defaults to 70.

#### analyzer

(keyword) The analyzer used to convert the field into tokens for text categorization.

## Examples

The following query groups similar log messages from the `sample_data` source into categories using the `CATEGORIZE` function, and then counts how many messages fall into each category. This helps to identify common patterns or recurring types of log messages.

```esql
FROM sample_data
| STATS count=COUNT() BY category=CATEGORIZE(message)
```
This example groups similar log messages into categories and counts the number of messages in each category.

## Limitations

- Cannot be used within other expressions.
- Cannot be used more than once in the groupings.
- Cannot be used or referenced within aggregate functions and must be the first grouping.