# DATE_DIFF

The DATE_DIFF function subtracts the `startTimestamp` from the `endTimestamp` and returns the difference in multiples of the specified `unit`. If `startTimestamp` is later than `endTimestamp`, the result will be negative.

## Syntax

`DATE_DIFF(unit, startTimestamp, endTimestamp)`

### Parameters

#### unit

The time difference unit to use for the calculation.

#### startTimestamp

A string representing the start timestamp.

#### endTimestamp

A string representing the end timestamp.

## Examples

Calculate the difference in microseconds between two timestamps:

This query creates two datetime values, `date1` and `date2`, and then calculates the difference between them in microseconds, storing the result in the column `dd_ms`.

```esql
ROW date1 = TO_DATETIME("2023-12-02T11:00:00.000Z"),
    date2 = TO_DATETIME("2023-12-02T11:00:00.001Z")
| EVAL dd_ms = DATE_DIFF("microseconds", date1, date2)
```

Calculate the difference in years between various dates, counting only fully elapsed years:

This query defines three datetime values representing the end of 2023, the start of 2024, and the end of 2024. It then calculates the difference in years between these dates using the `DATE_DIFF` function, showing how many full years have elapsed between each pair of dates.

```esql
ROW end_23 = TO_DATETIME("2023-12-31T23:59:59.999Z"),
  start_24 = TO_DATETIME("2024-01-01T00:00:00.000Z"),
    end_24 = TO_DATETIME("2024-12-31T23:59:59.999")
| EVAL end23_to_start24 = DATE_DIFF("year", end_23, start_24)
| EVAL end23_to_end24   = DATE_DIFF("year", end_23, end_24)
| EVAL start_to_end_24  = DATE_DIFF("year", start_24, end_24)
```
