# DATE_TRUNC

Rounds down a date to the nearest specified interval since the epoch, which starts at `0001-01-01T00:00:00Z`.

## Syntax

`DATE_TRUNC(interval, date)`

### Parameters

#### interval

Interval to round down to, expressed using the timespan literal syntax.

#### date

The date expression to be rounded down.

## Examples

Round the hire date of each employee down to the start of the year:

This query retrieves each employee's first name, last name, and hire date, then creates a new field called `year_hired` that contains the hire date rounded down to the beginning of the year.

```esql
FROM employees
| KEEP first_name, last_name, hire_date
| EVAL year_hired = DATE_TRUNC(1 year, hire_date)
```

Calculate the number of hires per year by combining DATE_TRUNC with STATS:

This query calculates the total number of employees hired each year. It first rounds each employee's hire date down to the start of the year, then counts the number of hires for each year and sorts the results by year.

```esql
FROM employees
| EVAL year = DATE_TRUNC(1 year, hire_date)
| STATS hires = COUNT(emp_no) BY year
| SORT year
```

Calculate the average error rate per hour:

This query analyzes log data to calculate the average error rate for each hour. It marks messages containing "error" with a value of 1, rounds timestamps down to the start of the hour, computes the average error value per hour, and sorts the results by hour.

```esql
FROM sample_data
| EVAL error = CASE(message LIKE "*error*", 1, 0)
| EVAL hour = DATE_TRUNC(1 hour, @timestamp)
| STATS error_rate = AVG(error) by hour
| SORT hour
```
