# DATE_TRUNC

The DATE_TRUNC function rounds down a date to the closest interval since the epoch, which starts at `0001-01-01T00:00:00Z`.

## Syntax

`DATE_TRUNC(interval, date)`

### Parameters

#### interval

Interval, expressed using the timespan literal syntax.

#### date

Date expression.

## Examples

Round the hire date of each employee down to the closest year:

This query selects the first name, last name, and hire date of each employee, and then adds a new column called `year_hired` that contains the hire date rounded down to the start of the year.

```esql
FROM employees
| KEEP first_name, last_name, hire_date
| EVAL year_hired = DATE_TRUNC(1 year, hire_date)
```

Calculate the number of hires per year by combining DATE_TRUNC with STATS:

This query creates a new column with the hire date truncated to the year, then counts the number of employees hired in each year, and sorts the results by year.

```esql
FROM employees
| EVAL year = DATE_TRUNC(1 year, hire_date)
| STATS hires = COUNT(emp_no) BY year
| SORT year
```

Compute the average error rate per hour:

This query checks each message for the word "error" and assigns a value of 1 if found, otherwise 0. It then truncates the timestamp to the hour, calculates the average error rate for each hour, and sorts the results by hour.

```esql
FROM sample_data
| EVAL error = CASE(message LIKE "*error*", 1, 0)
| EVAL hour = DATE_TRUNC(1 hour, @timestamp)
| STATS error_rate = AVG(error) by hour
| SORT hour
```
