# GROK

The GROK command is used to extract structured data from a string. It matches the string against patterns based on regular expressions and extracts the specified patterns as columns.

## Syntax

`GROK input "pattern"`

### Parameters

#### input

The column containing the string you want to structure. If the column has multiple values, GROK will process each value.

#### pattern

A grok pattern. If a field name conflicts with an existing column, the existing column is discarded. If a field name is used more than once, a multi-valued column will be created with one value per occurrence of the field name.

## Examples

This query parses a string containing a timestamp, IP address, email address, and a number, and extracts each of these elements into separate columns named `date`, `ip`, `email`, and `num`.

```esql
ROW a = "2023-01-23T12:15:00.000Z 127.0.0.1 some.email@foo.com 42"
| GROK a """%{TIMESTAMP_ISO8601:date} %{IP:ip} %{EMAILADDRESS:email} %{NUMBER:num}"""
| KEEP date, ip, email, num
```

This query parses the same string as above, but it also converts the extracted number into an integer type directly within the GROK pattern.

```esql
ROW a = "2023-01-23T12:15:00.000Z 127.0.0.1 some.email@foo.com 42"
| GROK a """%{TIMESTAMP_ISO8601:date} %{IP:ip} %{EMAILADDRESS:email} %{NUMBER:num:int}"""
| KEEP date, ip, email, num
```

This query parses the string, converts the extracted number to an integer, and then uses a type conversion function to convert the extracted date string into a datetime type.

```esql
ROW a = "2023-01-23T12:15:00.000Z 127.0.0.1 some.email@foo.com 42"
| GROK a """%{TIMESTAMP_ISO8601:date} %{IP:ip} %{EMAILADDRESS:email} %{NUMBER:num:int}"""
| KEEP date, ip, email, num
| EVAL date = TO_DATETIME(date)
```

This query demonstrates how to create a multi-valued column by using the same field name more than once in the GROK pattern. It extracts two words from the `zip_code` column and stores them as separate values in a new column called `zip_parts`.

```esql
FROM addresses
| KEEP city.name, zip_code
| GROK zip_code """%{WORD:zip_parts} %{WORD:zip_parts}"""
```