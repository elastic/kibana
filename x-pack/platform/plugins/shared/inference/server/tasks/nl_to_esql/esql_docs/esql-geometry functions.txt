# GEOMETRY FUNCTIONS

Geometry functions provide tools to extract coordinates, count points, and simplify geometries. These functions work with various geometry types, including `geo_point`, `geo_shape`, `cartesian_point`, and `cartesian_shape`.

## Syntax

`ST_X(point)`  
`ST_Y(point)`  
`ST_NPOINTS(geometry)`  
`ST_SIMPLIFY(geometry, tolerance)`

### Parameters

#### point

Expression of type `geo_point` or `cartesian_point`. If `null`, the function returns `null`.

#### geometry

Expression of type `geo_point`, `geo_shape`, `cartesian_point`, or `cartesian_shape`. If `null`, the function returns `null`.

#### tolerance

Optional. Tolerance for the geometry simplification, in the units of the input SRS.

## Examples

Extract the x and y coordinates from a geo point:

This query creates a row with a geo point and then extracts its longitude (x) and latitude (y) coordinates into separate columns.

```esql
ROW point = TO_GEOPOINT("POINT(42.97109629958868 14.7552534006536)")
| EVAL x = ST_X(point), y = ST_Y(point)
```

Count the number of points in a city boundary geometry:

This query retrieves records from the `airport_city_boundaries` index where the airport abbreviation is "CPH", calculates the number of points that make up the city boundary geometry, and keeps only the abbreviation, airport name, and point count in the output.

```esql
FROM airport_city_boundaries
| WHERE abbrev == "CPH"
| EVAL points = ST_NPOINTS(city_boundary)
| KEEP abbrev, airport, points
```

Simplify a polygon geometry using a specified tolerance:

This query creates a row with a polygon geometry in WKT format, converts it to a geo shape, and then simplifies the geometry using a tolerance value of 0.7 to reduce its complexity.

```esql
ROW wkt = "POLYGON ((7.998 53.827, 9.470 53.068, 15.754 53.801, 16.523 57.160, 11.162 57.868, 8.064 57.445, 6.219 55.317, 7.998 53.827))"
| EVAL simplified = ST_SIMPLIFY(TO_GEOSHAPE(wkt), 0.7)
```

## Limitations

- The result of `ST_SIMPLIFY` may be an invalid geometry, even if the original input was valid.
