# CASE

The CASE function evaluates pairs of conditions and values, returning the value associated with the first condition that evaluates to `true`. If no condition matches, a default value is returned if provided; otherwise, the function returns `null`.

## Syntax

`CASE(condition, trueValue, elseValue)`

### Parameters

#### condition

A condition to evaluate.

#### trueValue

The value returned when the corresponding condition is the first to evaluate to `true`. If no condition matches, the default value is returned.

#### elseValue

(Optional) The value returned when no condition evaluates to `true`.

## Examples

Determine whether employees are monolingual, bilingual, or polyglot:

```esql
FROM employees
| EVAL type = CASE(
    languages <= 1, "monolingual",
    languages <= 2, "bilingual",
     "polyglot")
| KEEP emp_no, languages, type
```
This query classifies each employee as "monolingual" if they speak one or fewer languages, "bilingual" if they speak two or fewer languages, and "polyglot" otherwise. It then displays the employee number, number of languages spoken, and the assigned type.

Calculate the total connection success rate based on log messages:

```esql
FROM sample_data
| EVAL successful = CASE(
    STARTS_WITH(message, "Connected to"), 1,
    message == "Connection error", 0
  )
| STATS success_rate = AVG(successful)
```
This query assigns a value of 1 to log messages that start with "Connected to" (indicating a successful connection) and 0 to messages that exactly match "Connection error". It then calculates the average of these values to determine the overall connection success rate.

Calculate an hourly error rate as a percentage of the total number of log messages:

```esql
FROM sample_data
| EVAL error = CASE(message LIKE "*error*", 1, 0)
| EVAL hour = DATE_TRUNC(1 hour, @timestamp)
| STATS error_rate = AVG(error) by hour
| SORT hour
```
This query flags log messages containing the word "error" by assigning them a value of 1 and all others a value of 0. It then groups the data by hour and calculates the average error rate for each hour, sorting the results chronologically.