# CASE

The CASE function evaluates pairs of conditions and values, returning the value associated with the first condition that evaluates to `true`. If no condition matches, it returns a default value if provided, or `null` if not.

## Syntax

`CASE(condition, trueValue, elseValue)`

### Parameters

#### condition

A condition to evaluate.

#### trueValue

The value returned when the corresponding condition is the first to evaluate to `true`.

#### elseValue

(Optional) The value returned when no condition evaluates to `true`.

## Examples

Determine whether employees are monolingual, bilingual, or polyglot:

This query retrieves employee data and uses the CASE function to classify each employee as "monolingual" if they speak one or fewer languages, "bilingual" if they speak two or fewer languages, and "polyglot" otherwise. The result includes the employee number, number of languages, and the classification type.

```esql
FROM employees
| EVAL type = CASE(
    languages <= 1, "monolingual",
    languages <= 2, "bilingual",
     "polyglot")
| KEEP emp_no, languages, type
```

Calculate the total connection success rate based on log messages:

This query analyzes log messages to determine connection success. It assigns a value of 1 to messages starting with "Connected to" and 0 to messages that are exactly "Connection error". It then calculates the average of these values to determine the overall connection success rate.

```esql
FROM sample_data
| EVAL successful = CASE(
    STARTS_WITH(message, "Connected to"), 1,
    message == "Connection error", 0
  )
| STATS success_rate = AVG(successful)
```

Calculate an hourly error rate as a percentage of the total number of log messages:

This query marks log messages containing the word "error" with a value of 1 and others with 0. It then groups the data by hour and calculates the average error rate for each hour, sorting the results chronologically.

```esql
FROM sample_data
| EVAL error = CASE(message LIKE "*error*", 1, 0)
| EVAL hour = DATE_TRUNC(1 hour, @timestamp)
| STATS error_rate = AVG(error) by hour
| SORT hour
```