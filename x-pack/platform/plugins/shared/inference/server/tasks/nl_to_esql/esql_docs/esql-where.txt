# WHERE

The WHERE command filters rows from the input table, returning only those for which the specified condition evaluates to true. When excluding values, fields with null values are also excluded from the results. Here, null means either an explicit null value or the absence of a value. For example, `WHERE field != "value"` is interpreted as `WHERE field != "value" AND field IS NOT NULL`.

## Syntax

`WHERE expression`

### Parameters

#### expression

A boolean expression that determines which rows are included in the output.

## Examples

Filter employees who are still hired:

This query selects the first name, last name, and hiring status of employees, and then filters the results to include only those employees who are currently hired.

```esql
FROM employees
| KEEP first_name, last_name, still_hired
| WHERE still_hired == true
```

Filter employees where `still_hired` is true (using simplified boolean expression):

This query retrieves the first name, last name, and hiring status of employees, and filters the results to include only those where the `still_hired` field is true.

```esql
FROM employees
| KEEP first_name, last_name, still_hired
| WHERE still_hired
```

Retrieve logs from the last hour using date math:

This query returns log entries from the `sample_data` source where the timestamp is within the last hour.

```esql
FROM sample_data
| WHERE @timestamp > NOW() - 1 hour
```

Filter employees whose first name has fewer than 4 characters using the LENGTH function:

This query selects the first name, last name, and height of employees, and filters the results to include only those whose first name is shorter than 4 characters.

```esql
FROM employees
| KEEP first_name, last_name, height
| WHERE LENGTH(first_name) < 4
```

Check for null values in the `birth_date` field:

This query returns employees whose `birth_date` field is null or missing.

```esql
FROM employees
| WHERE birth_date IS NULL
```

Filter employees where `is_rehired` is not null and count them:

This query filters employees to include only those with a non-null `is_rehired` field, and then counts the number of such employees.

```esql
FROM employees
| WHERE is_rehired IS NOT NULL
| STATS COUNT(emp_no)
```

Match books where the author field contains "Faulkner" using the MATCH function:

This query returns books where the author's name contains the word "Faulkner".

```esql
FROM books
| WHERE MATCH(author, "Faulkner")
```

Match books where the title contains all words "Hobbit Back Again" using the AND operator in MATCH:

This query filters books to include only those whose title contains all the words "Hobbit", "Back", and "Again", and then keeps only the title field in the output.

```esql
FROM books
| WHERE MATCH(title, "Hobbit Back Again", {"operator": "AND"})
| KEEP title;
```

Use the LIKE operator to filter first names matching the pattern "?b*":

This query returns employees whose first name matches the pattern "?b*", and displays their first and last names.

```esql
FROM employees
| WHERE first_name LIKE """?b*"""
| KEEP first_name, last_name
```

Match the exact string "foo * bar" using LIKE with escaped characters:

This query creates a row with the message "foo * bar" and filters it to include only those where the message matches the exact string "foo * bar", using escaped characters.

```esql
ROW message = "foo * bar"
| WHERE message LIKE "foo \\* bar"
```

Reduce escaping overhead by using triple-quoted strings with LIKE:

This query creates a row with the message "foo * bar" and filters it to include only those where the message matches the exact string "foo * bar", using triple-quoted strings to simplify escaping.

```esql
ROW message = "foo * bar"
| WHERE message LIKE """foo \* bar"""
```

Filter messages matching any of the patterns "foo*" or "bar?" using LIKE with a list:

This query creates a row with the message "foobar" and filters it to include only those where the message matches either the pattern "foo*" or "bar?".

```esql
ROW message = "foobar"
| WHERE message like ("foo*", "bar?")
```

Use a REST query placeholder for the LIKE pattern:

This query retrieves employees whose first name matches a pattern provided as a REST query parameter, and displays their first and last names.

```esql
FROM employees
| WHERE first_name LIKE ?pattern
| KEEP first_name, last_name
```

Filter first names matching the regular expression ".leja.*" using RLIKE:

This query returns employees whose first name matches the regular expression ".leja.*", and displays their first and last names.

```esql
FROM employees
| WHERE first_name RLIKE """.leja.*"""
| KEEP first_name, last_name
```

Match the exact string "foo ( bar" using RLIKE with escaped characters:

This query creates a row with the message "foo ( bar" and filters it to include only those where the message matches the exact string "foo ( bar", using escaped characters.

```esql
ROW message = "foo ( bar"
| WHERE message RLIKE "foo \\( bar"
```

Reduce escaping overhead by using triple-quoted strings with RLIKE:

This query creates a row with the message "foo ( bar" and filters it to include only those where the message matches the exact string "foo ( bar", using triple-quoted strings to simplify escaping.

```esql
ROW message = "foo ( bar"
| WHERE message RLIKE """foo \( bar"""
```

Filter messages matching any of the regular expressions "foo.*" or "bar." using RLIKE with a list:

This query creates a row with the message "foobar" and filters it to include only those where the message matches either the regular expression "foo.*" or "bar.".

```esql
ROW message = "foobar"
| WHERE message RLIKE ("foo.*", "bar.")
```

Use a REST query placeholder for the RLIKE pattern:

This query retrieves employees whose first name matches a regular expression provided as a REST query parameter, and displays their first and last names.

```esql
FROM employees
| WHERE first_name RLIKE ?pattern
| KEEP first_name, last_name
```

Test if an expression is in a list of values using the IN operator:

This query creates a row with values for `a`, `b`, and `c`, and filters it to include only those where the value of `c-a` is in the list (3, b / 2, a).

```esql
ROW a = 1, b = 4, c = 3
| WHERE c-a IN (3, b / 2, a)
```