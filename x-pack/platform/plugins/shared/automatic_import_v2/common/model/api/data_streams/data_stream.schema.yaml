openapi: 3.0.3
info:
  title: Automatic Import Data Streams API endpoint
  version: "1"
paths:
  /internal/automatic_import/integrations/{integration_id}/data_streams:
    put:
      summary: Creates a new state entry for data stream in SavedObject index.
      operationId: CreateAutoImportDataStream
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Creates a new state entry for data stream in SavedObject and returns the corresponding data_stream_id
      tags:
        - Automatic Import Data Streams
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              required:
                - title
                - samples
              properties:
                title:
                  description: The data stream title
                  $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
                description:
                  description: The data stream description
                  type: string
                samples:
                  description: The data stream samples
                  type: array
                  minItems: 1
                  items:
                    type: string
      responses:
        200:
          description: >-
            The data stream state is created successfully and data_stream_id is
            returned.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data_stream_id
                properties:
                  data_stream_id:
                    description: The data stream id created in state.
                    $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
  /internal/automatic_import/integrations/{integration_id}/data_streams/{data_stream_id}:
    patch:
      summary: Updates an existing data stream.
      operationId: UpdateAutoImportDataStream
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Updates data stream information like description, samples
      tags:
        - Automatic Import Data Streams
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
        - name: data_stream_id
          in: path
          required: true
          description: The data stream identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                description:
                  description: Data stream description
                  type: string
                samples:
                  description: Data stream samples
                  type: array
                  minItems: 1
                  items:
                    type: string
      responses:
        200:
          description: Indicates data stream has been updated correctly.
        404:
          description: Indicates the data stream id was not found.
