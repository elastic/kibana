openapi: 3.0.3
info:
  title: Automatic Import Integrations API endpoint
  version: "1"
paths:
  /internal/automatic_import/integrations/{integration_id}/data_streams/{data_stream_id}:
    delete:
      summary: Deletes a data stream by its id.
      operationId: DeleteDataStream
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Deletes a data stream by its id.
      tags:
        - Automatic Import Integrations
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
        - name: data_stream_id
          in: path
          required: true
          description: The data stream identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      responses:
        200:
          description: The data stream is deleted successfully.
        404:
          description: The data stream is not found.
        500:
          description: An internal server error occurred.
  /internal/automatic_import/integrations/{integration_id}/data_streams/{data_stream_id}/upload:
    post:
      summary: Uploads samples to a data stream.
      operationId: UploadSamplesToDataStream
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Uploads samples to a data stream.
      tags:
        - Automatic Import Integrations
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
        - name: data_stream_id
          in: path
          required: true
          description: The data stream identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      requestBody:
        required: true
        additionalProperties: false
        content:
          application/json:
            schema:
              type: object
              required:
                - samples
                - originalSource
              properties:
                samples:
                  type: array
                  items:
                    minItems: 1
                    type: string
                  description: The samples to upload
                originalSource:
                  description: The original source of the samples
                  $ref: "../../../model/common_attributes.schema.yaml#/components/schemas/OriginalSource"
                langSmithOptions:
                  description: The LangSmith tracing options
                  $ref: "../../../model/common_attributes.schema.yaml#/components/schemas/LangSmithOptions"
      responses:
        200:
          description: The samples are uploaded successfully.
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  success:
                    type: boolean
                    description: Indicates if the samples are uploaded successfully.
        400:
          description: The request is invalid.
        500:
          description: An internal server error occurred.
  /internal/automatic_import/integrations/{integration_id}/data_streams/{data_stream_id}/stop:
    post:
      summary: Stops a data stream by its id.
      operationId: StopAutoImportDataStream
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Stops a data stream by its id.
      tags:
        - Automatic Import Integrations
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
        - name: data_stream_id
          in: path
          required: true
          description: The data stream identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      responses:
        200:
          description: The data stream is stopped.
        404:
          description: The data stream is not found.
  /internal/automatic_import/integrations/{integration_id}/data_streams/{data_stream_id}/results:
    get:
      summary: Retrieves results for a data stream.
      operationId: GetDataStreamResults
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Retrieves the ingest pipeline and results for a data stream if processing is completed.
      tags:
        - Automatic Import Integrations
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
        - name: data_stream_id
          in: path
          required: true
          description: The data stream identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      responses:
        200:
          description: The data stream results are returned successfully.
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                required:
                  - ingest_pipeline
                  - results
                properties:
                  ingest_pipeline:
                    description: The ingest pipeline as a JSON string.
                    $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
                  results:
                    description: Results array as JSON objects.
                    type: array
                    items:
                      type: object
                      additionalProperties: true
        400:
          description: The data stream has not completed successfully.
        404:
          description: Indicates the data stream id was not found.
        500:
          description: An internal server error occurred.
  /internal/automatic_import/integrations/{integration_id}/data_streams/{data_stream_id}/reanalyze:
    put:
      summary: Re-runs the analysis workflow for an existing data stream.
      operationId: ReanalyzeDataStream
      x-codegen-enabled: true
      x-internal: true
      description: >-
        Re-runs the analysis workflow for an existing data stream. Old result are removed. This resets the data stream status to pending and schedules a new analysis task.
      tags:
        - Automatic Import Integrations
      parameters:
        - name: integration_id
          in: path
          required: true
          description: The integration identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
        - name: data_stream_id
          in: path
          required: true
          description: The data stream identifier
          schema:
            $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
      requestBody:
        required: true
        additionalProperties: false
        content:
          application/json:
            schema:
              type: object
              required:
                - connectorId
              properties:
                connectorId:
                  description: The inference connector ID to use for the reanalysis task.
                  $ref: "../../../model/primitive.schema.yaml#/components/schemas/NonEmptyString"
                langSmithOptions:
                  description: The LangSmith tracing options
                  $ref: "../../../model/common_attributes.schema.yaml#/components/schemas/LangSmithOptions"
      responses:
        200:
          description: The data stream reanalysis has been scheduled successfully.
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  success:
                    type: boolean
                    description: Indicates if the reanalysis was scheduled successfully.
        400:
          description: The request is invalid.
        404:
          description: The data stream is not found.
        500:
          description: An internal server error occurred.
