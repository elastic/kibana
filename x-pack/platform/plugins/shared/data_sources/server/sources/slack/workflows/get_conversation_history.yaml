version: '1'
name: 'sources.slack.get_conversation_history'
description: 'Fetch message history for a specific Slack public channel. Returns Slack API response including messages plus pagination fields (has_more / response_metadata.next_cursor when present). Requires channels:history and access to the channel.'
tags: ['agent-builder-tool']
enabled: true
triggers:
  - type: 'manual'
inputs:
  - name: channel
    type: string
    description: 'Channel ID (e.g. C123...).'
  - name: oldest
    type: string
    required: false
    description: 'Start of time range (Unix timestamp as string).'
  - name: latest
    type: string
    required: false
    description: 'End of time range (Unix timestamp as string).'
  - name: inclusive
    type: boolean
    required: false
    default: false
    description: 'If true, include messages with oldest/latest timestamps.'
  - name: limit
    type: number
    required: false
    default: 100
    description: 'Maximum number of messages to return (1-1000).'
  - name: cursor
    type: string
    required: false
    description: 'Pagination cursor from a previous response.'
steps:
  - name: get-conversation-history
    type: slack2.getConversationHistory
    connector-id: <%= stackConnectorId %>
    with:
      channel: "${{inputs.channel}}"
      oldest: "${{inputs.oldest}}"
      latest: "${{inputs.latest}}"
      inclusive: ${{inputs.inclusive}}
      limit: ${{inputs.limit}}
      cursor: "${{inputs.cursor}}"

