version: '1'
name: 'sources.slack.get_conversation_history'
description: 'Fetch message history for a Slack conversation by conversation ID. Actions and inputs: getConversationHistory (channel, optional oldest, optional latest, optional inclusive, optional limit, optional cursor). Use sources.slack.find to resolve a channel name to an ID (C.../G...). Requires the appropriate Slack history scope for the conversation type (e.g. channels:history for public channels, groups:history for private channels, im:history for DMs, mpim:history for group DMs) and access to the conversation.'
tags: ['agent-builder-tool']
enabled: true
triggers:
  - type: 'manual'
inputs:
  - name: channel
    type: string
    description: 'Conversation ID (e.g. C.../G.../D...).'
  - name: oldest
    type: string
    required: false
    description: 'Start of time range (Unix timestamp as string).'
  - name: latest
    type: string
    required: false
    description: 'End of time range (Unix timestamp as string).'
  - name: inclusive
    type: boolean
    required: false
    default: false
    description: 'If true, include messages with oldest/latest timestamps.'
  - name: limit
    type: number
    required: false
    default: 100
    description: 'Maximum number of messages to return (1-1000).'
  - name: cursor
    type: string
    required: false
    description: 'Pagination cursor from a previous response.'
steps:
  - name: get-conversation-history
    type: slack2.getConversationHistory
    connector-id: <%= stackConnectorId %>
    with:
      channel: "${{inputs.channel}}"
      oldest: "${{inputs.oldest}}"
      latest: "${{inputs.latest}}"
      inclusive: ${{inputs.inclusive}}
      limit: ${{inputs.limit}}
      cursor: "${{inputs.cursor}}"

