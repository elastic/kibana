<kbn-management-app
  section="elasticsearch/watcher/watch"
  omit-breadcrumb-pages="{{ watchDetail.omitBreadcrumbPages }}"
  page-title="watchDetail.breadcrumb"
>
  <div class="kuiViewContent kuiViewContent--constrainedWidth">
    <!-- Header and buttons -->
    <div class="kuiViewContentItem kuiVerticalRhythm">
      <div class="kuiBar">

        <!-- Watch Details -->
        <div class="kuiBarSection">
          <h1
            class="kuiTitle"
            i18n-id="xpack.watcher.sections.watchDetail.currentStatusTitle"
            i18n-default-message="Current Status"
          ></h1>
        </div>

        <div class="kuiBarSection">
          <div class="kuiButtonGroup">
            <button
              ng-if="watchDetail.watch.watchStatus.isActive"
              ng-click="watchDetail.onWatchDeactivate()"
              class="kuiButton kuiButton--basic"
              data-test-subj="btnDeactivateWatch"
              i18n-id="xpack.watcher.sections.watchDetail.deactivateButtonLabel"
              i18n-default-message="Deactivate"
            ></button>
            <button
              ng-if="!watchDetail.watch.watchStatus.isActive"
              ng-click="watchDetail.onWatchActivate()"
              class="kuiButton kuiButton--basic"
              data-test-subj="btnActivateWatch"
              i18n-id="xpack.watcher.sections.watchDetail.activateButtonLabel"
              i18n-default-message="Activate"
            ></button>
            <button
              ng-click="watchDetail.onWatchDelete()"
              class="kuiButton kuiButton--danger"
              data-test-subj="btnDeleteWatch"
              i18n-id="xpack.watcher.sections.watchDetail.deleteButtonLabel"
              i18n-default-message="Delete"
            ></button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Watch Details -->

    <!-- Watch action status -->
    <div class="kuiViewContentItem kuiVerticalRhythm">
      <!-- Action status table -->
      <action-status-table
        action-statuses="watchDetail.sortedActionStatuses"
        action-errors="watchDetail.actionErrors"
        on-action-acknowledge="watchDetail.onActionAcknowledge"
        sort-field="watchDetail.actionStatusTableSortField"
        sort-reverse="watchDetail.actionStatusTableSortReverse"
        on-sort-change="watchDetail.onActionSortChange"
        show-errors="watchDetail.showErrors"
      ></action-status-table>
      <table-info ng-show="!watchDetail.hasActionStatusTableActions">
        {{ 'xpack.watcher.sections.watchDetail.noActionsFoundText' | i18n: { defaultMessage: 'No actions found.' } }}
      </table-info>
    </div>

    <!-- Watch History -->
    <div class="kuiViewContentItem kuiVerticalRhythm">
      <h1
        class="kuiTitle"
        i18n-id="xpack.watcher.sections.watchDetail.watchHistoryTitle"
        i18n-default-message="Watch History"
      ></h1>
    </div>

    <div class="kuiViewContentItem kuiVerticalRhythm">
      <watch-history
        xpack-watch="watchDetail.watch"
        history-items="watchDetail.watchHistoryItems"
        initial-range="watchDetail.historyRange"
        on-range-change="watchDetail.onHistoryRangeChange"
        is-loading="watchDetail.isHistoryLoading"
      ></watch-history>
    </div>
    <!-- End Watch History -->

  </div>
</kbn-management-app>
