<ml-nav-menu name="timeseriesexplorer" />
<ml-chart-tooltip></ml-chart-tooltip>
<div class="ml-time-series-explorer" ng-controller="MlTimeSeriesExplorerController" data-test-subj="mlPageSingleMetricViewer"  >

  <ml-job-selector-react-wrapper timeseriesonly="true" singleselection="true" />

  <ml-timeseriesexplorer-react-wrapper />

  <div ng-show="jobs.length > 0 && loading === false && hasResults === true">
    <div class="results-container">

      <div class="show-model-controls">
        <div ng-show="showModelBoundsCheckbox === true">
          <input id="toggleShowModelBoundsCheckbox"
            type="checkbox"
            class="kuiCheckBox"
            ng-click="toggleShowModelBounds()"
            ng-checked="showModelBounds === true">
          <label
            for="toggleShowModelBoundsCheckbox"
            class="kuiCheckBoxLabel"
            i18n-id="xpack.ml.timeSeriesExplorer.showModelBoundsLabel"
            i18n-default-message="show model bounds"
          ></label>
        </div>

        <div ng-show="showAnnotationsCheckbox === true">
          <input id="toggleAnnotationsCheckbox"
            type="checkbox"
            class="kuiCheckBox"
            ng-click="toggleShowAnnotations()"
            ng-checked="showAnnotations === true">
          <label
            for="toggleAnnotationsCheckbox"
            class="kuiCheckBoxLabel"
            i18n-id="xpack.ml.timeSeriesExplorer.annotationsLabel"
            i18n-default-message="annotations"
          ></label>
        </div>

        <div ng-show="showForecastCheckbox === true">
          <input id="toggleShowForecastCheckbox"
            type="checkbox"
            class="kuiCheckBox"
            ng-click="toggleShowForecast()"
            ng-checked="showForecast === true">
          <label
            for="toggleShowForecastCheckbox"
            class="kuiCheckBoxLabel"
            i18n-id="xpack.ml.timeSeriesExplorer.showForecastLabel"
            i18n-default-message="show forecast"
          ></label>
        </div>
      </div>

      <div class="ml-timeseries-chart" data-test-subj="mlSingleMetricViewerChart">

        <ml-timeseries-chart style="width: 1200px; height: 400px;"
          annotations-enabled="showAnnotationsCheckbox"
          selected-job="selectedJob"
          detector-index="detectorId"
          model-plot-enabled="modelPlotEnabled"
          context-chart-data="contextChartData"
          context-forecast-data="contextForecastData"
          context-aggregation-interval="contextAggregationInterval"
          swimlane-data="swimlaneData"
          focus-annotation-data="focusAnnotationData"
          focus-chart-data="focusChartData"
          focus-forecast-data="focusForecastData"
          focus-aggregation-interval="focusAggregationInterval"
          show-annotations="showAnnotations"
          show-model-bounds="showModelBounds"
          show-forecast="showForecast"
          zoom-from="zoomFrom"
          zoom-to="zoomTo"
          auto-zoom-duration="autoZoomDuration"
        />

      </div>

      <div ng-show="showAnnotations && focusAnnotationData.length > 0">
        <span
          class="panel-title euiText"
          i18n-id="xpack.ml.timeSeriesExplorer.annotationsTitle"
          i18n-default-message="Annotations"
        ></span>

        <ml-annotation-table
          annotations="focusAnnotationData"
          drill-down="false"
          number-badge="true"
        />

        <div class="euiSpacer euiSpacer--l"></div>
      </div>

      <ml-annotation-flyout />

      <span
        class="panel-title euiText"
        i18n-id="xpack.ml.timeSeriesExplorer.anomaliesTitle"
        i18n-default-message="Anomalies"
      ></span>

      <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--responsive ml-anomalies-controls">
        <div class="euiFlexItem euiFlexItem--flexGrowZero" style="width:170px">
          <div class="euiFormRow" id="select_severity_control">
            <label
              class="euiFormLabel"
              for="select_severity"
              i18n-id="xpack.ml.timeSeriesExplorer.severityThresholdLabel"
              i18n-default-message="Severity threshold"
            ></label>
            <div class="euiFormControlLayout">
              <ml-select-severity id="select_severity" />
            </div>
          </div>
        </div>
        <div class="euiFlexItem euiFlexItem--flexGrowZero" style="width:170px">
          <div class="euiFormRow" id="select_interval_control">
            <label
              class="euiFormLabel"
              for="select_interval"
              i18n-id="xpack.ml.timeSeriesExplorer.intervalLabel"
              i18n-default-message="Interval"
            ></label>
            <div class="euiFormControlLayout">
              <ml-select-interval id="select_interval" />
            </div>
          </div>
        </div>
      </div>

      <ml-anomalies-table
        table-data="tableData"
        filter="filter"
      />

    </div>
  </div>

</div>
