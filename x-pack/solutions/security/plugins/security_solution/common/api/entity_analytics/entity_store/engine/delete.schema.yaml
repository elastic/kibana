openapi: 3.0.0
info:
  title: Delete an Entity Engine
  version: '2023-10-31'
paths:
  /api/entity_store/engines:
    delete:
      x-labels: [ess, serverless]
      x-codegen-enabled: true
      operationId: DeleteEntityEngines
      summary: Delete Entity Engines
      parameters:
        - name: entityTypes
          in: query
          required: false
          schema:
            type: array
            items:
              $ref: '../common.schema.yaml#/components/schemas/EntityType'
            description: Array of engine types to delete. Empty by default, which results in all the engines being deleted.
          description: The entity type of the engine ('user', 'host', 'service', 'generic').
        - name: delete_data
          in: query
          required: false
          schema:
            type: boolean
          description: Control flag to also delete the entity data.
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              examples:
                deleteEntityEnginesExample:
                  description: Example response after deleting 'host' engine
                  value:
                    deleted: ['host']
                    still_running: ['generic', 'user', 'service']
              schema:
                type: object
                properties:      
                  deleted:
                    type: array
                    items:
                      $ref: '../common.schema.yaml#/components/schemas/EntityType'
                  still_running:
                    type: array
                    items:
                      $ref: '../common.schema.yaml#/components/schemas/EntityType'

  /api/entity_store/engines/{entityType}:
    delete:
      x-labels: [ess, serverless]
      x-codegen-enabled: true
      operationId: DeleteEntityEngine
      summary: Delete the Entity Engine
      parameters:
        - name: entityType
          in: path
          required: true
          schema:
            $ref: '../common.schema.yaml#/components/schemas/EntityType'
          description: The entity type of the engine (either 'user' or 'host').
        - name: delete_data
          in: query
          required: false
          schema:
            type: boolean
          description: Control flag to also delete the entity data.
        - name: data
          in: query
          required: false
          deprecated: true
          schema:
            type: boolean
          description: Control flag to also delete the entity data.
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              examples:
                deleteEntityEngineExample:
                  description: Example response after deleting 'host' engine
                  value:
                    deleted: true
              schema:
                type: object
                properties:      
                  deleted:
                    type: boolean
                 