[
  {
    "preview": false,
    "result": {
      "id": "https://127.0.0.1:8089/servicesNS/nobody/splunk_monitoring_console/data/ui/views/admission_control_monitoring_distributed",
      "label": "Workload Management Admission Control: Distributed",
      "title": "admission_control_monitoring_distributed",
      "eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Admission Control: Distributed<\/label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role<\/label>\n      <choice value=\"dmc_group_search_head\">Search Heads<\/choice>\n      <choice value=\"dmc_group_indexer\">Indexers<\/choice>\n      <default>dmc_group_search_head<\/default>\n    <\/input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group<\/label>\n      <showClearButton>false<\/showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        <\/query>\n      <\/search>\n      <fieldForLabel>label<\/fieldForLabel>\n      <fieldForValue>search_group<\/fieldForValue>\n      <choice value=\"*\">All<\/choice>\n      <selectFirstChoice>true<\/selectFirstChoice>\n    <\/input>\n  <\/fieldset>\n\n  <search id=\"base_search_prefiltered\">\n      <query>\n        `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* prefilter_action=filter\n        | stats count by search_type\n      <\/query>\n      <earliest>-60m<\/earliest>\n      <latest>now<\/latest>\n  <\/search>\n\n  <search base=\"base_search_prefiltered\">\n    <query> stats sum(count) as total_prefiltered<\/query>\n    <preview>\n      <eval token=\"total_prefiltered\">if(isnotnull('result.total_prefiltered'), 'result.total_prefiltered', 0)<\/eval>\n    <\/preview>\n    <finalized>\n      <eval token=\"total_prefiltered\">if(isnotnull('result.total_prefiltered'), 'result.total_prefiltered', 0)<\/eval>\n    <\/finalized>\n  <\/search>\n\n  <row>\n    <panel>\n      <title>Total Searches Prefiltered (Last Hour)<\/title>\n      <single>\n        <search>\n          <query>\n            `dmc_event_local_search_dispatch`\n            | stats dc(search_id) as total_dispatched\n            | eval output_with_percentage = \"$total_prefiltered$\".\" (\".round($total_prefiltered$/($total_prefiltered$ + total_dispatched) * 100, 2).\" %)\"\n            | fields output_with_percentage\n          <\/query>\n        <\/search>\n        <option name=\"height\">80px<\/option>\n      <\/single>\n    <\/panel>\n\n    <panel>\n      <title>Adhoc Searches Prefiltered (Last Hour)<\/title>\n      <single>\n        <search base=\"base_search_prefiltered\">\n          <query>\n            | where search_type=\"adhoc\"\n            | fields count\n          <\/query>\n        <\/search>\n        <option name=\"height\">80px<\/option>\n      <\/single>\n    <\/panel>\n\n    <panel>\n      <title>Scheduled Searches Prefiltered (Last Hour)<\/title>\n      <single>\n        <search base=\"base_search_prefiltered\">\n          <query>\n            | where search_type=\"scheduled\"\n            | fields count\n          <\/query>\n        <\/search>\n        <option name=\"height\">80px<\/option>\n      <\/single>\n    <\/panel>\n  <\/row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts<\/title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:<\/label>\n        <default>\n          <earliestTime>-4h@m<\/earliestTime>\n          <latestTime>now<\/latestTime>\n        <\/default>\n      <\/input>\n    <\/panel>\n  <\/row>\n\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>Count of Prefiltered Searches<\/title>\n      <input type=\"dropdown\" token=\"SplitByVariable\">\n        <label>Group by<\/label>\n        <showClearButton>false<\/showClearButton>\n        <default>Rule<\/default>\n        <choice value=\"prefilter_rule\">Rule<\/choice>\n        <choice value=\"user\">User<\/choice>\n        <choice value=\"app\">App<\/choice>\n        <choice value=\"search_type\">Search Type<\/choice>\n        <choice value=\"search_name\">Search Name<\/choice>\n        <choice value=\"host\">Instance<\/choice>\n        <set token=\"searchBy\">by $SplitByVariable$<\/set>\n      <\/input>\n      <!-- here we use a pattern:\n       - base search: get counts grouped by metrics\n       - post-process-1: get total count, generate a token to store total\n       - post-process-2: use the $total$ token to calculate percent\n       -->\n      <search id=\"prefiltered_searches_count_base\">\n        <query>\n          `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* prefilter_action=filter\n          | stats count by $SplitByVariable$\n        <\/query>\n        <earliest>$time.earliest$<\/earliest>\n        <latest>$time.latest$<\/latest>\n      <\/search>\n      <search base=\"prefiltered_searches_count_base\">\n        <query>stats sum(count) as total<\/query>\n        <preview>\n          <eval token=\"total_prefiltered_searches\">if(isnotnull('result.total'), 'result.total', 0)<\/eval>\n        <\/preview>\n        <finalized>\n          <eval token=\"total_prefiltered_searches\">if(isnotnull('result.total'), 'result.total', 0)<\/eval>\n        <\/finalized>\n      <\/search>\n      <table>\n        <title>Total: $total_prefiltered_searches$<\/title>\n        <search base=\"prefiltered_searches_count_base\">\n          <query>\n            sort - count\n            | eval percent = round(count / $total_prefiltered_searches$ * 100, 2).\" %\"\n            | rename prefilter_rule as Rule, user as User, app as App, search_type as \"Search Type\", search_name as \"Search Name\", host as Instance, count as Count, percent as \"Percent of Total\"\n          <\/query>\n        <\/search>\n        <option name=\"dataOverlayMode\">heatmap<\/option>\n        <option name=\"drilldown\">none<\/option>\n      <\/table>\n    <\/panel>\n  <\/row>\n\n  <row>\n    <panel>\n      <title>Count of Prefiltered Searches Over Time<\/title>\n      <input type=\"dropdown\" token=\"TimechartSplitByVariable\">\n        <label>Group by<\/label>\n        <showClearButton>false<\/showClearButton>\n        <default>Rule<\/default>\n        <choice value=\"prefilter_rule\">Rule<\/choice>\n        <choice value=\"user\">User<\/choice>\n        <choice value=\"app\">App<\/choice>\n        <choice value=\"search_type\">Search Type<\/choice>\n        <choice value=\"search_name\">Search Name<\/choice>\n        <choice value=\"host\">Instance<\/choice>\n        <set token=\"searchBy\">by $TimechartSplitByVariable$<\/set>\n      <\/input>\n      <chart>\n        <searchString>\n          `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* prefilter_action=filter\n          | `dmc_timechart` partial=f bins=200 count by $TimechartSplitByVariable$\n        <\/searchString>\n        <earliestTime>$time.earliest$<\/earliestTime>\n        <latestTime>$time.latest$<\/latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone<\/option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0<\/option>\n        <option name=\"charting.axisTitleX.visibility\">visible<\/option>\n        <option name=\"charting.axisTitleY.visibility\">visible<\/option>\n        <option name=\"charting.axisTitleY2.visibility\">visible<\/option>\n        <option name=\"charting.axisX.scale\">linear<\/option>\n        <option name=\"charting.axisY.scale\">linear<\/option>\n        <option name=\"charting.axisY2.enabled\">false<\/option>\n        <option name=\"charting.axisY2.scale\">inherit<\/option>\n        <option name=\"charting.chart\">column<\/option>\n        <option name=\"charting.chart.nullValueMode\">connect<\/option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01<\/option>\n        <option name=\"charting.chart.stackMode\">stacked<\/option>\n        <option name=\"charting.chart.style\">shiny<\/option>\n        <option name=\"charting.drilldown\">all<\/option>\n        <option name=\"charting.layout.splitSeries\">0<\/option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle<\/option>\n        <option name=\"charting.legend.placement\">right<\/option>\n        <option name=\"charting.axisTitleX.text\">Time<\/option>\n        <option name=\"charting.axisTitleY.text\"># of searches<\/option>\n        <option name=\"list.drilldown\">full<\/option>\n        <option name=\"list.wrap\">1<\/option>\n        <option name=\"maxLines\">5<\/option>\n        <option name=\"raw.drilldown\">full<\/option>\n        <option name=\"rowNumbers\">false<\/option>\n        <option name=\"table.drilldown\">all<\/option>\n        <option name=\"table.wrap\">1<\/option>\n        <option name=\"type\">list<\/option>\n        <option name=\"wrap\">true<\/option>\n        <option name=\"dataOverlayMode\">none<\/option>\n        <!-- <option name=\"refresh.auto.interval\">300<\/option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* $TimechartSplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]><\/link>\n          <\/condition>\n        <\/drilldown>\n      <\/chart>\n    <\/panel>\n  <\/row>\n\n  <row>\n    <panel>\n      <title>Scheduled Searches Prefiltered<\/title>\n      <table id=\"prefiltered_scheduled_searches\">\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* search_type=\"scheduled*\" prefilter_action=filter\n            | stats count as prefiltered_count by prefilter_rule, user, app, host, search_name\n            | fields search_name, app, user, host, prefilter_rule, prefiltered_count\n            | sort - prefiltered_count\n            | rename search_name as \"Search Name\", app as App, user as User, host as Instance, prefilter_rule as \"Prefiltering Rule Triggered\", prefiltered_count as \"Prefiltered Count\"\n          <\/query>\n          <earliest>$time.earliest$<\/earliest>\n          <latest>$time.latest$<\/latest>\n        <\/search>\n        <option name=\"drilldown\">row<\/option>\n        <drilldown>\n          <set token=\"scheduled_search_drilldown\">$row.Search Name$<\/set>\n          <set token=\"scheduled_search_host_drilldown\">$row.Instance$<\/set>\n        <\/drilldown>\n      <\/table>\n    <\/panel>\n    <panel depends=\"$scheduled_search_drilldown$\">\n      <title>Scheduled Searches Prefiltered Drilldown: $scheduled_search_drilldown$<\/title>\n      <table>\n        <search>\n          <query>\n            | rest [inputlookup dmc_assets | where host = $scheduled_search_host_drilldown|s$ | rename serverName AS splunk_server | return splunk_server] \"/servicesNS/-/-/saved/searches/$scheduled_search_drilldown$\" earliest_time=`time_modifier(-0s@s)` latest_time=`time_modifier(+8d@d)` search=\"is_scheduled=1\" search=\"disabled=0\"\n            | fields cron_schedule, next_scheduled_time, search \n            | rename cron_schedule as \"Cron Schedule\", next_scheduled_time as \"Next Scheduled Time\", search as \"Search\"\n          <\/query>\n          <earliest>$time.earliest$<\/earliest>\n          <latest>$time.latest$<\/latest>\n        <\/search>\n      <\/table>\n      <html>\n        <a data-unset-token=\"scheduled_search_drilldown\">Close this panel<\/a>\n      <\/html>\n    <\/panel>\n  <\/row>\n\n<\/form>",
      "eai:acl.app": "splunk_monitoring_console",
      "eai:acl.sharing": "app",
      "eai:acl.owner": "nobody",
      "updated": "1970-01-01T00:00:00+00:00"
    }
  }
]
