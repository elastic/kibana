# overlays.yaml
overlay: 1.0.0
info:
  title: Overlays for the connector objects and examples
  version: 0.0.1
actions:
  # Fix some optional path parameters
  - target: "$.paths['/api/actions/connector/{id}']['post'].parameters[?(@.name=='id')]"
    description: Remove optional indicator from path parameter
    update:
      required: true
  # Add some connector API examples
  - target: "$.paths['/api/actions/connector/{id}']['post']"
    description: "Add examples to create connector API"
    update: 
      requestBody: 
        content: 
          application/json; Elastic-Api-Version=2023-10-31: 
            examples:
              createEmailConnectorRequest:
                $ref: "../examples/create_email_connector_request.yaml"
              createIndexConnectorRequest:
                $ref: "../examples/create_index_connector_request.yaml"
              createWebhookConnectorRequest:
                $ref: "../examples/create_webhook_connector_request.yaml"
              createXmattersConnectorRequest:
                $ref: "../examples/create_xmatters_connector_request.yaml"
      responses:
        200:
          content:
            application/json; Elastic-Api-Version=2023-10-31:
              examples:
                createEmailConnectorResponse:
                  $ref: "../examples/create_email_connector_response.yaml"
                createIndexConnectorResponse:
                  $ref: "../examples/create_index_connector_response.yaml"
                createWebhookConnectorResponse:
                  $ref: "../examples/create_webhook_connector_response.yaml"
                createXmattersConnectorResponse:
                  $ref: "../examples/get_connector_response.yaml"
  - target: "$.paths['/api/actions/connector/{id}/_execute']['post']"
    description: "Add examples to run connector API"
    update: 
      requestBody: 
        content: 
          application/json; Elastic-Api-Version=2023-10-31: 
            examples:
              runIndexConnectorRequest:
                $ref: "../examples/run_index_connector_request.yaml"
              runJiraConnectorRequest:
                $ref: "../examples/run_jira_connector_request.yaml"
              runServerLogConnectorRequest:
                $ref: "../examples/run_servicenow_itom_connector_request.yaml"
              runSlackConnectorRequest:
                $ref: "../examples/run_slack_api_connector_request.yaml"
              runSwimlaneConnectorRequest:
                $ref: "../examples/run_swimlane_connector_request.yaml"
      responses:
        200:
          content:
            application/json; Elastic-Api-Version=2023-10-31:
              examples:
                runIndexConnectorResponse:
                  $ref: "../examples/run_index_connector_response.yaml"
                runJiraConnectorResponse:
                  $ref: "../examples/run_jira_connector_response.yaml"
                runServerLogConnectorResponse:
                  $ref: "../examples/run_server_log_connector_response.yaml"
                runServiceNowITOMConnectorResponse:
                  $ref: "../examples/run_servicenow_itom_connector_response.yaml"
                runSlackConnectorResponse:
                  $ref: "../examples/run_slack_api_connector_response.yaml"
                runSwimlaneConnectorResponse:
                  $ref: "../examples/run_swimlane_connector_response.yaml"
  - target: "$.paths['/api/actions/connector/{id}']['get']"
    description: "Add examples to get connector API"
    update:
      responses:
        200:
          content:
            application/json; Elastic-Api-Version=2023-10-31:
              examples:
                getConnectorResponse:
                  $ref: '../examples/get_connector_response.yaml'
  - target: "$.paths['/api/actions/connector_types']['get']"
    description: "Add examples to get connector types API"
    update:
      responses:
        200:
          description: Indicates a successful call.
          content:
            application/json; Elastic-Api-Version=2023-10-31:
              examples:
                getConnectorTypesServerlessResponse:
                  $ref: '../examples/get_connector_types_generativeai_response.yaml'
  - target: "$.paths['/api/actions/connectors']['get']"
    description: "Add examples to get all connectors API"
    update:
      responses:
        200:
          description: Indicates a successful call.
          content:
            application/json; Elastic-Api-Version=2023-10-31:
              examples:
                getConnectorsResponse:
                  $ref: '../examples/get_connectors_response.yaml'
  - target: "$.paths['/api/actions/connector/{id}']['put']"
    description: "Add examples to update connector API"
    update: 
      requestBody: 
        content: 
          application/json; Elastic-Api-Version=2023-10-31:
            examples:
              updateIndexConnectorRequest:
                $ref: '../examples/update_index_connector_request.yaml'
  