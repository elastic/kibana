# overlays.yaml
overlay: 1.0.0
info:
  title: Overlays that are applicable to both serverless and non-serverless documents
  version: 0.0.1
actions:
# Add some tag descriptions and displayNames
  - target: '$.tags[?(@.name=="maintenance-window")]'
    description: Change tag description and displayName
    update:
      description: >
        You can schedule single or recurring maintenance windows to temporarily reduce rule notifications.
        For example, a maintenance window prevents false alarms during planned outages.
      externalDocs:
        description: Maintenance window documentation
        url: https://www.elastic.co/docs/explore-analyze/alerts-cases/alerts/maintenance-windows
      x-displayName: 'Maintenance windows'
  - target: '$.tags[?(@.name=="alerting")]'
    description: Change tag description and displayName
    update:
      description: >
        Alerting enables you to define rules, which detect complex conditions within your data.
        When a condition is met, the rule tracks it as an alert and runs the actions that are defined in the rule.
        Actions typically involve the use of connectors to interact with Kibana services or third party integrations.
      externalDocs:
        description: Alerting documentation
        url: https://www.elastic.co/docs/explore-analyze/alerts-cases/alerts
      x-displayName: 'Alerting'
  - target: '$.tags[?(@.name=="connectors")]'
    description: Change tag description and displayName
    update:
      description: >
        Connectors provide a central place to store connection information for services and integrations with Elastic or third party systems.
        Alerting rules can use connectors to run actions when rule conditions are met.
      externalDocs:
        description: Connector documentation
        url: https://www.elastic.co/docs/reference/kibana/connectors-kibana
      x-displayName: 'Connectors'
  - target: '$.tags[?(@.name=="Data streams")]'
    description: Change tag description and displayName
    update:
      description: >
        Data stream APIs enable you to manage data streams, which are collections of indices that share the same index template and are managed as a single unit for time-series data.
      x-displayName: 'Data streams'
  - target: '$.tags[?(@.name=="Elastic Agent actions")]'
    description: Change tag description and displayName
    update:
      description: >
        Elastic Agent actions APIs enable you to manage actions performed on Elastic Agents, including agent reassignment, diagnostics collection, enrollment management, upgrades, and bulk operations for agent lifecycle management.
      x-displayName: 'Elastic Agent actions'
  - target: '$.tags[?(@.name=="Elastic Agent binary download sources")]'
    description: Change tag description and displayName
    update:
      description: >
        Elastic Agent binary download sources APIs enable you to manage download sources for Elastic Agent binaries, including creating, updating, and deleting custom download sources for agent binaries.
      x-displayName: 'Elastic Agent binary download sources'
  - target: '$.tags[?(@.name=="Elastic Agent policies")]'
    description: Change tag description and displayName
    update:
      description: >
        Elastic Agent policies APIs enable you to manage agent policies, including creating, updating, and deleting policies, as well as to retrieve agent policy outputs, manifests, and auto-upgrade status information.
      x-displayName: 'Elastic Agent policies'
  - target: '$.tags[?(@.name=="Elastic Agent status")]'
    description: Change tag description and displayName
    update:
      description: >
        Enables you to retrieve status information about Elastic Agents, including health summaries and operational status.
      x-displayName: 'Elastic Agent status'
  - target: '$.tags[?(@.name=="Elastic Agents")]'
    description: Change tag description and displayName
    update:
      description: >
        Elastic Agents APIs enable you to manage Elastic Agents, including retrieving agent information, managing agent lifecycle, handling file uploads, and initiating agent setup.
      x-displayName: 'Elastic Agents'
  - target: '$.tags[?(@.name=="Fleet enrollment API keys")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet enrollment API keys APIs enable you to manage enrollment API keys for Fleet, including creating, retrieving, and revoking API keys used for agent enrollment.
      x-displayName: 'Fleet enrollment API keys'
  - target: '$.tags[?(@.name=="Fleet internals")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet internals APIs enable you to manage Fleet internal operations, including checking permissions, monitoring Fleet Server health, managing settings, and initiating Fleet setup.
      x-displayName: 'Fleet internals'
  - target: '$.tags[?(@.name=="Fleet outputs")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet outputs APIs enable you to manage Fleet outputs, including creating, updating, and deleting output configurations, generating Logstash API keys, and monitoring output health.
      x-displayName: 'Fleet outputs'
  - target: '$.tags[?(@.name=="Fleet package policies")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet package policies APIs enable you to manage Fleet package policies, including creating, updating, and deleting policies, performing bulk operations, and managing policy upgrades.
      x-displayName: 'Fleet package policies'
  - target: '$.tags[?(@.name=="Fleet proxies")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet proxies APIs enable you to manage Fleet proxies, including creating, updating, and deleting proxy configurations for Fleet agent communication.
      x-displayName: 'Fleet proxies'
  - target: '$.tags[?(@.name=="Fleet Server hosts")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet Server hosts APIs enable you to manage Fleet Server hosts, including creating, updating, and deleting Fleet Server host configurations.
      x-displayName: 'Fleet Server hosts'
  - target: '$.tags[?(@.name=="Fleet uninstall tokens")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet uninstall tokens APIs enable you to manage Fleet uninstall tokens, including retrieving metadata and decrypted tokens for agent uninstallation.
      x-displayName: 'Fleet uninstall tokens'
  - target: '$.tags[?(@.name=="Message Signing Service")]'
    description: Change tag description and displayName
    update:
      description: >
        Enables you to rotate message signing key pairs for secure Fleet communication.
      x-displayName: 'Fleet Message Signing Service'
  - target: '$.tags[?(@.name=="ml")]'
    description: Change tag description and displayName
    update:
      description: >
        Enables you to synchronize machine learning saved objects.
      x-displayName: 'Machine learning'
  - target: '$.tags[?(@.name=="Security Entity Analytics API")]'
    description: Change tag description and displayName
    update:
      description: >
        Use the Security entity analytics APIs to manage entity analytics and risk scoring, including asset criticality, privileged user monitoring, and entity engines.
      x-displayName: 'Security entity analytics'
  - target: '$.tags[?(@.name=="streams")]'
    description: Change tag description and displayName
    update:
      description: >
        Streams is a new and experimental way to manage your data in Kibana (currently experimental - expect changes).
      x-displayName: "Streams"
  - target: '$.tags[?(@.name=="data views")]'
    description: Change displayName
    update:
      x-displayName: "Data views"
  - target: '$.tags[?(@.name=="slo")]'
    description: Change displayName
    update:
      x-displayName: "Service level objectives"
  - target: '$.tags[?(@.name=="spaces")]'
    description: Change displayName
    update:
      x-displayName: "Spaces"
      description: Manage your Kibana spaces.
      externalDocs:
        url: https://www.elastic.co/docs/deploy-manage/manage-spaces
        description: Space overview
  - target: '$.tags[?(@.name=="system")]'
    description: Change displayName and description
    update:
      x-displayName: "System"
      description: >
        Get information about the system status, resource usage, features, and installed plugins.
  - target: '$.tags[?(@.name=="Fleet cloud connectors")]'
    description: Change tag description and displayName
    update:
      description: >
        Fleet cloud connectors APIs enable you to manage Fleet cloud connectors, including creating, updating, and deleting cloud connector configurations for Fleet integrations.
      x-displayName: 'Fleet cloud connectors'
  - target: '$.tags[?(@.name=="Elastic Package Manager (EPM)")]'
    description: Change tag description and displayName
    update:
      description: >
        Elastic Package Manager (EPM) APIs enable you to manage packages and integrations, including installing, updating, and uninstalling packages, managing custom integrations, and handling package assets.
      x-displayName: 'Elastic Package Manager (EPM)'
# Add some spaces API examples
  - target: "$.paths['/api/spaces/space']['post']"
    description: 'Add example to create space API'
    update:
      requestBody:
        content:
          application/json:
            examples:
              createSpaceRequest:
                $ref: '../examples/create_space_request.yaml'
  - target: "$.paths['/api/spaces/space/{id}']['put']"
    description: 'Add example to update space API'
    update:
      requestBody:
        content:
          application/json:
            examples:
              updateSpaceRequest:
                $ref: '../examples/update_space_request.yaml'
  - target: "$.paths['/api/spaces/space/{id}']['get']"
    description: 'Add example to get space API'
    update:
      responses:
        200:
          content:
            application/json:
              examples:
                getSpaceResponseExample:
                  $ref: '../examples/get_space_response.yaml'
  - target: "$.paths['/api/spaces/space']['get']"
    description: 'Add example to get all spaces API'
    update:
      responses:
        200:
          content:
            application/json:
              examples:
                getSpacesResponseExample1:
                  $ref: '../examples/get_spaces_response1.yaml'
                getSpacesResponseExample2:
                  $ref: '../examples/get_spaces_response2.yaml'
# Add an introduction to spaces
  - target: '$'
    description: Add an extra page about spaces
    update:
      x-topics:
        - title: Kibana spaces
          content: |
            Spaces enable you to organize your dashboards and other saved objects into meaningful categories.
            You can use the default space or create your own spaces.

            To run APIs in non-default spaces, you must add `s/{space_id}/` to the path.
            For example:

            ```bash
            curl -X GET "http://${KIBANA_URL}/s/marketing/api/data_views" \
              -H "Authorization: ApiKey ${API_KEY}"
            ```

            If you use the Kibana console to send API requests, it automatically adds the appropriate space identifier.

            To learn more, check out [Spaces](https://www.elastic.co/docs/deploy-manage/manage-spaces).
