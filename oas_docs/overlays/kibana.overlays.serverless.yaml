# overlays.yaml
overlay: 1.0.0
info:
  title: Overlays for the Kibana Serverless API document
  version: 0.0.1
actions:
  - target: '$.servers.*'
    description: Remove all servers so we can add our own.
    remove: true
  - target: '$.servers'
    description: Add server into the now empty server array.
    update:
      - url: https://{kibana_url}
        variables:
          kibana_url:
            default: localhost:5601
  - target: '$.paths["/api/status"][*].tags'
    description: Add tag to the operations in the status endpoint
    update:
      - status
  - target: '$.tags'
    description: Add status tag to the document level tags
    update:
      - name: status
        description: TBD
        x-displayName: status
  # - target: '$.components.securitySchemes'
  #   description: Remove all security schemes so we can add our own.
  #   remove: true
  # - target: '$.components'
  #   description: Add security schemes
  #   update:
  #     securitySchemes:
  #       basicAuth:
  #         type: http
  #         scheme: basic
  #       apiKeyAuth:
  #         type: apiKey
  #         in: header
  #         name: Authorization
  #         description: 'e.g. Authorization: ApiKey base64AccessApiKey'
  # - target: '$.paths["/api/actions/connector"][*].security'
  #   remove: true
