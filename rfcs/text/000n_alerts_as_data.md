- Start Date: (fill me in with today's date, YYYY-MM-DD)
- TTL: (e.g. "April 20th, 2021", time the review is expected to be completed by. Don't use relative days.)
- Champion: (usually you, person who writes and updates the draft and incorporates feedback)
- Main reviewer: (somebody familiar with the subject matter, who has committed to provide timely and detailed reviews for this RFC)
- Owner team: (team who will own implementation, if it is accepted)
- Stakeholders: (people or groups who will be affected by the proposed changes)
- RFC PR: (leave this empty, it will be a link to PR of this RFC)
- PoC PR: (optional, link to a PoC implementation of the feature)
- Kibana Issue: (link to issue where the proposed feature is tracked)

# Executive Summary

Alerts as data is Elastic's way of storing the alerts generated by rules running in the Kibana Alerting System. This RFC outlines the strategy for where and how these alerts will be stored and how access to these data will be managed.

## Problem statement

Users who use the Kibana Alerting System want more insight into their alert history and to have access to these generated alerts so that they can be treated as data to be used like other data in the system. Solutions also need this, so that the alerts generated by their rule types can be easily displayed inside the Solution UIs to enhance the investigative workflows that already exist.

## Goals

_These need work / are not complete!_

- Rule types have the ability to store and update their generated alerts in Elasticsearch
- Rule types have the option of storing each "evaluation event" in Elasticsearch
- Alerts (and events) can be queried by solutions and end users alike, depending on their permissions requirements
- Query-specific goals?
- Access-specific goals?

## Proposal

We propose the creation of a new Kibana plugin that will provide both high and low level library tools to make it simple for rule authors to opt-in to storing the alerts and events generated by their rule types. This plugin may also optionally provide tools for querying these alerts, TBD.

# Who is affected and how

Rule type authors will be affected only insofar as they choose to opt-in to using the tools provided by the new plugin. The Kibana Alerting team may eventually be affected due to the likelihood that these tools will someday be merged back into the Kibana Alerting framework.

# Detailed design

This is the bulk of the RFC. Explain the design in enough detail for somebody
familiar with Kibana to understand, and for somebody familiar with the
implementation to implement. This should get into specifics and corner-cases,
and include examples of how the feature is used. Any new terminology should be
defined here.

Include architectural diagrams if you see fit, a picture is worth a thousand
words.

## Terminology

A glossary of new terms can be very helpful.

# Risks

Why should we _not_ do this? Please consider:

- implementation cost, both in term of code size and complexity
- the impact on teaching people Kibana development
- integration of this feature with other existing and planned features
- cost of migrating existing Kibana plugins (is it a breaking change?)

There are tradeoffs to choosing any path. Attempt to identify them here.

# Alternatives

What other designs have been considered? What is the impact of not doing this?

# Adoption strategy

If we implement this proposal, how will existing Kibana developers adopt it? Is
this a breaking change? Can we write a codemod? Should we coordinate with
other projects or libraries?

# How this scales

Does this change affect Kibana's performance in a substantial way? Have we discovered
the upper bounds before we see performance degradations? Will any load
tests be added to cover these scenarios?

# How we teach this

What names and terminology work best for these concepts and why? How is this
idea best presented? As a continuation of existing Kibana patterns?

Would the acceptance of this proposal mean the Kibana documentation must be
re-organized or altered? Does it change how Kibana is taught to new developers
at any level?

How should this feature be taught to existing Kibana developers?

# Unresolved questions

Optional, but suggested for first drafts. What parts of the design are still
TBD?
