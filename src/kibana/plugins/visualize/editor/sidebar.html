<div class="sidebar-container">
  <form class="sidebar-list"
        ng-class="{'hide-errors': hideErrors}"
        ng-submit="visualizeEditor.$invalid ? dontApply() : stageEditableVis()"
        name="visualizeEditor">
    <ul class="list-unstyled">
      <!-- metrics -->
      <vis-editor-agg-group ng-if="vis.type.schemas.metrics" group-name="metrics"></vis-editor-agg-group>

      <!-- buckets -->
      <vis-editor-agg-group ng-if="vis.type.schemas.buckets" group-name="buckets"></vis-editor-agg-group>

      <!-- vis options -->
      <vis-editor-vis-options
        vis="vis"
        >
      </vis-editor-vis-options>

      <!-- apply/discard -->
      <li class="vis-editor-sidebar-buttons sidebar-item">
        <button
          ng-if="visualizeEditor.$invalid"
          type="button"
          class="text-center text-danger sidebar-item-text">
          <i class="fa fa-warning"></i> {{visualizeEditor.describeErrors()}}
        </button>
        <button
          ng-if="!visualizeEditor.$invalid"
          ng-disabled="!vis.dirty"
          type="submit"
          class="sidebar-item-button success">
          Apply
        </button>
        <button
          ng-disabled="!vis.dirty"
          type="button"
          ng-click="resetEditableVis()"
          class="sidebar-item-button default">
          Discard
        </button>
      </li>
    </ul>
  </form>
</div>