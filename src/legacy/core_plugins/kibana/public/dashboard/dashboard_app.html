<dashboard-app
  class="app-container dshAppContainer"
  ng-class="{'dshAppContainer--withMargins': model.useMargins}"
>
  <!-- Local nav. -->
  <kbn-top-nav
    ng-show="chrome.getVisible()"
    app-name="'dashboard'"
    config="topNavMenu"

    show-search-bar="chrome.getVisible()"
    show-filter-bar="showFilterBar()"
    show-save-query="showSaveQuery"

    filters="model.filters"
    query="model.query"
    saved-query="savedQuery"
    screen-title="screenTitle"
    on-query-submit="updateQueryAndFetch"
    index-patterns="indexPatterns"
    filters="model.filters"
    on-filters-updated="onFiltersUpdated"
    date-range-from="model.timeRange.from"
    date-range-to="model.timeRange.to"
    is-refresh-paused="model.refreshInterval.pause"
    refresh-interval="model.refreshInterval.value"
    on-saved="onQuerySaved"
    on-saved-query-updated="onSavedQueryUpdated"
    on-clear-saved-query="onClearSavedQuery"
    on-refresh-change="onRefreshChange">
  </kbn-top-nav>

  <!--
  The top nav is hidden in embed mode but the filter bar must still be present so
  we show the filter bar on its own here if the chrome is not visible.
-->
  <filter-bar
    ng-if="showFilterBar() && !chrome.getVisible()"
    class-name="'globalFilterGroup__filterBar'"
    filters="model.filters"
    on-filters-updated="onFiltersUpdated"
    index-patterns="indexPatterns"
  ></filter-bar>

  <div ng-show="getShouldShowEditHelp() || getShouldShowViewHelp()" class="dshStartScreen">
    <div class="euiPanel euiPanel--paddingLarge euiPageContent euiPageContent--horizontalCenter">
      <br><br>
      <div ng-show="getShouldShowEditHelp()" class="euiText">
        <dashboard-empty-screen on-link-click="showAddPanel"
                                show-link-to-visualize="true"
                                message-tokens="['kbn.dashboard.addVisualizationDescription1', 'kbn.dashboard.addVisualizationDescription2', 'kbn.dashboard.addVisualizationLinkText',
                                 'kbn.dashboard.addVisualizationLinkAriaLabel']"
                                message-defaults="[ 'Click the ', ' button in the menu bar above to add a visualization to the dashboard.', 'Add', 'Add visualization']"
        />
      </div>

      <div ng-show="getShouldShowViewHelp()" class="euiText">
        <dashboard-empty-screen show-link-to-visualize="false"
                                on-link-click="enterEditMode"
                                message-tokens="['kbn.dashboard.howToStartWorkingOnNewDashboardDescription1', 'kbn.dashboard.howToStartWorkingOnNewDashboardDescription2', 'kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkText',
                                 'kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkAriaLabel']"
                                message-defaults="['Click the ', ' button in the menu bar above to start working on your new dashboard.', 'Edit', 'Edit dashboard']"

        />
      </div>

    </div>
  </div>

  <h1 class="euiScreenReaderOnly">{{screenTitle}}</h1>
  <div id="dashboardViewport"></div>

</dashboard-app>
