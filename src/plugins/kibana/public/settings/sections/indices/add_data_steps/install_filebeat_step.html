<div class="wizard-step-title">
  <h3>Follow these instructions to install Filebeat</h3>
  Now that you've got a fresh pipeline and index pattern, let's throw some data at it!
</div>

<div class="install-filebeat">
  <ol>
    <li>Install Filebeat on all servers on which you want to tail logs
      (<a target="_blank" ng-href="{{installStep.docLinks.installation}}">
        instructions
      </a>)
    </li>

    <li>
      Point Filebeat at the log files you want to tail
      (<a target="_blank" ng-href="{{installStep.docLinks.configuration}}">
        instructions
      </a>)
    </li>

    <li ng-if="installStep.results.pipeline.processors.length">
      Configure Filebeat to send data through your new Elasticsearch pipeline
      (<a target="_blank" ng-href="{{installStep.docLinks.elasticsearchOutput}}">
        instructions
      </a>)<br />
      At minimum you'll need to configure Filebeat's Elasticsearch output with a hostname, an index name, and a
      <a target="_blank" ng-href="{{installStep.docLinks.elasticsearchOutputAnchorParameters}}">
        paramaters
      </a> block. Your config should end up looking something like this:<br /><br />
      <pre>
output:
 elasticsearch:
   hosts: ["your-elasticsearch-host"]
   index: "your-base-index-name"
   parameters:
     pipeline: "{{installStep.pipelineId}}"</pre>
      <em>NOTE</em>: The Filebeat config takes a base index name and automatically rotates the target index by appending "-{date}"
      to the end, so if your pattern was "filebeat-*" you would make the index name "filebeat" in filebeat.yml.<br /><br />
    </li>


    <li ng-if="!installStep.results.pipeline.processors.length">
      Configure Filebeat to send data to Elasticsearch
      (<a target="_blank" href="https://www.elastic.co/guide/en/beats/filebeat/master/elasticsearch-output.html">
      instructions
    </a>)<br />
      At minimum you'll need to configure Filebeat's Elasticsearch output with a hostname and an index name.
      Your config should end up looking something like this:<br /><br />
      <pre>
output:
 elasticsearch:
   hosts: ["your-elasticsearch-host"]
   index: "your-base-index-name"</pre>
      <em>NOTE</em>: The Filebeat config takes a base index name and automatically rotates the target index by appending "-{date}"
      to the end, so if your pattern was "filebeat-*" you would make the index name "filebeat" in filebeat.yml.<br /><br />
    </li>

    <li ng-if="installStep.results.indexPattern.id !== 'filebeat-*'">
      Edit <code>filebeat.template.json</code> (in the Filebeat directory). The line that reads
      <code>"template": "filebeat-*"</code> should become
      <code>"template": "{{ installStep.results.indexPattern.id }}"</code>.
    </li>

    <li>Run Filebeat on each server
      (<a target="_blank" ng-href="{{installStep.docLinks.startup}}">
        instructions
      </a>)
    </li>
    <li>Verify your filebeat installation below. We'll poll your new index pattern for documents and let you know when
      they show up. If you'd like to skip this step, simply click Done now.
    </li>
  </ol>
</div>

<pattern-checker pattern="installStep.results.indexPattern.id"/>
