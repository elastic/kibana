<kbn-settings-app section="indices">
  <kbn-settings-indices>
    <div ng-controller="settingsIndicesCreate" class="kbn-settings-indices-create">
      <div class="page-header">
        <h1>Configure an index pattern</h1>
        In order to use Kibana you must configure at least one index pattern. Index patterns are
        used to identify the Elasticsearch index to run search and analytics against. They are also
        used to configure fields.
      </div>
      <div>
        <form name="form" role="form" class="well" ng-submit="createIndexPattern()">
          <div class="form-group">
            <label>
              Index name or pattern
            </label>
            <p class="help-block">Patterns allow you to define dynamic index names using * as a wildcard. Example: logstash-*</p>
            <input
              ng-model="index.name"
              ng-attr-placeholder="{{index.defaultName}}"
              ng-model-options="{ updateOn: 'default blur', debounce: {'default': 2500, 'blur': 0} }"
              validate-index-name
              name="name"
              required
              type="text"
              class="form-control">
            </div>

          <div class="form-group time-and-pattern" ng-if="!index.fetchFieldsError">
            <label>
              <input
                ng-model="index.isTimeBased"
                type="checkbox">
              Index contains time-based events
            </label>
          </div>

          <div class="form-group" ng-if="index.isTimeBased && !index.fetchFieldsError">
            <label>
              Time-field name
              &nbsp;
              <kbn-info info="This field will be used to filter events with the global time filter"></kbn-info>
              &nbsp;
              <small>
                <a ng-click="refreshFieldList();"> refresh fields</a>
              </small>
            </label>
            <select
              required
              ng-if="!index.fetchFieldsError"
              ng-options="field.name for field in index.dateFields"
              ng-model="index.timeField"
              auto-select-if-only-one="index.dateFields"
              class="form-control">
            </select>
          </div>

          <button
            ng-disabled="form.$invalid || index.fetchFieldsError"
            ng-class="index.fetchFieldsError ? 'btn-default' : 'btn-success'"
            type="submit"
            class="btn">
            <span ng-hide="form.name.$error.indexNameInput">{{index.fetchFieldsError || "Create" }}</span>
            <span ng-show="form.name.$error.indexNameInput">Invalid index name pattern.</span>
          </button>
        </form>
      </div>
    </div>
  </kbn-settings-indices>
</kbn-settings-app>
