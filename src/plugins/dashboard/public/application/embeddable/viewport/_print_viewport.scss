
/*
Global print styling
*/
$a4PageHeight: 297mm;
$a4PageWidth: 210mm;
$a4PageMargin: 0;
$a4PagePadding: 0;

@page {
  size: A4;
  orientation: portrait;
  margin: $a4PageMargin;
  padding: $a4PagePadding;
}

@mixin globalPrintRules {
  html {
    background-color: #FFF;
  }

  a[href]:after {
    content: ' [' attr(href) ']';
  }

  figure {
    break-inside: avoid;
  }

  * {
    -webkit-print-color-adjust: exact !important;   /* Chrome, Safari, Edge */
    color-adjust: exact !important;                 /*Firefox*/
  }
}

/*
Dashboard styling
*/
$visualisationsPerPage: 2;
$visPadding: 2mm;

/*
We set the same visual padding on the browser and print versions of the UI so that
we don't hit a race condition where padding is being updated while the print image
is being formed. This can result in parts of the vis being cut out.
*/
@mixin visualizationPadding {
  padding-left: $visPadding;
  padding-right: $visPadding;

  &:nth-child(2n - 1) {
    padding-top: $visPadding;
  }

  &:nth-child(#{$visualisationsPerPage}n) {
    page-break-after: always;
    padding-top: $visPadding;
    padding-bottom: $visPadding;
  }
}

@media screen, projection {
  .printViewport {
    &__vis {
      @include visualizationPadding();

      & .embPanel__header button {
        display: none;
      }

      margin: $euiSizeL auto;
      height: calc(#{$a4PageHeight} / #{$visualisationsPerPage});
      width: $a4PageWidth;
      padding: $visPadding;
    }
  }
}

@media print {
  @include globalPrintRules();

  .printViewport {
    &__vis {

      @include visualizationPadding();

      height: calc(#{$a4PageHeight} / #{$visualisationsPerPage});
      width: $a4PageWidth;

      & .euiPanel {
        box-shadow: none !important;
      }

      & .embPanel__header button {
        display: none;
      }

      page-break-inside: avoid;

      & * {
        overflow: hidden !important;
      }
    }
  }
}
