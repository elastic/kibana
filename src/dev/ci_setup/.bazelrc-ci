# Inspired on https://github.com/angular/angular/blob/master/.circleci/bazel.linux.rc
# These options are only enabled when running on CI
# That is done by copying this file into "$HOME/.bazelrc" which loads after the .bazelrc into the workspace

# Import and load bazelrc common settings for ci env
try-import %workspace%/src/dev/ci_setup/.bazelrc-ci.common

common --define=VERBOSE_LOGS=1

## Cache action outputs on disk so they persist across output_base and bazel shutdown (eg. changing branches)
common --disk_cache=~/.bazel-cache/disk-cache

## Bazel repo cache settings
common --repository_cache=~/.bazel-cache/repository-cache

# BuildBuddy settings
## Remote settings including cache
build --bes_results_url=https://app.buildbuddy.io/invocation/
build --bes_backend=grpcs://cloud.buildbuddy.io
build --remote_cache=grpcs://127.0.0.2:8765
build --remote_timeout=10

## Metadata settings
build --build_metadata=ROLE=CI
