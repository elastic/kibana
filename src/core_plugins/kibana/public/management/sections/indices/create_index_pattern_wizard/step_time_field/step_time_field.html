<form
  role="form"
  ng-submit="stepTimeField.createIndexPattern()"
  class="kuiPanel"
>
  <div class="kuiPanelHeader">
    <div class="kuiPanelHeaderSection">
      <h1
        class="kuiPanelHeader__title"
        translate="KIBANA-CREATE_INDEX_PATTERN_STEP_2_TITLE"
      ></h1>
    </div>
  </div>

  <div class="kuiPanelBody">
    <h2
      class="kuiSubTitle kuiVerticalRhythm"
      translate="KIBANA-CREATE_INDEX_PATTERN_STEP_2_SUB_TITLE"
      translate-values="{ indexPatternName: stepTimeField.indexPatternName }"
    ></h2>

    <!-- Time field select -->
    <div class="kuiVerticalRhythm">
      <div class="kuiVerticalRhythmSmall timeFieldNameLabel">
        <label
          id="timeFilterFieldSelectLabel"
          class="kuiLabel "
          for="timeFilterFieldSelect"
          translate="KIBANA-CREATE_INDEX_PATTERN_STEP_2_TIME_FIELD_LABEL"
        ></label>

        <a
          ng-if="!stepTimeField.isFetchingTimeFieldOptions"
          class="kuiLink kuiSubText"
          ng-click="stepTimeField.fetchTimeFieldOptions()"
          kbn-accessible-click
          translate="KIBANA-REFRESH_FIELDS"
          aria-describedby="timeFilterFieldSelectLabel"
        ></a>

        <p
          ng-if="stepTimeField.isFetchingTimeFieldOptions"
          class="kuiText kuiSubduedText"
        >
          <span class="kuiIcon fa-spinner fa-spin"></span>
        </p>
      </div>

      <div class="kuiVerticalRhythmSmall kuiVerticalRhythm">
        <select
          id="timeFilterFieldSelect"
          aria-describedby="timeFilterFieldSelectHelpText"
          class="kuiSelect kuiSelect--large"
          data-test-subj="createIndexPatternTimeFieldSelect"
          ng-disabled="stepTimeField.isTimeFieldSelectDisabled()"
          ng-required="stepTimeField.timeFieldOptions.length"
          ng-options="option.display for option in stepTimeField.timeFieldOptions"
          ng-model="stepTimeField.selectedTimeFieldOption"
        ></select>
      </div>

      <p
        id="timeFilterFieldSelectHelpText"
        class="kuiText kuiSubduedText kuiVerticalRhythm"
        translate="KIBANA-CREATE_INDEX_PATTERN_STEP_2_TIME_FIELD_HELP"
      ></p>
    </div>

    <!-- Expand index pattern checkbox -->
    <div
      class="kuiVerticalRhythm"
      ng-if="stepTimeField.canEnableExpandWildcard()"
    >
      <label
        class="kuiLabel kuiVerticalRhythmSmall"
        for="expandIndexPatternCheckBox"
      >
        Expand index pattern (DEPRECATED)
      </label>

      <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall kuiVerticalRhythm">
        <input
          id="expandIndexPatternCheckBox"
          aria-describedby="expandIndexPatternCheckBoxHelpText"
          class="kuiCheckBox"
          type="checkbox"
          data-test-subj="createIndexPatternEnableExpand"
          ng-model="stepTimeField.expandWildcard"
        >
        <span class="kuiCheckBoxLabel__text">
          <span translate="KIBANA-EXPAND_INDEX_PATTERN"></span>
        </span>
      </label>

      <!-- Checkbox help text -->
      <div
        id="expandIndexPatternCheckBoxHelpText"
        class="kuiVerticalRhythm"
      >
        <p
          class="kuiText kuiSubduedText kuiVerticalRhythmSmall"
          translate="KIBANA-EXPAND_INDEX_PATTERN_HELP_1"
        ></p>

        <p
          class="kuiText kuiSubduedText kuiVerticalRhythmSmall"
          translate="KIBANA-EXPAND_INDEX_PATTERN_HELP_2"
        ></p>

        <p
          class="kuiText kuiSubduedText kuiVerticalRhythmSmall"
          translate="KIBANA-EXPAND_INDEX_PATTERN_HELP_3"
        ></p>
      </div>
    </div>

    <!-- Actions -->
    <div class="kuiBar kuiVerticalRhythm">
      <div class="kuiBarSection">
        <div class="kuiButtonGroup">
          <button
            class="kuiButton kuiButton--secondary kuiButton--iconText"
            ng-click="stepTimeField.goToPreviousStep()"
          >
            <span class="kuiButton__inner">
              <span aria-hidden="true" class="kuiButton__icon kuiIcon fa-chevron-left"></span>
              <span>Back</span>
            </span>
          </button>

          <button
            data-test-subj="createIndexPatternCreateButton"
            ng-disabled="!stepTimeField.canCreateIndexPattern()"
            class="kuiButton kuiButton--primary"
            type="submit"
            translate="KIBANA-CREATE_INDEX_PATTERN_STEP_2_SUBMIT_BUTTON"
          ></button>
        </div>
      </div>
    </div>
  </div>
</form>
