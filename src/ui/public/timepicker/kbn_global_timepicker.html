<div
  ng-show="timefilterValues.isAutoRefreshSelectorEnabled || timefilterValues.isTimeRangeSelectorEnabled"
  data-shared-timefilter-from="{{ getSharedTimeFilterFromDate() }}"
  data-shared-timefilter-to="{{ getSharedTimeFilterToDate() }}"
  class="kuiLocalMenu"
  data-test-subj="globalTimepicker"
>
  <button
    class="kuiLocalMenuItem"
    aria-label="{{ timefilterValues.refreshInterval.pause ? 'Resume refreshing data' : 'Pause refreshing data' }}"
    ng-click="toggleRefresh()"
    ng-show="timefilterValues.isAutoRefreshSelectorEnabled && (timefilterValues.refreshInterval.value > 0)"
    data-test-subj="globalTimepickerAutoRefreshButton"
    data-test-subj-state="{{ timefilterValues.refreshInterval.pause ? 'inactive' : 'active' }}"
  >
    <span
      class="kuiIcon"
      aria-hidden="true"
      ng-class="timefilterValues.refreshInterval.pause ? 'fa-play' : 'fa-pause'"
    ></span>
  </button>

  <button
    class="kuiLocalMenuItem navbar-timepicker-auto-refresh-desc"
    ng-class="{'kuiLocalMenuItem-isSelected': kbnTopNav.isCurrent('interval') }"
    ng-show="timefilterValues.isAutoRefreshSelectorEnabled"
    ng-click="kbnTopNav.toggle('interval')"
  >
    <span ng-show="timefilterValues.refreshInterval.value === 0">
      <span aria-hidden="true" class="kuiIcon fa-repeat"></span> Auto-refresh
    </span>

    <span
      ng-show="timefilterValues.refreshInterval.value > 0"
      aria-label="Data will refresh every {{timefilterValues.display.refreshInterval}}"
    >
      {{ timefilterValues.display.refreshInterval }}
    </span>
  </button>

  <new-kbn-timepicker
    from="timefilterValues.time.from"
    to="timefilterValues.time.to"
    set-time="updateFilter"
  />
</div>
