<div style="position: absolute; top: 31px; right: 43px; width: 50%; z-index: 10; background: white; padding: 10px; border: 1px solid lightgray; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; border-top: none;">
  <div class="row" ng-repeat="helper in filterHelper.helpers" style="padding: 0.5em 0">
    <div class="col-md-3">
      <ui-select
        ng-model="helper.field"
        on-select="filterHelper.refreshSuggestions(helper.field)"
      >
        <ui-select-match>
          {{$select.selected.name}}
        </ui-select-match>
        <ui-select-choices repeat="field.name as field in indexPattern.fields | orderBy:'name' | filter:$select.search ">
          <div ng-bind-html="field.name"></div>
        </ui-select-choices>
      </ui-select>
    </div>
    <div class="col-md-2">
      <select
        class="form-control"
        ng-model="helper.type"
        ng-options="type.label for type in filterHelper.filterTypesByField(filterHelper.types, helper.field)"
      ></select>
    </div>
    <div class="col-md-5" ng-if="helper.type.id === 'query.match'">
      <ui-select ng-model="helper.params.query">
        <ui-select-match>
          {{$select.selected}}
        </ui-select-match>
        <ui-select-choices
          repeat="value in filterHelper.suggestions[helper.field] | orderBy:'valueOf()'"
          refresh="filterHelper.refreshSuggestions(helper.field, $select.search)"
          refresh-delay="0"
        >
          <div ng-bind-html="value"></div>
        </ui-select-choices>
      </ui-select>
    </div>
    <div class="col-md-5" ng-if="helper.type.id === 'query.terms'">
      <ui-select ng-model="helper.params.terms" multiple>
        <ui-select-match>
          {{$item}}
        </ui-select-match>
        <ui-select-choices
          repeat="value in filterHelper.suggestions[helper.field] | orderBy:'valueOf()'"
          refresh="filterHelper.refreshSuggestions(helper.field, $select.search)"
          refresh-delay="0"
        >
          <div ng-bind-html="value"></div>
        </ui-select-choices>
      </ui-select>
    </div>
    <div class="col-md-2" ng-if="helper.type.id === 'range'">
        <input ng-model="helper.params.gte" type="number" class="form-control" />
    </div>
    <div class="col-md-1" ng-if="helper.type.id === 'range'">and</div>
    <div class="col-md-2" ng-if="helper.type.id === 'range'">
        <input ng-model="helper.params.lt" type="number" class="form-control" />
    </div>
    <div class="col-md-5" ng-if="helper.type.id === 'exists'"></div>
    <div class="col-md-2 text-right">
      <button class="kuiButton kuiButton--default kuiButton--iconText" ng-click="filterHelper.removeHelper(helper)">
        <span class="kuiButton__icon kuiIcon fa-trash"></span>
      </button>
    </div>
  </div>
  <div class="row" style="padding: 0.5em 0">
    <div class="col-md-2">
      <button class="kuiButton kuiButton--default kuiButton--iconText" ng-click="filterHelper.addHelper()">
        <span class="kuiButton__icon kuiIcon fa-plus"></span>
        Add a filter
      </button>
    </div>
      <div class="col-md-10 text-right">
        <button class="kuiButton kuiButton--primary kuiButton--iconText" ng-click="filterHelper.applyHelpers()">
          <span class="kuiButton__icon kuiIcon fa-search"></span>
          Search
        </button>
      </div>
  </div>
</div>
