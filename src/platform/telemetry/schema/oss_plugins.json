{
  "properties": {
    "dashboard": {
      "properties": {
        "panels": {
          "properties": {
            "total": {
              "type": "long"
            },
            "by_reference": {
              "type": "long"
            },
            "by_value": {
              "type": "long"
            },
            "by_type": {
              "properties": {
                "DYNAMIC_KEY": {
                  "properties": {
                    "total": {
                      "type": "long",
                      "_meta": {
                        "description": "The number of panels that have been added to all dashboards."
                      }
                    },
                    "by_reference": {
                      "type": "long",
                      "_meta": {
                        "description": "The number of \"by reference\" panels that have been added to all dashboards."
                      }
                    },
                    "by_value": {
                      "type": "long",
                      "_meta": {
                        "description": "The number of \"by value\" panels that have been added to all dashboards."
                      }
                    },
                    "details": {
                      "properties": {
                        "DYNAMIC_KEY": {
                          "type": "long",
                          "_meta": {
                            "description": "Collection of telemetry metrics that embeddable service reports. Embeddable service internally calls each embeddable, which in turn calls its dynamic actions, which calls each drill down attached to that embeddable."
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "controls": {
          "properties": {
            "total": {
              "type": "long"
            },
            "by_type": {
              "properties": {
                "DYNAMIC_KEY": {
                  "properties": {
                    "total": {
                      "type": "long",
                      "_meta": {
                        "description": "The number of this type of control in all Control Groups"
                      }
                    },
                    "details": {
                      "properties": {
                        "DYNAMIC_KEY": {
                          "type": "long",
                          "_meta": {
                            "description": "Collection of telemetry metrics that embeddable service reports. Will be used for details which are specific to the current control type"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "ignore_settings": {
              "properties": {
                "DYNAMIC_KEY": {
                  "type": "long",
                  "_meta": {
                    "description": "Collection of telemetry metrics that count the number of control groups which have this ignore setting turned on"
                  }
                }
              }
            },
            "chaining_system": {
              "properties": {
                "DYNAMIC_KEY": {
                  "type": "long",
                  "_meta": {
                    "description": "Collection of telemetry metrics that count the number of control groups which are using this chaining system"
                  }
                }
              }
            },
            "label_position": {
              "properties": {
                "DYNAMIC_KEY": {
                  "type": "long",
                  "_meta": {
                    "description": "Collection of telemetry metrics that count the number of control groups which have their labels in this position"
                  }
                }
              }
            }
          }
        }
      }
    },
    "files": {
      "properties": {
        "countByExtension": {
          "type": "array",
          "items": {
            "properties": {
              "extension": {
                "type": "keyword"
              },
              "count": {
                "type": "long"
              }
            }
          }
        },
        "countByStatus": {
          "properties": {
            "AWAITING_UPLOAD": {
              "type": "long",
              "_meta": {
                "description": "Number of files awaiting upload"
              }
            },
            "DELETED": {
              "type": "long",
              "_meta": {
                "description": "Number of files that are marked as deleted"
              }
            },
            "READY": {
              "type": "long",
              "_meta": {
                "description": "Number of files that are ready for download"
              }
            },
            "UPLOADING": {
              "type": "long",
              "_meta": {
                "description": "Number of files that are currently uploading"
              }
            },
            "UPLOAD_ERROR": {
              "type": "long",
              "_meta": {
                "description": "Number of files that failed to upload"
              }
            }
          }
        },
        "storage": {
          "properties": {
            "esFixedSizeIndex": {
              "properties": {
                "capacity": {
                  "type": "long",
                  "_meta": {
                    "description": "Capacity of the fixed size index"
                  }
                },
                "available": {
                  "type": "long",
                  "_meta": {
                    "description": "Available storage in bytes"
                  }
                },
                "used": {
                  "type": "long",
                  "_meta": {
                    "description": "Used storage in bytes"
                  }
                }
              }
            }
          }
        }
      }
    },
    "index-patterns": {
      "properties": {
        "indexPatternsCount": {
          "type": "long"
        },
        "indexPatternsWithScriptedFieldCount": {
          "type": "long"
        },
        "indexPatternsWithRuntimeFieldCount": {
          "type": "long"
        },
        "scriptedFieldCount": {
          "type": "long"
        },
        "runtimeFieldCount": {
          "type": "long"
        },
        "perIndexPattern": {
          "properties": {
            "scriptedFieldCount": {
              "properties": {
                "min": {
                  "type": "long"
                },
                "max": {
                  "type": "long"
                },
                "avg": {
                  "type": "float"
                }
              }
            },
            "runtimeFieldCount": {
              "properties": {
                "min": {
                  "type": "long"
                },
                "max": {
                  "type": "long"
                },
                "avg": {
                  "type": "float"
                }
              }
            },
            "scriptedFieldLineCount": {
              "properties": {
                "min": {
                  "type": "long"
                },
                "max": {
                  "type": "long"
                },
                "avg": {
                  "type": "float"
                }
              }
            },
            "runtimeFieldLineCount": {
              "properties": {
                "min": {
                  "type": "long"
                },
                "max": {
                  "type": "long"
                },
                "avg": {
                  "type": "float"
                }
              }
            }
          }
        }
      }
    },
    "kql": {
      "properties": {
        "optInCount": {
          "type": "long"
        },
        "optOutCount": {
          "type": "long"
        },
        "defaultQueryLanguage": {
          "type": "keyword"
        }
      }
    },
    "sample-data": {
      "properties": {
        "installed": {
          "type": "array",
          "items": {
            "type": "keyword"
          }
        },
        "last_install_date": {
          "type": "date"
        },
        "last_install_set": {
          "type": "keyword"
        },
        "last_uninstall_date": {
          "type": "date"
        },
        "last_uninstall_set": {
          "type": "keyword"
        },
        "uninstalled": {
          "type": "array",
          "items": {
            "type": "keyword"
          }
        }
      }
    },
    "search": {
      "properties": {
        "successCount": {
          "type": "long"
        },
        "errorCount": {
          "type": "long"
        },
        "averageDuration": {
          "type": "float"
        }
      }
    },
    "search-session": {
      "properties": {
        "transientCount": {
          "type": "long"
        },
        "persistedCount": {
          "type": "long"
        },
        "totalCount": {
          "type": "long"
        }
      }
    },
    "static_telemetry": {
      "properties": {
        "ece": {
          "properties": {
            "kb_uuid": {
              "type": "keyword"
            },
            "es_uuid": {
              "type": "keyword"
            },
            "account_id": {
              "type": "keyword"
            },
            "license": {
              "properties": {
                "uuid": {
                  "type": "keyword"
                },
                "type": {
                  "type": "keyword"
                },
                "issued_to": {
                  "type": "text"
                },
                "issuer": {
                  "type": "text"
                },
                "issue_date_in_millis": {
                  "type": "long"
                },
                "start_date_in_millis": {
                  "type": "long"
                },
                "expiry_date_in_millis": {
                  "type": "long"
                },
                "max_resource_units": {
                  "type": "long"
                }
              }
            }
          }
        },
        "ess": {
          "properties": {
            "kb_uuid": {
              "type": "keyword"
            },
            "es_uuid": {
              "type": "keyword"
            },
            "account_id": {
              "type": "keyword"
            },
            "license": {
              "properties": {
                "uuid": {
                  "type": "keyword"
                },
                "type": {
                  "type": "keyword"
                },
                "issued_to": {
                  "type": "text"
                },
                "issuer": {
                  "type": "text"
                },
                "issue_date_in_millis": {
                  "type": "long"
                },
                "start_date_in_millis": {
                  "type": "long"
                },
                "expiry_date_in_millis": {
                  "type": "long"
                },
                "max_resource_units": {
                  "type": "long"
                }
              }
            }
          }
        },
        "eck": {
          "properties": {
            "operator_uuid": {
              "type": "keyword"
            },
            "operator_roles": {
              "type": "keyword"
            },
            "custom_operator_namespace": {
              "type": "boolean"
            },
            "distribution": {
              "type": "text"
            },
            "build": {
              "properties": {
                "hash": {
                  "type": "text"
                },
                "date": {
                  "type": "date"
                },
                "version": {
                  "type": "keyword"
                }
              }
            }
          }
        }
      }
    },
    "telemetry": {
      "properties": {
        "opt_in_status": {
          "type": "boolean"
        },
        "usage_fetcher": {
          "type": "keyword"
        },
        "last_reported": {
          "type": "long"
        },
        "labels": {
          "type": "pass_through",
          "_meta": {
            "description": "Custom labels added to the telemetry.labels config in the kibana.yml"
          }
        }
      }
    },
    "usage_collector_stats": {
      "properties": {
        "total_duration": {
          "type": "long",
          "_meta": {
            "description": "The total execution duration to grab usage stats for all collectors in milliseconds"
          }
        },
        "total_is_ready_duration": {
          "type": "long",
          "_meta": {
            "description": "The total execution duration of the isReady function for all collectors in milliseconds"
          }
        },
        "total_fetch_duration": {
          "type": "long",
          "_meta": {
            "description": "The total execution duration of the fetch function for all ready collectors in milliseconds"
          }
        },
        "is_ready_duration_breakdown": {
          "type": "array",
          "items": {
            "properties": {
              "name": {
                "type": "keyword",
                "_meta": {
                  "description": "The name of the collector"
                }
              },
              "duration": {
                "type": "long",
                "_meta": {
                  "description": "The execution duration of the isReady function for the collector in milliseconds"
                }
              }
            }
          }
        },
        "fetch_duration_breakdown": {
          "type": "array",
          "items": {
            "properties": {
              "name": {
                "type": "keyword",
                "_meta": {
                  "description": "The name of the collector"
                }
              },
              "duration": {
                "type": "long",
                "_meta": {
                  "description": "The execution duration of the fetch function for the collector in milliseconds"
                }
              }
            }
          }
        },
        "not_ready": {
          "properties": {
            "count": {
              "type": "short",
              "_meta": {
                "description": "The number of collectors that returned false from the isReady function"
              }
            },
            "names": {
              "type": "array",
              "items": {
                "type": "keyword",
                "_meta": {
                  "description": "The name of the of collectors that returned false from the isReady function"
                }
              }
            }
          }
        },
        "not_ready_timeout": {
          "properties": {
            "count": {
              "type": "short",
              "_meta": {
                "description": "The number of collectors that timedout during the isReady function"
              }
            },
            "names": {
              "type": "array",
              "items": {
                "type": "keyword",
                "_meta": {
                  "description": "The name of collectors that timedout during the isReady function"
                }
              }
            }
          }
        },
        "succeeded": {
          "properties": {
            "count": {
              "type": "short",
              "_meta": {
                "description": "The number of collectors that returned true from the fetch function"
              }
            },
            "names": {
              "type": "array",
              "items": {
                "type": "keyword",
                "_meta": {
                  "description": "The name of the of collectors that returned true from the fetch function"
                }
              }
            }
          }
        },
        "failed": {
          "properties": {
            "count": {
              "type": "short",
              "_meta": {
                "description": "The number of collectors that threw an error from the fetch function"
              }
            },
            "names": {
              "type": "array",
              "items": {
                "type": "keyword",
                "_meta": {
                  "description": "The name of the of collectors that threw an error from the fetch function"
                }
              }
            }
          }
        }
      }
    }
  }
}
